var pG = Object.defineProperty;
var vG = (e, t, r) => t in e ? pG(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r;
var hM = (e, t, r) => vG(e, typeof t != "symbol" ? t + "" : t, r);
import { I as mr, B as xt, c as $h, C as Zc, D as La, a as Ra, S as cy, d as gG, b as iP } from "./chunks/Switch-CQj_EZyS.js";
import { j as x } from "./chunks/jsx-runtime-DGlMoOmv.js";
import * as T from "react";
import se, { useState as Ze, useEffect as Oe, forwardRef as Nt, memo as Ue, useContext as oo, createContext as Xc, useMemo as Gt, useRef as Ve, useCallback as Te, createElement as Sc, useLayoutEffect as Hh, useImperativeHandle as aP, PureComponent as mG, isValidElement as pM, version as yG, cloneElement as xG, Fragment as bG } from "react";
import { t as me, c as fe } from "./chunks/bundle-mjs-C7_IOFkA.js";
import { h as oP, r as sP, s as lP, m as uP, l as wG, k as cP, T as Lg, N as fP, t as _G, v as SG, w as Kc, E as dP, x as dr, y as rS, z as CG, B as TG, P as nS, D as Ui, G as AG, H as Qn, I as MG, J as G0, K as ld, L as sa, Q as EG, U as DG, V as NG, W as IG, X as LG, Y as RG, Z as Dp, _ as PG, $ as kG, a0 as OG, a1 as zG, a2 as jG, a3 as VG, a4 as BG, a5 as FG, a6 as $G, a7 as HG, a8 as GG, a9 as WG, A as UG, u as fy, C as iS, i as YG, M as ZG, R as XG, f as KG, S as qG, g as JG, aa as QG } from "./chunks/FormSubmitButton-C0poo5f0.js";
import { j as wLe, q as _Le, p as SLe, O as CLe, n as TLe, o as ALe, d as MLe, e as ELe, b as DLe } from "./chunks/FormSubmitButton-C0poo5f0.js";
import { D as eW, S as tW, B as rW, C as nW, R as iW } from "./chunks/Container-Ccr3pH5t.js";
import { c as ILe, a as LLe, d as RLe, L as PLe, b as kLe } from "./chunks/Container-Ccr3pH5t.js";
import { b as qc, E as Il, c as al } from "./chunks/types-CglsW3cy.js";
import { A as zLe, a as jLe, u as VLe, d as BLe } from "./chunks/types-CglsW3cy.js";
import { A as $Le, S as HLe, a as GLe, p as WLe, t as ULe, d as YLe, u as ZLe, c as XLe, b as KLe } from "./chunks/hooks-CRcCIO8n.js";
import { g as Jc } from "./chunks/id-CKhXHm5z.js";
import { F as JLe, h as QLe, g as e4e, M as t4e, R as r4e, i as n4e, S as i4e, m as a4e, a as o4e, b as s4e, u as l4e, d as u4e, f as c4e, e as f4e, c as d4e } from "./chunks/SlideInPanel-_-WJDnls.js";
import { b as aS, C as xl } from "./chunks/Code-ByJVBsFo.js";
import { i as p4e, c as v4e, d as g4e, e as m4e, f as y4e, g as x4e, h as b4e, H as w4e, L as _4e, a as S4e, T as C4e } from "./chunks/Code-ByJVBsFo.js";
import { u as Kd, S as aW, P as Qc, T as oW, a as oS, b as Cc, D as sS, c as hP, d as lS, v as uS, s as cS, K as fS, e as dS, f as hS, g as pS, G as pP, C as vP, h as sW, i as lW, j as uW, k as cW } from "./chunks/Card-CrJ5Px_d.js";
import { L as A4e } from "./chunks/Card-CrJ5Px_d.js";
import * as dy from "react-dom";
import gP, { createPortal as fW } from "react-dom";
import { c as ct, I as Nr } from "./chunks/createLucideIcon-CKrNh_SW.js";
import { I as bl } from "./chunks/Icon-M9fKXJ9V.js";
import { T as dW, M as Pa } from "./chunks/Toast-DRArCfQa.js";
import { S as E4e, a as D4e } from "./chunks/Toast-DRArCfQa.js";
import { G as hW } from "./chunks/Grid-tSjtyEZ8.js";
import { X as ef } from "./chunks/x-_6rYSRXj.js";
import { B as I4e, T as L4e } from "./chunks/Breadcrumb-Ry1PO547.js";
import { P as P4e } from "./chunks/Pagination-Blu6pSap.js";
import { a as vS, C as hy } from "./chunks/chevron-left-BSNIzxpu.js";
import { format as kr, subDays as Nd, addDays as Go, parseISO as ol, isSameDay as mP, addMonths as vM, startOfMonth as sl, startOfWeek as gM, isSameMonth as pW } from "date-fns";
import vW from "@fullcalendar/react";
import gW from "@fullcalendar/daygrid";
import mW from "@fullcalendar/timegrid";
import yW from "@fullcalendar/interaction";
const yP = T.createContext(void 0), gS = () => {
  const e = T.useContext(yP);
  if (!e)
    throw new Error("usePopover must be used within a Popover");
  return e;
}, xW = ({ children: e, defaultOpen: t = !1, onOpenChange: r }) => {
  const [n, i] = T.useState(t), a = T.useRef(null), o = (s) => {
    i(s), r == null || r(s);
  };
  return T.useEffect(() => {
    const s = (l) => {
      a.current && !a.current.contains(l.target) && o(!1);
    };
    return n && document.addEventListener("mousedown", s), () => document.removeEventListener("mousedown", s);
  }, [n]), /* @__PURE__ */ x.jsx(yP.Provider, { value: { open: n, setOpen: o }, children: /* @__PURE__ */ x.jsx("div", { ref: a, className: "relative inline-block", children: e }) });
}, xP = T.forwardRef(
  ({ children: e, className: t, onClick: r, ...n }, i) => {
    const { setOpen: a, open: o } = gS(), s = (l) => {
      r == null || r(l), a(!o);
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: i,
        onClick: s,
        className: me(fe("inline-flex cursor-pointer", t)),
        ...n,
        children: e
      }
    );
  }
);
xP.displayName = "PopoverTrigger";
const bP = T.forwardRef(
  ({ children: e, className: t, align: r = "center", side: n = "bottom", ...i }, a) => {
    const { open: o } = gS();
    if (!o) return null;
    const s = {
      top: "bottom-full mb-2 left-1/2 -translate-x-1/2",
      bottom: "top-full mt-2 left-1/2 -translate-x-1/2",
      left: "right-full mr-2 top-1/2 -translate-y-1/2",
      right: "left-full ml-2 top-1/2 -translate-y-1/2"
    }, l = {
      start: n === "top" || n === "bottom" ? "left-0 translate-x-0" : "top-0 translate-y-0",
      center: "",
      end: n === "top" || n === "bottom" ? "right-0 translate-x-0" : "bottom-0 translate-y-0"
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: a,
        className: me(
          fe(
            "absolute z-50 min-w-[12rem] rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-900 shadow-md",
            "animate-in fade-in-0 zoom-in-95",
            s[n],
            l[r],
            t
          )
        ),
        ...i,
        children: e
      }
    );
  }
);
bP.displayName = "PopoverContent";
const bW = [
  "#0ea5e9",
  "#22c55e",
  "#a855f7",
  "#f97316",
  "#ef4444",
  "#eab308",
  "#14b8a6",
  "#3b82f6",
  "#64748b",
  "#111827"
], mS = (e) => {
  const t = e.trim();
  if (!t) return null;
  const n = (t.startsWith("#") ? t : `#${t}`).toLowerCase();
  if (/^#[0-9a-f]{6}$/.test(n)) return n;
  if (/^#[0-9a-f]{3}$/.test(n)) {
    const i = n[1], a = n[2], o = n[3];
    return `#${i}${i}${a}${a}${o}${o}`;
  }
  return null;
}, ac = (e, t, r) => Math.min(r, Math.max(t, e)), mM = (e) => {
  const t = mS(e);
  if (!t) return null;
  const r = t.slice(1), n = parseInt(r.slice(0, 2), 16), i = parseInt(r.slice(2, 4), 16), a = parseInt(r.slice(4, 6), 16);
  return { r: n, g: i, b: a };
}, W0 = (e) => {
  const t = (r) => ac(Math.round(r), 0, 255).toString(16).padStart(2, "0");
  return `#${t(e.r)}${t(e.g)}${t(e.b)}`;
}, yM = (e) => {
  const t = e.r / 255, r = e.g / 255, n = e.b / 255, i = Math.max(t, r, n), a = Math.min(t, r, n), o = i - a;
  let s = 0;
  o !== 0 && (i === t ? s = (r - n) / o % 6 : i === r ? s = (n - t) / o + 2 : s = (t - r) / o + 4, s *= 60, s < 0 && (s += 360));
  const l = i === 0 ? 0 : o / i;
  return { h: s, s: l, v: i };
}, U0 = (e) => {
  const t = (e.h % 360 + 360) % 360, r = ac(e.s, 0, 1), n = ac(e.v, 0, 1), i = n * r, a = i * (1 - Math.abs(t / 60 % 2 - 1)), o = n - i;
  let s = 0, l = 0, u = 0;
  return t < 60 ? (s = i, l = a) : t < 120 ? (s = a, l = i) : t < 180 ? (l = i, u = a) : t < 240 ? (l = a, u = i) : t < 300 ? (s = a, u = i) : (s = i, u = a), {
    r: (s + o) * 255,
    g: (l + o) * 255,
    b: (u + o) * 255
  };
}, wW = ({ color: e, onChange: t }) => {
  const { setOpen: r } = gS(), n = T.useRef(null), i = T.useRef(null), [a, o] = T.useState(() => {
    const m = mM(e) ?? { r: 14, g: 165, b: 233 };
    return yM(m);
  }), [s, l] = T.useState(e);
  T.useEffect(() => {
    const m = mM(e);
    m && (l(e), o(yM(m)));
  }, [e]);
  const u = T.useMemo(() => W0(U0({ h: a.h, s: 1, v: 1 })), [a.h]), c = T.useMemo(() => U0(a), [a]), f = T.useMemo(() => W0(c), [c]), d = T.useCallback(
    (m) => {
      o(m);
      const y = W0(U0(m));
      t(y);
    },
    [t]
  ), h = T.useCallback(
    (m) => {
      const y = n.current;
      if (!y) return;
      const b = y.getBoundingClientRect(), w = ac((("clientX" in m ? m.clientX : 0) - b.left) / b.width, 0, 1), _ = ac((("clientY" in m ? m.clientY : 0) - b.top) / b.height, 0, 1);
      d({ ...a, s: w, v: 1 - _ });
    },
    [d, a]
  ), p = T.useCallback(
    (m) => {
      const y = i.current;
      if (!y) return;
      const b = y.getBoundingClientRect(), w = ac((("clientX" in m ? m.clientX : 0) - b.left) / b.width, 0, 1);
      d({ ...a, h: w * 360 });
    },
    [d, a]
  ), v = (m) => {
    m.preventDefault(), h(m);
    const y = (w) => h(w), b = () => {
      window.removeEventListener("pointermove", y), window.removeEventListener("pointerup", b);
    };
    window.addEventListener("pointermove", y), window.addEventListener("pointerup", b);
  }, g = (m) => {
    m.preventDefault(), p(m);
    const y = (w) => p(w), b = () => {
      window.removeEventListener("pointermove", y), window.removeEventListener("pointerup", b);
    };
    window.addEventListener("pointermove", y), window.addEventListener("pointerup", b);
  };
  return /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-4", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-start gap-4", children: [
    /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-3", children: [
      /* @__PURE__ */ x.jsxs(
        "div",
        {
          ref: n,
          className: "relative h-36 w-48 overflow-hidden rounded-xl ring-1 ring-slate-200",
          style: { backgroundColor: u },
          onPointerDown: v,
          children: [
            /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 bg-[linear-gradient(90deg,#fff,rgba(255,255,255,0))]" }),
            /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 bg-[linear-gradient(0deg,#000,rgba(0,0,0,0))]" }),
            /* @__PURE__ */ x.jsx(
              "div",
              {
                className: "absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full ring-2 ring-white shadow",
                style: {
                  left: `${a.s * 100}%`,
                  top: `${(1 - a.v) * 100}%`,
                  backgroundColor: f
                }
              }
            )
          ]
        }
      ),
      /* @__PURE__ */ x.jsx(
        "div",
        {
          ref: i,
          className: "relative h-3 w-48 cursor-pointer overflow-hidden rounded-full ring-1 ring-slate-200",
          style: {
            background: "linear-gradient(90deg, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"
          },
          onPointerDown: g,
          children: /* @__PURE__ */ x.jsx(
            "div",
            {
              className: "absolute top-1/2 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white ring-1 ring-slate-200 shadow",
              style: { left: `${a.h / 360 * 100}%` }
            }
          )
        }
      )
    ] }),
    /* @__PURE__ */ x.jsxs("div", { className: "flex flex-1 flex-col gap-3", children: [
      /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ x.jsx("div", { className: "h-10 w-10 rounded-xl ring-1 ring-slate-200", style: { backgroundColor: f } }),
        /* @__PURE__ */ x.jsx("div", { className: "text-xs font-medium text-text-muted", children: f.toUpperCase() })
      ] }),
      /* @__PURE__ */ x.jsxs("div", { children: [
        /* @__PURE__ */ x.jsx("div", { className: "mb-1 text-xs font-semibold text-text-muted", children: "HEX" }),
        /* @__PURE__ */ x.jsx(
          mr,
          {
            value: s,
            onChange: (m) => {
              const y = m.target.value;
              l(y);
              const b = mS(y);
              b && t(b);
            },
            placeholder: "#0ea5e9"
          }
        )
      ] }),
      /* @__PURE__ */ x.jsx(
        "button",
        {
          type: "button",
          className: "self-end rounded-xl bg-surface-alt px-3 py-2 text-xs font-semibold text-text-primary hover:bg-slate-200 transition-colors",
          onClick: () => r(!1),
          children: "Đóng"
        }
      )
    ] })
  ] }) });
}, wP = ({
  value: e,
  defaultValue: t = "#0ea5e9",
  onChange: r,
  colors: n = bW,
  allowCustom: i = !0,
  showPresets: a = !0,
  showCustom: o,
  className: s
}) => {
  const l = e !== void 0, [u, c] = T.useState(t), f = l ? e ?? t : u, d = T.useCallback(
    (g) => {
      l || c(g), r == null || r(g);
    },
    [l, r]
  ), [h, p] = T.useState(f);
  T.useEffect(() => {
    p(f);
  }, [f]);
  const v = o ?? i;
  return /* @__PURE__ */ x.jsxs("div", { className: me(fe("flex flex-col gap-3", s)), children: [
    a && /* @__PURE__ */ x.jsx("div", { className: "grid grid-cols-10 gap-2", children: n.map((g) => {
      const m = g.toLowerCase() === f.toLowerCase();
      return /* @__PURE__ */ x.jsx(
        "button",
        {
          type: "button",
          className: fe(
            "h-7 w-7 rounded-full transition-all",
            "ring-1 ring-slate-200 hover:scale-[1.03]",
            m && "ring-2 ring-primary-500"
          ),
          style: { backgroundColor: g },
          "aria-label": g,
          onClick: () => d(g)
        },
        g
      );
    }) }),
    v && /* @__PURE__ */ x.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
      /* @__PURE__ */ x.jsxs(xW, { children: [
        /* @__PURE__ */ x.jsx(
          xP,
          {
            role: "button",
            tabIndex: 0,
            className: "inline-flex",
            "aria-label": "Chọn màu",
            onKeyDown: (g) => {
              g.key !== "Enter" && g.key !== " " || (g.preventDefault(), g.currentTarget.click());
            },
            children: /* @__PURE__ */ x.jsx(
              "div",
              {
                className: "h-10 w-10 rounded-xl ring-1 ring-slate-200 transition-colors hover:ring-primary-500",
                style: { backgroundColor: f }
              }
            )
          }
        ),
        /* @__PURE__ */ x.jsx(
          bP,
          {
            side: "bottom",
            align: "start",
            className: "rounded-2xl border border-slate-200 bg-surface p-4 text-text-primary shadow-soft",
            children: /* @__PURE__ */ x.jsx(wW, { color: f, onChange: d })
          }
        )
      ] }),
      /* @__PURE__ */ x.jsx(
        mr,
        {
          value: h,
          onChange: (g) => {
            const m = g.target.value;
            p(m);
            const y = mS(m);
            y && d(y);
          },
          placeholder: "#0ea5e9"
        }
      )
    ] })
  ] });
};
wP.displayName = "ColorPicker";
const _P = (e, t = "vi-VN", r = {
  day: "2-digit",
  month: "2-digit",
  year: "numeric"
}) => {
  try {
    const n = new Date(e);
    return isNaN(n.getTime()) ? "" : new Intl.DateTimeFormat(t, r).format(n);
  } catch {
    return "";
  }
}, SP = (e, t = "vi-VN", r = {
  hour: "2-digit",
  minute: "2-digit"
}) => {
  try {
    const n = new Date(e);
    return isNaN(n.getTime()) ? "" : new Intl.DateTimeFormat(t, r).format(n);
  } catch {
    return "";
  }
}, _W = (e, t = "vi-VN") => `${_P(e, t)} ${SP(e, t)}`, SW = (e) => {
  const t = new Date(e);
  if (isNaN(t.getTime())) return "";
  const n = Math.floor(((/* @__PURE__ */ new Date()).getTime() - t.getTime()) / 1e3);
  if (n < 0) return "vừa xong";
  const i = {
    năm: 31536e3,
    tháng: 2592e3,
    tuần: 604800,
    ngày: 86400,
    giờ: 3600,
    phút: 60
  };
  if (n < 60) return "vừa xong";
  for (const [a, o] of Object.entries(i)) {
    const s = Math.floor(n / o);
    if (s >= 1)
      return `${s} ${a} trước`;
  }
  return "vừa xong";
}, CW = (e, t = "vi-VN", r) => isNaN(e) ? "0" : new Intl.NumberFormat(t, r).format(e), TW = (e, t = "VND", r = "vi-VN") => isNaN(e) ? "0" : new Intl.NumberFormat(r, {
  style: "currency",
  currency: t
}).format(e), AW = (e, t = "en-US") => isNaN(e) ? "0" : new Intl.NumberFormat(t, {
  notation: "compact",
  maximumFractionDigits: 1
}).format(e), MW = (e, t = 0) => isNaN(e) ? "0%" : `${(e * 100).toFixed(t)}%`, EW = (e, t = 2) => {
  if (e === 0) return "0 Bytes";
  const r = 1024, n = t < 0 ? 0 : t, i = ["Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"], a = Math.floor(Math.log(e) / Math.log(r));
  return parseFloat((e / Math.pow(r, a)).toFixed(n)) + " " + i[a];
}, V3e = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  compactNumber: AW,
  formatCurrency: TW,
  formatDate: _P,
  formatDateTime: _W,
  formatFileSize: EW,
  formatNumber: CW,
  formatPercentage: MW,
  formatTime: SP,
  generateId: Jc,
  timeAgo: SW
}, Symbol.toStringTag, { value: "Module" })), CP = T.createContext(null), DW = () => {
  const e = T.useContext(CP);
  if (!e) throw new Error("useTheme must be used within ThemeProvider");
  return e;
}, NW = (e) => {
  if (!e) return null;
  try {
    return JSON.parse(e);
  } catch {
    return null;
  }
}, IW = () => {
  var t;
  if (typeof window > "u") return "light";
  const e = (t = window.matchMedia) == null ? void 0 : t.call(window, "(prefers-color-scheme: dark)");
  return e != null && e.matches ? "dark" : "light";
}, LW = (e, t) => {
  var n;
  return ((n = e == null ? void 0 : e.vars) == null ? void 0 : n[t]) ?? {};
}, RW = (e, t, r, n) => {
  for (const [i, a] of Object.entries(t)) {
    if (!n.has(i)) {
      const o = e.style.getPropertyValue(i);
      n.set(i, o === "" ? null : o);
    }
    e.style.setProperty(i, a), r.add(i);
  }
  for (const i of Array.from(r)) {
    if (i in t) continue;
    const a = n.get(i);
    a == null ? e.style.removeProperty(i) : e.style.setProperty(i, a), r.delete(i);
  }
}, PW = (e, t, r, n, i) => {
  if (typeof window > "u" || i)
    return { themeName: t, mode: r };
  const a = NW(window.localStorage.getItem(n)), o = typeof (a == null ? void 0 : a.themeName) == "string" ? a.themeName : void 0, s = (a == null ? void 0 : a.mode) === "light" || (a == null ? void 0 : a.mode) === "dark" || (a == null ? void 0 : a.mode) === "system" ? a.mode : void 0;
  return {
    themeName: (o ? e.some((u) => u.name === o) : !1) ? o : t,
    mode: s ?? r
  };
}, B3e = ({
  children: e,
  themes: t = [{ name: "default" }],
  defaultThemeName: r = "default",
  defaultMode: n = "system",
  storageKey: i = "rai-theme",
  disablePersistence: a,
  root: o = "documentElement"
}) => {
  const s = T.useRef(/* @__PURE__ */ new Set()), l = T.useRef(/* @__PURE__ */ new Map()), u = T.useRef(null), c = T.useRef(null), [{ themeName: f, mode: d }, h] = T.useState(
    () => PW(t, r, n, i, a)
  ), [p, v] = T.useState(() => IW());
  T.useEffect(() => {
    if (typeof document > "u") return;
    const _ = o === "body" ? document.body : document.documentElement;
    return c.current = _, u.current = {
      themeDark: _.classList.contains("theme-dark"),
      dark: _.classList.contains("dark"),
      datasetTheme: _.dataset.theme,
      datasetThemeMode: _.dataset.themeMode
    }, () => {
      const S = c.current, C = u.current;
      if (!(!S || !C)) {
        for (const A of Array.from(s.current)) {
          const M = l.current.get(A);
          M == null ? S.style.removeProperty(A) : S.style.setProperty(A, M), s.current.delete(A);
        }
        S.classList.toggle("theme-dark", C.themeDark), S.classList.toggle("dark", C.dark), C.datasetTheme === void 0 ? delete S.dataset.theme : S.dataset.theme = C.datasetTheme, C.datasetThemeMode === void 0 ? delete S.dataset.themeMode : S.dataset.themeMode = C.datasetThemeMode;
      }
    };
  }, [o]), T.useEffect(() => {
    var C;
    if (typeof window > "u") return;
    const _ = (C = window.matchMedia) == null ? void 0 : C.call(window, "(prefers-color-scheme: dark)");
    if (!_) return;
    const S = () => v(_.matches ? "dark" : "light");
    return S(), typeof _.addEventListener == "function" ? (_.addEventListener("change", S), () => _.removeEventListener("change", S)) : (_.addListener(S), () => _.removeListener(S));
  }, []), T.useEffect(() => {
    typeof window > "u" || a || window.localStorage.setItem(i, JSON.stringify({ themeName: f, mode: d }));
  }, [a, d, i, f]);
  const g = d === "system" ? p : d, m = T.useMemo(() => t.find((_) => _.name === f), [f, t]);
  T.useEffect(() => {
    if (typeof document > "u") return;
    const _ = o === "body" ? document.body : document.documentElement;
    _.classList.toggle("theme-dark", g === "dark"), _.classList.toggle("dark", g === "dark"), _.dataset.theme = f, _.dataset.themeMode = g;
    const S = LW(m, g);
    RW(_, S, s.current, l.current);
  }, [g, o, m, f]);
  const y = T.useCallback((_) => {
    h((S) => ({ ...S, themeName: _ }));
  }, []), b = T.useCallback((_) => {
    h((S) => ({ ...S, mode: _ }));
  }, []), w = T.useMemo(
    () => ({
      themeName: f,
      mode: d,
      resolvedMode: g,
      theme: m,
      themes: t,
      setThemeName: y,
      setMode: b
    }),
    [d, g, b, y, m, f, t]
  );
  return /* @__PURE__ */ x.jsx(CP.Provider, { value: w, children: e });
}, F3e = ({
  className: e,
  showSystemButton: t = !0,
  systemLabel: r = "System",
  onModeChange: n,
  label: i,
  ...a
}) => {
  const { mode: o, resolvedMode: s, setMode: l } = DW(), u = s === "dark", c = (d) => {
    const h = d ? "dark" : "light";
    l(h), n == null || n(h);
  }, f = () => {
    l("system"), n == null || n("system");
  };
  return /* @__PURE__ */ x.jsxs("div", { className: fe("inline-flex items-center gap-2", e), children: [
    /* @__PURE__ */ x.jsx(
      oP,
      {
        ...a,
        label: i,
        checked: u,
        onCheckedChange: c
      }
    ),
    t && /* @__PURE__ */ x.jsx(
      xt,
      {
        type: "button",
        "data-style": o === "system" ? "primary" : "secondary",
        className: "h-8 px-3",
        onClick: f,
        children: r
      }
    )
  ] });
}, TP = { name: "default" }, kW = {
  name: "emerald",
  vars: {
    light: {
      "--color-primary-500": "#10b981",
      "--color-primary-foreground": "#052e16"
    },
    dark: {
      "--color-primary-500": "#34d399",
      "--color-primary-foreground": "#052e16"
    }
  }
}, OW = {
  name: "violet",
  vars: {
    light: {
      "--color-primary-500": "#7c3aed",
      "--color-primary-foreground": "#ffffff"
    },
    dark: {
      "--color-primary-500": "#a78bfa",
      "--color-primary-foreground": "#1e1b4b"
    }
  }
}, $3e = [TP, kW, OW], Tc = /* @__PURE__ */ new Map(), AP = (e, t) => {
  const r = e == null ? void 0 : e.name;
  if (!r) throw new Error("ThemeDefinition.name is required");
  if (!(t != null && t.replace) && Tc.has(r))
    throw new Error(`Theme '${r}' is already registered`);
  Tc.set(r, e);
}, H3e = (e, t) => {
  for (const r of e) AP(r, t);
}, G3e = (e) => {
  Tc.delete(e);
}, W3e = (e) => Tc.get(e), U3e = () => Array.from(Tc.values()), Y3e = () => {
  Tc.clear();
};
AP(TP, { replace: !0 });
const xM = {
  type: "object",
  additionalProperties: {
    type: "string"
  }
}, Z3e = {
  $schema: "https://json-schema.org/draft/2020-12/schema",
  $id: "https://redai/sdk/theme-definition.schema.json",
  title: "ThemeDefinition",
  type: "object",
  additionalProperties: !1,
  required: ["name"],
  properties: {
    name: { type: "string", minLength: 1 },
    vars: {
      type: "object",
      additionalProperties: !1,
      properties: {
        light: xM,
        dark: xM
      }
    }
  }
}, X3e = {
  $schema: "https://json-schema.org/draft/2020-12/schema",
  $id: "https://redai/sdk/theme-state.schema.json",
  title: "ThemeState",
  type: "object",
  additionalProperties: !1,
  required: ["themeName", "mode"],
  properties: {
    themeName: { type: "string", minLength: 1 },
    mode: { type: "string", enum: ["light", "dark", "system"] }
  }
}, Rg = (e) => typeof e == "object" && e !== null, zW = (e) => e === "light" || e === "dark" || e === "system", bM = (e) => {
  if (!Rg(e)) return !1;
  for (const t of Object.values(e))
    if (typeof t != "string") return !1;
  return !0;
}, K3e = (e) => {
  if (!Rg(e) || typeof e.name != "string" || e.name.length === 0) return !1;
  if (e.vars === void 0) return !0;
  if (!Rg(e.vars)) return !1;
  const t = e.vars;
  return !(t.light !== void 0 && !bM(t.light) || t.dark !== void 0 && !bM(t.dark));
}, q3e = (e) => !(!Rg(e) || typeof e.themeName != "string" || e.themeName.length === 0 || !zW(e.mode));
function J3e(e, t = !1) {
  const [r, n] = Ze(t);
  return Oe(() => {
    if (typeof window > "u") return;
    const i = window.matchMedia(e), a = (o) => n(o.matches);
    return n(i.matches), i.addEventListener("change", a), () => i.removeEventListener("change", a);
  }, [e]), r;
}
function Gh(e = "max", t = 768) {
  const [r, n] = Ze(void 0);
  return Oe(() => {
    const i = e === "min" ? `(min-width: ${t}px)` : `(max-width: ${t - 1}px)`, a = window.matchMedia(i), o = (s) => n(s.matches);
    return n(a.matches), a.addEventListener("change", o), () => a.removeEventListener("change", o);
  }, [e, t]), !!r;
}
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const jW = [
  ["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }],
  ["path", { d: "M17 20V4", key: "1ejh1v" }],
  ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }],
  ["path", { d: "M7 4v16", key: "1glfcx" }]
], MP = ct("arrow-up-down", jW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const VW = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]], yS = ct("check", VW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const BW = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], FW = ct("chevron-down", BW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const $W = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }],
  ["path", { d: "M12 3v18", key: "108xh3" }]
], HW = ct("columns-2", $W);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const GW = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }],
  ["path", { d: "M9 3v18", key: "fh3hqa" }],
  ["path", { d: "M15 3v18", key: "14nvp0" }]
], WW = ct("columns-3", GW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UW = [
  ["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }],
  ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]
], EP = ct("copy", UW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const YW = [
  ["path", { d: "M20 20v-7a4 4 0 0 0-4-4H4", key: "1nkjon" }],
  ["path", { d: "M9 14 4 9l5-5", key: "102s5s" }]
], ZW = ct("corner-up-left", YW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const XW = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
], wM = ct("database", XW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KW = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
], DP = ct("download", KW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const qW = [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "12", cy: "5", r: "1", key: "gxeob9" }],
  ["circle", { cx: "12", cy: "19", r: "1", key: "lyex9k" }]
], JW = ct("ellipsis-vertical", qW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const QW = [
  ["path", { d: "M15 3h6v6", key: "1q9fwt" }],
  ["path", { d: "M10 14 21 3", key: "gplh6r" }],
  ["path", { d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6", key: "a6xqqp" }]
], eU = ct("external-link", QW);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const tU = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }]
], rU = ct("file", tU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const nU = [
  [
    "path",
    {
      d: "m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",
      key: "usdka0"
    }
  ]
], iU = ct("folder-open", nU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const aU = [
  [
    "path",
    {
      d: "M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",
      key: "1kt360"
    }
  ]
], oU = ct("folder", aU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sU = [
  [
    "path",
    {
      d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",
      key: "sc7q7i"
    }
  ]
], Pg = ct("funnel", sU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lU = [
  ["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }],
  ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }],
  ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }],
  ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]
], uU = ct("hash", lU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cU = [
  [
    "path",
    {
      d: "M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",
      key: "mvr1a0"
    }
  ]
], fU = ct("heart", cU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dU = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z", key: "b2q4dd" }],
  ["line", { x1: "9", x2: "9.01", y1: "9", y2: "9", key: "yxxnd0" }],
  ["line", { x1: "15", x2: "15.01", y1: "9", y2: "9", key: "1p4y9e" }]
], hU = ct("laugh", dU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pU = [
  [
    "path",
    {
      d: "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
      key: "zw3jo"
    }
  ],
  [
    "path",
    {
      d: "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
      key: "1wduqc"
    }
  ],
  [
    "path",
    {
      d: "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",
      key: "kqbvx6"
    }
  ]
], Y0 = ct("layers", pU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vU = [
  ["path", { d: "M13 5h8", key: "a7qcls" }],
  ["path", { d: "M13 12h8", key: "h98zly" }],
  ["path", { d: "M13 19h8", key: "c3s6r1" }],
  ["path", { d: "m3 17 2 2 4-4", key: "1jhpwq" }],
  ["rect", { x: "3", y: "4", width: "6", height: "6", rx: "1", key: "cif1o7" }]
], NP = ct("list-todo", vU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gU = [
  ["path", { d: "M3 5h.01", key: "18ugdj" }],
  ["path", { d: "M3 12h.01", key: "nlz23k" }],
  ["path", { d: "M3 19h.01", key: "noohij" }],
  ["path", { d: "M8 5h13", key: "1pao27" }],
  ["path", { d: "M8 12h13", key: "1za7za" }],
  ["path", { d: "M8 19h13", key: "m83p4d" }]
], xS = ct("list", gU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mU = [
  [
    "path",
    {
      d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",
      key: "1r0f0z"
    }
  ],
  ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]
], yU = ct("map-pin", mU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const xU = [
  ["path", { d: "M12 19v3", key: "npa21l" }],
  ["path", { d: "M19 10v2a7 7 0 0 1-14 0v-2", key: "1vc78b" }],
  ["rect", { x: "9", y: "2", width: "6", height: "13", rx: "3", key: "s6n7sd" }]
], bU = ct("mic", xU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const wU = [
  ["path", { d: "M12 22v-9", key: "x3hkom" }],
  [
    "path",
    {
      d: "M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",
      key: "2ntwy6"
    }
  ],
  [
    "path",
    {
      d: "M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",
      key: "1pmm1c"
    }
  ],
  [
    "path",
    {
      d: "M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",
      key: "12ttoo"
    }
  ]
], _U = ct("package-open", wU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const SU = [
  [
    "path",
    {
      d: "M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",
      key: "e79jfc"
    }
  ],
  ["circle", { cx: "13.5", cy: "6.5", r: ".5", fill: "currentColor", key: "1okk4w" }],
  ["circle", { cx: "17.5", cy: "10.5", r: ".5", fill: "currentColor", key: "f64h9f" }],
  ["circle", { cx: "6.5", cy: "12.5", r: ".5", fill: "currentColor", key: "qy21gx" }],
  ["circle", { cx: "8.5", cy: "7.5", r: ".5", fill: "currentColor", key: "fotxhn" }]
], CU = ct("palette", SU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const TU = [
  ["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", key: "afitv7" }],
  ["path", { d: "M3 9h18", key: "1pudct" }],
  ["path", { d: "M9 21V9", key: "1oto5p" }]
], AU = ct("panels-top-left", TU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const MU = [
  [
    "path",
    {
      d: "m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",
      key: "1miecu"
    }
  ]
], EU = ct("paperclip", MU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const DU = [
  [
    "path",
    {
      d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",
      key: "1a8usu"
    }
  ]
], NU = ct("pen", DU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const IU = [
  ["path", { d: "M13 2a9 9 0 0 1 9 9", key: "1itnx2" }],
  ["path", { d: "M13 6a5 5 0 0 1 5 5", key: "11nki7" }],
  [
    "path",
    {
      d: "M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",
      key: "9njp5v"
    }
  ]
], LU = ct("phone-call", IU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const RU = [
  ["path", { d: "M16 2v6h6", key: "1mfrl5" }],
  ["path", { d: "m22 2-6 6", key: "6f0sa0" }],
  [
    "path",
    {
      d: "M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",
      key: "9njp5v"
    }
  ]
], PU = ct("phone-incoming", RU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const kU = [
  ["path", { d: "m16 2 6 6", key: "1gw87d" }],
  ["path", { d: "m22 2-6 6", key: "6f0sa0" }],
  [
    "path",
    {
      d: "M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",
      key: "9njp5v"
    }
  ]
], OU = ct("phone-missed", kU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const zU = [
  [
    "path",
    {
      d: "M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",
      key: "1wngk7"
    }
  ],
  ["path", { d: "M22 2 2 22", key: "y4kqgn" }],
  [
    "path",
    {
      d: "M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",
      key: "10hv5p"
    }
  ]
], jU = ct("phone-off", zU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const VU = [
  [
    "path",
    {
      d: "M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",
      key: "10ikf1"
    }
  ]
], BU = ct("play", VU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const FU = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }]
], $U = ct("rotate-ccw", FU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const HU = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
], IP = ct("search", HU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const GU = [
  [
    "path",
    {
      d: "M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",
      key: "1ffxy3"
    }
  ],
  ["path", { d: "m21.854 2.147-10.94 10.939", key: "12cjpa" }]
], WU = ct("send", GU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const UU = [
  [
    "path",
    {
      d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",
      key: "1i5ecw"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
], bS = ct("settings", UU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const YU = [
  [
    "path",
    { d: "M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344", key: "2acyp4" }
  ],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
], ZU = ct("square-check-big", YU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const XU = [
  ["path", { d: "M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7", key: "1m0v6g" }],
  [
    "path",
    {
      d: "M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",
      key: "ohrbg2"
    }
  ]
], LP = ct("square-pen", XU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const KU = [
  ["path", { d: "M21 5H3", key: "1fi0y6" }],
  ["path", { d: "M15 12H3", key: "6jk70r" }],
  ["path", { d: "M17 19H3", key: "z6ezky" }]
], qU = ct("text-align-start", KU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const JU = [
  ["path", { d: "M7 10v12", key: "1qc93n" }],
  [
    "path",
    {
      d: "M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",
      key: "emmmcr"
    }
  ]
], QU = ct("thumbs-up", JU);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const eY = [
  ["path", { d: "M10 11v6", key: "nco0om" }],
  ["path", { d: "M14 11v6", key: "outv1u" }],
  ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }],
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]
], RP = ct("trash-2", eY);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const tY = [
  ["path", { d: "M12 4v16", key: "1654pz" }],
  ["path", { d: "M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2", key: "e0r10z" }],
  ["path", { d: "M9 20h6", key: "s66wpe" }]
], PP = ct("type", tY);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const rY = [
  ["path", { d: "M9 14 4 9l5-5", key: "102s5s" }],
  ["path", { d: "M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11", key: "f3b9sd" }]
], nY = ct("undo-2", rY);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const iY = [
  ["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }],
  ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]
], aY = ct("user", iY);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const oY = [
  [
    "path",
    {
      d: "m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",
      key: "ftymec"
    }
  ],
  ["rect", { x: "2", y: "6", width: "14", height: "12", rx: "2", key: "158x01" }]
], sY = ct("video", oY);
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lY = [
  ["rect", { width: "8", height: "8", x: "3", y: "3", rx: "2", key: "by2w9f" }],
  ["path", { d: "M7 11v4a2 2 0 0 0 2 2h4", key: "xkn7yn" }],
  ["rect", { width: "8", height: "8", x: "13", y: "13", rx: "2", key: "1cgmvn" }]
], uY = ct("workflow", lY), Rt = (e) => typeof e == "object" && e !== null && "code" in e, kt = (e) => ({ code: e }), cY = (e) => typeof e == "string" && e.trim().startsWith("="), fY = (e) => e == null ? null : typeof e == "number" ? Number.isFinite(e) ? e : kt("#VALUE!") : typeof e == "boolean" || typeof e == "string" ? e : kt("#VALUE!"), Eo = (e) => {
  if (Rt(e)) return e;
  if (e === null) return 0;
  if (typeof e == "number") return e;
  if (typeof e == "boolean") return e ? 1 : 0;
  if (typeof e == "string") {
    const t = e.trim();
    if (!t) return 0;
    const r = Number(t);
    return Number.isFinite(r) ? r : kt("#VALUE!");
  }
  return kt("#VALUE!");
}, dY = (e) => Rt(e) ? e : e === null ? !1 : typeof e == "boolean" ? e : typeof e == "number" ? e !== 0 : typeof e == "string" ? e.trim().length > 0 : kt("#VALUE!"), hY = (e) => {
  const t = e.toUpperCase();
  let r = 0;
  for (let n = 0; n < t.length; n += 1) {
    const i = t.charCodeAt(n);
    if (i < 65 || i > 90) return -1;
    r = r * 26 + (i - 64);
  }
  return r - 1;
}, Z0 = (e) => {
  const t = e.trim().replace(/\$/g, ""), r = /^([A-Za-z]{1,3})(\d+)$/.exec(t);
  if (!r) return kt("#REF!");
  const n = hY(r[1]), i = Number(r[2]) - 1;
  return !Number.isFinite(i) || i < 0 || n < 0 ? kt("#REF!") : { row: i, col: n };
}, pY = (e) => {
  var s;
  const t = [];
  let r = 0;
  const n = (l, u) => {
    t.push({ type: l, value: u, pos: r });
  }, i = (l) => l === " " || l === "	" || l === `
`, a = (l) => l >= "0" && l <= "9", o = (l) => l >= "a" && l <= "z" || l >= "A" && l <= "Z" || l === "_";
  for (; r < e.length; ) {
    const l = e[r];
    if (i(l)) {
      r += 1;
      continue;
    }
    if (l === "+") {
      n("plus"), r += 1;
      continue;
    }
    if (l === "-") {
      n("minus"), r += 1;
      continue;
    }
    if (l === "*") {
      n("star"), r += 1;
      continue;
    }
    if (l === "/") {
      n("slash"), r += 1;
      continue;
    }
    if (l === "^") {
      n("caret"), r += 1;
      continue;
    }
    if (l === "(") {
      n("lparen"), r += 1;
      continue;
    }
    if (l === ")") {
      n("rparen"), r += 1;
      continue;
    }
    if (l === ",") {
      n("comma"), r += 1;
      continue;
    }
    if (l === ":") {
      n("colon"), r += 1;
      continue;
    }
    if (l === "=") {
      n("eq"), r += 1;
      continue;
    }
    if (l === "<") {
      const u = e[r + 1];
      if (u === "=") {
        n("lte"), r += 2;
        continue;
      }
      if (u === ">") {
        n("ne"), r += 2;
        continue;
      }
      n("lt"), r += 1;
      continue;
    }
    if (l === ">") {
      if (e[r + 1] === "=") {
        n("gte"), r += 2;
        continue;
      }
      n("gt"), r += 1;
      continue;
    }
    if (l === '"') {
      r += 1;
      let u = "";
      for (; r < e.length; ) {
        const c = e[r];
        if (c === '"') {
          r += 1, n("string", u);
          break;
        }
        u += c, r += 1;
      }
      if (r >= e.length && e[e.length - 1] !== '"' || ((s = t[t.length - 1]) == null ? void 0 : s.type) !== "string")
        return kt("#ERROR!");
      continue;
    }
    if (a(l) || l === "." && r + 1 < e.length && a(e[r + 1])) {
      const u = r;
      let c = "";
      for (; r < e.length; ) {
        const d = e[r];
        if (a(d) || d === ".")
          c += d, r += 1;
        else
          break;
      }
      const f = Number(c);
      if (!Number.isFinite(f)) return kt("#VALUE!");
      t.push({ type: "number", value: String(f), pos: u });
      continue;
    }
    if (l === "$" || o(l)) {
      const u = r;
      let c = "";
      for (; r < e.length; ) {
        const h = e[r];
        if (h === "$" || o(h) || a(h))
          c += h, r += 1;
        else
          break;
      }
      const f = c.replace(/\$/g, "");
      /^([A-Za-z]{1,3})(\d+)$/.exec(f) ? t.push({ type: "cell", value: f.toUpperCase(), pos: u }) : t.push({ type: "ident", value: c.toUpperCase(), pos: u });
      continue;
    }
    return kt("#ERROR!");
  }
  return n("eof"), t;
}, vY = (e) => {
  var f;
  let t = 0;
  const r = () => e[t], n = (d) => {
    const h = e[t];
    return !h || d && h.type !== d ? null : (t += 1, h);
  }, i = () => {
    var h, p, v;
    const d = r();
    if (!d) return kt("#ERROR!");
    if (d.type === "number")
      return n(), { kind: "number", value: Number(d.value) };
    if (d.type === "string")
      return n(), { kind: "string", value: d.value ?? "" };
    if (d.type === "cell") {
      n();
      const g = d.value ?? "";
      if (((h = r()) == null ? void 0 : h.type) === "colon") {
        n("colon");
        const m = n("cell");
        return m != null && m.value ? { kind: "range", start: g, end: m.value } : kt("#REF!");
      }
      return { kind: "cell", ref: g };
    }
    if (d.type === "ident") {
      n();
      const g = d.value ?? "";
      if (g === "TRUE")
        return { kind: "boolean", value: !0 };
      if (g === "FALSE")
        return { kind: "boolean", value: !1 };
      if (n("lparen")) {
        const m = [];
        if (((p = r()) == null ? void 0 : p.type) !== "rparen")
          for (; ; ) {
            const y = s();
            if (Rt(y)) return y;
            if (m.push(y), ((v = r()) == null ? void 0 : v.type) === "comma") {
              n("comma");
              continue;
            }
            break;
          }
        return n("rparen") ? { kind: "call", name: g, args: m } : kt("#ERROR!");
      }
      return kt("#NAME?");
    }
    if (d.type === "lparen") {
      n("lparen");
      const g = s();
      return Rt(g) || n("rparen") ? g : kt("#ERROR!");
    }
    return kt("#ERROR!");
  }, a = () => {
    const d = r();
    if ((d == null ? void 0 : d.type) === "plus") {
      n("plus");
      const h = a();
      return Rt(h) ? h : { kind: "unary", op: "+", expr: h };
    }
    if ((d == null ? void 0 : d.type) === "minus") {
      n("minus");
      const h = a();
      return Rt(h) ? h : { kind: "unary", op: "-", expr: h };
    }
    return i();
  }, o = () => {
    var h;
    let d = a();
    if (Rt(d)) return d;
    for (; ((h = r()) == null ? void 0 : h.type) === "caret"; ) {
      n("caret");
      const p = a();
      if (Rt(p)) return p;
      d = { kind: "binary", op: "^", left: d, right: p };
    }
    return d;
  }, s = () => {
    let d = u();
    if (Rt(d)) return d;
    const h = r();
    if ((h == null ? void 0 : h.type) === "eq" || (h == null ? void 0 : h.type) === "ne" || (h == null ? void 0 : h.type) === "gt" || (h == null ? void 0 : h.type) === "gte" || (h == null ? void 0 : h.type) === "lt" || (h == null ? void 0 : h.type) === "lte") {
      n();
      const p = u();
      return Rt(p) ? p : { kind: "compare", op: h.type === "eq" ? "=" : h.type === "ne" ? "<>" : h.type === "gt" ? ">" : h.type === "gte" ? ">=" : h.type === "lt" ? "<" : "<=", left: d, right: p };
    }
    return d;
  }, l = () => {
    let d = o();
    if (Rt(d)) return d;
    for (; ; ) {
      const h = r();
      if ((h == null ? void 0 : h.type) === "star" || (h == null ? void 0 : h.type) === "slash") {
        n();
        const p = o();
        if (Rt(p)) return p;
        d = {
          kind: "binary",
          op: h.type === "star" ? "*" : "/",
          left: d,
          right: p
        };
        continue;
      }
      break;
    }
    return d;
  }, u = () => {
    let d = l();
    if (Rt(d)) return d;
    for (; ; ) {
      const h = r();
      if ((h == null ? void 0 : h.type) === "plus" || (h == null ? void 0 : h.type) === "minus") {
        n();
        const p = l();
        if (Rt(p)) return p;
        d = {
          kind: "binary",
          op: h.type === "plus" ? "+" : "-",
          left: d,
          right: p
        };
        continue;
      }
      break;
    }
    return d;
  }, c = s();
  return Rt(c) ? c : ((f = r()) == null ? void 0 : f.type) !== "eof" ? kt("#ERROR!") : c;
}, X0 = (e) => {
  const t = [];
  return e.forEach((r) => {
    Array.isArray(r) ? t.push(...r) : t.push(r);
  }), t;
}, gY = (e, t) => {
  if (Rt(e)) return e;
  if (Rt(t)) return t;
  const r = Eo(e), n = Eo(t);
  if (!Rt(r) && !Rt(n)) {
    const o = r, s = n;
    return o < s ? -1 : o > s ? 1 : 0;
  }
  const i = e === null ? "" : String(e), a = t === null ? "" : String(t);
  return i < a ? -1 : i > a ? 1 : 0;
}, mY = (e) => {
  const t = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Set(), n = (s, l) => `${s}:${l}`, i = (s, l) => {
    if (s < 0 || l < 0 || s >= e.rowCount || l >= e.colCount) return kt("#REF!");
    const u = n(s, l), c = t.get(u);
    if (c !== void 0) return c;
    if (r.has(u)) return kt("#CYCLE!");
    r.add(u);
    const f = e.getCellRaw(s, l);
    let d;
    return cY(f) ? d = o(String(f).trim().slice(1)) : d = fY(f), r.delete(u), t.set(u, d), d;
  }, a = (s) => {
    if (s.kind === "number" || s.kind === "string" || s.kind === "boolean") return s.value;
    if (s.kind === "cell") {
      const l = Z0(s.ref);
      return Rt(l) ? l : i(l.row, l.col);
    }
    if (s.kind === "range") {
      const l = Z0(s.start), u = Z0(s.end);
      if (Rt(l)) return l;
      if (Rt(u)) return u;
      const c = l, f = u, d = Math.min(c.row, f.row), h = Math.max(c.row, f.row), p = Math.min(c.col, f.col), v = Math.max(c.col, f.col), g = [];
      for (let m = d; m <= h; m += 1)
        for (let y = p; y <= v; y += 1)
          g.push(i(m, y));
      return g;
    }
    if (s.kind === "unary") {
      const l = a(s.expr);
      if (Array.isArray(l)) return kt("#VALUE!");
      const u = Eo(l);
      return Rt(u) ? u : s.op === "-" ? -u : u;
    }
    if (s.kind === "binary") {
      const l = a(s.left), u = a(s.right);
      if (Array.isArray(l) || Array.isArray(u)) return kt("#VALUE!");
      const c = Eo(l);
      if (Rt(c)) return c;
      const f = Eo(u);
      if (Rt(f)) return f;
      const d = c, h = f;
      return s.op === "+" ? d + h : s.op === "-" ? d - h : s.op === "*" ? d * h : s.op === "/" ? h === 0 ? kt("#DIV/0!") : d / h : s.op === "^" ? Math.pow(d, h) : kt("#ERROR!");
    }
    if (s.kind === "compare") {
      const l = a(s.left), u = a(s.right);
      if (Array.isArray(l) || Array.isArray(u)) return kt("#VALUE!");
      const c = gY(l, u);
      if (Rt(c)) return c;
      const f = c;
      return s.op === "=" ? f === 0 : s.op === "<>" ? f !== 0 : s.op === ">" ? f > 0 : s.op === ">=" ? f >= 0 : s.op === "<" ? f < 0 : s.op === "<=" ? f <= 0 : kt("#ERROR!");
    }
    if (s.kind === "call") {
      const l = s.name, u = s.args.map((c) => a(c));
      if (l === "SUM") {
        const c = X0(u);
        let f = 0;
        for (const d of c) {
          const h = Eo(d);
          if (Rt(h))
            return h;
          f += h;
        }
        return f;
      }
      if (l === "AVERAGE") {
        const c = X0(u);
        let f = 0, d = 0;
        for (const h of c) {
          const p = Eo(h);
          if (Rt(p))
            return p;
          f += p, d += 1;
        }
        return d === 0 ? kt("#DIV/0!") : f / d;
      }
      if (l === "MIN" || l === "MAX") {
        const c = X0(u);
        let f = null;
        for (const d of c) {
          const h = Eo(d);
          if (Rt(h))
            return h;
          const p = h;
          f === null ? f = p : f = l === "MIN" ? Math.min(f, p) : Math.max(f, p);
        }
        return f ?? 0;
      }
      if (l === "IF") {
        const c = u[0], f = u.length > 1 ? u[1] : null, d = u.length > 2 ? u[2] : null;
        if (Array.isArray(c)) return kt("#VALUE!");
        const h = dY(c);
        if (Rt(h)) return h;
        const p = h ? f : d;
        return Array.isArray(p) ? kt("#VALUE!") : p;
      }
      return kt("#NAME?");
    }
    return kt("#ERROR!");
  }, o = (s) => {
    const l = pY(s);
    if (Rt(l)) return l;
    const u = vY(l);
    if (Rt(u)) return u;
    const c = a(u);
    return Array.isArray(c) ? kt("#VALUE!") : c;
  };
  return {
    evaluateCell: i,
    evaluateFormula: o
  };
}, lu = (e, t) => `${e}:${t}`, yY = (e) => {
  let t = e, r = "";
  for (; t >= 0; )
    r = String.fromCharCode(t % 26 + 65) + r, t = Math.floor(t / 26) - 1;
  return r;
}, Np = (e) => {
  const t = Math.min(e.start.row, e.end.row), r = Math.max(e.start.row, e.end.row), n = Math.min(e.start.col, e.end.col), i = Math.max(e.start.col, e.end.col);
  return { top: t, bottom: r, left: n, right: i };
}, _M = (e, t) => (e % t + t) % t, xY = (e) => {
  const r = e.replace(/\r\n/g, `
`).replace(/\r/g, `
`).split(`
`);
  return (r.length > 1 && r[r.length - 1] === "" ? r.slice(0, -1) : r).map((i) => i.split("	"));
}, SM = (e) => {
  const t = e ?? "", r = String(t).trim();
  if (!r) return null;
  if (r.startsWith("=")) return String(t);
  const n = r.toLowerCase();
  if (n === "true") return !0;
  if (n === "false") return !1;
  const i = Number(r);
  return Number.isFinite(i) && r !== "" ? i : String(t);
};
function bY({
  className: e,
  value: t,
  defaultValue: r,
  onValueChange: n,
  height: i = 520,
  initialRowCount: a = 50,
  initialColCount: o = 26,
  maxRow: s = 1e4,
  maxCol: l = 200,
  expandStepRow: u = 50,
  expandStepCol: c = 10,
  expandThresholdPx: f = 300,
  rowHeight: d = 32,
  colWidth: h = 120,
  headerHeight: p = 36,
  rowNumberWidth: v = 56,
  showRowNumbers: g = !0,
  showColumnLetters: m = !0,
  editable: y = !0,
  enableCopyPaste: b = !0,
  enableFormulas: w = !1,
  initialColWidths: _,
  onColWidthChange: S,
  ...C
}) {
  const A = t !== void 0, [M, D] = T.useState(r ?? {}), N = A ? t ?? {} : M, [R, O] = T.useState(() => Math.min(Math.max(1, a), s)), [E, L] = T.useState(() => Math.min(Math.max(1, o), l)), [I, P] = T.useState(_ ?? {}), [k, z] = T.useState({ row: 0, col: 0 }), [V, B] = T.useState({ row: 0, col: 0 }), [F, H] = T.useState(
    k ? { start: k, end: k } : null
  ), [G, W] = T.useState(null), [X, q] = T.useState(""), [J, U] = T.useState(null), $ = T.useRef(null), Y = T.useRef(null), Z = T.useRef(null), [K, ie] = T.useState(
    null
  ), [Q, ce] = T.useState(null), [te, oe] = T.useState(null), de = T.useRef(null), Pe = T.useRef(null), Ke = T.useRef(null), it = T.useRef(null), Dt = T.useCallback(
    (ne) => {
      const je = ne(N);
      A || D(je), n == null || n(je);
    },
    [N, A, n]
  ), Pt = T.useCallback(
    (ne, Me) => N[lu(ne, Me)] ?? null,
    [N]
  ), gr = T.useMemo(() => w ? mY({
    rowCount: R,
    colCount: E,
    getCellRaw: Pt
  }) : null, [E, w, Pt, R]), Kt = T.useCallback(
    (ne, Me) => {
      O((je) => Math.min(s, Math.max(je, ne + 1))), L((je) => Math.min(l, Math.max(je, Me + 1)));
    },
    [l, s]
  ), _e = T.useCallback(
    (ne, Me) => {
      if (Kt(ne.row, ne.col), z(ne), !(Me != null && Me.extendSelection)) {
        B(ne), H({ start: ne, end: ne });
        return;
      }
      H({ start: V ?? ne, end: ne });
    },
    [Kt, V]
  ), re = T.useCallback(
    (ne) => {
      if (!y) return;
      Kt(ne.row, ne.col);
      const Me = Pt(ne.row, ne.col);
      q(Me == null ? "" : String(Me)), W(ne);
    },
    [y, Kt, Pt]
  ), ve = T.useCallback(() => {
    if (!G) return;
    const ne = G.row, Me = G.col, je = SM(X);
    Dt(($e) => {
      const Je = { ...$e }, ht = lu(ne, Me);
      return je === null || je === "" ? delete Je[ht] : Je[ht] = je, Je;
    }), W(null);
  }, [G, X, Dt]), Ae = T.useCallback(() => {
    W(null);
  }, []);
  T.useEffect(() => {
    if (!G || typeof window > "u") return;
    const ne = window.setTimeout(() => {
      var Me, je;
      (Me = it.current) == null || Me.focus(), (je = it.current) == null || je.select();
    }, 0);
    return () => window.clearTimeout(ne);
  }, [G]), T.useEffect(() => {
    if (!K) return;
    const ne = (je) => {
      const $e = je.clientX - K.startX, Je = Math.max(40, K.startWidth + $e);
      P((ht) => ({ ...ht, [K.index]: Je }));
    }, Me = () => {
      ie(null), S == null || S(I);
    };
    return document.addEventListener("mousemove", ne), document.addEventListener("mouseup", Me), () => {
      document.removeEventListener("mousemove", ne), document.removeEventListener("mouseup", Me);
    };
  }, [I, S, K]);
  const Re = Kd({
    count: R,
    getScrollElement: () => Ke.current,
    estimateSize: () => d,
    overscan: 12
  }), gt = Kd({
    horizontal: !0,
    count: E,
    getScrollElement: () => Ke.current,
    estimateSize: (ne) => I[ne] ?? h,
    overscan: 8
  }), Ye = Re.getVirtualItems(), we = gt.getVirtualItems(), ke = Re.getTotalSize(), De = gt.getTotalSize(), ft = m ? p : 0, Bt = g ? v : 0, nt = T.useMemo(() => F ? Np(F) : null, [F]), Er = T.useCallback(
    (ne) => {
      if (!nt) return null;
      const Me = Math.min(nt.top, ne.row), je = Math.max(nt.bottom, ne.row), $e = Math.min(nt.left, ne.col), Je = Math.max(nt.right, ne.col);
      return Me === nt.top && je === nt.bottom && $e === nt.left && Je === nt.right ? null : { top: Me, bottom: je, left: $e, right: Je };
    },
    [nt]
  ), At = T.useCallback(
    (ne) => {
      if (!nt) return;
      Kt(ne.bottom, ne.right);
      const Me = nt.top, je = nt.bottom, $e = nt.left, Je = nt.right, ht = je - Me + 1, Qe = Je - $e + 1;
      Dt((mt) => {
        const Lt = { ...mt };
        for (let Ht = ne.top; Ht <= ne.bottom; Ht += 1)
          for (let dt = ne.left; dt <= ne.right; dt += 1) {
            if (Ht >= Me && Ht <= je && dt >= $e && dt <= Je) continue;
            const ki = Me + _M(Ht - Me, ht), fo = $e + _M(dt - $e, Qe), Rn = mt[lu(ki, fo)], bs = lu(Ht, dt);
            Rn == null ? delete Lt[bs] : Lt[bs] = Rn;
          }
        return Lt;
      }), H({ start: { row: ne.top, col: ne.left }, end: { row: ne.bottom, col: ne.right } });
    },
    [Kt, nt, Dt]
  );
  T.useEffect(() => {
    if (!J || typeof document > "u") return;
    const ne = (Je, ht) => {
      var fo, Rn;
      const Qe = document.elementFromPoint(Je, ht), mt = (fo = Qe == null ? void 0 : Qe.closest) == null ? void 0 : fo.call(Qe, "[data-excel-grid-cell]"), Lt = (Rn = mt == null ? void 0 : mt.getAttribute) == null ? void 0 : Rn.call(mt, "data-excel-grid-cell");
      if (!Lt) return null;
      const [Ht, dt] = Lt.split(":"), fi = Number(Ht), ki = Number(dt);
      return !Number.isFinite(fi) || !Number.isFinite(ki) ? null : { row: fi, col: ki };
    }, Me = () => {
      if (!J) return;
      const Je = Ke.current, ht = $.current;
      if (!Je || !ht) return;
      const Qe = Je.getBoundingClientRect(), mt = 48, Lt = 24;
      let Ht = 0, dt = 0;
      ht.x < Qe.left + mt ? Ht = -Lt * (1 - (ht.x - Qe.left) / mt) : ht.x > Qe.right - mt && (Ht = Lt * (1 - (Qe.right - ht.x) / mt)), ht.y < Qe.top + mt ? dt = -Lt * (1 - (ht.y - Qe.top) / mt) : ht.y > Qe.bottom - mt && (dt = Lt * (1 - (Qe.bottom - ht.y) / mt)), Ht !== 0 && (Je.scrollLeft += Ht), dt !== 0 && (Je.scrollTop += dt), Z.current = window.requestAnimationFrame(Me);
    }, je = (Je) => {
      $.current = { x: Je.clientX, y: Je.clientY };
      const ht = ne(Je.clientX, Je.clientY);
      if (ht) {
        if (J === "select") {
          _e(ht, { extendSelection: !0 });
          return;
        }
        if (J === "fill") {
          const Qe = Er(ht);
          de.current = Qe, oe(Qe);
          return;
        }
        if (J === "col") {
          const Qe = Y.current;
          if (Qe == null) return;
          const mt = Math.min(Qe, ht.col), Lt = Math.max(Qe, ht.col);
          z({ row: 0, col: ht.col }), H({ start: { row: 0, col: mt }, end: { row: R - 1, col: Lt } });
          return;
        }
        if (J === "row") {
          const Qe = Y.current;
          if (Qe == null) return;
          const mt = Math.min(Qe, ht.row), Lt = Math.max(Qe, ht.row);
          z({ row: ht.row, col: 0 }), H({ start: { row: mt, col: 0 }, end: { row: Lt, col: E - 1 } });
        }
      }
    }, $e = () => {
      if (J === "fill") {
        const Je = de.current;
        Je && At(Je);
      }
      U(null), Y.current = null, de.current = null, oe(null);
    };
    return document.addEventListener("mousemove", je), document.addEventListener("mouseup", $e), Z.current = window.requestAnimationFrame(Me), () => {
      document.removeEventListener("mousemove", je), document.removeEventListener("mouseup", $e), Z.current != null && (window.cancelAnimationFrame(Z.current), Z.current = null);
    };
  }, [At, E, Er, J, R, _e]);
  const Yt = () => {
    const ne = Ke.current;
    if (!ne) return;
    const Me = ne.scrollTop + ne.clientHeight >= ne.scrollHeight - f, je = ne.scrollLeft + ne.clientWidth >= ne.scrollWidth - f;
    Me && O(($e) => $e >= s ? $e : Math.min(s, $e + u)), je && L(($e) => $e >= l ? $e : Math.min(l, $e + c));
  }, $r = (ne) => {
    if (G || !k) return;
    const Me = ne.shiftKey;
    if (ne.key === "ArrowUp") {
      ne.preventDefault(), _e({ row: Math.max(0, k.row - 1), col: k.col }, { extendSelection: Me });
      return;
    }
    if (ne.key === "ArrowDown") {
      ne.preventDefault(), _e({ row: k.row + 1, col: k.col }, { extendSelection: Me });
      return;
    }
    if (ne.key === "ArrowLeft") {
      ne.preventDefault(), _e({ row: k.row, col: Math.max(0, k.col - 1) }, { extendSelection: Me });
      return;
    }
    if (ne.key === "ArrowRight") {
      ne.preventDefault(), _e({ row: k.row, col: k.col + 1 }, { extendSelection: Me });
      return;
    }
    if (ne.key === "Enter" || ne.key === "F2") {
      ne.preventDefault(), re(k);
      return;
    }
    if (ne.key === "Backspace" || ne.key === "Delete") {
      ne.preventDefault(), Dt((je) => {
        const $e = { ...je }, Je = F ?? { start: k, end: k }, { top: ht, bottom: Qe, left: mt, right: Lt } = Np(Je);
        for (let Ht = ht; Ht <= Qe; Ht += 1)
          for (let dt = mt; dt <= Lt; dt += 1)
            delete $e[lu(Ht, dt)];
        return $e;
      });
      return;
    }
    if (y && ne.key.length === 1 && !ne.ctrlKey && !ne.metaKey && !ne.altKey) {
      ne.preventDefault(), re(k), q(ne.key);
      return;
    }
  }, xa = (ne) => {
    if (!b || !k) return;
    const Me = F ?? { start: k, end: k }, { top: je, bottom: $e, left: Je, right: ht } = Np(Me), Qe = [];
    for (let mt = je; mt <= $e; mt += 1) {
      const Lt = [];
      for (let Ht = Je; Ht <= ht; Ht += 1) {
        const dt = Pt(mt, Ht);
        Lt.push(dt == null ? "" : String(dt));
      }
      Qe.push(Lt.join("	"));
    }
    ne.clipboardData.setData("text/plain", Qe.join(`
`)), ne.preventDefault();
  }, he = (ne) => {
    var ki;
    if (!b || !k) return;
    const Me = ne.clipboardData.getData("text/plain"), je = xY(Me), $e = je.length, Je = ((ki = je[0]) == null ? void 0 : ki.length) ?? 0;
    if ($e <= 0 || Je <= 0) return;
    const Qe = Np(F ?? { start: k, end: k }), mt = Qe.top, Lt = Qe.left, Ht = Qe.bottom !== Qe.top || Qe.right !== Qe.left, dt = Ht ? Qe.bottom : mt + $e - 1, fi = Ht ? Qe.right : Lt + Je - 1;
    Kt(dt, fi), Dt((fo) => {
      var bs;
      let Rn = { ...fo };
      for (let au = mt; au <= dt; au += 1)
        for (let ou = Lt; ou <= fi; ou += 1) {
          const B0 = (au - mt) % $e, F0 = (ou - Lt) % Je, $0 = ((bs = je[B0]) == null ? void 0 : bs[F0]) ?? "", su = SM($0), Ep = lu(au, ou);
          su === null || su === "" ? delete Rn[Ep] : Rn[Ep] = su;
        }
      return Rn;
    }), ne.preventDefault();
  }, Se = Bt + De, Be = ft + ke;
  return /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: Pe,
      className: me(fe("w-full rounded-2xl bg-surface outline-none", e)),
      tabIndex: 0,
      onKeyDown: $r,
      onCopy: xa,
      onPaste: he,
      onMouseDown: () => {
        var ne;
        return (ne = Pe.current) == null ? void 0 : ne.focus();
      },
      ...C,
      children: /* @__PURE__ */ x.jsx(
        $h,
        {
          ref: Ke,
          direction: "both",
          autoHide: !0,
          className: "w-full rounded-2xl",
          style: { maxHeight: i },
          onScroll: Yt,
          children: /* @__PURE__ */ x.jsxs("div", { className: "relative", style: { width: Se, height: Be }, children: [
            m && /* @__PURE__ */ x.jsxs(
              "div",
              {
                className: "sticky top-0 z-30 flex bg-surface",
                style: { width: Se, height: p },
                children: [
                  g && /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: "sticky left-0 top-0 z-40 shrink-0 border-b border-r border-slate-200 bg-surface",
                      style: { width: v, height: p }
                    }
                  ),
                  /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: "relative border-b border-slate-200 bg-surface",
                      style: { width: De, height: p },
                      children: /* @__PURE__ */ x.jsx("div", { className: "relative", style: { height: p, width: De }, children: we.map((ne) => {
                        const Me = (k == null ? void 0 : k.col) === ne.index, je = Q === ne.index;
                        return /* @__PURE__ */ x.jsxs(
                          "div",
                          {
                            className: me(
                              fe(
                                "group absolute top-0 flex h-full items-center justify-center border-r border-slate-200 text-xs font-semibold text-text-secondary",
                                Me && "bg-primary-50"
                              )
                            ),
                            style: { left: ne.start, width: ne.size },
                            onMouseDown: ($e) => {
                              var Je;
                              $e.preventDefault(), (Je = Pe.current) == null || Je.focus(), $.current = { x: $e.clientX, y: $e.clientY }, Y.current = ne.index, z({ row: 0, col: ne.index }), H({
                                start: { row: 0, col: ne.index },
                                end: { row: R - 1, col: ne.index }
                              }), U("col");
                            },
                            "data-excel-grid-col-header": ne.index,
                            children: [
                              yY(ne.index),
                              /* @__PURE__ */ x.jsx(
                                "div",
                                {
                                  className: me(
                                    fe(
                                      "absolute right-0 top-0 h-full w-3 cursor-col-resize opacity-0 group-hover:opacity-100",
                                      je && "bg-primary-100/60 opacity-100"
                                    )
                                  ),
                                  style: {
                                    right: -6,
                                    zIndex: 10
                                  },
                                  onMouseDown: ($e) => {
                                    $e.preventDefault(), $e.stopPropagation(), ie({
                                      index: ne.index,
                                      startX: $e.clientX,
                                      startWidth: ne.size
                                    });
                                  },
                                  onMouseEnter: () => ce(ne.index),
                                  onMouseLeave: () => ce(null)
                                }
                              ),
                              je && /* @__PURE__ */ x.jsx("div", { className: "pointer-events-none absolute right-0 top-0 h-[200vh] w-px bg-primary-400", style: { right: 0 } })
                            ]
                          },
                          ne.key
                        );
                      }) })
                    }
                  )
                ]
              }
            ),
            g && /* @__PURE__ */ x.jsx(
              "div",
              {
                className: "sticky left-0 z-20 border-r border-slate-200 bg-surface",
                style: {
                  width: v,
                  height: ke
                },
                children: /* @__PURE__ */ x.jsx("div", { className: "relative", style: { height: ke, width: v }, children: Ye.map((ne) => {
                  const Me = (k == null ? void 0 : k.row) === ne.index;
                  return /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: me(
                        fe(
                          "absolute left-0 flex items-center justify-center border-b border-slate-200 text-xs text-text-muted",
                          Me && "bg-primary-50"
                        )
                      ),
                      style: { top: ne.start, height: ne.size, width: v },
                      onMouseDown: (je) => {
                        var $e;
                        je.preventDefault(), ($e = Pe.current) == null || $e.focus(), $.current = { x: je.clientX, y: je.clientY }, Y.current = ne.index, z({ row: ne.index, col: 0 }), H({
                          start: { row: ne.index, col: 0 },
                          end: { row: ne.index, col: E - 1 }
                        }), U("row");
                      },
                      "data-excel-grid-row-header": ne.index,
                      children: ne.index + 1
                    },
                    ne.key
                  );
                }) })
              }
            ),
            /* @__PURE__ */ x.jsx(
              "div",
              {
                className: "absolute",
                style: {
                  top: ft,
                  left: Bt,
                  width: De,
                  height: ke
                },
                children: /* @__PURE__ */ x.jsxs("div", { className: "relative", style: { width: De, height: ke }, children: [
                  nt && /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: "pointer-events-none absolute z-10 border-2 border-primary-500 bg-primary-50/10",
                      style: {
                        top: nt.top * d,
                        left: nt.left * h,
                        width: (nt.right - nt.left + 1) * h,
                        height: (nt.bottom - nt.top + 1) * d
                      }
                    }
                  ),
                  nt && te && /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: "pointer-events-none absolute z-10 border-2 border-dashed border-primary-500 bg-primary-50/5",
                      style: {
                        top: te.top * d,
                        left: te.left * h,
                        width: (te.right - te.left + 1) * h,
                        height: (te.bottom - te.top + 1) * d
                      }
                    }
                  ),
                  nt && /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: "absolute z-20 h-2 w-2 cursor-crosshair border border-white bg-primary-500",
                      style: {
                        top: (nt.bottom + 1) * d - 5,
                        left: (nt.right + 1) * h - 5
                      },
                      onMouseDown: (ne) => {
                        var Me;
                        G || (ne.preventDefault(), ne.stopPropagation(), (Me = Pe.current) == null || Me.focus(), $.current = { x: ne.clientX, y: ne.clientY }, de.current = null, oe(null), U("fill"));
                      }
                    }
                  ),
                  Ye.flatMap((ne) => we.map((Me) => {
                    const je = ne.index, $e = Me.index, Je = (k == null ? void 0 : k.row) === je && (k == null ? void 0 : k.col) === $e, ht = (G == null ? void 0 : G.row) === je && (G == null ? void 0 : G.col) === $e, Qe = Pt(je, $e), mt = !!gr && typeof Qe == "string" && Qe.trim().startsWith("="), Lt = mt ? (() => {
                      const dt = gr.evaluateCell(je, $e);
                      return Rt(dt) ? dt.code : dt === null ? "" : String(dt);
                    })() : null, Ht = !!nt && je >= nt.top && je <= nt.bottom && $e >= nt.left && $e <= nt.right;
                    return /* @__PURE__ */ x.jsx(
                      "div",
                      {
                        className: me(
                          fe(
                            "absolute border-b border-r border-slate-200 bg-surface text-sm text-text-primary",
                            "hover:bg-slate-50",
                            Ht && !Je && "bg-primary-50/60",
                            !ht && "px-2",
                            ht && "p-0",
                            Je && !ht && "outline outline-2 outline-primary-500 outline-offset-[-2px]",
                            mt && typeof Lt == "string" && Lt.startsWith("#") && "text-red-600"
                          )
                        ),
                        style: {
                          top: ne.start,
                          left: Me.start,
                          width: Me.size,
                          height: ne.size
                        },
                        "data-excel-grid-cell": `${je}:${$e}`,
                        onMouseDown: (dt) => {
                          var fi;
                          G || (dt.preventDefault(), (fi = Pe.current) == null || fi.focus(), $.current = { x: dt.clientX, y: dt.clientY }, _e({ row: je, col: $e }, { extendSelection: dt.shiftKey }), U("select"));
                        },
                        onDoubleClick: () => re({ row: je, col: $e }),
                        children: ht ? /* @__PURE__ */ x.jsx(
                          "input",
                          {
                            ref: it,
                            className: "h-full w-full bg-white px-2 text-sm text-text-primary outline-none",
                            value: X,
                            onMouseDown: (dt) => dt.stopPropagation(),
                            onChange: (dt) => q(dt.target.value),
                            onBlur: ve,
                            onKeyDown: (dt) => {
                              dt.key === "Enter" && (dt.preventDefault(), ve()), dt.key === "Escape" && (dt.preventDefault(), Ae());
                            }
                          }
                        ) : /* @__PURE__ */ x.jsx("span", { className: "block truncate", children: mt ? Lt : Qe ?? "" })
                      },
                      `${ne.key}:${Me.key}`
                    );
                  }))
                ] })
              }
            )
          ] })
        }
      )
    }
  );
}
const kP = T.forwardRef(
  ({
    className: e,
    value: t,
    defaultValue: r = 0,
    max: n = 5,
    readOnly: i,
    disabled: a,
    allowClear: o,
    size: s = "md",
    showValue: l,
    onChange: u,
    ...c
  }, f) => {
    const d = qc(), h = t !== void 0, [p, v] = T.useState(r), [g, m] = T.useState(null), y = h ? t : p, b = g ?? y, w = {
      sm: "h-4 w-4",
      md: "h-5 w-5",
      lg: "h-6 w-6"
    }, _ = (A) => {
      if (a || i) return;
      const M = o && A === y ? 0 : A;
      h || v(M), d(
        Il.UI_CHANGE,
        { value: M },
        { meta: { component: "Rating" } }
      ), u == null || u(M);
    }, S = (A) => {
      a || i || m(A);
    }, C = () => {
      a || i || m(null);
    };
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: f,
        className: me(
          fe(
            "inline-flex items-center gap-1",
            a && "cursor-not-allowed opacity-60",
            e
          )
        ),
        "aria-disabled": a,
        ...c,
        children: [
          Array.from({ length: n }, (A, M) => {
            const D = M + 1, N = b >= D;
            return /* @__PURE__ */ x.jsx(
              "button",
              {
                type: "button",
                className: fe(
                  "p-0 border-none bg-transparent outline-none",
                  a || i ? "cursor-default" : "cursor-pointer"
                ),
                onClick: () => _(D),
                onMouseEnter: () => S(D),
                onMouseLeave: C,
                disabled: a,
                "aria-label": `Rating ${D}`,
                children: /* @__PURE__ */ x.jsx(
                  "svg",
                  {
                    viewBox: "0 0 20 20",
                    className: fe(
                      "transition-colors duration-150",
                      w[s],
                      N ? "text-amber-400 fill-amber-400" : "text-slate-300 fill-slate-100"
                    ),
                    "aria-hidden": "true",
                    children: /* @__PURE__ */ x.jsx("path", { d: "M10 1.5l2.47 5.01 5.53.8-4 3.89.94 5.5L10 13.9l-4.94 2.8.94-5.5-4-3.9 5.53-.79L10 1.5z" })
                  }
                )
              },
              D
            );
          }),
          l && /* @__PURE__ */ x.jsxs("span", { className: "ml-1 text-xs font-medium text-text-secondary", children: [
            y,
            "/",
            n
          ] })
        ]
      }
    );
  }
);
kP.displayName = "Rating";
const wY = T.forwardRef(
  ({ className: e, orientation: t = "horizontal", label: r, align: n = "center", dashed: i, ...a }, o) => {
    const s = fe("border-slate-200", i && "border-dashed");
    if (t === "vertical")
      return /* @__PURE__ */ x.jsx(
        "div",
        {
          ref: o,
          role: "separator",
          "aria-orientation": "vertical",
          className: me(
            fe("mx-2 self-stretch border-l", s, e)
          ),
          ...a
        }
      );
    const l = (u) => /* @__PURE__ */ x.jsx(
      "div",
      {
        className: fe(
          "flex-1 border-t",
          s,
          r && n === "center" && (u === "left" ? "mr-3" : "ml-3"),
          r && n === "end" && u === "left" && "mr-3",
          r && n === "start" && u === "right" && "ml-3"
        )
      }
    );
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: o,
        role: "separator",
        "aria-orientation": "horizontal",
        className: me(fe("flex w-full items-center", e)),
        ...a,
        children: [
          !r && /* @__PURE__ */ x.jsx("div", { className: fe("h-px w-full border-t", s) }),
          r && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
            (n === "center" || n === "end") && l("left"),
            /* @__PURE__ */ x.jsx("span", { className: "text-xs font-medium text-text-muted", children: r }),
            (n === "center" || n === "start") && l("right")
          ] })
        ]
      }
    );
  }
);
wY.displayName = "Divider";
const _Y = (e) => {
  switch (e) {
    case "completed":
      return {
        dot: "bg-emerald-500",
        badge: "border-emerald-200 bg-emerald-50 text-emerald-700",
        item: "border-emerald-100 bg-emerald-25"
      };
    case "in-progress":
      return {
        dot: "bg-sky-500",
        badge: "border-sky-200 bg-sky-50 text-sky-700",
        item: "border-sky-100 bg-sky-25"
      };
    case "optional":
      return {
        dot: "bg-slate-400",
        badge: "border-slate-200 bg-slate-50 text-slate-600",
        item: "border-dashed border-slate-200 bg-surface"
      };
    case "todo":
    default:
      return {
        dot: "bg-slate-300",
        badge: "border-slate-200 bg-slate-50 text-slate-700",
        item: "border-slate-200 bg-surface"
      };
  }
}, SY = ({
  config: e,
  orientation: t = "horizontal",
  onItemClick: r,
  className: n,
  ...i
}) => {
  const a = t === "horizontal", o = me(fe("w-full", a && "overflow-x-auto", n)), s = fe(
    "flex",
    a ? "gap-8 py-2" : "flex-col gap-6 py-2"
  ), l = (u) => {
    r && r(u);
  };
  return /* @__PURE__ */ x.jsxs("div", { className: o, ...i, children: [
    e.title && /* @__PURE__ */ x.jsxs("div", { className: "mb-3", children: [
      /* @__PURE__ */ x.jsx("h2", { className: "text-lg font-semibold text-text-primary", children: e.title }),
      e.description && /* @__PURE__ */ x.jsx("p", { className: "mt-1 text-sm text-text-secondary", children: e.description })
    ] }),
    /* @__PURE__ */ x.jsx("div", { className: s, children: e.columns.map((u) => /* @__PURE__ */ x.jsxs(
      "div",
      {
        className: fe(
          "flex min-w-[260px] max-w-[340px] flex-col gap-3 rounded-2xl bg-surface-alt p-3 shadow-sm",
          !a && "w-full"
        ),
        children: [
          /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold uppercase tracking-wide text-text-muted", children: u.title }),
          /* @__PURE__ */ x.jsx("div", { className: "space-y-3", children: u.groups.map((c) => /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: "rounded-2xl border border-slate-100 bg-surface p-3 shadow-xs",
              children: [
                /* @__PURE__ */ x.jsx("div", { className: "mb-2 text-xs font-semibold uppercase tracking-wide text-text-secondary", children: c.title }),
                /* @__PURE__ */ x.jsxs("div", { className: "relative pl-4", children: [
                  /* @__PURE__ */ x.jsx("div", { className: "absolute left-1 top-1 bottom-1 w-px bg-slate-200" }),
                  /* @__PURE__ */ x.jsx("div", { className: "space-y-2", children: c.items.map((f, d) => {
                    const h = _Y(f.status), p = !!(r || f.href), v = /* @__PURE__ */ x.jsxs(
                      "div",
                      {
                        className: me(
                          fe(
                            "relative flex items-start gap-2 rounded-xl border px-3 py-2 text-sm text-text-primary transition-colors",
                            p && "cursor-pointer hover:bg-primary-50",
                            h.item,
                            d === 0 && "mt-0"
                          )
                        ),
                        children: [
                          /* @__PURE__ */ x.jsx("div", { className: "mt-1 flex h-2 w-2 flex-shrink-0 items-center justify-center", children: /* @__PURE__ */ x.jsx(
                            "span",
                            {
                              className: me(
                                fe("block h-2 w-2 rounded-full", h.dot)
                              )
                            }
                          ) }),
                          /* @__PURE__ */ x.jsxs("div", { className: "flex flex-1 flex-col gap-1", children: [
                            /* @__PURE__ */ x.jsxs("div", { className: "flex flex-wrap items-center gap-2", children: [
                              /* @__PURE__ */ x.jsx("span", { className: "text-xs font-medium text-text-primary", children: f.label }),
                              f.tag && /* @__PURE__ */ x.jsx("span", { className: "rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-medium uppercase tracking-wide text-text-secondary", children: f.tag }),
                              f.status && /* @__PURE__ */ x.jsxs(
                                "span",
                                {
                                  className: me(
                                    fe(
                                      "rounded-full border px-2 py-0.5 text-[10px] font-medium uppercase tracking-wide",
                                      h.badge
                                    )
                                  ),
                                  children: [
                                    f.status === "completed" && "Done",
                                    f.status === "in-progress" && "In progress",
                                    f.status === "todo" && "Todo",
                                    f.status === "optional" && "Optional"
                                  ]
                                }
                              )
                            ] }),
                            f.description && /* @__PURE__ */ x.jsx("p", { className: "text-xs text-text-secondary", children: f.description })
                          ] })
                        ]
                      }
                    );
                    return f.href ? /* @__PURE__ */ x.jsx(
                      "a",
                      {
                        href: f.href,
                        target: "_blank",
                        rel: "noreferrer",
                        onClick: () => l(f),
                        children: v
                      },
                      f.id
                    ) : /* @__PURE__ */ x.jsx(
                      "button",
                      {
                        type: "button",
                        onClick: () => l(f),
                        className: "w-full text-left",
                        children: v
                      },
                      f.id
                    );
                  }) })
                ] })
              ]
            },
            c.id
          )) })
        ]
      },
      u.id
    )) })
  ] });
};
SY.displayName = "Roadmap";
function cn(e) {
  if (typeof e == "string" || typeof e == "number") return "" + e;
  let t = "";
  if (Array.isArray(e))
    for (let r = 0, n; r < e.length; r++)
      (n = cn(e[r])) !== "" && (t += (t && " ") + n);
  else
    for (let r in e)
      e[r] && (t += (t && " ") + r);
  return t;
}
const CY = {}, CM = (e) => {
  let t;
  const r = /* @__PURE__ */ new Set(), n = (c, f) => {
    const d = typeof c == "function" ? c(t) : c;
    if (!Object.is(d, t)) {
      const h = t;
      t = f ?? (typeof d != "object" || d === null) ? d : Object.assign({}, t, d), r.forEach((p) => p(t, h));
    }
  }, i = () => t, l = { setState: n, getState: i, getInitialState: () => u, subscribe: (c) => (r.add(c), () => r.delete(c)), destroy: () => {
    (CY ? "production" : void 0) !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), r.clear();
  } }, u = t = e(n, i, l);
  return l;
}, OP = (e) => e ? CM(e) : CM, { useDebugValue: TY } = se, { useSyncExternalStoreWithSelector: AY } = sP, MY = (e) => e;
function zP(e, t = MY, r) {
  const n = AY(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    r
  );
  return TY(n), n;
}
const TM = (e, t) => {
  const r = OP(e), n = (i, a = t) => zP(r, i, a);
  return Object.assign(n, r), n;
}, EY = (e, t) => e ? TM(e, t) : TM;
function Or(e, t) {
  if (Object.is(e, t))
    return !0;
  if (typeof e != "object" || e === null || typeof t != "object" || t === null)
    return !1;
  if (e instanceof Map && t instanceof Map) {
    if (e.size !== t.size) return !1;
    for (const [n, i] of e)
      if (!Object.is(i, t.get(n)))
        return !1;
    return !0;
  }
  if (e instanceof Set && t instanceof Set) {
    if (e.size !== t.size) return !1;
    for (const n of e)
      if (!t.has(n))
        return !1;
    return !0;
  }
  const r = Object.keys(e);
  if (r.length !== Object.keys(t).length)
    return !1;
  for (const n of r)
    if (!Object.prototype.hasOwnProperty.call(t, n) || !Object.is(e[n], t[n]))
      return !1;
  return !0;
}
var DY = { value: () => {
} };
function py() {
  for (var e = 0, t = arguments.length, r = {}, n; e < t; ++e) {
    if (!(n = arguments[e] + "") || n in r || /[\s.]/.test(n)) throw new Error("illegal type: " + n);
    r[n] = [];
  }
  return new rg(r);
}
function rg(e) {
  this._ = e;
}
function NY(e, t) {
  return e.trim().split(/^|\s+/).map(function(r) {
    var n = "", i = r.indexOf(".");
    if (i >= 0 && (n = r.slice(i + 1), r = r.slice(0, i)), r && !t.hasOwnProperty(r)) throw new Error("unknown type: " + r);
    return { type: r, name: n };
  });
}
rg.prototype = py.prototype = {
  constructor: rg,
  on: function(e, t) {
    var r = this._, n = NY(e + "", r), i, a = -1, o = n.length;
    if (arguments.length < 2) {
      for (; ++a < o; ) if ((i = (e = n[a]).type) && (i = IY(r[i], e.name))) return i;
      return;
    }
    if (t != null && typeof t != "function") throw new Error("invalid callback: " + t);
    for (; ++a < o; )
      if (i = (e = n[a]).type) r[i] = AM(r[i], e.name, t);
      else if (t == null) for (i in r) r[i] = AM(r[i], e.name, null);
    return this;
  },
  copy: function() {
    var e = {}, t = this._;
    for (var r in t) e[r] = t[r].slice();
    return new rg(e);
  },
  call: function(e, t) {
    if ((i = arguments.length - 2) > 0) for (var r = new Array(i), n = 0, i, a; n < i; ++n) r[n] = arguments[n + 2];
    if (!this._.hasOwnProperty(e)) throw new Error("unknown type: " + e);
    for (a = this._[e], n = 0, i = a.length; n < i; ++n) a[n].value.apply(t, r);
  },
  apply: function(e, t, r) {
    if (!this._.hasOwnProperty(e)) throw new Error("unknown type: " + e);
    for (var n = this._[e], i = 0, a = n.length; i < a; ++i) n[i].value.apply(t, r);
  }
};
function IY(e, t) {
  for (var r = 0, n = e.length, i; r < n; ++r)
    if ((i = e[r]).name === t)
      return i.value;
}
function AM(e, t, r) {
  for (var n = 0, i = e.length; n < i; ++n)
    if (e[n].name === t) {
      e[n] = DY, e = e.slice(0, n).concat(e.slice(n + 1));
      break;
    }
  return r != null && e.push({ name: t, value: r }), e;
}
var g2 = "http://www.w3.org/1999/xhtml";
const MM = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: g2,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function vy(e) {
  var t = e += "", r = t.indexOf(":");
  return r >= 0 && (t = e.slice(0, r)) !== "xmlns" && (e = e.slice(r + 1)), MM.hasOwnProperty(t) ? { space: MM[t], local: e } : e;
}
function LY(e) {
  return function() {
    var t = this.ownerDocument, r = this.namespaceURI;
    return r === g2 && t.documentElement.namespaceURI === g2 ? t.createElement(e) : t.createElementNS(r, e);
  };
}
function RY(e) {
  return function() {
    return this.ownerDocument.createElementNS(e.space, e.local);
  };
}
function jP(e) {
  var t = vy(e);
  return (t.local ? RY : LY)(t);
}
function PY() {
}
function wS(e) {
  return e == null ? PY : function() {
    return this.querySelector(e);
  };
}
function kY(e) {
  typeof e != "function" && (e = wS(e));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var a = t[i], o = a.length, s = n[i] = new Array(o), l, u, c = 0; c < o; ++c)
      (l = a[c]) && (u = e.call(l, l.__data__, c, a)) && ("__data__" in l && (u.__data__ = l.__data__), s[c] = u);
  return new Nn(n, this._parents);
}
function OY(e) {
  return e == null ? [] : Array.isArray(e) ? e : Array.from(e);
}
function zY() {
  return [];
}
function VP(e) {
  return e == null ? zY : function() {
    return this.querySelectorAll(e);
  };
}
function jY(e) {
  return function() {
    return OY(e.apply(this, arguments));
  };
}
function VY(e) {
  typeof e == "function" ? e = jY(e) : e = VP(e);
  for (var t = this._groups, r = t.length, n = [], i = [], a = 0; a < r; ++a)
    for (var o = t[a], s = o.length, l, u = 0; u < s; ++u)
      (l = o[u]) && (n.push(e.call(l, l.__data__, u, o)), i.push(l));
  return new Nn(n, i);
}
function BP(e) {
  return function() {
    return this.matches(e);
  };
}
function FP(e) {
  return function(t) {
    return t.matches(e);
  };
}
var BY = Array.prototype.find;
function FY(e) {
  return function() {
    return BY.call(this.children, e);
  };
}
function $Y() {
  return this.firstElementChild;
}
function HY(e) {
  return this.select(e == null ? $Y : FY(typeof e == "function" ? e : FP(e)));
}
var GY = Array.prototype.filter;
function WY() {
  return Array.from(this.children);
}
function UY(e) {
  return function() {
    return GY.call(this.children, e);
  };
}
function YY(e) {
  return this.selectAll(e == null ? WY : UY(typeof e == "function" ? e : FP(e)));
}
function ZY(e) {
  typeof e != "function" && (e = BP(e));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var a = t[i], o = a.length, s = n[i] = [], l, u = 0; u < o; ++u)
      (l = a[u]) && e.call(l, l.__data__, u, a) && s.push(l);
  return new Nn(n, this._parents);
}
function $P(e) {
  return new Array(e.length);
}
function XY() {
  return new Nn(this._enter || this._groups.map($P), this._parents);
}
function kg(e, t) {
  this.ownerDocument = e.ownerDocument, this.namespaceURI = e.namespaceURI, this._next = null, this._parent = e, this.__data__ = t;
}
kg.prototype = {
  constructor: kg,
  appendChild: function(e) {
    return this._parent.insertBefore(e, this._next);
  },
  insertBefore: function(e, t) {
    return this._parent.insertBefore(e, t);
  },
  querySelector: function(e) {
    return this._parent.querySelector(e);
  },
  querySelectorAll: function(e) {
    return this._parent.querySelectorAll(e);
  }
};
function KY(e) {
  return function() {
    return e;
  };
}
function qY(e, t, r, n, i, a) {
  for (var o = 0, s, l = t.length, u = a.length; o < u; ++o)
    (s = t[o]) ? (s.__data__ = a[o], n[o] = s) : r[o] = new kg(e, a[o]);
  for (; o < l; ++o)
    (s = t[o]) && (i[o] = s);
}
function JY(e, t, r, n, i, a, o) {
  var s, l, u = /* @__PURE__ */ new Map(), c = t.length, f = a.length, d = new Array(c), h;
  for (s = 0; s < c; ++s)
    (l = t[s]) && (d[s] = h = o.call(l, l.__data__, s, t) + "", u.has(h) ? i[s] = l : u.set(h, l));
  for (s = 0; s < f; ++s)
    h = o.call(e, a[s], s, a) + "", (l = u.get(h)) ? (n[s] = l, l.__data__ = a[s], u.delete(h)) : r[s] = new kg(e, a[s]);
  for (s = 0; s < c; ++s)
    (l = t[s]) && u.get(d[s]) === l && (i[s] = l);
}
function QY(e) {
  return e.__data__;
}
function eZ(e, t) {
  if (!arguments.length) return Array.from(this, QY);
  var r = t ? JY : qY, n = this._parents, i = this._groups;
  typeof e != "function" && (e = KY(e));
  for (var a = i.length, o = new Array(a), s = new Array(a), l = new Array(a), u = 0; u < a; ++u) {
    var c = n[u], f = i[u], d = f.length, h = tZ(e.call(c, c && c.__data__, u, n)), p = h.length, v = s[u] = new Array(p), g = o[u] = new Array(p), m = l[u] = new Array(d);
    r(c, f, v, g, m, h, t);
    for (var y = 0, b = 0, w, _; y < p; ++y)
      if (w = v[y]) {
        for (y >= b && (b = y + 1); !(_ = g[b]) && ++b < p; ) ;
        w._next = _ || null;
      }
  }
  return o = new Nn(o, n), o._enter = s, o._exit = l, o;
}
function tZ(e) {
  return typeof e == "object" && "length" in e ? e : Array.from(e);
}
function rZ() {
  return new Nn(this._exit || this._groups.map($P), this._parents);
}
function nZ(e, t, r) {
  var n = this.enter(), i = this, a = this.exit();
  return typeof e == "function" ? (n = e(n), n && (n = n.selection())) : n = n.append(e + ""), t != null && (i = t(i), i && (i = i.selection())), r == null ? a.remove() : r(a), n && i ? n.merge(i).order() : i;
}
function iZ(e) {
  for (var t = e.selection ? e.selection() : e, r = this._groups, n = t._groups, i = r.length, a = n.length, o = Math.min(i, a), s = new Array(i), l = 0; l < o; ++l)
    for (var u = r[l], c = n[l], f = u.length, d = s[l] = new Array(f), h, p = 0; p < f; ++p)
      (h = u[p] || c[p]) && (d[p] = h);
  for (; l < i; ++l)
    s[l] = r[l];
  return new Nn(s, this._parents);
}
function aZ() {
  for (var e = this._groups, t = -1, r = e.length; ++t < r; )
    for (var n = e[t], i = n.length - 1, a = n[i], o; --i >= 0; )
      (o = n[i]) && (a && o.compareDocumentPosition(a) ^ 4 && a.parentNode.insertBefore(o, a), a = o);
  return this;
}
function oZ(e) {
  e || (e = sZ);
  function t(f, d) {
    return f && d ? e(f.__data__, d.__data__) : !f - !d;
  }
  for (var r = this._groups, n = r.length, i = new Array(n), a = 0; a < n; ++a) {
    for (var o = r[a], s = o.length, l = i[a] = new Array(s), u, c = 0; c < s; ++c)
      (u = o[c]) && (l[c] = u);
    l.sort(t);
  }
  return new Nn(i, this._parents).order();
}
function sZ(e, t) {
  return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;
}
function lZ() {
  var e = arguments[0];
  return arguments[0] = this, e.apply(null, arguments), this;
}
function uZ() {
  return Array.from(this);
}
function cZ() {
  for (var e = this._groups, t = 0, r = e.length; t < r; ++t)
    for (var n = e[t], i = 0, a = n.length; i < a; ++i) {
      var o = n[i];
      if (o) return o;
    }
  return null;
}
function fZ() {
  let e = 0;
  for (const t of this) ++e;
  return e;
}
function dZ() {
  return !this.node();
}
function hZ(e) {
  for (var t = this._groups, r = 0, n = t.length; r < n; ++r)
    for (var i = t[r], a = 0, o = i.length, s; a < o; ++a)
      (s = i[a]) && e.call(s, s.__data__, a, i);
  return this;
}
function pZ(e) {
  return function() {
    this.removeAttribute(e);
  };
}
function vZ(e) {
  return function() {
    this.removeAttributeNS(e.space, e.local);
  };
}
function gZ(e, t) {
  return function() {
    this.setAttribute(e, t);
  };
}
function mZ(e, t) {
  return function() {
    this.setAttributeNS(e.space, e.local, t);
  };
}
function yZ(e, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? this.removeAttribute(e) : this.setAttribute(e, r);
  };
}
function xZ(e, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, r);
  };
}
function bZ(e, t) {
  var r = vy(e);
  if (arguments.length < 2) {
    var n = this.node();
    return r.local ? n.getAttributeNS(r.space, r.local) : n.getAttribute(r);
  }
  return this.each((t == null ? r.local ? vZ : pZ : typeof t == "function" ? r.local ? xZ : yZ : r.local ? mZ : gZ)(r, t));
}
function HP(e) {
  return e.ownerDocument && e.ownerDocument.defaultView || e.document && e || e.defaultView;
}
function wZ(e) {
  return function() {
    this.style.removeProperty(e);
  };
}
function _Z(e, t, r) {
  return function() {
    this.style.setProperty(e, t, r);
  };
}
function SZ(e, t, r) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.style.removeProperty(e) : this.style.setProperty(e, n, r);
  };
}
function CZ(e, t, r) {
  return arguments.length > 1 ? this.each((t == null ? wZ : typeof t == "function" ? SZ : _Z)(e, t, r ?? "")) : Ac(this.node(), e);
}
function Ac(e, t) {
  return e.style.getPropertyValue(t) || HP(e).getComputedStyle(e, null).getPropertyValue(t);
}
function TZ(e) {
  return function() {
    delete this[e];
  };
}
function AZ(e, t) {
  return function() {
    this[e] = t;
  };
}
function MZ(e, t) {
  return function() {
    var r = t.apply(this, arguments);
    r == null ? delete this[e] : this[e] = r;
  };
}
function EZ(e, t) {
  return arguments.length > 1 ? this.each((t == null ? TZ : typeof t == "function" ? MZ : AZ)(e, t)) : this.node()[e];
}
function GP(e) {
  return e.trim().split(/^|\s+/);
}
function _S(e) {
  return e.classList || new WP(e);
}
function WP(e) {
  this._node = e, this._names = GP(e.getAttribute("class") || "");
}
WP.prototype = {
  add: function(e) {
    var t = this._names.indexOf(e);
    t < 0 && (this._names.push(e), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(e) {
    var t = this._names.indexOf(e);
    t >= 0 && (this._names.splice(t, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(e) {
    return this._names.indexOf(e) >= 0;
  }
};
function UP(e, t) {
  for (var r = _S(e), n = -1, i = t.length; ++n < i; ) r.add(t[n]);
}
function YP(e, t) {
  for (var r = _S(e), n = -1, i = t.length; ++n < i; ) r.remove(t[n]);
}
function DZ(e) {
  return function() {
    UP(this, e);
  };
}
function NZ(e) {
  return function() {
    YP(this, e);
  };
}
function IZ(e, t) {
  return function() {
    (t.apply(this, arguments) ? UP : YP)(this, e);
  };
}
function LZ(e, t) {
  var r = GP(e + "");
  if (arguments.length < 2) {
    for (var n = _S(this.node()), i = -1, a = r.length; ++i < a; ) if (!n.contains(r[i])) return !1;
    return !0;
  }
  return this.each((typeof t == "function" ? IZ : t ? DZ : NZ)(r, t));
}
function RZ() {
  this.textContent = "";
}
function PZ(e) {
  return function() {
    this.textContent = e;
  };
}
function kZ(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.textContent = t ?? "";
  };
}
function OZ(e) {
  return arguments.length ? this.each(e == null ? RZ : (typeof e == "function" ? kZ : PZ)(e)) : this.node().textContent;
}
function zZ() {
  this.innerHTML = "";
}
function jZ(e) {
  return function() {
    this.innerHTML = e;
  };
}
function VZ(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.innerHTML = t ?? "";
  };
}
function BZ(e) {
  return arguments.length ? this.each(e == null ? zZ : (typeof e == "function" ? VZ : jZ)(e)) : this.node().innerHTML;
}
function FZ() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function $Z() {
  return this.each(FZ);
}
function HZ() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function GZ() {
  return this.each(HZ);
}
function WZ(e) {
  var t = typeof e == "function" ? e : jP(e);
  return this.select(function() {
    return this.appendChild(t.apply(this, arguments));
  });
}
function UZ() {
  return null;
}
function YZ(e, t) {
  var r = typeof e == "function" ? e : jP(e), n = t == null ? UZ : typeof t == "function" ? t : wS(t);
  return this.select(function() {
    return this.insertBefore(r.apply(this, arguments), n.apply(this, arguments) || null);
  });
}
function ZZ() {
  var e = this.parentNode;
  e && e.removeChild(this);
}
function XZ() {
  return this.each(ZZ);
}
function KZ() {
  var e = this.cloneNode(!1), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function qZ() {
  var e = this.cloneNode(!0), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function JZ(e) {
  return this.select(e ? qZ : KZ);
}
function QZ(e) {
  return arguments.length ? this.property("__data__", e) : this.node().__data__;
}
function eX(e) {
  return function(t) {
    e.call(this, t, this.__data__);
  };
}
function tX(e) {
  return e.trim().split(/^|\s+/).map(function(t) {
    var r = "", n = t.indexOf(".");
    return n >= 0 && (r = t.slice(n + 1), t = t.slice(0, n)), { type: t, name: r };
  });
}
function rX(e) {
  return function() {
    var t = this.__on;
    if (t) {
      for (var r = 0, n = -1, i = t.length, a; r < i; ++r)
        a = t[r], (!e.type || a.type === e.type) && a.name === e.name ? this.removeEventListener(a.type, a.listener, a.options) : t[++n] = a;
      ++n ? t.length = n : delete this.__on;
    }
  };
}
function nX(e, t, r) {
  return function() {
    var n = this.__on, i, a = eX(t);
    if (n) {
      for (var o = 0, s = n.length; o < s; ++o)
        if ((i = n[o]).type === e.type && i.name === e.name) {
          this.removeEventListener(i.type, i.listener, i.options), this.addEventListener(i.type, i.listener = a, i.options = r), i.value = t;
          return;
        }
    }
    this.addEventListener(e.type, a, r), i = { type: e.type, name: e.name, value: t, listener: a, options: r }, n ? n.push(i) : this.__on = [i];
  };
}
function iX(e, t, r) {
  var n = tX(e + ""), i, a = n.length, o;
  if (arguments.length < 2) {
    var s = this.node().__on;
    if (s) {
      for (var l = 0, u = s.length, c; l < u; ++l)
        for (i = 0, c = s[l]; i < a; ++i)
          if ((o = n[i]).type === c.type && o.name === c.name)
            return c.value;
    }
    return;
  }
  for (s = t ? nX : rX, i = 0; i < a; ++i) this.each(s(n[i], t, r));
  return this;
}
function ZP(e, t, r) {
  var n = HP(e), i = n.CustomEvent;
  typeof i == "function" ? i = new i(t, r) : (i = n.document.createEvent("Event"), r ? (i.initEvent(t, r.bubbles, r.cancelable), i.detail = r.detail) : i.initEvent(t, !1, !1)), e.dispatchEvent(i);
}
function aX(e, t) {
  return function() {
    return ZP(this, e, t);
  };
}
function oX(e, t) {
  return function() {
    return ZP(this, e, t.apply(this, arguments));
  };
}
function sX(e, t) {
  return this.each((typeof t == "function" ? oX : aX)(e, t));
}
function* lX() {
  for (var e = this._groups, t = 0, r = e.length; t < r; ++t)
    for (var n = e[t], i = 0, a = n.length, o; i < a; ++i)
      (o = n[i]) && (yield o);
}
var XP = [null];
function Nn(e, t) {
  this._groups = e, this._parents = t;
}
function Wh() {
  return new Nn([[document.documentElement]], XP);
}
function uX() {
  return this;
}
Nn.prototype = Wh.prototype = {
  constructor: Nn,
  select: kY,
  selectAll: VY,
  selectChild: HY,
  selectChildren: YY,
  filter: ZY,
  data: eZ,
  enter: XY,
  exit: rZ,
  join: nZ,
  merge: iZ,
  selection: uX,
  order: aZ,
  sort: oZ,
  call: lZ,
  nodes: uZ,
  node: cZ,
  size: fZ,
  empty: dZ,
  each: hZ,
  attr: bZ,
  style: CZ,
  property: EZ,
  classed: LZ,
  text: OZ,
  html: BZ,
  raise: $Z,
  lower: GZ,
  append: WZ,
  insert: YZ,
  remove: XZ,
  clone: JZ,
  datum: QZ,
  on: iX,
  dispatch: sX,
  [Symbol.iterator]: lX
};
function yi(e) {
  return typeof e == "string" ? new Nn([[document.querySelector(e)]], [document.documentElement]) : new Nn([[e]], XP);
}
function cX(e) {
  let t;
  for (; t = e.sourceEvent; ) e = t;
  return e;
}
function Hi(e, t) {
  if (e = cX(e), t === void 0 && (t = e.currentTarget), t) {
    var r = t.ownerSVGElement || t;
    if (r.createSVGPoint) {
      var n = r.createSVGPoint();
      return n.x = e.clientX, n.y = e.clientY, n = n.matrixTransform(t.getScreenCTM().inverse()), [n.x, n.y];
    }
    if (t.getBoundingClientRect) {
      var i = t.getBoundingClientRect();
      return [e.clientX - i.left - t.clientLeft, e.clientY - i.top - t.clientTop];
    }
  }
  return [e.pageX, e.pageY];
}
const fX = { passive: !1 }, qd = { capture: !0, passive: !1 };
function K0(e) {
  e.stopImmediatePropagation();
}
function oc(e) {
  e.preventDefault(), e.stopImmediatePropagation();
}
function KP(e) {
  var t = e.document.documentElement, r = yi(e).on("dragstart.drag", oc, qd);
  "onselectstart" in t ? r.on("selectstart.drag", oc, qd) : (t.__noselect = t.style.MozUserSelect, t.style.MozUserSelect = "none");
}
function qP(e, t) {
  var r = e.document.documentElement, n = yi(e).on("dragstart.drag", null);
  t && (n.on("click.drag", oc, qd), setTimeout(function() {
    n.on("click.drag", null);
  }, 0)), "onselectstart" in r ? n.on("selectstart.drag", null) : (r.style.MozUserSelect = r.__noselect, delete r.__noselect);
}
const Ip = (e) => () => e;
function m2(e, {
  sourceEvent: t,
  subject: r,
  target: n,
  identifier: i,
  active: a,
  x: o,
  y: s,
  dx: l,
  dy: u,
  dispatch: c
}) {
  Object.defineProperties(this, {
    type: { value: e, enumerable: !0, configurable: !0 },
    sourceEvent: { value: t, enumerable: !0, configurable: !0 },
    subject: { value: r, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    identifier: { value: i, enumerable: !0, configurable: !0 },
    active: { value: a, enumerable: !0, configurable: !0 },
    x: { value: o, enumerable: !0, configurable: !0 },
    y: { value: s, enumerable: !0, configurable: !0 },
    dx: { value: l, enumerable: !0, configurable: !0 },
    dy: { value: u, enumerable: !0, configurable: !0 },
    _: { value: c }
  });
}
m2.prototype.on = function() {
  var e = this._.on.apply(this._, arguments);
  return e === this._ ? this : e;
};
function dX(e) {
  return !e.ctrlKey && !e.button;
}
function hX() {
  return this.parentNode;
}
function pX(e, t) {
  return t ?? { x: e.x, y: e.y };
}
function vX() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function gX() {
  var e = dX, t = hX, r = pX, n = vX, i = {}, a = py("start", "drag", "end"), o = 0, s, l, u, c, f = 0;
  function d(w) {
    w.on("mousedown.drag", h).filter(n).on("touchstart.drag", g).on("touchmove.drag", m, fX).on("touchend.drag touchcancel.drag", y).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  function h(w, _) {
    if (!(c || !e.call(this, w, _))) {
      var S = b(this, t.call(this, w, _), w, _, "mouse");
      S && (yi(w.view).on("mousemove.drag", p, qd).on("mouseup.drag", v, qd), KP(w.view), K0(w), u = !1, s = w.clientX, l = w.clientY, S("start", w));
    }
  }
  function p(w) {
    if (oc(w), !u) {
      var _ = w.clientX - s, S = w.clientY - l;
      u = _ * _ + S * S > f;
    }
    i.mouse("drag", w);
  }
  function v(w) {
    yi(w.view).on("mousemove.drag mouseup.drag", null), qP(w.view, u), oc(w), i.mouse("end", w);
  }
  function g(w, _) {
    if (e.call(this, w, _)) {
      var S = w.changedTouches, C = t.call(this, w, _), A = S.length, M, D;
      for (M = 0; M < A; ++M)
        (D = b(this, C, w, _, S[M].identifier, S[M])) && (K0(w), D("start", w, S[M]));
    }
  }
  function m(w) {
    var _ = w.changedTouches, S = _.length, C, A;
    for (C = 0; C < S; ++C)
      (A = i[_[C].identifier]) && (oc(w), A("drag", w, _[C]));
  }
  function y(w) {
    var _ = w.changedTouches, S = _.length, C, A;
    for (c && clearTimeout(c), c = setTimeout(function() {
      c = null;
    }, 500), C = 0; C < S; ++C)
      (A = i[_[C].identifier]) && (K0(w), A("end", w, _[C]));
  }
  function b(w, _, S, C, A, M) {
    var D = a.copy(), N = Hi(M || S, _), R, O, E;
    if ((E = r.call(w, new m2("beforestart", {
      sourceEvent: S,
      target: d,
      identifier: A,
      active: o,
      x: N[0],
      y: N[1],
      dx: 0,
      dy: 0,
      dispatch: D
    }), C)) != null)
      return R = E.x - N[0] || 0, O = E.y - N[1] || 0, function L(I, P, k) {
        var z = N, V;
        switch (I) {
          case "start":
            i[A] = L, V = o++;
            break;
          case "end":
            delete i[A], --o;
          case "drag":
            N = Hi(k || P, _), V = o;
            break;
        }
        D.call(
          I,
          w,
          new m2(I, {
            sourceEvent: P,
            subject: E,
            target: d,
            identifier: A,
            active: V,
            x: N[0] + R,
            y: N[1] + O,
            dx: N[0] - z[0],
            dy: N[1] - z[1],
            dispatch: D
          }),
          C
        );
      };
  }
  return d.filter = function(w) {
    return arguments.length ? (e = typeof w == "function" ? w : Ip(!!w), d) : e;
  }, d.container = function(w) {
    return arguments.length ? (t = typeof w == "function" ? w : Ip(w), d) : t;
  }, d.subject = function(w) {
    return arguments.length ? (r = typeof w == "function" ? w : Ip(w), d) : r;
  }, d.touchable = function(w) {
    return arguments.length ? (n = typeof w == "function" ? w : Ip(!!w), d) : n;
  }, d.on = function() {
    var w = a.on.apply(a, arguments);
    return w === a ? d : w;
  }, d.clickDistance = function(w) {
    return arguments.length ? (f = (w = +w) * w, d) : Math.sqrt(f);
  }, d;
}
function SS(e, t, r) {
  e.prototype = t.prototype = r, r.constructor = e;
}
function JP(e, t) {
  var r = Object.create(e.prototype);
  for (var n in t) r[n] = t[n];
  return r;
}
function Uh() {
}
var Jd = 0.7, Og = 1 / Jd, sc = "\\s*([+-]?\\d+)\\s*", Qd = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", ta = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", mX = /^#([0-9a-f]{3,8})$/, yX = new RegExp(`^rgb\\(${sc},${sc},${sc}\\)$`), xX = new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`), bX = new RegExp(`^rgba\\(${sc},${sc},${sc},${Qd}\\)$`), wX = new RegExp(`^rgba\\(${ta},${ta},${ta},${Qd}\\)$`), _X = new RegExp(`^hsl\\(${Qd},${ta},${ta}\\)$`), SX = new RegExp(`^hsla\\(${Qd},${ta},${ta},${Qd}\\)$`), EM = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
SS(Uh, eh, {
  copy(e) {
    return Object.assign(new this.constructor(), this, e);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: DM,
  // Deprecated! Use color.formatHex.
  formatHex: DM,
  formatHex8: CX,
  formatHsl: TX,
  formatRgb: NM,
  toString: NM
});
function DM() {
  return this.rgb().formatHex();
}
function CX() {
  return this.rgb().formatHex8();
}
function TX() {
  return QP(this).formatHsl();
}
function NM() {
  return this.rgb().formatRgb();
}
function eh(e) {
  var t, r;
  return e = (e + "").trim().toLowerCase(), (t = mX.exec(e)) ? (r = t[1].length, t = parseInt(t[1], 16), r === 6 ? IM(t) : r === 3 ? new mn(t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, (t & 15) << 4 | t & 15, 1) : r === 8 ? Lp(t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, (t & 255) / 255) : r === 4 ? Lp(t >> 12 & 15 | t >> 8 & 240, t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, ((t & 15) << 4 | t & 15) / 255) : null) : (t = yX.exec(e)) ? new mn(t[1], t[2], t[3], 1) : (t = xX.exec(e)) ? new mn(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, 1) : (t = bX.exec(e)) ? Lp(t[1], t[2], t[3], t[4]) : (t = wX.exec(e)) ? Lp(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, t[4]) : (t = _X.exec(e)) ? PM(t[1], t[2] / 100, t[3] / 100, 1) : (t = SX.exec(e)) ? PM(t[1], t[2] / 100, t[3] / 100, t[4]) : EM.hasOwnProperty(e) ? IM(EM[e]) : e === "transparent" ? new mn(NaN, NaN, NaN, 0) : null;
}
function IM(e) {
  return new mn(e >> 16 & 255, e >> 8 & 255, e & 255, 1);
}
function Lp(e, t, r, n) {
  return n <= 0 && (e = t = r = NaN), new mn(e, t, r, n);
}
function AX(e) {
  return e instanceof Uh || (e = eh(e)), e ? (e = e.rgb(), new mn(e.r, e.g, e.b, e.opacity)) : new mn();
}
function y2(e, t, r, n) {
  return arguments.length === 1 ? AX(e) : new mn(e, t, r, n ?? 1);
}
function mn(e, t, r, n) {
  this.r = +e, this.g = +t, this.b = +r, this.opacity = +n;
}
SS(mn, y2, JP(Uh, {
  brighter(e) {
    return e = e == null ? Og : Math.pow(Og, e), new mn(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? Jd : Math.pow(Jd, e), new mn(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new mn(wl(this.r), wl(this.g), wl(this.b), zg(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: LM,
  // Deprecated! Use color.formatHex.
  formatHex: LM,
  formatHex8: MX,
  formatRgb: RM,
  toString: RM
}));
function LM() {
  return `#${ll(this.r)}${ll(this.g)}${ll(this.b)}`;
}
function MX() {
  return `#${ll(this.r)}${ll(this.g)}${ll(this.b)}${ll((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function RM() {
  const e = zg(this.opacity);
  return `${e === 1 ? "rgb(" : "rgba("}${wl(this.r)}, ${wl(this.g)}, ${wl(this.b)}${e === 1 ? ")" : `, ${e})`}`;
}
function zg(e) {
  return isNaN(e) ? 1 : Math.max(0, Math.min(1, e));
}
function wl(e) {
  return Math.max(0, Math.min(255, Math.round(e) || 0));
}
function ll(e) {
  return e = wl(e), (e < 16 ? "0" : "") + e.toString(16);
}
function PM(e, t, r, n) {
  return n <= 0 ? e = t = r = NaN : r <= 0 || r >= 1 ? e = t = NaN : t <= 0 && (e = NaN), new xi(e, t, r, n);
}
function QP(e) {
  if (e instanceof xi) return new xi(e.h, e.s, e.l, e.opacity);
  if (e instanceof Uh || (e = eh(e)), !e) return new xi();
  if (e instanceof xi) return e;
  e = e.rgb();
  var t = e.r / 255, r = e.g / 255, n = e.b / 255, i = Math.min(t, r, n), a = Math.max(t, r, n), o = NaN, s = a - i, l = (a + i) / 2;
  return s ? (t === a ? o = (r - n) / s + (r < n) * 6 : r === a ? o = (n - t) / s + 2 : o = (t - r) / s + 4, s /= l < 0.5 ? a + i : 2 - a - i, o *= 60) : s = l > 0 && l < 1 ? 0 : o, new xi(o, s, l, e.opacity);
}
function EX(e, t, r, n) {
  return arguments.length === 1 ? QP(e) : new xi(e, t, r, n ?? 1);
}
function xi(e, t, r, n) {
  this.h = +e, this.s = +t, this.l = +r, this.opacity = +n;
}
SS(xi, EX, JP(Uh, {
  brighter(e) {
    return e = e == null ? Og : Math.pow(Og, e), new xi(this.h, this.s, this.l * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? Jd : Math.pow(Jd, e), new xi(this.h, this.s, this.l * e, this.opacity);
  },
  rgb() {
    var e = this.h % 360 + (this.h < 0) * 360, t = isNaN(e) || isNaN(this.s) ? 0 : this.s, r = this.l, n = r + (r < 0.5 ? r : 1 - r) * t, i = 2 * r - n;
    return new mn(
      q0(e >= 240 ? e - 240 : e + 120, i, n),
      q0(e, i, n),
      q0(e < 120 ? e + 240 : e - 120, i, n),
      this.opacity
    );
  },
  clamp() {
    return new xi(kM(this.h), Rp(this.s), Rp(this.l), zg(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const e = zg(this.opacity);
    return `${e === 1 ? "hsl(" : "hsla("}${kM(this.h)}, ${Rp(this.s) * 100}%, ${Rp(this.l) * 100}%${e === 1 ? ")" : `, ${e})`}`;
  }
}));
function kM(e) {
  return e = (e || 0) % 360, e < 0 ? e + 360 : e;
}
function Rp(e) {
  return Math.max(0, Math.min(1, e || 0));
}
function q0(e, t, r) {
  return (e < 60 ? t + (r - t) * e / 60 : e < 180 ? r : e < 240 ? t + (r - t) * (240 - e) / 60 : t) * 255;
}
const e7 = (e) => () => e;
function DX(e, t) {
  return function(r) {
    return e + r * t;
  };
}
function NX(e, t, r) {
  return e = Math.pow(e, r), t = Math.pow(t, r) - e, r = 1 / r, function(n) {
    return Math.pow(e + n * t, r);
  };
}
function IX(e) {
  return (e = +e) == 1 ? t7 : function(t, r) {
    return r - t ? NX(t, r, e) : e7(isNaN(t) ? r : t);
  };
}
function t7(e, t) {
  var r = t - e;
  return r ? DX(e, r) : e7(isNaN(e) ? t : e);
}
const OM = function e(t) {
  var r = IX(t);
  function n(i, a) {
    var o = r((i = y2(i)).r, (a = y2(a)).r), s = r(i.g, a.g), l = r(i.b, a.b), u = t7(i.opacity, a.opacity);
    return function(c) {
      return i.r = o(c), i.g = s(c), i.b = l(c), i.opacity = u(c), i + "";
    };
  }
  return n.gamma = e, n;
}(1);
function Do(e, t) {
  return e = +e, t = +t, function(r) {
    return e * (1 - r) + t * r;
  };
}
var x2 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, J0 = new RegExp(x2.source, "g");
function LX(e) {
  return function() {
    return e;
  };
}
function RX(e) {
  return function(t) {
    return e(t) + "";
  };
}
function PX(e, t) {
  var r = x2.lastIndex = J0.lastIndex = 0, n, i, a, o = -1, s = [], l = [];
  for (e = e + "", t = t + ""; (n = x2.exec(e)) && (i = J0.exec(t)); )
    (a = i.index) > r && (a = t.slice(r, a), s[o] ? s[o] += a : s[++o] = a), (n = n[0]) === (i = i[0]) ? s[o] ? s[o] += i : s[++o] = i : (s[++o] = null, l.push({ i: o, x: Do(n, i) })), r = J0.lastIndex;
  return r < t.length && (a = t.slice(r), s[o] ? s[o] += a : s[++o] = a), s.length < 2 ? l[0] ? RX(l[0].x) : LX(t) : (t = l.length, function(u) {
    for (var c = 0, f; c < t; ++c) s[(f = l[c]).i] = f.x(u);
    return s.join("");
  });
}
var zM = 180 / Math.PI, b2 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function r7(e, t, r, n, i, a) {
  var o, s, l;
  return (o = Math.sqrt(e * e + t * t)) && (e /= o, t /= o), (l = e * r + t * n) && (r -= e * l, n -= t * l), (s = Math.sqrt(r * r + n * n)) && (r /= s, n /= s, l /= s), e * n < t * r && (e = -e, t = -t, l = -l, o = -o), {
    translateX: i,
    translateY: a,
    rotate: Math.atan2(t, e) * zM,
    skewX: Math.atan(l) * zM,
    scaleX: o,
    scaleY: s
  };
}
var Pp;
function kX(e) {
  const t = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(e + "");
  return t.isIdentity ? b2 : r7(t.a, t.b, t.c, t.d, t.e, t.f);
}
function OX(e) {
  return e == null || (Pp || (Pp = document.createElementNS("http://www.w3.org/2000/svg", "g")), Pp.setAttribute("transform", e), !(e = Pp.transform.baseVal.consolidate())) ? b2 : (e = e.matrix, r7(e.a, e.b, e.c, e.d, e.e, e.f));
}
function n7(e, t, r, n) {
  function i(u) {
    return u.length ? u.pop() + " " : "";
  }
  function a(u, c, f, d, h, p) {
    if (u !== f || c !== d) {
      var v = h.push("translate(", null, t, null, r);
      p.push({ i: v - 4, x: Do(u, f) }, { i: v - 2, x: Do(c, d) });
    } else (f || d) && h.push("translate(" + f + t + d + r);
  }
  function o(u, c, f, d) {
    u !== c ? (u - c > 180 ? c += 360 : c - u > 180 && (u += 360), d.push({ i: f.push(i(f) + "rotate(", null, n) - 2, x: Do(u, c) })) : c && f.push(i(f) + "rotate(" + c + n);
  }
  function s(u, c, f, d) {
    u !== c ? d.push({ i: f.push(i(f) + "skewX(", null, n) - 2, x: Do(u, c) }) : c && f.push(i(f) + "skewX(" + c + n);
  }
  function l(u, c, f, d, h, p) {
    if (u !== f || c !== d) {
      var v = h.push(i(h) + "scale(", null, ",", null, ")");
      p.push({ i: v - 4, x: Do(u, f) }, { i: v - 2, x: Do(c, d) });
    } else (f !== 1 || d !== 1) && h.push(i(h) + "scale(" + f + "," + d + ")");
  }
  return function(u, c) {
    var f = [], d = [];
    return u = e(u), c = e(c), a(u.translateX, u.translateY, c.translateX, c.translateY, f, d), o(u.rotate, c.rotate, f, d), s(u.skewX, c.skewX, f, d), l(u.scaleX, u.scaleY, c.scaleX, c.scaleY, f, d), u = c = null, function(h) {
      for (var p = -1, v = d.length, g; ++p < v; ) f[(g = d[p]).i] = g.x(h);
      return f.join("");
    };
  };
}
var zX = n7(kX, "px, ", "px)", "deg)"), jX = n7(OX, ", ", ")", ")"), VX = 1e-12;
function jM(e) {
  return ((e = Math.exp(e)) + 1 / e) / 2;
}
function BX(e) {
  return ((e = Math.exp(e)) - 1 / e) / 2;
}
function FX(e) {
  return ((e = Math.exp(2 * e)) - 1) / (e + 1);
}
const $X = function e(t, r, n) {
  function i(a, o) {
    var s = a[0], l = a[1], u = a[2], c = o[0], f = o[1], d = o[2], h = c - s, p = f - l, v = h * h + p * p, g, m;
    if (v < VX)
      m = Math.log(d / u) / t, g = function(C) {
        return [
          s + C * h,
          l + C * p,
          u * Math.exp(t * C * m)
        ];
      };
    else {
      var y = Math.sqrt(v), b = (d * d - u * u + n * v) / (2 * u * r * y), w = (d * d - u * u - n * v) / (2 * d * r * y), _ = Math.log(Math.sqrt(b * b + 1) - b), S = Math.log(Math.sqrt(w * w + 1) - w);
      m = (S - _) / t, g = function(C) {
        var A = C * m, M = jM(_), D = u / (r * y) * (M * FX(t * A + _) - BX(_));
        return [
          s + D * h,
          l + D * p,
          u * M / jM(t * A + _)
        ];
      };
    }
    return g.duration = m * 1e3 * t / Math.SQRT2, g;
  }
  return i.rho = function(a) {
    var o = Math.max(1e-3, +a), s = o * o, l = s * s;
    return e(o, s, l);
  }, i;
}(Math.SQRT2, 2, 4);
var Mc = 0, ud = 0, Af = 0, i7 = 1e3, jg, cd, Vg = 0, Ll = 0, gy = 0, th = typeof performance == "object" && performance.now ? performance : Date, a7 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(e) {
  setTimeout(e, 17);
};
function CS() {
  return Ll || (a7(HX), Ll = th.now() + gy);
}
function HX() {
  Ll = 0;
}
function Bg() {
  this._call = this._time = this._next = null;
}
Bg.prototype = o7.prototype = {
  constructor: Bg,
  restart: function(e, t, r) {
    if (typeof e != "function") throw new TypeError("callback is not a function");
    r = (r == null ? CS() : +r) + (t == null ? 0 : +t), !this._next && cd !== this && (cd ? cd._next = this : jg = this, cd = this), this._call = e, this._time = r, w2();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, w2());
  }
};
function o7(e, t, r) {
  var n = new Bg();
  return n.restart(e, t, r), n;
}
function GX() {
  CS(), ++Mc;
  for (var e = jg, t; e; )
    (t = Ll - e._time) >= 0 && e._call.call(void 0, t), e = e._next;
  --Mc;
}
function VM() {
  Ll = (Vg = th.now()) + gy, Mc = ud = 0;
  try {
    GX();
  } finally {
    Mc = 0, UX(), Ll = 0;
  }
}
function WX() {
  var e = th.now(), t = e - Vg;
  t > i7 && (gy -= t, Vg = e);
}
function UX() {
  for (var e, t = jg, r, n = 1 / 0; t; )
    t._call ? (n > t._time && (n = t._time), e = t, t = t._next) : (r = t._next, t._next = null, t = e ? e._next = r : jg = r);
  cd = e, w2(n);
}
function w2(e) {
  if (!Mc) {
    ud && (ud = clearTimeout(ud));
    var t = e - Ll;
    t > 24 ? (e < 1 / 0 && (ud = setTimeout(VM, e - th.now() - gy)), Af && (Af = clearInterval(Af))) : (Af || (Vg = th.now(), Af = setInterval(WX, i7)), Mc = 1, a7(VM));
  }
}
function BM(e, t, r) {
  var n = new Bg();
  return t = t == null ? 0 : +t, n.restart((i) => {
    n.stop(), e(i + t);
  }, t, r), n;
}
var YX = py("start", "end", "cancel", "interrupt"), ZX = [], s7 = 0, FM = 1, _2 = 2, ng = 3, $M = 4, S2 = 5, ig = 6;
function my(e, t, r, n, i, a) {
  var o = e.__transition;
  if (!o) e.__transition = {};
  else if (r in o) return;
  XX(e, r, {
    name: t,
    index: n,
    // For context during callback.
    group: i,
    // For context during callback.
    on: YX,
    tween: ZX,
    time: a.time,
    delay: a.delay,
    duration: a.duration,
    ease: a.ease,
    timer: null,
    state: s7
  });
}
function TS(e, t) {
  var r = Ri(e, t);
  if (r.state > s7) throw new Error("too late; already scheduled");
  return r;
}
function fa(e, t) {
  var r = Ri(e, t);
  if (r.state > ng) throw new Error("too late; already running");
  return r;
}
function Ri(e, t) {
  var r = e.__transition;
  if (!r || !(r = r[t])) throw new Error("transition not found");
  return r;
}
function XX(e, t, r) {
  var n = e.__transition, i;
  n[t] = r, r.timer = o7(a, 0, r.time);
  function a(u) {
    r.state = FM, r.timer.restart(o, r.delay, r.time), r.delay <= u && o(u - r.delay);
  }
  function o(u) {
    var c, f, d, h;
    if (r.state !== FM) return l();
    for (c in n)
      if (h = n[c], h.name === r.name) {
        if (h.state === ng) return BM(o);
        h.state === $M ? (h.state = ig, h.timer.stop(), h.on.call("interrupt", e, e.__data__, h.index, h.group), delete n[c]) : +c < t && (h.state = ig, h.timer.stop(), h.on.call("cancel", e, e.__data__, h.index, h.group), delete n[c]);
      }
    if (BM(function() {
      r.state === ng && (r.state = $M, r.timer.restart(s, r.delay, r.time), s(u));
    }), r.state = _2, r.on.call("start", e, e.__data__, r.index, r.group), r.state === _2) {
      for (r.state = ng, i = new Array(d = r.tween.length), c = 0, f = -1; c < d; ++c)
        (h = r.tween[c].value.call(e, e.__data__, r.index, r.group)) && (i[++f] = h);
      i.length = f + 1;
    }
  }
  function s(u) {
    for (var c = u < r.duration ? r.ease.call(null, u / r.duration) : (r.timer.restart(l), r.state = S2, 1), f = -1, d = i.length; ++f < d; )
      i[f].call(e, c);
    r.state === S2 && (r.on.call("end", e, e.__data__, r.index, r.group), l());
  }
  function l() {
    r.state = ig, r.timer.stop(), delete n[t];
    for (var u in n) return;
    delete e.__transition;
  }
}
function ag(e, t) {
  var r = e.__transition, n, i, a = !0, o;
  if (r) {
    t = t == null ? null : t + "";
    for (o in r) {
      if ((n = r[o]).name !== t) {
        a = !1;
        continue;
      }
      i = n.state > _2 && n.state < S2, n.state = ig, n.timer.stop(), n.on.call(i ? "interrupt" : "cancel", e, e.__data__, n.index, n.group), delete r[o];
    }
    a && delete e.__transition;
  }
}
function KX(e) {
  return this.each(function() {
    ag(this, e);
  });
}
function qX(e, t) {
  var r, n;
  return function() {
    var i = fa(this, e), a = i.tween;
    if (a !== r) {
      n = r = a;
      for (var o = 0, s = n.length; o < s; ++o)
        if (n[o].name === t) {
          n = n.slice(), n.splice(o, 1);
          break;
        }
    }
    i.tween = n;
  };
}
function JX(e, t, r) {
  var n, i;
  if (typeof r != "function") throw new Error();
  return function() {
    var a = fa(this, e), o = a.tween;
    if (o !== n) {
      i = (n = o).slice();
      for (var s = { name: t, value: r }, l = 0, u = i.length; l < u; ++l)
        if (i[l].name === t) {
          i[l] = s;
          break;
        }
      l === u && i.push(s);
    }
    a.tween = i;
  };
}
function QX(e, t) {
  var r = this._id;
  if (e += "", arguments.length < 2) {
    for (var n = Ri(this.node(), r).tween, i = 0, a = n.length, o; i < a; ++i)
      if ((o = n[i]).name === e)
        return o.value;
    return null;
  }
  return this.each((t == null ? qX : JX)(r, e, t));
}
function AS(e, t, r) {
  var n = e._id;
  return e.each(function() {
    var i = fa(this, n);
    (i.value || (i.value = {}))[t] = r.apply(this, arguments);
  }), function(i) {
    return Ri(i, n).value[t];
  };
}
function l7(e, t) {
  var r;
  return (typeof t == "number" ? Do : t instanceof eh ? OM : (r = eh(t)) ? (t = r, OM) : PX)(e, t);
}
function eK(e) {
  return function() {
    this.removeAttribute(e);
  };
}
function tK(e) {
  return function() {
    this.removeAttributeNS(e.space, e.local);
  };
}
function rK(e, t, r) {
  var n, i = r + "", a;
  return function() {
    var o = this.getAttribute(e);
    return o === i ? null : o === n ? a : a = t(n = o, r);
  };
}
function nK(e, t, r) {
  var n, i = r + "", a;
  return function() {
    var o = this.getAttributeNS(e.space, e.local);
    return o === i ? null : o === n ? a : a = t(n = o, r);
  };
}
function iK(e, t, r) {
  var n, i, a;
  return function() {
    var o, s = r(this), l;
    return s == null ? void this.removeAttribute(e) : (o = this.getAttribute(e), l = s + "", o === l ? null : o === n && l === i ? a : (i = l, a = t(n = o, s)));
  };
}
function aK(e, t, r) {
  var n, i, a;
  return function() {
    var o, s = r(this), l;
    return s == null ? void this.removeAttributeNS(e.space, e.local) : (o = this.getAttributeNS(e.space, e.local), l = s + "", o === l ? null : o === n && l === i ? a : (i = l, a = t(n = o, s)));
  };
}
function oK(e, t) {
  var r = vy(e), n = r === "transform" ? jX : l7;
  return this.attrTween(e, typeof t == "function" ? (r.local ? aK : iK)(r, n, AS(this, "attr." + e, t)) : t == null ? (r.local ? tK : eK)(r) : (r.local ? nK : rK)(r, n, t));
}
function sK(e, t) {
  return function(r) {
    this.setAttribute(e, t.call(this, r));
  };
}
function lK(e, t) {
  return function(r) {
    this.setAttributeNS(e.space, e.local, t.call(this, r));
  };
}
function uK(e, t) {
  var r, n;
  function i() {
    var a = t.apply(this, arguments);
    return a !== n && (r = (n = a) && lK(e, a)), r;
  }
  return i._value = t, i;
}
function cK(e, t) {
  var r, n;
  function i() {
    var a = t.apply(this, arguments);
    return a !== n && (r = (n = a) && sK(e, a)), r;
  }
  return i._value = t, i;
}
function fK(e, t) {
  var r = "attr." + e;
  if (arguments.length < 2) return (r = this.tween(r)) && r._value;
  if (t == null) return this.tween(r, null);
  if (typeof t != "function") throw new Error();
  var n = vy(e);
  return this.tween(r, (n.local ? uK : cK)(n, t));
}
function dK(e, t) {
  return function() {
    TS(this, e).delay = +t.apply(this, arguments);
  };
}
function hK(e, t) {
  return t = +t, function() {
    TS(this, e).delay = t;
  };
}
function pK(e) {
  var t = this._id;
  return arguments.length ? this.each((typeof e == "function" ? dK : hK)(t, e)) : Ri(this.node(), t).delay;
}
function vK(e, t) {
  return function() {
    fa(this, e).duration = +t.apply(this, arguments);
  };
}
function gK(e, t) {
  return t = +t, function() {
    fa(this, e).duration = t;
  };
}
function mK(e) {
  var t = this._id;
  return arguments.length ? this.each((typeof e == "function" ? vK : gK)(t, e)) : Ri(this.node(), t).duration;
}
function yK(e, t) {
  if (typeof t != "function") throw new Error();
  return function() {
    fa(this, e).ease = t;
  };
}
function xK(e) {
  var t = this._id;
  return arguments.length ? this.each(yK(t, e)) : Ri(this.node(), t).ease;
}
function bK(e, t) {
  return function() {
    var r = t.apply(this, arguments);
    if (typeof r != "function") throw new Error();
    fa(this, e).ease = r;
  };
}
function wK(e) {
  if (typeof e != "function") throw new Error();
  return this.each(bK(this._id, e));
}
function _K(e) {
  typeof e != "function" && (e = BP(e));
  for (var t = this._groups, r = t.length, n = new Array(r), i = 0; i < r; ++i)
    for (var a = t[i], o = a.length, s = n[i] = [], l, u = 0; u < o; ++u)
      (l = a[u]) && e.call(l, l.__data__, u, a) && s.push(l);
  return new Za(n, this._parents, this._name, this._id);
}
function SK(e) {
  if (e._id !== this._id) throw new Error();
  for (var t = this._groups, r = e._groups, n = t.length, i = r.length, a = Math.min(n, i), o = new Array(n), s = 0; s < a; ++s)
    for (var l = t[s], u = r[s], c = l.length, f = o[s] = new Array(c), d, h = 0; h < c; ++h)
      (d = l[h] || u[h]) && (f[h] = d);
  for (; s < n; ++s)
    o[s] = t[s];
  return new Za(o, this._parents, this._name, this._id);
}
function CK(e) {
  return (e + "").trim().split(/^|\s+/).every(function(t) {
    var r = t.indexOf(".");
    return r >= 0 && (t = t.slice(0, r)), !t || t === "start";
  });
}
function TK(e, t, r) {
  var n, i, a = CK(t) ? TS : fa;
  return function() {
    var o = a(this, e), s = o.on;
    s !== n && (i = (n = s).copy()).on(t, r), o.on = i;
  };
}
function AK(e, t) {
  var r = this._id;
  return arguments.length < 2 ? Ri(this.node(), r).on.on(e) : this.each(TK(r, e, t));
}
function MK(e) {
  return function() {
    var t = this.parentNode;
    for (var r in this.__transition) if (+r !== e) return;
    t && t.removeChild(this);
  };
}
function EK() {
  return this.on("end.remove", MK(this._id));
}
function DK(e) {
  var t = this._name, r = this._id;
  typeof e != "function" && (e = wS(e));
  for (var n = this._groups, i = n.length, a = new Array(i), o = 0; o < i; ++o)
    for (var s = n[o], l = s.length, u = a[o] = new Array(l), c, f, d = 0; d < l; ++d)
      (c = s[d]) && (f = e.call(c, c.__data__, d, s)) && ("__data__" in c && (f.__data__ = c.__data__), u[d] = f, my(u[d], t, r, d, u, Ri(c, r)));
  return new Za(a, this._parents, t, r);
}
function NK(e) {
  var t = this._name, r = this._id;
  typeof e != "function" && (e = VP(e));
  for (var n = this._groups, i = n.length, a = [], o = [], s = 0; s < i; ++s)
    for (var l = n[s], u = l.length, c, f = 0; f < u; ++f)
      if (c = l[f]) {
        for (var d = e.call(c, c.__data__, f, l), h, p = Ri(c, r), v = 0, g = d.length; v < g; ++v)
          (h = d[v]) && my(h, t, r, v, d, p);
        a.push(d), o.push(c);
      }
  return new Za(a, o, t, r);
}
var IK = Wh.prototype.constructor;
function LK() {
  return new IK(this._groups, this._parents);
}
function RK(e, t) {
  var r, n, i;
  return function() {
    var a = Ac(this, e), o = (this.style.removeProperty(e), Ac(this, e));
    return a === o ? null : a === r && o === n ? i : i = t(r = a, n = o);
  };
}
function u7(e) {
  return function() {
    this.style.removeProperty(e);
  };
}
function PK(e, t, r) {
  var n, i = r + "", a;
  return function() {
    var o = Ac(this, e);
    return o === i ? null : o === n ? a : a = t(n = o, r);
  };
}
function kK(e, t, r) {
  var n, i, a;
  return function() {
    var o = Ac(this, e), s = r(this), l = s + "";
    return s == null && (l = s = (this.style.removeProperty(e), Ac(this, e))), o === l ? null : o === n && l === i ? a : (i = l, a = t(n = o, s));
  };
}
function OK(e, t) {
  var r, n, i, a = "style." + t, o = "end." + a, s;
  return function() {
    var l = fa(this, e), u = l.on, c = l.value[a] == null ? s || (s = u7(t)) : void 0;
    (u !== r || i !== c) && (n = (r = u).copy()).on(o, i = c), l.on = n;
  };
}
function zK(e, t, r) {
  var n = (e += "") == "transform" ? zX : l7;
  return t == null ? this.styleTween(e, RK(e, n)).on("end.style." + e, u7(e)) : typeof t == "function" ? this.styleTween(e, kK(e, n, AS(this, "style." + e, t))).each(OK(this._id, e)) : this.styleTween(e, PK(e, n, t), r).on("end.style." + e, null);
}
function jK(e, t, r) {
  return function(n) {
    this.style.setProperty(e, t.call(this, n), r);
  };
}
function VK(e, t, r) {
  var n, i;
  function a() {
    var o = t.apply(this, arguments);
    return o !== i && (n = (i = o) && jK(e, o, r)), n;
  }
  return a._value = t, a;
}
function BK(e, t, r) {
  var n = "style." + (e += "");
  if (arguments.length < 2) return (n = this.tween(n)) && n._value;
  if (t == null) return this.tween(n, null);
  if (typeof t != "function") throw new Error();
  return this.tween(n, VK(e, t, r ?? ""));
}
function FK(e) {
  return function() {
    this.textContent = e;
  };
}
function $K(e) {
  return function() {
    var t = e(this);
    this.textContent = t ?? "";
  };
}
function HK(e) {
  return this.tween("text", typeof e == "function" ? $K(AS(this, "text", e)) : FK(e == null ? "" : e + ""));
}
function GK(e) {
  return function(t) {
    this.textContent = e.call(this, t);
  };
}
function WK(e) {
  var t, r;
  function n() {
    var i = e.apply(this, arguments);
    return i !== r && (t = (r = i) && GK(i)), t;
  }
  return n._value = e, n;
}
function UK(e) {
  var t = "text";
  if (arguments.length < 1) return (t = this.tween(t)) && t._value;
  if (e == null) return this.tween(t, null);
  if (typeof e != "function") throw new Error();
  return this.tween(t, WK(e));
}
function YK() {
  for (var e = this._name, t = this._id, r = c7(), n = this._groups, i = n.length, a = 0; a < i; ++a)
    for (var o = n[a], s = o.length, l, u = 0; u < s; ++u)
      if (l = o[u]) {
        var c = Ri(l, t);
        my(l, e, r, u, o, {
          time: c.time + c.delay + c.duration,
          delay: 0,
          duration: c.duration,
          ease: c.ease
        });
      }
  return new Za(n, this._parents, e, r);
}
function ZK() {
  var e, t, r = this, n = r._id, i = r.size();
  return new Promise(function(a, o) {
    var s = { value: o }, l = { value: function() {
      --i === 0 && a();
    } };
    r.each(function() {
      var u = fa(this, n), c = u.on;
      c !== e && (t = (e = c).copy(), t._.cancel.push(s), t._.interrupt.push(s), t._.end.push(l)), u.on = t;
    }), i === 0 && a();
  });
}
var XK = 0;
function Za(e, t, r, n) {
  this._groups = e, this._parents = t, this._name = r, this._id = n;
}
function c7() {
  return ++XK;
}
var ba = Wh.prototype;
Za.prototype = {
  constructor: Za,
  select: DK,
  selectAll: NK,
  selectChild: ba.selectChild,
  selectChildren: ba.selectChildren,
  filter: _K,
  merge: SK,
  selection: LK,
  transition: YK,
  call: ba.call,
  nodes: ba.nodes,
  node: ba.node,
  size: ba.size,
  empty: ba.empty,
  each: ba.each,
  on: AK,
  attr: oK,
  attrTween: fK,
  style: zK,
  styleTween: BK,
  text: HK,
  textTween: UK,
  remove: EK,
  tween: QX,
  delay: pK,
  duration: mK,
  ease: xK,
  easeVarying: wK,
  end: ZK,
  [Symbol.iterator]: ba[Symbol.iterator]
};
function KK(e) {
  return ((e *= 2) <= 1 ? e * e * e : (e -= 2) * e * e + 2) / 2;
}
var qK = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: KK
};
function JK(e, t) {
  for (var r; !(r = e.__transition) || !(r = r[t]); )
    if (!(e = e.parentNode))
      throw new Error(`transition ${t} not found`);
  return r;
}
function QK(e) {
  var t, r;
  e instanceof Za ? (t = e._id, e = e._name) : (t = c7(), (r = qK).time = CS(), e = e == null ? null : e + "");
  for (var n = this._groups, i = n.length, a = 0; a < i; ++a)
    for (var o = n[a], s = o.length, l, u = 0; u < s; ++u)
      (l = o[u]) && my(l, e, t, u, o, r || JK(l, t));
  return new Za(n, this._parents, e, t);
}
Wh.prototype.interrupt = KX;
Wh.prototype.transition = QK;
const kp = (e) => () => e;
function eq(e, {
  sourceEvent: t,
  target: r,
  transform: n,
  dispatch: i
}) {
  Object.defineProperties(this, {
    type: { value: e, enumerable: !0, configurable: !0 },
    sourceEvent: { value: t, enumerable: !0, configurable: !0 },
    target: { value: r, enumerable: !0, configurable: !0 },
    transform: { value: n, enumerable: !0, configurable: !0 },
    _: { value: i }
  });
}
function ka(e, t, r) {
  this.k = e, this.x = t, this.y = r;
}
ka.prototype = {
  constructor: ka,
  scale: function(e) {
    return e === 1 ? this : new ka(this.k * e, this.x, this.y);
  },
  translate: function(e, t) {
    return e === 0 & t === 0 ? this : new ka(this.k, this.x + this.k * e, this.y + this.k * t);
  },
  apply: function(e) {
    return [e[0] * this.k + this.x, e[1] * this.k + this.y];
  },
  applyX: function(e) {
    return e * this.k + this.x;
  },
  applyY: function(e) {
    return e * this.k + this.y;
  },
  invert: function(e) {
    return [(e[0] - this.x) / this.k, (e[1] - this.y) / this.k];
  },
  invertX: function(e) {
    return (e - this.x) / this.k;
  },
  invertY: function(e) {
    return (e - this.y) / this.k;
  },
  rescaleX: function(e) {
    return e.copy().domain(e.range().map(this.invertX, this).map(e.invert, e));
  },
  rescaleY: function(e) {
    return e.copy().domain(e.range().map(this.invertY, this).map(e.invert, e));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Wo = new ka(1, 0, 0);
ka.prototype;
function Q0(e) {
  e.stopImmediatePropagation();
}
function Mf(e) {
  e.preventDefault(), e.stopImmediatePropagation();
}
function tq(e) {
  return (!e.ctrlKey || e.type === "wheel") && !e.button;
}
function rq() {
  var e = this;
  return e instanceof SVGElement ? (e = e.ownerSVGElement || e, e.hasAttribute("viewBox") ? (e = e.viewBox.baseVal, [[e.x, e.y], [e.x + e.width, e.y + e.height]]) : [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]]) : [[0, 0], [e.clientWidth, e.clientHeight]];
}
function HM() {
  return this.__zoom || Wo;
}
function nq(e) {
  return -e.deltaY * (e.deltaMode === 1 ? 0.05 : e.deltaMode ? 1 : 2e-3) * (e.ctrlKey ? 10 : 1);
}
function iq() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function aq(e, t, r) {
  var n = e.invertX(t[0][0]) - r[0][0], i = e.invertX(t[1][0]) - r[1][0], a = e.invertY(t[0][1]) - r[0][1], o = e.invertY(t[1][1]) - r[1][1];
  return e.translate(
    i > n ? (n + i) / 2 : Math.min(0, n) || Math.max(0, i),
    o > a ? (a + o) / 2 : Math.min(0, a) || Math.max(0, o)
  );
}
function oq() {
  var e = tq, t = rq, r = aq, n = nq, i = iq, a = [0, 1 / 0], o = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], s = 250, l = $X, u = py("start", "zoom", "end"), c, f, d, h = 500, p = 150, v = 0, g = 10;
  function m(E) {
    E.property("__zoom", HM).on("wheel.zoom", A, { passive: !1 }).on("mousedown.zoom", M).on("dblclick.zoom", D).filter(i).on("touchstart.zoom", N).on("touchmove.zoom", R).on("touchend.zoom touchcancel.zoom", O).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  m.transform = function(E, L, I, P) {
    var k = E.selection ? E.selection() : E;
    k.property("__zoom", HM), E !== k ? _(E, L, I, P) : k.interrupt().each(function() {
      S(this, arguments).event(P).start().zoom(null, typeof L == "function" ? L.apply(this, arguments) : L).end();
    });
  }, m.scaleBy = function(E, L, I, P) {
    m.scaleTo(E, function() {
      var k = this.__zoom.k, z = typeof L == "function" ? L.apply(this, arguments) : L;
      return k * z;
    }, I, P);
  }, m.scaleTo = function(E, L, I, P) {
    m.transform(E, function() {
      var k = t.apply(this, arguments), z = this.__zoom, V = I == null ? w(k) : typeof I == "function" ? I.apply(this, arguments) : I, B = z.invert(V), F = typeof L == "function" ? L.apply(this, arguments) : L;
      return r(b(y(z, F), V, B), k, o);
    }, I, P);
  }, m.translateBy = function(E, L, I, P) {
    m.transform(E, function() {
      return r(this.__zoom.translate(
        typeof L == "function" ? L.apply(this, arguments) : L,
        typeof I == "function" ? I.apply(this, arguments) : I
      ), t.apply(this, arguments), o);
    }, null, P);
  }, m.translateTo = function(E, L, I, P, k) {
    m.transform(E, function() {
      var z = t.apply(this, arguments), V = this.__zoom, B = P == null ? w(z) : typeof P == "function" ? P.apply(this, arguments) : P;
      return r(Wo.translate(B[0], B[1]).scale(V.k).translate(
        typeof L == "function" ? -L.apply(this, arguments) : -L,
        typeof I == "function" ? -I.apply(this, arguments) : -I
      ), z, o);
    }, P, k);
  };
  function y(E, L) {
    return L = Math.max(a[0], Math.min(a[1], L)), L === E.k ? E : new ka(L, E.x, E.y);
  }
  function b(E, L, I) {
    var P = L[0] - I[0] * E.k, k = L[1] - I[1] * E.k;
    return P === E.x && k === E.y ? E : new ka(E.k, P, k);
  }
  function w(E) {
    return [(+E[0][0] + +E[1][0]) / 2, (+E[0][1] + +E[1][1]) / 2];
  }
  function _(E, L, I, P) {
    E.on("start.zoom", function() {
      S(this, arguments).event(P).start();
    }).on("interrupt.zoom end.zoom", function() {
      S(this, arguments).event(P).end();
    }).tween("zoom", function() {
      var k = this, z = arguments, V = S(k, z).event(P), B = t.apply(k, z), F = I == null ? w(B) : typeof I == "function" ? I.apply(k, z) : I, H = Math.max(B[1][0] - B[0][0], B[1][1] - B[0][1]), G = k.__zoom, W = typeof L == "function" ? L.apply(k, z) : L, X = l(G.invert(F).concat(H / G.k), W.invert(F).concat(H / W.k));
      return function(q) {
        if (q === 1) q = W;
        else {
          var J = X(q), U = H / J[2];
          q = new ka(U, F[0] - J[0] * U, F[1] - J[1] * U);
        }
        V.zoom(null, q);
      };
    });
  }
  function S(E, L, I) {
    return !I && E.__zooming || new C(E, L);
  }
  function C(E, L) {
    this.that = E, this.args = L, this.active = 0, this.sourceEvent = null, this.extent = t.apply(E, L), this.taps = 0;
  }
  C.prototype = {
    event: function(E) {
      return E && (this.sourceEvent = E), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(E, L) {
      return this.mouse && E !== "mouse" && (this.mouse[1] = L.invert(this.mouse[0])), this.touch0 && E !== "touch" && (this.touch0[1] = L.invert(this.touch0[0])), this.touch1 && E !== "touch" && (this.touch1[1] = L.invert(this.touch1[0])), this.that.__zoom = L, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(E) {
      var L = yi(this.that).datum();
      u.call(
        E,
        this.that,
        new eq(E, {
          sourceEvent: this.sourceEvent,
          target: m,
          transform: this.that.__zoom,
          dispatch: u
        }),
        L
      );
    }
  };
  function A(E, ...L) {
    if (!e.apply(this, arguments)) return;
    var I = S(this, L).event(E), P = this.__zoom, k = Math.max(a[0], Math.min(a[1], P.k * Math.pow(2, n.apply(this, arguments)))), z = Hi(E);
    if (I.wheel)
      (I.mouse[0][0] !== z[0] || I.mouse[0][1] !== z[1]) && (I.mouse[1] = P.invert(I.mouse[0] = z)), clearTimeout(I.wheel);
    else {
      if (P.k === k) return;
      I.mouse = [z, P.invert(z)], ag(this), I.start();
    }
    Mf(E), I.wheel = setTimeout(V, p), I.zoom("mouse", r(b(y(P, k), I.mouse[0], I.mouse[1]), I.extent, o));
    function V() {
      I.wheel = null, I.end();
    }
  }
  function M(E, ...L) {
    if (d || !e.apply(this, arguments)) return;
    var I = E.currentTarget, P = S(this, L, !0).event(E), k = yi(E.view).on("mousemove.zoom", F, !0).on("mouseup.zoom", H, !0), z = Hi(E, I), V = E.clientX, B = E.clientY;
    KP(E.view), Q0(E), P.mouse = [z, this.__zoom.invert(z)], ag(this), P.start();
    function F(G) {
      if (Mf(G), !P.moved) {
        var W = G.clientX - V, X = G.clientY - B;
        P.moved = W * W + X * X > v;
      }
      P.event(G).zoom("mouse", r(b(P.that.__zoom, P.mouse[0] = Hi(G, I), P.mouse[1]), P.extent, o));
    }
    function H(G) {
      k.on("mousemove.zoom mouseup.zoom", null), qP(G.view, P.moved), Mf(G), P.event(G).end();
    }
  }
  function D(E, ...L) {
    if (e.apply(this, arguments)) {
      var I = this.__zoom, P = Hi(E.changedTouches ? E.changedTouches[0] : E, this), k = I.invert(P), z = I.k * (E.shiftKey ? 0.5 : 2), V = r(b(y(I, z), P, k), t.apply(this, L), o);
      Mf(E), s > 0 ? yi(this).transition().duration(s).call(_, V, P, E) : yi(this).call(m.transform, V, P, E);
    }
  }
  function N(E, ...L) {
    if (e.apply(this, arguments)) {
      var I = E.touches, P = I.length, k = S(this, L, E.changedTouches.length === P).event(E), z, V, B, F;
      for (Q0(E), V = 0; V < P; ++V)
        B = I[V], F = Hi(B, this), F = [F, this.__zoom.invert(F), B.identifier], k.touch0 ? !k.touch1 && k.touch0[2] !== F[2] && (k.touch1 = F, k.taps = 0) : (k.touch0 = F, z = !0, k.taps = 1 + !!c);
      c && (c = clearTimeout(c)), z && (k.taps < 2 && (f = F[0], c = setTimeout(function() {
        c = null;
      }, h)), ag(this), k.start());
    }
  }
  function R(E, ...L) {
    if (this.__zooming) {
      var I = S(this, L).event(E), P = E.changedTouches, k = P.length, z, V, B, F;
      for (Mf(E), z = 0; z < k; ++z)
        V = P[z], B = Hi(V, this), I.touch0 && I.touch0[2] === V.identifier ? I.touch0[0] = B : I.touch1 && I.touch1[2] === V.identifier && (I.touch1[0] = B);
      if (V = I.that.__zoom, I.touch1) {
        var H = I.touch0[0], G = I.touch0[1], W = I.touch1[0], X = I.touch1[1], q = (q = W[0] - H[0]) * q + (q = W[1] - H[1]) * q, J = (J = X[0] - G[0]) * J + (J = X[1] - G[1]) * J;
        V = y(V, Math.sqrt(q / J)), B = [(H[0] + W[0]) / 2, (H[1] + W[1]) / 2], F = [(G[0] + X[0]) / 2, (G[1] + X[1]) / 2];
      } else if (I.touch0) B = I.touch0[0], F = I.touch0[1];
      else return;
      I.zoom("touch", r(b(V, B, F), I.extent, o));
    }
  }
  function O(E, ...L) {
    if (this.__zooming) {
      var I = S(this, L).event(E), P = E.changedTouches, k = P.length, z, V;
      for (Q0(E), d && clearTimeout(d), d = setTimeout(function() {
        d = null;
      }, h), z = 0; z < k; ++z)
        V = P[z], I.touch0 && I.touch0[2] === V.identifier ? delete I.touch0 : I.touch1 && I.touch1[2] === V.identifier && delete I.touch1;
      if (I.touch1 && !I.touch0 && (I.touch0 = I.touch1, delete I.touch1), I.touch0) I.touch0[1] = this.__zoom.invert(I.touch0[0]);
      else if (I.end(), I.taps === 2 && (V = Hi(V, this), Math.hypot(f[0] - V[0], f[1] - V[1]) < g)) {
        var B = yi(this).on("dblclick.zoom");
        B && B.apply(this, arguments);
      }
    }
  }
  return m.wheelDelta = function(E) {
    return arguments.length ? (n = typeof E == "function" ? E : kp(+E), m) : n;
  }, m.filter = function(E) {
    return arguments.length ? (e = typeof E == "function" ? E : kp(!!E), m) : e;
  }, m.touchable = function(E) {
    return arguments.length ? (i = typeof E == "function" ? E : kp(!!E), m) : i;
  }, m.extent = function(E) {
    return arguments.length ? (t = typeof E == "function" ? E : kp([[+E[0][0], +E[0][1]], [+E[1][0], +E[1][1]]]), m) : t;
  }, m.scaleExtent = function(E) {
    return arguments.length ? (a[0] = +E[0], a[1] = +E[1], m) : [a[0], a[1]];
  }, m.translateExtent = function(E) {
    return arguments.length ? (o[0][0] = +E[0][0], o[1][0] = +E[1][0], o[0][1] = +E[0][1], o[1][1] = +E[1][1], m) : [[o[0][0], o[0][1]], [o[1][0], o[1][1]]];
  }, m.constrain = function(E) {
    return arguments.length ? (r = E, m) : r;
  }, m.duration = function(E) {
    return arguments.length ? (s = +E, m) : s;
  }, m.interpolate = function(E) {
    return arguments.length ? (l = E, m) : l;
  }, m.on = function() {
    var E = u.on.apply(u, arguments);
    return E === u ? m : E;
  }, m.clickDistance = function(E) {
    return arguments.length ? (v = (E = +E) * E, m) : Math.sqrt(v);
  }, m.tapDistance = function(E) {
    return arguments.length ? (g = +E, m) : g;
  }, m;
}
const yy = Xc(null), sq = yy.Provider, Ei = {
  error001: () => "[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",
  error002: () => "It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",
  error003: (e) => `Node type "${e}" not found. Using fallback type "default".`,
  error004: () => "The React Flow parent container needs a width and a height to render the graph.",
  error005: () => "Only child nodes can use a parent extent.",
  error006: () => "Can't create edge. An edge needs a source and a target.",
  error007: (e) => `The old edge with id=${e} does not exist.`,
  error009: (e) => `Marker type "${e}" doesn't exist.`,
  error008: (e, t) => `Couldn't create edge for ${e ? "target" : "source"} handle id: "${e ? t.targetHandle : t.sourceHandle}", edge id: ${t.id}.`,
  error010: () => "Handle: No node id found. Make sure to only use a Handle inside a custom Node.",
  error011: (e) => `Edge type "${e}" not found. Using fallback type "default".`,
  error012: (e) => `Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`
}, f7 = Ei.error001();
function nr(e, t) {
  const r = oo(yy);
  if (r === null)
    throw new Error(f7);
  return zP(r, e, t);
}
const Lr = () => {
  const e = oo(yy);
  if (e === null)
    throw new Error(f7);
  return Gt(() => ({
    getState: e.getState,
    setState: e.setState,
    subscribe: e.subscribe,
    destroy: e.destroy
  }), [e]);
}, lq = (e) => e.userSelectionActive ? "none" : "all";
function d7({ position: e, children: t, className: r, style: n, ...i }) {
  const a = nr(lq), o = `${e}`.split("-");
  return se.createElement("div", { className: cn(["react-flow__panel", r, ...o]), style: { ...n, pointerEvents: a }, ...i }, t);
}
function uq({ proOptions: e, position: t = "bottom-right" }) {
  return e != null && e.hideAttribution ? null : se.createElement(
    d7,
    { position: t, className: "react-flow__attribution", "data-message": "Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro" },
    se.createElement("a", { href: "https://reactflow.dev", target: "_blank", rel: "noopener noreferrer", "aria-label": "React Flow attribution" }, "React Flow")
  );
}
const cq = ({ x: e, y: t, label: r, labelStyle: n = {}, labelShowBg: i = !0, labelBgStyle: a = {}, labelBgPadding: o = [2, 4], labelBgBorderRadius: s = 2, children: l, className: u, ...c }) => {
  const f = Ve(null), [d, h] = Ze({ x: 0, y: 0, width: 0, height: 0 }), p = cn(["react-flow__edge-textwrapper", u]);
  return Oe(() => {
    if (f.current) {
      const v = f.current.getBBox();
      h({
        x: v.x,
        y: v.y,
        width: v.width,
        height: v.height
      });
    }
  }, [r]), typeof r > "u" || !r ? null : se.createElement(
    "g",
    { transform: `translate(${e - d.width / 2} ${t - d.height / 2})`, className: p, visibility: d.width ? "visible" : "hidden", ...c },
    i && se.createElement("rect", { width: d.width + 2 * o[0], x: -o[0], y: -o[1], height: d.height + 2 * o[1], className: "react-flow__edge-textbg", style: a, rx: s, ry: s }),
    se.createElement("text", { className: "react-flow__edge-text", y: d.height / 2, dy: "0.3em", ref: f, style: n }, r),
    l
  );
};
var fq = Ue(cq);
const MS = (e) => ({
  width: e.offsetWidth,
  height: e.offsetHeight
}), Ec = (e, t = 0, r = 1) => Math.min(Math.max(e, t), r), ES = (e = { x: 0, y: 0 }, t) => ({
  x: Ec(e.x, t[0][0], t[1][0]),
  y: Ec(e.y, t[0][1], t[1][1])
}), GM = (e, t, r) => e < t ? Ec(Math.abs(e - t), 1, 50) / 50 : e > r ? -Ec(Math.abs(e - r), 1, 50) / 50 : 0, h7 = (e, t) => {
  const r = GM(e.x, 35, t.width - 35) * 20, n = GM(e.y, 35, t.height - 35) * 20;
  return [r, n];
}, p7 = (e) => {
  var t;
  return ((t = e.getRootNode) == null ? void 0 : t.call(e)) || (window == null ? void 0 : window.document);
}, dq = (e, t) => ({
  x: Math.min(e.x, t.x),
  y: Math.min(e.y, t.y),
  x2: Math.max(e.x2, t.x2),
  y2: Math.max(e.y2, t.y2)
}), DS = ({ x: e, y: t, width: r, height: n }) => ({
  x: e,
  y: t,
  x2: e + r,
  y2: t + n
}), hq = ({ x: e, y: t, x2: r, y2: n }) => ({
  x: e,
  y: t,
  width: r - e,
  height: n - t
}), WM = (e) => ({
  ...e.positionAbsolute || { x: 0, y: 0 },
  width: e.width || 0,
  height: e.height || 0
}), C2 = (e, t) => {
  const r = Math.max(0, Math.min(e.x + e.width, t.x + t.width) - Math.max(e.x, t.x)), n = Math.max(0, Math.min(e.y + e.height, t.y + t.height) - Math.max(e.y, t.y));
  return Math.ceil(r * n);
}, pq = (e) => Zn(e.width) && Zn(e.height) && Zn(e.x) && Zn(e.y), Zn = (e) => !isNaN(e) && isFinite(e), lr = Symbol.for("internals"), v7 = ["Enter", " ", "Escape"], g7 = (e, t) => {
  process.env.NODE_ENV === "development" && console.warn(`[React Flow]: ${t} Help: https://reactflow.dev/error#${e}`);
}, vq = (e) => "nativeEvent" in e;
function T2(e) {
  var i, a;
  const t = vq(e) ? e.nativeEvent : e, r = ((a = (i = t.composedPath) == null ? void 0 : i.call(t)) == null ? void 0 : a[0]) || e.target;
  return ["INPUT", "SELECT", "TEXTAREA"].includes(r == null ? void 0 : r.nodeName) || (r == null ? void 0 : r.hasAttribute("contenteditable")) || !!(r != null && r.closest(".nokey"));
}
const m7 = (e) => "clientX" in e, Uo = (e, t) => {
  var a, o;
  const r = m7(e), n = r ? e.clientX : (a = e.touches) == null ? void 0 : a[0].clientX, i = r ? e.clientY : (o = e.touches) == null ? void 0 : o[0].clientY;
  return {
    x: n - ((t == null ? void 0 : t.left) ?? 0),
    y: i - ((t == null ? void 0 : t.top) ?? 0)
  };
}, Fg = () => {
  var e;
  return typeof navigator < "u" && ((e = navigator == null ? void 0 : navigator.userAgent) == null ? void 0 : e.indexOf("Mac")) >= 0;
}, Yh = ({ id: e, path: t, labelX: r, labelY: n, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u, style: c, markerEnd: f, markerStart: d, interactionWidth: h = 20 }) => se.createElement(
  se.Fragment,
  null,
  se.createElement("path", { id: e, style: c, d: t, fill: "none", className: "react-flow__edge-path", markerEnd: f, markerStart: d }),
  h && se.createElement("path", { d: t, fill: "none", strokeOpacity: 0, strokeWidth: h, className: "react-flow__edge-interaction" }),
  i && Zn(r) && Zn(n) ? se.createElement(fq, { x: r, y: n, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u }) : null
);
Yh.displayName = "BaseEdge";
function Ef(e, t, r) {
  return r === void 0 ? r : (n) => {
    const i = t().edges.find((a) => a.id === e);
    i && r(n, { ...i });
  };
}
function y7({ sourceX: e, sourceY: t, targetX: r, targetY: n }) {
  const i = Math.abs(r - e) / 2, a = r < e ? r + i : r - i, o = Math.abs(n - t) / 2, s = n < t ? n + o : n - o;
  return [a, s, i, o];
}
function x7({ sourceX: e, sourceY: t, targetX: r, targetY: n, sourceControlX: i, sourceControlY: a, targetControlX: o, targetControlY: s }) {
  const l = e * 0.125 + i * 0.375 + o * 0.375 + r * 0.125, u = t * 0.125 + a * 0.375 + s * 0.375 + n * 0.125, c = Math.abs(l - e), f = Math.abs(u - t);
  return [l, u, c, f];
}
var Rl;
(function(e) {
  e.Strict = "strict", e.Loose = "loose";
})(Rl || (Rl = {}));
var ul;
(function(e) {
  e.Free = "free", e.Vertical = "vertical", e.Horizontal = "horizontal";
})(ul || (ul = {}));
var rh;
(function(e) {
  e.Partial = "partial", e.Full = "full";
})(rh || (rh = {}));
var Po;
(function(e) {
  e.Bezier = "default", e.Straight = "straight", e.Step = "step", e.SmoothStep = "smoothstep", e.SimpleBezier = "simplebezier";
})(Po || (Po = {}));
var $g;
(function(e) {
  e.Arrow = "arrow", e.ArrowClosed = "arrowclosed";
})($g || ($g = {}));
var qe;
(function(e) {
  e.Left = "left", e.Top = "top", e.Right = "right", e.Bottom = "bottom";
})(qe || (qe = {}));
function UM({ pos: e, x1: t, y1: r, x2: n, y2: i }) {
  return e === qe.Left || e === qe.Right ? [0.5 * (t + n), r] : [t, 0.5 * (r + i)];
}
function b7({ sourceX: e, sourceY: t, sourcePosition: r = qe.Bottom, targetX: n, targetY: i, targetPosition: a = qe.Top }) {
  const [o, s] = UM({
    pos: r,
    x1: e,
    y1: t,
    x2: n,
    y2: i
  }), [l, u] = UM({
    pos: a,
    x1: n,
    y1: i,
    x2: e,
    y2: t
  }), [c, f, d, h] = x7({
    sourceX: e,
    sourceY: t,
    targetX: n,
    targetY: i,
    sourceControlX: o,
    sourceControlY: s,
    targetControlX: l,
    targetControlY: u
  });
  return [
    `M${e},${t} C${o},${s} ${l},${u} ${n},${i}`,
    c,
    f,
    d,
    h
  ];
}
const NS = Ue(({ sourceX: e, sourceY: t, targetX: r, targetY: n, sourcePosition: i = qe.Bottom, targetPosition: a = qe.Top, label: o, labelStyle: s, labelShowBg: l, labelBgStyle: u, labelBgPadding: c, labelBgBorderRadius: f, style: d, markerEnd: h, markerStart: p, interactionWidth: v }) => {
  const [g, m, y] = b7({
    sourceX: e,
    sourceY: t,
    sourcePosition: i,
    targetX: r,
    targetY: n,
    targetPosition: a
  });
  return se.createElement(Yh, { path: g, labelX: m, labelY: y, label: o, labelStyle: s, labelShowBg: l, labelBgStyle: u, labelBgPadding: c, labelBgBorderRadius: f, style: d, markerEnd: h, markerStart: p, interactionWidth: v });
});
NS.displayName = "SimpleBezierEdge";
const YM = {
  [qe.Left]: { x: -1, y: 0 },
  [qe.Right]: { x: 1, y: 0 },
  [qe.Top]: { x: 0, y: -1 },
  [qe.Bottom]: { x: 0, y: 1 }
}, gq = ({ source: e, sourcePosition: t = qe.Bottom, target: r }) => t === qe.Left || t === qe.Right ? e.x < r.x ? { x: 1, y: 0 } : { x: -1, y: 0 } : e.y < r.y ? { x: 0, y: 1 } : { x: 0, y: -1 }, ZM = (e, t) => Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
function mq({ source: e, sourcePosition: t = qe.Bottom, target: r, targetPosition: n = qe.Top, center: i, offset: a }) {
  const o = YM[t], s = YM[n], l = { x: e.x + o.x * a, y: e.y + o.y * a }, u = { x: r.x + s.x * a, y: r.y + s.y * a }, c = gq({
    source: l,
    sourcePosition: t,
    target: u
  }), f = c.x !== 0 ? "x" : "y", d = c[f];
  let h = [], p, v;
  const g = { x: 0, y: 0 }, m = { x: 0, y: 0 }, [y, b, w, _] = y7({
    sourceX: e.x,
    sourceY: e.y,
    targetX: r.x,
    targetY: r.y
  });
  if (o[f] * s[f] === -1) {
    p = i.x ?? y, v = i.y ?? b;
    const C = [
      { x: p, y: l.y },
      { x: p, y: u.y }
    ], A = [
      { x: l.x, y: v },
      { x: u.x, y: v }
    ];
    o[f] === d ? h = f === "x" ? C : A : h = f === "x" ? A : C;
  } else {
    const C = [{ x: l.x, y: u.y }], A = [{ x: u.x, y: l.y }];
    if (f === "x" ? h = o.x === d ? A : C : h = o.y === d ? C : A, t === n) {
      const O = Math.abs(e[f] - r[f]);
      if (O <= a) {
        const E = Math.min(a - 1, a - O);
        o[f] === d ? g[f] = (l[f] > e[f] ? -1 : 1) * E : m[f] = (u[f] > r[f] ? -1 : 1) * E;
      }
    }
    if (t !== n) {
      const O = f === "x" ? "y" : "x", E = o[f] === s[O], L = l[O] > u[O], I = l[O] < u[O];
      (o[f] === 1 && (!E && L || E && I) || o[f] !== 1 && (!E && I || E && L)) && (h = f === "x" ? C : A);
    }
    const M = { x: l.x + g.x, y: l.y + g.y }, D = { x: u.x + m.x, y: u.y + m.y }, N = Math.max(Math.abs(M.x - h[0].x), Math.abs(D.x - h[0].x)), R = Math.max(Math.abs(M.y - h[0].y), Math.abs(D.y - h[0].y));
    N >= R ? (p = (M.x + D.x) / 2, v = h[0].y) : (p = h[0].x, v = (M.y + D.y) / 2);
  }
  return [[
    e,
    { x: l.x + g.x, y: l.y + g.y },
    ...h,
    { x: u.x + m.x, y: u.y + m.y },
    r
  ], p, v, w, _];
}
function yq(e, t, r, n) {
  const i = Math.min(ZM(e, t) / 2, ZM(t, r) / 2, n), { x: a, y: o } = t;
  if (e.x === a && a === r.x || e.y === o && o === r.y)
    return `L${a} ${o}`;
  if (e.y === o) {
    const u = e.x < r.x ? -1 : 1, c = e.y < r.y ? 1 : -1;
    return `L ${a + i * u},${o}Q ${a},${o} ${a},${o + i * c}`;
  }
  const s = e.x < r.x ? 1 : -1, l = e.y < r.y ? -1 : 1;
  return `L ${a},${o + i * l}Q ${a},${o} ${a + i * s},${o}`;
}
function A2({ sourceX: e, sourceY: t, sourcePosition: r = qe.Bottom, targetX: n, targetY: i, targetPosition: a = qe.Top, borderRadius: o = 5, centerX: s, centerY: l, offset: u = 20 }) {
  const [c, f, d, h, p] = mq({
    source: { x: e, y: t },
    sourcePosition: r,
    target: { x: n, y: i },
    targetPosition: a,
    center: { x: s, y: l },
    offset: u
  });
  return [c.reduce((g, m, y) => {
    let b = "";
    return y > 0 && y < c.length - 1 ? b = yq(c[y - 1], m, c[y + 1], o) : b = `${y === 0 ? "M" : "L"}${m.x} ${m.y}`, g += b, g;
  }, ""), f, d, h, p];
}
const xy = Ue(({ sourceX: e, sourceY: t, targetX: r, targetY: n, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u, style: c, sourcePosition: f = qe.Bottom, targetPosition: d = qe.Top, markerEnd: h, markerStart: p, pathOptions: v, interactionWidth: g }) => {
  const [m, y, b] = A2({
    sourceX: e,
    sourceY: t,
    sourcePosition: f,
    targetX: r,
    targetY: n,
    targetPosition: d,
    borderRadius: v == null ? void 0 : v.borderRadius,
    offset: v == null ? void 0 : v.offset
  });
  return se.createElement(Yh, { path: m, labelX: y, labelY: b, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u, style: c, markerEnd: h, markerStart: p, interactionWidth: g });
});
xy.displayName = "SmoothStepEdge";
const IS = Ue((e) => {
  var t;
  return se.createElement(xy, { ...e, pathOptions: Gt(() => {
    var r;
    return { borderRadius: 0, offset: (r = e.pathOptions) == null ? void 0 : r.offset };
  }, [(t = e.pathOptions) == null ? void 0 : t.offset]) });
});
IS.displayName = "StepEdge";
function xq({ sourceX: e, sourceY: t, targetX: r, targetY: n }) {
  const [i, a, o, s] = y7({
    sourceX: e,
    sourceY: t,
    targetX: r,
    targetY: n
  });
  return [`M ${e},${t}L ${r},${n}`, i, a, o, s];
}
const LS = Ue(({ sourceX: e, sourceY: t, targetX: r, targetY: n, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u, style: c, markerEnd: f, markerStart: d, interactionWidth: h }) => {
  const [p, v, g] = xq({ sourceX: e, sourceY: t, targetX: r, targetY: n });
  return se.createElement(Yh, { path: p, labelX: v, labelY: g, label: i, labelStyle: a, labelShowBg: o, labelBgStyle: s, labelBgPadding: l, labelBgBorderRadius: u, style: c, markerEnd: f, markerStart: d, interactionWidth: h });
});
LS.displayName = "StraightEdge";
function Op(e, t) {
  return e >= 0 ? 0.5 * e : t * 25 * Math.sqrt(-e);
}
function XM({ pos: e, x1: t, y1: r, x2: n, y2: i, c: a }) {
  switch (e) {
    case qe.Left:
      return [t - Op(t - n, a), r];
    case qe.Right:
      return [t + Op(n - t, a), r];
    case qe.Top:
      return [t, r - Op(r - i, a)];
    case qe.Bottom:
      return [t, r + Op(i - r, a)];
  }
}
function w7({ sourceX: e, sourceY: t, sourcePosition: r = qe.Bottom, targetX: n, targetY: i, targetPosition: a = qe.Top, curvature: o = 0.25 }) {
  const [s, l] = XM({
    pos: r,
    x1: e,
    y1: t,
    x2: n,
    y2: i,
    c: o
  }), [u, c] = XM({
    pos: a,
    x1: n,
    y1: i,
    x2: e,
    y2: t,
    c: o
  }), [f, d, h, p] = x7({
    sourceX: e,
    sourceY: t,
    targetX: n,
    targetY: i,
    sourceControlX: s,
    sourceControlY: l,
    targetControlX: u,
    targetControlY: c
  });
  return [
    `M${e},${t} C${s},${l} ${u},${c} ${n},${i}`,
    f,
    d,
    h,
    p
  ];
}
const Hg = Ue(({ sourceX: e, sourceY: t, targetX: r, targetY: n, sourcePosition: i = qe.Bottom, targetPosition: a = qe.Top, label: o, labelStyle: s, labelShowBg: l, labelBgStyle: u, labelBgPadding: c, labelBgBorderRadius: f, style: d, markerEnd: h, markerStart: p, pathOptions: v, interactionWidth: g }) => {
  const [m, y, b] = w7({
    sourceX: e,
    sourceY: t,
    sourcePosition: i,
    targetX: r,
    targetY: n,
    targetPosition: a,
    curvature: v == null ? void 0 : v.curvature
  });
  return se.createElement(Yh, { path: m, labelX: y, labelY: b, label: o, labelStyle: s, labelShowBg: l, labelBgStyle: u, labelBgPadding: c, labelBgBorderRadius: f, style: d, markerEnd: h, markerStart: p, interactionWidth: g });
});
Hg.displayName = "BezierEdge";
const RS = Xc(null), bq = RS.Provider;
RS.Consumer;
const wq = () => oo(RS), _q = (e) => "id" in e && "source" in e && "target" in e, Sq = ({ source: e, sourceHandle: t, target: r, targetHandle: n }) => `reactflow__edge-${e}${t || ""}-${r}${n || ""}`, M2 = (e, t) => typeof e > "u" ? "" : typeof e == "string" ? e : `${t ? `${t}__` : ""}${Object.keys(e).sort().map((n) => `${n}=${e[n]}`).join("&")}`, Cq = (e, t) => t.some((r) => r.source === e.source && r.target === e.target && (r.sourceHandle === e.sourceHandle || !r.sourceHandle && !e.sourceHandle) && (r.targetHandle === e.targetHandle || !r.targetHandle && !e.targetHandle)), Tq = (e, t) => {
  if (!e.source || !e.target)
    return g7("006", Ei.error006()), t;
  let r;
  return _q(e) ? r = { ...e } : r = {
    ...e,
    id: Sq(e)
  }, Cq(r, t) ? t : t.concat(r);
}, E2 = ({ x: e, y: t }, [r, n, i], a, [o, s]) => {
  const l = {
    x: (e - r) / i,
    y: (t - n) / i
  };
  return a ? {
    x: o * Math.round(l.x / o),
    y: s * Math.round(l.y / s)
  } : l;
}, _7 = ({ x: e, y: t }, [r, n, i]) => ({
  x: e * i + r,
  y: t * i + n
}), lc = (e, t = [0, 0]) => {
  if (!e)
    return {
      x: 0,
      y: 0,
      positionAbsolute: {
        x: 0,
        y: 0
      }
    };
  const r = (e.width ?? 0) * t[0], n = (e.height ?? 0) * t[1], i = {
    x: e.position.x - r,
    y: e.position.y - n
  };
  return {
    ...i,
    positionAbsolute: e.positionAbsolute ? {
      x: e.positionAbsolute.x - r,
      y: e.positionAbsolute.y - n
    } : i
  };
}, PS = (e, t = [0, 0]) => {
  if (e.length === 0)
    return { x: 0, y: 0, width: 0, height: 0 };
  const r = e.reduce((n, i) => {
    const { x: a, y: o } = lc(i, t).positionAbsolute;
    return dq(n, DS({
      x: a,
      y: o,
      width: i.width || 0,
      height: i.height || 0
    }));
  }, { x: 1 / 0, y: 1 / 0, x2: -1 / 0, y2: -1 / 0 });
  return hq(r);
}, S7 = (e, t, [r, n, i] = [0, 0, 1], a = !1, o = !1, s = [0, 0]) => {
  const l = {
    x: (t.x - r) / i,
    y: (t.y - n) / i,
    width: t.width / i,
    height: t.height / i
  }, u = [];
  return e.forEach((c) => {
    const { width: f, height: d, selectable: h = !0, hidden: p = !1 } = c;
    if (o && !h || p)
      return !1;
    const { positionAbsolute: v } = lc(c, s), g = {
      x: v.x,
      y: v.y,
      width: f || 0,
      height: d || 0
    }, m = C2(l, g), y = typeof f > "u" || typeof d > "u" || f === null || d === null, b = a && m > 0, w = (f || 0) * (d || 0);
    (y || b || m >= w || c.dragging) && u.push(c);
  }), u;
}, C7 = (e, t) => {
  const r = e.map((n) => n.id);
  return t.filter((n) => r.includes(n.source) || r.includes(n.target));
}, T7 = (e, t, r, n, i, a = 0.1) => {
  const o = t / (e.width * (1 + a)), s = r / (e.height * (1 + a)), l = Math.min(o, s), u = Ec(l, n, i), c = e.x + e.width / 2, f = e.y + e.height / 2, d = t / 2 - c * u, h = r / 2 - f * u;
  return { x: d, y: h, zoom: u };
}, Us = (e, t = 0) => e.transition().duration(t);
function KM(e, t, r, n) {
  return (t[r] || []).reduce((i, a) => {
    var o, s;
    return `${e.id}-${a.id}-${r}` !== n && i.push({
      id: a.id || null,
      type: r,
      nodeId: e.id,
      x: (((o = e.positionAbsolute) == null ? void 0 : o.x) ?? 0) + a.x + a.width / 2,
      y: (((s = e.positionAbsolute) == null ? void 0 : s.y) ?? 0) + a.y + a.height / 2
    }), i;
  }, []);
}
function Aq(e, t, r, n, i, a) {
  const { x: o, y: s } = Uo(e), u = t.elementsFromPoint(o, s).find((p) => p.classList.contains("react-flow__handle"));
  if (u) {
    const p = u.getAttribute("data-nodeid");
    if (p) {
      const v = kS(void 0, u), g = u.getAttribute("data-handleid"), m = a({ nodeId: p, id: g, type: v });
      if (m) {
        const y = i.find((b) => b.nodeId === p && b.type === v && b.id === g);
        return {
          handle: {
            id: g,
            type: v,
            nodeId: p,
            x: (y == null ? void 0 : y.x) || r.x,
            y: (y == null ? void 0 : y.y) || r.y
          },
          validHandleResult: m
        };
      }
    }
  }
  let c = [], f = 1 / 0;
  if (i.forEach((p) => {
    const v = Math.sqrt((p.x - r.x) ** 2 + (p.y - r.y) ** 2);
    if (v <= n) {
      const g = a(p);
      v <= f && (v < f ? c = [{ handle: p, validHandleResult: g }] : v === f && c.push({
        handle: p,
        validHandleResult: g
      }), f = v);
    }
  }), !c.length)
    return { handle: null, validHandleResult: A7() };
  if (c.length === 1)
    return c[0];
  const d = c.some(({ validHandleResult: p }) => p.isValid), h = c.some(({ handle: p }) => p.type === "target");
  return c.find(({ handle: p, validHandleResult: v }) => h ? p.type === "target" : d ? v.isValid : !0) || c[0];
}
const Mq = { source: null, target: null, sourceHandle: null, targetHandle: null }, A7 = () => ({
  handleDomNode: null,
  isValid: !1,
  connection: Mq,
  endHandle: null
});
function M7(e, t, r, n, i, a, o) {
  const s = i === "target", l = o.querySelector(`.react-flow__handle[data-id="${e == null ? void 0 : e.nodeId}-${e == null ? void 0 : e.id}-${e == null ? void 0 : e.type}"]`), u = {
    ...A7(),
    handleDomNode: l
  };
  if (l) {
    const c = kS(void 0, l), f = l.getAttribute("data-nodeid"), d = l.getAttribute("data-handleid"), h = l.classList.contains("connectable"), p = l.classList.contains("connectableend"), v = {
      source: s ? f : r,
      sourceHandle: s ? d : n,
      target: s ? r : f,
      targetHandle: s ? n : d
    };
    u.connection = v, h && p && (t === Rl.Strict ? s && c === "source" || !s && c === "target" : f !== r || d !== n) && (u.endHandle = {
      nodeId: f,
      handleId: d,
      type: c
    }, u.isValid = a(v));
  }
  return u;
}
function Eq({ nodes: e, nodeId: t, handleId: r, handleType: n }) {
  return e.reduce((i, a) => {
    if (a[lr]) {
      const { handleBounds: o } = a[lr];
      let s = [], l = [];
      o && (s = KM(a, o, "source", `${t}-${r}-${n}`), l = KM(a, o, "target", `${t}-${r}-${n}`)), i.push(...s, ...l);
    }
    return i;
  }, []);
}
function kS(e, t) {
  return e || (t != null && t.classList.contains("target") ? "target" : t != null && t.classList.contains("source") ? "source" : null);
}
function e1(e) {
  e == null || e.classList.remove("valid", "connecting", "react-flow__handle-valid", "react-flow__handle-connecting");
}
function Dq(e, t) {
  let r = null;
  return t ? r = "valid" : e && !t && (r = "invalid"), r;
}
function E7({ event: e, handleId: t, nodeId: r, onConnect: n, isTarget: i, getState: a, setState: o, isValidConnection: s, edgeUpdaterType: l, onReconnectEnd: u }) {
  const c = p7(e.target), { connectionMode: f, domNode: d, autoPanOnConnect: h, connectionRadius: p, onConnectStart: v, panBy: g, getNodes: m, cancelConnection: y } = a();
  let b = 0, w;
  const { x: _, y: S } = Uo(e), C = c == null ? void 0 : c.elementFromPoint(_, S), A = kS(l, C), M = d == null ? void 0 : d.getBoundingClientRect();
  if (!M || !A)
    return;
  let D, N = Uo(e, M), R = !1, O = null, E = !1, L = null;
  const I = Eq({
    nodes: m(),
    nodeId: r,
    handleId: t,
    handleType: A
  }), P = () => {
    if (!h)
      return;
    const [V, B] = h7(N, M);
    g({ x: V, y: B }), b = requestAnimationFrame(P);
  };
  o({
    connectionPosition: N,
    connectionStatus: null,
    // connectionNodeId etc will be removed in the next major in favor of connectionStartHandle
    connectionNodeId: r,
    connectionHandleId: t,
    connectionHandleType: A,
    connectionStartHandle: {
      nodeId: r,
      handleId: t,
      type: A
    },
    connectionEndHandle: null
  }), v == null || v(e, { nodeId: r, handleId: t, handleType: A });
  function k(V) {
    const { transform: B } = a();
    N = Uo(V, M);
    const { handle: F, validHandleResult: H } = Aq(V, c, E2(N, B, !1, [1, 1]), p, I, (G) => M7(G, f, r, t, i ? "target" : "source", s, c));
    if (w = F, R || (P(), R = !0), L = H.handleDomNode, O = H.connection, E = H.isValid, o({
      connectionPosition: w && E ? _7({
        x: w.x,
        y: w.y
      }, B) : N,
      connectionStatus: Dq(!!w, E),
      connectionEndHandle: H.endHandle
    }), !w && !E && !L)
      return e1(D);
    O.source !== O.target && L && (e1(D), D = L, L.classList.add("connecting", "react-flow__handle-connecting"), L.classList.toggle("valid", E), L.classList.toggle("react-flow__handle-valid", E));
  }
  function z(V) {
    var B, F;
    (w || L) && O && E && (n == null || n(O)), (F = (B = a()).onConnectEnd) == null || F.call(B, V), l && (u == null || u(V)), e1(D), y(), cancelAnimationFrame(b), R = !1, E = !1, O = null, L = null, c.removeEventListener("mousemove", k), c.removeEventListener("mouseup", z), c.removeEventListener("touchmove", k), c.removeEventListener("touchend", z);
  }
  c.addEventListener("mousemove", k), c.addEventListener("mouseup", z), c.addEventListener("touchmove", k), c.addEventListener("touchend", z);
}
const qM = () => !0, Nq = (e) => ({
  connectionStartHandle: e.connectionStartHandle,
  connectOnClick: e.connectOnClick,
  noPanClassName: e.noPanClassName
}), Iq = (e, t, r) => (n) => {
  const { connectionStartHandle: i, connectionEndHandle: a, connectionClickStartHandle: o } = n;
  return {
    connecting: (i == null ? void 0 : i.nodeId) === e && (i == null ? void 0 : i.handleId) === t && (i == null ? void 0 : i.type) === r || (a == null ? void 0 : a.nodeId) === e && (a == null ? void 0 : a.handleId) === t && (a == null ? void 0 : a.type) === r,
    clickConnecting: (o == null ? void 0 : o.nodeId) === e && (o == null ? void 0 : o.handleId) === t && (o == null ? void 0 : o.type) === r
  };
}, D7 = Nt(({ type: e = "source", position: t = qe.Top, isValidConnection: r, isConnectable: n = !0, isConnectableStart: i = !0, isConnectableEnd: a = !0, id: o, onConnect: s, children: l, className: u, onMouseDown: c, onTouchStart: f, ...d }, h) => {
  var M, D;
  const p = o || null, v = e === "target", g = Lr(), m = wq(), { connectOnClick: y, noPanClassName: b } = nr(Nq, Or), { connecting: w, clickConnecting: _ } = nr(Iq(m, p, e), Or);
  m || (D = (M = g.getState()).onError) == null || D.call(M, "010", Ei.error010());
  const S = (N) => {
    const { defaultEdgeOptions: R, onConnect: O, hasDefaultEdges: E } = g.getState(), L = {
      ...R,
      ...N
    };
    if (E) {
      const { edges: I, setEdges: P } = g.getState();
      P(Tq(L, I));
    }
    O == null || O(L), s == null || s(L);
  }, C = (N) => {
    if (!m)
      return;
    const R = m7(N);
    i && (R && N.button === 0 || !R) && E7({
      event: N,
      handleId: p,
      nodeId: m,
      onConnect: S,
      isTarget: v,
      getState: g.getState,
      setState: g.setState,
      isValidConnection: r || g.getState().isValidConnection || qM
    }), R ? c == null || c(N) : f == null || f(N);
  }, A = (N) => {
    const { onClickConnectStart: R, onClickConnectEnd: O, connectionClickStartHandle: E, connectionMode: L, isValidConnection: I } = g.getState();
    if (!m || !E && !i)
      return;
    if (!E) {
      R == null || R(N, { nodeId: m, handleId: p, handleType: e }), g.setState({ connectionClickStartHandle: { nodeId: m, type: e, handleId: p } });
      return;
    }
    const P = p7(N.target), k = r || I || qM, { connection: z, isValid: V } = M7({
      nodeId: m,
      id: p,
      type: e
    }, L, E.nodeId, E.handleId || null, E.type, k, P);
    V && S(z), O == null || O(N), g.setState({ connectionClickStartHandle: null });
  };
  return se.createElement("div", { "data-handleid": p, "data-nodeid": m, "data-handlepos": t, "data-id": `${m}-${p}-${e}`, className: cn([
    "react-flow__handle",
    `react-flow__handle-${t}`,
    "nodrag",
    b,
    u,
    {
      source: !v,
      target: v,
      connectable: n,
      connectablestart: i,
      connectableend: a,
      connecting: _,
      // this class is used to style the handle when the user is connecting
      connectionindicator: n && (i && !w || a && w)
    }
  ]), onMouseDown: C, onTouchStart: C, onClick: y ? A : void 0, ref: h, ...d }, l);
});
D7.displayName = "Handle";
var Dc = Ue(D7);
const N7 = ({ data: e, isConnectable: t, targetPosition: r = qe.Top, sourcePosition: n = qe.Bottom }) => se.createElement(
  se.Fragment,
  null,
  se.createElement(Dc, { type: "target", position: r, isConnectable: t }),
  e == null ? void 0 : e.label,
  se.createElement(Dc, { type: "source", position: n, isConnectable: t })
);
N7.displayName = "DefaultNode";
var D2 = Ue(N7);
const I7 = ({ data: e, isConnectable: t, sourcePosition: r = qe.Bottom }) => se.createElement(
  se.Fragment,
  null,
  e == null ? void 0 : e.label,
  se.createElement(Dc, { type: "source", position: r, isConnectable: t })
);
I7.displayName = "InputNode";
var L7 = Ue(I7);
const R7 = ({ data: e, isConnectable: t, targetPosition: r = qe.Top }) => se.createElement(
  se.Fragment,
  null,
  se.createElement(Dc, { type: "target", position: r, isConnectable: t }),
  e == null ? void 0 : e.label
);
R7.displayName = "OutputNode";
var P7 = Ue(R7);
const OS = () => null;
OS.displayName = "GroupNode";
const Lq = (e) => ({
  selectedNodes: e.getNodes().filter((t) => t.selected),
  selectedEdges: e.edges.filter((t) => t.selected).map((t) => ({ ...t }))
}), zp = (e) => e.id;
function Rq(e, t) {
  return Or(e.selectedNodes.map(zp), t.selectedNodes.map(zp)) && Or(e.selectedEdges.map(zp), t.selectedEdges.map(zp));
}
const k7 = Ue(({ onSelectionChange: e }) => {
  const t = Lr(), { selectedNodes: r, selectedEdges: n } = nr(Lq, Rq);
  return Oe(() => {
    const i = { nodes: r, edges: n };
    e == null || e(i), t.getState().onSelectionChange.forEach((a) => a(i));
  }, [r, n, e]), null;
});
k7.displayName = "SelectionListener";
const Pq = (e) => !!e.onSelectionChange;
function kq({ onSelectionChange: e }) {
  const t = nr(Pq);
  return e || t ? se.createElement(k7, { onSelectionChange: e }) : null;
}
const Oq = (e) => ({
  setNodes: e.setNodes,
  setEdges: e.setEdges,
  setDefaultNodesAndEdges: e.setDefaultNodesAndEdges,
  setMinZoom: e.setMinZoom,
  setMaxZoom: e.setMaxZoom,
  setTranslateExtent: e.setTranslateExtent,
  setNodeExtent: e.setNodeExtent,
  reset: e.reset
});
function uu(e, t) {
  Oe(() => {
    typeof e < "u" && t(e);
  }, [e]);
}
function St(e, t, r) {
  Oe(() => {
    typeof t < "u" && r({ [e]: t });
  }, [t]);
}
const zq = ({ nodes: e, edges: t, defaultNodes: r, defaultEdges: n, onConnect: i, onConnectStart: a, onConnectEnd: o, onClickConnectStart: s, onClickConnectEnd: l, nodesDraggable: u, nodesConnectable: c, nodesFocusable: f, edgesFocusable: d, edgesUpdatable: h, elevateNodesOnSelect: p, minZoom: v, maxZoom: g, nodeExtent: m, onNodesChange: y, onEdgesChange: b, elementsSelectable: w, connectionMode: _, snapGrid: S, snapToGrid: C, translateExtent: A, connectOnClick: M, defaultEdgeOptions: D, fitView: N, fitViewOptions: R, onNodesDelete: O, onEdgesDelete: E, onNodeDrag: L, onNodeDragStart: I, onNodeDragStop: P, onSelectionDrag: k, onSelectionDragStart: z, onSelectionDragStop: V, noPanClassName: B, nodeOrigin: F, rfId: H, autoPanOnConnect: G, autoPanOnNodeDrag: W, onError: X, connectionRadius: q, isValidConnection: J, nodeDragThreshold: U }) => {
  const { setNodes: $, setEdges: Y, setDefaultNodesAndEdges: Z, setMinZoom: K, setMaxZoom: ie, setTranslateExtent: Q, setNodeExtent: ce, reset: te } = nr(Oq, Or), oe = Lr();
  return Oe(() => {
    const de = n == null ? void 0 : n.map((Pe) => ({ ...Pe, ...D }));
    return Z(r, de), () => {
      te();
    };
  }, []), St("defaultEdgeOptions", D, oe.setState), St("connectionMode", _, oe.setState), St("onConnect", i, oe.setState), St("onConnectStart", a, oe.setState), St("onConnectEnd", o, oe.setState), St("onClickConnectStart", s, oe.setState), St("onClickConnectEnd", l, oe.setState), St("nodesDraggable", u, oe.setState), St("nodesConnectable", c, oe.setState), St("nodesFocusable", f, oe.setState), St("edgesFocusable", d, oe.setState), St("edgesUpdatable", h, oe.setState), St("elementsSelectable", w, oe.setState), St("elevateNodesOnSelect", p, oe.setState), St("snapToGrid", C, oe.setState), St("snapGrid", S, oe.setState), St("onNodesChange", y, oe.setState), St("onEdgesChange", b, oe.setState), St("connectOnClick", M, oe.setState), St("fitViewOnInit", N, oe.setState), St("fitViewOnInitOptions", R, oe.setState), St("onNodesDelete", O, oe.setState), St("onEdgesDelete", E, oe.setState), St("onNodeDrag", L, oe.setState), St("onNodeDragStart", I, oe.setState), St("onNodeDragStop", P, oe.setState), St("onSelectionDrag", k, oe.setState), St("onSelectionDragStart", z, oe.setState), St("onSelectionDragStop", V, oe.setState), St("noPanClassName", B, oe.setState), St("nodeOrigin", F, oe.setState), St("rfId", H, oe.setState), St("autoPanOnConnect", G, oe.setState), St("autoPanOnNodeDrag", W, oe.setState), St("onError", X, oe.setState), St("connectionRadius", q, oe.setState), St("isValidConnection", J, oe.setState), St("nodeDragThreshold", U, oe.setState), uu(e, $), uu(t, Y), uu(v, K), uu(g, ie), uu(A, Q), uu(m, ce), null;
}, JM = { display: "none" }, jq = {
  position: "absolute",
  width: 1,
  height: 1,
  margin: -1,
  border: 0,
  padding: 0,
  overflow: "hidden",
  clip: "rect(0px, 0px, 0px, 0px)",
  clipPath: "inset(100%)"
}, O7 = "react-flow__node-desc", z7 = "react-flow__edge-desc", Vq = "react-flow__aria-live", Bq = (e) => e.ariaLiveMessage;
function Fq({ rfId: e }) {
  const t = nr(Bq);
  return se.createElement("div", { id: `${Vq}-${e}`, "aria-live": "assertive", "aria-atomic": "true", style: jq }, t);
}
function $q({ rfId: e, disableKeyboardA11y: t }) {
  return se.createElement(
    se.Fragment,
    null,
    se.createElement(
      "div",
      { id: `${O7}-${e}`, style: JM },
      "Press enter or space to select a node.",
      !t && "You can then use the arrow keys to move the node around.",
      " Press delete to remove it and escape to cancel.",
      " "
    ),
    se.createElement("div", { id: `${z7}-${e}`, style: JM }, "Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),
    !t && se.createElement(Fq, { rfId: e })
  );
}
var nh = (e = null, t = { actInsideInputWithModifier: !0 }) => {
  const [r, n] = Ze(!1), i = Ve(!1), a = Ve(/* @__PURE__ */ new Set([])), [o, s] = Gt(() => {
    if (e !== null) {
      const u = (Array.isArray(e) ? e : [e]).filter((f) => typeof f == "string").map((f) => f.split("+")), c = u.reduce((f, d) => f.concat(...d), []);
      return [u, c];
    }
    return [[], []];
  }, [e]);
  return Oe(() => {
    const l = typeof document < "u" ? document : null, u = (t == null ? void 0 : t.target) || l;
    if (e !== null) {
      const c = (h) => {
        if (i.current = h.ctrlKey || h.metaKey || h.shiftKey, (!i.current || i.current && !t.actInsideInputWithModifier) && T2(h))
          return !1;
        const v = eE(h.code, s);
        a.current.add(h[v]), QM(o, a.current, !1) && (h.preventDefault(), n(!0));
      }, f = (h) => {
        if ((!i.current || i.current && !t.actInsideInputWithModifier) && T2(h))
          return !1;
        const v = eE(h.code, s);
        QM(o, a.current, !0) ? (n(!1), a.current.clear()) : a.current.delete(h[v]), h.key === "Meta" && a.current.clear(), i.current = !1;
      }, d = () => {
        a.current.clear(), n(!1);
      };
      return u == null || u.addEventListener("keydown", c), u == null || u.addEventListener("keyup", f), window.addEventListener("blur", d), () => {
        u == null || u.removeEventListener("keydown", c), u == null || u.removeEventListener("keyup", f), window.removeEventListener("blur", d);
      };
    }
  }, [e, n]), r;
};
function QM(e, t, r) {
  return e.filter((n) => r || n.length === t.size).some((n) => n.every((i) => t.has(i)));
}
function eE(e, t) {
  return t.includes(e) ? "code" : "key";
}
function j7(e, t, r, n) {
  var s, l;
  const i = e.parentNode || e.parentId;
  if (!i)
    return r;
  const a = t.get(i), o = lc(a, n);
  return j7(a, t, {
    x: (r.x ?? 0) + o.x,
    y: (r.y ?? 0) + o.y,
    z: (((s = a[lr]) == null ? void 0 : s.z) ?? 0) > (r.z ?? 0) ? ((l = a[lr]) == null ? void 0 : l.z) ?? 0 : r.z ?? 0
  }, n);
}
function V7(e, t, r) {
  e.forEach((n) => {
    var a;
    const i = n.parentNode || n.parentId;
    if (i && !e.has(i))
      throw new Error(`Parent node ${i} not found`);
    if (i || r != null && r[n.id]) {
      const { x: o, y: s, z: l } = j7(n, e, {
        ...n.position,
        z: ((a = n[lr]) == null ? void 0 : a.z) ?? 0
      }, t);
      n.positionAbsolute = {
        x: o,
        y: s
      }, n[lr].z = l, r != null && r[n.id] && (n[lr].isParent = !0);
    }
  });
}
function t1(e, t, r, n) {
  const i = /* @__PURE__ */ new Map(), a = {}, o = n ? 1e3 : 0;
  return e.forEach((s) => {
    var h;
    const l = (Zn(s.zIndex) ? s.zIndex : 0) + (s.selected ? o : 0), u = t.get(s.id), c = {
      ...s,
      positionAbsolute: {
        x: s.position.x,
        y: s.position.y
      }
    }, f = s.parentNode || s.parentId;
    f && (a[f] = !0);
    const d = (u == null ? void 0 : u.type) && (u == null ? void 0 : u.type) !== s.type;
    Object.defineProperty(c, lr, {
      enumerable: !1,
      value: {
        handleBounds: d || (h = u == null ? void 0 : u[lr]) == null ? void 0 : h.handleBounds,
        z: l
      }
    }), i.set(s.id, c);
  }), V7(i, r, a), i;
}
function B7(e, t = {}) {
  const { getNodes: r, width: n, height: i, minZoom: a, maxZoom: o, d3Zoom: s, d3Selection: l, fitViewOnInitDone: u, fitViewOnInit: c, nodeOrigin: f } = e(), d = t.initial && !u && c;
  if (s && l && (d || !t.initial)) {
    const p = r().filter((g) => {
      var y;
      const m = t.includeHiddenNodes ? g.width && g.height : !g.hidden;
      return (y = t.nodes) != null && y.length ? m && t.nodes.some((b) => b.id === g.id) : m;
    }), v = p.every((g) => g.width && g.height);
    if (p.length > 0 && v) {
      const g = PS(p, f), { x: m, y, zoom: b } = T7(g, n, i, t.minZoom ?? a, t.maxZoom ?? o, t.padding ?? 0.1), w = Wo.translate(m, y).scale(b);
      return typeof t.duration == "number" && t.duration > 0 ? s.transform(Us(l, t.duration), w) : s.transform(l, w), !0;
    }
  }
  return !1;
}
function Hq(e, t) {
  return e.forEach((r) => {
    const n = t.get(r.id);
    n && t.set(n.id, {
      ...n,
      [lr]: n[lr],
      selected: r.selected
    });
  }), new Map(t);
}
function Gq(e, t) {
  return t.map((r) => {
    const n = e.find((i) => i.id === r.id);
    return n && (r.selected = n.selected), r;
  });
}
function jp({ changedNodes: e, changedEdges: t, get: r, set: n }) {
  const { nodeInternals: i, edges: a, onNodesChange: o, onEdgesChange: s, hasDefaultNodes: l, hasDefaultEdges: u } = r();
  e != null && e.length && (l && n({ nodeInternals: Hq(e, i) }), o == null || o(e)), t != null && t.length && (u && n({ edges: Gq(t, a) }), s == null || s(t));
}
const cu = () => {
}, Wq = {
  zoomIn: cu,
  zoomOut: cu,
  zoomTo: cu,
  getZoom: () => 1,
  setViewport: cu,
  getViewport: () => ({ x: 0, y: 0, zoom: 1 }),
  fitView: () => !1,
  setCenter: cu,
  fitBounds: cu,
  project: (e) => e,
  screenToFlowPosition: (e) => e,
  flowToScreenPosition: (e) => e,
  viewportInitialized: !1
}, Uq = (e) => ({
  d3Zoom: e.d3Zoom,
  d3Selection: e.d3Selection
}), Yq = () => {
  const e = Lr(), { d3Zoom: t, d3Selection: r } = nr(Uq, Or);
  return Gt(() => r && t ? {
    zoomIn: (i) => t.scaleBy(Us(r, i == null ? void 0 : i.duration), 1.2),
    zoomOut: (i) => t.scaleBy(Us(r, i == null ? void 0 : i.duration), 1 / 1.2),
    zoomTo: (i, a) => t.scaleTo(Us(r, a == null ? void 0 : a.duration), i),
    getZoom: () => e.getState().transform[2],
    setViewport: (i, a) => {
      const [o, s, l] = e.getState().transform, u = Wo.translate(i.x ?? o, i.y ?? s).scale(i.zoom ?? l);
      t.transform(Us(r, a == null ? void 0 : a.duration), u);
    },
    getViewport: () => {
      const [i, a, o] = e.getState().transform;
      return { x: i, y: a, zoom: o };
    },
    fitView: (i) => B7(e.getState, i),
    setCenter: (i, a, o) => {
      const { width: s, height: l, maxZoom: u } = e.getState(), c = typeof (o == null ? void 0 : o.zoom) < "u" ? o.zoom : u, f = s / 2 - i * c, d = l / 2 - a * c, h = Wo.translate(f, d).scale(c);
      t.transform(Us(r, o == null ? void 0 : o.duration), h);
    },
    fitBounds: (i, a) => {
      const { width: o, height: s, minZoom: l, maxZoom: u } = e.getState(), { x: c, y: f, zoom: d } = T7(i, o, s, l, u, (a == null ? void 0 : a.padding) ?? 0.1), h = Wo.translate(c, f).scale(d);
      t.transform(Us(r, a == null ? void 0 : a.duration), h);
    },
    // @deprecated Use `screenToFlowPosition`.
    project: (i) => {
      const { transform: a, snapToGrid: o, snapGrid: s } = e.getState();
      return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"), E2(i, a, o, s);
    },
    screenToFlowPosition: (i) => {
      const { transform: a, snapToGrid: o, snapGrid: s, domNode: l } = e.getState();
      if (!l)
        return i;
      const { x: u, y: c } = l.getBoundingClientRect(), f = {
        x: i.x - u,
        y: i.y - c
      };
      return E2(f, a, o, s);
    },
    flowToScreenPosition: (i) => {
      const { transform: a, domNode: o } = e.getState();
      if (!o)
        return i;
      const { x: s, y: l } = o.getBoundingClientRect(), u = _7(i, a);
      return {
        x: u.x + s,
        y: u.y + l
      };
    },
    viewportInitialized: !0
  } : Wq, [t, r]);
};
function zS() {
  const e = Yq(), t = Lr(), r = Te(() => t.getState().getNodes().map((v) => ({ ...v })), []), n = Te((v) => t.getState().nodeInternals.get(v), []), i = Te(() => {
    const { edges: v = [] } = t.getState();
    return v.map((g) => ({ ...g }));
  }, []), a = Te((v) => {
    const { edges: g = [] } = t.getState();
    return g.find((m) => m.id === v);
  }, []), o = Te((v) => {
    const { getNodes: g, setNodes: m, hasDefaultNodes: y, onNodesChange: b } = t.getState(), w = g(), _ = typeof v == "function" ? v(w) : v;
    if (y)
      m(_);
    else if (b) {
      const S = _.length === 0 ? w.map((C) => ({ type: "remove", id: C.id })) : _.map((C) => ({ item: C, type: "reset" }));
      b(S);
    }
  }, []), s = Te((v) => {
    const { edges: g = [], setEdges: m, hasDefaultEdges: y, onEdgesChange: b } = t.getState(), w = typeof v == "function" ? v(g) : v;
    if (y)
      m(w);
    else if (b) {
      const _ = w.length === 0 ? g.map((S) => ({ type: "remove", id: S.id })) : w.map((S) => ({ item: S, type: "reset" }));
      b(_);
    }
  }, []), l = Te((v) => {
    const g = Array.isArray(v) ? v : [v], { getNodes: m, setNodes: y, hasDefaultNodes: b, onNodesChange: w } = t.getState();
    if (b) {
      const S = [...m(), ...g];
      y(S);
    } else if (w) {
      const _ = g.map((S) => ({ item: S, type: "add" }));
      w(_);
    }
  }, []), u = Te((v) => {
    const g = Array.isArray(v) ? v : [v], { edges: m = [], setEdges: y, hasDefaultEdges: b, onEdgesChange: w } = t.getState();
    if (b)
      y([...m, ...g]);
    else if (w) {
      const _ = g.map((S) => ({ item: S, type: "add" }));
      w(_);
    }
  }, []), c = Te(() => {
    const { getNodes: v, edges: g = [], transform: m } = t.getState(), [y, b, w] = m;
    return {
      nodes: v().map((_) => ({ ..._ })),
      edges: g.map((_) => ({ ..._ })),
      viewport: {
        x: y,
        y: b,
        zoom: w
      }
    };
  }, []), f = Te(({ nodes: v, edges: g }) => {
    const { nodeInternals: m, getNodes: y, edges: b, hasDefaultNodes: w, hasDefaultEdges: _, onNodesDelete: S, onEdgesDelete: C, onNodesChange: A, onEdgesChange: M } = t.getState(), D = (v || []).map((L) => L.id), N = (g || []).map((L) => L.id), R = y().reduce((L, I) => {
      const P = I.parentNode || I.parentId, k = !D.includes(I.id) && P && L.find((V) => V.id === P);
      return (typeof I.deletable == "boolean" ? I.deletable : !0) && (D.includes(I.id) || k) && L.push(I), L;
    }, []), O = b.filter((L) => typeof L.deletable == "boolean" ? L.deletable : !0), E = O.filter((L) => N.includes(L.id));
    if (R || E) {
      const L = C7(R, O), I = [...E, ...L], P = I.reduce((k, z) => (k.includes(z.id) || k.push(z.id), k), []);
      if ((_ || w) && (_ && t.setState({
        edges: b.filter((k) => !P.includes(k.id))
      }), w && (R.forEach((k) => {
        m.delete(k.id);
      }), t.setState({
        nodeInternals: new Map(m)
      }))), P.length > 0 && (C == null || C(I), M && M(P.map((k) => ({
        id: k,
        type: "remove"
      })))), R.length > 0 && (S == null || S(R), A)) {
        const k = R.map((z) => ({ id: z.id, type: "remove" }));
        A(k);
      }
    }
  }, []), d = Te((v) => {
    const g = pq(v), m = g ? null : t.getState().nodeInternals.get(v.id);
    return !g && !m ? [null, null, g] : [g ? v : WM(m), m, g];
  }, []), h = Te((v, g = !0, m) => {
    const [y, b, w] = d(v);
    return y ? (m || t.getState().getNodes()).filter((_) => {
      if (!w && (_.id === b.id || !_.positionAbsolute))
        return !1;
      const S = WM(_), C = C2(S, y);
      return g && C > 0 || C >= y.width * y.height;
    }) : [];
  }, []), p = Te((v, g, m = !0) => {
    const [y] = d(v);
    if (!y)
      return !1;
    const b = C2(y, g);
    return m && b > 0 || b >= y.width * y.height;
  }, []);
  return Gt(() => ({
    ...e,
    getNodes: r,
    getNode: n,
    getEdges: i,
    getEdge: a,
    setNodes: o,
    setEdges: s,
    addNodes: l,
    addEdges: u,
    toObject: c,
    deleteElements: f,
    getIntersectingNodes: h,
    isNodeIntersecting: p
  }), [
    e,
    r,
    n,
    i,
    a,
    o,
    s,
    l,
    u,
    c,
    f,
    h,
    p
  ]);
}
const Zq = { actInsideInputWithModifier: !1 };
var Xq = ({ deleteKeyCode: e, multiSelectionKeyCode: t }) => {
  const r = Lr(), { deleteElements: n } = zS(), i = nh(e, Zq), a = nh(t);
  Oe(() => {
    if (i) {
      const { edges: o, getNodes: s } = r.getState(), l = s().filter((c) => c.selected), u = o.filter((c) => c.selected);
      n({ nodes: l, edges: u }), r.setState({ nodesSelectionActive: !1 });
    }
  }, [i]), Oe(() => {
    r.setState({ multiSelectionActive: a });
  }, [a]);
};
function Kq(e) {
  const t = Lr();
  Oe(() => {
    let r;
    const n = () => {
      var a, o;
      if (!e.current)
        return;
      const i = MS(e.current);
      (i.height === 0 || i.width === 0) && ((o = (a = t.getState()).onError) == null || o.call(a, "004", Ei.error004())), t.setState({ width: i.width || 500, height: i.height || 500 });
    };
    return n(), window.addEventListener("resize", n), e.current && (r = new ResizeObserver(() => n()), r.observe(e.current)), () => {
      window.removeEventListener("resize", n), r && e.current && r.unobserve(e.current);
    };
  }, []);
}
const jS = {
  position: "absolute",
  width: "100%",
  height: "100%",
  top: 0,
  left: 0
}, qq = (e, t) => e.x !== t.x || e.y !== t.y || e.zoom !== t.k, Vp = (e) => ({
  x: e.x,
  y: e.y,
  zoom: e.k
}), fu = (e, t) => e.target.closest(`.${t}`), tE = (e, t) => t === 2 && Array.isArray(e) && e.includes(2), rE = (e) => {
  const t = e.ctrlKey && Fg() ? 10 : 1;
  return -e.deltaY * (e.deltaMode === 1 ? 0.05 : e.deltaMode ? 1 : 2e-3) * t;
}, Jq = (e) => ({
  d3Zoom: e.d3Zoom,
  d3Selection: e.d3Selection,
  d3ZoomHandler: e.d3ZoomHandler,
  userSelectionActive: e.userSelectionActive
}), Qq = ({ onMove: e, onMoveStart: t, onMoveEnd: r, onPaneContextMenu: n, zoomOnScroll: i = !0, zoomOnPinch: a = !0, panOnScroll: o = !1, panOnScrollSpeed: s = 0.5, panOnScrollMode: l = ul.Free, zoomOnDoubleClick: u = !0, elementsSelectable: c, panOnDrag: f = !0, defaultViewport: d, translateExtent: h, minZoom: p, maxZoom: v, zoomActivationKeyCode: g, preventScrolling: m = !0, children: y, noWheelClassName: b, noPanClassName: w }) => {
  const _ = Ve(), S = Lr(), C = Ve(!1), A = Ve(!1), M = Ve(null), D = Ve({ x: 0, y: 0, zoom: 0 }), { d3Zoom: N, d3Selection: R, d3ZoomHandler: O, userSelectionActive: E } = nr(Jq, Or), L = nh(g), I = Ve(0), P = Ve(!1), k = Ve();
  return Kq(M), Oe(() => {
    if (M.current) {
      const z = M.current.getBoundingClientRect(), V = oq().scaleExtent([p, v]).translateExtent(h), B = yi(M.current).call(V), F = Wo.translate(d.x, d.y).scale(Ec(d.zoom, p, v)), H = [
        [0, 0],
        [z.width, z.height]
      ], G = V.constrain()(F, H, h);
      V.transform(B, G), V.wheelDelta(rE), S.setState({
        d3Zoom: V,
        d3Selection: B,
        d3ZoomHandler: B.on("wheel.zoom"),
        // we need to pass transform because zoom handler is not registered when we set the initial transform
        transform: [G.x, G.y, G.k],
        domNode: M.current.closest(".react-flow")
      });
    }
  }, []), Oe(() => {
    R && N && (o && !L && !E ? R.on("wheel.zoom", (z) => {
      if (fu(z, b))
        return !1;
      z.preventDefault(), z.stopImmediatePropagation();
      const V = R.property("__zoom").k || 1;
      if (z.ctrlKey && a) {
        const J = Hi(z), U = rE(z), $ = V * Math.pow(2, U);
        N.scaleTo(R, $, J, z);
        return;
      }
      const B = z.deltaMode === 1 ? 20 : 1;
      let F = l === ul.Vertical ? 0 : z.deltaX * B, H = l === ul.Horizontal ? 0 : z.deltaY * B;
      !Fg() && z.shiftKey && l !== ul.Vertical && (F = z.deltaY * B, H = 0), N.translateBy(
        R,
        -(F / V) * s,
        -(H / V) * s,
        // @ts-ignore
        { internal: !0 }
      );
      const G = Vp(R.property("__zoom")), { onViewportChangeStart: W, onViewportChange: X, onViewportChangeEnd: q } = S.getState();
      clearTimeout(k.current), P.current || (P.current = !0, t == null || t(z, G), W == null || W(G)), P.current && (e == null || e(z, G), X == null || X(G), k.current = setTimeout(() => {
        r == null || r(z, G), q == null || q(G), P.current = !1;
      }, 150));
    }, { passive: !1 }) : typeof O < "u" && R.on("wheel.zoom", function(z, V) {
      if (!m && z.type === "wheel" && !z.ctrlKey || fu(z, b))
        return null;
      z.preventDefault(), O.call(this, z, V);
    }, { passive: !1 }));
  }, [
    E,
    o,
    l,
    R,
    N,
    O,
    L,
    a,
    m,
    b,
    t,
    e,
    r
  ]), Oe(() => {
    N && N.on("start", (z) => {
      var F, H;
      if (!z.sourceEvent || z.sourceEvent.internal)
        return null;
      I.current = (F = z.sourceEvent) == null ? void 0 : F.button;
      const { onViewportChangeStart: V } = S.getState(), B = Vp(z.transform);
      C.current = !0, D.current = B, ((H = z.sourceEvent) == null ? void 0 : H.type) === "mousedown" && S.setState({ paneDragging: !0 }), V == null || V(B), t == null || t(z.sourceEvent, B);
    });
  }, [N, t]), Oe(() => {
    N && (E && !C.current ? N.on("zoom", null) : E || N.on("zoom", (z) => {
      var B;
      const { onViewportChange: V } = S.getState();
      if (S.setState({ transform: [z.transform.x, z.transform.y, z.transform.k] }), A.current = !!(n && tE(f, I.current ?? 0)), (e || V) && !((B = z.sourceEvent) != null && B.internal)) {
        const F = Vp(z.transform);
        V == null || V(F), e == null || e(z.sourceEvent, F);
      }
    }));
  }, [E, N, e, f, n]), Oe(() => {
    N && N.on("end", (z) => {
      if (!z.sourceEvent || z.sourceEvent.internal)
        return null;
      const { onViewportChangeEnd: V } = S.getState();
      if (C.current = !1, S.setState({ paneDragging: !1 }), n && tE(f, I.current ?? 0) && !A.current && n(z.sourceEvent), A.current = !1, (r || V) && qq(D.current, z.transform)) {
        const B = Vp(z.transform);
        D.current = B, clearTimeout(_.current), _.current = setTimeout(() => {
          V == null || V(B), r == null || r(z.sourceEvent, B);
        }, o ? 150 : 0);
      }
    });
  }, [N, o, f, r, n]), Oe(() => {
    N && N.filter((z) => {
      const V = L || i, B = a && z.ctrlKey;
      if ((f === !0 || Array.isArray(f) && f.includes(1)) && z.button === 1 && z.type === "mousedown" && (fu(z, "react-flow__node") || fu(z, "react-flow__edge")))
        return !0;
      if (!f && !V && !o && !u && !a || E || !u && z.type === "dblclick" || fu(z, b) && z.type === "wheel" || fu(z, w) && (z.type !== "wheel" || o && z.type === "wheel" && !L) || !a && z.ctrlKey && z.type === "wheel" || !V && !o && !B && z.type === "wheel" || !f && (z.type === "mousedown" || z.type === "touchstart") || Array.isArray(f) && !f.includes(z.button) && z.type === "mousedown")
        return !1;
      const F = Array.isArray(f) && f.includes(z.button) || !z.button || z.button <= 1;
      return (!z.ctrlKey || z.type === "wheel") && F;
    });
  }, [
    E,
    N,
    i,
    a,
    o,
    u,
    f,
    c,
    L
  ]), se.createElement("div", { className: "react-flow__renderer", ref: M, style: jS }, y);
}, eJ = (e) => ({
  userSelectionActive: e.userSelectionActive,
  userSelectionRect: e.userSelectionRect
});
function tJ() {
  const { userSelectionActive: e, userSelectionRect: t } = nr(eJ, Or);
  return e && t ? se.createElement("div", { className: "react-flow__selection react-flow__container", style: {
    width: t.width,
    height: t.height,
    transform: `translate(${t.x}px, ${t.y}px)`
  } }) : null;
}
function nE(e, t) {
  const r = t.parentNode || t.parentId, n = e.find((i) => i.id === r);
  if (n) {
    const i = t.position.x + t.width - n.width, a = t.position.y + t.height - n.height;
    if (i > 0 || a > 0 || t.position.x < 0 || t.position.y < 0) {
      if (n.style = { ...n.style }, n.style.width = n.style.width ?? n.width, n.style.height = n.style.height ?? n.height, i > 0 && (n.style.width += i), a > 0 && (n.style.height += a), t.position.x < 0) {
        const o = Math.abs(t.position.x);
        n.position.x = n.position.x - o, n.style.width += o, t.position.x = 0;
      }
      if (t.position.y < 0) {
        const o = Math.abs(t.position.y);
        n.position.y = n.position.y - o, n.style.height += o, t.position.y = 0;
      }
      n.width = n.style.width, n.height = n.style.height;
    }
  }
}
function F7(e, t) {
  if (e.some((n) => n.type === "reset"))
    return e.filter((n) => n.type === "reset").map((n) => n.item);
  const r = e.filter((n) => n.type === "add").map((n) => n.item);
  return t.reduce((n, i) => {
    const a = e.filter((s) => s.id === i.id);
    if (a.length === 0)
      return n.push(i), n;
    const o = { ...i };
    for (const s of a)
      if (s)
        switch (s.type) {
          case "select": {
            o.selected = s.selected;
            break;
          }
          case "position": {
            typeof s.position < "u" && (o.position = s.position), typeof s.positionAbsolute < "u" && (o.positionAbsolute = s.positionAbsolute), typeof s.dragging < "u" && (o.dragging = s.dragging), o.expandParent && nE(n, o);
            break;
          }
          case "dimensions": {
            typeof s.dimensions < "u" && (o.width = s.dimensions.width, o.height = s.dimensions.height), typeof s.updateStyle < "u" && (o.style = { ...o.style || {}, ...s.dimensions }), typeof s.resizing == "boolean" && (o.resizing = s.resizing), o.expandParent && nE(n, o);
            break;
          }
          case "remove":
            return n;
        }
    return n.push(o), n;
  }, r);
}
function $7(e, t) {
  return F7(e, t);
}
function rJ(e, t) {
  return F7(e, t);
}
const No = (e, t) => ({
  id: e,
  type: "select",
  selected: t
});
function Qu(e, t) {
  return e.reduce((r, n) => {
    const i = t.includes(n.id);
    return !n.selected && i ? (n.selected = !0, r.push(No(n.id, !0))) : n.selected && !i && (n.selected = !1, r.push(No(n.id, !1))), r;
  }, []);
}
const r1 = (e, t) => (r) => {
  r.target === t.current && (e == null || e(r));
}, nJ = (e) => ({
  userSelectionActive: e.userSelectionActive,
  elementsSelectable: e.elementsSelectable,
  dragging: e.paneDragging
}), H7 = Ue(({ isSelecting: e, selectionMode: t = rh.Full, panOnDrag: r, onSelectionStart: n, onSelectionEnd: i, onPaneClick: a, onPaneContextMenu: o, onPaneScroll: s, onPaneMouseEnter: l, onPaneMouseMove: u, onPaneMouseLeave: c, children: f }) => {
  const d = Ve(null), h = Lr(), p = Ve(0), v = Ve(0), g = Ve(), { userSelectionActive: m, elementsSelectable: y, dragging: b } = nr(nJ, Or), w = () => {
    h.setState({ userSelectionActive: !1, userSelectionRect: null }), p.current = 0, v.current = 0;
  }, _ = (O) => {
    a == null || a(O), h.getState().resetSelectedElements(), h.setState({ nodesSelectionActive: !1 });
  }, S = (O) => {
    if (Array.isArray(r) && (r != null && r.includes(2))) {
      O.preventDefault();
      return;
    }
    o == null || o(O);
  }, C = s ? (O) => s(O) : void 0, A = (O) => {
    const { resetSelectedElements: E, domNode: L } = h.getState();
    if (g.current = L == null ? void 0 : L.getBoundingClientRect(), !y || !e || O.button !== 0 || O.target !== d.current || !g.current)
      return;
    const { x: I, y: P } = Uo(O, g.current);
    E(), h.setState({
      userSelectionRect: {
        width: 0,
        height: 0,
        startX: I,
        startY: P,
        x: I,
        y: P
      }
    }), n == null || n(O);
  }, M = (O) => {
    const { userSelectionRect: E, nodeInternals: L, edges: I, transform: P, onNodesChange: k, onEdgesChange: z, nodeOrigin: V, getNodes: B } = h.getState();
    if (!e || !g.current || !E)
      return;
    h.setState({ userSelectionActive: !0, nodesSelectionActive: !1 });
    const F = Uo(O, g.current), H = E.startX ?? 0, G = E.startY ?? 0, W = {
      ...E,
      x: F.x < H ? F.x : H,
      y: F.y < G ? F.y : G,
      width: Math.abs(F.x - H),
      height: Math.abs(F.y - G)
    }, X = B(), q = S7(L, W, P, t === rh.Partial, !0, V), J = C7(q, I).map(($) => $.id), U = q.map(($) => $.id);
    if (p.current !== U.length) {
      p.current = U.length;
      const $ = Qu(X, U);
      $.length && (k == null || k($));
    }
    if (v.current !== J.length) {
      v.current = J.length;
      const $ = Qu(I, J);
      $.length && (z == null || z($));
    }
    h.setState({
      userSelectionRect: W
    });
  }, D = (O) => {
    if (O.button !== 0)
      return;
    const { userSelectionRect: E } = h.getState();
    !m && E && O.target === d.current && (_ == null || _(O)), h.setState({ nodesSelectionActive: p.current > 0 }), w(), i == null || i(O);
  }, N = (O) => {
    m && (h.setState({ nodesSelectionActive: p.current > 0 }), i == null || i(O)), w();
  }, R = y && (e || m);
  return se.createElement(
    "div",
    { className: cn(["react-flow__pane", { dragging: b, selection: e }]), onClick: R ? void 0 : r1(_, d), onContextMenu: r1(S, d), onWheel: r1(C, d), onMouseEnter: R ? void 0 : l, onMouseDown: R ? A : void 0, onMouseMove: R ? M : u, onMouseUp: R ? D : void 0, onMouseLeave: R ? N : c, ref: d, style: jS },
    f,
    se.createElement(tJ, null)
  );
});
H7.displayName = "Pane";
function G7(e, t) {
  const r = e.parentNode || e.parentId;
  if (!r)
    return !1;
  const n = t.get(r);
  return n ? n.selected ? !0 : G7(n, t) : !1;
}
function iE(e, t, r) {
  let n = e;
  do {
    if (n != null && n.matches(t))
      return !0;
    if (n === r.current)
      return !1;
    n = n.parentElement;
  } while (n);
  return !1;
}
function iJ(e, t, r, n) {
  return Array.from(e.values()).filter((i) => (i.selected || i.id === n) && (!i.parentNode || i.parentId || !G7(i, e)) && (i.draggable || t && typeof i.draggable > "u")).map((i) => {
    var a, o;
    return {
      id: i.id,
      position: i.position || { x: 0, y: 0 },
      positionAbsolute: i.positionAbsolute || { x: 0, y: 0 },
      distance: {
        x: r.x - (((a = i.positionAbsolute) == null ? void 0 : a.x) ?? 0),
        y: r.y - (((o = i.positionAbsolute) == null ? void 0 : o.y) ?? 0)
      },
      delta: {
        x: 0,
        y: 0
      },
      extent: i.extent,
      parentNode: i.parentNode || i.parentId,
      parentId: i.parentNode || i.parentId,
      width: i.width,
      height: i.height,
      expandParent: i.expandParent
    };
  });
}
function aJ(e, t) {
  return !t || t === "parent" ? t : [t[0], [t[1][0] - (e.width || 0), t[1][1] - (e.height || 0)]];
}
function W7(e, t, r, n, i = [0, 0], a) {
  const o = aJ(e, e.extent || n);
  let s = o;
  const l = e.parentNode || e.parentId;
  if (e.extent === "parent" && !e.expandParent)
    if (l && e.width && e.height) {
      const f = r.get(l), { x: d, y: h } = lc(f, i).positionAbsolute;
      s = f && Zn(d) && Zn(h) && Zn(f.width) && Zn(f.height) ? [
        [d + e.width * i[0], h + e.height * i[1]],
        [
          d + f.width - e.width + e.width * i[0],
          h + f.height - e.height + e.height * i[1]
        ]
      ] : s;
    } else
      a == null || a("005", Ei.error005()), s = o;
  else if (e.extent && l && e.extent !== "parent") {
    const f = r.get(l), { x: d, y: h } = lc(f, i).positionAbsolute;
    s = [
      [e.extent[0][0] + d, e.extent[0][1] + h],
      [e.extent[1][0] + d, e.extent[1][1] + h]
    ];
  }
  let u = { x: 0, y: 0 };
  if (l) {
    const f = r.get(l);
    u = lc(f, i).positionAbsolute;
  }
  const c = s && s !== "parent" ? ES(t, s) : t;
  return {
    position: {
      x: c.x - u.x,
      y: c.y - u.y
    },
    positionAbsolute: c
  };
}
function n1({ nodeId: e, dragItems: t, nodeInternals: r }) {
  const n = t.map((i) => ({
    ...r.get(i.id),
    position: i.position,
    positionAbsolute: i.positionAbsolute
  }));
  return [e ? n.find((i) => i.id === e) : n[0], n];
}
const aE = (e, t, r, n) => {
  const i = t.querySelectorAll(e);
  if (!i || !i.length)
    return null;
  const a = Array.from(i), o = t.getBoundingClientRect(), s = {
    x: o.width * n[0],
    y: o.height * n[1]
  };
  return a.map((l) => {
    const u = l.getBoundingClientRect();
    return {
      id: l.getAttribute("data-handleid"),
      position: l.getAttribute("data-handlepos"),
      x: (u.left - o.left - s.x) / r,
      y: (u.top - o.top - s.y) / r,
      ...MS(l)
    };
  });
};
function Df(e, t, r) {
  return r === void 0 ? r : (n) => {
    const i = t().nodeInternals.get(e);
    i && r(n, { ...i });
  };
}
function N2({ id: e, store: t, unselect: r = !1, nodeRef: n }) {
  const { addSelectedNodes: i, unselectNodesAndEdges: a, multiSelectionActive: o, nodeInternals: s, onError: l } = t.getState(), u = s.get(e);
  if (!u) {
    l == null || l("012", Ei.error012(e));
    return;
  }
  t.setState({ nodesSelectionActive: !1 }), u.selected ? (r || u.selected && o) && (a({ nodes: [u], edges: [] }), requestAnimationFrame(() => {
    var c;
    return (c = n == null ? void 0 : n.current) == null ? void 0 : c.blur();
  })) : i([e]);
}
function oJ() {
  const e = Lr();
  return Te(({ sourceEvent: r }) => {
    const { transform: n, snapGrid: i, snapToGrid: a } = e.getState(), o = r.touches ? r.touches[0].clientX : r.clientX, s = r.touches ? r.touches[0].clientY : r.clientY, l = {
      x: (o - n[0]) / n[2],
      y: (s - n[1]) / n[2]
    };
    return {
      xSnapped: a ? i[0] * Math.round(l.x / i[0]) : l.x,
      ySnapped: a ? i[1] * Math.round(l.y / i[1]) : l.y,
      ...l
    };
  }, []);
}
function i1(e) {
  return (t, r, n) => e == null ? void 0 : e(t, n);
}
function U7({ nodeRef: e, disabled: t = !1, noDragClassName: r, handleSelector: n, nodeId: i, isSelectable: a, selectNodesOnDrag: o }) {
  const s = Lr(), [l, u] = Ze(!1), c = Ve([]), f = Ve({ x: null, y: null }), d = Ve(0), h = Ve(null), p = Ve({ x: 0, y: 0 }), v = Ve(null), g = Ve(!1), m = Ve(!1), y = Ve(!1), b = oJ();
  return Oe(() => {
    if (e != null && e.current) {
      const w = yi(e.current), _ = ({ x: A, y: M }) => {
        const { nodeInternals: D, onNodeDrag: N, onSelectionDrag: R, updateNodePositions: O, nodeExtent: E, snapGrid: L, snapToGrid: I, nodeOrigin: P, onError: k } = s.getState();
        f.current = { x: A, y: M };
        let z = !1, V = { x: 0, y: 0, x2: 0, y2: 0 };
        if (c.current.length > 1 && E) {
          const F = PS(c.current, P);
          V = DS(F);
        }
        if (c.current = c.current.map((F) => {
          const H = { x: A - F.distance.x, y: M - F.distance.y };
          I && (H.x = L[0] * Math.round(H.x / L[0]), H.y = L[1] * Math.round(H.y / L[1]));
          const G = [
            [E[0][0], E[0][1]],
            [E[1][0], E[1][1]]
          ];
          c.current.length > 1 && E && !F.extent && (G[0][0] = F.positionAbsolute.x - V.x + E[0][0], G[1][0] = F.positionAbsolute.x + (F.width ?? 0) - V.x2 + E[1][0], G[0][1] = F.positionAbsolute.y - V.y + E[0][1], G[1][1] = F.positionAbsolute.y + (F.height ?? 0) - V.y2 + E[1][1]);
          const W = W7(F, H, D, G, P, k);
          return z = z || F.position.x !== W.position.x || F.position.y !== W.position.y, F.position = W.position, F.positionAbsolute = W.positionAbsolute, F;
        }), !z)
          return;
        O(c.current, !0, !0), u(!0);
        const B = i ? N : i1(R);
        if (B && v.current) {
          const [F, H] = n1({
            nodeId: i,
            dragItems: c.current,
            nodeInternals: D
          });
          B(v.current, F, H);
        }
      }, S = () => {
        if (!h.current)
          return;
        const [A, M] = h7(p.current, h.current);
        if (A !== 0 || M !== 0) {
          const { transform: D, panBy: N } = s.getState();
          f.current.x = (f.current.x ?? 0) - A / D[2], f.current.y = (f.current.y ?? 0) - M / D[2], N({ x: A, y: M }) && _(f.current);
        }
        d.current = requestAnimationFrame(S);
      }, C = (A) => {
        var P;
        const { nodeInternals: M, multiSelectionActive: D, nodesDraggable: N, unselectNodesAndEdges: R, onNodeDragStart: O, onSelectionDragStart: E } = s.getState();
        m.current = !0;
        const L = i ? O : i1(E);
        (!o || !a) && !D && i && ((P = M.get(i)) != null && P.selected || R()), i && a && o && N2({
          id: i,
          store: s,
          nodeRef: e
        });
        const I = b(A);
        if (f.current = I, c.current = iJ(M, N, I, i), L && c.current) {
          const [k, z] = n1({
            nodeId: i,
            dragItems: c.current,
            nodeInternals: M
          });
          L(A.sourceEvent, k, z);
        }
      };
      if (t)
        w.on(".drag", null);
      else {
        const A = gX().on("start", (M) => {
          const { domNode: D, nodeDragThreshold: N } = s.getState();
          N === 0 && C(M), y.current = !1;
          const R = b(M);
          f.current = R, h.current = (D == null ? void 0 : D.getBoundingClientRect()) || null, p.current = Uo(M.sourceEvent, h.current);
        }).on("drag", (M) => {
          var O, E;
          const D = b(M), { autoPanOnNodeDrag: N, nodeDragThreshold: R } = s.getState();
          if (M.sourceEvent.type === "touchmove" && M.sourceEvent.touches.length > 1 && (y.current = !0), !y.current) {
            if (!g.current && m.current && N && (g.current = !0, S()), !m.current) {
              const L = D.xSnapped - (((O = f == null ? void 0 : f.current) == null ? void 0 : O.x) ?? 0), I = D.ySnapped - (((E = f == null ? void 0 : f.current) == null ? void 0 : E.y) ?? 0);
              Math.sqrt(L * L + I * I) > R && C(M);
            }
            (f.current.x !== D.xSnapped || f.current.y !== D.ySnapped) && c.current && m.current && (v.current = M.sourceEvent, p.current = Uo(M.sourceEvent, h.current), _(D));
          }
        }).on("end", (M) => {
          if (!(!m.current || y.current) && (u(!1), g.current = !1, m.current = !1, cancelAnimationFrame(d.current), c.current)) {
            const { updateNodePositions: D, nodeInternals: N, onNodeDragStop: R, onSelectionDragStop: O } = s.getState(), E = i ? R : i1(O);
            if (D(c.current, !1, !1), E) {
              const [L, I] = n1({
                nodeId: i,
                dragItems: c.current,
                nodeInternals: N
              });
              E(M.sourceEvent, L, I);
            }
          }
        }).filter((M) => {
          const D = M.target;
          return !M.button && (!r || !iE(D, `.${r}`, e)) && (!n || iE(D, n, e));
        });
        return w.call(A), () => {
          w.on(".drag", null);
        };
      }
    }
  }, [
    e,
    t,
    r,
    n,
    a,
    s,
    i,
    o,
    b
  ]), l;
}
function Y7() {
  const e = Lr();
  return Te((r) => {
    const { nodeInternals: n, nodeExtent: i, updateNodePositions: a, getNodes: o, snapToGrid: s, snapGrid: l, onError: u, nodesDraggable: c } = e.getState(), f = o().filter((y) => y.selected && (y.draggable || c && typeof y.draggable > "u")), d = s ? l[0] : 5, h = s ? l[1] : 5, p = r.isShiftPressed ? 4 : 1, v = r.x * d * p, g = r.y * h * p, m = f.map((y) => {
      if (y.positionAbsolute) {
        const b = { x: y.positionAbsolute.x + v, y: y.positionAbsolute.y + g };
        s && (b.x = l[0] * Math.round(b.x / l[0]), b.y = l[1] * Math.round(b.y / l[1]));
        const { positionAbsolute: w, position: _ } = W7(y, b, n, i, void 0, u);
        y.position = _, y.positionAbsolute = w;
      }
      return y;
    });
    a(m, !0, !1);
  }, []);
}
const uc = {
  ArrowUp: { x: 0, y: -1 },
  ArrowDown: { x: 0, y: 1 },
  ArrowLeft: { x: -1, y: 0 },
  ArrowRight: { x: 1, y: 0 }
};
var Nf = (e) => {
  const t = ({ id: r, type: n, data: i, xPos: a, yPos: o, xPosOrigin: s, yPosOrigin: l, selected: u, onClick: c, onMouseEnter: f, onMouseMove: d, onMouseLeave: h, onContextMenu: p, onDoubleClick: v, style: g, className: m, isDraggable: y, isSelectable: b, isConnectable: w, isFocusable: _, selectNodesOnDrag: S, sourcePosition: C, targetPosition: A, hidden: M, resizeObserver: D, dragHandle: N, zIndex: R, isParent: O, noDragClassName: E, noPanClassName: L, initialized: I, disableKeyboardA11y: P, ariaLabel: k, rfId: z, hasHandleBounds: V }) => {
    const B = Lr(), F = Ve(null), H = Ve(null), G = Ve(C), W = Ve(A), X = Ve(n), q = b || y || c || f || d || h, J = Y7(), U = Df(r, B.getState, f), $ = Df(r, B.getState, d), Y = Df(r, B.getState, h), Z = Df(r, B.getState, p), K = Df(r, B.getState, v), ie = (te) => {
      const { nodeDragThreshold: oe } = B.getState();
      if (b && (!S || !y || oe > 0) && N2({
        id: r,
        store: B,
        nodeRef: F
      }), c) {
        const de = B.getState().nodeInternals.get(r);
        de && c(te, { ...de });
      }
    }, Q = (te) => {
      if (!T2(te) && !P)
        if (v7.includes(te.key) && b) {
          const oe = te.key === "Escape";
          N2({
            id: r,
            store: B,
            unselect: oe,
            nodeRef: F
          });
        } else y && u && Object.prototype.hasOwnProperty.call(uc, te.key) && (B.setState({
          ariaLiveMessage: `Moved selected node ${te.key.replace("Arrow", "").toLowerCase()}. New position, x: ${~~a}, y: ${~~o}`
        }), J({
          x: uc[te.key].x,
          y: uc[te.key].y,
          isShiftPressed: te.shiftKey
        }));
    };
    Oe(() => () => {
      H.current && (D == null || D.unobserve(H.current), H.current = null);
    }, []), Oe(() => {
      if (F.current && !M) {
        const te = F.current;
        (!I || !V || H.current !== te) && (H.current && (D == null || D.unobserve(H.current)), D == null || D.observe(te), H.current = te);
      }
    }, [M, I, V]), Oe(() => {
      const te = X.current !== n, oe = G.current !== C, de = W.current !== A;
      F.current && (te || oe || de) && (te && (X.current = n), oe && (G.current = C), de && (W.current = A), B.getState().updateNodeDimensions([{ id: r, nodeElement: F.current, forceUpdate: !0 }]));
    }, [r, n, C, A]);
    const ce = U7({
      nodeRef: F,
      disabled: M || !y,
      noDragClassName: E,
      handleSelector: N,
      nodeId: r,
      isSelectable: b,
      selectNodesOnDrag: S
    });
    return M ? null : se.createElement(
      "div",
      { className: cn([
        "react-flow__node",
        `react-flow__node-${n}`,
        {
          // this is overwritable by passing `nopan` as a class name
          [L]: y
        },
        m,
        {
          selected: u,
          selectable: b,
          parent: O,
          dragging: ce
        }
      ]), ref: F, style: {
        zIndex: R,
        transform: `translate(${s}px,${l}px)`,
        pointerEvents: q ? "all" : "none",
        visibility: I ? "visible" : "hidden",
        ...g
      }, "data-id": r, "data-testid": `rf__node-${r}`, onMouseEnter: U, onMouseMove: $, onMouseLeave: Y, onContextMenu: Z, onClick: ie, onDoubleClick: K, onKeyDown: _ ? Q : void 0, tabIndex: _ ? 0 : void 0, role: _ ? "button" : void 0, "aria-describedby": P ? void 0 : `${O7}-${z}`, "aria-label": k },
      se.createElement(
        bq,
        { value: r },
        se.createElement(e, { id: r, data: i, type: n, xPos: a, yPos: o, selected: u, isConnectable: w, sourcePosition: C, targetPosition: A, dragging: ce, dragHandle: N, zIndex: R })
      )
    );
  };
  return t.displayName = "NodeWrapper", Ue(t);
};
const sJ = (e) => {
  const t = e.getNodes().filter((r) => r.selected);
  return {
    ...PS(t, e.nodeOrigin),
    transformString: `translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,
    userSelectionActive: e.userSelectionActive
  };
};
function lJ({ onSelectionContextMenu: e, noPanClassName: t, disableKeyboardA11y: r }) {
  const n = Lr(), { width: i, height: a, x: o, y: s, transformString: l, userSelectionActive: u } = nr(sJ, Or), c = Y7(), f = Ve(null);
  if (Oe(() => {
    var p;
    r || (p = f.current) == null || p.focus({
      preventScroll: !0
    });
  }, [r]), U7({
    nodeRef: f
  }), u || !i || !a)
    return null;
  const d = e ? (p) => {
    const v = n.getState().getNodes().filter((g) => g.selected);
    e(p, v);
  } : void 0, h = (p) => {
    Object.prototype.hasOwnProperty.call(uc, p.key) && c({
      x: uc[p.key].x,
      y: uc[p.key].y,
      isShiftPressed: p.shiftKey
    });
  };
  return se.createElement(
    "div",
    { className: cn(["react-flow__nodesselection", "react-flow__container", t]), style: {
      transform: l
    } },
    se.createElement("div", { ref: f, className: "react-flow__nodesselection-rect", onContextMenu: d, tabIndex: r ? void 0 : -1, onKeyDown: r ? void 0 : h, style: {
      width: i,
      height: a,
      top: s,
      left: o
    } })
  );
}
var uJ = Ue(lJ);
const cJ = (e) => e.nodesSelectionActive, Z7 = ({ children: e, onPaneClick: t, onPaneMouseEnter: r, onPaneMouseMove: n, onPaneMouseLeave: i, onPaneContextMenu: a, onPaneScroll: o, deleteKeyCode: s, onMove: l, onMoveStart: u, onMoveEnd: c, selectionKeyCode: f, selectionOnDrag: d, selectionMode: h, onSelectionStart: p, onSelectionEnd: v, multiSelectionKeyCode: g, panActivationKeyCode: m, zoomActivationKeyCode: y, elementsSelectable: b, zoomOnScroll: w, zoomOnPinch: _, panOnScroll: S, panOnScrollSpeed: C, panOnScrollMode: A, zoomOnDoubleClick: M, panOnDrag: D, defaultViewport: N, translateExtent: R, minZoom: O, maxZoom: E, preventScrolling: L, onSelectionContextMenu: I, noWheelClassName: P, noPanClassName: k, disableKeyboardA11y: z }) => {
  const V = nr(cJ), B = nh(f), F = nh(m), H = F || D, G = F || S, W = B || d && H !== !0;
  return Xq({ deleteKeyCode: s, multiSelectionKeyCode: g }), se.createElement(
    Qq,
    { onMove: l, onMoveStart: u, onMoveEnd: c, onPaneContextMenu: a, elementsSelectable: b, zoomOnScroll: w, zoomOnPinch: _, panOnScroll: G, panOnScrollSpeed: C, panOnScrollMode: A, zoomOnDoubleClick: M, panOnDrag: !B && H, defaultViewport: N, translateExtent: R, minZoom: O, maxZoom: E, zoomActivationKeyCode: y, preventScrolling: L, noWheelClassName: P, noPanClassName: k },
    se.createElement(
      H7,
      { onSelectionStart: p, onSelectionEnd: v, onPaneClick: t, onPaneMouseEnter: r, onPaneMouseMove: n, onPaneMouseLeave: i, onPaneContextMenu: a, onPaneScroll: o, panOnDrag: H, isSelecting: !!W, selectionMode: h },
      e,
      V && se.createElement(uJ, { onSelectionContextMenu: I, noPanClassName: k, disableKeyboardA11y: z })
    )
  );
};
Z7.displayName = "FlowRenderer";
var fJ = Ue(Z7);
function dJ(e) {
  return nr(Te((r) => e ? S7(r.nodeInternals, { x: 0, y: 0, width: r.width, height: r.height }, r.transform, !0) : r.getNodes(), [e]));
}
function hJ(e) {
  const t = {
    input: Nf(e.input || L7),
    default: Nf(e.default || D2),
    output: Nf(e.output || P7),
    group: Nf(e.group || OS)
  }, r = {}, n = Object.keys(e).filter((i) => !["input", "default", "output", "group"].includes(i)).reduce((i, a) => (i[a] = Nf(e[a] || D2), i), r);
  return {
    ...t,
    ...n
  };
}
const pJ = ({ x: e, y: t, width: r, height: n, origin: i }) => !r || !n ? { x: e, y: t } : i[0] < 0 || i[1] < 0 || i[0] > 1 || i[1] > 1 ? { x: e, y: t } : {
  x: e - r * i[0],
  y: t - n * i[1]
}, vJ = (e) => ({
  nodesDraggable: e.nodesDraggable,
  nodesConnectable: e.nodesConnectable,
  nodesFocusable: e.nodesFocusable,
  elementsSelectable: e.elementsSelectable,
  updateNodeDimensions: e.updateNodeDimensions,
  onError: e.onError
}), X7 = (e) => {
  const { nodesDraggable: t, nodesConnectable: r, nodesFocusable: n, elementsSelectable: i, updateNodeDimensions: a, onError: o } = nr(vJ, Or), s = dJ(e.onlyRenderVisibleElements), l = Ve(), u = Gt(() => {
    if (typeof ResizeObserver > "u")
      return null;
    const c = new ResizeObserver((f) => {
      const d = f.map((h) => ({
        id: h.target.getAttribute("data-id"),
        nodeElement: h.target,
        forceUpdate: !0
      }));
      a(d);
    });
    return l.current = c, c;
  }, []);
  return Oe(() => () => {
    var c;
    (c = l == null ? void 0 : l.current) == null || c.disconnect();
  }, []), se.createElement("div", { className: "react-flow__nodes", style: jS }, s.map((c) => {
    var _, S, C;
    let f = c.type || "default";
    e.nodeTypes[f] || (o == null || o("003", Ei.error003(f)), f = "default");
    const d = e.nodeTypes[f] || e.nodeTypes.default, h = !!(c.draggable || t && typeof c.draggable > "u"), p = !!(c.selectable || i && typeof c.selectable > "u"), v = !!(c.connectable || r && typeof c.connectable > "u"), g = !!(c.focusable || n && typeof c.focusable > "u"), m = e.nodeExtent ? ES(c.positionAbsolute, e.nodeExtent) : c.positionAbsolute, y = (m == null ? void 0 : m.x) ?? 0, b = (m == null ? void 0 : m.y) ?? 0, w = pJ({
      x: y,
      y: b,
      width: c.width ?? 0,
      height: c.height ?? 0,
      origin: e.nodeOrigin
    });
    return se.createElement(d, { key: c.id, id: c.id, className: c.className, style: c.style, type: f, data: c.data, sourcePosition: c.sourcePosition || qe.Bottom, targetPosition: c.targetPosition || qe.Top, hidden: c.hidden, xPos: y, yPos: b, xPosOrigin: w.x, yPosOrigin: w.y, selectNodesOnDrag: e.selectNodesOnDrag, onClick: e.onNodeClick, onMouseEnter: e.onNodeMouseEnter, onMouseMove: e.onNodeMouseMove, onMouseLeave: e.onNodeMouseLeave, onContextMenu: e.onNodeContextMenu, onDoubleClick: e.onNodeDoubleClick, selected: !!c.selected, isDraggable: h, isSelectable: p, isConnectable: v, isFocusable: g, resizeObserver: u, dragHandle: c.dragHandle, zIndex: ((_ = c[lr]) == null ? void 0 : _.z) ?? 0, isParent: !!((S = c[lr]) != null && S.isParent), noDragClassName: e.noDragClassName, noPanClassName: e.noPanClassName, initialized: !!c.width && !!c.height, rfId: e.rfId, disableKeyboardA11y: e.disableKeyboardA11y, ariaLabel: c.ariaLabel, hasHandleBounds: !!((C = c[lr]) != null && C.handleBounds) });
  }));
};
X7.displayName = "NodeRenderer";
var gJ = Ue(X7);
const mJ = (e, t, r) => r === qe.Left ? e - t : r === qe.Right ? e + t : e, yJ = (e, t, r) => r === qe.Top ? e - t : r === qe.Bottom ? e + t : e, oE = "react-flow__edgeupdater", sE = ({ position: e, centerX: t, centerY: r, radius: n = 10, onMouseDown: i, onMouseEnter: a, onMouseOut: o, type: s }) => se.createElement("circle", { onMouseDown: i, onMouseEnter: a, onMouseOut: o, className: cn([oE, `${oE}-${s}`]), cx: mJ(t, n, e), cy: yJ(r, n, e), r: n, stroke: "transparent", fill: "transparent" }), xJ = () => !0;
var du = (e) => {
  const t = ({ id: r, className: n, type: i, data: a, onClick: o, onEdgeDoubleClick: s, selected: l, animated: u, label: c, labelStyle: f, labelShowBg: d, labelBgStyle: h, labelBgPadding: p, labelBgBorderRadius: v, style: g, source: m, target: y, sourceX: b, sourceY: w, targetX: _, targetY: S, sourcePosition: C, targetPosition: A, elementsSelectable: M, hidden: D, sourceHandleId: N, targetHandleId: R, onContextMenu: O, onMouseEnter: E, onMouseMove: L, onMouseLeave: I, reconnectRadius: P, onReconnect: k, onReconnectStart: z, onReconnectEnd: V, markerEnd: B, markerStart: F, rfId: H, ariaLabel: G, isFocusable: W, isReconnectable: X, pathOptions: q, interactionWidth: J, disableKeyboardA11y: U }) => {
    const $ = Ve(null), [Y, Z] = Ze(!1), [K, ie] = Ze(!1), Q = Lr(), ce = Gt(() => `url('#${M2(F, H)}')`, [F, H]), te = Gt(() => `url('#${M2(B, H)}')`, [B, H]);
    if (D)
      return null;
    const oe = (Re) => {
      var ft;
      const { edges: gt, addSelectedEdges: Ye, unselectNodesAndEdges: we, multiSelectionActive: ke } = Q.getState(), De = gt.find((Bt) => Bt.id === r);
      De && (M && (Q.setState({ nodesSelectionActive: !1 }), De.selected && ke ? (we({ nodes: [], edges: [De] }), (ft = $.current) == null || ft.blur()) : Ye([r])), o && o(Re, De));
    }, de = Ef(r, Q.getState, s), Pe = Ef(r, Q.getState, O), Ke = Ef(r, Q.getState, E), it = Ef(r, Q.getState, L), Dt = Ef(r, Q.getState, I), Pt = (Re, gt) => {
      if (Re.button !== 0)
        return;
      const { edges: Ye, isValidConnection: we } = Q.getState(), ke = gt ? y : m, De = (gt ? R : N) || null, ft = gt ? "target" : "source", Bt = we || xJ, nt = gt, Er = Ye.find(($r) => $r.id === r);
      ie(!0), z == null || z(Re, Er, ft);
      const At = ($r) => {
        ie(!1), V == null || V($r, Er, ft);
      };
      E7({
        event: Re,
        handleId: De,
        nodeId: ke,
        onConnect: ($r) => k == null ? void 0 : k(Er, $r),
        isTarget: nt,
        getState: Q.getState,
        setState: Q.setState,
        isValidConnection: Bt,
        edgeUpdaterType: ft,
        onReconnectEnd: At
      });
    }, gr = (Re) => Pt(Re, !0), Kt = (Re) => Pt(Re, !1), _e = () => Z(!0), re = () => Z(!1), ve = !M && !o, Ae = (Re) => {
      var gt;
      if (!U && v7.includes(Re.key) && M) {
        const { unselectNodesAndEdges: Ye, addSelectedEdges: we, edges: ke } = Q.getState();
        Re.key === "Escape" ? ((gt = $.current) == null || gt.blur(), Ye({ edges: [ke.find((ft) => ft.id === r)] })) : we([r]);
      }
    };
    return se.createElement(
      "g",
      { className: cn([
        "react-flow__edge",
        `react-flow__edge-${i}`,
        n,
        { selected: l, animated: u, inactive: ve, updating: Y }
      ]), onClick: oe, onDoubleClick: de, onContextMenu: Pe, onMouseEnter: Ke, onMouseMove: it, onMouseLeave: Dt, onKeyDown: W ? Ae : void 0, tabIndex: W ? 0 : void 0, role: W ? "button" : "img", "data-testid": `rf__edge-${r}`, "aria-label": G === null ? void 0 : G || `Edge from ${m} to ${y}`, "aria-describedby": W ? `${z7}-${H}` : void 0, ref: $ },
      !K && se.createElement(e, { id: r, source: m, target: y, selected: l, animated: u, label: c, labelStyle: f, labelShowBg: d, labelBgStyle: h, labelBgPadding: p, labelBgBorderRadius: v, data: a, style: g, sourceX: b, sourceY: w, targetX: _, targetY: S, sourcePosition: C, targetPosition: A, sourceHandleId: N, targetHandleId: R, markerStart: ce, markerEnd: te, pathOptions: q, interactionWidth: J }),
      X && se.createElement(
        se.Fragment,
        null,
        (X === "source" || X === !0) && se.createElement(sE, { position: C, centerX: b, centerY: w, radius: P, onMouseDown: gr, onMouseEnter: _e, onMouseOut: re, type: "source" }),
        (X === "target" || X === !0) && se.createElement(sE, { position: A, centerX: _, centerY: S, radius: P, onMouseDown: Kt, onMouseEnter: _e, onMouseOut: re, type: "target" })
      )
    );
  };
  return t.displayName = "EdgeWrapper", Ue(t);
};
function bJ(e) {
  const t = {
    default: du(e.default || Hg),
    straight: du(e.bezier || LS),
    step: du(e.step || IS),
    smoothstep: du(e.step || xy),
    simplebezier: du(e.simplebezier || NS)
  }, r = {}, n = Object.keys(e).filter((i) => !["default", "bezier"].includes(i)).reduce((i, a) => (i[a] = du(e[a] || Hg), i), r);
  return {
    ...t,
    ...n
  };
}
function lE(e, t, r = null) {
  const n = ((r == null ? void 0 : r.x) || 0) + t.x, i = ((r == null ? void 0 : r.y) || 0) + t.y, a = (r == null ? void 0 : r.width) || t.width, o = (r == null ? void 0 : r.height) || t.height;
  switch (e) {
    case qe.Top:
      return {
        x: n + a / 2,
        y: i
      };
    case qe.Right:
      return {
        x: n + a,
        y: i + o / 2
      };
    case qe.Bottom:
      return {
        x: n + a / 2,
        y: i + o
      };
    case qe.Left:
      return {
        x: n,
        y: i + o / 2
      };
  }
}
function uE(e, t) {
  return e ? e.length === 1 || !t ? e[0] : t && e.find((r) => r.id === t) || null : null;
}
const wJ = (e, t, r, n, i, a) => {
  const o = lE(r, e, t), s = lE(a, n, i);
  return {
    sourceX: o.x,
    sourceY: o.y,
    targetX: s.x,
    targetY: s.y
  };
};
function _J({ sourcePos: e, targetPos: t, sourceWidth: r, sourceHeight: n, targetWidth: i, targetHeight: a, width: o, height: s, transform: l }) {
  const u = {
    x: Math.min(e.x, t.x),
    y: Math.min(e.y, t.y),
    x2: Math.max(e.x + r, t.x + i),
    y2: Math.max(e.y + n, t.y + a)
  };
  u.x === u.x2 && (u.x2 += 1), u.y === u.y2 && (u.y2 += 1);
  const c = DS({
    x: (0 - l[0]) / l[2],
    y: (0 - l[1]) / l[2],
    width: o / l[2],
    height: s / l[2]
  }), f = Math.max(0, Math.min(c.x2, u.x2) - Math.max(c.x, u.x)), d = Math.max(0, Math.min(c.y2, u.y2) - Math.max(c.y, u.y));
  return Math.ceil(f * d) > 0;
}
function cE(e) {
  var n, i, a, o, s;
  const t = ((n = e == null ? void 0 : e[lr]) == null ? void 0 : n.handleBounds) || null, r = t && (e == null ? void 0 : e.width) && (e == null ? void 0 : e.height) && typeof ((i = e == null ? void 0 : e.positionAbsolute) == null ? void 0 : i.x) < "u" && typeof ((a = e == null ? void 0 : e.positionAbsolute) == null ? void 0 : a.y) < "u";
  return [
    {
      x: ((o = e == null ? void 0 : e.positionAbsolute) == null ? void 0 : o.x) || 0,
      y: ((s = e == null ? void 0 : e.positionAbsolute) == null ? void 0 : s.y) || 0,
      width: (e == null ? void 0 : e.width) || 0,
      height: (e == null ? void 0 : e.height) || 0
    },
    t,
    !!r
  ];
}
const SJ = [{ level: 0, isMaxLevel: !0, edges: [] }];
function CJ(e, t, r = !1) {
  let n = -1;
  const i = e.reduce((o, s) => {
    var c, f;
    const l = Zn(s.zIndex);
    let u = l ? s.zIndex : 0;
    if (r) {
      const d = t.get(s.target), h = t.get(s.source), p = s.selected || (d == null ? void 0 : d.selected) || (h == null ? void 0 : h.selected), v = Math.max(((c = h == null ? void 0 : h[lr]) == null ? void 0 : c.z) || 0, ((f = d == null ? void 0 : d[lr]) == null ? void 0 : f.z) || 0, 1e3);
      u = (l ? s.zIndex : 0) + (p ? v : 0);
    }
    return o[u] ? o[u].push(s) : o[u] = [s], n = u > n ? u : n, o;
  }, {}), a = Object.entries(i).map(([o, s]) => {
    const l = +o;
    return {
      edges: s,
      level: l,
      isMaxLevel: l === n
    };
  });
  return a.length === 0 ? SJ : a;
}
function TJ(e, t, r) {
  const n = nr(Te((i) => e ? i.edges.filter((a) => {
    const o = t.get(a.source), s = t.get(a.target);
    return (o == null ? void 0 : o.width) && (o == null ? void 0 : o.height) && (s == null ? void 0 : s.width) && (s == null ? void 0 : s.height) && _J({
      sourcePos: o.positionAbsolute || { x: 0, y: 0 },
      targetPos: s.positionAbsolute || { x: 0, y: 0 },
      sourceWidth: o.width,
      sourceHeight: o.height,
      targetWidth: s.width,
      targetHeight: s.height,
      width: i.width,
      height: i.height,
      transform: i.transform
    });
  }) : i.edges, [e, t]));
  return CJ(n, t, r);
}
const AJ = ({ color: e = "none", strokeWidth: t = 1 }) => se.createElement("polyline", { style: {
  stroke: e,
  strokeWidth: t
}, strokeLinecap: "round", strokeLinejoin: "round", fill: "none", points: "-5,-4 0,0 -5,4" }), MJ = ({ color: e = "none", strokeWidth: t = 1 }) => se.createElement("polyline", { style: {
  stroke: e,
  fill: e,
  strokeWidth: t
}, strokeLinecap: "round", strokeLinejoin: "round", points: "-5,-4 0,0 -5,4 -5,-4" }), fE = {
  [$g.Arrow]: AJ,
  [$g.ArrowClosed]: MJ
};
function EJ(e) {
  const t = Lr();
  return Gt(() => {
    var i, a;
    return Object.prototype.hasOwnProperty.call(fE, e) ? fE[e] : ((a = (i = t.getState()).onError) == null || a.call(i, "009", Ei.error009(e)), null);
  }, [e]);
}
const DJ = ({ id: e, type: t, color: r, width: n = 12.5, height: i = 12.5, markerUnits: a = "strokeWidth", strokeWidth: o, orient: s = "auto-start-reverse" }) => {
  const l = EJ(t);
  return l ? se.createElement(
    "marker",
    { className: "react-flow__arrowhead", id: e, markerWidth: `${n}`, markerHeight: `${i}`, viewBox: "-10 -10 20 20", markerUnits: a, orient: s, refX: "0", refY: "0" },
    se.createElement(l, { color: r, strokeWidth: o })
  ) : null;
}, NJ = ({ defaultColor: e, rfId: t }) => (r) => {
  const n = [];
  return r.edges.reduce((i, a) => ([a.markerStart, a.markerEnd].forEach((o) => {
    if (o && typeof o == "object") {
      const s = M2(o, t);
      n.includes(s) || (i.push({ id: s, color: o.color || e, ...o }), n.push(s));
    }
  }), i), []).sort((i, a) => i.id.localeCompare(a.id));
}, K7 = ({ defaultColor: e, rfId: t }) => {
  const r = nr(
    Te(NJ({ defaultColor: e, rfId: t }), [e, t]),
    // the id includes all marker options, so we just need to look at that part of the marker
    (n, i) => !(n.length !== i.length || n.some((a, o) => a.id !== i[o].id))
  );
  return se.createElement("defs", null, r.map((n) => se.createElement(DJ, { id: n.id, key: n.id, type: n.type, color: n.color, width: n.width, height: n.height, markerUnits: n.markerUnits, strokeWidth: n.strokeWidth, orient: n.orient })));
};
K7.displayName = "MarkerDefinitions";
var IJ = Ue(K7);
const LJ = (e) => ({
  nodesConnectable: e.nodesConnectable,
  edgesFocusable: e.edgesFocusable,
  edgesUpdatable: e.edgesUpdatable,
  elementsSelectable: e.elementsSelectable,
  width: e.width,
  height: e.height,
  connectionMode: e.connectionMode,
  nodeInternals: e.nodeInternals,
  onError: e.onError
}), q7 = ({ defaultMarkerColor: e, onlyRenderVisibleElements: t, elevateEdgesOnSelect: r, rfId: n, edgeTypes: i, noPanClassName: a, onEdgeContextMenu: o, onEdgeMouseEnter: s, onEdgeMouseMove: l, onEdgeMouseLeave: u, onEdgeClick: c, onEdgeDoubleClick: f, onReconnect: d, onReconnectStart: h, onReconnectEnd: p, reconnectRadius: v, children: g, disableKeyboardA11y: m }) => {
  const { edgesFocusable: y, edgesUpdatable: b, elementsSelectable: w, width: _, height: S, connectionMode: C, nodeInternals: A, onError: M } = nr(LJ, Or), D = TJ(t, A, r);
  return _ ? se.createElement(
    se.Fragment,
    null,
    D.map(({ level: N, edges: R, isMaxLevel: O }) => se.createElement(
      "svg",
      { key: N, style: { zIndex: N }, width: _, height: S, className: "react-flow__edges react-flow__container" },
      O && se.createElement(IJ, { defaultColor: e, rfId: n }),
      se.createElement("g", null, R.map((E) => {
        const [L, I, P] = cE(A.get(E.source)), [k, z, V] = cE(A.get(E.target));
        if (!P || !V)
          return null;
        let B = E.type || "default";
        i[B] || (M == null || M("011", Ei.error011(B)), B = "default");
        const F = i[B] || i.default, H = C === Rl.Strict ? z.target : (z.target ?? []).concat(z.source ?? []), G = uE(I.source, E.sourceHandle), W = uE(H, E.targetHandle), X = (G == null ? void 0 : G.position) || qe.Bottom, q = (W == null ? void 0 : W.position) || qe.Top, J = !!(E.focusable || y && typeof E.focusable > "u"), U = E.reconnectable || E.updatable, $ = typeof d < "u" && (U || b && typeof U > "u");
        if (!G || !W)
          return M == null || M("008", Ei.error008(G, E)), null;
        const { sourceX: Y, sourceY: Z, targetX: K, targetY: ie } = wJ(L, G, X, k, W, q);
        return se.createElement(F, { key: E.id, id: E.id, className: cn([E.className, a]), type: B, data: E.data, selected: !!E.selected, animated: !!E.animated, hidden: !!E.hidden, label: E.label, labelStyle: E.labelStyle, labelShowBg: E.labelShowBg, labelBgStyle: E.labelBgStyle, labelBgPadding: E.labelBgPadding, labelBgBorderRadius: E.labelBgBorderRadius, style: E.style, source: E.source, target: E.target, sourceHandleId: E.sourceHandle, targetHandleId: E.targetHandle, markerEnd: E.markerEnd, markerStart: E.markerStart, sourceX: Y, sourceY: Z, targetX: K, targetY: ie, sourcePosition: X, targetPosition: q, elementsSelectable: w, onContextMenu: o, onMouseEnter: s, onMouseMove: l, onMouseLeave: u, onClick: c, onEdgeDoubleClick: f, onReconnect: d, onReconnectStart: h, onReconnectEnd: p, reconnectRadius: v, rfId: n, ariaLabel: E.ariaLabel, isFocusable: J, isReconnectable: $, pathOptions: "pathOptions" in E ? E.pathOptions : void 0, interactionWidth: E.interactionWidth, disableKeyboardA11y: m });
      }))
    )),
    g
  ) : null;
};
q7.displayName = "EdgeRenderer";
var RJ = Ue(q7);
const PJ = (e) => `translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;
function kJ({ children: e }) {
  const t = nr(PJ);
  return se.createElement("div", { className: "react-flow__viewport react-flow__container", style: { transform: t } }, e);
}
function OJ(e) {
  const t = zS(), r = Ve(!1);
  Oe(() => {
    !r.current && t.viewportInitialized && e && (setTimeout(() => e(t), 1), r.current = !0);
  }, [e, t.viewportInitialized]);
}
const zJ = {
  [qe.Left]: qe.Right,
  [qe.Right]: qe.Left,
  [qe.Top]: qe.Bottom,
  [qe.Bottom]: qe.Top
}, J7 = ({ nodeId: e, handleType: t, style: r, type: n = Po.Bezier, CustomComponent: i, connectionStatus: a }) => {
  var S, C, A;
  const { fromNode: o, handleId: s, toX: l, toY: u, connectionMode: c } = nr(Te((M) => ({
    fromNode: M.nodeInternals.get(e),
    handleId: M.connectionHandleId,
    toX: (M.connectionPosition.x - M.transform[0]) / M.transform[2],
    toY: (M.connectionPosition.y - M.transform[1]) / M.transform[2],
    connectionMode: M.connectionMode
  }), [e]), Or), f = (S = o == null ? void 0 : o[lr]) == null ? void 0 : S.handleBounds;
  let d = f == null ? void 0 : f[t];
  if (c === Rl.Loose && (d = d || (f == null ? void 0 : f[t === "source" ? "target" : "source"])), !o || !d)
    return null;
  const h = s ? d.find((M) => M.id === s) : d[0], p = h ? h.x + h.width / 2 : (o.width ?? 0) / 2, v = h ? h.y + h.height / 2 : o.height ?? 0, g = (((C = o.positionAbsolute) == null ? void 0 : C.x) ?? 0) + p, m = (((A = o.positionAbsolute) == null ? void 0 : A.y) ?? 0) + v, y = h == null ? void 0 : h.position, b = y ? zJ[y] : null;
  if (!y || !b)
    return null;
  if (i)
    return se.createElement(i, { connectionLineType: n, connectionLineStyle: r, fromNode: o, fromHandle: h, fromX: g, fromY: m, toX: l, toY: u, fromPosition: y, toPosition: b, connectionStatus: a });
  let w = "";
  const _ = {
    sourceX: g,
    sourceY: m,
    sourcePosition: y,
    targetX: l,
    targetY: u,
    targetPosition: b
  };
  return n === Po.Bezier ? [w] = w7(_) : n === Po.Step ? [w] = A2({
    ..._,
    borderRadius: 0
  }) : n === Po.SmoothStep ? [w] = A2(_) : n === Po.SimpleBezier ? [w] = b7(_) : w = `M${g},${m} ${l},${u}`, se.createElement("path", { d: w, fill: "none", className: "react-flow__connection-path", style: r });
};
J7.displayName = "ConnectionLine";
const jJ = (e) => ({
  nodeId: e.connectionNodeId,
  handleType: e.connectionHandleType,
  nodesConnectable: e.nodesConnectable,
  connectionStatus: e.connectionStatus,
  width: e.width,
  height: e.height
});
function VJ({ containerStyle: e, style: t, type: r, component: n }) {
  const { nodeId: i, handleType: a, nodesConnectable: o, width: s, height: l, connectionStatus: u } = nr(jJ, Or);
  return !(i && a && s && o) ? null : se.createElement(
    "svg",
    { style: e, width: s, height: l, className: "react-flow__edges react-flow__connectionline react-flow__container" },
    se.createElement(
      "g",
      { className: cn(["react-flow__connection", u]) },
      se.createElement(J7, { nodeId: i, handleType: a, style: t, type: r, CustomComponent: n, connectionStatus: u })
    )
  );
}
function dE(e, t) {
  const r = Ve(null), n = Lr();
  return Gt(() => {
    var a, o;
    if (process.env.NODE_ENV === "development") {
      const s = Object.keys(e);
      Or(r.current, s) && ((o = (a = n.getState()).onError) == null || o.call(a, "002", Ei.error002())), r.current = s;
    }
    return t(e);
  }, [e]);
}
const Q7 = ({ nodeTypes: e, edgeTypes: t, onMove: r, onMoveStart: n, onMoveEnd: i, onInit: a, onNodeClick: o, onEdgeClick: s, onNodeDoubleClick: l, onEdgeDoubleClick: u, onNodeMouseEnter: c, onNodeMouseMove: f, onNodeMouseLeave: d, onNodeContextMenu: h, onSelectionContextMenu: p, onSelectionStart: v, onSelectionEnd: g, connectionLineType: m, connectionLineStyle: y, connectionLineComponent: b, connectionLineContainerStyle: w, selectionKeyCode: _, selectionOnDrag: S, selectionMode: C, multiSelectionKeyCode: A, panActivationKeyCode: M, zoomActivationKeyCode: D, deleteKeyCode: N, onlyRenderVisibleElements: R, elementsSelectable: O, selectNodesOnDrag: E, defaultViewport: L, translateExtent: I, minZoom: P, maxZoom: k, preventScrolling: z, defaultMarkerColor: V, zoomOnScroll: B, zoomOnPinch: F, panOnScroll: H, panOnScrollSpeed: G, panOnScrollMode: W, zoomOnDoubleClick: X, panOnDrag: q, onPaneClick: J, onPaneMouseEnter: U, onPaneMouseMove: $, onPaneMouseLeave: Y, onPaneScroll: Z, onPaneContextMenu: K, onEdgeContextMenu: ie, onEdgeMouseEnter: Q, onEdgeMouseMove: ce, onEdgeMouseLeave: te, onReconnect: oe, onReconnectStart: de, onReconnectEnd: Pe, reconnectRadius: Ke, noDragClassName: it, noWheelClassName: Dt, noPanClassName: Pt, elevateEdgesOnSelect: gr, disableKeyboardA11y: Kt, nodeOrigin: _e, nodeExtent: re, rfId: ve }) => {
  const Ae = dE(e, hJ), Re = dE(t, bJ);
  return OJ(a), se.createElement(
    fJ,
    { onPaneClick: J, onPaneMouseEnter: U, onPaneMouseMove: $, onPaneMouseLeave: Y, onPaneContextMenu: K, onPaneScroll: Z, deleteKeyCode: N, selectionKeyCode: _, selectionOnDrag: S, selectionMode: C, onSelectionStart: v, onSelectionEnd: g, multiSelectionKeyCode: A, panActivationKeyCode: M, zoomActivationKeyCode: D, elementsSelectable: O, onMove: r, onMoveStart: n, onMoveEnd: i, zoomOnScroll: B, zoomOnPinch: F, zoomOnDoubleClick: X, panOnScroll: H, panOnScrollSpeed: G, panOnScrollMode: W, panOnDrag: q, defaultViewport: L, translateExtent: I, minZoom: P, maxZoom: k, onSelectionContextMenu: p, preventScrolling: z, noDragClassName: it, noWheelClassName: Dt, noPanClassName: Pt, disableKeyboardA11y: Kt },
    se.createElement(
      kJ,
      null,
      se.createElement(
        RJ,
        { edgeTypes: Re, onEdgeClick: s, onEdgeDoubleClick: u, onlyRenderVisibleElements: R, onEdgeContextMenu: ie, onEdgeMouseEnter: Q, onEdgeMouseMove: ce, onEdgeMouseLeave: te, onReconnect: oe, onReconnectStart: de, onReconnectEnd: Pe, reconnectRadius: Ke, defaultMarkerColor: V, noPanClassName: Pt, elevateEdgesOnSelect: !!gr, disableKeyboardA11y: Kt, rfId: ve },
        se.createElement(VJ, { style: y, type: m, component: b, containerStyle: w })
      ),
      se.createElement("div", { className: "react-flow__edgelabel-renderer" }),
      se.createElement(gJ, { nodeTypes: Ae, onNodeClick: o, onNodeDoubleClick: l, onNodeMouseEnter: c, onNodeMouseMove: f, onNodeMouseLeave: d, onNodeContextMenu: h, selectNodesOnDrag: E, onlyRenderVisibleElements: R, noPanClassName: Pt, noDragClassName: it, disableKeyboardA11y: Kt, nodeOrigin: _e, nodeExtent: re, rfId: ve })
    )
  );
};
Q7.displayName = "GraphView";
var BJ = Ue(Q7);
const I2 = [
  [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],
  [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]
], ho = {
  rfId: "1",
  width: 0,
  height: 0,
  transform: [0, 0, 1],
  nodeInternals: /* @__PURE__ */ new Map(),
  edges: [],
  onNodesChange: null,
  onEdgesChange: null,
  hasDefaultNodes: !1,
  hasDefaultEdges: !1,
  d3Zoom: null,
  d3Selection: null,
  d3ZoomHandler: void 0,
  minZoom: 0.5,
  maxZoom: 2,
  translateExtent: I2,
  nodeExtent: I2,
  nodesSelectionActive: !1,
  userSelectionActive: !1,
  userSelectionRect: null,
  connectionNodeId: null,
  connectionHandleId: null,
  connectionHandleType: "source",
  connectionPosition: { x: 0, y: 0 },
  connectionStatus: null,
  connectionMode: Rl.Strict,
  domNode: null,
  paneDragging: !1,
  noPanClassName: "nopan",
  nodeOrigin: [0, 0],
  nodeDragThreshold: 0,
  snapGrid: [15, 15],
  snapToGrid: !1,
  nodesDraggable: !0,
  nodesConnectable: !0,
  nodesFocusable: !0,
  edgesFocusable: !0,
  edgesUpdatable: !0,
  elementsSelectable: !0,
  elevateNodesOnSelect: !0,
  fitViewOnInit: !1,
  fitViewOnInitDone: !1,
  fitViewOnInitOptions: void 0,
  onSelectionChange: [],
  multiSelectionActive: !1,
  connectionStartHandle: null,
  connectionEndHandle: null,
  connectionClickStartHandle: null,
  connectOnClick: !0,
  ariaLiveMessage: "",
  autoPanOnConnect: !0,
  autoPanOnNodeDrag: !0,
  connectionRadius: 20,
  onError: g7,
  isValidConnection: void 0
}, FJ = () => EY((e, t) => ({
  ...ho,
  setNodes: (r) => {
    const { nodeInternals: n, nodeOrigin: i, elevateNodesOnSelect: a } = t();
    e({ nodeInternals: t1(r, n, i, a) });
  },
  getNodes: () => Array.from(t().nodeInternals.values()),
  setEdges: (r) => {
    const { defaultEdgeOptions: n = {} } = t();
    e({ edges: r.map((i) => ({ ...n, ...i })) });
  },
  setDefaultNodesAndEdges: (r, n) => {
    const i = typeof r < "u", a = typeof n < "u", o = i ? t1(r, /* @__PURE__ */ new Map(), t().nodeOrigin, t().elevateNodesOnSelect) : /* @__PURE__ */ new Map();
    e({ nodeInternals: o, edges: a ? n : [], hasDefaultNodes: i, hasDefaultEdges: a });
  },
  updateNodeDimensions: (r) => {
    const { onNodesChange: n, nodeInternals: i, fitViewOnInit: a, fitViewOnInitDone: o, fitViewOnInitOptions: s, domNode: l, nodeOrigin: u } = t(), c = l == null ? void 0 : l.querySelector(".react-flow__viewport");
    if (!c)
      return;
    const f = window.getComputedStyle(c), { m22: d } = new window.DOMMatrixReadOnly(f.transform), h = r.reduce((v, g) => {
      const m = i.get(g.id);
      if (m != null && m.hidden)
        i.set(m.id, {
          ...m,
          [lr]: {
            ...m[lr],
            // we need to reset the handle bounds when the node is hidden
            // in order to force a new observation when the node is shown again
            handleBounds: void 0
          }
        });
      else if (m) {
        const y = MS(g.nodeElement);
        !!(y.width && y.height && (m.width !== y.width || m.height !== y.height || g.forceUpdate)) && (i.set(m.id, {
          ...m,
          [lr]: {
            ...m[lr],
            handleBounds: {
              source: aE(".source", g.nodeElement, d, u),
              target: aE(".target", g.nodeElement, d, u)
            }
          },
          ...y
        }), v.push({
          id: m.id,
          type: "dimensions",
          dimensions: y
        }));
      }
      return v;
    }, []);
    V7(i, u);
    const p = o || a && !o && B7(t, { initial: !0, ...s });
    e({ nodeInternals: new Map(i), fitViewOnInitDone: p }), (h == null ? void 0 : h.length) > 0 && (n == null || n(h));
  },
  updateNodePositions: (r, n = !0, i = !1) => {
    const { triggerNodeChanges: a } = t(), o = r.map((s) => {
      const l = {
        id: s.id,
        type: "position",
        dragging: i
      };
      return n && (l.positionAbsolute = s.positionAbsolute, l.position = s.position), l;
    });
    a(o);
  },
  triggerNodeChanges: (r) => {
    const { onNodesChange: n, nodeInternals: i, hasDefaultNodes: a, nodeOrigin: o, getNodes: s, elevateNodesOnSelect: l } = t();
    if (r != null && r.length) {
      if (a) {
        const u = $7(r, s()), c = t1(u, i, o, l);
        e({ nodeInternals: c });
      }
      n == null || n(r);
    }
  },
  addSelectedNodes: (r) => {
    const { multiSelectionActive: n, edges: i, getNodes: a } = t();
    let o, s = null;
    n ? o = r.map((l) => No(l, !0)) : (o = Qu(a(), r), s = Qu(i, [])), jp({
      changedNodes: o,
      changedEdges: s,
      get: t,
      set: e
    });
  },
  addSelectedEdges: (r) => {
    const { multiSelectionActive: n, edges: i, getNodes: a } = t();
    let o, s = null;
    n ? o = r.map((l) => No(l, !0)) : (o = Qu(i, r), s = Qu(a(), [])), jp({
      changedNodes: s,
      changedEdges: o,
      get: t,
      set: e
    });
  },
  unselectNodesAndEdges: ({ nodes: r, edges: n } = {}) => {
    const { edges: i, getNodes: a } = t(), o = r || a(), s = n || i, l = o.map((c) => (c.selected = !1, No(c.id, !1))), u = s.map((c) => No(c.id, !1));
    jp({
      changedNodes: l,
      changedEdges: u,
      get: t,
      set: e
    });
  },
  setMinZoom: (r) => {
    const { d3Zoom: n, maxZoom: i } = t();
    n == null || n.scaleExtent([r, i]), e({ minZoom: r });
  },
  setMaxZoom: (r) => {
    const { d3Zoom: n, minZoom: i } = t();
    n == null || n.scaleExtent([i, r]), e({ maxZoom: r });
  },
  setTranslateExtent: (r) => {
    var n;
    (n = t().d3Zoom) == null || n.translateExtent(r), e({ translateExtent: r });
  },
  resetSelectedElements: () => {
    const { edges: r, getNodes: n } = t(), a = n().filter((s) => s.selected).map((s) => No(s.id, !1)), o = r.filter((s) => s.selected).map((s) => No(s.id, !1));
    jp({
      changedNodes: a,
      changedEdges: o,
      get: t,
      set: e
    });
  },
  setNodeExtent: (r) => {
    const { nodeInternals: n } = t();
    n.forEach((i) => {
      i.positionAbsolute = ES(i.position, r);
    }), e({
      nodeExtent: r,
      nodeInternals: new Map(n)
    });
  },
  panBy: (r) => {
    const { transform: n, width: i, height: a, d3Zoom: o, d3Selection: s, translateExtent: l } = t();
    if (!o || !s || !r.x && !r.y)
      return !1;
    const u = Wo.translate(n[0] + r.x, n[1] + r.y).scale(n[2]), c = [
      [0, 0],
      [i, a]
    ], f = o == null ? void 0 : o.constrain()(u, c, l);
    return o.transform(s, f), n[0] !== f.x || n[1] !== f.y || n[2] !== f.k;
  },
  cancelConnection: () => e({
    connectionNodeId: ho.connectionNodeId,
    connectionHandleId: ho.connectionHandleId,
    connectionHandleType: ho.connectionHandleType,
    connectionStatus: ho.connectionStatus,
    connectionStartHandle: ho.connectionStartHandle,
    connectionEndHandle: ho.connectionEndHandle
  }),
  reset: () => e({ ...ho })
}), Object.is), ek = ({ children: e }) => {
  const t = Ve(null);
  return t.current || (t.current = FJ()), se.createElement(sq, { value: t.current }, e);
};
ek.displayName = "ReactFlowProvider";
const tk = ({ children: e }) => oo(yy) ? se.createElement(se.Fragment, null, e) : se.createElement(ek, null, e);
tk.displayName = "ReactFlowWrapper";
const $J = {
  input: L7,
  default: D2,
  output: P7,
  group: OS
}, HJ = {
  default: Hg,
  straight: LS,
  step: IS,
  smoothstep: xy,
  simplebezier: NS
}, GJ = [0, 0], WJ = [15, 15], UJ = { x: 0, y: 0, zoom: 1 }, YJ = {
  width: "100%",
  height: "100%",
  overflow: "hidden",
  position: "relative",
  zIndex: 0
}, rk = Nt(({ nodes: e, edges: t, defaultNodes: r, defaultEdges: n, className: i, nodeTypes: a = $J, edgeTypes: o = HJ, onNodeClick: s, onEdgeClick: l, onInit: u, onMove: c, onMoveStart: f, onMoveEnd: d, onConnect: h, onConnectStart: p, onConnectEnd: v, onClickConnectStart: g, onClickConnectEnd: m, onNodeMouseEnter: y, onNodeMouseMove: b, onNodeMouseLeave: w, onNodeContextMenu: _, onNodeDoubleClick: S, onNodeDragStart: C, onNodeDrag: A, onNodeDragStop: M, onNodesDelete: D, onEdgesDelete: N, onSelectionChange: R, onSelectionDragStart: O, onSelectionDrag: E, onSelectionDragStop: L, onSelectionContextMenu: I, onSelectionStart: P, onSelectionEnd: k, connectionMode: z = Rl.Strict, connectionLineType: V = Po.Bezier, connectionLineStyle: B, connectionLineComponent: F, connectionLineContainerStyle: H, deleteKeyCode: G = "Backspace", selectionKeyCode: W = "Shift", selectionOnDrag: X = !1, selectionMode: q = rh.Full, panActivationKeyCode: J = "Space", multiSelectionKeyCode: U = Fg() ? "Meta" : "Control", zoomActivationKeyCode: $ = Fg() ? "Meta" : "Control", snapToGrid: Y = !1, snapGrid: Z = WJ, onlyRenderVisibleElements: K = !1, selectNodesOnDrag: ie = !0, nodesDraggable: Q, nodesConnectable: ce, nodesFocusable: te, nodeOrigin: oe = GJ, edgesFocusable: de, edgesUpdatable: Pe, elementsSelectable: Ke, defaultViewport: it = UJ, minZoom: Dt = 0.5, maxZoom: Pt = 2, translateExtent: gr = I2, preventScrolling: Kt = !0, nodeExtent: _e, defaultMarkerColor: re = "#b1b1b7", zoomOnScroll: ve = !0, zoomOnPinch: Ae = !0, panOnScroll: Re = !1, panOnScrollSpeed: gt = 0.5, panOnScrollMode: Ye = ul.Free, zoomOnDoubleClick: we = !0, panOnDrag: ke = !0, onPaneClick: De, onPaneMouseEnter: ft, onPaneMouseMove: Bt, onPaneMouseLeave: nt, onPaneScroll: Er, onPaneContextMenu: At, children: Yt, onEdgeContextMenu: $r, onEdgeDoubleClick: xa, onEdgeMouseEnter: he, onEdgeMouseMove: Se, onEdgeMouseLeave: Be, onEdgeUpdate: ne, onEdgeUpdateStart: Me, onEdgeUpdateEnd: je, onReconnect: $e, onReconnectStart: Je, onReconnectEnd: ht, reconnectRadius: Qe = 10, edgeUpdaterRadius: mt = 10, onNodesChange: Lt, onEdgesChange: Ht, noDragClassName: dt = "nodrag", noWheelClassName: fi = "nowheel", noPanClassName: ki = "nopan", fitView: fo = !1, fitViewOptions: Rn, connectOnClick: bs = !0, attributionPosition: au, proOptions: ou, defaultEdgeOptions: B0, elevateNodesOnSelect: F0 = !0, elevateEdgesOnSelect: $0 = !1, disableKeyboardA11y: su = !1, autoPanOnConnect: Ep = !0, autoPanOnNodeDrag: oG = !0, connectionRadius: sG = 20, isValidConnection: lG, onError: uG, style: cG, id: dM, nodeDragThreshold: fG, ...dG }, hG) => {
  const H0 = dM || "1";
  return se.createElement(
    "div",
    { ...dG, style: { ...cG, ...YJ }, ref: hG, className: cn(["react-flow", i]), "data-testid": "rf__wrapper", id: dM },
    se.createElement(
      tk,
      null,
      se.createElement(BJ, { onInit: u, onMove: c, onMoveStart: f, onMoveEnd: d, onNodeClick: s, onEdgeClick: l, onNodeMouseEnter: y, onNodeMouseMove: b, onNodeMouseLeave: w, onNodeContextMenu: _, onNodeDoubleClick: S, nodeTypes: a, edgeTypes: o, connectionLineType: V, connectionLineStyle: B, connectionLineComponent: F, connectionLineContainerStyle: H, selectionKeyCode: W, selectionOnDrag: X, selectionMode: q, deleteKeyCode: G, multiSelectionKeyCode: U, panActivationKeyCode: J, zoomActivationKeyCode: $, onlyRenderVisibleElements: K, selectNodesOnDrag: ie, defaultViewport: it, translateExtent: gr, minZoom: Dt, maxZoom: Pt, preventScrolling: Kt, zoomOnScroll: ve, zoomOnPinch: Ae, zoomOnDoubleClick: we, panOnScroll: Re, panOnScrollSpeed: gt, panOnScrollMode: Ye, panOnDrag: ke, onPaneClick: De, onPaneMouseEnter: ft, onPaneMouseMove: Bt, onPaneMouseLeave: nt, onPaneScroll: Er, onPaneContextMenu: At, onSelectionContextMenu: I, onSelectionStart: P, onSelectionEnd: k, onEdgeContextMenu: $r, onEdgeDoubleClick: xa, onEdgeMouseEnter: he, onEdgeMouseMove: Se, onEdgeMouseLeave: Be, onReconnect: $e ?? ne, onReconnectStart: Je ?? Me, onReconnectEnd: ht ?? je, reconnectRadius: Qe ?? mt, defaultMarkerColor: re, noDragClassName: dt, noWheelClassName: fi, noPanClassName: ki, elevateEdgesOnSelect: $0, rfId: H0, disableKeyboardA11y: su, nodeOrigin: oe, nodeExtent: _e }),
      se.createElement(zq, { nodes: e, edges: t, defaultNodes: r, defaultEdges: n, onConnect: h, onConnectStart: p, onConnectEnd: v, onClickConnectStart: g, onClickConnectEnd: m, nodesDraggable: Q, nodesConnectable: ce, nodesFocusable: te, edgesFocusable: de, edgesUpdatable: Pe, elementsSelectable: Ke, elevateNodesOnSelect: F0, minZoom: Dt, maxZoom: Pt, nodeExtent: _e, onNodesChange: Lt, onEdgesChange: Ht, snapToGrid: Y, snapGrid: Z, connectionMode: z, translateExtent: gr, connectOnClick: bs, defaultEdgeOptions: B0, fitView: fo, fitViewOptions: Rn, onNodesDelete: D, onEdgesDelete: N, onNodeDragStart: C, onNodeDrag: A, onNodeDragStop: M, onSelectionDrag: E, onSelectionDragStart: O, onSelectionDragStop: L, noPanClassName: ki, nodeOrigin: oe, rfId: H0, autoPanOnConnect: Ep, autoPanOnNodeDrag: oG, onError: uG, connectionRadius: sG, isValidConnection: lG, nodeDragThreshold: fG }),
      se.createElement(kq, { onSelectionChange: R }),
      Yt,
      se.createElement(uq, { proOptions: ou, position: au }),
      se.createElement($q, { rfId: H0, disableKeyboardA11y: su })
    )
  );
});
rk.displayName = "ReactFlow";
function ZJ() {
  return se.createElement(
    "svg",
    { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 32" },
    se.createElement("path", { d: "M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z" })
  );
}
function XJ() {
  return se.createElement(
    "svg",
    { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 5" },
    se.createElement("path", { d: "M0 0h32v4.2H0z" })
  );
}
function KJ() {
  return se.createElement(
    "svg",
    { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 32 30" },
    se.createElement("path", { d: "M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z" })
  );
}
function qJ() {
  return se.createElement(
    "svg",
    { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 25 32" },
    se.createElement("path", { d: "M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z" })
  );
}
function JJ() {
  return se.createElement(
    "svg",
    { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 25 32" },
    se.createElement("path", { d: "M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z" })
  );
}
const fd = ({ children: e, className: t, ...r }) => se.createElement("button", { type: "button", className: cn(["react-flow__controls-button", t]), ...r }, e);
fd.displayName = "ControlButton";
const QJ = (e) => ({
  isInteractive: e.nodesDraggable || e.nodesConnectable || e.elementsSelectable,
  minZoomReached: e.transform[2] <= e.minZoom,
  maxZoomReached: e.transform[2] >= e.maxZoom
}), nk = ({ style: e, showZoom: t = !0, showFitView: r = !0, showInteractive: n = !0, fitViewOptions: i, onZoomIn: a, onZoomOut: o, onFitView: s, onInteractiveChange: l, className: u, children: c, position: f = "bottom-left" }) => {
  const d = Lr(), [h, p] = Ze(!1), { isInteractive: v, minZoomReached: g, maxZoomReached: m } = nr(QJ, Or), { zoomIn: y, zoomOut: b, fitView: w } = zS();
  if (Oe(() => {
    p(!0);
  }, []), !h)
    return null;
  const _ = () => {
    y(), a == null || a();
  }, S = () => {
    b(), o == null || o();
  }, C = () => {
    w(i), s == null || s();
  }, A = () => {
    d.setState({
      nodesDraggable: !v,
      nodesConnectable: !v,
      elementsSelectable: !v
    }), l == null || l(!v);
  };
  return se.createElement(
    d7,
    { className: cn(["react-flow__controls", u]), position: f, style: e, "data-testid": "rf__controls" },
    t && se.createElement(
      se.Fragment,
      null,
      se.createElement(
        fd,
        { onClick: _, className: "react-flow__controls-zoomin", title: "zoom in", "aria-label": "zoom in", disabled: m },
        se.createElement(ZJ, null)
      ),
      se.createElement(
        fd,
        { onClick: S, className: "react-flow__controls-zoomout", title: "zoom out", "aria-label": "zoom out", disabled: g },
        se.createElement(XJ, null)
      )
    ),
    r && se.createElement(
      fd,
      { className: "react-flow__controls-fitview", onClick: C, title: "fit view", "aria-label": "fit view" },
      se.createElement(KJ, null)
    ),
    n && se.createElement(fd, { className: "react-flow__controls-interactive", onClick: A, title: "toggle interactivity", "aria-label": "toggle interactivity" }, v ? se.createElement(JJ, null) : se.createElement(qJ, null)),
    c
  );
};
nk.displayName = "Controls";
var eQ = Ue(nk), _i;
(function(e) {
  e.Lines = "lines", e.Dots = "dots", e.Cross = "cross";
})(_i || (_i = {}));
function tQ({ color: e, dimensions: t, lineWidth: r }) {
  return se.createElement("path", { stroke: e, strokeWidth: r, d: `M${t[0] / 2} 0 V${t[1]} M0 ${t[1] / 2} H${t[0]}` });
}
function rQ({ color: e, radius: t }) {
  return se.createElement("circle", { cx: t, cy: t, r: t, fill: e });
}
const nQ = {
  [_i.Dots]: "#91919a",
  [_i.Lines]: "#eee",
  [_i.Cross]: "#e2e2e2"
}, iQ = {
  [_i.Dots]: 1,
  [_i.Lines]: 1,
  [_i.Cross]: 6
}, aQ = (e) => ({ transform: e.transform, patternId: `pattern-${e.rfId}` });
function ik({
  id: e,
  variant: t = _i.Dots,
  // only used for dots and cross
  gap: r = 20,
  // only used for lines and cross
  size: n,
  lineWidth: i = 1,
  offset: a = 2,
  color: o,
  style: s,
  className: l
}) {
  const u = Ve(null), { transform: c, patternId: f } = nr(aQ, Or), d = o || nQ[t], h = n || iQ[t], p = t === _i.Dots, v = t === _i.Cross, g = Array.isArray(r) ? r : [r, r], m = [g[0] * c[2] || 1, g[1] * c[2] || 1], y = h * c[2], b = v ? [y, y] : m, w = p ? [y / a, y / a] : [b[0] / a, b[1] / a];
  return se.createElement(
    "svg",
    { className: cn(["react-flow__background", l]), style: {
      ...s,
      position: "absolute",
      width: "100%",
      height: "100%",
      top: 0,
      left: 0
    }, ref: u, "data-testid": "rf__background" },
    se.createElement("pattern", { id: f + e, x: c[0] % m[0], y: c[1] % m[1], width: m[0], height: m[1], patternUnits: "userSpaceOnUse", patternTransform: `translate(-${w[0]},-${w[1]})` }, p ? se.createElement(rQ, { color: d, radius: y / a }) : se.createElement(tQ, { dimensions: b, color: d, lineWidth: i })),
    se.createElement("rect", { x: "0", y: "0", width: "100%", height: "100%", fill: `url(#${f + e})` })
  );
}
ik.displayName = "Background";
var oQ = Ue(ik);
const sQ = 260, lQ = 96, uQ = 40, cQ = 40, fQ = (e) => {
  switch (e) {
    case "completed":
      return {
        border: "border-emerald-400",
        bg: "bg-amber-100",
        dot: "bg-emerald-500"
      };
    case "in-progress":
      return {
        border: "border-sky-400",
        bg: "bg-amber-50",
        dot: "bg-sky-500"
      };
    case "optional":
      return {
        border: "border-dashed border-slate-300",
        bg: "bg-surface",
        dot: "bg-slate-400"
      };
    case "todo":
    default:
      return {
        border: "border-slate-300",
        bg: "bg-amber-50",
        dot: "bg-slate-300"
      };
  }
}, hE = {
  width: 8,
  height: 8,
  borderRadius: 9999,
  background: "transparent",
  border: "none"
}, dQ = ({ data: e }) => {
  const t = !!(e.onClick || e.href), r = /* @__PURE__ */ x.jsxs(
    "div",
    {
      className: me(
        fe(
          "flex items-center gap-2 rounded-xl px-3 py-2 text-sm shadow-sm transition-colors",
          "border-2",
          e.statusClasses.border,
          e.statusClasses.bg,
          t && "cursor-pointer hover:bg-amber-200/70"
        )
      ),
      children: [
        /* @__PURE__ */ x.jsx(
          "span",
          {
            className: me(
              fe("h-3 w-3 flex-shrink-0 rounded-full border border-white", e.statusClasses.dot)
            )
          }
        ),
        /* @__PURE__ */ x.jsx("span", { className: "text-xs font-medium text-slate-900", children: e.label })
      ]
    }
  ), n = () => {
    var o;
    (o = e.onClick) == null || o.call(e, e);
  }, i = e.href ? "a" : "button", a = e.href ? {
    href: e.href,
    target: "_blank",
    rel: "noreferrer",
    type: void 0
  } : {
    type: "button"
  };
  return /* @__PURE__ */ x.jsxs(
    i,
    {
      ...a,
      onClick: n,
      className: "relative inline-flex items-stretch",
      children: [
        /* @__PURE__ */ x.jsx(
          Dc,
          {
            type: "target",
            position: qe.Left,
            style: hE,
            isConnectable: !1
          }
        ),
        /* @__PURE__ */ x.jsx(
          Dc,
          {
            type: "source",
            position: qe.Right,
            style: hE,
            isConnectable: !1
          }
        ),
        r
      ]
    }
  );
}, hQ = {
  roadmapNode: dQ
}, pQ = ({ config: e, onNodeClick: t, className: r, ...n }) => {
  const i = T.useMemo(() => e.nodes.map((h) => ({
    id: h.id,
    type: "roadmapNode",
    position: {
      x: uQ + h.column * sQ,
      y: cQ + h.row * lQ
    },
    data: {
      ...h,
      statusClasses: fQ(h.status),
      onClick: t
    }
  })), [e.nodes, t]), a = T.useMemo(() => e.edges.map((h, p) => ({
    id: `${h.from}-${h.to}-${p}`,
    source: h.from,
    target: h.to,
    type: "smoothstep",
    animated: !h.dashed,
    style: h.dashed ? { strokeDasharray: "4 4" } : void 0
  })), [e.edges]), [o, s] = T.useState(i), [l, u] = T.useState(a);
  T.useEffect(() => {
    s(i);
  }, [i]), T.useEffect(() => {
    u(a);
  }, [a]);
  const c = T.useCallback(
    (h) => s((p) => $7(h, p)),
    []
  ), f = T.useCallback(
    (h) => u((p) => rJ(h, p)),
    []
  ), d = me(
    fe("relative w-full h-[560px] overflow-hidden rounded-2xl bg-surface-alt p-4", r)
  );
  return /* @__PURE__ */ x.jsxs("div", { className: d, ...n, children: [
    e.title && /* @__PURE__ */ x.jsxs("div", { className: "mb-3", children: [
      /* @__PURE__ */ x.jsx("h2", { className: "text-lg font-semibold text-text-primary", children: e.title }),
      e.description && /* @__PURE__ */ x.jsx("p", { className: "mt-1 text-sm text-text-secondary", children: e.description })
    ] }),
    /* @__PURE__ */ x.jsx("div", { className: "h-[480px] rounded-xl bg-surface shadow-inner", children: /* @__PURE__ */ x.jsxs(
      rk,
      {
        nodes: o,
        edges: l,
        nodeTypes: hQ,
        onNodesChange: c,
        onEdgesChange: f,
        fitView: !0,
        nodesConnectable: !1,
        elementsSelectable: !1,
        panOnScroll: !0,
        panOnDrag: !0,
        zoomOnScroll: !0,
        children: [
          /* @__PURE__ */ x.jsx(oQ, { gap: 24, size: 1, color: "#e5e7eb" }),
          /* @__PURE__ */ x.jsx(eQ, { showInteractive: !1 })
        ]
      }
    ) })
  ] });
};
pQ.displayName = "RoadmapFlow";
const vQ = T.forwardRef(
  ({ className: e, items: t, current: r, onChange: n, direction: i = "horizontal", variant: a = "primary", ...o }, s) => {
    const u = {
      primary: {
        completed: "border-primary-600 bg-primary-600 text-white",
        current: "border-primary-600 bg-white text-primary-600"
      },
      success: {
        completed: "border-green-600 bg-green-600 text-white",
        current: "border-green-600 bg-white text-green-600"
      },
      warning: {
        completed: "border-amber-500 bg-amber-500 text-white",
        current: "border-amber-500 bg-white text-amber-600"
      },
      danger: {
        completed: "border-red-600 bg-red-600 text-white",
        current: "border-red-600 bg-white text-red-600"
      },
      info: {
        completed: "border-blue-600 bg-blue-600 text-white",
        current: "border-blue-600 bg-white text-blue-600"
      }
    }[a];
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: s,
        className: me(
          fe(
            "flex w-full",
            i === "vertical" ? "flex-col" : "flex-row items-start space-x-4",
            e
          )
        ),
        ...o,
        children: t.map((c, f) => {
          const d = f < r, h = f === r, p = f > r;
          return /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: fe(
                "flex flex-1 group",
                i === "vertical" ? "relative flex-row" : "flex-col items-center text-center"
              ),
              children: [
                i === "vertical" && f > 0 && /* @__PURE__ */ x.jsx("div", { className: "absolute left-4 top-0 bottom-1/2 w-[2px] -translate-x-1/2 bg-slate-200" }),
                i === "vertical" && f < t.length - 1 && /* @__PURE__ */ x.jsx("div", { className: "absolute left-4 top-1/2 bottom-0 w-[2px] -translate-x-1/2 bg-slate-200" }),
                i === "horizontal" && f !== 0 && /* @__PURE__ */ x.jsx(
                  "div",
                  {
                    className: fe(
                      "absolute top-5 left-[calc(-50%+20px)] right-[calc(50%+20px)] h-[2px] w-[calc(100%-40px)]",
                      // Complex connector logic omitted for simplicity, using simplified layout
                      "hidden"
                      // Simplified for this basic implementation, full connector logic needs absolute positioning relative to container
                    )
                  }
                ),
                /* @__PURE__ */ x.jsx(
                  "div",
                  {
                    className: fe(
                      "relative flex items-center",
                      i === "vertical" ? "pb-8" : ""
                    ),
                    children: /* @__PURE__ */ x.jsx(
                      "div",
                      {
                        className: me(
                          fe(
                            "relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 text-xs font-bold transition-colors duration-300",
                            d && u.completed,
                            h && !d && u.current,
                            p && "border-slate-300 bg-slate-50 text-slate-400"
                          )
                        ),
                        children: d ? /* @__PURE__ */ x.jsx(yS, { className: "h-4 w-4" }) : f + 1
                      }
                    )
                  }
                ),
                /* @__PURE__ */ x.jsxs(
                  "div",
                  {
                    className: fe(
                      "mt-2",
                      i === "vertical" ? "ml-4 mt-0" : ""
                    ),
                    children: [
                      /* @__PURE__ */ x.jsx(
                        "div",
                        {
                          className: fe(
                            "text-sm font-medium",
                            d || h ? "text-slate-900" : "text-slate-500"
                          ),
                          children: c.title
                        }
                      ),
                      c.description && /* @__PURE__ */ x.jsx("div", { className: "mt-0.5 text-xs text-slate-500", children: c.description })
                    ]
                  }
                ),
                i === "horizontal" && f !== t.length - 1 && /* @__PURE__ */ x.jsx("div", { className: fe(
                  "hidden md:block h-[2px] flex-1 bg-slate-200 mx-4 mt-4 self-start"
                ) })
              ]
            },
            f
          );
        })
      }
    );
  }
);
vQ.displayName = "Steps";
const gQ = T.forwardRef(
  ({
    className: e,
    index: t,
    title: r,
    description: n,
    status: i = "waiting",
    direction: a = "horizontal",
    isLast: o = !1,
    variant: s = "primary",
    ...l
  }, u) => {
    const c = i === "completed", f = i === "current", d = i === "waiting", p = {
      primary: {
        completed: "border-primary-600 bg-primary-600 text-white",
        current: "border-primary-600 bg-white text-primary-600"
      },
      success: {
        completed: "border-green-600 bg-green-600 text-white",
        current: "border-green-600 bg-white text-green-600"
      },
      warning: {
        completed: "border-amber-500 bg-amber-500 text-white",
        current: "border-amber-500 bg-white text-amber-600"
      },
      danger: {
        completed: "border-red-600 bg-red-600 text-white",
        current: "border-red-600 bg-white text-red-600"
      },
      info: {
        completed: "border-blue-600 bg-blue-600 text-white",
        current: "border-blue-600 bg-white text-blue-600"
      }
    }[s];
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: u,
        className: fe(
          "flex flex-1 group",
          a === "vertical" ? "flex-row" : "flex-col items-center text-center",
          e
        ),
        ...l,
        children: [
          /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: fe(
                "relative flex items-center",
                a === "vertical" ? "pb-8" : ""
              ),
              children: [
                /* @__PURE__ */ x.jsx(
                  "div",
                  {
                    className: me(
                      fe(
                        "relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 text-xs font-bold transition-colors duration-300",
                        c && p.completed,
                        f && !c && p.current,
                        d && "border-slate-300 bg-slate-50 text-slate-400"
                      )
                    ),
                    children: c ? /* @__PURE__ */ x.jsx(yS, { className: "h-4 w-4" }) : t + 1
                  }
                ),
                a === "vertical" && !o && /* @__PURE__ */ x.jsx("div", { className: "absolute left-4 top-8 h-full w-[2px] -translate-x-1/2 bg-slate-200 z-0" })
              ]
            }
          ),
          /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: fe("mt-2", a === "vertical" ? "ml-4 mt-0" : ""),
              children: [
                /* @__PURE__ */ x.jsx(
                  "div",
                  {
                    className: fe(
                      "text-sm font-medium",
                      c || f ? "text-slate-900" : "text-slate-500"
                    ),
                    children: r
                  }
                ),
                n && /* @__PURE__ */ x.jsx("div", { className: "mt-0.5 text-xs text-slate-500", children: n })
              ]
            }
          ),
          a === "horizontal" && !o && /* @__PURE__ */ x.jsx("div", { className: "hidden md:block h-[2px] flex-1 bg-slate-200 mx-4 mt-4 self-start" })
        ]
      }
    );
  }
);
gQ.displayName = "Step";
const mQ = T.forwardRef(
  ({
    className: e,
    current: t,
    total: r,
    canNext: n = !0,
    canPrev: i = !0,
    isSubmitting: a,
    labels: o,
    onPrev: s,
    onNext: l,
    onSubmit: u,
    ...c
  }, f) => {
    const d = t <= 0, h = t >= r - 1, p = () => {
      d || !i || s == null || s();
    }, v = () => {
      h || !n || l == null || l();
    }, g = () => {
      h && (u == null || u());
    }, m = (o == null ? void 0 : o.prev) ?? "Previous", y = (o == null ? void 0 : o.next) ?? "Next", b = (o == null ? void 0 : o.submit) ?? "Submit";
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: f,
        className: me(
          fe(
            "flex items-center justify-between gap-4",
            e
          )
        ),
        ...c,
        children: [
          /* @__PURE__ */ x.jsx("div", { className: "flex items-center gap-2 text-xs text-slate-500", children: /* @__PURE__ */ x.jsxs("span", { children: [
            "Step ",
            t + 1,
            " / ",
            r
          ] }) }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ x.jsx(
              xt,
              {
                type: "button",
                variant: "secondary",
                size: "sm",
                onClick: p,
                disabled: d || !i,
                children: m
              }
            ),
            !h && /* @__PURE__ */ x.jsx(
              xt,
              {
                type: "button",
                variant: "primary",
                size: "sm",
                onClick: v,
                disabled: !n,
                children: y
              }
            ),
            h && /* @__PURE__ */ x.jsx(
              xt,
              {
                type: "button",
                variant: "primary",
                size: "sm",
                onClick: g,
                isLoading: a,
                children: b
              }
            )
          ] })
        ]
      }
    );
  }
);
mQ.displayName = "StepNavigation";
const ak = T.forwardRef(
  ({ className: e, variant: t = "default", size: r = "md", children: n, ...i }, a) => {
    const o = {
      default: "bg-slate-100 text-slate-700",
      primary: "bg-primary-100 text-primary-700",
      success: "bg-green-100 text-green-700",
      warning: "bg-yellow-100 text-yellow-700",
      danger: "bg-red-100 text-red-700",
      info: "bg-blue-100 text-blue-700"
    }, s = {
      sm: "px-2 py-0.5 text-xs",
      md: "px-2.5 py-1 text-sm",
      lg: "px-3 py-1.5 text-base"
    };
    return /* @__PURE__ */ x.jsx(
      "span",
      {
        ref: a,
        className: me(
          fe(
            "inline-flex items-center rounded-full font-medium",
            "transition-all duration-200",
            o[t],
            s[r],
            e
          )
        ),
        ...i,
        children: n
      }
    );
  }
);
ak.displayName = "Badge";
const yQ = {
  sm: "backdrop-blur-sm",
  md: "backdrop-blur",
  lg: "backdrop-blur-lg"
}, xQ = {
  none: "p-0",
  sm: "p-3",
  md: "p-4",
  lg: "p-6"
}, bQ = {
  md: "rounded-lg",
  lg: "rounded-xl",
  xl: "rounded-2xl",
  "2xl": "rounded-3xl"
}, wQ = T.forwardRef(
  ({
    className: e,
    tone: t = "dark",
    blur: r = "md",
    padding: n = "md",
    rounded: i = "lg",
    interactive: a,
    ...o
  }, s) => {
    const l = t === "dark" ? "bg-white/10 text-white ring-1 ring-inset ring-white/10" : "bg-slate-950/5 text-text-primary ring-1 ring-inset ring-slate-900/10", u = t === "dark" ? "transition-colors hover:bg-white/15 active:bg-white/20" : "transition-colors hover:bg-slate-950/10 active:bg-slate-950/15";
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: s,
        className: me(
          fe(
            "relative",
            yQ[r],
            bQ[i],
            xQ[n],
            l,
            a && u,
            e
          )
        ),
        ...o
      }
    );
  }
);
wQ.displayName = "GlassPanel";
const Da = T.forwardRef(
  ({ className: e, src: t, alt: r = "", fallback: n, aspectRatio: i, objectFit: a = "cover", onError: o, ...s }, l) => {
    const [u, c] = T.useState(t), [f, d] = T.useState(!1);
    T.useEffect(() => {
      c(t), d(!1);
    }, [t]);
    const h = (g) => {
      f || (d(!0), n && c(n)), o == null || o(g);
    }, p = {
      "1/1": "aspect-square",
      "16/9": "aspect-video",
      "4/3": "aspect-[4/3]",
      "3/2": "aspect-[3/2]"
    }, v = {
      contain: "object-contain",
      cover: "object-cover",
      fill: "object-fill",
      none: "object-none"
    };
    return /* @__PURE__ */ x.jsx(
      "img",
      {
        ref: l,
        src: u,
        alt: r,
        className: me(
          fe(
            "rounded-xl bg-slate-100",
            i && p[i],
            v[a],
            e
          )
        ),
        onError: h,
        ...s
      }
    );
  }
);
Da.displayName = "Image";
const _Q = T.forwardRef(
  ({
    className: e,
    items: t,
    cols: r = 3,
    gap: n = "md",
    aspectRatio: i = "3/2",
    objectFit: a = "cover",
    renderItem: o,
    ...s
  }, l) => {
    if (!t || t.length === 0) return null;
    const u = {
      1: "grid-cols-1",
      2: "grid-cols-2",
      3: "grid-cols-3",
      4: "grid-cols-4",
      5: "grid-cols-5",
      6: "grid-cols-6",
      12: "grid-cols-12"
    }, c = {
      none: "gap-0",
      sm: "gap-2",
      md: "gap-4",
      lg: "gap-6",
      xl: "gap-8"
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: l,
        className: me(fe("grid w-full", u[r], c[n], e)),
        ...s,
        children: t.map((f, d) => {
          if (o)
            return /* @__PURE__ */ x.jsx(T.Fragment, { children: o(f, d) }, f.id ?? f.src ?? d);
          const h = f.id ?? f.src ?? d;
          return /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-2", children: [
            /* @__PURE__ */ x.jsx(
              Da,
              {
                src: f.src,
                alt: f.alt ?? (typeof f.title == "string" ? f.title : ""),
                aspectRatio: i,
                objectFit: a,
                className: "w-full"
              }
            ),
            (f.title || f.subtitle) && /* @__PURE__ */ x.jsxs("div", { className: "space-y-0.5 text-xs", children: [
              f.title && /* @__PURE__ */ x.jsx("div", { className: "font-medium text-text-primary truncate", children: f.title }),
              f.subtitle && /* @__PURE__ */ x.jsx("div", { className: "text-text-secondary line-clamp-2", children: f.subtitle })
            ] })
          ] }, h);
        })
      }
    );
  }
);
_Q.displayName = "ImageList";
const ok = T.forwardRef(
  ({ className: e, title: t = "No data", description: r = "There is no data to display here.", icon: n, imageSrc: i, action: a, ...o }, s) => /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: s,
      className: me(
        fe(
          "flex min-h-[300px] w-full flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50/50 px-4 py-8 text-center",
          e
        )
      ),
      ...o,
      children: [
        /* @__PURE__ */ x.jsx("div", { className: "mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm ring-1 ring-slate-100", children: i ? /* @__PURE__ */ x.jsx("img", { src: i, alt: "", className: "h-10 w-10 object-contain opacity-80" }) : n ? /* @__PURE__ */ x.jsx(n, { className: "h-8 w-8 text-slate-400" }) : /* @__PURE__ */ x.jsx(_U, { className: "h-8 w-8 text-slate-400" }) }),
        /* @__PURE__ */ x.jsx("h3", { className: "mb-1 text-lg font-semibold text-slate-900", children: t }),
        r && /* @__PURE__ */ x.jsx("p", { className: "mb-6 max-w-sm text-sm text-slate-500", children: r }),
        a && /* @__PURE__ */ x.jsx("div", { className: "mt-2", children: a })
      ]
    }
  )
);
ok.displayName = "EmptyState";
const SQ = T.forwardRef(
  ({ className: e, variant: t = "rect", width: r = "100%", height: n = 16, animate: i = !0, style: a, ...o }, s) => {
    const u = {
      width: r,
      height: n,
      borderRadius: t === "circle" ? "9999px" : "12px",
      ...a
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: s,
        className: me(
          fe(
            "bg-slate-200",
            i && "animate-pulse",
            t === "text" && "h-4",
            e
          )
        ),
        style: u,
        ...o
      }
    );
  }
);
SQ.displayName = "Skeleton";
const CQ = {
  1: "grid-cols-1",
  2: "grid-cols-1 sm:grid-cols-2",
  3: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",
  4: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-4"
}, TQ = {
  sm: "gap-3",
  md: "gap-4",
  lg: "gap-6"
}, AQ = T.forwardRef(
  ({ className: e, items: t, columns: r = 3, gap: n = "md", onSelect: i, ...a }, o) => {
    const s = qc(), l = (u) => {
      i && (s(Il.UI_CLICK, { statId: u.id ?? u.label }, { meta: { component: "StatisticGroup" } }), i(u));
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: o,
        className: me(fe("grid", CQ[r], TQ[n], e)),
        ...a,
        children: t.map((u, c) => /* @__PURE__ */ x.jsx(
          "button",
          {
            type: "button",
            onClick: () => l(u),
            className: me(
              fe(
                "text-left transition-transform focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500",
                i && "hover:-translate-y-1"
              )
            ),
            disabled: !i,
            children: /* @__PURE__ */ x.jsx(aW, { ...u, className: i ? "pointer-events-none" : void 0 })
          },
          u.id ?? c
        ))
      }
    );
  }
);
AQ.displayName = "StatisticGroup";
const MQ = {
  1: "grid-cols-1",
  2: "grid-cols-1 sm:grid-cols-2",
  3: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"
}, EQ = T.forwardRef(
  ({ className: e, items: t, columns: r = 2, dense: n = !1, ...i }, a) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: a,
      className: me(
        fe("w-full", e)
      ),
      ...i,
      children: /* @__PURE__ */ x.jsx(
        "dl",
        {
          className: me(
            fe(
              "grid gap-x-6 gap-y-3",
              MQ[r],
              n && "gap-y-2"
            )
          ),
          children: t.map((o, s) => /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: me(
                fe(
                  "flex flex-col gap-0.5",
                  o.span === 2 && "sm:col-span-2",
                  o.span === 3 && "lg:col-span-3"
                )
              ),
              children: [
                /* @__PURE__ */ x.jsx("dt", { className: "text-xs font-medium uppercase tracking-wide text-text-muted", children: o.label }),
                /* @__PURE__ */ x.jsx("dd", { className: "text-sm text-text-primary", children: o.value })
              ]
            },
            s
          ))
        }
      )
    }
  )
);
EQ.displayName = "DescriptionList";
const DQ = T.forwardRef(
  ({ className: e, items: t, onItemToggle: r, showProgress: n = !1, dense: i = !1, ...a }, o) => {
    const s = T.useMemo(
      () => t.filter((l) => l.completed).length,
      [t]
    );
    return /* @__PURE__ */ x.jsxs("div", { className: "flex w-full flex-col gap-2", children: [
      n && /* @__PURE__ */ x.jsxs("div", { className: "flex items-center justify-between text-xs text-text-muted", children: [
        /* @__PURE__ */ x.jsx("span", { children: "Checklist" }),
        /* @__PURE__ */ x.jsxs("span", { children: [
          s,
          "/",
          t.length,
          " hoàn thành"
        ] })
      ] }),
      /* @__PURE__ */ x.jsx(
        "ul",
        {
          ref: o,
          className: me(
            fe(
              "flex w-full flex-col gap-2 rounded-2xl bg-surface-alt p-3",
              i && "gap-1 p-2",
              e
            )
          ),
          ...a,
          children: t.map((l) => /* @__PURE__ */ x.jsxs(
            "li",
            {
              className: "flex items-start gap-2 text-sm text-text-secondary",
              children: [
                /* @__PURE__ */ x.jsx(
                  Zc,
                  {
                    checked: !!l.completed,
                    disabled: l.disabled,
                    onChange: (u) => r == null ? void 0 : r(l.id, u.target.checked),
                    className: "mt-0.5"
                  }
                ),
                /* @__PURE__ */ x.jsxs("div", { className: "flex flex-1 flex-col gap-0.5", children: [
                  /* @__PURE__ */ x.jsx(
                    "div",
                    {
                      className: fe(
                        "text-sm font-medium",
                        l.completed ? "text-text-muted line-through" : "text-text-primary"
                      ),
                      children: l.label
                    }
                  ),
                  l.description && /* @__PURE__ */ x.jsx("div", { className: "text-xs text-text-muted", children: l.description })
                ] })
              ]
            },
            l.id
          ))
        }
      )
    ] });
  }
);
DQ.displayName = "Checklist";
const NQ = T.forwardRef(
  ({
    className: e,
    style: t,
    variant: r = "checker",
    color1: n,
    color2: i,
    size: a,
    offset: o,
    dotSize: s,
    lineSize: l,
    stripeSize: u,
    conicStep: c,
    image: f,
    imageUrl: d,
    imageSize: h,
    imageRepeat: p,
    imagePosition: v,
    scrollDuration: g,
    scrollX: m,
    scrollY: y,
    animate: b = !0,
    scrollContainerRef: w,
    followFactor: _ = 0.3,
    followFactorX: S,
    followFactorY: C,
    ...A
  }, M) => {
    const D = T.useRef(null), N = T.useCallback(
      (I) => {
        D.current = I, typeof M == "function" ? M(I) : M && (M.current = I);
      },
      [M]
    ), R = f ?? (d ? `url(${JSON.stringify(d)})` : void 0), O = S ?? _, E = C ?? _, L = {
      ...t || {},
      ...n !== void 0 ? { "--rai-pattern-color1": n } : {},
      ...i !== void 0 ? { "--rai-pattern-color2": i } : {},
      ...a !== void 0 ? { "--rai-pattern-size": typeof a == "number" ? `${a}px` : a } : {},
      ...o !== void 0 ? { "--rai-pattern-offset": typeof o == "number" ? `${o}px` : o } : {},
      ...s !== void 0 ? { "--rai-pattern-dot-size": typeof s == "number" ? `${s}px` : s } : {},
      ...l !== void 0 ? { "--rai-pattern-line-size": typeof l == "number" ? `${l}px` : l } : {},
      ...u !== void 0 ? { "--rai-pattern-stripe-size": typeof u == "number" ? `${u}px` : u } : {},
      ...c !== void 0 ? { "--rai-pattern-conic-step": typeof c == "number" ? `${c}deg` : c } : {},
      ...R !== void 0 ? { "--rai-pattern-image": R } : {},
      ...h !== void 0 ? { "--rai-pattern-image-size": typeof h == "number" ? `${h}px` : h } : {},
      ...p !== void 0 ? { "--rai-pattern-image-repeat": p } : {},
      ...v !== void 0 ? { "--rai-pattern-image-position": v } : {},
      ...g !== void 0 ? { "--rai-pattern-scroll-duration": typeof g == "number" ? `${g}s` : g } : {},
      ...m !== void 0 ? { "--rai-pattern-scroll-x": typeof m == "number" ? `${m}px` : m } : {},
      ...y !== void 0 ? { "--rai-pattern-scroll-y": typeof y == "number" ? `${y}px` : y } : {}
    };
    return T.useEffect(() => {
      if (r !== "image-follow-scroll" || !b) return;
      const I = D.current;
      if (!I) return;
      const P = w == null ? void 0 : w.current, k = P ?? window;
      let z = 0;
      const V = () => {
        const F = P ? P.scrollLeft : window.scrollX, H = P ? P.scrollTop : window.scrollY, G = F * O, W = H * E;
        I.style.setProperty("--rai-pattern-follow-x", `${G}px`), I.style.setProperty("--rai-pattern-follow-y", `${W}px`);
      }, B = () => {
        z || (z = requestAnimationFrame(() => {
          z = 0, V();
        }));
      };
      return V(), k.addEventListener("scroll", B, { passive: !0 }), () => {
        k.removeEventListener("scroll", B), z && cancelAnimationFrame(z);
      };
    }, [b, O, E, w, r]), /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: N,
        className: fe(
          "rai-pattern-background",
          `rai-pattern-background--${r}`,
          !b && "rai-pattern-background--no-animate",
          e
        ),
        style: L,
        ...A
      }
    );
  }
);
NQ.displayName = "PatternBackground";
const IQ = T.forwardRef(
  ({ className: e, style: t, duration: r, rotate: n, inset: i, background: a, animate: o = !0, ...s }, l) => {
    const u = {
      ...t || {},
      ...r !== void 0 ? { "--rai-aurora-duration": typeof r == "number" ? `${r}s` : r } : {},
      ...n !== void 0 ? { "--rai-aurora-rotate": typeof n == "number" ? `${n}deg` : n } : {},
      ...i !== void 0 ? { "--rai-aurora-inset": typeof i == "number" ? `${i}%` : i } : {},
      ...a !== void 0 ? { "--rai-aurora-bg": a } : {}
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: l,
        className: fe("rai-aurora-pattern-background", !o && "rai-aurora-pattern-background--no-animate", e),
        style: u,
        ...s
      }
    );
  }
);
IQ.displayName = "AuroraPatternBackground";
const L2 = T.forwardRef(
  ({
    containerClassName: e,
    className: t,
    src: r,
    srcDoc: n,
    title: i = "Embedded content",
    loading: a = "lazy",
    referrerPolicy: o,
    sandbox: s,
    allow: l,
    allowFullScreen: u,
    aspectRatio: c,
    showLoading: f = !1,
    loadingOverlay: d,
    errorFallback: h,
    onLoad: p,
    onError: v,
    ...g
  }, m) => {
    const [y, b] = T.useState(!1), [w, _] = T.useState(!1);
    T.useEffect(() => {
      b(!1), _(!1);
    }, [r, n]);
    const S = {
      "1/1": "aspect-square",
      "16/9": "aspect-video",
      "4/3": "aspect-[4/3]",
      "3/2": "aspect-[3/2]"
    }, C = d ?? /* @__PURE__ */ x.jsx("div", { className: "flex items-center justify-center", children: /* @__PURE__ */ x.jsx(
      "div",
      {
        className: me(
          fe(
            "h-6 w-6 animate-spin rounded-full border-2 border-primary-500 border-t-transparent"
          )
        ),
        role: "status",
        "aria-label": "Loading"
      }
    ) }), A = h ?? /* @__PURE__ */ x.jsx("div", { className: "flex items-center justify-center text-sm text-text-muted", children: "Không thể tải nội dung" });
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        className: me(
          fe(
            "relative w-full overflow-hidden rounded-2xl bg-slate-100 ring-1 ring-slate-200",
            c && S[c],
            e
          )
        ),
        children: [
          /* @__PURE__ */ x.jsx(
            "iframe",
            {
              ref: m,
              src: r,
              srcDoc: n,
              title: i,
              loading: a,
              referrerPolicy: o,
              sandbox: s,
              allow: l,
              allowFullScreen: u,
              className: me(
                fe(
                  "absolute inset-0 h-full w-full bg-slate-100",
                  t
                )
              ),
              onLoad: (M) => {
                b(!0), _(!1), p == null || p(M);
              },
              onError: (M) => {
                _(!0), v == null || v(M);
              },
              ...g
            }
          ),
          f && !w && !y && /* @__PURE__ */ x.jsx("div", { className: "pointer-events-none absolute inset-0 grid place-items-center bg-white/60 backdrop-blur-[1px]", children: C }),
          w && /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 grid place-items-center bg-white/60 backdrop-blur-[1px]", children: A })
        ]
      }
    );
  }
);
L2.displayName = "Iframe";
const pE = {
  full: "max-w-full",
  xl: "max-w-xl",
  "2xl": "max-w-2xl",
  "3xl": "max-w-3xl",
  "4xl": "max-w-4xl",
  "5xl": "max-w-5xl",
  "6xl": "max-w-6xl",
  "7xl": "max-w-7xl"
}, LQ = T.forwardRef(
  ({ className: e, children: t, sidebar: r, header: n, footer: i, maxWidth: a = "7xl", padded: o = !0, ...s }, l) => /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: l,
      className: me(
        fe("flex min-h-screen w-full bg-background text-text-primary", e)
      ),
      ...s,
      children: [
        r && /* @__PURE__ */ x.jsx("aside", { className: "hidden w-64 flex-col gap-4 bg-surface p-6 lg:flex", children: r }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex flex-1 flex-col", children: [
          n && /* @__PURE__ */ x.jsx("header", { className: "sticky top-0 z-10 flex h-16 items-center gap-4 bg-background/80 px-6 backdrop-blur-sm border-b border-slate-200", children: n }),
          /* @__PURE__ */ x.jsx(
            "main",
            {
              className: me(
                fe("flex-1", o && "p-6")
              ),
              children: /* @__PURE__ */ x.jsx("div", { className: me(fe("mx-auto w-full", pE[a])), children: t })
            }
          ),
          i && /* @__PURE__ */ x.jsx("footer", { className: "border-t border-slate-200 bg-surface px-6 py-4 text-xs text-text-muted", children: /* @__PURE__ */ x.jsx("div", { className: me(fe("mx-auto w-full", pE[a])), children: i }) })
        ] })
      ]
    }
  )
);
LQ.displayName = "PageLayout";
const by = Xc(null);
by.displayName = "PanelGroupContext";
const or = {
  group: "data-panel-group",
  groupDirection: "data-panel-group-direction",
  groupId: "data-panel-group-id",
  panel: "data-panel",
  panelCollapsible: "data-panel-collapsible",
  panelId: "data-panel-id",
  panelSize: "data-panel-size",
  resizeHandle: "data-resize-handle",
  resizeHandleActive: "data-resize-handle-active",
  resizeHandleEnabled: "data-panel-resize-handle-enabled",
  resizeHandleId: "data-panel-resize-handle-id",
  resizeHandleState: "data-resize-handle-state"
}, VS = 10, _l = Hh, vE = T.useId, RQ = typeof vE == "function" ? vE : () => null;
let PQ = 0;
function BS(e = null) {
  const t = RQ(), r = Ve(e || t || null);
  return r.current === null && (r.current = "" + PQ++), e ?? r.current;
}
function sk({
  children: e,
  className: t = "",
  collapsedSize: r,
  collapsible: n,
  defaultSize: i,
  forwardedRef: a,
  id: o,
  maxSize: s,
  minSize: l,
  onCollapse: u,
  onExpand: c,
  onResize: f,
  order: d,
  style: h,
  tagName: p = "div",
  ...v
}) {
  const g = oo(by);
  if (g === null)
    throw Error("Panel components must be rendered within a PanelGroup container");
  const {
    collapsePanel: m,
    expandPanel: y,
    getPanelSize: b,
    getPanelStyle: w,
    groupId: _,
    isPanelCollapsed: S,
    reevaluatePanelConstraints: C,
    registerPanel: A,
    resizePanel: M,
    unregisterPanel: D
  } = g, N = BS(o), R = Ve({
    callbacks: {
      onCollapse: u,
      onExpand: c,
      onResize: f
    },
    constraints: {
      collapsedSize: r,
      collapsible: n,
      defaultSize: i,
      maxSize: s,
      minSize: l
    },
    id: N,
    idIsFromProps: o !== void 0,
    order: d
  });
  Ve({
    didLogMissingDefaultSizeWarning: !1
  }), _l(() => {
    const {
      callbacks: E,
      constraints: L
    } = R.current, I = {
      ...L
    };
    R.current.id = N, R.current.idIsFromProps = o !== void 0, R.current.order = d, E.onCollapse = u, E.onExpand = c, E.onResize = f, L.collapsedSize = r, L.collapsible = n, L.defaultSize = i, L.maxSize = s, L.minSize = l, (I.collapsedSize !== L.collapsedSize || I.collapsible !== L.collapsible || I.maxSize !== L.maxSize || I.minSize !== L.minSize) && C(R.current, I);
  }), _l(() => {
    const E = R.current;
    return A(E), () => {
      D(E);
    };
  }, [d, N, A, D]), aP(a, () => ({
    collapse: () => {
      m(R.current);
    },
    expand: (E) => {
      y(R.current, E);
    },
    getId() {
      return N;
    },
    getSize() {
      return b(R.current);
    },
    isCollapsed() {
      return S(R.current);
    },
    isExpanded() {
      return !S(R.current);
    },
    resize: (E) => {
      M(R.current, E);
    }
  }), [m, y, b, S, N, M]);
  const O = w(R.current, i);
  return Sc(p, {
    ...v,
    children: e,
    className: t,
    id: N,
    style: {
      ...O,
      ...h
    },
    // CSS selectors
    [or.groupId]: _,
    [or.panel]: "",
    [or.panelCollapsible]: n || void 0,
    [or.panelId]: N,
    [or.panelSize]: parseFloat("" + O.flexGrow).toFixed(1)
  });
}
const R2 = Nt((e, t) => Sc(sk, {
  ...e,
  forwardedRef: t
}));
sk.displayName = "Panel";
R2.displayName = "forwardRef(Panel)";
let P2 = null, og = -1, ko = null;
function kQ(e, t) {
  if (t) {
    const r = (t & dk) !== 0, n = (t & hk) !== 0, i = (t & pk) !== 0, a = (t & vk) !== 0;
    if (r)
      return i ? "se-resize" : a ? "ne-resize" : "e-resize";
    if (n)
      return i ? "sw-resize" : a ? "nw-resize" : "w-resize";
    if (i)
      return "s-resize";
    if (a)
      return "n-resize";
  }
  switch (e) {
    case "horizontal":
      return "ew-resize";
    case "intersection":
      return "move";
    case "vertical":
      return "ns-resize";
  }
}
function OQ() {
  ko !== null && (document.head.removeChild(ko), P2 = null, ko = null, og = -1);
}
function a1(e, t) {
  var r, n;
  const i = kQ(e, t);
  if (P2 !== i) {
    if (P2 = i, ko === null && (ko = document.createElement("style"), document.head.appendChild(ko)), og >= 0) {
      var a;
      (a = ko.sheet) === null || a === void 0 || a.removeRule(og);
    }
    og = (r = (n = ko.sheet) === null || n === void 0 ? void 0 : n.insertRule(`*{cursor: ${i} !important;}`)) !== null && r !== void 0 ? r : -1;
  }
}
function lk(e) {
  return e.type === "keydown";
}
function uk(e) {
  return e.type.startsWith("pointer");
}
function ck(e) {
  return e.type.startsWith("mouse");
}
function wy(e) {
  if (uk(e)) {
    if (e.isPrimary)
      return {
        x: e.clientX,
        y: e.clientY
      };
  } else if (ck(e))
    return {
      x: e.clientX,
      y: e.clientY
    };
  return {
    x: 1 / 0,
    y: 1 / 0
  };
}
function zQ() {
  if (typeof matchMedia == "function")
    return matchMedia("(pointer:coarse)").matches ? "coarse" : "fine";
}
function jQ(e, t, r) {
  return e.x < t.x + t.width && e.x + e.width > t.x && e.y < t.y + t.height && e.y + e.height > t.y;
}
function VQ(e, t) {
  if (e === t) throw new Error("Cannot compare node with itself");
  const r = {
    a: yE(e),
    b: yE(t)
  };
  let n;
  for (; r.a.at(-1) === r.b.at(-1); )
    e = r.a.pop(), t = r.b.pop(), n = e;
  wt(n, "Stacking order can only be calculated for elements with a common ancestor");
  const i = {
    a: mE(gE(r.a)),
    b: mE(gE(r.b))
  };
  if (i.a === i.b) {
    const a = n.childNodes, o = {
      a: r.a.at(-1),
      b: r.b.at(-1)
    };
    let s = a.length;
    for (; s--; ) {
      const l = a[s];
      if (l === o.a) return 1;
      if (l === o.b) return -1;
    }
  }
  return Math.sign(i.a - i.b);
}
const BQ = /\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;
function FQ(e) {
  var t;
  const r = getComputedStyle((t = fk(e)) !== null && t !== void 0 ? t : e).display;
  return r === "flex" || r === "inline-flex";
}
function $Q(e) {
  const t = getComputedStyle(e);
  return !!(t.position === "fixed" || t.zIndex !== "auto" && (t.position !== "static" || FQ(e)) || +t.opacity < 1 || "transform" in t && t.transform !== "none" || "webkitTransform" in t && t.webkitTransform !== "none" || "mixBlendMode" in t && t.mixBlendMode !== "normal" || "filter" in t && t.filter !== "none" || "webkitFilter" in t && t.webkitFilter !== "none" || "isolation" in t && t.isolation === "isolate" || BQ.test(t.willChange) || t.webkitOverflowScrolling === "touch");
}
function gE(e) {
  let t = e.length;
  for (; t--; ) {
    const r = e[t];
    if (wt(r, "Missing node"), $Q(r)) return r;
  }
  return null;
}
function mE(e) {
  return e && Number(getComputedStyle(e).zIndex) || 0;
}
function yE(e) {
  const t = [];
  for (; e; )
    t.push(e), e = fk(e);
  return t;
}
function fk(e) {
  const {
    parentNode: t
  } = e;
  return t && t instanceof ShadowRoot ? t.host : t;
}
const dk = 1, hk = 2, pk = 4, vk = 8, HQ = zQ() === "coarse";
let Si = [], cc = !1, Qs = /* @__PURE__ */ new Map(), _y = /* @__PURE__ */ new Map();
const ih = /* @__PURE__ */ new Set();
function GQ(e, t, r, n, i) {
  var a;
  const {
    ownerDocument: o
  } = t, s = {
    direction: r,
    element: t,
    hitAreaMargins: n,
    setResizeHandlerState: i
  }, l = (a = Qs.get(o)) !== null && a !== void 0 ? a : 0;
  return Qs.set(o, l + 1), ih.add(s), Gg(), function() {
    var c;
    _y.delete(e), ih.delete(s);
    const f = (c = Qs.get(o)) !== null && c !== void 0 ? c : 1;
    if (Qs.set(o, f - 1), Gg(), f === 1 && Qs.delete(o), Si.includes(s)) {
      const d = Si.indexOf(s);
      d >= 0 && Si.splice(d, 1), $S(), i("up", !0, null);
    }
  };
}
function WQ(e) {
  const {
    target: t
  } = e, {
    x: r,
    y: n
  } = wy(e);
  cc = !0, FS({
    target: t,
    x: r,
    y: n
  }), Gg(), Si.length > 0 && (Wg("down", e), e.preventDefault(), gk(t) || e.stopImmediatePropagation());
}
function o1(e) {
  const {
    x: t,
    y: r
  } = wy(e);
  if (cc && e.buttons === 0 && (cc = !1, Wg("up", e)), !cc) {
    const {
      target: n
    } = e;
    FS({
      target: n,
      x: t,
      y: r
    });
  }
  Wg("move", e), $S(), Si.length > 0 && e.preventDefault();
}
function s1(e) {
  const {
    target: t
  } = e, {
    x: r,
    y: n
  } = wy(e);
  _y.clear(), cc = !1, Si.length > 0 && (e.preventDefault(), gk(t) || e.stopImmediatePropagation()), Wg("up", e), FS({
    target: t,
    x: r,
    y: n
  }), $S(), Gg();
}
function gk(e) {
  let t = e;
  for (; t; ) {
    if (t.hasAttribute(or.resizeHandle))
      return !0;
    t = t.parentElement;
  }
  return !1;
}
function FS({
  target: e,
  x: t,
  y: r
}) {
  Si.splice(0);
  let n = null;
  (e instanceof HTMLElement || e instanceof SVGElement) && (n = e), ih.forEach((i) => {
    const {
      element: a,
      hitAreaMargins: o
    } = i, s = a.getBoundingClientRect(), {
      bottom: l,
      left: u,
      right: c,
      top: f
    } = s, d = HQ ? o.coarse : o.fine;
    if (t >= u - d && t <= c + d && r >= f - d && r <= l + d) {
      if (n !== null && document.contains(n) && a !== n && !a.contains(n) && !n.contains(a) && // Calculating stacking order has a cost, so we should avoid it if possible
      // That is why we only check potentially intersecting handles,
      // and why we skip if the event target is within the handle's DOM
      VQ(n, a) > 0) {
        let p = n, v = !1;
        for (; p && !p.contains(a); ) {
          if (jQ(p.getBoundingClientRect(), s)) {
            v = !0;
            break;
          }
          p = p.parentElement;
        }
        if (v)
          return;
      }
      Si.push(i);
    }
  });
}
function l1(e, t) {
  _y.set(e, t);
}
function $S() {
  let e = !1, t = !1;
  Si.forEach((n) => {
    const {
      direction: i
    } = n;
    i === "horizontal" ? e = !0 : t = !0;
  });
  let r = 0;
  _y.forEach((n) => {
    r |= n;
  }), e && t ? a1("intersection", r) : e ? a1("horizontal", r) : t ? a1("vertical", r) : OQ();
}
let u1 = new AbortController();
function Gg() {
  u1.abort(), u1 = new AbortController();
  const e = {
    capture: !0,
    signal: u1.signal
  };
  ih.size && (cc ? (Si.length > 0 && Qs.forEach((t, r) => {
    const {
      body: n
    } = r;
    t > 0 && (n.addEventListener("contextmenu", s1, e), n.addEventListener("pointerleave", o1, e), n.addEventListener("pointermove", o1, e));
  }), window.addEventListener("pointerup", s1, e), window.addEventListener("pointercancel", s1, e)) : Qs.forEach((t, r) => {
    const {
      body: n
    } = r;
    t > 0 && (n.addEventListener("pointerdown", WQ, e), n.addEventListener("pointermove", o1, e));
  }));
}
function Wg(e, t) {
  ih.forEach((r) => {
    const {
      setResizeHandlerState: n
    } = r, i = Si.includes(r);
    n(e, i, t);
  });
}
function UQ() {
  const [e, t] = Ze(0);
  return Te(() => t((r) => r + 1), []);
}
function wt(e, t) {
  if (!e)
    throw console.error(t), Error(t);
}
function Pl(e, t, r = VS) {
  return e.toFixed(r) === t.toFixed(r) ? 0 : e > t ? 1 : -1;
}
function Ia(e, t, r = VS) {
  return Pl(e, t, r) === 0;
}
function _n(e, t, r) {
  return Pl(e, t, r) === 0;
}
function YQ(e, t, r) {
  if (e.length !== t.length)
    return !1;
  for (let n = 0; n < e.length; n++) {
    const i = e[n], a = t[n];
    if (!_n(i, a, r))
      return !1;
  }
  return !0;
}
function ec({
  panelConstraints: e,
  panelIndex: t,
  size: r
}) {
  const n = e[t];
  wt(n != null, `Panel constraints not found for index ${t}`);
  let {
    collapsedSize: i = 0,
    collapsible: a,
    maxSize: o = 100,
    minSize: s = 0
  } = n;
  if (Pl(r, s) < 0)
    if (a) {
      const l = (i + s) / 2;
      Pl(r, l) < 0 ? r = i : r = s;
    } else
      r = s;
  return r = Math.min(o, r), r = parseFloat(r.toFixed(VS)), r;
}
function dd({
  delta: e,
  initialLayout: t,
  panelConstraints: r,
  pivotIndices: n,
  prevLayout: i,
  trigger: a
}) {
  if (_n(e, 0))
    return t;
  const o = [...t], [s, l] = n;
  wt(s != null, "Invalid first pivot index"), wt(l != null, "Invalid second pivot index");
  let u = 0;
  if (a === "keyboard") {
    {
      const f = e < 0 ? l : s, d = r[f];
      wt(d, `Panel constraints not found for index ${f}`);
      const {
        collapsedSize: h = 0,
        collapsible: p,
        minSize: v = 0
      } = d;
      if (p) {
        const g = t[f];
        if (wt(g != null, `Previous layout not found for panel index ${f}`), _n(g, h)) {
          const m = v - g;
          Pl(m, Math.abs(e)) > 0 && (e = e < 0 ? 0 - m : m);
        }
      }
    }
    {
      const f = e < 0 ? s : l, d = r[f];
      wt(d, `No panel constraints found for index ${f}`);
      const {
        collapsedSize: h = 0,
        collapsible: p,
        minSize: v = 0
      } = d;
      if (p) {
        const g = t[f];
        if (wt(g != null, `Previous layout not found for panel index ${f}`), _n(g, v)) {
          const m = g - h;
          Pl(m, Math.abs(e)) > 0 && (e = e < 0 ? 0 - m : m);
        }
      }
    }
  }
  {
    const f = e < 0 ? 1 : -1;
    let d = e < 0 ? l : s, h = 0;
    for (; ; ) {
      const v = t[d];
      wt(v != null, `Previous layout not found for panel index ${d}`);
      const m = ec({
        panelConstraints: r,
        panelIndex: d,
        size: 100
      }) - v;
      if (h += m, d += f, d < 0 || d >= r.length)
        break;
    }
    const p = Math.min(Math.abs(e), Math.abs(h));
    e = e < 0 ? 0 - p : p;
  }
  {
    let d = e < 0 ? s : l;
    for (; d >= 0 && d < r.length; ) {
      const h = Math.abs(e) - Math.abs(u), p = t[d];
      wt(p != null, `Previous layout not found for panel index ${d}`);
      const v = p - h, g = ec({
        panelConstraints: r,
        panelIndex: d,
        size: v
      });
      if (!_n(p, g) && (u += p - g, o[d] = g, u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3), void 0, {
        numeric: !0
      }) >= 0))
        break;
      e < 0 ? d-- : d++;
    }
  }
  if (YQ(i, o))
    return i;
  {
    const f = e < 0 ? l : s, d = t[f];
    wt(d != null, `Previous layout not found for panel index ${f}`);
    const h = d + u, p = ec({
      panelConstraints: r,
      panelIndex: f,
      size: h
    });
    if (o[f] = p, !_n(p, h)) {
      let v = h - p, m = e < 0 ? l : s;
      for (; m >= 0 && m < r.length; ) {
        const y = o[m];
        wt(y != null, `Previous layout not found for panel index ${m}`);
        const b = y + v, w = ec({
          panelConstraints: r,
          panelIndex: m,
          size: b
        });
        if (_n(y, w) || (v -= w - y, o[m] = w), _n(v, 0))
          break;
        e > 0 ? m-- : m++;
      }
    }
  }
  const c = o.reduce((f, d) => d + f, 0);
  return _n(c, 100) ? o : i;
}
function ZQ({
  layout: e,
  panelsArray: t,
  pivotIndices: r
}) {
  let n = 0, i = 100, a = 0, o = 0;
  const s = r[0];
  wt(s != null, "No pivot index found"), t.forEach((f, d) => {
    const {
      constraints: h
    } = f, {
      maxSize: p = 100,
      minSize: v = 0
    } = h;
    d === s ? (n = v, i = p) : (a += v, o += p);
  });
  const l = Math.min(i, 100 - a), u = Math.max(n, 100 - o), c = e[s];
  return {
    valueMax: l,
    valueMin: u,
    valueNow: c
  };
}
function ah(e, t = document) {
  return Array.from(t.querySelectorAll(`[${or.resizeHandleId}][data-panel-group-id="${e}"]`));
}
function mk(e, t, r = document) {
  const i = ah(e, r).findIndex((a) => a.getAttribute(or.resizeHandleId) === t);
  return i ?? null;
}
function yk(e, t, r) {
  const n = mk(e, t, r);
  return n != null ? [n, n + 1] : [-1, -1];
}
function xk(e, t = document) {
  var r;
  if (t instanceof HTMLElement && (t == null || (r = t.dataset) === null || r === void 0 ? void 0 : r.panelGroupId) == e)
    return t;
  const n = t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);
  return n || null;
}
function Sy(e, t = document) {
  const r = t.querySelector(`[${or.resizeHandleId}="${e}"]`);
  return r || null;
}
function XQ(e, t, r, n = document) {
  var i, a, o, s;
  const l = Sy(t, n), u = ah(e, n), c = l ? u.indexOf(l) : -1, f = (i = (a = r[c]) === null || a === void 0 ? void 0 : a.id) !== null && i !== void 0 ? i : null, d = (o = (s = r[c + 1]) === null || s === void 0 ? void 0 : s.id) !== null && o !== void 0 ? o : null;
  return [f, d];
}
function KQ({
  committedValuesRef: e,
  eagerValuesRef: t,
  groupId: r,
  layout: n,
  panelDataArray: i,
  panelGroupElement: a,
  setLayout: o
}) {
  Ve({
    didWarnAboutMissingResizeHandle: !1
  }), _l(() => {
    if (!a)
      return;
    const s = ah(r, a);
    for (let l = 0; l < i.length - 1; l++) {
      const {
        valueMax: u,
        valueMin: c,
        valueNow: f
      } = ZQ({
        layout: n,
        panelsArray: i,
        pivotIndices: [l, l + 1]
      }), d = s[l];
      if (d != null) {
        const h = i[l];
        wt(h, `No panel data found for index "${l}"`), d.setAttribute("aria-controls", h.id), d.setAttribute("aria-valuemax", "" + Math.round(u)), d.setAttribute("aria-valuemin", "" + Math.round(c)), d.setAttribute("aria-valuenow", f != null ? "" + Math.round(f) : "");
      }
    }
    return () => {
      s.forEach((l, u) => {
        l.removeAttribute("aria-controls"), l.removeAttribute("aria-valuemax"), l.removeAttribute("aria-valuemin"), l.removeAttribute("aria-valuenow");
      });
    };
  }, [r, n, i, a]), Oe(() => {
    if (!a)
      return;
    const s = t.current;
    wt(s, "Eager values not found");
    const {
      panelDataArray: l
    } = s, u = xk(r, a);
    wt(u != null, `No group found for id "${r}"`);
    const c = ah(r, a);
    wt(c, `No resize handles found for group id "${r}"`);
    const f = c.map((d) => {
      const h = d.getAttribute(or.resizeHandleId);
      wt(h, "Resize handle element has no handle id attribute");
      const [p, v] = XQ(r, h, l, a);
      if (p == null || v == null)
        return () => {
        };
      const g = (m) => {
        if (!m.defaultPrevented)
          switch (m.key) {
            case "Enter": {
              m.preventDefault();
              const y = l.findIndex((b) => b.id === p);
              if (y >= 0) {
                const b = l[y];
                wt(b, `No panel data found for index ${y}`);
                const w = n[y], {
                  collapsedSize: _ = 0,
                  collapsible: S,
                  minSize: C = 0
                } = b.constraints;
                if (w != null && S) {
                  const A = dd({
                    delta: _n(w, _) ? C - _ : _ - w,
                    initialLayout: n,
                    panelConstraints: l.map((M) => M.constraints),
                    pivotIndices: yk(r, h, a),
                    prevLayout: n,
                    trigger: "keyboard"
                  });
                  n !== A && o(A);
                }
              }
              break;
            }
          }
      };
      return d.addEventListener("keydown", g), () => {
        d.removeEventListener("keydown", g);
      };
    });
    return () => {
      f.forEach((d) => d());
    };
  }, [a, e, t, r, n, i, o]);
}
function xE(e, t) {
  if (e.length !== t.length)
    return !1;
  for (let r = 0; r < e.length; r++)
    if (e[r] !== t[r])
      return !1;
  return !0;
}
function bk(e, t) {
  const r = e === "horizontal", {
    x: n,
    y: i
  } = wy(t);
  return r ? n : i;
}
function qQ(e, t, r, n, i) {
  const a = r === "horizontal", o = Sy(t, i);
  wt(o, `No resize handle element found for id "${t}"`);
  const s = o.getAttribute(or.groupId);
  wt(s, "Resize handle element has no group id attribute");
  let {
    initialCursorPosition: l
  } = n;
  const u = bk(r, e), c = xk(s, i);
  wt(c, `No group element found for id "${s}"`);
  const f = c.getBoundingClientRect(), d = a ? f.width : f.height;
  return (u - l) / d * 100;
}
function JQ(e, t, r, n, i, a) {
  if (lk(e)) {
    const o = r === "horizontal";
    let s = 0;
    e.shiftKey ? s = 100 : i != null ? s = i : s = 10;
    let l = 0;
    switch (e.key) {
      case "ArrowDown":
        l = o ? 0 : s;
        break;
      case "ArrowLeft":
        l = o ? -s : 0;
        break;
      case "ArrowRight":
        l = o ? s : 0;
        break;
      case "ArrowUp":
        l = o ? 0 : -s;
        break;
      case "End":
        l = 100;
        break;
      case "Home":
        l = -100;
        break;
    }
    return l;
  } else
    return n == null ? 0 : qQ(e, t, r, n, a);
}
function QQ({
  panelDataArray: e
}) {
  const t = Array(e.length), r = e.map((a) => a.constraints);
  let n = 0, i = 100;
  for (let a = 0; a < e.length; a++) {
    const o = r[a];
    wt(o, `Panel constraints not found for index ${a}`);
    const {
      defaultSize: s
    } = o;
    s != null && (n++, t[a] = s, i -= s);
  }
  for (let a = 0; a < e.length; a++) {
    const o = r[a];
    wt(o, `Panel constraints not found for index ${a}`);
    const {
      defaultSize: s
    } = o;
    if (s != null)
      continue;
    const l = e.length - n, u = i / l;
    n++, t[a] = u, i -= u;
  }
  return t;
}
function hu(e, t, r) {
  t.forEach((n, i) => {
    const a = e[i];
    wt(a, `Panel data not found for index ${i}`);
    const {
      callbacks: o,
      constraints: s,
      id: l
    } = a, {
      collapsedSize: u = 0,
      collapsible: c
    } = s, f = r[l];
    if (f == null || n !== f) {
      r[l] = n;
      const {
        onCollapse: d,
        onExpand: h,
        onResize: p
      } = o;
      p && p(n, f), c && (d || h) && (h && (f == null || Ia(f, u)) && !Ia(n, u) && h(), d && (f == null || !Ia(f, u)) && Ia(n, u) && d());
    }
  });
}
function Bp(e, t) {
  if (e.length !== t.length)
    return !1;
  for (let r = 0; r < e.length; r++)
    if (e[r] != t[r])
      return !1;
  return !0;
}
function eee({
  defaultSize: e,
  dragState: t,
  layout: r,
  panelData: n,
  panelIndex: i,
  precision: a = 3
}) {
  const o = r[i];
  let s;
  return o == null ? s = e != null ? e.toPrecision(a) : "1" : n.length === 1 ? s = "1" : s = o.toPrecision(a), {
    flexBasis: 0,
    flexGrow: s,
    flexShrink: 1,
    // Without this, Panel sizes may be unintentionally overridden by their content
    overflow: "hidden",
    // Disable pointer events inside of a panel during resize
    // This avoid edge cases like nested iframes
    pointerEvents: t !== null ? "none" : void 0
  };
}
function tee(e, t = 10) {
  let r = null;
  return (...i) => {
    r !== null && clearTimeout(r), r = setTimeout(() => {
      e(...i);
    }, t);
  };
}
function bE(e) {
  try {
    if (typeof localStorage < "u")
      e.getItem = (t) => localStorage.getItem(t), e.setItem = (t, r) => {
        localStorage.setItem(t, r);
      };
    else
      throw new Error("localStorage not supported in this environment");
  } catch (t) {
    console.error(t), e.getItem = () => null, e.setItem = () => {
    };
  }
}
function wk(e) {
  return `react-resizable-panels:${e}`;
}
function _k(e) {
  return e.map((t) => {
    const {
      constraints: r,
      id: n,
      idIsFromProps: i,
      order: a
    } = t;
    return i ? n : a ? `${a}:${JSON.stringify(r)}` : JSON.stringify(r);
  }).sort((t, r) => t.localeCompare(r)).join(",");
}
function Sk(e, t) {
  try {
    const r = wk(e), n = t.getItem(r);
    if (n) {
      const i = JSON.parse(n);
      if (typeof i == "object" && i != null)
        return i;
    }
  } catch {
  }
  return null;
}
function ree(e, t, r) {
  var n, i;
  const a = (n = Sk(e, r)) !== null && n !== void 0 ? n : {}, o = _k(t);
  return (i = a[o]) !== null && i !== void 0 ? i : null;
}
function nee(e, t, r, n, i) {
  var a;
  const o = wk(e), s = _k(t), l = (a = Sk(e, i)) !== null && a !== void 0 ? a : {};
  l[s] = {
    expandToSizes: Object.fromEntries(r.entries()),
    layout: n
  };
  try {
    i.setItem(o, JSON.stringify(l));
  } catch (u) {
    console.error(u);
  }
}
function wE({
  layout: e,
  panelConstraints: t
}) {
  const r = [...e], n = r.reduce((a, o) => a + o, 0);
  if (r.length !== t.length)
    throw Error(`Invalid ${t.length} panel layout: ${r.map((a) => `${a}%`).join(", ")}`);
  if (!_n(n, 100) && r.length > 0)
    for (let a = 0; a < t.length; a++) {
      const o = r[a];
      wt(o != null, `No layout data found for index ${a}`);
      const s = 100 / n * o;
      r[a] = s;
    }
  let i = 0;
  for (let a = 0; a < t.length; a++) {
    const o = r[a];
    wt(o != null, `No layout data found for index ${a}`);
    const s = ec({
      panelConstraints: t,
      panelIndex: a,
      size: o
    });
    o != s && (i += o - s, r[a] = s);
  }
  if (!_n(i, 0))
    for (let a = 0; a < t.length; a++) {
      const o = r[a];
      wt(o != null, `No layout data found for index ${a}`);
      const s = o + i, l = ec({
        panelConstraints: t,
        panelIndex: a,
        size: s
      });
      if (o !== l && (i -= l - o, r[a] = l, _n(i, 0)))
        break;
    }
  return r;
}
const iee = 100, hd = {
  getItem: (e) => (bE(hd), hd.getItem(e)),
  setItem: (e, t) => {
    bE(hd), hd.setItem(e, t);
  }
}, _E = {};
function Ck({
  autoSaveId: e = null,
  children: t,
  className: r = "",
  direction: n,
  forwardedRef: i,
  id: a = null,
  onLayout: o = null,
  keyboardResizeBy: s = null,
  storage: l = hd,
  style: u,
  tagName: c = "div",
  ...f
}) {
  const d = BS(a), h = Ve(null), [p, v] = Ze(null), [g, m] = Ze([]), y = UQ(), b = Ve({}), w = Ve(/* @__PURE__ */ new Map()), _ = Ve(0), S = Ve({
    autoSaveId: e,
    direction: n,
    dragState: p,
    id: d,
    keyboardResizeBy: s,
    onLayout: o,
    storage: l
  }), C = Ve({
    layout: g,
    panelDataArray: [],
    panelDataArrayChanged: !1
  });
  Ve({
    didLogIdAndOrderWarning: !1,
    didLogPanelConstraintsWarning: !1,
    prevPanelIds: []
  }), aP(i, () => ({
    getId: () => S.current.id,
    getLayout: () => {
      const {
        layout: H
      } = C.current;
      return H;
    },
    setLayout: (H) => {
      const {
        onLayout: G
      } = S.current, {
        layout: W,
        panelDataArray: X
      } = C.current, q = wE({
        layout: H,
        panelConstraints: X.map((J) => J.constraints)
      });
      xE(W, q) || (m(q), C.current.layout = q, G && G(q), hu(X, q, b.current));
    }
  }), []), _l(() => {
    S.current.autoSaveId = e, S.current.direction = n, S.current.dragState = p, S.current.id = d, S.current.onLayout = o, S.current.storage = l;
  }), KQ({
    committedValuesRef: S,
    eagerValuesRef: C,
    groupId: d,
    layout: g,
    panelDataArray: C.current.panelDataArray,
    setLayout: m,
    panelGroupElement: h.current
  }), Oe(() => {
    const {
      panelDataArray: H
    } = C.current;
    if (e) {
      if (g.length === 0 || g.length !== H.length)
        return;
      let G = _E[e];
      G == null && (G = tee(nee, iee), _E[e] = G);
      const W = [...H], X = new Map(w.current);
      G(e, W, X, g, l);
    }
  }, [e, g, l]), Oe(() => {
  });
  const A = Te((H) => {
    const {
      onLayout: G
    } = S.current, {
      layout: W,
      panelDataArray: X
    } = C.current;
    if (H.constraints.collapsible) {
      const q = X.map((Y) => Y.constraints), {
        collapsedSize: J = 0,
        panelSize: U,
        pivotIndices: $
      } = ws(X, H, W);
      if (wt(U != null, `Panel size not found for panel "${H.id}"`), !Ia(U, J)) {
        w.current.set(H.id, U);
        const Z = Uu(X, H) === X.length - 1 ? U - J : J - U, K = dd({
          delta: Z,
          initialLayout: W,
          panelConstraints: q,
          pivotIndices: $,
          prevLayout: W,
          trigger: "imperative-api"
        });
        Bp(W, K) || (m(K), C.current.layout = K, G && G(K), hu(X, K, b.current));
      }
    }
  }, []), M = Te((H, G) => {
    const {
      onLayout: W
    } = S.current, {
      layout: X,
      panelDataArray: q
    } = C.current;
    if (H.constraints.collapsible) {
      const J = q.map((ie) => ie.constraints), {
        collapsedSize: U = 0,
        panelSize: $ = 0,
        minSize: Y = 0,
        pivotIndices: Z
      } = ws(q, H, X), K = G ?? Y;
      if (Ia($, U)) {
        const ie = w.current.get(H.id), Q = ie != null && ie >= K ? ie : K, te = Uu(q, H) === q.length - 1 ? $ - Q : Q - $, oe = dd({
          delta: te,
          initialLayout: X,
          panelConstraints: J,
          pivotIndices: Z,
          prevLayout: X,
          trigger: "imperative-api"
        });
        Bp(X, oe) || (m(oe), C.current.layout = oe, W && W(oe), hu(q, oe, b.current));
      }
    }
  }, []), D = Te((H) => {
    const {
      layout: G,
      panelDataArray: W
    } = C.current, {
      panelSize: X
    } = ws(W, H, G);
    return wt(X != null, `Panel size not found for panel "${H.id}"`), X;
  }, []), N = Te((H, G) => {
    const {
      panelDataArray: W
    } = C.current, X = Uu(W, H);
    return eee({
      defaultSize: G,
      dragState: p,
      layout: g,
      panelData: W,
      panelIndex: X
    });
  }, [p, g]), R = Te((H) => {
    const {
      layout: G,
      panelDataArray: W
    } = C.current, {
      collapsedSize: X = 0,
      collapsible: q,
      panelSize: J
    } = ws(W, H, G);
    return wt(J != null, `Panel size not found for panel "${H.id}"`), q === !0 && Ia(J, X);
  }, []), O = Te((H) => {
    const {
      layout: G,
      panelDataArray: W
    } = C.current, {
      collapsedSize: X = 0,
      collapsible: q,
      panelSize: J
    } = ws(W, H, G);
    return wt(J != null, `Panel size not found for panel "${H.id}"`), !q || Pl(J, X) > 0;
  }, []), E = Te((H) => {
    const {
      panelDataArray: G
    } = C.current;
    G.push(H), G.sort((W, X) => {
      const q = W.order, J = X.order;
      return q == null && J == null ? 0 : q == null ? -1 : J == null ? 1 : q - J;
    }), C.current.panelDataArrayChanged = !0, y();
  }, [y]);
  _l(() => {
    if (C.current.panelDataArrayChanged) {
      C.current.panelDataArrayChanged = !1;
      const {
        autoSaveId: H,
        onLayout: G,
        storage: W
      } = S.current, {
        layout: X,
        panelDataArray: q
      } = C.current;
      let J = null;
      if (H) {
        const $ = ree(H, q, W);
        $ && (w.current = new Map(Object.entries($.expandToSizes)), J = $.layout);
      }
      J == null && (J = QQ({
        panelDataArray: q
      }));
      const U = wE({
        layout: J,
        panelConstraints: q.map(($) => $.constraints)
      });
      xE(X, U) || (m(U), C.current.layout = U, G && G(U), hu(q, U, b.current));
    }
  }), _l(() => {
    const H = C.current;
    return () => {
      H.layout = [];
    };
  }, []);
  const L = Te((H) => {
    let G = !1;
    const W = h.current;
    return W && window.getComputedStyle(W, null).getPropertyValue("direction") === "rtl" && (G = !0), function(q) {
      q.preventDefault();
      const J = h.current;
      if (!J)
        return () => null;
      const {
        direction: U,
        dragState: $,
        id: Y,
        keyboardResizeBy: Z,
        onLayout: K
      } = S.current, {
        layout: ie,
        panelDataArray: Q
      } = C.current, {
        initialLayout: ce
      } = $ ?? {}, te = yk(Y, H, J);
      let oe = JQ(q, H, U, $, Z, J);
      const de = U === "horizontal";
      de && G && (oe = -oe);
      const Pe = Q.map((Dt) => Dt.constraints), Ke = dd({
        delta: oe,
        initialLayout: ce ?? ie,
        panelConstraints: Pe,
        pivotIndices: te,
        prevLayout: ie,
        trigger: lk(q) ? "keyboard" : "mouse-or-touch"
      }), it = !Bp(ie, Ke);
      (uk(q) || ck(q)) && _.current != oe && (_.current = oe, !it && oe !== 0 ? de ? l1(H, oe < 0 ? dk : hk) : l1(H, oe < 0 ? pk : vk) : l1(H, 0)), it && (m(Ke), C.current.layout = Ke, K && K(Ke), hu(Q, Ke, b.current));
    };
  }, []), I = Te((H, G) => {
    const {
      onLayout: W
    } = S.current, {
      layout: X,
      panelDataArray: q
    } = C.current, J = q.map((ie) => ie.constraints), {
      panelSize: U,
      pivotIndices: $
    } = ws(q, H, X);
    wt(U != null, `Panel size not found for panel "${H.id}"`);
    const Z = Uu(q, H) === q.length - 1 ? U - G : G - U, K = dd({
      delta: Z,
      initialLayout: X,
      panelConstraints: J,
      pivotIndices: $,
      prevLayout: X,
      trigger: "imperative-api"
    });
    Bp(X, K) || (m(K), C.current.layout = K, W && W(K), hu(q, K, b.current));
  }, []), P = Te((H, G) => {
    const {
      layout: W,
      panelDataArray: X
    } = C.current, {
      collapsedSize: q = 0,
      collapsible: J
    } = G, {
      collapsedSize: U = 0,
      collapsible: $,
      maxSize: Y = 100,
      minSize: Z = 0
    } = H.constraints, {
      panelSize: K
    } = ws(X, H, W);
    K != null && (J && $ && Ia(K, q) ? Ia(q, U) || I(H, U) : K < Z ? I(H, Z) : K > Y && I(H, Y));
  }, [I]), k = Te((H, G) => {
    const {
      direction: W
    } = S.current, {
      layout: X
    } = C.current;
    if (!h.current)
      return;
    const q = Sy(H, h.current);
    wt(q, `Drag handle element not found for id "${H}"`);
    const J = bk(W, G);
    v({
      dragHandleId: H,
      dragHandleRect: q.getBoundingClientRect(),
      initialCursorPosition: J,
      initialLayout: X
    });
  }, []), z = Te(() => {
    v(null);
  }, []), V = Te((H) => {
    const {
      panelDataArray: G
    } = C.current, W = Uu(G, H);
    W >= 0 && (G.splice(W, 1), delete b.current[H.id], C.current.panelDataArrayChanged = !0, y());
  }, [y]), B = Gt(() => ({
    collapsePanel: A,
    direction: n,
    dragState: p,
    expandPanel: M,
    getPanelSize: D,
    getPanelStyle: N,
    groupId: d,
    isPanelCollapsed: R,
    isPanelExpanded: O,
    reevaluatePanelConstraints: P,
    registerPanel: E,
    registerResizeHandle: L,
    resizePanel: I,
    startDragging: k,
    stopDragging: z,
    unregisterPanel: V,
    panelGroupElement: h.current
  }), [A, p, n, M, D, N, d, R, O, P, E, L, I, k, z, V]), F = {
    display: "flex",
    flexDirection: n === "horizontal" ? "row" : "column",
    height: "100%",
    overflow: "hidden",
    width: "100%"
  };
  return Sc(by.Provider, {
    value: B
  }, Sc(c, {
    ...f,
    children: t,
    className: r,
    id: a,
    ref: h,
    style: {
      ...F,
      ...u
    },
    // CSS selectors
    [or.group]: "",
    [or.groupDirection]: n,
    [or.groupId]: d
  }));
}
const Tk = Nt((e, t) => Sc(Ck, {
  ...e,
  forwardedRef: t
}));
Ck.displayName = "PanelGroup";
Tk.displayName = "forwardRef(PanelGroup)";
function Uu(e, t) {
  return e.findIndex((r) => r === t || r.id === t.id);
}
function ws(e, t, r) {
  const n = Uu(e, t), a = n === e.length - 1 ? [n - 1, n] : [n, n + 1], o = r[n];
  return {
    ...t.constraints,
    panelSize: o,
    pivotIndices: a
  };
}
function aee({
  disabled: e,
  handleId: t,
  resizeHandler: r,
  panelGroupElement: n
}) {
  Oe(() => {
    if (e || r == null || n == null)
      return;
    const i = Sy(t, n);
    if (i == null)
      return;
    const a = (o) => {
      if (!o.defaultPrevented)
        switch (o.key) {
          case "ArrowDown":
          case "ArrowLeft":
          case "ArrowRight":
          case "ArrowUp":
          case "End":
          case "Home": {
            o.preventDefault(), r(o);
            break;
          }
          case "F6": {
            o.preventDefault();
            const s = i.getAttribute(or.groupId);
            wt(s, `No group element found for id "${s}"`);
            const l = ah(s, n), u = mk(s, t, n);
            wt(u !== null, `No resize element found for id "${t}"`);
            const c = o.shiftKey ? u > 0 ? u - 1 : l.length - 1 : u + 1 < l.length ? u + 1 : 0;
            l[c].focus();
            break;
          }
        }
    };
    return i.addEventListener("keydown", a), () => {
      i.removeEventListener("keydown", a);
    };
  }, [n, e, t, r]);
}
function Ak({
  children: e = null,
  className: t = "",
  disabled: r = !1,
  hitAreaMargins: n,
  id: i,
  onBlur: a,
  onClick: o,
  onDragging: s,
  onFocus: l,
  onPointerDown: u,
  onPointerUp: c,
  style: f = {},
  tabIndex: d = 0,
  tagName: h = "div",
  ...p
}) {
  var v, g;
  const m = Ve(null), y = Ve({
    onClick: o,
    onDragging: s,
    onPointerDown: u,
    onPointerUp: c
  });
  Oe(() => {
    y.current.onClick = o, y.current.onDragging = s, y.current.onPointerDown = u, y.current.onPointerUp = c;
  });
  const b = oo(by);
  if (b === null)
    throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");
  const {
    direction: w,
    groupId: _,
    registerResizeHandle: S,
    startDragging: C,
    stopDragging: A,
    panelGroupElement: M
  } = b, D = BS(i), [N, R] = Ze("inactive"), [O, E] = Ze(!1), [L, I] = Ze(null), P = Ve({
    state: N
  });
  _l(() => {
    P.current.state = N;
  }), Oe(() => {
    if (r)
      I(null);
    else {
      const B = S(D);
      I(() => B);
    }
  }, [r, D, S]);
  const k = (v = n == null ? void 0 : n.coarse) !== null && v !== void 0 ? v : 15, z = (g = n == null ? void 0 : n.fine) !== null && g !== void 0 ? g : 5;
  return Oe(() => {
    if (r || L == null)
      return;
    const B = m.current;
    wt(B, "Element ref not attached");
    let F = !1;
    return GQ(D, B, w, {
      coarse: k,
      fine: z
    }, (G, W, X) => {
      if (!W) {
        R("inactive");
        return;
      }
      switch (G) {
        case "down": {
          R("drag"), F = !1, wt(X, 'Expected event to be defined for "down" action'), C(D, X);
          const {
            onDragging: q,
            onPointerDown: J
          } = y.current;
          q == null || q(!0), J == null || J();
          break;
        }
        case "move": {
          const {
            state: q
          } = P.current;
          F = !0, q !== "drag" && R("hover"), wt(X, 'Expected event to be defined for "move" action'), L(X);
          break;
        }
        case "up": {
          R("hover"), A();
          const {
            onClick: q,
            onDragging: J,
            onPointerUp: U
          } = y.current;
          J == null || J(!1), U == null || U(), F || q == null || q();
          break;
        }
      }
    });
  }, [k, w, r, z, S, D, L, C, A]), aee({
    disabled: r,
    handleId: D,
    resizeHandler: L,
    panelGroupElement: M
  }), Sc(h, {
    ...p,
    children: e,
    className: t,
    id: i,
    onBlur: () => {
      E(!1), a == null || a();
    },
    onFocus: () => {
      E(!0), l == null || l();
    },
    ref: m,
    role: "separator",
    style: {
      ...{
        touchAction: "none",
        userSelect: "none"
      },
      ...f
    },
    tabIndex: d,
    // CSS selectors
    [or.groupDirection]: w,
    [or.groupId]: _,
    [or.resizeHandle]: "",
    [or.resizeHandleActive]: N === "drag" ? "pointer" : O ? "keyboard" : void 0,
    [or.resizeHandleEnabled]: !r,
    [or.resizeHandleId]: D,
    [or.resizeHandleState]: N
  });
}
Ak.displayName = "PanelResizeHandle";
const Mk = T.forwardRef(
  ({
    className: e,
    direction: t = "horizontal",
    initialRatio: r = 0.5,
    minPrimary: n = 120,
    minSecondary: i = 120,
    onResize: a,
    children: o,
    ...s
  }, l) => {
    const u = qc(), c = T.useRef(null), [f, d] = T.useState(0);
    T.useImperativeHandle(l, () => c.current), T.useLayoutEffect(() => {
      const _ = c.current;
      if (!_) return;
      const S = () => {
        const A = _.getBoundingClientRect();
        d(t === "horizontal" ? A.width : A.height);
      };
      if (S(), typeof ResizeObserver > "u")
        return window.addEventListener("resize", S), () => {
          window.removeEventListener("resize", S);
        };
      const C = new ResizeObserver(() => S());
      return C.observe(_), () => {
        C.disconnect();
      };
    }, [t]);
    const [h, p] = T.Children.toArray(o), v = t === "horizontal", m = Math.min(Math.max(r, 0), 1) * 100;
    let y = f > 0 ? n / f * 100 : 0, b = f > 0 ? i / f * 100 : 0;
    y = Math.min(Math.max(y, 0), 100), b = Math.min(Math.max(b, 0), 100), y + b > 100 && (y = 0, b = 0);
    const w = T.useCallback(
      (_) => {
        const S = ((_ == null ? void 0 : _[0]) ?? m) / 100;
        a == null || a(S), u(
          Il.UI_CHANGE,
          { component: "SplitPane", ratio: S },
          { meta: { component: "SplitPane" } }
        );
      },
      [u, a, m]
    );
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: c,
        className: me(
          fe(
            "overflow-hidden rounded-2xl bg-surface",
            e
          )
        ),
        ...s,
        children: /* @__PURE__ */ x.jsxs(
          Tk,
          {
            direction: t,
            className: fe("flex h-full w-full", v ? "flex-row" : "flex-col"),
            onLayout: w,
            children: [
              /* @__PURE__ */ x.jsx(R2, { defaultSize: m, minSize: y, children: /* @__PURE__ */ x.jsx("div", { className: fe("h-full w-full overflow-hidden", !v && "w-full"), children: h }) }),
              /* @__PURE__ */ x.jsx(
                Ak,
                {
                  className: fe(
                    "flex items-center justify-center transition-colors",
                    v ? "w-1 cursor-col-resize hover:bg-primary-100" : "h-1 cursor-row-resize hover:bg-primary-100"
                  ),
                  children: /* @__PURE__ */ x.jsx(
                    "span",
                    {
                      className: "block rounded-full bg-slate-300",
                      style: v ? { width: 2, height: "70%" } : { height: 2, width: "70%" }
                    }
                  )
                }
              ),
              /* @__PURE__ */ x.jsx(R2, { defaultSize: 100 - m, minSize: b, children: /* @__PURE__ */ x.jsx("div", { className: fe("h-full w-full overflow-hidden", !v && "w-full"), children: p }) })
            ]
          }
        )
      }
    );
  }
);
Mk.displayName = "SplitPane";
const tf = T.forwardRef(
  ({
    open: e,
    onClose: t,
    title: r,
    children: n,
    position: i = "bottom-right",
    size: a = "md",
    animation: o = "slide-in",
    fullHeight: s = !0,
    noBorder: l = !0,
    className: u
  }, c) => {
    if (!e) return null;
    const [f, d] = T.useState(!1);
    T.useEffect(() => {
      d(!0);
    }, []);
    const h = {
      "top-left": "top-6 left-6",
      "top-right": "top-6 right-6",
      "bottom-left": "bottom-6 left-6",
      "bottom-right": "bottom-6 right-6"
    }, p = {
      sm: "max-w-xs",
      md: "max-w-sm",
      lg: "max-w-md"
    }, v = () => o === "none" ? "opacity-100" : o === "slide-in" ? f ? "translate-x-0 opacity-100" : i === "top-right" || i === "bottom-right" ? "translate-x-4 opacity-0" : "-translate-x-4 opacity-0" : o === "slide-up" ? f ? "translate-y-0 opacity-100" : i === "bottom-left" || i === "bottom-right" ? "translate-y-4 opacity-0" : "-translate-y-4 opacity-0" : "opacity-100";
    return /* @__PURE__ */ x.jsx("div", { className: "fixed inset-0 z-50 pointer-events-none", children: /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: c,
        className: me(
          fe(
            "pointer-events-auto absolute",
            "w-full",
            "bg-surface shadow-xl",
            "p-4",
            "flex flex-col gap-3",
            "transition-transform transition-opacity duration-200",
            !l && "rounded-2xl border border-slate-200",
            l && "rounded-none border-none",
            s && "h-[calc(100vh-3rem)] max-h-[calc(100vh-3rem)] overflow-y-auto",
            p[a],
            v(),
            h[i],
            u
          )
        ),
        children: [
          (r || t) && /* @__PURE__ */ x.jsxs("div", { className: "flex items-start justify-between gap-2", children: [
            r && /* @__PURE__ */ x.jsx("div", { className: "text-sm font-semibold text-text-primary", children: r }),
            t && /* @__PURE__ */ x.jsx(
              "button",
              {
                type: "button",
                onClick: t,
                className: "rounded-full p-1 text-slate-500 hover:bg-slate-100 transition-colors",
                "aria-label": "Close",
                children: /* @__PURE__ */ x.jsxs(
                  "svg",
                  {
                    className: "h-4 w-4",
                    viewBox: "0 0 24 24",
                    fill: "none",
                    stroke: "currentColor",
                    strokeWidth: 2,
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    children: [
                      /* @__PURE__ */ x.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }),
                      /* @__PURE__ */ x.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })
                    ]
                  }
                )
              }
            )
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "text-sm text-text-secondary", children: n })
        ]
      }
    ) });
  }
);
tf.displayName = "CornerPanel";
const oee = T.forwardRef(
  ({
    actions: e,
    position: t = "bottom-right",
    direction: r = "up",
    icon: n = Qc,
    openIcon: i = ef,
    className: a,
    ...o
  }, s) => {
    const [l, u] = T.useState(!1), c = {
      "bottom-right": "bottom-6 right-6",
      "bottom-left": "bottom-6 left-6",
      "top-right": "top-6 right-6",
      "top-left": "top-6 left-6"
    }, f = t === "bottom-right" || t === "top-right" ? "left" : "right", d = () => {
      u((m) => !m);
    }, h = (m) => (y) => {
      m == null || m(y), u(!1);
    }, p = l ? i : n, v = {
      up: "flex-col-reverse items-center",
      down: "flex-col items-center",
      left: "flex-row-reverse items-center",
      right: "flex-row items-center"
    }, g = r === "up" || r === "down";
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: s,
        className: me(
          fe(
            "fixed z-40 flex",
            v[r],
            g ? "space-y-3" : "space-x-3",
            c[t],
            a
          )
        ),
        ...o,
        children: [
          l && /* @__PURE__ */ x.jsx(
            "div",
            {
              className: fe(
                "flex",
                g ? "flex-col space-y-3" : "flex-row space-x-3"
              ),
              children: e.map((m, y) => /* @__PURE__ */ x.jsx(
                dW,
                {
                  content: m.label,
                  position: f,
                  children: T.cloneElement(
                    /* @__PURE__ */ x.jsx(
                      "button",
                      {
                        type: "button",
                        className: "flex h-11 w-11 items-center justify-center rounded-full bg-surface shadow-lg ring-1 ring-slate-200 text-text-primary hover:bg-slate-50 transition-colors",
                        children: /* @__PURE__ */ x.jsx(bl, { icon: m.icon, variant: "default", size: "md" })
                      }
                    ),
                    {
                      onClick: h(m.onClick)
                    }
                  )
                },
                m.label + y
              ))
            }
          ),
          /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              onClick: d,
              className: "flex h-14 w-14 items-center justify-center rounded-full bg-primary-500 text-white shadow-xl hover:bg-primary-600 active:bg-primary-700 transition-colors",
              children: /* @__PURE__ */ x.jsx(p, { className: "h-6 w-6" })
            }
          )
        ]
      }
    );
  }
);
oee.displayName = "SpeedDial";
const oh = ({
  label: e,
  options: t,
  value: r,
  onChange: n,
  className: i,
  headerRight: a,
  renderOption: o,
  side: s = "bottom",
  align: l = "start",
  sideOffset: u = 8,
  autoPosition: c = !0
}) => {
  const f = r ?? "", d = T.useRef(null), [h, p] = T.useState(s), [v, g] = T.useState({});
  T.useEffect(() => {
    p(s);
  }, [s]), T.useLayoutEffect(() => {
    if (!c || typeof window > "u") return;
    const b = d.current;
    if (!b) return;
    const w = () => {
      const _ = b.getBoundingClientRect(), S = 8, C = b.offsetParent instanceof HTMLElement ? b.offsetParent : b.parentElement, A = C == null ? void 0 : C.getBoundingClientRect();
      let M = 0, D = 0;
      const R = (b.style.transform || "").match(/translate\(([-\d.]+)px,\s*([-\d.]+)px\)/);
      R && (M = Number(R[1]), D = Number(R[2]));
      const O = {
        top: _.top - D,
        bottom: _.bottom - D,
        left: _.left - M,
        right: _.right - M,
        width: _.width,
        height: _.height
      }, E = A ? A.top - u - S : O.top - S, L = A ? window.innerHeight - (A.bottom + u) - S : window.innerHeight - O.bottom - S;
      if (h === "bottom" ? O.height > L && E > L : O.height > E && L > E) {
        p(h === "bottom" ? "top" : "bottom");
        return;
      }
      let P = 0, k = 0;
      O.left < S ? P = S - O.left : O.right > window.innerWidth - S && (P = window.innerWidth - S - O.right), h === "bottom" && O.bottom > window.innerHeight - S ? k = window.innerHeight - S - O.bottom : h === "top" && O.top < S && (k = S - O.top), g(P !== 0 || k !== 0 ? { transform: `translate(${P}px, ${k}px)` } : {});
    };
    return w(), window.addEventListener("resize", w), window.addEventListener("scroll", w, !0), () => {
      window.removeEventListener("resize", w), window.removeEventListener("scroll", w, !0);
    };
  }, [c, h, l, t, u, r]);
  const m = fe(
    "absolute z-50 min-w-[180px]",
    h === "bottom" ? "top-full" : "bottom-full",
    l === "end" ? "right-0" : "left-0"
  ), y = h === "bottom" ? { marginTop: u } : { marginBottom: u };
  return /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: d,
      className: me(m, i),
      style: { ...y, ...v },
      children: /* @__PURE__ */ x.jsxs("div", { className: "rounded-2xl border border-slate-200 bg-surface text-sm shadow-lg", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex w-full items-center justify-between rounded-t-2xl px-4 py-2 text-xs text-text-muted", children: [
          /* @__PURE__ */ x.jsx("span", { className: "truncate", children: e }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            a,
            /* @__PURE__ */ x.jsx("span", { className: "text-[10px]", children: "▲" })
          ] })
        ] }),
        /* @__PURE__ */ x.jsx("div", { className: "pt-1", children: t.map((b) => {
          const w = b.value === f;
          return o ? /* @__PURE__ */ x.jsx("div", { className: "mx-1 my-0.5 overflow-hidden rounded-xl", children: o(b, { selected: w }) }, b.value) : /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              disabled: b.disabled,
              onClick: () => {
                b.disabled || n == null || n(b.value);
              },
              className: me(
                fe(
                  "mx-1 my-0.5 flex w-full items-center rounded-xl px-4 py-1.5 text-left text-sm",
                  !b.disabled && "cursor-pointer hover:bg-slate-50",
                  b.disabled && "cursor-not-allowed text-text-muted",
                  w && "font-medium text-text-primary"
                )
              ),
              children: b.label ?? b.value
            },
            b.value
          );
        }) })
      ] })
    }
  );
};
oh.displayName = "MenuDropdown";
const sg = ({
  anchorRef: e,
  open: t,
  label: r,
  options: n,
  value: i,
  onChange: a,
  onDismiss: o,
  className: s,
  headerRight: l,
  renderOption: u,
  side: c = "bottom",
  align: f = "start",
  sideOffset: d = 8,
  autoFlip: h = !0
}) => {
  const p = i ?? "", v = T.useRef(null), [g, m] = T.useState(c), [y, b] = T.useState({ left: -9999, top: -9999 });
  return T.useEffect(() => {
    m(c);
  }, [c]), T.useLayoutEffect(() => {
    if (!t || typeof window > "u") return;
    const w = e.current, _ = v.current;
    if (!w || !_) return;
    const S = () => {
      const A = w.getBoundingClientRect(), M = _.getBoundingClientRect(), D = A.top - d - 8, N = window.innerHeight - (A.bottom + d) - 8;
      let R = g;
      if (h && (g === "bottom" ? M.height > N && D > N && (R = "top") : M.height > D && N > D && (R = "bottom")), R !== g) {
        m(R);
        return;
      }
      const O = f === "end" ? A.right - M.width : A.left, E = g === "bottom" ? A.bottom + d : A.top - d - M.height, L = Math.min(Math.max(O, 8), window.innerWidth - 8 - M.width), I = Math.min(Math.max(E, 8), window.innerHeight - 8 - M.height);
      b({ left: L, top: I });
    };
    return S(), window.addEventListener("resize", S), window.addEventListener("scroll", S, !0), () => {
      window.removeEventListener("resize", S), window.removeEventListener("scroll", S, !0);
    };
  }, [f, e, h, t, g, d]), T.useEffect(() => {
    if (!t || typeof document > "u") return;
    const w = (_) => {
      var C, A;
      const S = _.target;
      (C = v.current) != null && C.contains(S) || (A = e.current) != null && A.contains(S) || o == null || o();
    };
    return document.addEventListener("mousedown", w, !0), () => document.removeEventListener("mousedown", w, !0);
  }, [e, o, t]), !t || typeof document > "u" ? null : fW(
    /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: v,
        className: me(fe("fixed z-50 min-w-[180px]"), s),
        style: y,
        children: /* @__PURE__ */ x.jsxs("div", { className: "rounded-2xl border border-slate-200 bg-surface text-sm shadow-lg", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex w-full min-w-0 items-center justify-between gap-2 rounded-t-2xl px-4 py-2 text-xs text-text-muted", children: [
            /* @__PURE__ */ x.jsx("span", { className: "min-w-0 truncate", children: r }),
            /* @__PURE__ */ x.jsxs("div", { className: "flex shrink-0 items-center gap-2", children: [
              l,
              /* @__PURE__ */ x.jsx("span", { className: "text-[10px]", children: "▲" })
            ] })
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "pt-1", children: n.map((w) => {
            const _ = w.value === p;
            return u ? /* @__PURE__ */ x.jsx("div", { className: "mx-1 my-0.5 rounded-xl", children: u(w, { selected: _ }) }, w.value) : /* @__PURE__ */ x.jsx(
              "button",
              {
                type: "button",
                disabled: w.disabled,
                onClick: () => {
                  w.disabled || a == null || a(w.value);
                },
                className: me(
                  fe(
                    "mx-1 my-0.5 flex w-full items-center rounded-xl px-4 py-1.5 text-left text-sm",
                    !w.disabled && "cursor-pointer hover:bg-slate-50",
                    w.disabled && "cursor-not-allowed text-text-muted",
                    _ && "font-medium text-text-primary"
                  )
                ),
                children: w.label ?? w.value
              },
              w.value
            );
          }) })
        ] })
      }
    ),
    document.body
  );
};
sg.displayName = "MenuDropdownPortal";
const pu = (e, t, r) => Math.min(r, Math.max(t, e)), see = ({
  open: e,
  onClose: t,
  items: r,
  initialIndex: n = 0,
  index: i,
  onIndexChange: a,
  modalSize: o = "xl"
}) => {
  const s = typeof i == "number", [l, u] = T.useState(() => pu(n, 0, Math.max(0, r.length - 1)));
  T.useEffect(() => {
    e && (s || u(pu(n, 0, Math.max(0, r.length - 1))));
  }, [n, s, r.length, e]);
  const c = s ? pu(i, 0, Math.max(0, r.length - 1)) : l, f = r[c], d = T.useCallback(
    (m) => {
      const y = pu(m, 0, Math.max(0, r.length - 1));
      s || u(y), a == null || a(y);
    },
    [s, r.length, a]
  ), h = c > 0, p = c < r.length - 1, [v, g] = T.useState(1);
  return T.useEffect(() => {
    g(1);
  }, [c, e]), T.useEffect(() => {
    if (!e) return;
    const m = (y) => {
      if (y.key === "Escape") {
        y.preventDefault(), t();
        return;
      }
      if (y.key === "ArrowLeft") {
        if (!h) return;
        y.preventDefault(), d(c - 1);
        return;
      }
      if (y.key === "ArrowRight") {
        if (!p) return;
        y.preventDefault(), d(c + 1);
      }
    };
    return window.addEventListener("keydown", m), () => window.removeEventListener("keydown", m);
  }, [c, p, h, t, e, d]), e ? /* @__PURE__ */ x.jsx(
    Pa,
    {
      open: e,
      onClose: t,
      title: (f == null ? void 0 : f.title) ?? (r.length > 1 ? `${c + 1}/${r.length}` : void 0),
      size: o,
      children: /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-3", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex flex-wrap items-center justify-between gap-2", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ x.jsx(
              xt,
              {
                variant: "secondary",
                size: "sm",
                onClick: () => d(c - 1),
                disabled: !h,
                children: "Trước"
              }
            ),
            /* @__PURE__ */ x.jsx(
              xt,
              {
                variant: "secondary",
                size: "sm",
                onClick: () => d(c + 1),
                disabled: !p,
                children: "Sau"
              }
            )
          ] }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            (f == null ? void 0 : f.type) === "image" && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
              /* @__PURE__ */ x.jsx(
                xt,
                {
                  variant: "secondary",
                  size: "sm",
                  onClick: () => g((m) => pu(Number((m - 0.25).toFixed(2)), 0.5, 3)),
                  disabled: v <= 0.5,
                  children: "-"
                }
              ),
              /* @__PURE__ */ x.jsxs("div", { className: "text-xs text-text-muted min-w-[72px] text-center", children: [
                Math.round(v * 100),
                "%"
              ] }),
              /* @__PURE__ */ x.jsx(
                xt,
                {
                  variant: "secondary",
                  size: "sm",
                  onClick: () => g((m) => pu(Number((m + 0.25).toFixed(2)), 0.5, 3)),
                  disabled: v >= 3,
                  children: "+"
                }
              ),
              /* @__PURE__ */ x.jsx(xt, { variant: "secondary", size: "sm", onClick: () => g(1), disabled: v === 1, children: "Reset" })
            ] }),
            (f == null ? void 0 : f.src) && /* @__PURE__ */ x.jsx(
              "a",
              {
                href: f.src,
                target: "_blank",
                rel: "noreferrer",
                className: "text-sm font-medium text-primary-600 hover:underline",
                children: "Mở tab mới"
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ x.jsx("div", { className: "rounded-2xl bg-slate-50 p-2", children: f ? f.type === "image" ? /* @__PURE__ */ x.jsx("div", { className: "max-h-[70vh] overflow-auto", children: /* @__PURE__ */ x.jsx("div", { className: "flex w-full items-center justify-center", children: /* @__PURE__ */ x.jsx(
          "img",
          {
            src: f.src,
            alt: f.title ?? "",
            style: { transform: `scale(${v})`, transformOrigin: "center center" },
            className: "max-h-[70vh] max-w-full select-none rounded-xl bg-slate-100 object-contain",
            draggable: !1
          }
        ) }) }) : f.type === "video" ? /* @__PURE__ */ x.jsx(
          "video",
          {
            src: f.src,
            controls: !0,
            className: "w-full max-h-[70vh] rounded-xl bg-black",
            poster: f.poster
          }
        ) : f.type === "audio" ? /* @__PURE__ */ x.jsx("audio", { src: f.src, controls: !0, className: "w-full" }) : f.type === "pdf" ? /* @__PURE__ */ x.jsx(
          L2,
          {
            src: f.src,
            showLoading: !0,
            containerClassName: "w-full h-[70vh] rounded-xl",
            className: "rounded-xl"
          }
        ) : f.type === "iframe" ? /* @__PURE__ */ x.jsx(
          L2,
          {
            src: f.src,
            aspectRatio: "16/9",
            showLoading: !0,
            containerClassName: "w-full",
            className: "rounded-xl"
          }
        ) : /* @__PURE__ */ x.jsxs("div", { className: "py-10 text-center", children: [
          /* @__PURE__ */ x.jsx("div", { className: "text-sm text-text-muted", children: "Không hỗ trợ preview loại file này." }),
          /* @__PURE__ */ x.jsx("div", { className: "mt-2", children: /* @__PURE__ */ x.jsx(
            "a",
            {
              href: f.src,
              target: "_blank",
              rel: "noreferrer",
              className: "text-sm font-medium text-primary-600 hover:underline",
              children: "Mở file"
            }
          ) })
        ] }) : /* @__PURE__ */ x.jsx("div", { className: "py-10 text-center text-sm text-text-muted", children: "Không có nội dung" }) }),
        r.length > 1 && /* @__PURE__ */ x.jsx("div", { className: "flex flex-wrap gap-2", children: r.slice(0, 12).map((m, y) => {
          const b = m.id ?? `${m.type}:${m.src}:${y}`, w = y === c;
          return /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              className: "rounded-full px-3 py-1 text-xs transition-colors " + (w ? "bg-primary-50 text-text-primary" : "bg-surface text-text-muted hover:bg-slate-50"),
              onClick: () => d(y),
              children: m.title ?? `#${y + 1}`
            },
            b
          );
        }) })
      ] })
    }
  ) : null;
};
see.displayName = "MediaPreview";
const lee = T.forwardRef(
  ({
    className: e,
    items: t,
    indent: r = 16,
    selectedId: n,
    defaultSelectedId: i,
    onSelectedIdChange: a,
    expandedIds: o,
    defaultExpandedIds: s,
    onExpandedIdsChange: l,
    onNodeToggle: u,
    renderLabel: c,
    renderActions: f,
    role: d,
    ...h
  }, p) => {
    const v = n !== void 0, [g, m] = T.useState(
      i
    ), y = n ?? g, b = o !== void 0, [w, _] = T.useState(
      s ?? []
    ), S = o ?? w, C = (E, L) => {
      v || m(E), a == null || a(E, L);
    }, A = (E) => {
      b || _(E), l == null || l(E);
    }, M = (E) => S.includes(E), D = (E) => {
      const L = !M(E.id), I = L ? [...S, E.id] : S.filter((P) => P !== E.id);
      A(I), u == null || u(E, L);
    }, N = (E) => {
      E.disabled || C(E.id, E);
    }, R = (E, L) => {
      var k;
      if (E.icon) return E.icon;
      const I = !!((k = E.children) != null && k.length);
      return E.type === "folder" || I ? /* @__PURE__ */ x.jsx(
        bl,
        {
          icon: L ? iU : oU,
          size: "sm",
          variant: E.disabled ? "muted" : "default"
        }
      ) : /* @__PURE__ */ x.jsx(bl, { icon: rU, size: "sm", variant: E.disabled ? "muted" : "default" });
    }, O = (E, L) => E.map((I) => {
      var B;
      const P = !!((B = I.children) != null && B.length), k = P ? M(I.id) : !1, z = y === I.id, V = k ? FW : vS;
      return /* @__PURE__ */ x.jsxs(T.Fragment, { children: [
        /* @__PURE__ */ x.jsxs(
          "div",
          {
            role: "treeitem",
            "aria-expanded": P ? k : void 0,
            "aria-selected": z,
            tabIndex: I.disabled ? -1 : 0,
            onClick: () => N(I),
            onKeyDown: (F) => {
              if (!I.disabled) {
                if (F.key === "Enter" || F.key === " ") {
                  F.preventDefault(), N(I);
                  return;
                }
                if (F.key === "ArrowRight" && P && !k) {
                  F.preventDefault(), D(I);
                  return;
                }
                F.key === "ArrowLeft" && P && k && (F.preventDefault(), D(I));
              }
            },
            className: me(
              fe(
                "flex items-center gap-2 rounded-lg px-2 py-1.5 text-sm transition-colors",
                "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500",
                I.disabled ? "opacity-50 cursor-not-allowed" : "cursor-pointer hover:bg-surface-alt",
                z && !I.disabled && "bg-primary-50 text-primary-700"
              )
            ),
            style: { paddingLeft: L * r },
            children: [
              P ? /* @__PURE__ */ x.jsx(
                "button",
                {
                  type: "button",
                  disabled: I.disabled,
                  "aria-label": k ? "Collapse" : "Expand",
                  "aria-expanded": k,
                  onClick: (F) => {
                    F.stopPropagation(), D(I);
                  },
                  className: me(
                    fe(
                      "flex h-6 w-6 items-center justify-center rounded transition-colors",
                      I.disabled ? "cursor-not-allowed" : "hover:bg-surface"
                    )
                  ),
                  children: /* @__PURE__ */ x.jsx(bl, { icon: V, size: "xs", variant: "muted" })
                }
              ) : /* @__PURE__ */ x.jsx("span", { className: "h-6 w-6" }),
              /* @__PURE__ */ x.jsx("span", { className: "flex items-center", children: R(I, k) }),
              /* @__PURE__ */ x.jsx("div", { className: "flex min-w-0 flex-1 items-center gap-2", children: /* @__PURE__ */ x.jsx("span", { className: fe("truncate", I.disabled ? "text-text-muted" : "text-text-primary"), children: c ? c(I) : I.label }) }),
              (f || I.actions) && /* @__PURE__ */ x.jsx("div", { className: "flex items-center gap-1 text-text-muted", children: f ? f(I) : I.actions })
            ]
          }
        ),
        P && k && /* @__PURE__ */ x.jsx("div", { role: "group", children: O(I.children ?? [], L + 1) })
      ] }, I.id);
    });
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: p,
        role: d ?? "tree",
        className: me(fe("w-full select-none space-y-0.5", e)),
        ...h,
        children: O(t, 0)
      }
    );
  }
);
lee.displayName = "TreeView";
const uee = T.forwardRef(
  ({ className: e, items: t, header: r, footer: n, ...i }, a) => /* @__PURE__ */ x.jsxs(
    "nav",
    {
      ref: a,
      className: me(
        fe("flex h-full w-full flex-col gap-3 text-sm text-text-secondary", e)
      ),
      ...i,
      children: [
        r && /* @__PURE__ */ x.jsx("div", { className: "mb-2 text-xs font-semibold uppercase tracking-wide text-text-muted", children: r }),
        /* @__PURE__ */ x.jsx("div", { className: "flex-1 space-y-1", children: t.map((o) => {
          const s = o.active, l = o.href ? "a" : "button";
          return /* @__PURE__ */ x.jsxs(
            l,
            {
              href: o.href,
              type: o.href ? void 0 : "button",
              onClick: o.onClick,
              disabled: o.disabled,
              className: me(
                fe(
                  "flex w-full items-center gap-3 rounded-full px-3 py-2 text-sm transition-colors",
                  "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500",
                  s ? "bg-primary-50 text-primary-700" : "text-text-secondary hover:bg-surface-alt hover:text-text-primary",
                  o.disabled && "opacity-50 cursor-not-allowed"
                )
              ),
              children: [
                o.icon && /* @__PURE__ */ x.jsx("span", { className: "text-lg text-primary-500", children: o.icon }),
                /* @__PURE__ */ x.jsx("span", { className: "flex-1 truncate", children: o.label }),
                o.badge && /* @__PURE__ */ x.jsx("span", { className: "ml-2 text-xs text-text-muted", children: o.badge })
              ]
            },
            o.id
          );
        }) }),
        n && /* @__PURE__ */ x.jsx("div", { className: "mt-4 text-xs text-text-muted", children: n })
      ]
    }
  )
);
uee.displayName = "SidebarNav";
const cee = T.forwardRef(
  ({ className: e, left: t, center: r, right: n, sticky: i = !0, bordered: a = !0, ...o }, s) => /* @__PURE__ */ x.jsxs(
    "header",
    {
      ref: s,
      className: me(
        fe(
          "flex h-16 items-center gap-4 bg-background/80 px-4 sm:px-6 backdrop-blur-sm",
          i && "sticky top-0 z-20",
          a && "border-b border-slate-200",
          e
        )
      ),
      ...o,
      children: [
        /* @__PURE__ */ x.jsx("div", { className: "flex flex-1 items-center gap-3", children: t && /* @__PURE__ */ x.jsx("div", { className: "flex items-center gap-2 min-w-0", children: t }) }),
        r && /* @__PURE__ */ x.jsx("div", { className: "hidden md:flex flex-1 items-center justify-center gap-2 min-w-0", children: r }),
        /* @__PURE__ */ x.jsx("div", { className: fe("flex items-center gap-2", r && "flex-none"), children: n })
      ]
    }
  )
);
cee.displayName = "TopNav";
const Ek = T.forwardRef(
  ({ className: e, title: t = "Board", locale: r, count: n, extra: i, actions: a, ...o }, s) => /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: s,
      className: me(
        fe("mb-3 flex items-center justify-between gap-3", e)
      ),
      ...o,
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-baseline gap-2", children: [
            /* @__PURE__ */ x.jsx("h2", { className: "text-sm font-semibold text-text-primary", children: t }),
            typeof n == "number" && /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-muted", children: n })
          ] }),
          r && /* @__PURE__ */ x.jsx("span", { className: "rounded-full bg-slate-100 px-2 py-0.5 text-[10px] uppercase text-text-muted", children: r }),
          i && /* @__PURE__ */ x.jsx("div", { className: "ml-2 flex items-center gap-2", children: i })
        ] }),
        /* @__PURE__ */ x.jsx("div", { className: "flex items-center gap-2", children: a })
      ]
    }
  )
);
Ek.displayName = "KanbanBoardToolbar";
var k2 = function(e, t) {
  return k2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (r[i] = n[i]);
  }, k2(e, t);
};
function Dk(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  k2(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var wr = function() {
  return wr = Object.assign || function(t) {
    for (var r, n = 1, i = arguments.length; n < i; n++) {
      r = arguments[n];
      for (var a in r) Object.prototype.hasOwnProperty.call(r, a) && (t[a] = r[a]);
    }
    return t;
  }, wr.apply(this, arguments);
};
function Cy(e, t) {
  var r = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, n = Object.getOwnPropertySymbols(e); i < n.length; i++)
      t.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[i]) && (r[n[i]] = e[n[i]]);
  return r;
}
function SE(e, t, r, n) {
  function i(a) {
    return a instanceof r ? a : new r(function(o) {
      o(a);
    });
  }
  return new (r || (r = Promise))(function(a, o) {
    function s(c) {
      try {
        u(n.next(c));
      } catch (f) {
        o(f);
      }
    }
    function l(c) {
      try {
        u(n.throw(c));
      } catch (f) {
        o(f);
      }
    }
    function u(c) {
      c.done ? a(c.value) : i(c.value).then(s, l);
    }
    u((n = n.apply(e, t || [])).next());
  });
}
function CE(e, t) {
  var r = { label: 0, sent: function() {
    if (a[0] & 1) throw a[1];
    return a[1];
  }, trys: [], ops: [] }, n, i, a, o = Object.create((typeof Iterator == "function" ? Iterator : Object).prototype);
  return o.next = s(0), o.throw = s(1), o.return = s(2), typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(u) {
    return function(c) {
      return l([u, c]);
    };
  }
  function l(u) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; o && (o = 0, u[0] && (r = 0)), r; ) try {
      if (n = 1, i && (a = u[0] & 2 ? i.return : u[0] ? i.throw || ((a = i.return) && a.call(i), 0) : i.next) && !(a = a.call(i, u[1])).done) return a;
      switch (i = 0, a && (u = [u[0] & 2, a.value]), u[0]) {
        case 0:
        case 1:
          a = u;
          break;
        case 4:
          return r.label++, { value: u[1], done: !1 };
        case 5:
          r.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (a = r.trys, !(a = a.length > 0 && a[a.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            r = 0;
            continue;
          }
          if (u[0] === 3 && (!a || u[1] > a[0] && u[1] < a[3])) {
            r.label = u[1];
            break;
          }
          if (u[0] === 6 && r.label < a[1]) {
            r.label = a[1], a = u;
            break;
          }
          if (a && r.label < a[2]) {
            r.label = a[2], r.ops.push(u);
            break;
          }
          a[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      u = t.call(e, r);
    } catch (c) {
      u = [6, c], i = 0;
    } finally {
      n = a = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}
function Nk(e, t, r) {
  if (r || arguments.length === 2) for (var n = 0, i = t.length, a; n < i; n++)
    (a || !(n in t)) && (a || (a = Array.prototype.slice.call(t, 0, n)), a[n] = t[n]);
  return e.concat(a || Array.prototype.slice.call(t));
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var O2 = function(e, t) {
  return O2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (r[i] = n[i]);
  }, O2(e, t);
};
function ee(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  O2(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
var fee = /* @__PURE__ */ function() {
  function e() {
    this.firefox = !1, this.ie = !1, this.edge = !1, this.newEdge = !1, this.weChat = !1;
  }
  return e;
}(), dee = /* @__PURE__ */ function() {
  function e() {
    this.browser = new fee(), this.node = !1, this.wxa = !1, this.worker = !1, this.svgSupported = !1, this.touchEventsSupported = !1, this.pointerEventsSupported = !1, this.domSupported = !1, this.transformSupported = !1, this.transform3dSupported = !1, this.hasGlobalWindow = typeof window < "u";
  }
  return e;
}(), st = new dee();
typeof wx == "object" && typeof wx.getSystemInfoSync == "function" ? (st.wxa = !0, st.touchEventsSupported = !0) : typeof document > "u" && typeof self < "u" ? st.worker = !0 : !st.hasGlobalWindow || "Deno" in window ? (st.node = !0, st.svgSupported = !0) : hee(navigator.userAgent, st);
function hee(e, t) {
  var r = t.browser, n = e.match(/Firefox\/([\d.]+)/), i = e.match(/MSIE\s([\d.]+)/) || e.match(/Trident\/.+?rv:(([\d.]+))/), a = e.match(/Edge?\/([\d.]+)/), o = /micromessenger/i.test(e);
  n && (r.firefox = !0, r.version = n[1]), i && (r.ie = !0, r.version = i[1]), a && (r.edge = !0, r.version = a[1], r.newEdge = +a[1].split(".")[0] > 18), o && (r.weChat = !0), t.svgSupported = typeof SVGRect < "u", t.touchEventsSupported = "ontouchstart" in window && !r.ie && !r.edge, t.pointerEventsSupported = "onpointerdown" in window && (r.edge || r.ie && +r.version >= 11), t.domSupported = typeof document < "u";
  var s = document.documentElement.style;
  t.transform3dSupported = (r.ie && "transition" in s || r.edge || "WebKitCSSMatrix" in window && "m11" in new WebKitCSSMatrix() || "MozPerspective" in s) && !("OTransition" in s), t.transformSupported = t.transform3dSupported || r.ie && +r.version >= 9;
}
var HS = 12, Ik = "sans-serif", ns = HS + "px " + Ik, pee = 20, vee = 100, gee = "007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";
function mee(e) {
  var t = {};
  if (typeof JSON > "u")
    return t;
  for (var r = 0; r < e.length; r++) {
    var n = String.fromCharCode(r + 32), i = (e.charCodeAt(r) - pee) / vee;
    t[n] = i;
  }
  return t;
}
var yee = mee(gee), Di = {
  createCanvas: function() {
    return typeof document < "u" && document.createElement("canvas");
  },
  measureText: /* @__PURE__ */ function() {
    var e, t;
    return function(r, n) {
      if (!e) {
        var i = Di.createCanvas();
        e = i && i.getContext("2d");
      }
      if (e)
        return t !== n && (t = e.font = n || ns), e.measureText(r);
      r = r || "", n = n || ns;
      var a = /((?:\d+)?\.?\d*)px/.exec(n), o = a && +a[1] || HS, s = 0;
      if (n.indexOf("mono") >= 0)
        s = o * r.length;
      else
        for (var l = 0; l < r.length; l++) {
          var u = yee[r[l]];
          s += u == null ? o : u * o;
        }
      return { width: s };
    };
  }(),
  loadImage: function(e, t, r) {
    var n = new Image();
    return n.onload = t, n.onerror = r, n.src = e, n;
  }
};
function Lk(e) {
  for (var t in Di)
    e[t] && (Di[t] = e[t]);
}
var Rk = ei([
  "Function",
  "RegExp",
  "Date",
  "Error",
  "CanvasGradient",
  "CanvasPattern",
  "Image",
  "Canvas"
], function(e, t) {
  return e["[object " + t + "]"] = !0, e;
}, {}), Pk = ei([
  "Int8",
  "Uint8",
  "Uint8Clamped",
  "Int16",
  "Uint16",
  "Int32",
  "Uint32",
  "Float32",
  "Float64"
], function(e, t) {
  return e["[object " + t + "Array]"] = !0, e;
}, {}), rf = Object.prototype.toString, Ty = Array.prototype, xee = Ty.forEach, bee = Ty.filter, GS = Ty.slice, wee = Ty.map, TE = (function() {
}).constructor, Fp = TE ? TE.prototype : null, WS = "__proto__", _ee = 2311;
function US() {
  return _ee++;
}
function Kn() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  typeof console < "u" && console.error.apply(console, e);
}
function ze(e) {
  if (e == null || typeof e != "object")
    return e;
  var t = e, r = rf.call(e);
  if (r === "[object Array]") {
    if (!fc(e)) {
      t = [];
      for (var n = 0, i = e.length; n < i; n++)
        t[n] = ze(e[n]);
    }
  } else if (Pk[r]) {
    if (!fc(e)) {
      var a = e.constructor;
      if (a.from)
        t = a.from(e);
      else {
        t = new a(e.length);
        for (var n = 0, i = e.length; n < i; n++)
          t[n] = e[n];
      }
    }
  } else if (!Rk[r] && !fc(e) && !is(e)) {
    t = {};
    for (var o in e)
      e.hasOwnProperty(o) && o !== WS && (t[o] = ze(e[o]));
  }
  return t;
}
function Xe(e, t, r) {
  if (!Ne(t) || !Ne(e))
    return r ? ze(t) : e;
  for (var n in t)
    if (t.hasOwnProperty(n) && n !== WS) {
      var i = e[n], a = t[n];
      Ne(a) && Ne(i) && !le(a) && !le(i) && !is(a) && !is(i) && !z2(a) && !z2(i) && !fc(a) && !fc(i) ? Xe(i, a, r) : (r || !(n in e)) && (e[n] = ze(t[n]));
    }
  return e;
}
function Ay(e, t) {
  for (var r = e[0], n = 1, i = e.length; n < i; n++)
    r = Xe(r, e[n], t);
  return r;
}
function ae(e, t) {
  if (Object.assign)
    Object.assign(e, t);
  else
    for (var r in t)
      t.hasOwnProperty(r) && r !== WS && (e[r] = t[r]);
  return e;
}
function Ie(e, t, r) {
  for (var n = ut(t), i = 0, a = n.length; i < a; i++) {
    var o = n[i];
    (r ? t[o] != null : e[o] == null) && (e[o] = t[o]);
  }
  return e;
}
var See = Di.createCanvas;
function rt(e, t) {
  if (e) {
    if (e.indexOf)
      return e.indexOf(t);
    for (var r = 0, n = e.length; r < n; r++)
      if (e[r] === t)
        return r;
  }
  return -1;
}
function YS(e, t) {
  var r = e.prototype;
  function n() {
  }
  n.prototype = t.prototype, e.prototype = new n();
  for (var i in r)
    r.hasOwnProperty(i) && (e.prototype[i] = r[i]);
  e.prototype.constructor = e, e.superClass = t;
}
function ir(e, t, r) {
  if (e = "prototype" in e ? e.prototype : e, t = "prototype" in t ? t.prototype : t, Object.getOwnPropertyNames)
    for (var n = Object.getOwnPropertyNames(t), i = 0; i < n.length; i++) {
      var a = n[i];
      a !== "constructor" && (r ? t[a] != null : e[a] == null) && (e[a] = t[a]);
    }
  else
    Ie(e, t, r);
}
function zr(e) {
  return !e || typeof e == "string" ? !1 : typeof e.length == "number";
}
function j(e, t, r) {
  if (e && t)
    if (e.forEach && e.forEach === xee)
      e.forEach(t, r);
    else if (e.length === +e.length)
      for (var n = 0, i = e.length; n < i; n++)
        t.call(r, e[n], n, e);
    else
      for (var a in e)
        e.hasOwnProperty(a) && t.call(r, e[a], a, e);
}
function ue(e, t, r) {
  if (!e)
    return [];
  if (!t)
    return My(e);
  if (e.map && e.map === wee)
    return e.map(t, r);
  for (var n = [], i = 0, a = e.length; i < a; i++)
    n.push(t.call(r, e[i], i, e));
  return n;
}
function ei(e, t, r, n) {
  if (e && t) {
    for (var i = 0, a = e.length; i < a; i++)
      r = t.call(n, r, e[i], i, e);
    return r;
  }
}
function Ct(e, t, r) {
  if (!e)
    return [];
  if (!t)
    return My(e);
  if (e.filter && e.filter === bee)
    return e.filter(t, r);
  for (var n = [], i = 0, a = e.length; i < a; i++)
    t.call(r, e[i], i, e) && n.push(e[i]);
  return n;
}
function kk(e, t, r) {
  if (e && t) {
    for (var n = 0, i = e.length; n < i; n++)
      if (t.call(r, e[n], n, e))
        return e[n];
  }
}
function ut(e) {
  if (!e)
    return [];
  if (Object.keys)
    return Object.keys(e);
  var t = [];
  for (var r in e)
    e.hasOwnProperty(r) && t.push(r);
  return t;
}
function Cee(e, t) {
  for (var r = [], n = 2; n < arguments.length; n++)
    r[n - 2] = arguments[n];
  return function() {
    return e.apply(t, r.concat(GS.call(arguments)));
  };
}
var xe = Fp && Ee(Fp.bind) ? Fp.call.bind(Fp.bind) : Cee;
function We(e) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  return function() {
    return e.apply(this, t.concat(GS.call(arguments)));
  };
}
function le(e) {
  return Array.isArray ? Array.isArray(e) : rf.call(e) === "[object Array]";
}
function Ee(e) {
  return typeof e == "function";
}
function ge(e) {
  return typeof e == "string";
}
function sh(e) {
  return rf.call(e) === "[object String]";
}
function bt(e) {
  return typeof e == "number";
}
function Ne(e) {
  var t = typeof e;
  return t === "function" || !!e && t === "object";
}
function z2(e) {
  return !!Rk[rf.call(e)];
}
function Kr(e) {
  return !!Pk[rf.call(e)];
}
function is(e) {
  return typeof e == "object" && typeof e.nodeType == "number" && typeof e.ownerDocument == "object";
}
function Zh(e) {
  return e.colorStops != null;
}
function Ok(e) {
  return e.image != null;
}
function ZS(e) {
  return rf.call(e) === "[object RegExp]";
}
function as(e) {
  return e !== e;
}
function ur() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  for (var r = 0, n = e.length; r < n; r++)
    if (e[r] != null)
      return e[r];
}
function Ge(e, t) {
  return e ?? t;
}
function En(e, t, r) {
  return e ?? t ?? r;
}
function My(e) {
  for (var t = [], r = 1; r < arguments.length; r++)
    t[r - 1] = arguments[r];
  return GS.apply(e, t);
}
function Ey(e) {
  if (typeof e == "number")
    return [e, e, e, e];
  var t = e.length;
  return t === 2 ? [e[0], e[1], e[0], e[1]] : t === 3 ? [e[0], e[1], e[2], e[1]] : e;
}
function Le(e, t) {
  if (!e)
    throw new Error(t);
}
function Xn(e) {
  return e == null ? null : typeof e.trim == "function" ? e.trim() : e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
}
var zk = "__ec_primitive__";
function lh(e) {
  e[zk] = !0;
}
function fc(e) {
  return e[zk];
}
var Tee = function() {
  function e() {
    this.data = {};
  }
  return e.prototype.delete = function(t) {
    var r = this.has(t);
    return r && delete this.data[t], r;
  }, e.prototype.has = function(t) {
    return this.data.hasOwnProperty(t);
  }, e.prototype.get = function(t) {
    return this.data[t];
  }, e.prototype.set = function(t, r) {
    return this.data[t] = r, this;
  }, e.prototype.keys = function() {
    return ut(this.data);
  }, e.prototype.forEach = function(t) {
    var r = this.data;
    for (var n in r)
      r.hasOwnProperty(n) && t(r[n], n);
  }, e;
}(), jk = typeof Map == "function";
function Aee() {
  return jk ? /* @__PURE__ */ new Map() : new Tee();
}
var Vk = function() {
  function e(t) {
    var r = le(t);
    this.data = Aee();
    var n = this;
    t instanceof e ? t.each(i) : t && j(t, i);
    function i(a, o) {
      r ? n.set(a, o) : n.set(o, a);
    }
  }
  return e.prototype.hasKey = function(t) {
    return this.data.has(t);
  }, e.prototype.get = function(t) {
    return this.data.get(t);
  }, e.prototype.set = function(t, r) {
    return this.data.set(t, r), r;
  }, e.prototype.each = function(t, r) {
    this.data.forEach(function(n, i) {
      t.call(r, n, i);
    });
  }, e.prototype.keys = function() {
    var t = this.data.keys();
    return jk ? Array.from(t) : t;
  }, e.prototype.removeKey = function(t) {
    this.data.delete(t);
  }, e;
}();
function Ce(e) {
  return new Vk(e);
}
function Nc(e, t) {
  for (var r = new e.constructor(e.length + t.length), n = 0; n < e.length; n++)
    r[n] = e[n];
  for (var i = e.length, n = 0; n < t.length; n++)
    r[n + i] = t[n];
  return r;
}
function Xh(e, t) {
  var r;
  if (Object.create)
    r = Object.create(e);
  else {
    var n = function() {
    };
    n.prototype = e, r = new n();
  }
  return t && ae(r, t), r;
}
function XS(e) {
  var t = e.style;
  t.webkitUserSelect = "none", t.userSelect = "none", t.webkitTapHighlightColor = "rgba(0,0,0,0)", t["-webkit-touch-callout"] = "none";
}
function be(e, t) {
  return e.hasOwnProperty(t);
}
function rr() {
}
var Id = 180 / Math.PI;
const Mee = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  HashMap: Vk,
  RADIAN_TO_DEGREE: Id,
  assert: Le,
  bind: xe,
  clone: ze,
  concatArray: Nc,
  createCanvas: See,
  createHashMap: Ce,
  createObject: Xh,
  curry: We,
  defaults: Ie,
  disableUserSelect: XS,
  each: j,
  eqNaN: as,
  extend: ae,
  filter: Ct,
  find: kk,
  guid: US,
  hasOwn: be,
  indexOf: rt,
  inherits: YS,
  isArray: le,
  isArrayLike: zr,
  isBuiltInObject: z2,
  isDom: is,
  isFunction: Ee,
  isGradientObject: Zh,
  isImagePatternObject: Ok,
  isNumber: bt,
  isObject: Ne,
  isPrimitive: fc,
  isRegExp: ZS,
  isString: ge,
  isStringSafe: sh,
  isTypedArray: Kr,
  keys: ut,
  logError: Kn,
  map: ue,
  merge: Xe,
  mergeAll: Ay,
  mixin: ir,
  noop: rr,
  normalizeCssArray: Ey,
  reduce: ei,
  retrieve: ur,
  retrieve2: Ge,
  retrieve3: En,
  setAsPrimitive: lh,
  slice: My,
  trim: Xn
}, Symbol.toStringTag, { value: "Module" }));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var j2 = function(e, t) {
  return j2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, n) {
    r.__proto__ = n;
  } || function(r, n) {
    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (r[i] = n[i]);
  }, j2(e, t);
};
function Ut(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  j2(e, t);
  function r() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (r.prototype = t.prototype, new r());
}
function ps(e, t) {
  return e == null && (e = 0), t == null && (t = 0), [e, t];
}
function Ur(e, t) {
  return e[0] = t[0], e[1] = t[1], e;
}
function ra(e) {
  return [e[0], e[1]];
}
function Bk(e, t, r) {
  return e[0] = t, e[1] = r, e;
}
function V2(e, t, r) {
  return e[0] = t[0] + r[0], e[1] = t[1] + r[1], e;
}
function Ug(e, t, r, n) {
  return e[0] = t[0] + r[0] * n, e[1] = t[1] + r[1] * n, e;
}
function zo(e, t, r) {
  return e[0] = t[0] - r[0], e[1] = t[1] - r[1], e;
}
function uh(e) {
  return Math.sqrt(KS(e));
}
var Eee = uh;
function KS(e) {
  return e[0] * e[0] + e[1] * e[1];
}
var Dee = KS;
function Nee(e, t, r) {
  return e[0] = t[0] * r[0], e[1] = t[1] * r[1], e;
}
function Iee(e, t, r) {
  return e[0] = t[0] / r[0], e[1] = t[1] / r[1], e;
}
function Lee(e, t) {
  return e[0] * t[0] + e[1] * t[1];
}
function Ld(e, t, r) {
  return e[0] = t[0] * r, e[1] = t[1] * r, e;
}
function Wl(e, t) {
  var r = uh(t);
  return r === 0 ? (e[0] = 0, e[1] = 0) : (e[0] = t[0] / r, e[1] = t[1] / r), e;
}
function Yg(e, t) {
  return Math.sqrt((e[0] - t[0]) * (e[0] - t[0]) + (e[1] - t[1]) * (e[1] - t[1]));
}
var Oa = Yg;
function Fk(e, t) {
  return (e[0] - t[0]) * (e[0] - t[0]) + (e[1] - t[1]) * (e[1] - t[1]);
}
var Yo = Fk;
function Ree(e, t) {
  return e[0] = -t[0], e[1] = -t[1], e;
}
function Rd(e, t, r, n) {
  return e[0] = t[0] + n * (r[0] - t[0]), e[1] = t[1] + n * (r[1] - t[1]), e;
}
function Ir(e, t, r) {
  var n = t[0], i = t[1];
  return e[0] = r[0] * n + r[2] * i + r[4], e[1] = r[1] * n + r[3] * i + r[5], e;
}
function za(e, t, r) {
  return e[0] = Math.min(t[0], r[0]), e[1] = Math.min(t[1], r[1]), e;
}
function ja(e, t, r) {
  return e[0] = Math.max(t[0], r[0]), e[1] = Math.max(t[1], r[1]), e;
}
const Pee = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: V2,
  applyTransform: Ir,
  clone: ra,
  copy: Ur,
  create: ps,
  dist: Oa,
  distSquare: Yo,
  distance: Yg,
  distanceSquare: Fk,
  div: Iee,
  dot: Lee,
  len: uh,
  lenSquare: KS,
  length: Eee,
  lengthSquare: Dee,
  lerp: Rd,
  max: ja,
  min: za,
  mul: Nee,
  negate: Ree,
  normalize: Wl,
  scale: Ld,
  scaleAndAdd: Ug,
  set: Bk,
  sub: zo
}, Symbol.toStringTag, { value: "Module" }));
var vu = /* @__PURE__ */ function() {
  function e(t, r) {
    this.target = t, this.topTarget = r && r.topTarget;
  }
  return e;
}(), kee = function() {
  function e(t) {
    this.handler = t, t.on("mousedown", this._dragStart, this), t.on("mousemove", this._drag, this), t.on("mouseup", this._dragEnd, this);
  }
  return e.prototype._dragStart = function(t) {
    for (var r = t.target; r && !r.draggable; )
      r = r.parent || r.__hostTarget;
    r && (this._draggingTarget = r, r.dragging = !0, this._x = t.offsetX, this._y = t.offsetY, this.handler.dispatchToElement(new vu(r, t), "dragstart", t.event));
  }, e.prototype._drag = function(t) {
    var r = this._draggingTarget;
    if (r) {
      var n = t.offsetX, i = t.offsetY, a = n - this._x, o = i - this._y;
      this._x = n, this._y = i, r.drift(a, o, t), this.handler.dispatchToElement(new vu(r, t), "drag", t.event);
      var s = this.handler.findHover(n, i, r).target, l = this._dropTarget;
      this._dropTarget = s, r !== s && (l && s !== l && this.handler.dispatchToElement(new vu(l, t), "dragleave", t.event), s && s !== l && this.handler.dispatchToElement(new vu(s, t), "dragenter", t.event));
    }
  }, e.prototype._dragEnd = function(t) {
    var r = this._draggingTarget;
    r && (r.dragging = !1), this.handler.dispatchToElement(new vu(r, t), "dragend", t.event), this._dropTarget && this.handler.dispatchToElement(new vu(this._dropTarget, t), "drop", t.event), this._draggingTarget = null, this._dropTarget = null;
  }, e;
}(), ai = function() {
  function e(t) {
    t && (this._$eventProcessor = t);
  }
  return e.prototype.on = function(t, r, n, i) {
    this._$handlers || (this._$handlers = {});
    var a = this._$handlers;
    if (typeof r == "function" && (i = n, n = r, r = null), !n || !t)
      return this;
    var o = this._$eventProcessor;
    r != null && o && o.normalizeQuery && (r = o.normalizeQuery(r)), a[t] || (a[t] = []);
    for (var s = 0; s < a[t].length; s++)
      if (a[t][s].h === n)
        return this;
    var l = {
      h: n,
      query: r,
      ctx: i || this,
      callAtLast: n.zrEventfulCallAtLast
    }, u = a[t].length - 1, c = a[t][u];
    return c && c.callAtLast ? a[t].splice(u, 0, l) : a[t].push(l), this;
  }, e.prototype.isSilent = function(t) {
    var r = this._$handlers;
    return !r || !r[t] || !r[t].length;
  }, e.prototype.off = function(t, r) {
    var n = this._$handlers;
    if (!n)
      return this;
    if (!t)
      return this._$handlers = {}, this;
    if (r) {
      if (n[t]) {
        for (var i = [], a = 0, o = n[t].length; a < o; a++)
          n[t][a].h !== r && i.push(n[t][a]);
        n[t] = i;
      }
      n[t] && n[t].length === 0 && delete n[t];
    } else
      delete n[t];
    return this;
  }, e.prototype.trigger = function(t) {
    for (var r = [], n = 1; n < arguments.length; n++)
      r[n - 1] = arguments[n];
    if (!this._$handlers)
      return this;
    var i = this._$handlers[t], a = this._$eventProcessor;
    if (i)
      for (var o = r.length, s = i.length, l = 0; l < s; l++) {
        var u = i[l];
        if (!(a && a.filter && u.query != null && !a.filter(t, u.query)))
          switch (o) {
            case 0:
              u.h.call(u.ctx);
              break;
            case 1:
              u.h.call(u.ctx, r[0]);
              break;
            case 2:
              u.h.call(u.ctx, r[0], r[1]);
              break;
            default:
              u.h.apply(u.ctx, r);
              break;
          }
      }
    return a && a.afterTrigger && a.afterTrigger(t), this;
  }, e.prototype.triggerWithContext = function(t) {
    for (var r = [], n = 1; n < arguments.length; n++)
      r[n - 1] = arguments[n];
    if (!this._$handlers)
      return this;
    var i = this._$handlers[t], a = this._$eventProcessor;
    if (i)
      for (var o = r.length, s = r[o - 1], l = i.length, u = 0; u < l; u++) {
        var c = i[u];
        if (!(a && a.filter && c.query != null && !a.filter(t, c.query)))
          switch (o) {
            case 0:
              c.h.call(s);
              break;
            case 1:
              c.h.call(s, r[0]);
              break;
            case 2:
              c.h.call(s, r[0], r[1]);
              break;
            default:
              c.h.apply(s, r.slice(1, o - 1));
              break;
          }
      }
    return a && a.afterTrigger && a.afterTrigger(t), this;
  }, e;
}(), Oee = Math.log(2);
function B2(e, t, r, n, i, a) {
  var o = n + "-" + i, s = e.length;
  if (a.hasOwnProperty(o))
    return a[o];
  if (t === 1) {
    var l = Math.round(Math.log((1 << s) - 1 & ~i) / Oee);
    return e[r][l];
  }
  for (var u = n | 1 << r, c = r + 1; n & 1 << c; )
    c++;
  for (var f = 0, d = 0, h = 0; d < s; d++) {
    var p = 1 << d;
    p & i || (f += (h % 2 ? -1 : 1) * e[r][d] * B2(e, t - 1, c, u, i | p, a), h++);
  }
  return a[o] = f, f;
}
function AE(e, t) {
  var r = [
    [e[0], e[1], 1, 0, 0, 0, -t[0] * e[0], -t[0] * e[1]],
    [0, 0, 0, e[0], e[1], 1, -t[1] * e[0], -t[1] * e[1]],
    [e[2], e[3], 1, 0, 0, 0, -t[2] * e[2], -t[2] * e[3]],
    [0, 0, 0, e[2], e[3], 1, -t[3] * e[2], -t[3] * e[3]],
    [e[4], e[5], 1, 0, 0, 0, -t[4] * e[4], -t[4] * e[5]],
    [0, 0, 0, e[4], e[5], 1, -t[5] * e[4], -t[5] * e[5]],
    [e[6], e[7], 1, 0, 0, 0, -t[6] * e[6], -t[6] * e[7]],
    [0, 0, 0, e[6], e[7], 1, -t[7] * e[6], -t[7] * e[7]]
  ], n = {}, i = B2(r, 8, 0, 0, 0, n);
  if (i !== 0) {
    for (var a = [], o = 0; o < 8; o++)
      for (var s = 0; s < 8; s++)
        a[s] == null && (a[s] = 0), a[s] += ((o + s) % 2 ? -1 : 1) * B2(r, 7, o === 0 ? 1 : 0, 1 << o, 1 << s, n) / i * t[o];
    return function(l, u, c) {
      var f = u * a[6] + c * a[7] + 1;
      l[0] = (u * a[0] + c * a[1] + a[2]) / f, l[1] = (u * a[3] + c * a[4] + a[5]) / f;
    };
  }
}
var ME = "___zrEVENTSAVED", c1 = [];
function zee(e, t, r, n, i) {
  return F2(c1, t, n, i, !0) && F2(e, r, c1[0], c1[1]);
}
function F2(e, t, r, n, i) {
  if (t.getBoundingClientRect && st.domSupported && !$k(t)) {
    var a = t[ME] || (t[ME] = {}), o = jee(t, a), s = Vee(o, a, i);
    if (s)
      return s(e, r, n), !0;
  }
  return !1;
}
function jee(e, t) {
  var r = t.markers;
  if (r)
    return r;
  r = t.markers = [];
  for (var n = ["left", "right"], i = ["top", "bottom"], a = 0; a < 4; a++) {
    var o = document.createElement("div"), s = o.style, l = a % 2, u = (a >> 1) % 2;
    s.cssText = [
      "position: absolute",
      "visibility: hidden",
      "padding: 0",
      "margin: 0",
      "border-width: 0",
      "user-select: none",
      "width:0",
      "height:0",
      n[l] + ":0",
      i[u] + ":0",
      n[1 - l] + ":auto",
      i[1 - u] + ":auto",
      ""
    ].join("!important;"), e.appendChild(o), r.push(o);
  }
  return r;
}
function Vee(e, t, r) {
  for (var n = r ? "invTrans" : "trans", i = t[n], a = t.srcCoords, o = [], s = [], l = !0, u = 0; u < 4; u++) {
    var c = e[u].getBoundingClientRect(), f = 2 * u, d = c.left, h = c.top;
    o.push(d, h), l = l && a && d === a[f] && h === a[f + 1], s.push(e[u].offsetLeft, e[u].offsetTop);
  }
  return l && i ? i : (t.srcCoords = o, t[n] = r ? AE(s, o) : AE(o, s));
}
function $k(e) {
  return e.nodeName.toUpperCase() === "CANVAS";
}
var Bee = /([&<>"'])/g, Fee = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
function Zr(e) {
  return e == null ? "" : (e + "").replace(Bee, function(t, r) {
    return Fee[r];
  });
}
var $ee = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, f1 = [], Hee = st.browser.firefox && +st.browser.version.split(".")[0] < 39;
function $2(e, t, r, n) {
  return r = r || {}, n ? EE(e, t, r) : Hee && t.layerX != null && t.layerX !== t.offsetX ? (r.zrX = t.layerX, r.zrY = t.layerY) : t.offsetX != null ? (r.zrX = t.offsetX, r.zrY = t.offsetY) : EE(e, t, r), r;
}
function EE(e, t, r) {
  if (st.domSupported && e.getBoundingClientRect) {
    var n = t.clientX, i = t.clientY;
    if ($k(e)) {
      var a = e.getBoundingClientRect();
      r.zrX = n - a.left, r.zrY = i - a.top;
      return;
    } else if (F2(f1, e, n, i)) {
      r.zrX = f1[0], r.zrY = f1[1];
      return;
    }
  }
  r.zrX = r.zrY = 0;
}
function qS(e) {
  return e || window.event;
}
function Fn(e, t, r) {
  if (t = qS(t), t.zrX != null)
    return t;
  var n = t.type, i = n && n.indexOf("touch") >= 0;
  if (i) {
    var o = n !== "touchend" ? t.targetTouches[0] : t.changedTouches[0];
    o && $2(e, o, t, r);
  } else {
    $2(e, t, t, r);
    var a = Gee(t);
    t.zrDelta = a ? a / 120 : -(t.detail || 0) / 3;
  }
  var s = t.button;
  return t.which == null && s !== void 0 && $ee.test(t.type) && (t.which = s & 1 ? 1 : s & 2 ? 3 : s & 4 ? 2 : 0), t;
}
function Gee(e) {
  var t = e.wheelDelta;
  if (t)
    return t;
  var r = e.deltaX, n = e.deltaY;
  if (r == null || n == null)
    return t;
  var i = Math.abs(n !== 0 ? n : r), a = n > 0 ? -1 : n < 0 ? 1 : r > 0 ? -1 : 1;
  return 3 * i * a;
}
function H2(e, t, r, n) {
  e.addEventListener(t, r, n);
}
function Wee(e, t, r, n) {
  e.removeEventListener(t, r, n);
}
var Xa = function(e) {
  e.preventDefault(), e.stopPropagation(), e.cancelBubble = !0;
};
function DE(e) {
  return e.which === 2 || e.which === 3;
}
var Uee = function() {
  function e() {
    this._track = [];
  }
  return e.prototype.recognize = function(t, r, n) {
    return this._doTrack(t, r, n), this._recognize(t);
  }, e.prototype.clear = function() {
    return this._track.length = 0, this;
  }, e.prototype._doTrack = function(t, r, n) {
    var i = t.touches;
    if (i) {
      for (var a = {
        points: [],
        touches: [],
        target: r,
        event: t
      }, o = 0, s = i.length; o < s; o++) {
        var l = i[o], u = $2(n, l, {});
        a.points.push([u.zrX, u.zrY]), a.touches.push(l);
      }
      this._track.push(a);
    }
  }, e.prototype._recognize = function(t) {
    for (var r in d1)
      if (d1.hasOwnProperty(r)) {
        var n = d1[r](this._track, t);
        if (n)
          return n;
      }
  }, e;
}();
function NE(e) {
  var t = e[1][0] - e[0][0], r = e[1][1] - e[0][1];
  return Math.sqrt(t * t + r * r);
}
function Yee(e) {
  return [
    (e[0][0] + e[1][0]) / 2,
    (e[0][1] + e[1][1]) / 2
  ];
}
var d1 = {
  pinch: function(e, t) {
    var r = e.length;
    if (r) {
      var n = (e[r - 1] || {}).points, i = (e[r - 2] || {}).points || n;
      if (i && i.length > 1 && n && n.length > 1) {
        var a = NE(n) / NE(i);
        !isFinite(a) && (a = 1), t.pinchScale = a;
        var o = Yee(n);
        return t.pinchX = o[0], t.pinchY = o[1], {
          type: "pinch",
          target: e[0].target,
          event: t
        };
      }
    }
  }
};
function yn() {
  return [1, 0, 0, 1, 0, 0];
}
function Kh(e) {
  return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e[4] = 0, e[5] = 0, e;
}
function Dy(e, t) {
  return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e;
}
function na(e, t, r) {
  var n = t[0] * r[0] + t[2] * r[1], i = t[1] * r[0] + t[3] * r[1], a = t[0] * r[2] + t[2] * r[3], o = t[1] * r[2] + t[3] * r[3], s = t[0] * r[4] + t[2] * r[5] + t[4], l = t[1] * r[4] + t[3] * r[5] + t[5];
  return e[0] = n, e[1] = i, e[2] = a, e[3] = o, e[4] = s, e[5] = l, e;
}
function Ni(e, t, r) {
  return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4] + r[0], e[5] = t[5] + r[1], e;
}
function vs(e, t, r, n) {
  n === void 0 && (n = [0, 0]);
  var i = t[0], a = t[2], o = t[4], s = t[1], l = t[3], u = t[5], c = Math.sin(r), f = Math.cos(r);
  return e[0] = i * f + s * c, e[1] = -i * c + s * f, e[2] = a * f + l * c, e[3] = -a * c + f * l, e[4] = f * (o - n[0]) + c * (u - n[1]) + n[0], e[5] = f * (u - n[1]) - c * (o - n[0]) + n[1], e;
}
function Ny(e, t, r) {
  var n = r[0], i = r[1];
  return e[0] = t[0] * n, e[1] = t[1] * i, e[2] = t[2] * n, e[3] = t[3] * i, e[4] = t[4] * n, e[5] = t[5] * i, e;
}
function Ul(e, t) {
  var r = t[0], n = t[2], i = t[4], a = t[1], o = t[3], s = t[5], l = r * o - a * n;
  return l ? (l = 1 / l, e[0] = o * l, e[1] = -a * l, e[2] = -n * l, e[3] = r * l, e[4] = (n * s - o * i) * l, e[5] = (a * i - r * s) * l, e) : null;
}
function Hk(e) {
  var t = yn();
  return Dy(t, e), t;
}
const Zee = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  clone: Hk,
  copy: Dy,
  create: yn,
  identity: Kh,
  invert: Ul,
  mul: na,
  rotate: vs,
  scale: Ny,
  translate: Ni
}, Symbol.toStringTag, { value: "Module" }));
var et = function() {
  function e(t, r) {
    this.x = t || 0, this.y = r || 0;
  }
  return e.prototype.copy = function(t) {
    return this.x = t.x, this.y = t.y, this;
  }, e.prototype.clone = function() {
    return new e(this.x, this.y);
  }, e.prototype.set = function(t, r) {
    return this.x = t, this.y = r, this;
  }, e.prototype.equal = function(t) {
    return t.x === this.x && t.y === this.y;
  }, e.prototype.add = function(t) {
    return this.x += t.x, this.y += t.y, this;
  }, e.prototype.scale = function(t) {
    this.x *= t, this.y *= t;
  }, e.prototype.scaleAndAdd = function(t, r) {
    this.x += t.x * r, this.y += t.y * r;
  }, e.prototype.sub = function(t) {
    return this.x -= t.x, this.y -= t.y, this;
  }, e.prototype.dot = function(t) {
    return this.x * t.x + this.y * t.y;
  }, e.prototype.len = function() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }, e.prototype.lenSquare = function() {
    return this.x * this.x + this.y * this.y;
  }, e.prototype.normalize = function() {
    var t = this.len();
    return this.x /= t, this.y /= t, this;
  }, e.prototype.distance = function(t) {
    var r = this.x - t.x, n = this.y - t.y;
    return Math.sqrt(r * r + n * n);
  }, e.prototype.distanceSquare = function(t) {
    var r = this.x - t.x, n = this.y - t.y;
    return r * r + n * n;
  }, e.prototype.negate = function() {
    return this.x = -this.x, this.y = -this.y, this;
  }, e.prototype.transform = function(t) {
    if (t) {
      var r = this.x, n = this.y;
      return this.x = t[0] * r + t[2] * n + t[4], this.y = t[1] * r + t[3] * n + t[5], this;
    }
  }, e.prototype.toArray = function(t) {
    return t[0] = this.x, t[1] = this.y, t;
  }, e.prototype.fromArray = function(t) {
    this.x = t[0], this.y = t[1];
  }, e.set = function(t, r, n) {
    t.x = r, t.y = n;
  }, e.copy = function(t, r) {
    t.x = r.x, t.y = r.y;
  }, e.len = function(t) {
    return Math.sqrt(t.x * t.x + t.y * t.y);
  }, e.lenSquare = function(t) {
    return t.x * t.x + t.y * t.y;
  }, e.dot = function(t, r) {
    return t.x * r.x + t.y * r.y;
  }, e.add = function(t, r, n) {
    t.x = r.x + n.x, t.y = r.y + n.y;
  }, e.sub = function(t, r, n) {
    t.x = r.x - n.x, t.y = r.y - n.y;
  }, e.scale = function(t, r, n) {
    t.x = r.x * n, t.y = r.y * n;
  }, e.scaleAndAdd = function(t, r, n, i) {
    t.x = r.x + n.x * i, t.y = r.y + n.y * i;
  }, e.lerp = function(t, r, n, i) {
    var a = 1 - i;
    t.x = a * r.x + i * n.x, t.y = a * r.y + i * n.y;
  }, e;
}(), $p = Math.min, Hp = Math.max, _s = new et(), Ss = new et(), Cs = new et(), Ts = new et(), If = new et(), Lf = new et(), tt = function() {
  function e(t, r, n, i) {
    n < 0 && (t = t + n, n = -n), i < 0 && (r = r + i, i = -i), this.x = t, this.y = r, this.width = n, this.height = i;
  }
  return e.prototype.union = function(t) {
    var r = $p(t.x, this.x), n = $p(t.y, this.y);
    isFinite(this.x) && isFinite(this.width) ? this.width = Hp(t.x + t.width, this.x + this.width) - r : this.width = t.width, isFinite(this.y) && isFinite(this.height) ? this.height = Hp(t.y + t.height, this.y + this.height) - n : this.height = t.height, this.x = r, this.y = n;
  }, e.prototype.applyTransform = function(t) {
    e.applyTransform(this, this, t);
  }, e.prototype.calculateTransform = function(t) {
    var r = this, n = t.width / r.width, i = t.height / r.height, a = yn();
    return Ni(a, a, [-r.x, -r.y]), Ny(a, a, [n, i]), Ni(a, a, [t.x, t.y]), a;
  }, e.prototype.intersect = function(t, r) {
    if (!t)
      return !1;
    t instanceof e || (t = e.create(t));
    var n = this, i = n.x, a = n.x + n.width, o = n.y, s = n.y + n.height, l = t.x, u = t.x + t.width, c = t.y, f = t.y + t.height, d = !(a < l || u < i || s < c || f < o);
    if (r) {
      var h = 1 / 0, p = 0, v = Math.abs(a - l), g = Math.abs(u - i), m = Math.abs(s - c), y = Math.abs(f - o), b = Math.min(v, g), w = Math.min(m, y);
      a < l || u < i ? b > p && (p = b, v < g ? et.set(Lf, -v, 0) : et.set(Lf, g, 0)) : b < h && (h = b, v < g ? et.set(If, v, 0) : et.set(If, -g, 0)), s < c || f < o ? w > p && (p = w, m < y ? et.set(Lf, 0, -m) : et.set(Lf, 0, y)) : b < h && (h = b, m < y ? et.set(If, 0, m) : et.set(If, 0, -y));
    }
    return r && et.copy(r, d ? If : Lf), d;
  }, e.prototype.contain = function(t, r) {
    var n = this;
    return t >= n.x && t <= n.x + n.width && r >= n.y && r <= n.y + n.height;
  }, e.prototype.clone = function() {
    return new e(this.x, this.y, this.width, this.height);
  }, e.prototype.copy = function(t) {
    e.copy(this, t);
  }, e.prototype.plain = function() {
    return {
      x: this.x,
      y: this.y,
      width: this.width,
      height: this.height
    };
  }, e.prototype.isFinite = function() {
    return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);
  }, e.prototype.isZero = function() {
    return this.width === 0 || this.height === 0;
  }, e.create = function(t) {
    return new e(t.x, t.y, t.width, t.height);
  }, e.copy = function(t, r) {
    t.x = r.x, t.y = r.y, t.width = r.width, t.height = r.height;
  }, e.applyTransform = function(t, r, n) {
    if (!n) {
      t !== r && e.copy(t, r);
      return;
    }
    if (n[1] < 1e-5 && n[1] > -1e-5 && n[2] < 1e-5 && n[2] > -1e-5) {
      var i = n[0], a = n[3], o = n[4], s = n[5];
      t.x = r.x * i + o, t.y = r.y * a + s, t.width = r.width * i, t.height = r.height * a, t.width < 0 && (t.x += t.width, t.width = -t.width), t.height < 0 && (t.y += t.height, t.height = -t.height);
      return;
    }
    _s.x = Cs.x = r.x, _s.y = Ts.y = r.y, Ss.x = Ts.x = r.x + r.width, Ss.y = Cs.y = r.y + r.height, _s.transform(n), Ts.transform(n), Ss.transform(n), Cs.transform(n), t.x = $p(_s.x, Ss.x, Cs.x, Ts.x), t.y = $p(_s.y, Ss.y, Cs.y, Ts.y);
    var l = Hp(_s.x, Ss.x, Cs.x, Ts.x), u = Hp(_s.y, Ss.y, Cs.y, Ts.y);
    t.width = l - t.x, t.height = u - t.y;
  }, e;
}(), Gk = "silent";
function Xee(e, t, r) {
  return {
    type: e,
    event: r,
    target: t.target,
    topTarget: t.topTarget,
    cancelBubble: !1,
    offsetX: r.zrX,
    offsetY: r.zrY,
    gestureEvent: r.gestureEvent,
    pinchX: r.pinchX,
    pinchY: r.pinchY,
    pinchScale: r.pinchScale,
    wheelDelta: r.zrDelta,
    zrByTouch: r.zrByTouch,
    which: r.which,
    stop: Kee
  };
}
function Kee() {
  Xa(this.event);
}
var qee = function(e) {
  Ut(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.handler = null, r;
  }
  return t.prototype.dispose = function() {
  }, t.prototype.setCursor = function() {
  }, t;
}(ai), Rf = /* @__PURE__ */ function() {
  function e(t, r) {
    this.x = t, this.y = r;
  }
  return e;
}(), Jee = [
  "click",
  "dblclick",
  "mousewheel",
  "mouseout",
  "mouseup",
  "mousedown",
  "mousemove",
  "contextmenu"
], h1 = new tt(0, 0, 0, 0), Wk = function(e) {
  Ut(t, e);
  function t(r, n, i, a, o) {
    var s = e.call(this) || this;
    return s._hovered = new Rf(0, 0), s.storage = r, s.painter = n, s.painterRoot = a, s._pointerSize = o, i = i || new qee(), s.proxy = null, s.setHandlerProxy(i), s._draggingMgr = new kee(s), s;
  }
  return t.prototype.setHandlerProxy = function(r) {
    this.proxy && this.proxy.dispose(), r && (j(Jee, function(n) {
      r.on && r.on(n, this[n], this);
    }, this), r.handler = this), this.proxy = r;
  }, t.prototype.mousemove = function(r) {
    var n = r.zrX, i = r.zrY, a = Uk(this, n, i), o = this._hovered, s = o.target;
    s && !s.__zr && (o = this.findHover(o.x, o.y), s = o.target);
    var l = this._hovered = a ? new Rf(n, i) : this.findHover(n, i), u = l.target, c = this.proxy;
    c.setCursor && c.setCursor(u ? u.cursor : "default"), s && u !== s && this.dispatchToElement(o, "mouseout", r), this.dispatchToElement(l, "mousemove", r), u && u !== s && this.dispatchToElement(l, "mouseover", r);
  }, t.prototype.mouseout = function(r) {
    var n = r.zrEventControl;
    n !== "only_globalout" && this.dispatchToElement(this._hovered, "mouseout", r), n !== "no_globalout" && this.trigger("globalout", { type: "globalout", event: r });
  }, t.prototype.resize = function() {
    this._hovered = new Rf(0, 0);
  }, t.prototype.dispatch = function(r, n) {
    var i = this[r];
    i && i.call(this, n);
  }, t.prototype.dispose = function() {
    this.proxy.dispose(), this.storage = null, this.proxy = null, this.painter = null;
  }, t.prototype.setCursorStyle = function(r) {
    var n = this.proxy;
    n.setCursor && n.setCursor(r);
  }, t.prototype.dispatchToElement = function(r, n, i) {
    r = r || {};
    var a = r.target;
    if (!(a && a.silent)) {
      for (var o = "on" + n, s = Xee(n, r, i); a && (a[o] && (s.cancelBubble = !!a[o].call(a, s)), a.trigger(n, s), a = a.__hostTarget ? a.__hostTarget : a.parent, !s.cancelBubble); )
        ;
      s.cancelBubble || (this.trigger(n, s), this.painter && this.painter.eachOtherLayer && this.painter.eachOtherLayer(function(l) {
        typeof l[o] == "function" && l[o].call(l, s), l.trigger && l.trigger(n, s);
      }));
    }
  }, t.prototype.findHover = function(r, n, i) {
    var a = this.storage.getDisplayList(), o = new Rf(r, n);
    if (IE(a, o, r, n, i), this._pointerSize && !o.target) {
      for (var s = [], l = this._pointerSize, u = l / 2, c = new tt(r - u, n - u, l, l), f = a.length - 1; f >= 0; f--) {
        var d = a[f];
        d !== i && !d.ignore && !d.ignoreCoarsePointer && (!d.parent || !d.parent.ignoreCoarsePointer) && (h1.copy(d.getBoundingRect()), d.transform && h1.applyTransform(d.transform), h1.intersect(c) && s.push(d));
      }
      if (s.length)
        for (var h = 4, p = Math.PI / 12, v = Math.PI * 2, g = 0; g < u; g += h)
          for (var m = 0; m < v; m += p) {
            var y = r + g * Math.cos(m), b = n + g * Math.sin(m);
            if (IE(s, o, y, b, i), o.target)
              return o;
          }
    }
    return o;
  }, t.prototype.processGesture = function(r, n) {
    this._gestureMgr || (this._gestureMgr = new Uee());
    var i = this._gestureMgr;
    n === "start" && i.clear();
    var a = i.recognize(r, this.findHover(r.zrX, r.zrY, null).target, this.proxy.dom);
    if (n === "end" && i.clear(), a) {
      var o = a.type;
      r.gestureEvent = o;
      var s = new Rf();
      s.target = a.target, this.dispatchToElement(s, o, a.event);
    }
  }, t;
}(ai);
j(["click", "mousedown", "mouseup", "mousewheel", "dblclick", "contextmenu"], function(e) {
  Wk.prototype[e] = function(t) {
    var r = t.zrX, n = t.zrY, i = Uk(this, r, n), a, o;
    if ((e !== "mouseup" || !i) && (a = this.findHover(r, n), o = a.target), e === "mousedown")
      this._downEl = o, this._downPoint = [t.zrX, t.zrY], this._upEl = o;
    else if (e === "mouseup")
      this._upEl = o;
    else if (e === "click") {
      if (this._downEl !== this._upEl || !this._downPoint || Oa(this._downPoint, [t.zrX, t.zrY]) > 4)
        return;
      this._downPoint = null;
    }
    this.dispatchToElement(a, e, t);
  };
});
function Qee(e, t, r) {
  if (e[e.rectHover ? "rectContain" : "contain"](t, r)) {
    for (var n = e, i = void 0, a = !1; n; ) {
      if (n.ignoreClip && (a = !0), !a) {
        var o = n.getClipPath();
        if (o && !o.contain(t, r))
          return !1;
      }
      n.silent && (i = !0);
      var s = n.__hostTarget;
      n = s || n.parent;
    }
    return i ? Gk : !0;
  }
  return !1;
}
function IE(e, t, r, n, i) {
  for (var a = e.length - 1; a >= 0; a--) {
    var o = e[a], s = void 0;
    if (o !== i && !o.ignore && (s = Qee(o, r, n)) && (!t.topTarget && (t.topTarget = o), s !== Gk)) {
      t.target = o;
      break;
    }
  }
}
function Uk(e, t, r) {
  var n = e.painter;
  return t < 0 || t > n.getWidth() || r < 0 || r > n.getHeight();
}
var Yk = 32, Pf = 7;
function ete(e) {
  for (var t = 0; e >= Yk; )
    t |= e & 1, e >>= 1;
  return e + t;
}
function LE(e, t, r, n) {
  var i = t + 1;
  if (i === r)
    return 1;
  if (n(e[i++], e[t]) < 0) {
    for (; i < r && n(e[i], e[i - 1]) < 0; )
      i++;
    tte(e, t, i);
  } else
    for (; i < r && n(e[i], e[i - 1]) >= 0; )
      i++;
  return i - t;
}
function tte(e, t, r) {
  for (r--; t < r; ) {
    var n = e[t];
    e[t++] = e[r], e[r--] = n;
  }
}
function RE(e, t, r, n, i) {
  for (n === t && n++; n < r; n++) {
    for (var a = e[n], o = t, s = n, l; o < s; )
      l = o + s >>> 1, i(a, e[l]) < 0 ? s = l : o = l + 1;
    var u = n - o;
    switch (u) {
      case 3:
        e[o + 3] = e[o + 2];
      case 2:
        e[o + 2] = e[o + 1];
      case 1:
        e[o + 1] = e[o];
        break;
      default:
        for (; u > 0; )
          e[o + u] = e[o + u - 1], u--;
    }
    e[o] = a;
  }
}
function p1(e, t, r, n, i, a) {
  var o = 0, s = 0, l = 1;
  if (a(e, t[r + i]) > 0) {
    for (s = n - i; l < s && a(e, t[r + i + l]) > 0; )
      o = l, l = (l << 1) + 1, l <= 0 && (l = s);
    l > s && (l = s), o += i, l += i;
  } else {
    for (s = i + 1; l < s && a(e, t[r + i - l]) <= 0; )
      o = l, l = (l << 1) + 1, l <= 0 && (l = s);
    l > s && (l = s);
    var u = o;
    o = i - l, l = i - u;
  }
  for (o++; o < l; ) {
    var c = o + (l - o >>> 1);
    a(e, t[r + c]) > 0 ? o = c + 1 : l = c;
  }
  return l;
}
function v1(e, t, r, n, i, a) {
  var o = 0, s = 0, l = 1;
  if (a(e, t[r + i]) < 0) {
    for (s = i + 1; l < s && a(e, t[r + i - l]) < 0; )
      o = l, l = (l << 1) + 1, l <= 0 && (l = s);
    l > s && (l = s);
    var u = o;
    o = i - l, l = i - u;
  } else {
    for (s = n - i; l < s && a(e, t[r + i + l]) >= 0; )
      o = l, l = (l << 1) + 1, l <= 0 && (l = s);
    l > s && (l = s), o += i, l += i;
  }
  for (o++; o < l; ) {
    var c = o + (l - o >>> 1);
    a(e, t[r + c]) < 0 ? l = c : o = c + 1;
  }
  return l;
}
function rte(e, t) {
  var r = Pf, n, i, a = 0, o = [];
  n = [], i = [];
  function s(h, p) {
    n[a] = h, i[a] = p, a += 1;
  }
  function l() {
    for (; a > 1; ) {
      var h = a - 2;
      if (h >= 1 && i[h - 1] <= i[h] + i[h + 1] || h >= 2 && i[h - 2] <= i[h] + i[h - 1])
        i[h - 1] < i[h + 1] && h--;
      else if (i[h] > i[h + 1])
        break;
      c(h);
    }
  }
  function u() {
    for (; a > 1; ) {
      var h = a - 2;
      h > 0 && i[h - 1] < i[h + 1] && h--, c(h);
    }
  }
  function c(h) {
    var p = n[h], v = i[h], g = n[h + 1], m = i[h + 1];
    i[h] = v + m, h === a - 3 && (n[h + 1] = n[h + 2], i[h + 1] = i[h + 2]), a--;
    var y = v1(e[g], e, p, v, 0, t);
    p += y, v -= y, v !== 0 && (m = p1(e[p + v - 1], e, g, m, m - 1, t), m !== 0 && (v <= m ? f(p, v, g, m) : d(p, v, g, m)));
  }
  function f(h, p, v, g) {
    var m = 0;
    for (m = 0; m < p; m++)
      o[m] = e[h + m];
    var y = 0, b = v, w = h;
    if (e[w++] = e[b++], --g === 0) {
      for (m = 0; m < p; m++)
        e[w + m] = o[y + m];
      return;
    }
    if (p === 1) {
      for (m = 0; m < g; m++)
        e[w + m] = e[b + m];
      e[w + g] = o[y];
      return;
    }
    for (var _ = r, S, C, A; ; ) {
      S = 0, C = 0, A = !1;
      do
        if (t(e[b], o[y]) < 0) {
          if (e[w++] = e[b++], C++, S = 0, --g === 0) {
            A = !0;
            break;
          }
        } else if (e[w++] = o[y++], S++, C = 0, --p === 1) {
          A = !0;
          break;
        }
      while ((S | C) < _);
      if (A)
        break;
      do {
        if (S = v1(e[b], o, y, p, 0, t), S !== 0) {
          for (m = 0; m < S; m++)
            e[w + m] = o[y + m];
          if (w += S, y += S, p -= S, p <= 1) {
            A = !0;
            break;
          }
        }
        if (e[w++] = e[b++], --g === 0) {
          A = !0;
          break;
        }
        if (C = p1(o[y], e, b, g, 0, t), C !== 0) {
          for (m = 0; m < C; m++)
            e[w + m] = e[b + m];
          if (w += C, b += C, g -= C, g === 0) {
            A = !0;
            break;
          }
        }
        if (e[w++] = o[y++], --p === 1) {
          A = !0;
          break;
        }
        _--;
      } while (S >= Pf || C >= Pf);
      if (A)
        break;
      _ < 0 && (_ = 0), _ += 2;
    }
    if (r = _, r < 1 && (r = 1), p === 1) {
      for (m = 0; m < g; m++)
        e[w + m] = e[b + m];
      e[w + g] = o[y];
    } else {
      if (p === 0)
        throw new Error();
      for (m = 0; m < p; m++)
        e[w + m] = o[y + m];
    }
  }
  function d(h, p, v, g) {
    var m = 0;
    for (m = 0; m < g; m++)
      o[m] = e[v + m];
    var y = h + p - 1, b = g - 1, w = v + g - 1, _ = 0, S = 0;
    if (e[w--] = e[y--], --p === 0) {
      for (_ = w - (g - 1), m = 0; m < g; m++)
        e[_ + m] = o[m];
      return;
    }
    if (g === 1) {
      for (w -= p, y -= p, S = w + 1, _ = y + 1, m = p - 1; m >= 0; m--)
        e[S + m] = e[_ + m];
      e[w] = o[b];
      return;
    }
    for (var C = r; ; ) {
      var A = 0, M = 0, D = !1;
      do
        if (t(o[b], e[y]) < 0) {
          if (e[w--] = e[y--], A++, M = 0, --p === 0) {
            D = !0;
            break;
          }
        } else if (e[w--] = o[b--], M++, A = 0, --g === 1) {
          D = !0;
          break;
        }
      while ((A | M) < C);
      if (D)
        break;
      do {
        if (A = p - v1(o[b], e, h, p, p - 1, t), A !== 0) {
          for (w -= A, y -= A, p -= A, S = w + 1, _ = y + 1, m = A - 1; m >= 0; m--)
            e[S + m] = e[_ + m];
          if (p === 0) {
            D = !0;
            break;
          }
        }
        if (e[w--] = o[b--], --g === 1) {
          D = !0;
          break;
        }
        if (M = g - p1(e[y], o, 0, g, g - 1, t), M !== 0) {
          for (w -= M, b -= M, g -= M, S = w + 1, _ = b + 1, m = 0; m < M; m++)
            e[S + m] = o[_ + m];
          if (g <= 1) {
            D = !0;
            break;
          }
        }
        if (e[w--] = e[y--], --p === 0) {
          D = !0;
          break;
        }
        C--;
      } while (A >= Pf || M >= Pf);
      if (D)
        break;
      C < 0 && (C = 0), C += 2;
    }
    if (r = C, r < 1 && (r = 1), g === 1) {
      for (w -= p, y -= p, S = w + 1, _ = y + 1, m = p - 1; m >= 0; m--)
        e[S + m] = e[_ + m];
      e[w] = o[b];
    } else {
      if (g === 0)
        throw new Error();
      for (_ = w - (g - 1), m = 0; m < g; m++)
        e[_ + m] = o[m];
    }
  }
  return {
    mergeRuns: l,
    forceMergeRuns: u,
    pushRun: s
  };
}
function lg(e, t, r, n) {
  r || (r = 0), n || (n = e.length);
  var i = n - r;
  if (!(i < 2)) {
    var a = 0;
    if (i < Yk) {
      a = LE(e, r, n, t), RE(e, r, n, r + a, t);
      return;
    }
    var o = rte(e, t), s = ete(i);
    do {
      if (a = LE(e, r, n, t), a < s) {
        var l = i;
        l > s && (l = s), RE(e, r, r + l, r + a, t), a = l;
      }
      o.pushRun(r, a), o.mergeRuns(), i -= a, r += a;
    } while (i !== 0);
    o.forceMergeRuns();
  }
}
var Cn = 1, pd = 2, Yu = 4, PE = !1;
function g1() {
  PE || (PE = !0, console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"));
}
function kE(e, t) {
  return e.zlevel === t.zlevel ? e.z === t.z ? e.z2 - t.z2 : e.z - t.z : e.zlevel - t.zlevel;
}
var nte = function() {
  function e() {
    this._roots = [], this._displayList = [], this._displayListLen = 0, this.displayableSortFunc = kE;
  }
  return e.prototype.traverse = function(t, r) {
    for (var n = 0; n < this._roots.length; n++)
      this._roots[n].traverse(t, r);
  }, e.prototype.getDisplayList = function(t, r) {
    r = r || !1;
    var n = this._displayList;
    return (t || !n.length) && this.updateDisplayList(r), n;
  }, e.prototype.updateDisplayList = function(t) {
    this._displayListLen = 0;
    for (var r = this._roots, n = this._displayList, i = 0, a = r.length; i < a; i++)
      this._updateAndAddDisplayable(r[i], null, t);
    n.length = this._displayListLen, lg(n, kE);
  }, e.prototype._updateAndAddDisplayable = function(t, r, n) {
    if (!(t.ignore && !n)) {
      t.beforeUpdate(), t.update(), t.afterUpdate();
      var i = t.getClipPath();
      if (t.ignoreClip)
        r = null;
      else if (i) {
        r ? r = r.slice() : r = [];
        for (var a = i, o = t; a; )
          a.parent = o, a.updateTransform(), r.push(a), o = a, a = a.getClipPath();
      }
      if (t.childrenRef) {
        for (var s = t.childrenRef(), l = 0; l < s.length; l++) {
          var u = s[l];
          t.__dirty && (u.__dirty |= Cn), this._updateAndAddDisplayable(u, r, n);
        }
        t.__dirty = 0;
      } else {
        var c = t;
        r && r.length ? c.__clipPaths = r : c.__clipPaths && c.__clipPaths.length > 0 && (c.__clipPaths = []), isNaN(c.z) && (g1(), c.z = 0), isNaN(c.z2) && (g1(), c.z2 = 0), isNaN(c.zlevel) && (g1(), c.zlevel = 0), this._displayList[this._displayListLen++] = c;
      }
      var f = t.getDecalElement && t.getDecalElement();
      f && this._updateAndAddDisplayable(f, r, n);
      var d = t.getTextGuideLine();
      d && this._updateAndAddDisplayable(d, r, n);
      var h = t.getTextContent();
      h && this._updateAndAddDisplayable(h, r, n);
    }
  }, e.prototype.addRoot = function(t) {
    t.__zr && t.__zr.storage === this || this._roots.push(t);
  }, e.prototype.delRoot = function(t) {
    if (t instanceof Array) {
      for (var r = 0, n = t.length; r < n; r++)
        this.delRoot(t[r]);
      return;
    }
    var i = rt(this._roots, t);
    i >= 0 && this._roots.splice(i, 1);
  }, e.prototype.delAllRoots = function() {
    this._roots = [], this._displayList = [], this._displayListLen = 0;
  }, e.prototype.getRoots = function() {
    return this._roots;
  }, e.prototype.dispose = function() {
    this._displayList = null, this._roots = null;
  }, e;
}(), Zg;
Zg = st.hasGlobalWindow && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function(e) {
  return setTimeout(e, 16);
};
var Pd = {
  linear: function(e) {
    return e;
  },
  quadraticIn: function(e) {
    return e * e;
  },
  quadraticOut: function(e) {
    return e * (2 - e);
  },
  quadraticInOut: function(e) {
    return (e *= 2) < 1 ? 0.5 * e * e : -0.5 * (--e * (e - 2) - 1);
  },
  cubicIn: function(e) {
    return e * e * e;
  },
  cubicOut: function(e) {
    return --e * e * e + 1;
  },
  cubicInOut: function(e) {
    return (e *= 2) < 1 ? 0.5 * e * e * e : 0.5 * ((e -= 2) * e * e + 2);
  },
  quarticIn: function(e) {
    return e * e * e * e;
  },
  quarticOut: function(e) {
    return 1 - --e * e * e * e;
  },
  quarticInOut: function(e) {
    return (e *= 2) < 1 ? 0.5 * e * e * e * e : -0.5 * ((e -= 2) * e * e * e - 2);
  },
  quinticIn: function(e) {
    return e * e * e * e * e;
  },
  quinticOut: function(e) {
    return --e * e * e * e * e + 1;
  },
  quinticInOut: function(e) {
    return (e *= 2) < 1 ? 0.5 * e * e * e * e * e : 0.5 * ((e -= 2) * e * e * e * e + 2);
  },
  sinusoidalIn: function(e) {
    return 1 - Math.cos(e * Math.PI / 2);
  },
  sinusoidalOut: function(e) {
    return Math.sin(e * Math.PI / 2);
  },
  sinusoidalInOut: function(e) {
    return 0.5 * (1 - Math.cos(Math.PI * e));
  },
  exponentialIn: function(e) {
    return e === 0 ? 0 : Math.pow(1024, e - 1);
  },
  exponentialOut: function(e) {
    return e === 1 ? 1 : 1 - Math.pow(2, -10 * e);
  },
  exponentialInOut: function(e) {
    return e === 0 ? 0 : e === 1 ? 1 : (e *= 2) < 1 ? 0.5 * Math.pow(1024, e - 1) : 0.5 * (-Math.pow(2, -10 * (e - 1)) + 2);
  },
  circularIn: function(e) {
    return 1 - Math.sqrt(1 - e * e);
  },
  circularOut: function(e) {
    return Math.sqrt(1 - --e * e);
  },
  circularInOut: function(e) {
    return (e *= 2) < 1 ? -0.5 * (Math.sqrt(1 - e * e) - 1) : 0.5 * (Math.sqrt(1 - (e -= 2) * e) + 1);
  },
  elasticIn: function(e) {
    var t, r = 0.1, n = 0.4;
    return e === 0 ? 0 : e === 1 ? 1 : (!r || r < 1 ? (r = 1, t = n / 4) : t = n * Math.asin(1 / r) / (2 * Math.PI), -(r * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - t) * (2 * Math.PI) / n)));
  },
  elasticOut: function(e) {
    var t, r = 0.1, n = 0.4;
    return e === 0 ? 0 : e === 1 ? 1 : (!r || r < 1 ? (r = 1, t = n / 4) : t = n * Math.asin(1 / r) / (2 * Math.PI), r * Math.pow(2, -10 * e) * Math.sin((e - t) * (2 * Math.PI) / n) + 1);
  },
  elasticInOut: function(e) {
    var t, r = 0.1, n = 0.4;
    return e === 0 ? 0 : e === 1 ? 1 : (!r || r < 1 ? (r = 1, t = n / 4) : t = n * Math.asin(1 / r) / (2 * Math.PI), (e *= 2) < 1 ? -0.5 * (r * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - t) * (2 * Math.PI) / n)) : r * Math.pow(2, -10 * (e -= 1)) * Math.sin((e - t) * (2 * Math.PI) / n) * 0.5 + 1);
  },
  backIn: function(e) {
    var t = 1.70158;
    return e * e * ((t + 1) * e - t);
  },
  backOut: function(e) {
    var t = 1.70158;
    return --e * e * ((t + 1) * e + t) + 1;
  },
  backInOut: function(e) {
    var t = 2.5949095;
    return (e *= 2) < 1 ? 0.5 * (e * e * ((t + 1) * e - t)) : 0.5 * ((e -= 2) * e * ((t + 1) * e + t) + 2);
  },
  bounceIn: function(e) {
    return 1 - Pd.bounceOut(1 - e);
  },
  bounceOut: function(e) {
    return e < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + 0.75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + 0.9375 : 7.5625 * (e -= 2.625 / 2.75) * e + 0.984375;
  },
  bounceInOut: function(e) {
    return e < 0.5 ? Pd.bounceIn(e * 2) * 0.5 : Pd.bounceOut(e * 2 - 1) * 0.5 + 0.5;
  }
}, Gp = Math.pow, Zo = Math.sqrt, Xg = 1e-8, Zk = 1e-4, OE = Zo(3), Wp = 1 / 3, Yi = ps(), Wn = ps(), dc = ps();
function jo(e) {
  return e > -Xg && e < Xg;
}
function Xk(e) {
  return e > Xg || e < -Xg;
}
function br(e, t, r, n, i) {
  var a = 1 - i;
  return a * a * (a * e + 3 * i * t) + i * i * (i * n + 3 * a * r);
}
function zE(e, t, r, n, i) {
  var a = 1 - i;
  return 3 * (((t - e) * a + 2 * (r - t) * i) * a + (n - r) * i * i);
}
function Kg(e, t, r, n, i, a) {
  var o = n + 3 * (t - r) - e, s = 3 * (r - t * 2 + e), l = 3 * (t - e), u = e - i, c = s * s - 3 * o * l, f = s * l - 9 * o * u, d = l * l - 3 * s * u, h = 0;
  if (jo(c) && jo(f))
    if (jo(s))
      a[0] = 0;
    else {
      var p = -l / s;
      p >= 0 && p <= 1 && (a[h++] = p);
    }
  else {
    var v = f * f - 4 * c * d;
    if (jo(v)) {
      var g = f / c, p = -s / o + g, m = -g / 2;
      p >= 0 && p <= 1 && (a[h++] = p), m >= 0 && m <= 1 && (a[h++] = m);
    } else if (v > 0) {
      var y = Zo(v), b = c * s + 1.5 * o * (-f + y), w = c * s + 1.5 * o * (-f - y);
      b < 0 ? b = -Gp(-b, Wp) : b = Gp(b, Wp), w < 0 ? w = -Gp(-w, Wp) : w = Gp(w, Wp);
      var p = (-s - (b + w)) / (3 * o);
      p >= 0 && p <= 1 && (a[h++] = p);
    } else {
      var _ = (2 * c * s - 3 * o * f) / (2 * Zo(c * c * c)), S = Math.acos(_) / 3, C = Zo(c), A = Math.cos(S), p = (-s - 2 * C * A) / (3 * o), m = (-s + C * (A + OE * Math.sin(S))) / (3 * o), M = (-s + C * (A - OE * Math.sin(S))) / (3 * o);
      p >= 0 && p <= 1 && (a[h++] = p), m >= 0 && m <= 1 && (a[h++] = m), M >= 0 && M <= 1 && (a[h++] = M);
    }
  }
  return h;
}
function Kk(e, t, r, n, i) {
  var a = 6 * r - 12 * t + 6 * e, o = 9 * t + 3 * n - 3 * e - 9 * r, s = 3 * t - 3 * e, l = 0;
  if (jo(o)) {
    if (Xk(a)) {
      var u = -s / a;
      u >= 0 && u <= 1 && (i[l++] = u);
    }
  } else {
    var c = a * a - 4 * o * s;
    if (jo(c))
      i[0] = -a / (2 * o);
    else if (c > 0) {
      var f = Zo(c), u = (-a + f) / (2 * o), d = (-a - f) / (2 * o);
      u >= 0 && u <= 1 && (i[l++] = u), d >= 0 && d <= 1 && (i[l++] = d);
    }
  }
  return l;
}
function os(e, t, r, n, i, a) {
  var o = (t - e) * i + e, s = (r - t) * i + t, l = (n - r) * i + r, u = (s - o) * i + o, c = (l - s) * i + s, f = (c - u) * i + u;
  a[0] = e, a[1] = o, a[2] = u, a[3] = f, a[4] = f, a[5] = c, a[6] = l, a[7] = n;
}
function qk(e, t, r, n, i, a, o, s, l, u, c) {
  var f, d = 5e-3, h = 1 / 0, p, v, g, m;
  Yi[0] = l, Yi[1] = u;
  for (var y = 0; y < 1; y += 0.05)
    Wn[0] = br(e, r, i, o, y), Wn[1] = br(t, n, a, s, y), g = Yo(Yi, Wn), g < h && (f = y, h = g);
  h = 1 / 0;
  for (var b = 0; b < 32 && !(d < Zk); b++)
    p = f - d, v = f + d, Wn[0] = br(e, r, i, o, p), Wn[1] = br(t, n, a, s, p), g = Yo(Wn, Yi), p >= 0 && g < h ? (f = p, h = g) : (dc[0] = br(e, r, i, o, v), dc[1] = br(t, n, a, s, v), m = Yo(dc, Yi), v <= 1 && m < h ? (f = v, h = m) : d *= 0.5);
  return c && (c[0] = br(e, r, i, o, f), c[1] = br(t, n, a, s, f)), Zo(h);
}
function ite(e, t, r, n, i, a, o, s, l) {
  for (var u = e, c = t, f = 0, d = 1 / l, h = 1; h <= l; h++) {
    var p = h * d, v = br(e, r, i, o, p), g = br(t, n, a, s, p), m = v - u, y = g - c;
    f += Math.sqrt(m * m + y * y), u = v, c = g;
  }
  return f;
}
function Dr(e, t, r, n) {
  var i = 1 - n;
  return i * (i * e + 2 * n * t) + n * n * r;
}
function G2(e, t, r, n) {
  return 2 * ((1 - n) * (t - e) + n * (r - t));
}
function ate(e, t, r, n, i) {
  var a = e - 2 * t + r, o = 2 * (t - e), s = e - n, l = 0;
  if (jo(a)) {
    if (Xk(o)) {
      var u = -s / o;
      u >= 0 && u <= 1 && (i[l++] = u);
    }
  } else {
    var c = o * o - 4 * a * s;
    if (jo(c)) {
      var u = -o / (2 * a);
      u >= 0 && u <= 1 && (i[l++] = u);
    } else if (c > 0) {
      var f = Zo(c), u = (-o + f) / (2 * a), d = (-o - f) / (2 * a);
      u >= 0 && u <= 1 && (i[l++] = u), d >= 0 && d <= 1 && (i[l++] = d);
    }
  }
  return l;
}
function Jk(e, t, r) {
  var n = e + r - 2 * t;
  return n === 0 ? 0.5 : (e - t) / n;
}
function ch(e, t, r, n, i) {
  var a = (t - e) * n + e, o = (r - t) * n + t, s = (o - a) * n + a;
  i[0] = e, i[1] = a, i[2] = s, i[3] = s, i[4] = o, i[5] = r;
}
function Qk(e, t, r, n, i, a, o, s, l) {
  var u, c = 5e-3, f = 1 / 0;
  Yi[0] = o, Yi[1] = s;
  for (var d = 0; d < 1; d += 0.05) {
    Wn[0] = Dr(e, r, i, d), Wn[1] = Dr(t, n, a, d);
    var h = Yo(Yi, Wn);
    h < f && (u = d, f = h);
  }
  f = 1 / 0;
  for (var p = 0; p < 32 && !(c < Zk); p++) {
    var v = u - c, g = u + c;
    Wn[0] = Dr(e, r, i, v), Wn[1] = Dr(t, n, a, v);
    var h = Yo(Wn, Yi);
    if (v >= 0 && h < f)
      u = v, f = h;
    else {
      dc[0] = Dr(e, r, i, g), dc[1] = Dr(t, n, a, g);
      var m = Yo(dc, Yi);
      g <= 1 && m < f ? (u = g, f = m) : c *= 0.5;
    }
  }
  return l && (l[0] = Dr(e, r, i, u), l[1] = Dr(t, n, a, u)), Zo(f);
}
function ote(e, t, r, n, i, a, o) {
  for (var s = e, l = t, u = 0, c = 1 / o, f = 1; f <= o; f++) {
    var d = f * c, h = Dr(e, r, i, d), p = Dr(t, n, a, d), v = h - s, g = p - l;
    u += Math.sqrt(v * v + g * g), s = h, l = p;
  }
  return u;
}
var ste = /cubic-bezier\(([0-9,\.e ]+)\)/;
function JS(e) {
  var t = e && ste.exec(e);
  if (t) {
    var r = t[1].split(","), n = +Xn(r[0]), i = +Xn(r[1]), a = +Xn(r[2]), o = +Xn(r[3]);
    if (isNaN(n + i + a + o))
      return;
    var s = [];
    return function(l) {
      return l <= 0 ? 0 : l >= 1 ? 1 : Kg(0, n, a, 1, l, s) && br(0, i, o, 1, s[0]);
    };
  }
}
var lte = function() {
  function e(t) {
    this._inited = !1, this._startTime = 0, this._pausedTime = 0, this._paused = !1, this._life = t.life || 1e3, this._delay = t.delay || 0, this.loop = t.loop || !1, this.onframe = t.onframe || rr, this.ondestroy = t.ondestroy || rr, this.onrestart = t.onrestart || rr, t.easing && this.setEasing(t.easing);
  }
  return e.prototype.step = function(t, r) {
    if (this._inited || (this._startTime = t + this._delay, this._inited = !0), this._paused) {
      this._pausedTime += r;
      return;
    }
    var n = this._life, i = t - this._startTime - this._pausedTime, a = i / n;
    a < 0 && (a = 0), a = Math.min(a, 1);
    var o = this.easingFunc, s = o ? o(a) : a;
    if (this.onframe(s), a === 1)
      if (this.loop) {
        var l = i % n;
        this._startTime = t - l, this._pausedTime = 0, this.onrestart();
      } else
        return !0;
    return !1;
  }, e.prototype.pause = function() {
    this._paused = !0;
  }, e.prototype.resume = function() {
    this._paused = !1;
  }, e.prototype.setEasing = function(t) {
    this.easing = t, this.easingFunc = Ee(t) ? t : Pd[t] || JS(t);
  }, e;
}(), e9 = /* @__PURE__ */ function() {
  function e(t) {
    this.value = t;
  }
  return e;
}(), ute = function() {
  function e() {
    this._len = 0;
  }
  return e.prototype.insert = function(t) {
    var r = new e9(t);
    return this.insertEntry(r), r;
  }, e.prototype.insertEntry = function(t) {
    this.head ? (this.tail.next = t, t.prev = this.tail, t.next = null, this.tail = t) : this.head = this.tail = t, this._len++;
  }, e.prototype.remove = function(t) {
    var r = t.prev, n = t.next;
    r ? r.next = n : this.head = n, n ? n.prev = r : this.tail = r, t.next = t.prev = null, this._len--;
  }, e.prototype.len = function() {
    return this._len;
  }, e.prototype.clear = function() {
    this.head = this.tail = null, this._len = 0;
  }, e;
}(), qh = function() {
  function e(t) {
    this._list = new ute(), this._maxSize = 10, this._map = {}, this._maxSize = t;
  }
  return e.prototype.put = function(t, r) {
    var n = this._list, i = this._map, a = null;
    if (i[t] == null) {
      var o = n.len(), s = this._lastRemovedEntry;
      if (o >= this._maxSize && o > 0) {
        var l = n.head;
        n.remove(l), delete i[l.key], a = l.value, this._lastRemovedEntry = l;
      }
      s ? s.value = r : s = new e9(r), s.key = t, n.insertEntry(s), i[t] = s;
    }
    return a;
  }, e.prototype.get = function(t) {
    var r = this._map[t], n = this._list;
    if (r != null)
      return r !== n.tail && (n.remove(r), n.insertEntry(r)), r.value;
  }, e.prototype.clear = function() {
    this._list.clear(), this._map = {};
  }, e.prototype.len = function() {
    return this._list.len();
  }, e;
}(), jE = {
  transparent: [0, 0, 0, 0],
  aliceblue: [240, 248, 255, 1],
  antiquewhite: [250, 235, 215, 1],
  aqua: [0, 255, 255, 1],
  aquamarine: [127, 255, 212, 1],
  azure: [240, 255, 255, 1],
  beige: [245, 245, 220, 1],
  bisque: [255, 228, 196, 1],
  black: [0, 0, 0, 1],
  blanchedalmond: [255, 235, 205, 1],
  blue: [0, 0, 255, 1],
  blueviolet: [138, 43, 226, 1],
  brown: [165, 42, 42, 1],
  burlywood: [222, 184, 135, 1],
  cadetblue: [95, 158, 160, 1],
  chartreuse: [127, 255, 0, 1],
  chocolate: [210, 105, 30, 1],
  coral: [255, 127, 80, 1],
  cornflowerblue: [100, 149, 237, 1],
  cornsilk: [255, 248, 220, 1],
  crimson: [220, 20, 60, 1],
  cyan: [0, 255, 255, 1],
  darkblue: [0, 0, 139, 1],
  darkcyan: [0, 139, 139, 1],
  darkgoldenrod: [184, 134, 11, 1],
  darkgray: [169, 169, 169, 1],
  darkgreen: [0, 100, 0, 1],
  darkgrey: [169, 169, 169, 1],
  darkkhaki: [189, 183, 107, 1],
  darkmagenta: [139, 0, 139, 1],
  darkolivegreen: [85, 107, 47, 1],
  darkorange: [255, 140, 0, 1],
  darkorchid: [153, 50, 204, 1],
  darkred: [139, 0, 0, 1],
  darksalmon: [233, 150, 122, 1],
  darkseagreen: [143, 188, 143, 1],
  darkslateblue: [72, 61, 139, 1],
  darkslategray: [47, 79, 79, 1],
  darkslategrey: [47, 79, 79, 1],
  darkturquoise: [0, 206, 209, 1],
  darkviolet: [148, 0, 211, 1],
  deeppink: [255, 20, 147, 1],
  deepskyblue: [0, 191, 255, 1],
  dimgray: [105, 105, 105, 1],
  dimgrey: [105, 105, 105, 1],
  dodgerblue: [30, 144, 255, 1],
  firebrick: [178, 34, 34, 1],
  floralwhite: [255, 250, 240, 1],
  forestgreen: [34, 139, 34, 1],
  fuchsia: [255, 0, 255, 1],
  gainsboro: [220, 220, 220, 1],
  ghostwhite: [248, 248, 255, 1],
  gold: [255, 215, 0, 1],
  goldenrod: [218, 165, 32, 1],
  gray: [128, 128, 128, 1],
  green: [0, 128, 0, 1],
  greenyellow: [173, 255, 47, 1],
  grey: [128, 128, 128, 1],
  honeydew: [240, 255, 240, 1],
  hotpink: [255, 105, 180, 1],
  indianred: [205, 92, 92, 1],
  indigo: [75, 0, 130, 1],
  ivory: [255, 255, 240, 1],
  khaki: [240, 230, 140, 1],
  lavender: [230, 230, 250, 1],
  lavenderblush: [255, 240, 245, 1],
  lawngreen: [124, 252, 0, 1],
  lemonchiffon: [255, 250, 205, 1],
  lightblue: [173, 216, 230, 1],
  lightcoral: [240, 128, 128, 1],
  lightcyan: [224, 255, 255, 1],
  lightgoldenrodyellow: [250, 250, 210, 1],
  lightgray: [211, 211, 211, 1],
  lightgreen: [144, 238, 144, 1],
  lightgrey: [211, 211, 211, 1],
  lightpink: [255, 182, 193, 1],
  lightsalmon: [255, 160, 122, 1],
  lightseagreen: [32, 178, 170, 1],
  lightskyblue: [135, 206, 250, 1],
  lightslategray: [119, 136, 153, 1],
  lightslategrey: [119, 136, 153, 1],
  lightsteelblue: [176, 196, 222, 1],
  lightyellow: [255, 255, 224, 1],
  lime: [0, 255, 0, 1],
  limegreen: [50, 205, 50, 1],
  linen: [250, 240, 230, 1],
  magenta: [255, 0, 255, 1],
  maroon: [128, 0, 0, 1],
  mediumaquamarine: [102, 205, 170, 1],
  mediumblue: [0, 0, 205, 1],
  mediumorchid: [186, 85, 211, 1],
  mediumpurple: [147, 112, 219, 1],
  mediumseagreen: [60, 179, 113, 1],
  mediumslateblue: [123, 104, 238, 1],
  mediumspringgreen: [0, 250, 154, 1],
  mediumturquoise: [72, 209, 204, 1],
  mediumvioletred: [199, 21, 133, 1],
  midnightblue: [25, 25, 112, 1],
  mintcream: [245, 255, 250, 1],
  mistyrose: [255, 228, 225, 1],
  moccasin: [255, 228, 181, 1],
  navajowhite: [255, 222, 173, 1],
  navy: [0, 0, 128, 1],
  oldlace: [253, 245, 230, 1],
  olive: [128, 128, 0, 1],
  olivedrab: [107, 142, 35, 1],
  orange: [255, 165, 0, 1],
  orangered: [255, 69, 0, 1],
  orchid: [218, 112, 214, 1],
  palegoldenrod: [238, 232, 170, 1],
  palegreen: [152, 251, 152, 1],
  paleturquoise: [175, 238, 238, 1],
  palevioletred: [219, 112, 147, 1],
  papayawhip: [255, 239, 213, 1],
  peachpuff: [255, 218, 185, 1],
  peru: [205, 133, 63, 1],
  pink: [255, 192, 203, 1],
  plum: [221, 160, 221, 1],
  powderblue: [176, 224, 230, 1],
  purple: [128, 0, 128, 1],
  red: [255, 0, 0, 1],
  rosybrown: [188, 143, 143, 1],
  royalblue: [65, 105, 225, 1],
  saddlebrown: [139, 69, 19, 1],
  salmon: [250, 128, 114, 1],
  sandybrown: [244, 164, 96, 1],
  seagreen: [46, 139, 87, 1],
  seashell: [255, 245, 238, 1],
  sienna: [160, 82, 45, 1],
  silver: [192, 192, 192, 1],
  skyblue: [135, 206, 235, 1],
  slateblue: [106, 90, 205, 1],
  slategray: [112, 128, 144, 1],
  slategrey: [112, 128, 144, 1],
  snow: [255, 250, 250, 1],
  springgreen: [0, 255, 127, 1],
  steelblue: [70, 130, 180, 1],
  tan: [210, 180, 140, 1],
  teal: [0, 128, 128, 1],
  thistle: [216, 191, 216, 1],
  tomato: [255, 99, 71, 1],
  turquoise: [64, 224, 208, 1],
  violet: [238, 130, 238, 1],
  wheat: [245, 222, 179, 1],
  white: [255, 255, 255, 1],
  whitesmoke: [245, 245, 245, 1],
  yellow: [255, 255, 0, 1],
  yellowgreen: [154, 205, 50, 1]
};
function Ci(e) {
  return e = Math.round(e), e < 0 ? 0 : e > 255 ? 255 : e;
}
function cte(e) {
  return e = Math.round(e), e < 0 ? 0 : e > 360 ? 360 : e;
}
function fh(e) {
  return e < 0 ? 0 : e > 1 ? 1 : e;
}
function m1(e) {
  var t = e;
  return t.length && t.charAt(t.length - 1) === "%" ? Ci(parseFloat(t) / 100 * 255) : Ci(parseInt(t, 10));
}
function Sl(e) {
  var t = e;
  return t.length && t.charAt(t.length - 1) === "%" ? fh(parseFloat(t) / 100) : fh(parseFloat(t));
}
function y1(e, t, r) {
  return r < 0 ? r += 1 : r > 1 && (r -= 1), r * 6 < 1 ? e + (t - e) * r * 6 : r * 2 < 1 ? t : r * 3 < 2 ? e + (t - e) * (2 / 3 - r) * 6 : e;
}
function Vo(e, t, r) {
  return e + (t - e) * r;
}
function Vn(e, t, r, n, i) {
  return e[0] = t, e[1] = r, e[2] = n, e[3] = i, e;
}
function W2(e, t) {
  return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e;
}
var t9 = new qh(20), Up = null;
function gu(e, t) {
  Up && W2(Up, t), Up = t9.put(e, Up || t.slice());
}
function on(e, t) {
  if (e) {
    t = t || [];
    var r = t9.get(e);
    if (r)
      return W2(t, r);
    e = e + "";
    var n = e.replace(/ /g, "").toLowerCase();
    if (n in jE)
      return W2(t, jE[n]), gu(e, t), t;
    var i = n.length;
    if (n.charAt(0) === "#") {
      if (i === 4 || i === 5) {
        var a = parseInt(n.slice(1, 4), 16);
        if (!(a >= 0 && a <= 4095)) {
          Vn(t, 0, 0, 0, 1);
          return;
        }
        return Vn(t, (a & 3840) >> 4 | (a & 3840) >> 8, a & 240 | (a & 240) >> 4, a & 15 | (a & 15) << 4, i === 5 ? parseInt(n.slice(4), 16) / 15 : 1), gu(e, t), t;
      } else if (i === 7 || i === 9) {
        var a = parseInt(n.slice(1, 7), 16);
        if (!(a >= 0 && a <= 16777215)) {
          Vn(t, 0, 0, 0, 1);
          return;
        }
        return Vn(t, (a & 16711680) >> 16, (a & 65280) >> 8, a & 255, i === 9 ? parseInt(n.slice(7), 16) / 255 : 1), gu(e, t), t;
      }
      return;
    }
    var o = n.indexOf("("), s = n.indexOf(")");
    if (o !== -1 && s + 1 === i) {
      var l = n.substr(0, o), u = n.substr(o + 1, s - (o + 1)).split(","), c = 1;
      switch (l) {
        case "rgba":
          if (u.length !== 4)
            return u.length === 3 ? Vn(t, +u[0], +u[1], +u[2], 1) : Vn(t, 0, 0, 0, 1);
          c = Sl(u.pop());
        case "rgb":
          if (u.length >= 3)
            return Vn(t, m1(u[0]), m1(u[1]), m1(u[2]), u.length === 3 ? c : Sl(u[3])), gu(e, t), t;
          Vn(t, 0, 0, 0, 1);
          return;
        case "hsla":
          if (u.length !== 4) {
            Vn(t, 0, 0, 0, 1);
            return;
          }
          return u[3] = Sl(u[3]), U2(u, t), gu(e, t), t;
        case "hsl":
          if (u.length !== 3) {
            Vn(t, 0, 0, 0, 1);
            return;
          }
          return U2(u, t), gu(e, t), t;
        default:
          return;
      }
    }
    Vn(t, 0, 0, 0, 1);
  }
}
function U2(e, t) {
  var r = (parseFloat(e[0]) % 360 + 360) % 360 / 360, n = Sl(e[1]), i = Sl(e[2]), a = i <= 0.5 ? i * (n + 1) : i + n - i * n, o = i * 2 - a;
  return t = t || [], Vn(t, Ci(y1(o, a, r + 1 / 3) * 255), Ci(y1(o, a, r) * 255), Ci(y1(o, a, r - 1 / 3) * 255), 1), e.length === 4 && (t[3] = e[3]), t;
}
function fte(e) {
  if (e) {
    var t = e[0] / 255, r = e[1] / 255, n = e[2] / 255, i = Math.min(t, r, n), a = Math.max(t, r, n), o = a - i, s = (a + i) / 2, l, u;
    if (o === 0)
      l = 0, u = 0;
    else {
      s < 0.5 ? u = o / (a + i) : u = o / (2 - a - i);
      var c = ((a - t) / 6 + o / 2) / o, f = ((a - r) / 6 + o / 2) / o, d = ((a - n) / 6 + o / 2) / o;
      t === a ? l = d - f : r === a ? l = 1 / 3 + c - d : n === a && (l = 2 / 3 + f - c), l < 0 && (l += 1), l > 1 && (l -= 1);
    }
    var h = [l * 360, u, s];
    return e[3] != null && h.push(e[3]), h;
  }
}
function qg(e, t) {
  var r = on(e);
  if (r) {
    for (var n = 0; n < 3; n++)
      t < 0 ? r[n] = r[n] * (1 - t) | 0 : r[n] = (255 - r[n]) * t + r[n] | 0, r[n] > 255 ? r[n] = 255 : r[n] < 0 && (r[n] = 0);
    return Ti(r, r.length === 4 ? "rgba" : "rgb");
  }
}
function dte(e) {
  var t = on(e);
  if (t)
    return ((1 << 24) + (t[0] << 16) + (t[1] << 8) + +t[2]).toString(16).slice(1);
}
function kd(e, t, r) {
  if (!(!(t && t.length) || !(e >= 0 && e <= 1))) {
    r = r || [];
    var n = e * (t.length - 1), i = Math.floor(n), a = Math.ceil(n), o = t[i], s = t[a], l = n - i;
    return r[0] = Ci(Vo(o[0], s[0], l)), r[1] = Ci(Vo(o[1], s[1], l)), r[2] = Ci(Vo(o[2], s[2], l)), r[3] = fh(Vo(o[3], s[3], l)), r;
  }
}
var hte = kd;
function QS(e, t, r) {
  if (!(!(t && t.length) || !(e >= 0 && e <= 1))) {
    var n = e * (t.length - 1), i = Math.floor(n), a = Math.ceil(n), o = on(t[i]), s = on(t[a]), l = n - i, u = Ti([
      Ci(Vo(o[0], s[0], l)),
      Ci(Vo(o[1], s[1], l)),
      Ci(Vo(o[2], s[2], l)),
      fh(Vo(o[3], s[3], l))
    ], "rgba");
    return r ? {
      color: u,
      leftIndex: i,
      rightIndex: a,
      value: n
    } : u;
  }
}
var pte = QS;
function hc(e, t, r, n) {
  var i = on(e);
  if (e)
    return i = fte(i), t != null && (i[0] = cte(t)), r != null && (i[1] = Sl(r)), n != null && (i[2] = Sl(n)), Ti(U2(i), "rgba");
}
function dh(e, t) {
  var r = on(e);
  if (r && t != null)
    return r[3] = fh(t), Ti(r, "rgba");
}
function Ti(e, t) {
  if (!(!e || !e.length)) {
    var r = e[0] + "," + e[1] + "," + e[2];
    return (t === "rgba" || t === "hsva" || t === "hsla") && (r += "," + e[3]), t + "(" + r + ")";
  }
}
function hh(e, t) {
  var r = on(e);
  return r ? (0.299 * r[0] + 0.587 * r[1] + 0.114 * r[2]) * r[3] / 255 + (1 - r[3]) * t : 0;
}
function vte() {
  return Ti([
    Math.round(Math.random() * 255),
    Math.round(Math.random() * 255),
    Math.round(Math.random() * 255)
  ], "rgb");
}
var VE = new qh(100);
function Jg(e) {
  if (ge(e)) {
    var t = VE.get(e);
    return t || (t = qg(e, -0.1), VE.put(e, t)), t;
  } else if (Zh(e)) {
    var r = ae({}, e);
    return r.colorStops = ue(e.colorStops, function(n) {
      return {
        offset: n.offset,
        color: qg(n.color, -0.1)
      };
    }), r;
  }
  return e;
}
const gte = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  fastLerp: kd,
  fastMapToColor: hte,
  lerp: QS,
  lift: qg,
  liftColor: Jg,
  lum: hh,
  mapToColor: pte,
  modifyAlpha: dh,
  modifyHSL: hc,
  parse: on,
  random: vte,
  stringify: Ti,
  toHex: dte
}, Symbol.toStringTag, { value: "Module" }));
var Qg = Math.round;
function ph(e) {
  var t;
  if (!e || e === "transparent")
    e = "none";
  else if (typeof e == "string" && e.indexOf("rgba") > -1) {
    var r = on(e);
    r && (e = "rgb(" + r[0] + "," + r[1] + "," + r[2] + ")", t = r[3]);
  }
  return {
    color: e,
    opacity: t ?? 1
  };
}
var BE = 1e-4;
function Bo(e) {
  return e < BE && e > -BE;
}
function Yp(e) {
  return Qg(e * 1e3) / 1e3;
}
function Y2(e) {
  return Qg(e * 1e4) / 1e4;
}
function mte(e) {
  return "matrix(" + Yp(e[0]) + "," + Yp(e[1]) + "," + Yp(e[2]) + "," + Yp(e[3]) + "," + Y2(e[4]) + "," + Y2(e[5]) + ")";
}
var yte = {
  left: "start",
  right: "end",
  center: "middle",
  middle: "middle"
};
function xte(e, t, r) {
  return r === "top" ? e += t / 2 : r === "bottom" && (e -= t / 2), e;
}
function bte(e) {
  return e && (e.shadowBlur || e.shadowOffsetX || e.shadowOffsetY);
}
function wte(e) {
  var t = e.style, r = e.getGlobalScale();
  return [
    t.shadowColor,
    (t.shadowBlur || 0).toFixed(2),
    (t.shadowOffsetX || 0).toFixed(2),
    (t.shadowOffsetY || 0).toFixed(2),
    r[0],
    r[1]
  ].join(",");
}
function r9(e) {
  return e && !!e.image;
}
function _te(e) {
  return e && !!e.svgElement;
}
function eC(e) {
  return r9(e) || _te(e);
}
function n9(e) {
  return e.type === "linear";
}
function i9(e) {
  return e.type === "radial";
}
function a9(e) {
  return e && (e.type === "linear" || e.type === "radial");
}
function Iy(e) {
  return "url(#" + e + ")";
}
function o9(e) {
  var t = e.getGlobalScale(), r = Math.max(t[0], t[1]);
  return Math.max(Math.ceil(Math.log(r) / Math.log(10)), 1);
}
function s9(e) {
  var t = e.x || 0, r = e.y || 0, n = (e.rotation || 0) * Id, i = Ge(e.scaleX, 1), a = Ge(e.scaleY, 1), o = e.skewX || 0, s = e.skewY || 0, l = [];
  return (t || r) && l.push("translate(" + t + "px," + r + "px)"), n && l.push("rotate(" + n + ")"), (i !== 1 || a !== 1) && l.push("scale(" + i + "," + a + ")"), (o || s) && l.push("skew(" + Qg(o * Id) + "deg, " + Qg(s * Id) + "deg)"), l.join(" ");
}
var Ste = function() {
  return st.hasGlobalWindow && Ee(window.btoa) ? function(e) {
    return window.btoa(unescape(encodeURIComponent(e)));
  } : typeof Buffer < "u" ? function(e) {
    return Buffer.from(e).toString("base64");
  } : function(e) {
    return process.env.NODE_ENV !== "production" && Kn("Base64 isn't natively supported in the current environment."), null;
  };
}(), Z2 = Array.prototype.slice;
function Aa(e, t, r) {
  return (t - e) * r + e;
}
function x1(e, t, r, n) {
  for (var i = t.length, a = 0; a < i; a++)
    e[a] = Aa(t[a], r[a], n);
  return e;
}
function Cte(e, t, r, n) {
  for (var i = t.length, a = i && t[0].length, o = 0; o < i; o++) {
    e[o] || (e[o] = []);
    for (var s = 0; s < a; s++)
      e[o][s] = Aa(t[o][s], r[o][s], n);
  }
  return e;
}
function Zp(e, t, r, n) {
  for (var i = t.length, a = 0; a < i; a++)
    e[a] = t[a] + r[a] * n;
  return e;
}
function FE(e, t, r, n) {
  for (var i = t.length, a = i && t[0].length, o = 0; o < i; o++) {
    e[o] || (e[o] = []);
    for (var s = 0; s < a; s++)
      e[o][s] = t[o][s] + r[o][s] * n;
  }
  return e;
}
function Tte(e, t) {
  for (var r = e.length, n = t.length, i = r > n ? t : e, a = Math.min(r, n), o = i[a - 1] || { color: [0, 0, 0, 0], offset: 0 }, s = a; s < Math.max(r, n); s++)
    i.push({
      offset: o.offset,
      color: o.color.slice()
    });
}
function Ate(e, t, r) {
  var n = e, i = t;
  if (!(!n.push || !i.push)) {
    var a = n.length, o = i.length;
    if (a !== o) {
      var s = a > o;
      if (s)
        n.length = o;
      else
        for (var l = a; l < o; l++)
          n.push(r === 1 ? i[l] : Z2.call(i[l]));
    }
    for (var u = n[0] && n[0].length, l = 0; l < n.length; l++)
      if (r === 1)
        isNaN(n[l]) && (n[l] = i[l]);
      else
        for (var c = 0; c < u; c++)
          isNaN(n[l][c]) && (n[l][c] = i[l][c]);
  }
}
function Od(e) {
  if (zr(e)) {
    var t = e.length;
    if (zr(e[0])) {
      for (var r = [], n = 0; n < t; n++)
        r.push(Z2.call(e[n]));
      return r;
    }
    return Z2.call(e);
  }
  return e;
}
function ug(e) {
  return e[0] = Math.floor(e[0]) || 0, e[1] = Math.floor(e[1]) || 0, e[2] = Math.floor(e[2]) || 0, e[3] = e[3] == null ? 1 : e[3], "rgba(" + e.join(",") + ")";
}
function Mte(e) {
  return zr(e && e[0]) ? 2 : 1;
}
var Xp = 0, cg = 1, l9 = 2, vd = 3, X2 = 4, K2 = 5, $E = 6;
function HE(e) {
  return e === X2 || e === K2;
}
function Kp(e) {
  return e === cg || e === l9;
}
var kf = [0, 0, 0, 0], Ete = function() {
  function e(t) {
    this.keyframes = [], this.discrete = !1, this._invalid = !1, this._needsSort = !1, this._lastFr = 0, this._lastFrP = 0, this.propName = t;
  }
  return e.prototype.isFinished = function() {
    return this._finished;
  }, e.prototype.setFinished = function() {
    this._finished = !0, this._additiveTrack && this._additiveTrack.setFinished();
  }, e.prototype.needsAnimate = function() {
    return this.keyframes.length >= 1;
  }, e.prototype.getAdditiveTrack = function() {
    return this._additiveTrack;
  }, e.prototype.addKeyframe = function(t, r, n) {
    this._needsSort = !0;
    var i = this.keyframes, a = i.length, o = !1, s = $E, l = r;
    if (zr(r)) {
      var u = Mte(r);
      s = u, (u === 1 && !bt(r[0]) || u === 2 && !bt(r[0][0])) && (o = !0);
    } else if (bt(r) && !as(r))
      s = Xp;
    else if (ge(r))
      if (!isNaN(+r))
        s = Xp;
      else {
        var c = on(r);
        c && (l = c, s = vd);
      }
    else if (Zh(r)) {
      var f = ae({}, l);
      f.colorStops = ue(r.colorStops, function(h) {
        return {
          offset: h.offset,
          color: on(h.color)
        };
      }), n9(r) ? s = X2 : i9(r) && (s = K2), l = f;
    }
    a === 0 ? this.valType = s : (s !== this.valType || s === $E) && (o = !0), this.discrete = this.discrete || o;
    var d = {
      time: t,
      value: l,
      rawValue: r,
      percent: 0
    };
    return n && (d.easing = n, d.easingFunc = Ee(n) ? n : Pd[n] || JS(n)), i.push(d), d;
  }, e.prototype.prepare = function(t, r) {
    var n = this.keyframes;
    this._needsSort && n.sort(function(v, g) {
      return v.time - g.time;
    });
    for (var i = this.valType, a = n.length, o = n[a - 1], s = this.discrete, l = Kp(i), u = HE(i), c = 0; c < a; c++) {
      var f = n[c], d = f.value, h = o.value;
      f.percent = f.time / t, s || (l && c !== a - 1 ? Ate(d, h, i) : u && Tte(d.colorStops, h.colorStops));
    }
    if (!s && i !== K2 && r && this.needsAnimate() && r.needsAnimate() && i === r.valType && !r._finished) {
      this._additiveTrack = r;
      for (var p = n[0].value, c = 0; c < a; c++)
        i === Xp ? n[c].additiveValue = n[c].value - p : i === vd ? n[c].additiveValue = Zp([], n[c].value, p, -1) : Kp(i) && (n[c].additiveValue = i === cg ? Zp([], n[c].value, p, -1) : FE([], n[c].value, p, -1));
    }
  }, e.prototype.step = function(t, r) {
    if (!this._finished) {
      this._additiveTrack && this._additiveTrack._finished && (this._additiveTrack = null);
      var n = this._additiveTrack != null, i = n ? "additiveValue" : "value", a = this.valType, o = this.keyframes, s = o.length, l = this.propName, u = a === vd, c, f = this._lastFr, d = Math.min, h, p;
      if (s === 1)
        h = p = o[0];
      else {
        if (r < 0)
          c = 0;
        else if (r < this._lastFrP) {
          var v = d(f + 1, s - 1);
          for (c = v; c >= 0 && !(o[c].percent <= r); c--)
            ;
          c = d(c, s - 2);
        } else {
          for (c = f; c < s && !(o[c].percent > r); c++)
            ;
          c = d(c - 1, s - 2);
        }
        p = o[c + 1], h = o[c];
      }
      if (h && p) {
        this._lastFr = c, this._lastFrP = r;
        var g = p.percent - h.percent, m = g === 0 ? 1 : d((r - h.percent) / g, 1);
        p.easingFunc && (m = p.easingFunc(m));
        var y = n ? this._additiveValue : u ? kf : t[l];
        if ((Kp(a) || u) && !y && (y = this._additiveValue = []), this.discrete)
          t[l] = m < 1 ? h.rawValue : p.rawValue;
        else if (Kp(a))
          a === cg ? x1(y, h[i], p[i], m) : Cte(y, h[i], p[i], m);
        else if (HE(a)) {
          var b = h[i], w = p[i], _ = a === X2;
          t[l] = {
            type: _ ? "linear" : "radial",
            x: Aa(b.x, w.x, m),
            y: Aa(b.y, w.y, m),
            colorStops: ue(b.colorStops, function(C, A) {
              var M = w.colorStops[A];
              return {
                offset: Aa(C.offset, M.offset, m),
                color: ug(x1([], C.color, M.color, m))
              };
            }),
            global: w.global
          }, _ ? (t[l].x2 = Aa(b.x2, w.x2, m), t[l].y2 = Aa(b.y2, w.y2, m)) : t[l].r = Aa(b.r, w.r, m);
        } else if (u)
          x1(y, h[i], p[i], m), n || (t[l] = ug(y));
        else {
          var S = Aa(h[i], p[i], m);
          n ? this._additiveValue = S : t[l] = S;
        }
        n && this._addToTarget(t);
      }
    }
  }, e.prototype._addToTarget = function(t) {
    var r = this.valType, n = this.propName, i = this._additiveValue;
    r === Xp ? t[n] = t[n] + i : r === vd ? (on(t[n], kf), Zp(kf, kf, i, 1), t[n] = ug(kf)) : r === cg ? Zp(t[n], t[n], i, 1) : r === l9 && FE(t[n], t[n], i, 1);
  }, e;
}(), tC = function() {
  function e(t, r, n, i) {
    if (this._tracks = {}, this._trackKeys = [], this._maxTime = 0, this._started = 0, this._clip = null, this._target = t, this._loop = r, r && i) {
      Kn("Can' use additive animation on looped animation.");
      return;
    }
    this._additiveAnimators = i, this._allowDiscrete = n;
  }
  return e.prototype.getMaxTime = function() {
    return this._maxTime;
  }, e.prototype.getDelay = function() {
    return this._delay;
  }, e.prototype.getLoop = function() {
    return this._loop;
  }, e.prototype.getTarget = function() {
    return this._target;
  }, e.prototype.changeTarget = function(t) {
    this._target = t;
  }, e.prototype.when = function(t, r, n) {
    return this.whenWithKeys(t, r, ut(r), n);
  }, e.prototype.whenWithKeys = function(t, r, n, i) {
    for (var a = this._tracks, o = 0; o < n.length; o++) {
      var s = n[o], l = a[s];
      if (!l) {
        l = a[s] = new Ete(s);
        var u = void 0, c = this._getAdditiveTrack(s);
        if (c) {
          var f = c.keyframes, d = f[f.length - 1];
          u = d && d.value, c.valType === vd && u && (u = ug(u));
        } else
          u = this._target[s];
        if (u == null)
          continue;
        t > 0 && l.addKeyframe(0, Od(u), i), this._trackKeys.push(s);
      }
      l.addKeyframe(t, Od(r[s]), i);
    }
    return this._maxTime = Math.max(this._maxTime, t), this;
  }, e.prototype.pause = function() {
    this._clip.pause(), this._paused = !0;
  }, e.prototype.resume = function() {
    this._clip.resume(), this._paused = !1;
  }, e.prototype.isPaused = function() {
    return !!this._paused;
  }, e.prototype.duration = function(t) {
    return this._maxTime = t, this._force = !0, this;
  }, e.prototype._doneCallback = function() {
    this._setTracksFinished(), this._clip = null;
    var t = this._doneCbs;
    if (t)
      for (var r = t.length, n = 0; n < r; n++)
        t[n].call(this);
  }, e.prototype._abortedCallback = function() {
    this._setTracksFinished();
    var t = this.animation, r = this._abortedCbs;
    if (t && t.removeClip(this._clip), this._clip = null, r)
      for (var n = 0; n < r.length; n++)
        r[n].call(this);
  }, e.prototype._setTracksFinished = function() {
    for (var t = this._tracks, r = this._trackKeys, n = 0; n < r.length; n++)
      t[r[n]].setFinished();
  }, e.prototype._getAdditiveTrack = function(t) {
    var r, n = this._additiveAnimators;
    if (n)
      for (var i = 0; i < n.length; i++) {
        var a = n[i].getTrack(t);
        a && (r = a);
      }
    return r;
  }, e.prototype.start = function(t) {
    if (!(this._started > 0)) {
      this._started = 1;
      for (var r = this, n = [], i = this._maxTime || 0, a = 0; a < this._trackKeys.length; a++) {
        var o = this._trackKeys[a], s = this._tracks[o], l = this._getAdditiveTrack(o), u = s.keyframes, c = u.length;
        if (s.prepare(i, l), s.needsAnimate())
          if (!this._allowDiscrete && s.discrete) {
            var f = u[c - 1];
            f && (r._target[s.propName] = f.rawValue), s.setFinished();
          } else
            n.push(s);
      }
      if (n.length || this._force) {
        var d = new lte({
          life: i,
          loop: this._loop,
          delay: this._delay || 0,
          onframe: function(h) {
            r._started = 2;
            var p = r._additiveAnimators;
            if (p) {
              for (var v = !1, g = 0; g < p.length; g++)
                if (p[g]._clip) {
                  v = !0;
                  break;
                }
              v || (r._additiveAnimators = null);
            }
            for (var g = 0; g < n.length; g++)
              n[g].step(r._target, h);
            var m = r._onframeCbs;
            if (m)
              for (var g = 0; g < m.length; g++)
                m[g](r._target, h);
          },
          ondestroy: function() {
            r._doneCallback();
          }
        });
        this._clip = d, this.animation && this.animation.addClip(d), t && d.setEasing(t);
      } else
        this._doneCallback();
      return this;
    }
  }, e.prototype.stop = function(t) {
    if (this._clip) {
      var r = this._clip;
      t && r.onframe(1), this._abortedCallback();
    }
  }, e.prototype.delay = function(t) {
    return this._delay = t, this;
  }, e.prototype.during = function(t) {
    return t && (this._onframeCbs || (this._onframeCbs = []), this._onframeCbs.push(t)), this;
  }, e.prototype.done = function(t) {
    return t && (this._doneCbs || (this._doneCbs = []), this._doneCbs.push(t)), this;
  }, e.prototype.aborted = function(t) {
    return t && (this._abortedCbs || (this._abortedCbs = []), this._abortedCbs.push(t)), this;
  }, e.prototype.getClip = function() {
    return this._clip;
  }, e.prototype.getTrack = function(t) {
    return this._tracks[t];
  }, e.prototype.getTracks = function() {
    var t = this;
    return ue(this._trackKeys, function(r) {
      return t._tracks[r];
    });
  }, e.prototype.stopTracks = function(t, r) {
    if (!t.length || !this._clip)
      return !0;
    for (var n = this._tracks, i = this._trackKeys, a = 0; a < t.length; a++) {
      var o = n[t[a]];
      o && !o.isFinished() && (r ? o.step(this._target, 1) : this._started === 1 && o.step(this._target, 0), o.setFinished());
    }
    for (var s = !0, a = 0; a < i.length; a++)
      if (!n[i[a]].isFinished()) {
        s = !1;
        break;
      }
    return s && this._abortedCallback(), s;
  }, e.prototype.saveTo = function(t, r, n) {
    if (t) {
      r = r || this._trackKeys;
      for (var i = 0; i < r.length; i++) {
        var a = r[i], o = this._tracks[a];
        if (!(!o || o.isFinished())) {
          var s = o.keyframes, l = s[n ? 0 : s.length - 1];
          l && (t[a] = Od(l.rawValue));
        }
      }
    }
  }, e.prototype.__changeFinalValue = function(t, r) {
    r = r || ut(t);
    for (var n = 0; n < r.length; n++) {
      var i = r[n], a = this._tracks[i];
      if (a) {
        var o = a.keyframes;
        if (o.length > 1) {
          var s = o.pop();
          a.addKeyframe(s.time, t[i]), a.prepare(this._maxTime, a.getAdditiveTrack());
        }
      }
    }
  }, e;
}();
function tc() {
  return (/* @__PURE__ */ new Date()).getTime();
}
var Dte = function(e) {
  Ut(t, e);
  function t(r) {
    var n = e.call(this) || this;
    return n._running = !1, n._time = 0, n._pausedTime = 0, n._pauseStart = 0, n._paused = !1, r = r || {}, n.stage = r.stage || {}, n;
  }
  return t.prototype.addClip = function(r) {
    r.animation && this.removeClip(r), this._head ? (this._tail.next = r, r.prev = this._tail, r.next = null, this._tail = r) : this._head = this._tail = r, r.animation = this;
  }, t.prototype.addAnimator = function(r) {
    r.animation = this;
    var n = r.getClip();
    n && this.addClip(n);
  }, t.prototype.removeClip = function(r) {
    if (r.animation) {
      var n = r.prev, i = r.next;
      n ? n.next = i : this._head = i, i ? i.prev = n : this._tail = n, r.next = r.prev = r.animation = null;
    }
  }, t.prototype.removeAnimator = function(r) {
    var n = r.getClip();
    n && this.removeClip(n), r.animation = null;
  }, t.prototype.update = function(r) {
    for (var n = tc() - this._pausedTime, i = n - this._time, a = this._head; a; ) {
      var o = a.next, s = a.step(n, i);
      s && (a.ondestroy(), this.removeClip(a)), a = o;
    }
    this._time = n, r || (this.trigger("frame", i), this.stage.update && this.stage.update());
  }, t.prototype._startLoop = function() {
    var r = this;
    this._running = !0;
    function n() {
      r._running && (Zg(n), !r._paused && r.update());
    }
    Zg(n);
  }, t.prototype.start = function() {
    this._running || (this._time = tc(), this._pausedTime = 0, this._startLoop());
  }, t.prototype.stop = function() {
    this._running = !1;
  }, t.prototype.pause = function() {
    this._paused || (this._pauseStart = tc(), this._paused = !0);
  }, t.prototype.resume = function() {
    this._paused && (this._pausedTime += tc() - this._pauseStart, this._paused = !1);
  }, t.prototype.clear = function() {
    for (var r = this._head; r; ) {
      var n = r.next;
      r.prev = r.next = r.animation = null, r = n;
    }
    this._head = this._tail = null;
  }, t.prototype.isFinished = function() {
    return this._head == null;
  }, t.prototype.animate = function(r, n) {
    n = n || {}, this.start();
    var i = new tC(r, n.loop);
    return this.addAnimator(i), i;
  }, t;
}(ai), Nte = 300, b1 = st.domSupported, w1 = function() {
  var e = [
    "click",
    "dblclick",
    "mousewheel",
    "wheel",
    "mouseout",
    "mouseup",
    "mousedown",
    "mousemove",
    "contextmenu"
  ], t = [
    "touchstart",
    "touchend",
    "touchmove"
  ], r = {
    pointerdown: 1,
    pointerup: 1,
    pointermove: 1,
    pointerout: 1
  }, n = ue(e, function(i) {
    var a = i.replace("mouse", "pointer");
    return r.hasOwnProperty(a) ? a : i;
  });
  return {
    mouse: e,
    touch: t,
    pointer: n
  };
}(), GE = {
  mouse: ["mousemove", "mouseup"],
  pointer: ["pointermove", "pointerup"]
}, WE = !1;
function q2(e) {
  var t = e.pointerType;
  return t === "pen" || t === "touch";
}
function Ite(e) {
  e.touching = !0, e.touchTimer != null && (clearTimeout(e.touchTimer), e.touchTimer = null), e.touchTimer = setTimeout(function() {
    e.touching = !1, e.touchTimer = null;
  }, 700);
}
function _1(e) {
  e && (e.zrByTouch = !0);
}
function Lte(e, t) {
  return Fn(e.dom, new Rte(e, t), !0);
}
function u9(e, t) {
  for (var r = t, n = !1; r && r.nodeType !== 9 && !(n = r.domBelongToZr || r !== t && r === e.painterRoot); )
    r = r.parentNode;
  return n;
}
var Rte = /* @__PURE__ */ function() {
  function e(t, r) {
    this.stopPropagation = rr, this.stopImmediatePropagation = rr, this.preventDefault = rr, this.type = r.type, this.target = this.currentTarget = t.dom, this.pointerType = r.pointerType, this.clientX = r.clientX, this.clientY = r.clientY;
  }
  return e;
}(), pi = {
  mousedown: function(e) {
    e = Fn(this.dom, e), this.__mayPointerCapture = [e.zrX, e.zrY], this.trigger("mousedown", e);
  },
  mousemove: function(e) {
    e = Fn(this.dom, e);
    var t = this.__mayPointerCapture;
    t && (e.zrX !== t[0] || e.zrY !== t[1]) && this.__togglePointerCapture(!0), this.trigger("mousemove", e);
  },
  mouseup: function(e) {
    e = Fn(this.dom, e), this.__togglePointerCapture(!1), this.trigger("mouseup", e);
  },
  mouseout: function(e) {
    e = Fn(this.dom, e);
    var t = e.toElement || e.relatedTarget;
    u9(this, t) || (this.__pointerCapturing && (e.zrEventControl = "no_globalout"), this.trigger("mouseout", e));
  },
  wheel: function(e) {
    WE = !0, e = Fn(this.dom, e), this.trigger("mousewheel", e);
  },
  mousewheel: function(e) {
    WE || (e = Fn(this.dom, e), this.trigger("mousewheel", e));
  },
  touchstart: function(e) {
    e = Fn(this.dom, e), _1(e), this.__lastTouchMoment = /* @__PURE__ */ new Date(), this.handler.processGesture(e, "start"), pi.mousemove.call(this, e), pi.mousedown.call(this, e);
  },
  touchmove: function(e) {
    e = Fn(this.dom, e), _1(e), this.handler.processGesture(e, "change"), pi.mousemove.call(this, e);
  },
  touchend: function(e) {
    e = Fn(this.dom, e), _1(e), this.handler.processGesture(e, "end"), pi.mouseup.call(this, e), +/* @__PURE__ */ new Date() - +this.__lastTouchMoment < Nte && pi.click.call(this, e);
  },
  pointerdown: function(e) {
    pi.mousedown.call(this, e);
  },
  pointermove: function(e) {
    q2(e) || pi.mousemove.call(this, e);
  },
  pointerup: function(e) {
    pi.mouseup.call(this, e);
  },
  pointerout: function(e) {
    q2(e) || pi.mouseout.call(this, e);
  }
};
j(["click", "dblclick", "contextmenu"], function(e) {
  pi[e] = function(t) {
    t = Fn(this.dom, t), this.trigger(e, t);
  };
});
var J2 = {
  pointermove: function(e) {
    q2(e) || J2.mousemove.call(this, e);
  },
  pointerup: function(e) {
    J2.mouseup.call(this, e);
  },
  mousemove: function(e) {
    this.trigger("mousemove", e);
  },
  mouseup: function(e) {
    var t = this.__pointerCapturing;
    this.__togglePointerCapture(!1), this.trigger("mouseup", e), t && (e.zrEventControl = "only_globalout", this.trigger("mouseout", e));
  }
};
function Pte(e, t) {
  var r = t.domHandlers;
  st.pointerEventsSupported ? j(w1.pointer, function(n) {
    fg(t, n, function(i) {
      r[n].call(e, i);
    });
  }) : (st.touchEventsSupported && j(w1.touch, function(n) {
    fg(t, n, function(i) {
      r[n].call(e, i), Ite(t);
    });
  }), j(w1.mouse, function(n) {
    fg(t, n, function(i) {
      i = qS(i), t.touching || r[n].call(e, i);
    });
  }));
}
function kte(e, t) {
  st.pointerEventsSupported ? j(GE.pointer, r) : st.touchEventsSupported || j(GE.mouse, r);
  function r(n) {
    function i(a) {
      a = qS(a), u9(e, a.target) || (a = Lte(e, a), t.domHandlers[n].call(e, a));
    }
    fg(t, n, i, { capture: !0 });
  }
}
function fg(e, t, r, n) {
  e.mounted[t] = r, e.listenerOpts[t] = n, H2(e.domTarget, t, r, n);
}
function S1(e) {
  var t = e.mounted;
  for (var r in t)
    t.hasOwnProperty(r) && Wee(e.domTarget, r, t[r], e.listenerOpts[r]);
  e.mounted = {};
}
var UE = /* @__PURE__ */ function() {
  function e(t, r) {
    this.mounted = {}, this.listenerOpts = {}, this.touching = !1, this.domTarget = t, this.domHandlers = r;
  }
  return e;
}(), Ote = function(e) {
  Ut(t, e);
  function t(r, n) {
    var i = e.call(this) || this;
    return i.__pointerCapturing = !1, i.dom = r, i.painterRoot = n, i._localHandlerScope = new UE(r, pi), b1 && (i._globalHandlerScope = new UE(document, J2)), Pte(i, i._localHandlerScope), i;
  }
  return t.prototype.dispose = function() {
    S1(this._localHandlerScope), b1 && S1(this._globalHandlerScope);
  }, t.prototype.setCursor = function(r) {
    this.dom.style && (this.dom.style.cursor = r || "default");
  }, t.prototype.__togglePointerCapture = function(r) {
    if (this.__mayPointerCapture = null, b1 && +this.__pointerCapturing ^ +r) {
      this.__pointerCapturing = r;
      var n = this._globalHandlerScope;
      r ? kte(this, n) : S1(n);
    }
  }, t;
}(ai), c9 = 1;
st.hasGlobalWindow && (c9 = Math.max(window.devicePixelRatio || window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI || 1, 1));
var em = c9, Q2 = 0.4, ew = "#333", tw = "#ccc", zte = "#eee", YE = Kh, ZE = 5e-5;
function As(e) {
  return e > ZE || e < -ZE;
}
var Ms = [], mu = [], C1 = yn(), T1 = Math.abs, Va = function() {
  function e() {
  }
  return e.prototype.getLocalTransform = function(t) {
    return e.getLocalTransform(this, t);
  }, e.prototype.setPosition = function(t) {
    this.x = t[0], this.y = t[1];
  }, e.prototype.setScale = function(t) {
    this.scaleX = t[0], this.scaleY = t[1];
  }, e.prototype.setSkew = function(t) {
    this.skewX = t[0], this.skewY = t[1];
  }, e.prototype.setOrigin = function(t) {
    this.originX = t[0], this.originY = t[1];
  }, e.prototype.needLocalTransform = function() {
    return As(this.rotation) || As(this.x) || As(this.y) || As(this.scaleX - 1) || As(this.scaleY - 1) || As(this.skewX) || As(this.skewY);
  }, e.prototype.updateTransform = function() {
    var t = this.parent && this.parent.transform, r = this.needLocalTransform(), n = this.transform;
    if (!(r || t)) {
      n && (YE(n), this.invTransform = null);
      return;
    }
    n = n || yn(), r ? this.getLocalTransform(n) : YE(n), t && (r ? na(n, t, n) : Dy(n, t)), this.transform = n, this._resolveGlobalScaleRatio(n);
  }, e.prototype._resolveGlobalScaleRatio = function(t) {
    var r = this.globalScaleRatio;
    if (r != null && r !== 1) {
      this.getGlobalScale(Ms);
      var n = Ms[0] < 0 ? -1 : 1, i = Ms[1] < 0 ? -1 : 1, a = ((Ms[0] - n) * r + n) / Ms[0] || 0, o = ((Ms[1] - i) * r + i) / Ms[1] || 0;
      t[0] *= a, t[1] *= a, t[2] *= o, t[3] *= o;
    }
    this.invTransform = this.invTransform || yn(), Ul(this.invTransform, t);
  }, e.prototype.getComputedTransform = function() {
    for (var t = this, r = []; t; )
      r.push(t), t = t.parent;
    for (; t = r.pop(); )
      t.updateTransform();
    return this.transform;
  }, e.prototype.setLocalTransform = function(t) {
    if (t) {
      var r = t[0] * t[0] + t[1] * t[1], n = t[2] * t[2] + t[3] * t[3], i = Math.atan2(t[1], t[0]), a = Math.PI / 2 + i - Math.atan2(t[3], t[2]);
      n = Math.sqrt(n) * Math.cos(a), r = Math.sqrt(r), this.skewX = a, this.skewY = 0, this.rotation = -i, this.x = +t[4], this.y = +t[5], this.scaleX = r, this.scaleY = n, this.originX = 0, this.originY = 0;
    }
  }, e.prototype.decomposeTransform = function() {
    if (this.transform) {
      var t = this.parent, r = this.transform;
      t && t.transform && (t.invTransform = t.invTransform || yn(), na(mu, t.invTransform, r), r = mu);
      var n = this.originX, i = this.originY;
      (n || i) && (C1[4] = n, C1[5] = i, na(mu, r, C1), mu[4] -= n, mu[5] -= i, r = mu), this.setLocalTransform(r);
    }
  }, e.prototype.getGlobalScale = function(t) {
    var r = this.transform;
    return t = t || [], r ? (t[0] = Math.sqrt(r[0] * r[0] + r[1] * r[1]), t[1] = Math.sqrt(r[2] * r[2] + r[3] * r[3]), r[0] < 0 && (t[0] = -t[0]), r[3] < 0 && (t[1] = -t[1]), t) : (t[0] = 1, t[1] = 1, t);
  }, e.prototype.transformCoordToLocal = function(t, r) {
    var n = [t, r], i = this.invTransform;
    return i && Ir(n, n, i), n;
  }, e.prototype.transformCoordToGlobal = function(t, r) {
    var n = [t, r], i = this.transform;
    return i && Ir(n, n, i), n;
  }, e.prototype.getLineScale = function() {
    var t = this.transform;
    return t && T1(t[0] - 1) > 1e-10 && T1(t[3] - 1) > 1e-10 ? Math.sqrt(T1(t[0] * t[3] - t[2] * t[1])) : 1;
  }, e.prototype.copyTransform = function(t) {
    f9(this, t);
  }, e.getLocalTransform = function(t, r) {
    r = r || [];
    var n = t.originX || 0, i = t.originY || 0, a = t.scaleX, o = t.scaleY, s = t.anchorX, l = t.anchorY, u = t.rotation || 0, c = t.x, f = t.y, d = t.skewX ? Math.tan(t.skewX) : 0, h = t.skewY ? Math.tan(-t.skewY) : 0;
    if (n || i || s || l) {
      var p = n + s, v = i + l;
      r[4] = -p * a - d * v * o, r[5] = -v * o - h * p * a;
    } else
      r[4] = r[5] = 0;
    return r[0] = a, r[3] = o, r[1] = h * a, r[2] = d * o, u && vs(r, r, u), r[4] += n + c, r[5] += i + f, r;
  }, e.initDefaultProps = function() {
    var t = e.prototype;
    t.scaleX = t.scaleY = t.globalScaleRatio = 1, t.x = t.y = t.originX = t.originY = t.skewX = t.skewY = t.rotation = t.anchorX = t.anchorY = 0;
  }(), e;
}(), la = [
  "x",
  "y",
  "originX",
  "originY",
  "anchorX",
  "anchorY",
  "rotation",
  "scaleX",
  "scaleY",
  "skewX",
  "skewY"
];
function f9(e, t) {
  for (var r = 0; r < la.length; r++) {
    var n = la[r];
    e[n] = t[n];
  }
}
var XE = {};
function Dn(e, t) {
  t = t || ns;
  var r = XE[t];
  r || (r = XE[t] = new qh(500));
  var n = r.get(e);
  return n == null && (n = Di.measureText(e, t).width, r.put(e, n)), n;
}
function KE(e, t, r, n) {
  var i = Dn(e, t), a = Ly(t), o = gd(0, i, r), s = Zu(0, a, n), l = new tt(o, s, i, a);
  return l;
}
function Jh(e, t, r, n) {
  var i = ((e || "") + "").split(`
`), a = i.length;
  if (a === 1)
    return KE(i[0], t, r, n);
  for (var o = new tt(0, 0, 0, 0), s = 0; s < i.length; s++) {
    var l = KE(i[s], t, r, n);
    s === 0 ? o.copy(l) : o.union(l);
  }
  return o;
}
function gd(e, t, r) {
  return r === "right" ? e -= t : r === "center" && (e -= t / 2), e;
}
function Zu(e, t, r) {
  return r === "middle" ? e -= t / 2 : r === "bottom" && (e -= t), e;
}
function Ly(e) {
  return Dn("国", e);
}
function Ii(e, t) {
  return typeof e == "string" ? e.lastIndexOf("%") >= 0 ? parseFloat(e) / 100 * t : parseFloat(e) : e;
}
function tm(e, t, r) {
  var n = t.position || "inside", i = t.distance != null ? t.distance : 5, a = r.height, o = r.width, s = a / 2, l = r.x, u = r.y, c = "left", f = "top";
  if (n instanceof Array)
    l += Ii(n[0], r.width), u += Ii(n[1], r.height), c = null, f = null;
  else
    switch (n) {
      case "left":
        l -= i, u += s, c = "right", f = "middle";
        break;
      case "right":
        l += i + o, u += s, f = "middle";
        break;
      case "top":
        l += o / 2, u -= i, c = "center", f = "bottom";
        break;
      case "bottom":
        l += o / 2, u += a + i, c = "center";
        break;
      case "inside":
        l += o / 2, u += s, c = "center", f = "middle";
        break;
      case "insideLeft":
        l += i, u += s, f = "middle";
        break;
      case "insideRight":
        l += o - i, u += s, c = "right", f = "middle";
        break;
      case "insideTop":
        l += o / 2, u += i, c = "center";
        break;
      case "insideBottom":
        l += o / 2, u += a - i, c = "center", f = "bottom";
        break;
      case "insideTopLeft":
        l += i, u += i;
        break;
      case "insideTopRight":
        l += o - i, u += i, c = "right";
        break;
      case "insideBottomLeft":
        l += i, u += a - i, f = "bottom";
        break;
      case "insideBottomRight":
        l += o - i, u += a - i, c = "right", f = "bottom";
        break;
    }
  return e = e || {}, e.x = l, e.y = u, e.align = c, e.verticalAlign = f, e;
}
var A1 = "__zr_normal__", M1 = la.concat(["ignore"]), jte = ei(la, function(e, t) {
  return e[t] = !0, e;
}, { ignore: !1 }), yu = {}, Vte = new tt(0, 0, 0, 0), Ry = function() {
  function e(t) {
    this.id = US(), this.animators = [], this.currentStates = [], this.states = {}, this._init(t);
  }
  return e.prototype._init = function(t) {
    this.attr(t);
  }, e.prototype.drift = function(t, r, n) {
    switch (this.draggable) {
      case "horizontal":
        r = 0;
        break;
      case "vertical":
        t = 0;
        break;
    }
    var i = this.transform;
    i || (i = this.transform = [1, 0, 0, 1, 0, 0]), i[4] += t, i[5] += r, this.decomposeTransform(), this.markRedraw();
  }, e.prototype.beforeUpdate = function() {
  }, e.prototype.afterUpdate = function() {
  }, e.prototype.update = function() {
    this.updateTransform(), this.__dirty && this.updateInnerText();
  }, e.prototype.updateInnerText = function(t) {
    var r = this._textContent;
    if (r && (!r.ignore || t)) {
      this.textConfig || (this.textConfig = {});
      var n = this.textConfig, i = n.local, a = r.innerTransformable, o = void 0, s = void 0, l = !1;
      a.parent = i ? this : null;
      var u = !1;
      if (a.copyTransform(r), n.position != null) {
        var c = Vte;
        n.layoutRect ? c.copy(n.layoutRect) : c.copy(this.getBoundingRect()), i || c.applyTransform(this.transform), this.calculateTextPosition ? this.calculateTextPosition(yu, n, c) : tm(yu, n, c), a.x = yu.x, a.y = yu.y, o = yu.align, s = yu.verticalAlign;
        var f = n.origin;
        if (f && n.rotation != null) {
          var d = void 0, h = void 0;
          f === "center" ? (d = c.width * 0.5, h = c.height * 0.5) : (d = Ii(f[0], c.width), h = Ii(f[1], c.height)), u = !0, a.originX = -a.x + d + (i ? 0 : c.x), a.originY = -a.y + h + (i ? 0 : c.y);
        }
      }
      n.rotation != null && (a.rotation = n.rotation);
      var p = n.offset;
      p && (a.x += p[0], a.y += p[1], u || (a.originX = -p[0], a.originY = -p[1]));
      var v = n.inside == null ? typeof n.position == "string" && n.position.indexOf("inside") >= 0 : n.inside, g = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {}), m = void 0, y = void 0, b = void 0;
      v && this.canBeInsideText() ? (m = n.insideFill, y = n.insideStroke, (m == null || m === "auto") && (m = this.getInsideTextFill()), (y == null || y === "auto") && (y = this.getInsideTextStroke(m), b = !0)) : (m = n.outsideFill, y = n.outsideStroke, (m == null || m === "auto") && (m = this.getOutsideFill()), (y == null || y === "auto") && (y = this.getOutsideStroke(m), b = !0)), m = m || "#000", (m !== g.fill || y !== g.stroke || b !== g.autoStroke || o !== g.align || s !== g.verticalAlign) && (l = !0, g.fill = m, g.stroke = y, g.autoStroke = b, g.align = o, g.verticalAlign = s, r.setDefaultTextStyle(g)), r.__dirty |= Cn, l && r.dirtyStyle(!0);
    }
  }, e.prototype.canBeInsideText = function() {
    return !0;
  }, e.prototype.getInsideTextFill = function() {
    return "#fff";
  }, e.prototype.getInsideTextStroke = function(t) {
    return "#000";
  }, e.prototype.getOutsideFill = function() {
    return this.__zr && this.__zr.isDarkMode() ? tw : ew;
  }, e.prototype.getOutsideStroke = function(t) {
    var r = this.__zr && this.__zr.getBackgroundColor(), n = typeof r == "string" && on(r);
    n || (n = [255, 255, 255, 1]);
    for (var i = n[3], a = this.__zr.isDarkMode(), o = 0; o < 3; o++)
      n[o] = n[o] * i + (a ? 0 : 255) * (1 - i);
    return n[3] = 1, Ti(n, "rgba");
  }, e.prototype.traverse = function(t, r) {
  }, e.prototype.attrKV = function(t, r) {
    t === "textConfig" ? this.setTextConfig(r) : t === "textContent" ? this.setTextContent(r) : t === "clipPath" ? this.setClipPath(r) : t === "extra" ? (this.extra = this.extra || {}, ae(this.extra, r)) : this[t] = r;
  }, e.prototype.hide = function() {
    this.ignore = !0, this.markRedraw();
  }, e.prototype.show = function() {
    this.ignore = !1, this.markRedraw();
  }, e.prototype.attr = function(t, r) {
    if (typeof t == "string")
      this.attrKV(t, r);
    else if (Ne(t))
      for (var n = t, i = ut(n), a = 0; a < i.length; a++) {
        var o = i[a];
        this.attrKV(o, t[o]);
      }
    return this.markRedraw(), this;
  }, e.prototype.saveCurrentToNormalState = function(t) {
    this._innerSaveToNormal(t);
    for (var r = this._normalState, n = 0; n < this.animators.length; n++) {
      var i = this.animators[n], a = i.__fromStateTransition;
      if (!(i.getLoop() || a && a !== A1)) {
        var o = i.targetName, s = o ? r[o] : r;
        i.saveTo(s);
      }
    }
  }, e.prototype._innerSaveToNormal = function(t) {
    var r = this._normalState;
    r || (r = this._normalState = {}), t.textConfig && !r.textConfig && (r.textConfig = this.textConfig), this._savePrimaryToNormal(t, r, M1);
  }, e.prototype._savePrimaryToNormal = function(t, r, n) {
    for (var i = 0; i < n.length; i++) {
      var a = n[i];
      t[a] != null && !(a in r) && (r[a] = this[a]);
    }
  }, e.prototype.hasState = function() {
    return this.currentStates.length > 0;
  }, e.prototype.getState = function(t) {
    return this.states[t];
  }, e.prototype.ensureState = function(t) {
    var r = this.states;
    return r[t] || (r[t] = {}), r[t];
  }, e.prototype.clearStates = function(t) {
    this.useState(A1, !1, t);
  }, e.prototype.useState = function(t, r, n, i) {
    var a = t === A1, o = this.hasState();
    if (!(!o && a)) {
      var s = this.currentStates, l = this.stateTransition;
      if (!(rt(s, t) >= 0 && (r || s.length === 1))) {
        var u;
        if (this.stateProxy && !a && (u = this.stateProxy(t)), u || (u = this.states && this.states[t]), !u && !a) {
          Kn("State " + t + " not exists.");
          return;
        }
        a || this.saveCurrentToNormalState(u);
        var c = !!(u && u.hoverLayer || i);
        c && this._toggleHoverLayerFlag(!0), this._applyStateObj(t, u, this._normalState, r, !n && !this.__inHover && l && l.duration > 0, l);
        var f = this._textContent, d = this._textGuide;
        return f && f.useState(t, r, n, c), d && d.useState(t, r, n, c), a ? (this.currentStates = [], this._normalState = {}) : r ? this.currentStates.push(t) : this.currentStates = [t], this._updateAnimationTargets(), this.markRedraw(), !c && this.__inHover && (this._toggleHoverLayerFlag(!1), this.__dirty &= ~Cn), u;
      }
    }
  }, e.prototype.useStates = function(t, r, n) {
    if (!t.length)
      this.clearStates();
    else {
      var i = [], a = this.currentStates, o = t.length, s = o === a.length;
      if (s) {
        for (var l = 0; l < o; l++)
          if (t[l] !== a[l]) {
            s = !1;
            break;
          }
      }
      if (s)
        return;
      for (var l = 0; l < o; l++) {
        var u = t[l], c = void 0;
        this.stateProxy && (c = this.stateProxy(u, t)), c || (c = this.states[u]), c && i.push(c);
      }
      var f = i[o - 1], d = !!(f && f.hoverLayer || n);
      d && this._toggleHoverLayerFlag(!0);
      var h = this._mergeStates(i), p = this.stateTransition;
      this.saveCurrentToNormalState(h), this._applyStateObj(t.join(","), h, this._normalState, !1, !r && !this.__inHover && p && p.duration > 0, p);
      var v = this._textContent, g = this._textGuide;
      v && v.useStates(t, r, d), g && g.useStates(t, r, d), this._updateAnimationTargets(), this.currentStates = t.slice(), this.markRedraw(), !d && this.__inHover && (this._toggleHoverLayerFlag(!1), this.__dirty &= ~Cn);
    }
  }, e.prototype.isSilent = function() {
    for (var t = this.silent, r = this.parent; !t && r; ) {
      if (r.silent) {
        t = !0;
        break;
      }
      r = r.parent;
    }
    return t;
  }, e.prototype._updateAnimationTargets = function() {
    for (var t = 0; t < this.animators.length; t++) {
      var r = this.animators[t];
      r.targetName && r.changeTarget(this[r.targetName]);
    }
  }, e.prototype.removeState = function(t) {
    var r = rt(this.currentStates, t);
    if (r >= 0) {
      var n = this.currentStates.slice();
      n.splice(r, 1), this.useStates(n);
    }
  }, e.prototype.replaceState = function(t, r, n) {
    var i = this.currentStates.slice(), a = rt(i, t), o = rt(i, r) >= 0;
    a >= 0 ? o ? i.splice(a, 1) : i[a] = r : n && !o && i.push(r), this.useStates(i);
  }, e.prototype.toggleState = function(t, r) {
    r ? this.useState(t, !0) : this.removeState(t);
  }, e.prototype._mergeStates = function(t) {
    for (var r = {}, n, i = 0; i < t.length; i++) {
      var a = t[i];
      ae(r, a), a.textConfig && (n = n || {}, ae(n, a.textConfig));
    }
    return n && (r.textConfig = n), r;
  }, e.prototype._applyStateObj = function(t, r, n, i, a, o) {
    var s = !(r && i);
    r && r.textConfig ? (this.textConfig = ae({}, i ? this.textConfig : n.textConfig), ae(this.textConfig, r.textConfig)) : s && n.textConfig && (this.textConfig = n.textConfig);
    for (var l = {}, u = !1, c = 0; c < M1.length; c++) {
      var f = M1[c], d = a && jte[f];
      r && r[f] != null ? d ? (u = !0, l[f] = r[f]) : this[f] = r[f] : s && n[f] != null && (d ? (u = !0, l[f] = n[f]) : this[f] = n[f]);
    }
    if (!a)
      for (var c = 0; c < this.animators.length; c++) {
        var h = this.animators[c], p = h.targetName;
        h.getLoop() || h.__changeFinalValue(p ? (r || n)[p] : r || n);
      }
    u && this._transitionState(t, l, o);
  }, e.prototype._attachComponent = function(t) {
    if (t.__zr && !t.__hostTarget) {
      if (process.env.NODE_ENV !== "production")
        throw new Error("Text element has been added to zrender.");
      return;
    }
    if (t === this) {
      if (process.env.NODE_ENV !== "production")
        throw new Error("Recursive component attachment.");
      return;
    }
    var r = this.__zr;
    r && t.addSelfToZr(r), t.__zr = r, t.__hostTarget = this;
  }, e.prototype._detachComponent = function(t) {
    t.__zr && t.removeSelfFromZr(t.__zr), t.__zr = null, t.__hostTarget = null;
  }, e.prototype.getClipPath = function() {
    return this._clipPath;
  }, e.prototype.setClipPath = function(t) {
    this._clipPath && this._clipPath !== t && this.removeClipPath(), this._attachComponent(t), this._clipPath = t, this.markRedraw();
  }, e.prototype.removeClipPath = function() {
    var t = this._clipPath;
    t && (this._detachComponent(t), this._clipPath = null, this.markRedraw());
  }, e.prototype.getTextContent = function() {
    return this._textContent;
  }, e.prototype.setTextContent = function(t) {
    var r = this._textContent;
    if (r !== t) {
      if (r && r !== t && this.removeTextContent(), process.env.NODE_ENV !== "production" && t.__zr && !t.__hostTarget)
        throw new Error("Text element has been added to zrender.");
      t.innerTransformable = new Va(), this._attachComponent(t), this._textContent = t, this.markRedraw();
    }
  }, e.prototype.setTextConfig = function(t) {
    this.textConfig || (this.textConfig = {}), ae(this.textConfig, t), this.markRedraw();
  }, e.prototype.removeTextConfig = function() {
    this.textConfig = null, this.markRedraw();
  }, e.prototype.removeTextContent = function() {
    var t = this._textContent;
    t && (t.innerTransformable = null, this._detachComponent(t), this._textContent = null, this._innerTextDefaultStyle = null, this.markRedraw());
  }, e.prototype.getTextGuideLine = function() {
    return this._textGuide;
  }, e.prototype.setTextGuideLine = function(t) {
    this._textGuide && this._textGuide !== t && this.removeTextGuideLine(), this._attachComponent(t), this._textGuide = t, this.markRedraw();
  }, e.prototype.removeTextGuideLine = function() {
    var t = this._textGuide;
    t && (this._detachComponent(t), this._textGuide = null, this.markRedraw());
  }, e.prototype.markRedraw = function() {
    this.__dirty |= Cn;
    var t = this.__zr;
    t && (this.__inHover ? t.refreshHover() : t.refresh()), this.__hostTarget && this.__hostTarget.markRedraw();
  }, e.prototype.dirty = function() {
    this.markRedraw();
  }, e.prototype._toggleHoverLayerFlag = function(t) {
    this.__inHover = t;
    var r = this._textContent, n = this._textGuide;
    r && (r.__inHover = t), n && (n.__inHover = t);
  }, e.prototype.addSelfToZr = function(t) {
    if (this.__zr !== t) {
      this.__zr = t;
      var r = this.animators;
      if (r)
        for (var n = 0; n < r.length; n++)
          t.animation.addAnimator(r[n]);
      this._clipPath && this._clipPath.addSelfToZr(t), this._textContent && this._textContent.addSelfToZr(t), this._textGuide && this._textGuide.addSelfToZr(t);
    }
  }, e.prototype.removeSelfFromZr = function(t) {
    if (this.__zr) {
      this.__zr = null;
      var r = this.animators;
      if (r)
        for (var n = 0; n < r.length; n++)
          t.animation.removeAnimator(r[n]);
      this._clipPath && this._clipPath.removeSelfFromZr(t), this._textContent && this._textContent.removeSelfFromZr(t), this._textGuide && this._textGuide.removeSelfFromZr(t);
    }
  }, e.prototype.animate = function(t, r, n) {
    var i = t ? this[t] : this;
    if (process.env.NODE_ENV !== "production" && !i) {
      Kn('Property "' + t + '" is not existed in element ' + this.id);
      return;
    }
    var a = new tC(i, r, n);
    return t && (a.targetName = t), this.addAnimator(a, t), a;
  }, e.prototype.addAnimator = function(t, r) {
    var n = this.__zr, i = this;
    t.during(function() {
      i.updateDuringAnimation(r);
    }).done(function() {
      var a = i.animators, o = rt(a, t);
      o >= 0 && a.splice(o, 1);
    }), this.animators.push(t), n && n.animation.addAnimator(t), n && n.wakeUp();
  }, e.prototype.updateDuringAnimation = function(t) {
    this.markRedraw();
  }, e.prototype.stopAnimation = function(t, r) {
    for (var n = this.animators, i = n.length, a = [], o = 0; o < i; o++) {
      var s = n[o];
      !t || t === s.scope ? s.stop(r) : a.push(s);
    }
    return this.animators = a, this;
  }, e.prototype.animateTo = function(t, r, n) {
    E1(this, t, r, n);
  }, e.prototype.animateFrom = function(t, r, n) {
    E1(this, t, r, n, !0);
  }, e.prototype._transitionState = function(t, r, n, i) {
    for (var a = E1(this, r, n, i), o = 0; o < a.length; o++)
      a[o].__fromStateTransition = t;
  }, e.prototype.getBoundingRect = function() {
    return null;
  }, e.prototype.getPaintRect = function() {
    return null;
  }, e.initDefaultProps = function() {
    var t = e.prototype;
    t.type = "element", t.name = "", t.ignore = t.silent = t.isGroup = t.draggable = t.dragging = t.ignoreClip = t.__inHover = !1, t.__dirty = Cn;
    var r = {};
    function n(a, o, s) {
      r[a + o + s] || (console.warn("DEPRECATED: '" + a + "' has been deprecated. use '" + o + "', '" + s + "' instead"), r[a + o + s] = !0);
    }
    function i(a, o, s, l) {
      Object.defineProperty(t, a, {
        get: function() {
          if (process.env.NODE_ENV !== "production" && n(a, s, l), !this[o]) {
            var c = this[o] = [];
            u(this, c);
          }
          return this[o];
        },
        set: function(c) {
          process.env.NODE_ENV !== "production" && n(a, s, l), this[s] = c[0], this[l] = c[1], this[o] = c, u(this, c);
        }
      });
      function u(c, f) {
        Object.defineProperty(f, 0, {
          get: function() {
            return c[s];
          },
          set: function(d) {
            c[s] = d;
          }
        }), Object.defineProperty(f, 1, {
          get: function() {
            return c[l];
          },
          set: function(d) {
            c[l] = d;
          }
        });
      }
    }
    Object.defineProperty && (i("position", "_legacyPos", "x", "y"), i("scale", "_legacyScale", "scaleX", "scaleY"), i("origin", "_legacyOrigin", "originX", "originY"));
  }(), e;
}();
ir(Ry, ai);
ir(Ry, Va);
function E1(e, t, r, n, i) {
  r = r || {};
  var a = [];
  d9(e, "", e, t, r, n, a, i);
  var o = a.length, s = !1, l = r.done, u = r.aborted, c = function() {
    s = !0, o--, o <= 0 && (s ? l && l() : u && u());
  }, f = function() {
    o--, o <= 0 && (s ? l && l() : u && u());
  };
  o || l && l(), a.length > 0 && r.during && a[0].during(function(p, v) {
    r.during(v);
  });
  for (var d = 0; d < a.length; d++) {
    var h = a[d];
    c && h.done(c), f && h.aborted(f), r.force && h.duration(r.duration), h.start(r.easing);
  }
  return a;
}
function D1(e, t, r) {
  for (var n = 0; n < r; n++)
    e[n] = t[n];
}
function Bte(e) {
  return zr(e[0]);
}
function Fte(e, t, r) {
  if (zr(t[r]))
    if (zr(e[r]) || (e[r] = []), Kr(t[r])) {
      var n = t[r].length;
      e[r].length !== n && (e[r] = new t[r].constructor(n), D1(e[r], t[r], n));
    } else {
      var i = t[r], a = e[r], o = i.length;
      if (Bte(i))
        for (var s = i[0].length, l = 0; l < o; l++)
          a[l] ? D1(a[l], i[l], s) : a[l] = Array.prototype.slice.call(i[l]);
      else
        D1(a, i, o);
      a.length = i.length;
    }
  else
    e[r] = t[r];
}
function $te(e, t) {
  return e === t || zr(e) && zr(t) && Hte(e, t);
}
function Hte(e, t) {
  var r = e.length;
  if (r !== t.length)
    return !1;
  for (var n = 0; n < r; n++)
    if (e[n] !== t[n])
      return !1;
  return !0;
}
function d9(e, t, r, n, i, a, o, s) {
  for (var l = ut(n), u = i.duration, c = i.delay, f = i.additive, d = i.setToFinal, h = !Ne(a), p = e.animators, v = [], g = 0; g < l.length; g++) {
    var m = l[g], y = n[m];
    if (y != null && r[m] != null && (h || a[m]))
      if (Ne(y) && !zr(y) && !Zh(y)) {
        if (t) {
          s || (r[m] = y, e.updateDuringAnimation(t));
          continue;
        }
        d9(e, m, r[m], y, i, a && a[m], o, s);
      } else
        v.push(m);
    else s || (r[m] = y, e.updateDuringAnimation(t), v.push(m));
  }
  var b = v.length;
  if (!f && b)
    for (var w = 0; w < p.length; w++) {
      var _ = p[w];
      if (_.targetName === t) {
        var S = _.stopTracks(v);
        if (S) {
          var C = rt(p, _);
          p.splice(C, 1);
        }
      }
    }
  if (i.force || (v = Ct(v, function(N) {
    return !$te(n[N], r[N]);
  }), b = v.length), b > 0 || i.force && !o.length) {
    var A = void 0, M = void 0, D = void 0;
    if (s) {
      M = {}, d && (A = {});
      for (var w = 0; w < b; w++) {
        var m = v[w];
        M[m] = r[m], d ? A[m] = n[m] : r[m] = n[m];
      }
    } else if (d) {
      D = {};
      for (var w = 0; w < b; w++) {
        var m = v[w];
        D[m] = Od(r[m]), Fte(r, n, m);
      }
    }
    var _ = new tC(r, !1, !1, f ? Ct(p, function(R) {
      return R.targetName === t;
    }) : null);
    _.targetName = t, i.scope && (_.scope = i.scope), d && A && _.whenWithKeys(0, A, v), D && _.whenWithKeys(0, D, v), _.whenWithKeys(u ?? 500, s ? M : n, v).delay(c || 0), e.addAnimator(_, t), o.push(_);
  }
}
var Fe = function(e) {
  Ut(t, e);
  function t(r) {
    var n = e.call(this) || this;
    return n.isGroup = !0, n._children = [], n.attr(r), n;
  }
  return t.prototype.childrenRef = function() {
    return this._children;
  }, t.prototype.children = function() {
    return this._children.slice();
  }, t.prototype.childAt = function(r) {
    return this._children[r];
  }, t.prototype.childOfName = function(r) {
    for (var n = this._children, i = 0; i < n.length; i++)
      if (n[i].name === r)
        return n[i];
  }, t.prototype.childCount = function() {
    return this._children.length;
  }, t.prototype.add = function(r) {
    if (r && (r !== this && r.parent !== this && (this._children.push(r), this._doAdd(r)), process.env.NODE_ENV !== "production" && r.__hostTarget))
      throw "This elemenet has been used as an attachment";
    return this;
  }, t.prototype.addBefore = function(r, n) {
    if (r && r !== this && r.parent !== this && n && n.parent === this) {
      var i = this._children, a = i.indexOf(n);
      a >= 0 && (i.splice(a, 0, r), this._doAdd(r));
    }
    return this;
  }, t.prototype.replace = function(r, n) {
    var i = rt(this._children, r);
    return i >= 0 && this.replaceAt(n, i), this;
  }, t.prototype.replaceAt = function(r, n) {
    var i = this._children, a = i[n];
    if (r && r !== this && r.parent !== this && r !== a) {
      i[n] = r, a.parent = null;
      var o = this.__zr;
      o && a.removeSelfFromZr(o), this._doAdd(r);
    }
    return this;
  }, t.prototype._doAdd = function(r) {
    r.parent && r.parent.remove(r), r.parent = this;
    var n = this.__zr;
    n && n !== r.__zr && r.addSelfToZr(n), n && n.refresh();
  }, t.prototype.remove = function(r) {
    var n = this.__zr, i = this._children, a = rt(i, r);
    return a < 0 ? this : (i.splice(a, 1), r.parent = null, n && r.removeSelfFromZr(n), n && n.refresh(), this);
  }, t.prototype.removeAll = function() {
    for (var r = this._children, n = this.__zr, i = 0; i < r.length; i++) {
      var a = r[i];
      n && a.removeSelfFromZr(n), a.parent = null;
    }
    return r.length = 0, this;
  }, t.prototype.eachChild = function(r, n) {
    for (var i = this._children, a = 0; a < i.length; a++) {
      var o = i[a];
      r.call(n, o, a);
    }
    return this;
  }, t.prototype.traverse = function(r, n) {
    for (var i = 0; i < this._children.length; i++) {
      var a = this._children[i], o = r.call(n, a);
      a.isGroup && !o && a.traverse(r, n);
    }
    return this;
  }, t.prototype.addSelfToZr = function(r) {
    e.prototype.addSelfToZr.call(this, r);
    for (var n = 0; n < this._children.length; n++) {
      var i = this._children[n];
      i.addSelfToZr(r);
    }
  }, t.prototype.removeSelfFromZr = function(r) {
    e.prototype.removeSelfFromZr.call(this, r);
    for (var n = 0; n < this._children.length; n++) {
      var i = this._children[n];
      i.removeSelfFromZr(r);
    }
  }, t.prototype.getBoundingRect = function(r) {
    for (var n = new tt(0, 0, 0, 0), i = r || this._children, a = [], o = null, s = 0; s < i.length; s++) {
      var l = i[s];
      if (!(l.ignore || l.invisible)) {
        var u = l.getBoundingRect(), c = l.getLocalTransform(a);
        c ? (tt.applyTransform(n, u, c), o = o || n.clone(), o.union(n)) : (o = o || u.clone(), o.union(u));
      }
    }
    return o || n;
  }, t;
}(Ry);
Fe.prototype.type = "group";
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var md = {}, cl = {};
function Gte(e) {
  delete cl[e];
}
function Wte(e) {
  if (!e)
    return !1;
  if (typeof e == "string")
    return hh(e, 1) < Q2;
  if (e.colorStops) {
    for (var t = e.colorStops, r = 0, n = t.length, i = 0; i < n; i++)
      r += hh(t[i].color, 1);
    return r /= n, r < Q2;
  }
  return !1;
}
var Ute = function() {
  function e(t, r, n) {
    var i = this;
    this._sleepAfterStill = 10, this._stillFrameAccum = 0, this._needsRefresh = !0, this._needsRefreshHover = !0, this._darkMode = !1, n = n || {}, this.dom = r, this.id = t;
    var a = new nte(), o = n.renderer || "canvas";
    if (md[o] || (o = ut(md)[0]), process.env.NODE_ENV !== "production" && !md[o])
      throw new Error("Renderer '" + o + "' is not imported. Please import it first.");
    n.useDirtyRect = n.useDirtyRect == null ? !1 : n.useDirtyRect;
    var s = new md[o](r, a, n, t), l = n.ssr || s.ssrOnly;
    this.storage = a, this.painter = s;
    var u = !st.node && !st.worker && !l ? new Ote(s.getViewportRoot(), s.root) : null, c = n.useCoarsePointer, f = c == null || c === "auto" ? st.touchEventsSupported : !!c, d = 44, h;
    f && (h = Ge(n.pointerSize, d)), this.handler = new Wk(a, s, u, s.root, h), this.animation = new Dte({
      stage: {
        update: l ? null : function() {
          return i._flush(!0);
        }
      }
    }), l || this.animation.start();
  }
  return e.prototype.add = function(t) {
    this._disposed || !t || (this.storage.addRoot(t), t.addSelfToZr(this), this.refresh());
  }, e.prototype.remove = function(t) {
    this._disposed || !t || (this.storage.delRoot(t), t.removeSelfFromZr(this), this.refresh());
  }, e.prototype.configLayer = function(t, r) {
    this._disposed || (this.painter.configLayer && this.painter.configLayer(t, r), this.refresh());
  }, e.prototype.setBackgroundColor = function(t) {
    this._disposed || (this.painter.setBackgroundColor && this.painter.setBackgroundColor(t), this.refresh(), this._backgroundColor = t, this._darkMode = Wte(t));
  }, e.prototype.getBackgroundColor = function() {
    return this._backgroundColor;
  }, e.prototype.setDarkMode = function(t) {
    this._darkMode = t;
  }, e.prototype.isDarkMode = function() {
    return this._darkMode;
  }, e.prototype.refreshImmediately = function(t) {
    this._disposed || (t || this.animation.update(!0), this._needsRefresh = !1, this.painter.refresh(), this._needsRefresh = !1);
  }, e.prototype.refresh = function() {
    this._disposed || (this._needsRefresh = !0, this.animation.start());
  }, e.prototype.flush = function() {
    this._disposed || this._flush(!1);
  }, e.prototype._flush = function(t) {
    var r, n = tc();
    this._needsRefresh && (r = !0, this.refreshImmediately(t)), this._needsRefreshHover && (r = !0, this.refreshHoverImmediately());
    var i = tc();
    r ? (this._stillFrameAccum = 0, this.trigger("rendered", {
      elapsedTime: i - n
    })) : this._sleepAfterStill > 0 && (this._stillFrameAccum++, this._stillFrameAccum > this._sleepAfterStill && this.animation.stop());
  }, e.prototype.setSleepAfterStill = function(t) {
    this._sleepAfterStill = t;
  }, e.prototype.wakeUp = function() {
    this._disposed || (this.animation.start(), this._stillFrameAccum = 0);
  }, e.prototype.refreshHover = function() {
    this._needsRefreshHover = !0;
  }, e.prototype.refreshHoverImmediately = function() {
    this._disposed || (this._needsRefreshHover = !1, this.painter.refreshHover && this.painter.getType() === "canvas" && this.painter.refreshHover());
  }, e.prototype.resize = function(t) {
    this._disposed || (t = t || {}, this.painter.resize(t.width, t.height), this.handler.resize());
  }, e.prototype.clearAnimation = function() {
    this._disposed || this.animation.clear();
  }, e.prototype.getWidth = function() {
    if (!this._disposed)
      return this.painter.getWidth();
  }, e.prototype.getHeight = function() {
    if (!this._disposed)
      return this.painter.getHeight();
  }, e.prototype.setCursorStyle = function(t) {
    this._disposed || this.handler.setCursorStyle(t);
  }, e.prototype.findHover = function(t, r) {
    if (!this._disposed)
      return this.handler.findHover(t, r);
  }, e.prototype.on = function(t, r, n) {
    return this._disposed || this.handler.on(t, r, n), this;
  }, e.prototype.off = function(t, r) {
    this._disposed || this.handler.off(t, r);
  }, e.prototype.trigger = function(t, r) {
    this._disposed || this.handler.trigger(t, r);
  }, e.prototype.clear = function() {
    if (!this._disposed) {
      for (var t = this.storage.getRoots(), r = 0; r < t.length; r++)
        t[r] instanceof Fe && t[r].removeSelfFromZr(this);
      this.storage.delAllRoots(), this.painter.clear();
    }
  }, e.prototype.dispose = function() {
    this._disposed || (this.animation.stop(), this.clear(), this.storage.dispose(), this.painter.dispose(), this.handler.dispose(), this.animation = this.storage = this.painter = this.handler = null, this._disposed = !0, Gte(this.id));
  }, e;
}();
function rw(e, t) {
  var r = new Ute(US(), e, t);
  return cl[r.id] = r, r;
}
function Yte(e) {
  e.dispose();
}
function Zte() {
  for (var e in cl)
    cl.hasOwnProperty(e) && cl[e].dispose();
  cl = {};
}
function Xte(e) {
  return cl[e];
}
function h9(e, t) {
  md[e] = t;
}
var nw;
function p9(e) {
  if (typeof nw == "function")
    return nw(e);
}
function v9(e) {
  nw = e;
}
var Kte = "5.6.1";
const qte = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  dispose: Yte,
  disposeAll: Zte,
  getElementSSRData: p9,
  getInstance: Xte,
  init: rw,
  registerPainter: h9,
  registerSSRDataGetter: v9,
  version: Kte
}, Symbol.toStringTag, { value: "Module" }));
var qE = 1e-4, g9 = 20;
function Jte(e) {
  return e.replace(/^\s+|\s+$/g, "");
}
function Mt(e, t, r, n) {
  var i = t[0], a = t[1], o = r[0], s = r[1], l = a - i, u = s - o;
  if (l === 0)
    return u === 0 ? o : (o + s) / 2;
  if (n)
    if (l > 0) {
      if (e <= i)
        return o;
      if (e >= a)
        return s;
    } else {
      if (e >= i)
        return o;
      if (e <= a)
        return s;
    }
  else {
    if (e === i)
      return o;
    if (e === a)
      return s;
  }
  return (e - i) / l * u + o;
}
function pe(e, t) {
  switch (e) {
    case "center":
    case "middle":
      e = "50%";
      break;
    case "left":
    case "top":
      e = "0%";
      break;
    case "right":
    case "bottom":
      e = "100%";
      break;
  }
  return ge(e) ? Jte(e).match(/%$/) ? parseFloat(e) / 100 * t : parseFloat(e) : e == null ? NaN : +e;
}
function tr(e, t, r) {
  return t == null && (t = 10), t = Math.min(Math.max(0, t), g9), e = (+e).toFixed(t), r ? e : +e;
}
function An(e) {
  return e.sort(function(t, r) {
    return t - r;
  }), e;
}
function bi(e) {
  if (e = +e, isNaN(e))
    return 0;
  if (e > 1e-14) {
    for (var t = 1, r = 0; r < 15; r++, t *= 10)
      if (Math.round(e * t) / t === e)
        return r;
  }
  return rm(e);
}
function rm(e) {
  var t = e.toString().toLowerCase(), r = t.indexOf("e"), n = r > 0 ? +t.slice(r + 1) : 0, i = r > 0 ? r : t.length, a = t.indexOf("."), o = a < 0 ? 0 : i - 1 - a;
  return Math.max(0, o - n);
}
function rC(e, t) {
  var r = Math.log, n = Math.LN10, i = Math.floor(r(e[1] - e[0]) / n), a = Math.round(r(Math.abs(t[1] - t[0])) / n), o = Math.min(Math.max(-i + a, 0), 20);
  return isFinite(o) ? o : 20;
}
function Qte(e, t, r) {
  if (!e[t])
    return 0;
  var n = m9(e, r);
  return n[t] || 0;
}
function m9(e, t) {
  var r = ei(e, function(h, p) {
    return h + (isNaN(p) ? 0 : p);
  }, 0);
  if (r === 0)
    return [];
  for (var n = Math.pow(10, t), i = ue(e, function(h) {
    return (isNaN(h) ? 0 : h) / r * n * 100;
  }), a = n * 100, o = ue(i, function(h) {
    return Math.floor(h);
  }), s = ei(o, function(h, p) {
    return h + p;
  }, 0), l = ue(i, function(h, p) {
    return h - o[p];
  }); s < a; ) {
    for (var u = Number.NEGATIVE_INFINITY, c = null, f = 0, d = l.length; f < d; ++f)
      l[f] > u && (u = l[f], c = f);
    ++o[c], l[c] = 0, ++s;
  }
  return ue(o, function(h) {
    return h / n;
  });
}
function ere(e, t) {
  var r = Math.max(bi(e), bi(t)), n = e + t;
  return r > g9 ? n : tr(n, r);
}
var iw = 9007199254740991;
function nC(e) {
  var t = Math.PI * 2;
  return (e % t + t) % t;
}
function Ic(e) {
  return e > -qE && e < qE;
}
var tre = /^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;
function In(e) {
  if (e instanceof Date)
    return e;
  if (ge(e)) {
    var t = tre.exec(e);
    if (!t)
      return /* @__PURE__ */ new Date(NaN);
    if (t[8]) {
      var r = +t[4] || 0;
      return t[8].toUpperCase() !== "Z" && (r -= +t[8].slice(0, 3)), new Date(Date.UTC(+t[1], +(t[2] || 1) - 1, +t[3] || 1, r, +(t[5] || 0), +t[6] || 0, t[7] ? +t[7].substring(0, 3) : 0));
    } else
      return new Date(+t[1], +(t[2] || 1) - 1, +t[3] || 1, +t[4] || 0, +(t[5] || 0), +t[6] || 0, t[7] ? +t[7].substring(0, 3) : 0);
  } else if (e == null)
    return /* @__PURE__ */ new Date(NaN);
  return new Date(Math.round(e));
}
function y9(e) {
  return Math.pow(10, Qh(e));
}
function Qh(e) {
  if (e === 0)
    return 0;
  var t = Math.floor(Math.log(e) / Math.LN10);
  return e / Math.pow(10, t) >= 10 && t++, t;
}
function iC(e, t) {
  var r = Qh(e), n = Math.pow(10, r), i = e / n, a;
  return t ? i < 1.5 ? a = 1 : i < 2.5 ? a = 2 : i < 4 ? a = 3 : i < 7 ? a = 5 : a = 10 : i < 1 ? a = 1 : i < 2 ? a = 2 : i < 3 ? a = 3 : i < 5 ? a = 5 : a = 10, e = a * n, r >= -20 ? +e.toFixed(r < 0 ? -r : 0) : e;
}
function dg(e, t) {
  var r = (e.length - 1) * t + 1, n = Math.floor(r), i = +e[n - 1], a = r - n;
  return a ? i + a * (e[n] - i) : i;
}
function aw(e) {
  e.sort(function(l, u) {
    return s(l, u, 0) ? -1 : 1;
  });
  for (var t = -1 / 0, r = 1, n = 0; n < e.length; ) {
    for (var i = e[n].interval, a = e[n].close, o = 0; o < 2; o++)
      i[o] <= t && (i[o] = t, a[o] = o ? 1 : 1 - r), t = i[o], r = a[o];
    i[0] === i[1] && a[0] * a[1] !== 1 ? e.splice(n, 1) : n++;
  }
  return e;
  function s(l, u, c) {
    return l.interval[c] < u.interval[c] || l.interval[c] === u.interval[c] && (l.close[c] - u.close[c] === (c ? -1 : 1) || !c && s(l, u, 1));
  }
}
function ua(e) {
  var t = parseFloat(e);
  return t == e && (t !== 0 || !ge(e) || e.indexOf("x") <= 0) ? t : NaN;
}
function Py(e) {
  return !isNaN(ua(e));
}
function x9() {
  return Math.round(Math.random() * 9);
}
function b9(e, t) {
  return t === 0 ? e : b9(t, e % t);
}
function JE(e, t) {
  return e == null ? t : t == null ? e : e * t / b9(e, t);
}
var rre = "[ECharts] ", QE = {}, nre = typeof console < "u" && console.warn && console.log;
function ky(e, t, r) {
  if (nre) {
    if (r) {
      if (QE[t])
        return;
      QE[t] = !0;
    }
    console[e](rre + t);
  }
}
function ire(e, t) {
  ky("log", e, t);
}
function qt(e, t) {
  ky("warn", e, t);
}
function jr(e, t) {
  ky("error", e, t);
}
function ti(e) {
  process.env.NODE_ENV !== "production" && ky("warn", "DEPRECATED: " + e, !0);
}
function sr(e, t, r) {
  process.env.NODE_ENV !== "production" && ti((r ? "[" + r + "]" : "") + (e + " is deprecated, use " + t + " instead."));
}
function ln() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  var r = "";
  if (process.env.NODE_ENV !== "production") {
    var n = function(i) {
      return i === void 0 ? "undefined" : i === 1 / 0 ? "Infinity" : i === -1 / 0 ? "-Infinity" : as(i) ? "NaN" : i instanceof Date ? "Date(" + i.toISOString() + ")" : Ee(i) ? "function () { ... }" : ZS(i) ? i + "" : null;
    };
    r = ue(e, function(i) {
      if (ge(i))
        return i;
      var a = n(i);
      if (a != null)
        return a;
      if (typeof JSON < "u" && JSON.stringify)
        try {
          return JSON.stringify(i, function(o, s) {
            var l = n(s);
            return l ?? s;
          });
        } catch {
          return "?";
        }
      else
        return "?";
    }).join(" ");
  }
  return r;
}
function Et(e) {
  throw new Error(e);
}
function eD(e, t, r) {
  return (t - e) * r + e;
}
var w9 = "series\0", _9 = "\0_ec_\0";
function Ot(e) {
  return e instanceof Array ? e : e == null ? [] : [e];
}
function kl(e, t, r) {
  if (e) {
    e[t] = e[t] || {}, e.emphasis = e.emphasis || {}, e.emphasis[t] = e.emphasis[t] || {};
    for (var n = 0, i = r.length; n < i; n++) {
      var a = r[n];
      !e.emphasis[t].hasOwnProperty(a) && e[t].hasOwnProperty(a) && (e.emphasis[t][a] = e[t][a]);
    }
  }
}
var tD = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "rich", "tag", "color", "textBorderColor", "textBorderWidth", "width", "height", "lineHeight", "align", "verticalAlign", "baseline", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "textShadowColor", "textShadowBlur", "textShadowOffsetX", "textShadowOffsetY", "backgroundColor", "borderColor", "borderWidth", "borderRadius", "padding"];
function nf(e) {
  return Ne(e) && !le(e) && !(e instanceof Date) ? e.value : e;
}
function are(e) {
  return Ne(e) && !(e instanceof Array);
}
function S9(e, t, r) {
  var n = r === "normalMerge", i = r === "replaceMerge", a = r === "replaceAll";
  e = e || [], t = (t || []).slice();
  var o = Ce();
  j(t, function(l, u) {
    if (!Ne(l)) {
      t[u] = null;
      return;
    }
    process.env.NODE_ENV !== "production" && (l.id != null && !nD(l.id) && rD(l.id), l.name != null && !nD(l.name) && rD(l.name));
  });
  var s = ore(e, o, r);
  return (n || i) && sre(s, e, o, t), n && lre(s, t), n || i ? ure(s, t, i) : a && cre(s, t), fre(s), s;
}
function ore(e, t, r) {
  var n = [];
  if (r === "replaceAll")
    return n;
  for (var i = 0; i < e.length; i++) {
    var a = e[i];
    a && a.id != null && t.set(a.id, i), n.push({
      existing: r === "replaceMerge" || Lc(a) ? null : a,
      newOption: null,
      keyInfo: null,
      brandNew: null
    });
  }
  return n;
}
function sre(e, t, r, n) {
  j(n, function(i, a) {
    if (!(!i || i.id == null)) {
      var o = zd(i.id), s = r.get(o);
      if (s != null) {
        var l = e[s];
        Le(!l.newOption, 'Duplicated option on id "' + o + '".'), l.newOption = i, l.existing = t[s], n[a] = null;
      }
    }
  });
}
function lre(e, t) {
  j(t, function(r, n) {
    if (!(!r || r.name == null))
      for (var i = 0; i < e.length; i++) {
        var a = e[i].existing;
        if (!e[i].newOption && a && (a.id == null || r.id == null) && !Lc(r) && !Lc(a) && C9("name", a, r)) {
          e[i].newOption = r, t[n] = null;
          return;
        }
      }
  });
}
function ure(e, t, r) {
  j(t, function(n) {
    if (n) {
      for (
        var i, a = 0;
        // Be `!resultItem` only when `nextIdx >= result.length`.
        (i = e[a]) && (i.newOption || Lc(i.existing) || // In mode "replaceMerge", here no not-mapped-non-internal-existing.
        i.existing && n.id != null && !C9("id", n, i.existing));
      )
        a++;
      i ? (i.newOption = n, i.brandNew = r) : e.push({
        newOption: n,
        brandNew: r,
        existing: null,
        keyInfo: null
      }), a++;
    }
  });
}
function cre(e, t) {
  j(t, function(r) {
    e.push({
      newOption: r,
      brandNew: !0,
      existing: null,
      keyInfo: null
    });
  });
}
function fre(e) {
  var t = Ce();
  j(e, function(r) {
    var n = r.existing;
    n && t.set(n.id, r);
  }), j(e, function(r) {
    var n = r.newOption;
    Le(!n || n.id == null || !t.get(n.id) || t.get(n.id) === r, "id duplicates: " + (n && n.id)), n && n.id != null && t.set(n.id, r), !r.keyInfo && (r.keyInfo = {});
  }), j(e, function(r, n) {
    var i = r.existing, a = r.newOption, o = r.keyInfo;
    if (Ne(a)) {
      if (o.name = a.name != null ? zd(a.name) : i ? i.name : w9 + n, i)
        o.id = zd(i.id);
      else if (a.id != null)
        o.id = zd(a.id);
      else {
        var s = 0;
        do
          o.id = "\0" + o.name + "\0" + s++;
        while (t.get(o.id));
      }
      t.set(o.id, r);
    }
  });
}
function C9(e, t, r) {
  var n = yr(t[e], null), i = yr(r[e], null);
  return n != null && i != null && n === i;
}
function zd(e) {
  if (process.env.NODE_ENV !== "production" && e == null)
    throw new Error();
  return yr(e, "");
}
function yr(e, t) {
  return e == null ? t : ge(e) ? e : bt(e) || sh(e) ? e + "" : t;
}
function rD(e) {
  process.env.NODE_ENV !== "production" && qt("`" + e + "` is invalid id or name. Must be a string or number.");
}
function nD(e) {
  return sh(e) || Py(e);
}
function aC(e) {
  var t = e.name;
  return !!(t && t.indexOf(w9));
}
function Lc(e) {
  return e && e.id != null && zd(e.id).indexOf(_9) === 0;
}
function dre(e) {
  return _9 + e;
}
function hre(e, t, r) {
  j(e, function(n) {
    var i = n.newOption;
    Ne(i) && (n.keyInfo.mainType = t, n.keyInfo.subType = pre(t, i, n.existing, r));
  });
}
function pre(e, t, r, n) {
  var i = t.type ? t.type : r ? r.subType : n.determineSubType(e, t);
  return i;
}
function vre(e, t) {
  var r = {}, n = {};
  return i(e || [], r), i(t || [], n, r), [a(r), a(n)];
  function i(o, s, l) {
    for (var u = 0, c = o.length; u < c; u++) {
      var f = yr(o[u].seriesId, null);
      if (f == null)
        return;
      for (var d = Ot(o[u].dataIndex), h = l && l[f], p = 0, v = d.length; p < v; p++) {
        var g = d[p];
        h && h[g] ? h[g] = null : (s[f] || (s[f] = {}))[g] = 1;
      }
    }
  }
  function a(o, s) {
    var l = [];
    for (var u in o)
      if (o.hasOwnProperty(u) && o[u] != null)
        if (s)
          l.push(+u);
        else {
          var c = a(o[u], !0);
          c.length && l.push({
            seriesId: u,
            dataIndex: c
          });
        }
    return l;
  }
}
function Ol(e, t) {
  if (t.dataIndexInside != null)
    return t.dataIndexInside;
  if (t.dataIndex != null)
    return le(t.dataIndex) ? ue(t.dataIndex, function(r) {
      return e.indexOfRawIndex(r);
    }) : e.indexOfRawIndex(t.dataIndex);
  if (t.name != null)
    return le(t.name) ? ue(t.name, function(r) {
      return e.indexOfName(r);
    }) : e.indexOfName(t.name);
}
function yt() {
  var e = "__ec_inner_" + gre++;
  return function(t) {
    return t[e] || (t[e] = {});
  };
}
var gre = x9();
function jd(e, t, r) {
  var n = oC(t, r), i = n.mainTypeSpecified, a = n.queryOptionMap, o = n.others, s = o, l = r ? r.defaultMainType : null;
  return !i && l && a.set(l, {}), a.each(function(u, c) {
    var f = ep(e, c, u, {
      useDefault: l === c,
      enableAll: r && r.enableAll != null ? r.enableAll : !0,
      enableNone: r && r.enableNone != null ? r.enableNone : !0
    });
    s[c + "Models"] = f.models, s[c + "Model"] = f.models[0];
  }), s;
}
function oC(e, t) {
  var r;
  if (ge(e)) {
    var n = {};
    n[e + "Index"] = 0, r = n;
  } else
    r = e;
  var i = Ce(), a = {}, o = !1;
  return j(r, function(s, l) {
    if (l === "dataIndex" || l === "dataIndexInside") {
      a[l] = s;
      return;
    }
    var u = l.match(/^(\w+)(Index|Id|Name)$/) || [], c = u[1], f = (u[2] || "").toLowerCase();
    if (!(!c || !f || t && t.includeMainTypes && rt(t.includeMainTypes, c) < 0)) {
      o = o || !!c;
      var d = i.get(c) || i.set(c, {});
      d[f] = s;
    }
  }), {
    mainTypeSpecified: o,
    queryOptionMap: i,
    others: a
  };
}
var pr = {
  useDefault: !0,
  enableAll: !1,
  enableNone: !1
}, mre = {
  useDefault: !1,
  enableAll: !0,
  enableNone: !0
};
function ep(e, t, r, n) {
  n = n || pr;
  var i = r.index, a = r.id, o = r.name, s = {
    models: null,
    specified: i != null || a != null || o != null
  };
  if (!s.specified) {
    var l = void 0;
    return s.models = n.useDefault && (l = e.getComponent(t)) ? [l] : [], s;
  }
  return i === "none" || i === !1 ? (Le(n.enableNone, '`"none"` or `false` is not a valid value on index option.'), s.models = [], s) : (i === "all" && (Le(n.enableAll, '`"all"` is not a valid value on index option.'), i = a = o = null), s.models = e.queryComponents({
    mainType: t,
    index: i,
    id: a,
    name: o
  }), s);
}
function T9(e, t, r) {
  e.setAttribute ? e.setAttribute(t, r) : e[t] = r;
}
function yre(e, t) {
  return e.getAttribute ? e.getAttribute(t) : e[t];
}
function xre(e) {
  return e === "auto" ? st.domSupported ? "html" : "richText" : e || "html";
}
function ow(e, t) {
  var r = Ce(), n = [];
  return j(e, function(i) {
    var a = t(i);
    (r.get(a) || (n.push(a), r.set(a, []))).push(i);
  }), {
    keys: n,
    buckets: r
  };
}
function A9(e, t, r, n, i) {
  var a = t == null || t === "auto";
  if (n == null)
    return n;
  if (bt(n)) {
    var o = eD(r || 0, n, i);
    return tr(o, a ? Math.max(bi(r || 0), bi(n)) : t);
  } else {
    if (ge(n))
      return i < 1 ? r : n;
    for (var s = [], l = r, u = n, c = Math.max(l ? l.length : 0, u.length), f = 0; f < c; ++f) {
      var d = e.getDimensionInfo(f);
      if (d && d.type === "ordinal")
        s[f] = (i < 1 && l ? l : u)[f];
      else {
        var h = l && l[f] ? l[f] : 0, p = u[f], o = eD(h, p, i);
        s[f] = tr(o, a ? Math.max(bi(h), bi(p)) : t);
      }
    }
    return s;
  }
}
var bre = ".", Es = "___EC__COMPONENT__CONTAINER___", M9 = "___EC__EXTENDED_CLASS___";
function Ki(e) {
  var t = {
    main: "",
    sub: ""
  };
  if (e) {
    var r = e.split(bre);
    t.main = r[0] || "", t.sub = r[1] || "";
  }
  return t;
}
function wre(e) {
  Le(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e), 'componentType "' + e + '" illegal');
}
function _re(e) {
  return !!(e && e[M9]);
}
function sC(e, t) {
  e.$constructor = e, e.extend = function(r) {
    process.env.NODE_ENV !== "production" && j(t, function(a) {
      r[a] || console.warn("Method `" + a + "` should be implemented" + (r.type ? " in " + r.type : "") + ".");
    });
    var n = this, i;
    return Sre(n) ? i = /** @class */
    function(a) {
      ee(o, a);
      function o() {
        return a.apply(this, arguments) || this;
      }
      return o;
    }(n) : (i = function() {
      (r.$constructor || n).apply(this, arguments);
    }, YS(i, this)), ae(i.prototype, r), i[M9] = !0, i.extend = this.extend, i.superCall = Are, i.superApply = Mre, i.superClass = n, i;
  };
}
function Sre(e) {
  return Ee(e) && /^class\s/.test(Function.prototype.toString.call(e));
}
function E9(e, t) {
  e.extend = t.extend;
}
var Cre = Math.round(Math.random() * 10);
function Tre(e) {
  var t = ["__\0is_clz", Cre++].join("_");
  e.prototype[t] = !0, process.env.NODE_ENV !== "production" && Le(!e.isInstance, 'The method "is" can not be defined.'), e.isInstance = function(r) {
    return !!(r && r[t]);
  };
}
function Are(e, t) {
  for (var r = [], n = 2; n < arguments.length; n++)
    r[n - 2] = arguments[n];
  return this.superClass.prototype[t].apply(e, r);
}
function Mre(e, t, r) {
  return this.superClass.prototype[t].apply(e, r);
}
function Oy(e) {
  var t = {};
  e.registerClass = function(n) {
    var i = n.type || n.prototype.type;
    if (i) {
      wre(i), n.prototype.type = i;
      var a = Ki(i);
      if (!a.sub)
        process.env.NODE_ENV !== "production" && t[a.main] && console.warn(a.main + " exists."), t[a.main] = n;
      else if (a.sub !== Es) {
        var o = r(a);
        o[a.sub] = n;
      }
    }
    return n;
  }, e.getClass = function(n, i, a) {
    var o = t[n];
    if (o && o[Es] && (o = i ? o[i] : null), a && !o)
      throw new Error(i ? "Component " + n + "." + (i || "") + " is used but not imported." : n + ".type should be specified.");
    return o;
  }, e.getClassesByMainType = function(n) {
    var i = Ki(n), a = [], o = t[i.main];
    return o && o[Es] ? j(o, function(s, l) {
      l !== Es && a.push(s);
    }) : a.push(o), a;
  }, e.hasClass = function(n) {
    var i = Ki(n);
    return !!t[i.main];
  }, e.getAllClassMainTypes = function() {
    var n = [];
    return j(t, function(i, a) {
      n.push(a);
    }), n;
  }, e.hasSubTypes = function(n) {
    var i = Ki(n), a = t[i.main];
    return a && a[Es];
  };
  function r(n) {
    var i = t[n.main];
    return (!i || !i[Es]) && (i = t[n.main] = {}, i[Es] = !0), i;
  }
}
function zl(e, t) {
  for (var r = 0; r < e.length; r++)
    e[r][1] || (e[r][1] = e[r][0]);
  return t = t || !1, function(n, i, a) {
    for (var o = {}, s = 0; s < e.length; s++) {
      var l = e[s][1];
      if (!(i && rt(i, l) >= 0 || a && rt(a, l) < 0)) {
        var u = n.getShallow(l, t);
        u != null && (o[e[s][0]] = u);
      }
    }
    return o;
  };
}
var Ere = [
  ["fill", "color"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["opacity"],
  ["shadowColor"]
  // Option decal is in `DecalObject` but style.decal is in `PatternObject`.
  // So do not transfer decal directly.
], Dre = zl(Ere), Nre = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getAreaStyle = function(t, r) {
      return Dre(this, t, r);
    }, e;
  }()
), sw = new qh(50);
function Ire(e) {
  if (typeof e == "string") {
    var t = sw.get(e);
    return t && t.image;
  } else
    return e;
}
function lC(e, t, r, n, i) {
  if (e)
    if (typeof e == "string") {
      if (t && t.__zrImageSrc === e || !r)
        return t;
      var a = sw.get(e), o = { hostEl: r, cb: n, cbPayload: i };
      return a ? (t = a.image, !zy(t) && a.pending.push(o)) : (t = Di.loadImage(e, iD, iD), t.__zrImageSrc = e, sw.put(e, t.__cachedImgObj = {
        image: t,
        pending: [o]
      })), t;
    } else
      return e;
  else return t;
}
function iD() {
  var e = this.__cachedImgObj;
  this.onload = this.onerror = this.__cachedImgObj = null;
  for (var t = 0; t < e.pending.length; t++) {
    var r = e.pending[t], n = r.cb;
    n && n(this, r.cbPayload), r.hostEl.dirty();
  }
  e.pending.length = 0;
}
function zy(e) {
  return e && e.width && e.height;
}
var N1 = /\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;
function Lre(e, t, r, n, i) {
  var a = {};
  return D9(a, e, t, r, n, i), a.text;
}
function D9(e, t, r, n, i, a) {
  if (!r) {
    e.text = "", e.isTruncated = !1;
    return;
  }
  var o = (t + "").split(`
`);
  a = N9(r, n, i, a);
  for (var s = !1, l = {}, u = 0, c = o.length; u < c; u++)
    I9(l, o[u], a), o[u] = l.textLine, s = s || l.isTruncated;
  e.text = o.join(`
`), e.isTruncated = s;
}
function N9(e, t, r, n) {
  n = n || {};
  var i = ae({}, n);
  i.font = t, r = Ge(r, "..."), i.maxIterations = Ge(n.maxIterations, 2);
  var a = i.minChar = Ge(n.minChar, 0);
  i.cnCharWidth = Dn("国", t);
  var o = i.ascCharWidth = Dn("a", t);
  i.placeholder = Ge(n.placeholder, "");
  for (var s = e = Math.max(0, e - 1), l = 0; l < a && s >= o; l++)
    s -= o;
  var u = Dn(r, t);
  return u > s && (r = "", u = 0), s = e - u, i.ellipsis = r, i.ellipsisWidth = u, i.contentWidth = s, i.containerWidth = e, i;
}
function I9(e, t, r) {
  var n = r.containerWidth, i = r.font, a = r.contentWidth;
  if (!n) {
    e.textLine = "", e.isTruncated = !1;
    return;
  }
  var o = Dn(t, i);
  if (o <= n) {
    e.textLine = t, e.isTruncated = !1;
    return;
  }
  for (var s = 0; ; s++) {
    if (o <= a || s >= r.maxIterations) {
      t += r.ellipsis;
      break;
    }
    var l = s === 0 ? Rre(t, a, r.ascCharWidth, r.cnCharWidth) : o > 0 ? Math.floor(t.length * a / o) : 0;
    t = t.substr(0, l), o = Dn(t, i);
  }
  t === "" && (t = r.placeholder), e.textLine = t, e.isTruncated = !0;
}
function Rre(e, t, r, n) {
  for (var i = 0, a = 0, o = e.length; a < o && i < t; a++) {
    var s = e.charCodeAt(a);
    i += 0 <= s && s <= 127 ? r : n;
  }
  return a;
}
function Pre(e, t) {
  e != null && (e += "");
  var r = t.overflow, n = t.padding, i = t.font, a = r === "truncate", o = Ly(i), s = Ge(t.lineHeight, o), l = !!t.backgroundColor, u = t.lineOverflow === "truncate", c = !1, f = t.width, d;
  f != null && (r === "break" || r === "breakAll") ? d = e ? L9(e, t.font, f, r === "breakAll", 0).lines : [] : d = e ? e.split(`
`) : [];
  var h = d.length * s, p = Ge(t.height, h);
  if (h > p && u) {
    var v = Math.floor(p / s);
    c = c || d.length > v, d = d.slice(0, v);
  }
  if (e && a && f != null)
    for (var g = N9(f, i, t.ellipsis, {
      minChar: t.truncateMinChar,
      placeholder: t.placeholder
    }), m = {}, y = 0; y < d.length; y++)
      I9(m, d[y], g), d[y] = m.textLine, c = c || m.isTruncated;
  for (var b = p, w = 0, y = 0; y < d.length; y++)
    w = Math.max(Dn(d[y], i), w);
  f == null && (f = w);
  var _ = w;
  return n && (b += n[0] + n[2], _ += n[1] + n[3], f += n[1] + n[3]), l && (_ = f), {
    lines: d,
    height: p,
    outerWidth: _,
    outerHeight: b,
    lineHeight: s,
    calculatedLineHeight: o,
    contentWidth: w,
    contentHeight: h,
    width: f,
    isTruncated: c
  };
}
var kre = /* @__PURE__ */ function() {
  function e() {
  }
  return e;
}(), aD = /* @__PURE__ */ function() {
  function e(t) {
    this.tokens = [], t && (this.tokens = t);
  }
  return e;
}(), Ore = /* @__PURE__ */ function() {
  function e() {
    this.width = 0, this.height = 0, this.contentWidth = 0, this.contentHeight = 0, this.outerWidth = 0, this.outerHeight = 0, this.lines = [], this.isTruncated = !1;
  }
  return e;
}();
function zre(e, t) {
  var r = new Ore();
  if (e != null && (e += ""), !e)
    return r;
  for (var n = t.width, i = t.height, a = t.overflow, o = (a === "break" || a === "breakAll") && n != null ? { width: n, accumWidth: 0, breakAll: a === "breakAll" } : null, s = N1.lastIndex = 0, l; (l = N1.exec(e)) != null; ) {
    var u = l.index;
    u > s && I1(r, e.substring(s, u), t, o), I1(r, l[2], t, o, l[1]), s = N1.lastIndex;
  }
  s < e.length && I1(r, e.substring(s, e.length), t, o);
  var c = [], f = 0, d = 0, h = t.padding, p = a === "truncate", v = t.lineOverflow === "truncate", g = {};
  function m(V, B, F) {
    V.width = B, V.lineHeight = F, f += F, d = Math.max(d, B);
  }
  e: for (var y = 0; y < r.lines.length; y++) {
    for (var b = r.lines[y], w = 0, _ = 0, S = 0; S < b.tokens.length; S++) {
      var C = b.tokens[S], A = C.styleName && t.rich[C.styleName] || {}, M = C.textPadding = A.padding, D = M ? M[1] + M[3] : 0, N = C.font = A.font || t.font;
      C.contentHeight = Ly(N);
      var R = Ge(A.height, C.contentHeight);
      if (C.innerHeight = R, M && (R += M[0] + M[2]), C.height = R, C.lineHeight = En(A.lineHeight, t.lineHeight, R), C.align = A && A.align || t.align, C.verticalAlign = A && A.verticalAlign || "middle", v && i != null && f + C.lineHeight > i) {
        var O = r.lines.length;
        S > 0 ? (b.tokens = b.tokens.slice(0, S), m(b, _, w), r.lines = r.lines.slice(0, y + 1)) : r.lines = r.lines.slice(0, y), r.isTruncated = r.isTruncated || r.lines.length < O;
        break e;
      }
      var E = A.width, L = E == null || E === "auto";
      if (typeof E == "string" && E.charAt(E.length - 1) === "%")
        C.percentWidth = E, c.push(C), C.contentWidth = Dn(C.text, N);
      else {
        if (L) {
          var I = A.backgroundColor, P = I && I.image;
          P && (P = Ire(P), zy(P) && (C.width = Math.max(C.width, P.width * R / P.height)));
        }
        var k = p && n != null ? n - _ : null;
        k != null && k < C.width ? !L || k < D ? (C.text = "", C.width = C.contentWidth = 0) : (D9(g, C.text, k - D, N, t.ellipsis, { minChar: t.truncateMinChar }), C.text = g.text, r.isTruncated = r.isTruncated || g.isTruncated, C.width = C.contentWidth = Dn(C.text, N)) : C.contentWidth = Dn(C.text, N);
      }
      C.width += D, _ += C.width, A && (w = Math.max(w, C.lineHeight));
    }
    m(b, _, w);
  }
  r.outerWidth = r.width = Ge(n, d), r.outerHeight = r.height = Ge(i, f), r.contentHeight = f, r.contentWidth = d, h && (r.outerWidth += h[1] + h[3], r.outerHeight += h[0] + h[2]);
  for (var y = 0; y < c.length; y++) {
    var C = c[y], z = C.percentWidth;
    C.width = parseInt(z, 10) / 100 * r.width;
  }
  return r;
}
function I1(e, t, r, n, i) {
  var a = t === "", o = i && r.rich[i] || {}, s = e.lines, l = o.font || r.font, u = !1, c, f;
  if (n) {
    var d = o.padding, h = d ? d[1] + d[3] : 0;
    if (o.width != null && o.width !== "auto") {
      var p = Ii(o.width, n.width) + h;
      s.length > 0 && p + n.accumWidth > n.width && (c = t.split(`
`), u = !0), n.accumWidth = p;
    } else {
      var v = L9(t, l, n.width, n.breakAll, n.accumWidth);
      n.accumWidth = v.accumWidth + h, f = v.linesWidths, c = v.lines;
    }
  } else
    c = t.split(`
`);
  for (var g = 0; g < c.length; g++) {
    var m = c[g], y = new kre();
    if (y.styleName = i, y.text = m, y.isLineHolder = !m && !a, typeof o.width == "number" ? y.width = o.width : y.width = f ? f[g] : Dn(m, l), !g && !u) {
      var b = (s[s.length - 1] || (s[0] = new aD())).tokens, w = b.length;
      w === 1 && b[0].isLineHolder ? b[0] = y : (m || !w || a) && b.push(y);
    } else
      s.push(new aD([y]));
  }
}
function jre(e) {
  var t = e.charCodeAt(0);
  return t >= 32 && t <= 591 || t >= 880 && t <= 4351 || t >= 4608 && t <= 5119 || t >= 7680 && t <= 8303;
}
var Vre = ei(",&?/;] ".split(""), function(e, t) {
  return e[t] = !0, e;
}, {});
function Bre(e) {
  return jre(e) ? !!Vre[e] : !0;
}
function L9(e, t, r, n, i) {
  for (var a = [], o = [], s = "", l = "", u = 0, c = 0, f = 0; f < e.length; f++) {
    var d = e.charAt(f);
    if (d === `
`) {
      l && (s += l, c += u), a.push(s), o.push(c), s = "", l = "", u = 0, c = 0;
      continue;
    }
    var h = Dn(d, t), p = n ? !1 : !Bre(d);
    if (a.length ? c + h > r : i + c + h > r) {
      c ? (s || l) && (p ? (s || (s = l, l = "", u = 0, c = u), a.push(s), o.push(c - u), l += d, u += h, s = "", c = u) : (l && (s += l, l = "", u = 0), a.push(s), o.push(c), s = d, c = h)) : p ? (a.push(l), o.push(u), l = d, u = h) : (a.push(d), o.push(h));
      continue;
    }
    c += h, p ? (l += d, u += h) : (l && (s += l, l = "", u = 0), s += d);
  }
  return !a.length && !s && (s = e, l = "", u = 0), l && (s += l), s && (a.push(s), o.push(c)), a.length === 1 && (c += i), {
    accumWidth: c,
    lines: a,
    linesWidths: o
  };
}
var lw = "__zr_style_" + Math.round(Math.random() * 10), Cl = {
  shadowBlur: 0,
  shadowOffsetX: 0,
  shadowOffsetY: 0,
  shadowColor: "#000",
  opacity: 1,
  blend: "source-over"
}, jy = {
  style: {
    shadowBlur: !0,
    shadowOffsetX: !0,
    shadowOffsetY: !0,
    shadowColor: !0,
    opacity: !0
  }
};
Cl[lw] = !0;
var oD = ["z", "z2", "invisible"], Fre = ["invisible"], ri = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype._init = function(r) {
    for (var n = ut(r), i = 0; i < n.length; i++) {
      var a = n[i];
      a === "style" ? this.useStyle(r[a]) : e.prototype.attrKV.call(this, a, r[a]);
    }
    this.style || this.useStyle({});
  }, t.prototype.beforeBrush = function() {
  }, t.prototype.afterBrush = function() {
  }, t.prototype.innerBeforeBrush = function() {
  }, t.prototype.innerAfterBrush = function() {
  }, t.prototype.shouldBePainted = function(r, n, i, a) {
    var o = this.transform;
    if (this.ignore || this.invisible || this.style.opacity === 0 || this.culling && $re(this, r, n) || o && !o[0] && !o[3])
      return !1;
    if (i && this.__clipPaths) {
      for (var s = 0; s < this.__clipPaths.length; ++s)
        if (this.__clipPaths[s].isZeroArea())
          return !1;
    }
    if (a && this.parent)
      for (var l = this.parent; l; ) {
        if (l.ignore)
          return !1;
        l = l.parent;
      }
    return !0;
  }, t.prototype.contain = function(r, n) {
    return this.rectContain(r, n);
  }, t.prototype.traverse = function(r, n) {
    r.call(n, this);
  }, t.prototype.rectContain = function(r, n) {
    var i = this.transformCoordToLocal(r, n), a = this.getBoundingRect();
    return a.contain(i[0], i[1]);
  }, t.prototype.getPaintRect = function() {
    var r = this._paintRect;
    if (!this._paintRect || this.__dirty) {
      var n = this.transform, i = this.getBoundingRect(), a = this.style, o = a.shadowBlur || 0, s = a.shadowOffsetX || 0, l = a.shadowOffsetY || 0;
      r = this._paintRect || (this._paintRect = new tt(0, 0, 0, 0)), n ? tt.applyTransform(r, i, n) : r.copy(i), (o || s || l) && (r.width += o * 2 + Math.abs(s), r.height += o * 2 + Math.abs(l), r.x = Math.min(r.x, r.x + s - o), r.y = Math.min(r.y, r.y + l - o));
      var u = this.dirtyRectTolerance;
      r.isZero() || (r.x = Math.floor(r.x - u), r.y = Math.floor(r.y - u), r.width = Math.ceil(r.width + 1 + u * 2), r.height = Math.ceil(r.height + 1 + u * 2));
    }
    return r;
  }, t.prototype.setPrevPaintRect = function(r) {
    r ? (this._prevPaintRect = this._prevPaintRect || new tt(0, 0, 0, 0), this._prevPaintRect.copy(r)) : this._prevPaintRect = null;
  }, t.prototype.getPrevPaintRect = function() {
    return this._prevPaintRect;
  }, t.prototype.animateStyle = function(r) {
    return this.animate("style", r);
  }, t.prototype.updateDuringAnimation = function(r) {
    r === "style" ? this.dirtyStyle() : this.markRedraw();
  }, t.prototype.attrKV = function(r, n) {
    r !== "style" ? e.prototype.attrKV.call(this, r, n) : this.style ? this.setStyle(n) : this.useStyle(n);
  }, t.prototype.setStyle = function(r, n) {
    return typeof r == "string" ? this.style[r] = n : ae(this.style, r), this.dirtyStyle(), this;
  }, t.prototype.dirtyStyle = function(r) {
    r || this.markRedraw(), this.__dirty |= pd, this._rect && (this._rect = null);
  }, t.prototype.dirty = function() {
    this.dirtyStyle();
  }, t.prototype.styleChanged = function() {
    return !!(this.__dirty & pd);
  }, t.prototype.styleUpdated = function() {
    this.__dirty &= ~pd;
  }, t.prototype.createStyle = function(r) {
    return Xh(Cl, r);
  }, t.prototype.useStyle = function(r) {
    r[lw] || (r = this.createStyle(r)), this.__inHover ? this.__hoverStyle = r : this.style = r, this.dirtyStyle();
  }, t.prototype.isStyleObject = function(r) {
    return r[lw];
  }, t.prototype._innerSaveToNormal = function(r) {
    e.prototype._innerSaveToNormal.call(this, r);
    var n = this._normalState;
    r.style && !n.style && (n.style = this._mergeStyle(this.createStyle(), this.style)), this._savePrimaryToNormal(r, n, oD);
  }, t.prototype._applyStateObj = function(r, n, i, a, o, s) {
    e.prototype._applyStateObj.call(this, r, n, i, a, o, s);
    var l = !(n && a), u;
    if (n && n.style ? o ? a ? u = n.style : (u = this._mergeStyle(this.createStyle(), i.style), this._mergeStyle(u, n.style)) : (u = this._mergeStyle(this.createStyle(), a ? this.style : i.style), this._mergeStyle(u, n.style)) : l && (u = i.style), u)
      if (o) {
        var c = this.style;
        if (this.style = this.createStyle(l ? {} : c), l)
          for (var f = ut(c), d = 0; d < f.length; d++) {
            var h = f[d];
            h in u && (u[h] = u[h], this.style[h] = c[h]);
          }
        for (var p = ut(u), d = 0; d < p.length; d++) {
          var h = p[d];
          this.style[h] = this.style[h];
        }
        this._transitionState(r, {
          style: u
        }, s, this.getAnimationStyleProps());
      } else
        this.useStyle(u);
    for (var v = this.__inHover ? Fre : oD, d = 0; d < v.length; d++) {
      var h = v[d];
      n && n[h] != null ? this[h] = n[h] : l && i[h] != null && (this[h] = i[h]);
    }
  }, t.prototype._mergeStates = function(r) {
    for (var n = e.prototype._mergeStates.call(this, r), i, a = 0; a < r.length; a++) {
      var o = r[a];
      o.style && (i = i || {}, this._mergeStyle(i, o.style));
    }
    return i && (n.style = i), n;
  }, t.prototype._mergeStyle = function(r, n) {
    return ae(r, n), r;
  }, t.prototype.getAnimationStyleProps = function() {
    return jy;
  }, t.initDefaultProps = function() {
    var r = t.prototype;
    r.type = "displayable", r.invisible = !1, r.z = 0, r.z2 = 0, r.zlevel = 0, r.culling = !1, r.cursor = "pointer", r.rectHover = !1, r.incremental = !1, r._rect = null, r.dirtyRectTolerance = 0, r.__dirty = Cn | pd;
  }(), t;
}(Ry), L1 = new tt(0, 0, 0, 0), R1 = new tt(0, 0, 0, 0);
function $re(e, t, r) {
  return L1.copy(e.getBoundingRect()), e.transform && L1.applyTransform(e.transform), R1.width = t, R1.height = r, !L1.intersect(R1);
}
var pn = Math.min, vn = Math.max, P1 = Math.sin, k1 = Math.cos, Ds = Math.PI * 2, qp = ps(), Jp = ps(), Qp = ps();
function Vy(e, t, r) {
  if (e.length !== 0) {
    for (var n = e[0], i = n[0], a = n[0], o = n[1], s = n[1], l = 1; l < e.length; l++)
      n = e[l], i = pn(i, n[0]), a = vn(a, n[0]), o = pn(o, n[1]), s = vn(s, n[1]);
    t[0] = i, t[1] = o, r[0] = a, r[1] = s;
  }
}
function sD(e, t, r, n, i, a) {
  i[0] = pn(e, r), i[1] = pn(t, n), a[0] = vn(e, r), a[1] = vn(t, n);
}
var lD = [], uD = [];
function Hre(e, t, r, n, i, a, o, s, l, u) {
  var c = Kk, f = br, d = c(e, r, i, o, lD);
  l[0] = 1 / 0, l[1] = 1 / 0, u[0] = -1 / 0, u[1] = -1 / 0;
  for (var h = 0; h < d; h++) {
    var p = f(e, r, i, o, lD[h]);
    l[0] = pn(p, l[0]), u[0] = vn(p, u[0]);
  }
  d = c(t, n, a, s, uD);
  for (var h = 0; h < d; h++) {
    var v = f(t, n, a, s, uD[h]);
    l[1] = pn(v, l[1]), u[1] = vn(v, u[1]);
  }
  l[0] = pn(e, l[0]), u[0] = vn(e, u[0]), l[0] = pn(o, l[0]), u[0] = vn(o, u[0]), l[1] = pn(t, l[1]), u[1] = vn(t, u[1]), l[1] = pn(s, l[1]), u[1] = vn(s, u[1]);
}
function Gre(e, t, r, n, i, a, o, s) {
  var l = Jk, u = Dr, c = vn(pn(l(e, r, i), 1), 0), f = vn(pn(l(t, n, a), 1), 0), d = u(e, r, i, c), h = u(t, n, a, f);
  o[0] = pn(e, i, d), o[1] = pn(t, a, h), s[0] = vn(e, i, d), s[1] = vn(t, a, h);
}
function Wre(e, t, r, n, i, a, o, s, l) {
  var u = za, c = ja, f = Math.abs(i - a);
  if (f % Ds < 1e-4 && f > 1e-4) {
    s[0] = e - r, s[1] = t - n, l[0] = e + r, l[1] = t + n;
    return;
  }
  if (qp[0] = k1(i) * r + e, qp[1] = P1(i) * n + t, Jp[0] = k1(a) * r + e, Jp[1] = P1(a) * n + t, u(s, qp, Jp), c(l, qp, Jp), i = i % Ds, i < 0 && (i = i + Ds), a = a % Ds, a < 0 && (a = a + Ds), i > a && !o ? a += Ds : i < a && o && (i += Ds), o) {
    var d = a;
    a = i, i = d;
  }
  for (var h = 0; h < a; h += Math.PI / 2)
    h > i && (Qp[0] = k1(h) * r + e, Qp[1] = P1(h) * n + t, u(s, Qp, s), c(l, Qp, l));
}
var jt = {
  M: 1,
  L: 2,
  C: 3,
  Q: 4,
  A: 5,
  Z: 6,
  R: 7
}, Ns = [], Is = [], Oi = [], po = [], zi = [], ji = [], O1 = Math.min, z1 = Math.max, Ls = Math.cos, Rs = Math.sin, wa = Math.abs, uw = Math.PI, _o = uw * 2, j1 = typeof Float32Array < "u", Of = [];
function V1(e) {
  var t = Math.round(e / uw * 1e8) / 1e8;
  return t % 2 * uw;
}
function uC(e, t) {
  var r = V1(e[0]);
  r < 0 && (r += _o);
  var n = r - e[0], i = e[1];
  i += n, !t && i - r >= _o ? i = r + _o : t && r - i >= _o ? i = r - _o : !t && r > i ? i = r + (_o - V1(r - i)) : t && r < i && (i = r - (_o - V1(i - r))), e[0] = r, e[1] = i;
}
var ca = function() {
  function e(t) {
    this.dpr = 1, this._xi = 0, this._yi = 0, this._x0 = 0, this._y0 = 0, this._len = 0, t && (this._saveData = !1), this._saveData && (this.data = []);
  }
  return e.prototype.increaseVersion = function() {
    this._version++;
  }, e.prototype.getVersion = function() {
    return this._version;
  }, e.prototype.setScale = function(t, r, n) {
    n = n || 0, n > 0 && (this._ux = wa(n / em / t) || 0, this._uy = wa(n / em / r) || 0);
  }, e.prototype.setDPR = function(t) {
    this.dpr = t;
  }, e.prototype.setContext = function(t) {
    this._ctx = t;
  }, e.prototype.getContext = function() {
    return this._ctx;
  }, e.prototype.beginPath = function() {
    return this._ctx && this._ctx.beginPath(), this.reset(), this;
  }, e.prototype.reset = function() {
    this._saveData && (this._len = 0), this._pathSegLen && (this._pathSegLen = null, this._pathLen = 0), this._version++;
  }, e.prototype.moveTo = function(t, r) {
    return this._drawPendingPt(), this.addData(jt.M, t, r), this._ctx && this._ctx.moveTo(t, r), this._x0 = t, this._y0 = r, this._xi = t, this._yi = r, this;
  }, e.prototype.lineTo = function(t, r) {
    var n = wa(t - this._xi), i = wa(r - this._yi), a = n > this._ux || i > this._uy;
    if (this.addData(jt.L, t, r), this._ctx && a && this._ctx.lineTo(t, r), a)
      this._xi = t, this._yi = r, this._pendingPtDist = 0;
    else {
      var o = n * n + i * i;
      o > this._pendingPtDist && (this._pendingPtX = t, this._pendingPtY = r, this._pendingPtDist = o);
    }
    return this;
  }, e.prototype.bezierCurveTo = function(t, r, n, i, a, o) {
    return this._drawPendingPt(), this.addData(jt.C, t, r, n, i, a, o), this._ctx && this._ctx.bezierCurveTo(t, r, n, i, a, o), this._xi = a, this._yi = o, this;
  }, e.prototype.quadraticCurveTo = function(t, r, n, i) {
    return this._drawPendingPt(), this.addData(jt.Q, t, r, n, i), this._ctx && this._ctx.quadraticCurveTo(t, r, n, i), this._xi = n, this._yi = i, this;
  }, e.prototype.arc = function(t, r, n, i, a, o) {
    this._drawPendingPt(), Of[0] = i, Of[1] = a, uC(Of, o), i = Of[0], a = Of[1];
    var s = a - i;
    return this.addData(jt.A, t, r, n, n, i, s, 0, o ? 0 : 1), this._ctx && this._ctx.arc(t, r, n, i, a, o), this._xi = Ls(a) * n + t, this._yi = Rs(a) * n + r, this;
  }, e.prototype.arcTo = function(t, r, n, i, a) {
    return this._drawPendingPt(), this._ctx && this._ctx.arcTo(t, r, n, i, a), this;
  }, e.prototype.rect = function(t, r, n, i) {
    return this._drawPendingPt(), this._ctx && this._ctx.rect(t, r, n, i), this.addData(jt.R, t, r, n, i), this;
  }, e.prototype.closePath = function() {
    this._drawPendingPt(), this.addData(jt.Z);
    var t = this._ctx, r = this._x0, n = this._y0;
    return t && t.closePath(), this._xi = r, this._yi = n, this;
  }, e.prototype.fill = function(t) {
    t && t.fill(), this.toStatic();
  }, e.prototype.stroke = function(t) {
    t && t.stroke(), this.toStatic();
  }, e.prototype.len = function() {
    return this._len;
  }, e.prototype.setData = function(t) {
    var r = t.length;
    !(this.data && this.data.length === r) && j1 && (this.data = new Float32Array(r));
    for (var n = 0; n < r; n++)
      this.data[n] = t[n];
    this._len = r;
  }, e.prototype.appendPath = function(t) {
    t instanceof Array || (t = [t]);
    for (var r = t.length, n = 0, i = this._len, a = 0; a < r; a++)
      n += t[a].len();
    j1 && this.data instanceof Float32Array && (this.data = new Float32Array(i + n));
    for (var a = 0; a < r; a++)
      for (var o = t[a].data, s = 0; s < o.length; s++)
        this.data[i++] = o[s];
    this._len = i;
  }, e.prototype.addData = function(t, r, n, i, a, o, s, l, u) {
    if (this._saveData) {
      var c = this.data;
      this._len + arguments.length > c.length && (this._expandData(), c = this.data);
      for (var f = 0; f < arguments.length; f++)
        c[this._len++] = arguments[f];
    }
  }, e.prototype._drawPendingPt = function() {
    this._pendingPtDist > 0 && (this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY), this._pendingPtDist = 0);
  }, e.prototype._expandData = function() {
    if (!(this.data instanceof Array)) {
      for (var t = [], r = 0; r < this._len; r++)
        t[r] = this.data[r];
      this.data = t;
    }
  }, e.prototype.toStatic = function() {
    if (this._saveData) {
      this._drawPendingPt();
      var t = this.data;
      t instanceof Array && (t.length = this._len, j1 && this._len > 11 && (this.data = new Float32Array(t)));
    }
  }, e.prototype.getBoundingRect = function() {
    Oi[0] = Oi[1] = zi[0] = zi[1] = Number.MAX_VALUE, po[0] = po[1] = ji[0] = ji[1] = -Number.MAX_VALUE;
    var t = this.data, r = 0, n = 0, i = 0, a = 0, o;
    for (o = 0; o < this._len; ) {
      var s = t[o++], l = o === 1;
      switch (l && (r = t[o], n = t[o + 1], i = r, a = n), s) {
        case jt.M:
          r = i = t[o++], n = a = t[o++], zi[0] = i, zi[1] = a, ji[0] = i, ji[1] = a;
          break;
        case jt.L:
          sD(r, n, t[o], t[o + 1], zi, ji), r = t[o++], n = t[o++];
          break;
        case jt.C:
          Hre(r, n, t[o++], t[o++], t[o++], t[o++], t[o], t[o + 1], zi, ji), r = t[o++], n = t[o++];
          break;
        case jt.Q:
          Gre(r, n, t[o++], t[o++], t[o], t[o + 1], zi, ji), r = t[o++], n = t[o++];
          break;
        case jt.A:
          var u = t[o++], c = t[o++], f = t[o++], d = t[o++], h = t[o++], p = t[o++] + h;
          o += 1;
          var v = !t[o++];
          l && (i = Ls(h) * f + u, a = Rs(h) * d + c), Wre(u, c, f, d, h, p, v, zi, ji), r = Ls(p) * f + u, n = Rs(p) * d + c;
          break;
        case jt.R:
          i = r = t[o++], a = n = t[o++];
          var g = t[o++], m = t[o++];
          sD(i, a, i + g, a + m, zi, ji);
          break;
        case jt.Z:
          r = i, n = a;
          break;
      }
      za(Oi, Oi, zi), ja(po, po, ji);
    }
    return o === 0 && (Oi[0] = Oi[1] = po[0] = po[1] = 0), new tt(Oi[0], Oi[1], po[0] - Oi[0], po[1] - Oi[1]);
  }, e.prototype._calculateLength = function() {
    var t = this.data, r = this._len, n = this._ux, i = this._uy, a = 0, o = 0, s = 0, l = 0;
    this._pathSegLen || (this._pathSegLen = []);
    for (var u = this._pathSegLen, c = 0, f = 0, d = 0; d < r; ) {
      var h = t[d++], p = d === 1;
      p && (a = t[d], o = t[d + 1], s = a, l = o);
      var v = -1;
      switch (h) {
        case jt.M:
          a = s = t[d++], o = l = t[d++];
          break;
        case jt.L: {
          var g = t[d++], m = t[d++], y = g - a, b = m - o;
          (wa(y) > n || wa(b) > i || d === r - 1) && (v = Math.sqrt(y * y + b * b), a = g, o = m);
          break;
        }
        case jt.C: {
          var w = t[d++], _ = t[d++], g = t[d++], m = t[d++], S = t[d++], C = t[d++];
          v = ite(a, o, w, _, g, m, S, C, 10), a = S, o = C;
          break;
        }
        case jt.Q: {
          var w = t[d++], _ = t[d++], g = t[d++], m = t[d++];
          v = ote(a, o, w, _, g, m, 10), a = g, o = m;
          break;
        }
        case jt.A:
          var A = t[d++], M = t[d++], D = t[d++], N = t[d++], R = t[d++], O = t[d++], E = O + R;
          d += 1, p && (s = Ls(R) * D + A, l = Rs(R) * N + M), v = z1(D, N) * O1(_o, Math.abs(O)), a = Ls(E) * D + A, o = Rs(E) * N + M;
          break;
        case jt.R: {
          s = a = t[d++], l = o = t[d++];
          var L = t[d++], I = t[d++];
          v = L * 2 + I * 2;
          break;
        }
        case jt.Z: {
          var y = s - a, b = l - o;
          v = Math.sqrt(y * y + b * b), a = s, o = l;
          break;
        }
      }
      v >= 0 && (u[f++] = v, c += v);
    }
    return this._pathLen = c, c;
  }, e.prototype.rebuildPath = function(t, r) {
    var n = this.data, i = this._ux, a = this._uy, o = this._len, s, l, u, c, f, d, h = r < 1, p, v, g = 0, m = 0, y, b = 0, w, _;
    if (!(h && (this._pathSegLen || this._calculateLength(), p = this._pathSegLen, v = this._pathLen, y = r * v, !y)))
      e: for (var S = 0; S < o; ) {
        var C = n[S++], A = S === 1;
        switch (A && (u = n[S], c = n[S + 1], s = u, l = c), C !== jt.L && b > 0 && (t.lineTo(w, _), b = 0), C) {
          case jt.M:
            s = u = n[S++], l = c = n[S++], t.moveTo(u, c);
            break;
          case jt.L: {
            f = n[S++], d = n[S++];
            var M = wa(f - u), D = wa(d - c);
            if (M > i || D > a) {
              if (h) {
                var N = p[m++];
                if (g + N > y) {
                  var R = (y - g) / N;
                  t.lineTo(u * (1 - R) + f * R, c * (1 - R) + d * R);
                  break e;
                }
                g += N;
              }
              t.lineTo(f, d), u = f, c = d, b = 0;
            } else {
              var O = M * M + D * D;
              O > b && (w = f, _ = d, b = O);
            }
            break;
          }
          case jt.C: {
            var E = n[S++], L = n[S++], I = n[S++], P = n[S++], k = n[S++], z = n[S++];
            if (h) {
              var N = p[m++];
              if (g + N > y) {
                var R = (y - g) / N;
                os(u, E, I, k, R, Ns), os(c, L, P, z, R, Is), t.bezierCurveTo(Ns[1], Is[1], Ns[2], Is[2], Ns[3], Is[3]);
                break e;
              }
              g += N;
            }
            t.bezierCurveTo(E, L, I, P, k, z), u = k, c = z;
            break;
          }
          case jt.Q: {
            var E = n[S++], L = n[S++], I = n[S++], P = n[S++];
            if (h) {
              var N = p[m++];
              if (g + N > y) {
                var R = (y - g) / N;
                ch(u, E, I, R, Ns), ch(c, L, P, R, Is), t.quadraticCurveTo(Ns[1], Is[1], Ns[2], Is[2]);
                break e;
              }
              g += N;
            }
            t.quadraticCurveTo(E, L, I, P), u = I, c = P;
            break;
          }
          case jt.A:
            var V = n[S++], B = n[S++], F = n[S++], H = n[S++], G = n[S++], W = n[S++], X = n[S++], q = !n[S++], J = F > H ? F : H, U = wa(F - H) > 1e-3, $ = G + W, Y = !1;
            if (h) {
              var N = p[m++];
              g + N > y && ($ = G + W * (y - g) / N, Y = !0), g += N;
            }
            if (U && t.ellipse ? t.ellipse(V, B, F, H, X, G, $, q) : t.arc(V, B, J, G, $, q), Y)
              break e;
            A && (s = Ls(G) * F + V, l = Rs(G) * H + B), u = Ls($) * F + V, c = Rs($) * H + B;
            break;
          case jt.R:
            s = u = n[S], l = c = n[S + 1], f = n[S++], d = n[S++];
            var Z = n[S++], K = n[S++];
            if (h) {
              var N = p[m++];
              if (g + N > y) {
                var ie = y - g;
                t.moveTo(f, d), t.lineTo(f + O1(ie, Z), d), ie -= Z, ie > 0 && t.lineTo(f + Z, d + O1(ie, K)), ie -= K, ie > 0 && t.lineTo(f + z1(Z - ie, 0), d + K), ie -= Z, ie > 0 && t.lineTo(f, d + z1(K - ie, 0));
                break e;
              }
              g += N;
            }
            t.rect(f, d, Z, K);
            break;
          case jt.Z:
            if (h) {
              var N = p[m++];
              if (g + N > y) {
                var R = (y - g) / N;
                t.lineTo(u * (1 - R) + s * R, c * (1 - R) + l * R);
                break e;
              }
              g += N;
            }
            t.closePath(), u = s, c = l;
        }
      }
  }, e.prototype.clone = function() {
    var t = new e(), r = this.data;
    return t.data = r.slice ? r.slice() : Array.prototype.slice.call(r), t._len = this._len, t;
  }, e.CMD = jt, e.initDefaultProps = function() {
    var t = e.prototype;
    t._saveData = !0, t._ux = 0, t._uy = 0, t._pendingPtDist = 0, t._version = 0;
  }(), e;
}();
function Io(e, t, r, n, i, a, o) {
  if (i === 0)
    return !1;
  var s = i, l = 0, u = e;
  if (o > t + s && o > n + s || o < t - s && o < n - s || a > e + s && a > r + s || a < e - s && a < r - s)
    return !1;
  if (e !== r)
    l = (t - n) / (e - r), u = (e * n - r * t) / (e - r);
  else
    return Math.abs(a - e) <= s / 2;
  var c = l * a - o + u, f = c * c / (l * l + 1);
  return f <= s / 2 * s / 2;
}
function Ure(e, t, r, n, i, a, o, s, l, u, c) {
  if (l === 0)
    return !1;
  var f = l;
  if (c > t + f && c > n + f && c > a + f && c > s + f || c < t - f && c < n - f && c < a - f && c < s - f || u > e + f && u > r + f && u > i + f && u > o + f || u < e - f && u < r - f && u < i - f && u < o - f)
    return !1;
  var d = qk(e, t, r, n, i, a, o, s, u, c, null);
  return d <= f / 2;
}
function R9(e, t, r, n, i, a, o, s, l) {
  if (o === 0)
    return !1;
  var u = o;
  if (l > t + u && l > n + u && l > a + u || l < t - u && l < n - u && l < a - u || s > e + u && s > r + u && s > i + u || s < e - u && s < r - u && s < i - u)
    return !1;
  var c = Qk(e, t, r, n, i, a, s, l, null);
  return c <= u / 2;
}
var cD = Math.PI * 2;
function Mn(e) {
  return e %= cD, e < 0 && (e += cD), e;
}
var zf = Math.PI * 2;
function Yre(e, t, r, n, i, a, o, s, l) {
  if (o === 0)
    return !1;
  var u = o;
  s -= e, l -= t;
  var c = Math.sqrt(s * s + l * l);
  if (c - u > r || c + u < r)
    return !1;
  if (Math.abs(n - i) % zf < 1e-4)
    return !0;
  if (a) {
    var f = n;
    n = Mn(i), i = Mn(f);
  } else
    n = Mn(n), i = Mn(i);
  n > i && (i += zf);
  var d = Math.atan2(l, s);
  return d < 0 && (d += zf), d >= n && d <= i || d + zf >= n && d + zf <= i;
}
function Ma(e, t, r, n, i, a) {
  if (a > t && a > n || a < t && a < n || n === t)
    return 0;
  var o = (a - t) / (n - t), s = n < t ? 1 : -1;
  (o === 1 || o === 0) && (s = n < t ? 0.5 : -0.5);
  var l = o * (r - e) + e;
  return l === i ? 1 / 0 : l > i ? s : 0;
}
var vo = ca.CMD, Ps = Math.PI * 2, Zre = 1e-4;
function Xre(e, t) {
  return Math.abs(e - t) < Zre;
}
var rn = [-1, -1, -1], Hn = [-1, -1];
function Kre() {
  var e = Hn[0];
  Hn[0] = Hn[1], Hn[1] = e;
}
function qre(e, t, r, n, i, a, o, s, l, u) {
  if (u > t && u > n && u > a && u > s || u < t && u < n && u < a && u < s)
    return 0;
  var c = Kg(t, n, a, s, u, rn);
  if (c === 0)
    return 0;
  for (var f = 0, d = -1, h = void 0, p = void 0, v = 0; v < c; v++) {
    var g = rn[v], m = g === 0 || g === 1 ? 0.5 : 1, y = br(e, r, i, o, g);
    y < l || (d < 0 && (d = Kk(t, n, a, s, Hn), Hn[1] < Hn[0] && d > 1 && Kre(), h = br(t, n, a, s, Hn[0]), d > 1 && (p = br(t, n, a, s, Hn[1]))), d === 2 ? g < Hn[0] ? f += h < t ? m : -m : g < Hn[1] ? f += p < h ? m : -m : f += s < p ? m : -m : g < Hn[0] ? f += h < t ? m : -m : f += s < h ? m : -m);
  }
  return f;
}
function Jre(e, t, r, n, i, a, o, s) {
  if (s > t && s > n && s > a || s < t && s < n && s < a)
    return 0;
  var l = ate(t, n, a, s, rn);
  if (l === 0)
    return 0;
  var u = Jk(t, n, a);
  if (u >= 0 && u <= 1) {
    for (var c = 0, f = Dr(t, n, a, u), d = 0; d < l; d++) {
      var h = rn[d] === 0 || rn[d] === 1 ? 0.5 : 1, p = Dr(e, r, i, rn[d]);
      p < o || (rn[d] < u ? c += f < t ? h : -h : c += a < f ? h : -h);
    }
    return c;
  } else {
    var h = rn[0] === 0 || rn[0] === 1 ? 0.5 : 1, p = Dr(e, r, i, rn[0]);
    return p < o ? 0 : a < t ? h : -h;
  }
}
function Qre(e, t, r, n, i, a, o, s) {
  if (s -= t, s > r || s < -r)
    return 0;
  var l = Math.sqrt(r * r - s * s);
  rn[0] = -l, rn[1] = l;
  var u = Math.abs(n - i);
  if (u < 1e-4)
    return 0;
  if (u >= Ps - 1e-4) {
    n = 0, i = Ps;
    var c = a ? 1 : -1;
    return o >= rn[0] + e && o <= rn[1] + e ? c : 0;
  }
  if (n > i) {
    var f = n;
    n = i, i = f;
  }
  n < 0 && (n += Ps, i += Ps);
  for (var d = 0, h = 0; h < 2; h++) {
    var p = rn[h];
    if (p + e > o) {
      var v = Math.atan2(s, p), c = a ? 1 : -1;
      v < 0 && (v = Ps + v), (v >= n && v <= i || v + Ps >= n && v + Ps <= i) && (v > Math.PI / 2 && v < Math.PI * 1.5 && (c = -c), d += c);
    }
  }
  return d;
}
function P9(e, t, r, n, i) {
  for (var a = e.data, o = e.len(), s = 0, l = 0, u = 0, c = 0, f = 0, d, h, p = 0; p < o; ) {
    var v = a[p++], g = p === 1;
    switch (v === vo.M && p > 1 && (r || (s += Ma(l, u, c, f, n, i))), g && (l = a[p], u = a[p + 1], c = l, f = u), v) {
      case vo.M:
        c = a[p++], f = a[p++], l = c, u = f;
        break;
      case vo.L:
        if (r) {
          if (Io(l, u, a[p], a[p + 1], t, n, i))
            return !0;
        } else
          s += Ma(l, u, a[p], a[p + 1], n, i) || 0;
        l = a[p++], u = a[p++];
        break;
      case vo.C:
        if (r) {
          if (Ure(l, u, a[p++], a[p++], a[p++], a[p++], a[p], a[p + 1], t, n, i))
            return !0;
        } else
          s += qre(l, u, a[p++], a[p++], a[p++], a[p++], a[p], a[p + 1], n, i) || 0;
        l = a[p++], u = a[p++];
        break;
      case vo.Q:
        if (r) {
          if (R9(l, u, a[p++], a[p++], a[p], a[p + 1], t, n, i))
            return !0;
        } else
          s += Jre(l, u, a[p++], a[p++], a[p], a[p + 1], n, i) || 0;
        l = a[p++], u = a[p++];
        break;
      case vo.A:
        var m = a[p++], y = a[p++], b = a[p++], w = a[p++], _ = a[p++], S = a[p++];
        p += 1;
        var C = !!(1 - a[p++]);
        d = Math.cos(_) * b + m, h = Math.sin(_) * w + y, g ? (c = d, f = h) : s += Ma(l, u, d, h, n, i);
        var A = (n - m) * w / b + m;
        if (r) {
          if (Yre(m, y, w, _, _ + S, C, t, A, i))
            return !0;
        } else
          s += Qre(m, y, w, _, _ + S, C, A, i);
        l = Math.cos(_ + S) * b + m, u = Math.sin(_ + S) * w + y;
        break;
      case vo.R:
        c = l = a[p++], f = u = a[p++];
        var M = a[p++], D = a[p++];
        if (d = c + M, h = f + D, r) {
          if (Io(c, f, d, f, t, n, i) || Io(d, f, d, h, t, n, i) || Io(d, h, c, h, t, n, i) || Io(c, h, c, f, t, n, i))
            return !0;
        } else
          s += Ma(d, f, d, h, n, i), s += Ma(c, h, c, f, n, i);
        break;
      case vo.Z:
        if (r) {
          if (Io(l, u, c, f, t, n, i))
            return !0;
        } else
          s += Ma(l, u, c, f, n, i);
        l = c, u = f;
        break;
    }
  }
  return !r && !Xre(u, f) && (s += Ma(l, u, c, f, n, i) || 0), s !== 0;
}
function ene(e, t, r) {
  return P9(e, 0, !1, t, r);
}
function tne(e, t, r, n) {
  return P9(e, t, !0, r, n);
}
var nm = Ie({
  fill: "#000",
  stroke: null,
  strokePercent: 1,
  fillOpacity: 1,
  strokeOpacity: 1,
  lineDashOffset: 0,
  lineWidth: 1,
  lineCap: "butt",
  miterLimit: 10,
  strokeNoScale: !1,
  strokeFirst: !1
}, Cl), rne = {
  style: Ie({
    fill: !0,
    stroke: !0,
    strokePercent: !0,
    fillOpacity: !0,
    strokeOpacity: !0,
    lineDashOffset: !0,
    lineWidth: !0,
    miterLimit: !0
  }, jy.style)
}, B1 = la.concat([
  "invisible",
  "culling",
  "z",
  "z2",
  "zlevel",
  "parent"
]), lt = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.update = function() {
    var r = this;
    e.prototype.update.call(this);
    var n = this.style;
    if (n.decal) {
      var i = this._decalEl = this._decalEl || new t();
      i.buildPath === t.prototype.buildPath && (i.buildPath = function(l) {
        r.buildPath(l, r.shape);
      }), i.silent = !0;
      var a = i.style;
      for (var o in n)
        a[o] !== n[o] && (a[o] = n[o]);
      a.fill = n.fill ? n.decal : null, a.decal = null, a.shadowColor = null, n.strokeFirst && (a.stroke = null);
      for (var s = 0; s < B1.length; ++s)
        i[B1[s]] = this[B1[s]];
      i.__dirty |= Cn;
    } else this._decalEl && (this._decalEl = null);
  }, t.prototype.getDecalElement = function() {
    return this._decalEl;
  }, t.prototype._init = function(r) {
    var n = ut(r);
    this.shape = this.getDefaultShape();
    var i = this.getDefaultStyle();
    i && this.useStyle(i);
    for (var a = 0; a < n.length; a++) {
      var o = n[a], s = r[o];
      o === "style" ? this.style ? ae(this.style, s) : this.useStyle(s) : o === "shape" ? ae(this.shape, s) : e.prototype.attrKV.call(this, o, s);
    }
    this.style || this.useStyle({});
  }, t.prototype.getDefaultStyle = function() {
    return null;
  }, t.prototype.getDefaultShape = function() {
    return {};
  }, t.prototype.canBeInsideText = function() {
    return this.hasFill();
  }, t.prototype.getInsideTextFill = function() {
    var r = this.style.fill;
    if (r !== "none") {
      if (ge(r)) {
        var n = hh(r, 0);
        return n > 0.5 ? ew : n > 0.2 ? zte : tw;
      } else if (r)
        return tw;
    }
    return ew;
  }, t.prototype.getInsideTextStroke = function(r) {
    var n = this.style.fill;
    if (ge(n)) {
      var i = this.__zr, a = !!(i && i.isDarkMode()), o = hh(r, 0) < Q2;
      if (a === o)
        return n;
    }
  }, t.prototype.buildPath = function(r, n, i) {
  }, t.prototype.pathUpdated = function() {
    this.__dirty &= ~Yu;
  }, t.prototype.getUpdatedPathProxy = function(r) {
    return !this.path && this.createPathProxy(), this.path.beginPath(), this.buildPath(this.path, this.shape, r), this.path;
  }, t.prototype.createPathProxy = function() {
    this.path = new ca(!1);
  }, t.prototype.hasStroke = function() {
    var r = this.style, n = r.stroke;
    return !(n == null || n === "none" || !(r.lineWidth > 0));
  }, t.prototype.hasFill = function() {
    var r = this.style, n = r.fill;
    return n != null && n !== "none";
  }, t.prototype.getBoundingRect = function() {
    var r = this._rect, n = this.style, i = !r;
    if (i) {
      var a = !1;
      this.path || (a = !0, this.createPathProxy());
      var o = this.path;
      (a || this.__dirty & Yu) && (o.beginPath(), this.buildPath(o, this.shape, !1), this.pathUpdated()), r = o.getBoundingRect();
    }
    if (this._rect = r, this.hasStroke() && this.path && this.path.len() > 0) {
      var s = this._rectStroke || (this._rectStroke = r.clone());
      if (this.__dirty || i) {
        s.copy(r);
        var l = n.strokeNoScale ? this.getLineScale() : 1, u = n.lineWidth;
        if (!this.hasFill()) {
          var c = this.strokeContainThreshold;
          u = Math.max(u, c ?? 4);
        }
        l > 1e-10 && (s.width += u / l, s.height += u / l, s.x -= u / l / 2, s.y -= u / l / 2);
      }
      return s;
    }
    return r;
  }, t.prototype.contain = function(r, n) {
    var i = this.transformCoordToLocal(r, n), a = this.getBoundingRect(), o = this.style;
    if (r = i[0], n = i[1], a.contain(r, n)) {
      var s = this.path;
      if (this.hasStroke()) {
        var l = o.lineWidth, u = o.strokeNoScale ? this.getLineScale() : 1;
        if (u > 1e-10 && (this.hasFill() || (l = Math.max(l, this.strokeContainThreshold)), tne(s, l / u, r, n)))
          return !0;
      }
      if (this.hasFill())
        return ene(s, r, n);
    }
    return !1;
  }, t.prototype.dirtyShape = function() {
    this.__dirty |= Yu, this._rect && (this._rect = null), this._decalEl && this._decalEl.dirtyShape(), this.markRedraw();
  }, t.prototype.dirty = function() {
    this.dirtyStyle(), this.dirtyShape();
  }, t.prototype.animateShape = function(r) {
    return this.animate("shape", r);
  }, t.prototype.updateDuringAnimation = function(r) {
    r === "style" ? this.dirtyStyle() : r === "shape" ? this.dirtyShape() : this.markRedraw();
  }, t.prototype.attrKV = function(r, n) {
    r === "shape" ? this.setShape(n) : e.prototype.attrKV.call(this, r, n);
  }, t.prototype.setShape = function(r, n) {
    var i = this.shape;
    return i || (i = this.shape = {}), typeof r == "string" ? i[r] = n : ae(i, r), this.dirtyShape(), this;
  }, t.prototype.shapeChanged = function() {
    return !!(this.__dirty & Yu);
  }, t.prototype.createStyle = function(r) {
    return Xh(nm, r);
  }, t.prototype._innerSaveToNormal = function(r) {
    e.prototype._innerSaveToNormal.call(this, r);
    var n = this._normalState;
    r.shape && !n.shape && (n.shape = ae({}, this.shape));
  }, t.prototype._applyStateObj = function(r, n, i, a, o, s) {
    e.prototype._applyStateObj.call(this, r, n, i, a, o, s);
    var l = !(n && a), u;
    if (n && n.shape ? o ? a ? u = n.shape : (u = ae({}, i.shape), ae(u, n.shape)) : (u = ae({}, a ? this.shape : i.shape), ae(u, n.shape)) : l && (u = i.shape), u)
      if (o) {
        this.shape = ae({}, this.shape);
        for (var c = {}, f = ut(u), d = 0; d < f.length; d++) {
          var h = f[d];
          typeof u[h] == "object" ? this.shape[h] = u[h] : c[h] = u[h];
        }
        this._transitionState(r, {
          shape: c
        }, s);
      } else
        this.shape = u, this.dirtyShape();
  }, t.prototype._mergeStates = function(r) {
    for (var n = e.prototype._mergeStates.call(this, r), i, a = 0; a < r.length; a++) {
      var o = r[a];
      o.shape && (i = i || {}, this._mergeStyle(i, o.shape));
    }
    return i && (n.shape = i), n;
  }, t.prototype.getAnimationStyleProps = function() {
    return rne;
  }, t.prototype.isZeroArea = function() {
    return !1;
  }, t.extend = function(r) {
    var n = function(a) {
      Ut(o, a);
      function o(s) {
        var l = a.call(this, s) || this;
        return r.init && r.init.call(l, s), l;
      }
      return o.prototype.getDefaultStyle = function() {
        return ze(r.style);
      }, o.prototype.getDefaultShape = function() {
        return ze(r.shape);
      }, o;
    }(t);
    for (var i in r)
      typeof r[i] == "function" && (n.prototype[i] = r[i]);
    return n;
  }, t.initDefaultProps = function() {
    var r = t.prototype;
    r.type = "path", r.strokeContainThreshold = 5, r.segmentIgnoreThreshold = 0, r.subPixelOptimize = !1, r.autoBatch = !1, r.__dirty = Cn | pd | Yu;
  }(), t;
}(ri), nne = Ie({
  strokeFirst: !0,
  font: ns,
  x: 0,
  y: 0,
  textAlign: "left",
  textBaseline: "top",
  miterLimit: 2
}, nm), Rc = function(e) {
  Ut(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.hasStroke = function() {
    var r = this.style, n = r.stroke;
    return n != null && n !== "none" && r.lineWidth > 0;
  }, t.prototype.hasFill = function() {
    var r = this.style, n = r.fill;
    return n != null && n !== "none";
  }, t.prototype.createStyle = function(r) {
    return Xh(nne, r);
  }, t.prototype.setBoundingRect = function(r) {
    this._rect = r;
  }, t.prototype.getBoundingRect = function() {
    var r = this.style;
    if (!this._rect) {
      var n = r.text;
      n != null ? n += "" : n = "";
      var i = Jh(n, r.font, r.textAlign, r.textBaseline);
      if (i.x += r.x || 0, i.y += r.y || 0, this.hasStroke()) {
        var a = r.lineWidth;
        i.x -= a / 2, i.y -= a / 2, i.width += a, i.height += a;
      }
      this._rect = i;
    }
    return this._rect;
  }, t.initDefaultProps = function() {
    var r = t.prototype;
    r.dirtyRectTolerance = 10;
  }(), t;
}(ri);
Rc.prototype.type = "tspan";
var ine = Ie({
  x: 0,
  y: 0
}, Cl), ane = {
  style: Ie({
    x: !0,
    y: !0,
    width: !0,
    height: !0,
    sx: !0,
    sy: !0,
    sWidth: !0,
    sHeight: !0
  }, jy.style)
};
function one(e) {
  return !!(e && typeof e != "string" && e.width && e.height);
}
var Ar = function(e) {
  Ut(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.createStyle = function(r) {
    return Xh(ine, r);
  }, t.prototype._getSize = function(r) {
    var n = this.style, i = n[r];
    if (i != null)
      return i;
    var a = one(n.image) ? n.image : this.__image;
    if (!a)
      return 0;
    var o = r === "width" ? "height" : "width", s = n[o];
    return s == null ? a[r] : a[r] / a[o] * s;
  }, t.prototype.getWidth = function() {
    return this._getSize("width");
  }, t.prototype.getHeight = function() {
    return this._getSize("height");
  }, t.prototype.getAnimationStyleProps = function() {
    return ane;
  }, t.prototype.getBoundingRect = function() {
    var r = this.style;
    return this._rect || (this._rect = new tt(r.x || 0, r.y || 0, this.getWidth(), this.getHeight())), this._rect;
  }, t;
}(ri);
Ar.prototype.type = "image";
function sne(e, t) {
  var r = t.x, n = t.y, i = t.width, a = t.height, o = t.r, s, l, u, c;
  i < 0 && (r = r + i, i = -i), a < 0 && (n = n + a, a = -a), typeof o == "number" ? s = l = u = c = o : o instanceof Array ? o.length === 1 ? s = l = u = c = o[0] : o.length === 2 ? (s = u = o[0], l = c = o[1]) : o.length === 3 ? (s = o[0], l = c = o[1], u = o[2]) : (s = o[0], l = o[1], u = o[2], c = o[3]) : s = l = u = c = 0;
  var f;
  s + l > i && (f = s + l, s *= i / f, l *= i / f), u + c > i && (f = u + c, u *= i / f, c *= i / f), l + u > a && (f = l + u, l *= a / f, u *= a / f), s + c > a && (f = s + c, s *= a / f, c *= a / f), e.moveTo(r + s, n), e.lineTo(r + i - l, n), l !== 0 && e.arc(r + i - l, n + l, l, -Math.PI / 2, 0), e.lineTo(r + i, n + a - u), u !== 0 && e.arc(r + i - u, n + a - u, u, 0, Math.PI / 2), e.lineTo(r + c, n + a), c !== 0 && e.arc(r + c, n + a - c, c, Math.PI / 2, Math.PI), e.lineTo(r, n + s), s !== 0 && e.arc(r + s, n + s, s, Math.PI, Math.PI * 1.5);
}
var rc = Math.round;
function k9(e, t, r) {
  if (t) {
    var n = t.x1, i = t.x2, a = t.y1, o = t.y2;
    e.x1 = n, e.x2 = i, e.y1 = a, e.y2 = o;
    var s = r && r.lineWidth;
    return s && (rc(n * 2) === rc(i * 2) && (e.x1 = e.x2 = fl(n, s, !0)), rc(a * 2) === rc(o * 2) && (e.y1 = e.y2 = fl(a, s, !0))), e;
  }
}
function O9(e, t, r) {
  if (t) {
    var n = t.x, i = t.y, a = t.width, o = t.height;
    e.x = n, e.y = i, e.width = a, e.height = o;
    var s = r && r.lineWidth;
    return s && (e.x = fl(n, s, !0), e.y = fl(i, s, !0), e.width = Math.max(fl(n + a, s, !1) - e.x, a === 0 ? 0 : 1), e.height = Math.max(fl(i + o, s, !1) - e.y, o === 0 ? 0 : 1)), e;
  }
}
function fl(e, t, r) {
  if (!t)
    return e;
  var n = rc(e * 2);
  return (n + rc(t)) % 2 === 0 ? n / 2 : (n + (r ? 1 : -1)) / 2;
}
var lne = /* @__PURE__ */ function() {
  function e() {
    this.x = 0, this.y = 0, this.width = 0, this.height = 0;
  }
  return e;
}(), une = {}, vt = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new lne();
  }, t.prototype.buildPath = function(r, n) {
    var i, a, o, s;
    if (this.subPixelOptimize) {
      var l = O9(une, n, this.style);
      i = l.x, a = l.y, o = l.width, s = l.height, l.r = n.r, n = l;
    } else
      i = n.x, a = n.y, o = n.width, s = n.height;
    n.r ? sne(r, n) : r.rect(i, a, o, s);
  }, t.prototype.isZeroArea = function() {
    return !this.shape.width || !this.shape.height;
  }, t;
}(lt);
vt.prototype.type = "rect";
var fD = {
  fill: "#000"
}, dD = 2, cne = {
  style: Ie({
    fill: !0,
    stroke: !0,
    fillOpacity: !0,
    strokeOpacity: !0,
    lineWidth: !0,
    fontSize: !0,
    lineHeight: !0,
    width: !0,
    height: !0,
    textShadowColor: !0,
    textShadowBlur: !0,
    textShadowOffsetX: !0,
    textShadowOffsetY: !0,
    backgroundColor: !0,
    padding: !0,
    borderColor: !0,
    borderWidth: !0,
    borderRadius: !0
  }, jy.style)
}, pt = function(e) {
  Ut(t, e);
  function t(r) {
    var n = e.call(this) || this;
    return n.type = "text", n._children = [], n._defaultStyle = fD, n.attr(r), n;
  }
  return t.prototype.childrenRef = function() {
    return this._children;
  }, t.prototype.update = function() {
    e.prototype.update.call(this), this.styleChanged() && this._updateSubTexts();
    for (var r = 0; r < this._children.length; r++) {
      var n = this._children[r];
      n.zlevel = this.zlevel, n.z = this.z, n.z2 = this.z2, n.culling = this.culling, n.cursor = this.cursor, n.invisible = this.invisible;
    }
  }, t.prototype.updateTransform = function() {
    var r = this.innerTransformable;
    r ? (r.updateTransform(), r.transform && (this.transform = r.transform)) : e.prototype.updateTransform.call(this);
  }, t.prototype.getLocalTransform = function(r) {
    var n = this.innerTransformable;
    return n ? n.getLocalTransform(r) : e.prototype.getLocalTransform.call(this, r);
  }, t.prototype.getComputedTransform = function() {
    return this.__hostTarget && (this.__hostTarget.getComputedTransform(), this.__hostTarget.updateInnerText(!0)), e.prototype.getComputedTransform.call(this);
  }, t.prototype._updateSubTexts = function() {
    this._childCursor = 0, hne(this.style), this.style.rich ? this._updateRichTexts() : this._updatePlainTexts(), this._children.length = this._childCursor, this.styleUpdated();
  }, t.prototype.addSelfToZr = function(r) {
    e.prototype.addSelfToZr.call(this, r);
    for (var n = 0; n < this._children.length; n++)
      this._children[n].__zr = r;
  }, t.prototype.removeSelfFromZr = function(r) {
    e.prototype.removeSelfFromZr.call(this, r);
    for (var n = 0; n < this._children.length; n++)
      this._children[n].__zr = null;
  }, t.prototype.getBoundingRect = function() {
    if (this.styleChanged() && this._updateSubTexts(), !this._rect) {
      for (var r = new tt(0, 0, 0, 0), n = this._children, i = [], a = null, o = 0; o < n.length; o++) {
        var s = n[o], l = s.getBoundingRect(), u = s.getLocalTransform(i);
        u ? (r.copy(l), r.applyTransform(u), a = a || r.clone(), a.union(r)) : (a = a || l.clone(), a.union(l));
      }
      this._rect = a || r;
    }
    return this._rect;
  }, t.prototype.setDefaultTextStyle = function(r) {
    this._defaultStyle = r || fD;
  }, t.prototype.setTextContent = function(r) {
    if (process.env.NODE_ENV !== "production")
      throw new Error("Can't attach text on another text");
  }, t.prototype._mergeStyle = function(r, n) {
    if (!n)
      return r;
    var i = n.rich, a = r.rich || i && {};
    return ae(r, n), i && a ? (this._mergeRich(a, i), r.rich = a) : a && (r.rich = a), r;
  }, t.prototype._mergeRich = function(r, n) {
    for (var i = ut(n), a = 0; a < i.length; a++) {
      var o = i[a];
      r[o] = r[o] || {}, ae(r[o], n[o]);
    }
  }, t.prototype.getAnimationStyleProps = function() {
    return cne;
  }, t.prototype._getOrCreateChild = function(r) {
    var n = this._children[this._childCursor];
    return (!n || !(n instanceof r)) && (n = new r()), this._children[this._childCursor++] = n, n.__zr = this.__zr, n.parent = this, n;
  }, t.prototype._updatePlainTexts = function() {
    var r = this.style, n = r.font || ns, i = r.padding, a = xD(r), o = Pre(a, r), s = F1(r), l = !!r.backgroundColor, u = o.outerHeight, c = o.outerWidth, f = o.contentWidth, d = o.lines, h = o.lineHeight, p = this._defaultStyle;
    this.isTruncated = !!o.isTruncated;
    var v = r.x || 0, g = r.y || 0, m = r.align || p.align || "left", y = r.verticalAlign || p.verticalAlign || "top", b = v, w = Zu(g, o.contentHeight, y);
    if (s || i) {
      var _ = gd(v, c, m), S = Zu(g, u, y);
      s && this._renderBackground(r, r, _, S, c, u);
    }
    w += h / 2, i && (b = yD(v, m, i), y === "top" ? w += i[0] : y === "bottom" && (w -= i[2]));
    for (var C = 0, A = !1, M = mD("fill" in r ? r.fill : (A = !0, p.fill)), D = gD("stroke" in r ? r.stroke : !l && (!p.autoStroke || A) ? (C = dD, p.stroke) : null), N = r.textShadowBlur > 0, R = r.width != null && (r.overflow === "truncate" || r.overflow === "break" || r.overflow === "breakAll"), O = o.calculatedLineHeight, E = 0; E < d.length; E++) {
      var L = this._getOrCreateChild(Rc), I = L.createStyle();
      L.useStyle(I), I.text = d[E], I.x = b, I.y = w, I.textAlign = m, I.textBaseline = "middle", I.opacity = r.opacity, I.strokeFirst = !0, N && (I.shadowBlur = r.textShadowBlur || 0, I.shadowColor = r.textShadowColor || "transparent", I.shadowOffsetX = r.textShadowOffsetX || 0, I.shadowOffsetY = r.textShadowOffsetY || 0), I.stroke = D, I.fill = M, D && (I.lineWidth = r.lineWidth || C, I.lineDash = r.lineDash, I.lineDashOffset = r.lineDashOffset || 0), I.font = n, pD(I, r), w += h, R && L.setBoundingRect(new tt(gd(I.x, f, I.textAlign), Zu(I.y, O, I.textBaseline), f, O));
    }
  }, t.prototype._updateRichTexts = function() {
    var r = this.style, n = xD(r), i = zre(n, r), a = i.width, o = i.outerWidth, s = i.outerHeight, l = r.padding, u = r.x || 0, c = r.y || 0, f = this._defaultStyle, d = r.align || f.align, h = r.verticalAlign || f.verticalAlign;
    this.isTruncated = !!i.isTruncated;
    var p = gd(u, o, d), v = Zu(c, s, h), g = p, m = v;
    l && (g += l[3], m += l[0]);
    var y = g + a;
    F1(r) && this._renderBackground(r, r, p, v, o, s);
    for (var b = !!r.backgroundColor, w = 0; w < i.lines.length; w++) {
      for (var _ = i.lines[w], S = _.tokens, C = S.length, A = _.lineHeight, M = _.width, D = 0, N = g, R = y, O = C - 1, E = void 0; D < C && (E = S[D], !E.align || E.align === "left"); )
        this._placeToken(E, r, A, m, N, "left", b), M -= E.width, N += E.width, D++;
      for (; O >= 0 && (E = S[O], E.align === "right"); )
        this._placeToken(E, r, A, m, R, "right", b), M -= E.width, R -= E.width, O--;
      for (N += (a - (N - g) - (y - R) - M) / 2; D <= O; )
        E = S[D], this._placeToken(E, r, A, m, N + E.width / 2, "center", b), N += E.width, D++;
      m += A;
    }
  }, t.prototype._placeToken = function(r, n, i, a, o, s, l) {
    var u = n.rich[r.styleName] || {};
    u.text = r.text;
    var c = r.verticalAlign, f = a + i / 2;
    c === "top" ? f = a + r.height / 2 : c === "bottom" && (f = a + i - r.height / 2);
    var d = !r.isLineHolder && F1(u);
    d && this._renderBackground(u, n, s === "right" ? o - r.width : s === "center" ? o - r.width / 2 : o, f - r.height / 2, r.width, r.height);
    var h = !!u.backgroundColor, p = r.textPadding;
    p && (o = yD(o, s, p), f -= r.height / 2 - p[0] - r.innerHeight / 2);
    var v = this._getOrCreateChild(Rc), g = v.createStyle();
    v.useStyle(g);
    var m = this._defaultStyle, y = !1, b = 0, w = mD("fill" in u ? u.fill : "fill" in n ? n.fill : (y = !0, m.fill)), _ = gD("stroke" in u ? u.stroke : "stroke" in n ? n.stroke : !h && !l && (!m.autoStroke || y) ? (b = dD, m.stroke) : null), S = u.textShadowBlur > 0 || n.textShadowBlur > 0;
    g.text = r.text, g.x = o, g.y = f, S && (g.shadowBlur = u.textShadowBlur || n.textShadowBlur || 0, g.shadowColor = u.textShadowColor || n.textShadowColor || "transparent", g.shadowOffsetX = u.textShadowOffsetX || n.textShadowOffsetX || 0, g.shadowOffsetY = u.textShadowOffsetY || n.textShadowOffsetY || 0), g.textAlign = s, g.textBaseline = "middle", g.font = r.font || ns, g.opacity = En(u.opacity, n.opacity, 1), pD(g, u), _ && (g.lineWidth = En(u.lineWidth, n.lineWidth, b), g.lineDash = Ge(u.lineDash, n.lineDash), g.lineDashOffset = n.lineDashOffset || 0, g.stroke = _), w && (g.fill = w);
    var C = r.contentWidth, A = r.contentHeight;
    v.setBoundingRect(new tt(gd(g.x, C, g.textAlign), Zu(g.y, A, g.textBaseline), C, A));
  }, t.prototype._renderBackground = function(r, n, i, a, o, s) {
    var l = r.backgroundColor, u = r.borderWidth, c = r.borderColor, f = l && l.image, d = l && !f, h = r.borderRadius, p = this, v, g;
    if (d || r.lineHeight || u && c) {
      v = this._getOrCreateChild(vt), v.useStyle(v.createStyle()), v.style.fill = null;
      var m = v.shape;
      m.x = i, m.y = a, m.width = o, m.height = s, m.r = h, v.dirtyShape();
    }
    if (d) {
      var y = v.style;
      y.fill = l || null, y.fillOpacity = Ge(r.fillOpacity, 1);
    } else if (f) {
      g = this._getOrCreateChild(Ar), g.onload = function() {
        p.dirtyStyle();
      };
      var b = g.style;
      b.image = l.image, b.x = i, b.y = a, b.width = o, b.height = s;
    }
    if (u && c) {
      var y = v.style;
      y.lineWidth = u, y.stroke = c, y.strokeOpacity = Ge(r.strokeOpacity, 1), y.lineDash = r.borderDash, y.lineDashOffset = r.borderDashOffset || 0, v.strokeContainThreshold = 0, v.hasFill() && v.hasStroke() && (y.strokeFirst = !0, y.lineWidth *= 2);
    }
    var w = (v || g).style;
    w.shadowBlur = r.shadowBlur || 0, w.shadowColor = r.shadowColor || "transparent", w.shadowOffsetX = r.shadowOffsetX || 0, w.shadowOffsetY = r.shadowOffsetY || 0, w.opacity = En(r.opacity, n.opacity, 1);
  }, t.makeFont = function(r) {
    var n = "";
    return j9(r) && (n = [
      r.fontStyle,
      r.fontWeight,
      z9(r.fontSize),
      r.fontFamily || "sans-serif"
    ].join(" ")), n && Xn(n) || r.textFont || r.font;
  }, t;
}(ri), fne = { left: !0, right: 1, center: 1 }, dne = { top: 1, bottom: 1, middle: 1 }, hD = ["fontStyle", "fontWeight", "fontSize", "fontFamily"];
function z9(e) {
  return typeof e == "string" && (e.indexOf("px") !== -1 || e.indexOf("rem") !== -1 || e.indexOf("em") !== -1) ? e : isNaN(+e) ? HS + "px" : e + "px";
}
function pD(e, t) {
  for (var r = 0; r < hD.length; r++) {
    var n = hD[r], i = t[n];
    i != null && (e[n] = i);
  }
}
function j9(e) {
  return e.fontSize != null || e.fontFamily || e.fontWeight;
}
function hne(e) {
  return vD(e), j(e.rich, vD), e;
}
function vD(e) {
  if (e) {
    e.font = pt.makeFont(e);
    var t = e.align;
    t === "middle" && (t = "center"), e.align = t == null || fne[t] ? t : "left";
    var r = e.verticalAlign;
    r === "center" && (r = "middle"), e.verticalAlign = r == null || dne[r] ? r : "top";
    var n = e.padding;
    n && (e.padding = Ey(e.padding));
  }
}
function gD(e, t) {
  return e == null || t <= 0 || e === "transparent" || e === "none" ? null : e.image || e.colorStops ? "#000" : e;
}
function mD(e) {
  return e == null || e === "none" ? null : e.image || e.colorStops ? "#000" : e;
}
function yD(e, t, r) {
  return t === "right" ? e - r[1] : t === "center" ? e + r[3] / 2 - r[1] / 2 : e + r[3];
}
function xD(e) {
  var t = e.text;
  return t != null && (t += ""), t;
}
function F1(e) {
  return !!(e.backgroundColor || e.lineHeight || e.borderWidth && e.borderColor);
}
var He = yt(), cw = function(e, t, r, n) {
  if (n) {
    var i = He(n);
    i.dataIndex = r, i.dataType = t, i.seriesIndex = e, i.ssrType = "chart", n.type === "group" && n.traverse(function(a) {
      var o = He(a);
      o.seriesIndex = e, o.dataIndex = r, o.dataType = t, o.ssrType = "chart";
    });
  }
}, bD = 1, wD = {}, V9 = yt(), cC = yt(), fC = 0, tp = 1, By = 2, un = ["emphasis", "blur", "select"], vh = ["normal", "emphasis", "blur", "select"], af = 10, pne = 9, Tl = "highlight", hg = "downplay", Vd = "select", pg = "unselect", Bd = "toggleSelect";
function xu(e) {
  return e != null && e !== "none";
}
function Fy(e, t, r) {
  e.onHoverStateChange && (e.hoverState || 0) !== r && e.onHoverStateChange(t), e.hoverState = r;
}
function B9(e) {
  Fy(e, "emphasis", By);
}
function F9(e) {
  e.hoverState === By && Fy(e, "normal", fC);
}
function dC(e) {
  Fy(e, "blur", tp);
}
function $9(e) {
  e.hoverState === tp && Fy(e, "normal", fC);
}
function vne(e) {
  e.selected = !0;
}
function gne(e) {
  e.selected = !1;
}
function _D(e, t, r) {
  t(e, r);
}
function so(e, t, r) {
  _D(e, t, r), e.isGroup && e.traverse(function(n) {
    _D(n, t, r);
  });
}
function im(e, t) {
  switch (t) {
    case "emphasis":
      e.hoverState = By;
      break;
    case "normal":
      e.hoverState = fC;
      break;
    case "blur":
      e.hoverState = tp;
      break;
    case "select":
      e.selected = !0;
  }
}
function mne(e, t, r, n) {
  for (var i = e.style, a = {}, o = 0; o < t.length; o++) {
    var s = t[o], l = i[s];
    a[s] = l ?? (n && n[s]);
  }
  for (var o = 0; o < e.animators.length; o++) {
    var u = e.animators[o];
    u.__fromStateTransition && u.__fromStateTransition.indexOf(r) < 0 && u.targetName === "style" && u.saveTo(a, t);
  }
  return a;
}
function yne(e, t, r, n) {
  var i = r && rt(r, "select") >= 0, a = !1;
  if (e instanceof lt) {
    var o = V9(e), s = i && o.selectFill || o.normalFill, l = i && o.selectStroke || o.normalStroke;
    if (xu(s) || xu(l)) {
      n = n || {};
      var u = n.style || {};
      u.fill === "inherit" ? (a = !0, n = ae({}, n), u = ae({}, u), u.fill = s) : !xu(u.fill) && xu(s) ? (a = !0, n = ae({}, n), u = ae({}, u), u.fill = Jg(s)) : !xu(u.stroke) && xu(l) && (a || (n = ae({}, n), u = ae({}, u)), u.stroke = Jg(l)), n.style = u;
    }
  }
  if (n && n.z2 == null) {
    a || (n = ae({}, n));
    var c = e.z2EmphasisLift;
    n.z2 = e.z2 + (c ?? af);
  }
  return n;
}
function xne(e, t, r) {
  if (r && r.z2 == null) {
    r = ae({}, r);
    var n = e.z2SelectLift;
    r.z2 = e.z2 + (n ?? pne);
  }
  return r;
}
function bne(e, t, r) {
  var n = rt(e.currentStates, t) >= 0, i = e.style.opacity, a = n ? null : mne(e, ["opacity"], t, {
    opacity: 1
  });
  r = r || {};
  var o = r.style || {};
  return o.opacity == null && (r = ae({}, r), o = ae({
    // Already being applied 'emphasis'. DON'T mul opacity multiple times.
    opacity: n ? i : a.opacity * 0.1
  }, o), r.style = o), r;
}
function $1(e, t) {
  var r = this.states[e];
  if (this.style) {
    if (e === "emphasis")
      return yne(this, e, t, r);
    if (e === "blur")
      return bne(this, e, r);
    if (e === "select")
      return xne(this, e, r);
  }
  return r;
}
function jl(e) {
  e.stateProxy = $1;
  var t = e.getTextContent(), r = e.getTextGuideLine();
  t && (t.stateProxy = $1), r && (r.stateProxy = $1);
}
function SD(e, t) {
  !U9(e, t) && !e.__highByOuter && so(e, B9);
}
function CD(e, t) {
  !U9(e, t) && !e.__highByOuter && so(e, F9);
}
function Ka(e, t) {
  e.__highByOuter |= 1 << (t || 0), so(e, B9);
}
function qa(e, t) {
  !(e.__highByOuter &= ~(1 << (t || 0))) && so(e, F9);
}
function H9(e) {
  so(e, dC);
}
function hC(e) {
  so(e, $9);
}
function G9(e) {
  so(e, vne);
}
function W9(e) {
  so(e, gne);
}
function U9(e, t) {
  return e.__highDownSilentOnTouch && t.zrByTouch;
}
function Y9(e) {
  var t = e.getModel(), r = [], n = [];
  t.eachComponent(function(i, a) {
    var o = cC(a), s = i === "series", l = s ? e.getViewOfSeriesModel(a) : e.getViewOfComponentModel(a);
    !s && n.push(l), o.isBlured && (l.group.traverse(function(u) {
      $9(u);
    }), s && r.push(a)), o.isBlured = !1;
  }), j(n, function(i) {
    i && i.toggleBlurSeries && i.toggleBlurSeries(r, !1, t);
  });
}
function fw(e, t, r, n) {
  var i = n.getModel();
  r = r || "coordinateSystem";
  function a(u, c) {
    for (var f = 0; f < c.length; f++) {
      var d = u.getItemGraphicEl(c[f]);
      d && hC(d);
    }
  }
  if (e != null && !(!t || t === "none")) {
    var o = i.getSeriesByIndex(e), s = o.coordinateSystem;
    s && s.master && (s = s.master);
    var l = [];
    i.eachSeries(function(u) {
      var c = o === u, f = u.coordinateSystem;
      f && f.master && (f = f.master);
      var d = f && s ? f === s : c;
      if (!// Not blur other series if blurScope series
      (r === "series" && !c || r === "coordinateSystem" && !d || t === "series" && c)) {
        var h = n.getViewOfSeriesModel(u);
        if (h.group.traverse(function(g) {
          g.__highByOuter && c && t === "self" || dC(g);
        }), zr(t))
          a(u.getData(), t);
        else if (Ne(t))
          for (var p = ut(t), v = 0; v < p.length; v++)
            a(u.getData(p[v]), t[p[v]]);
        l.push(u), cC(u).isBlured = !0;
      }
    }), i.eachComponent(function(u, c) {
      if (u !== "series") {
        var f = n.getViewOfComponentModel(c);
        f && f.toggleBlurSeries && f.toggleBlurSeries(l, !0, i);
      }
    });
  }
}
function dw(e, t, r) {
  if (!(e == null || t == null)) {
    var n = r.getModel().getComponent(e, t);
    if (n) {
      cC(n).isBlured = !0;
      var i = r.getViewOfComponentModel(n);
      !i || !i.focusBlurEnabled || i.group.traverse(function(a) {
        dC(a);
      });
    }
  }
}
function wne(e, t, r) {
  var n = e.seriesIndex, i = e.getData(t.dataType);
  if (!i) {
    process.env.NODE_ENV !== "production" && jr("Unknown dataType " + t.dataType);
    return;
  }
  var a = Ol(i, t);
  a = (le(a) ? a[0] : a) || 0;
  var o = i.getItemGraphicEl(a);
  if (!o)
    for (var s = i.count(), l = 0; !o && l < s; )
      o = i.getItemGraphicEl(l++);
  if (o) {
    var u = He(o);
    fw(n, u.focus, u.blurScope, r);
  } else {
    var c = e.get(["emphasis", "focus"]), f = e.get(["emphasis", "blurScope"]);
    c != null && fw(n, c, f, r);
  }
}
function pC(e, t, r, n) {
  var i = {
    focusSelf: !1,
    dispatchers: null
  };
  if (e == null || e === "series" || t == null || r == null)
    return i;
  var a = n.getModel().getComponent(e, t);
  if (!a)
    return i;
  var o = n.getViewOfComponentModel(a);
  if (!o || !o.findHighDownDispatchers)
    return i;
  for (var s = o.findHighDownDispatchers(r), l, u = 0; u < s.length; u++)
    if (process.env.NODE_ENV !== "production" && !ss(s[u]) && jr("param should be highDownDispatcher"), He(s[u]).focus === "self") {
      l = !0;
      break;
    }
  return {
    focusSelf: l,
    dispatchers: s
  };
}
function _ne(e, t, r) {
  process.env.NODE_ENV !== "production" && !ss(e) && jr("param should be highDownDispatcher");
  var n = He(e), i = pC(n.componentMainType, n.componentIndex, n.componentHighDownName, r), a = i.dispatchers, o = i.focusSelf;
  a ? (o && dw(n.componentMainType, n.componentIndex, r), j(a, function(s) {
    return SD(s, t);
  })) : (fw(n.seriesIndex, n.focus, n.blurScope, r), n.focus === "self" && dw(n.componentMainType, n.componentIndex, r), SD(e, t));
}
function Sne(e, t, r) {
  process.env.NODE_ENV !== "production" && !ss(e) && jr("param should be highDownDispatcher"), Y9(r);
  var n = He(e), i = pC(n.componentMainType, n.componentIndex, n.componentHighDownName, r).dispatchers;
  i ? j(i, function(a) {
    return CD(a, t);
  }) : CD(e, t);
}
function Cne(e, t, r) {
  if (pw(t)) {
    var n = t.dataType, i = e.getData(n), a = Ol(i, t);
    le(a) || (a = [a]), e[t.type === Bd ? "toggleSelect" : t.type === Vd ? "select" : "unselect"](a, n);
  }
}
function TD(e) {
  var t = e.getAllData();
  j(t, function(r) {
    var n = r.data, i = r.type;
    n.eachItemGraphicEl(function(a, o) {
      e.isSelected(o, i) ? G9(a) : W9(a);
    });
  });
}
function Tne(e) {
  var t = [];
  return e.eachSeries(function(r) {
    var n = r.getAllData();
    j(n, function(i) {
      i.data;
      var a = i.type, o = r.getSelectedDataIndices();
      if (o.length > 0) {
        var s = {
          dataIndex: o,
          seriesIndex: r.seriesIndex
        };
        a != null && (s.dataType = a), t.push(s);
      }
    });
  }), t;
}
function Xo(e, t, r) {
  dl(e, !0), so(e, jl), hw(e, t, r);
}
function Ane(e) {
  dl(e, !1);
}
function Jt(e, t, r, n) {
  n ? Ane(e) : Xo(e, t, r);
}
function hw(e, t, r) {
  var n = He(e);
  t != null ? (n.focus = t, n.blurScope = r) : n.focus && (n.focus = null);
}
var AD = ["emphasis", "blur", "select"], Mne = {
  itemStyle: "getItemStyle",
  lineStyle: "getLineStyle",
  areaStyle: "getAreaStyle"
};
function Vr(e, t, r, n) {
  r = r || "itemStyle";
  for (var i = 0; i < AD.length; i++) {
    var a = AD[i], o = t.getModel([a, r]), s = e.ensureState(a);
    s.style = n ? n(o) : o[Mne[r]]();
  }
}
function dl(e, t) {
  var r = t === !1, n = e;
  e.highDownSilentOnTouch && (n.__highDownSilentOnTouch = e.highDownSilentOnTouch), (!r || n.__highDownDispatcher) && (n.__highByOuter = n.__highByOuter || 0, n.__highDownDispatcher = !r);
}
function ss(e) {
  return !!(e && e.__highDownDispatcher);
}
function Ene(e, t, r) {
  var n = He(e);
  n.componentMainType = t.mainType, n.componentIndex = t.componentIndex, n.componentHighDownName = r;
}
function Dne(e) {
  var t = wD[e];
  return t == null && bD <= 32 && (t = wD[e] = bD++), t;
}
function pw(e) {
  var t = e.type;
  return t === Vd || t === pg || t === Bd;
}
function MD(e) {
  var t = e.type;
  return t === Tl || t === hg;
}
function Nne(e) {
  var t = V9(e);
  t.normalFill = e.style.fill, t.normalStroke = e.style.stroke;
  var r = e.states.select || {};
  t.selectFill = r.style && r.style.fill || null, t.selectStroke = r.style && r.style.stroke || null;
}
var bu = ca.CMD, Ine = [[], [], []], ED = Math.sqrt, Lne = Math.atan2;
function Z9(e, t) {
  if (t) {
    var r = e.data, n = e.len(), i, a, o, s, l, u, c = bu.M, f = bu.C, d = bu.L, h = bu.R, p = bu.A, v = bu.Q;
    for (o = 0, s = 0; o < n; ) {
      switch (i = r[o++], s = o, a = 0, i) {
        case c:
          a = 1;
          break;
        case d:
          a = 1;
          break;
        case f:
          a = 3;
          break;
        case v:
          a = 2;
          break;
        case p:
          var g = t[4], m = t[5], y = ED(t[0] * t[0] + t[1] * t[1]), b = ED(t[2] * t[2] + t[3] * t[3]), w = Lne(-t[1] / b, t[0] / y);
          r[o] *= y, r[o++] += g, r[o] *= b, r[o++] += m, r[o++] *= y, r[o++] *= b, r[o++] += w, r[o++] += w, o += 2, s = o;
          break;
        case h:
          u[0] = r[o++], u[1] = r[o++], Ir(u, u, t), r[s++] = u[0], r[s++] = u[1], u[0] += r[o++], u[1] += r[o++], Ir(u, u, t), r[s++] = u[0], r[s++] = u[1];
      }
      for (l = 0; l < a; l++) {
        var _ = Ine[l];
        _[0] = r[o++], _[1] = r[o++], Ir(_, _, t), r[s++] = _[0], r[s++] = _[1];
      }
    }
    e.increaseVersion();
  }
}
var H1 = Math.sqrt, ev = Math.sin, tv = Math.cos, jf = Math.PI;
function DD(e) {
  return Math.sqrt(e[0] * e[0] + e[1] * e[1]);
}
function vw(e, t) {
  return (e[0] * t[0] + e[1] * t[1]) / (DD(e) * DD(t));
}
function ND(e, t) {
  return (e[0] * t[1] < e[1] * t[0] ? -1 : 1) * Math.acos(vw(e, t));
}
function ID(e, t, r, n, i, a, o, s, l, u, c) {
  var f = l * (jf / 180), d = tv(f) * (e - r) / 2 + ev(f) * (t - n) / 2, h = -1 * ev(f) * (e - r) / 2 + tv(f) * (t - n) / 2, p = d * d / (o * o) + h * h / (s * s);
  p > 1 && (o *= H1(p), s *= H1(p));
  var v = (i === a ? -1 : 1) * H1((o * o * (s * s) - o * o * (h * h) - s * s * (d * d)) / (o * o * (h * h) + s * s * (d * d))) || 0, g = v * o * h / s, m = v * -s * d / o, y = (e + r) / 2 + tv(f) * g - ev(f) * m, b = (t + n) / 2 + ev(f) * g + tv(f) * m, w = ND([1, 0], [(d - g) / o, (h - m) / s]), _ = [(d - g) / o, (h - m) / s], S = [(-1 * d - g) / o, (-1 * h - m) / s], C = ND(_, S);
  if (vw(_, S) <= -1 && (C = jf), vw(_, S) >= 1 && (C = 0), C < 0) {
    var A = Math.round(C / jf * 1e6) / 1e6;
    C = jf * 2 + A % 2 * jf;
  }
  c.addData(u, y, b, o, s, w, C, f, a);
}
var Rne = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig, Pne = /-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;
function kne(e) {
  var t = new ca();
  if (!e)
    return t;
  var r = 0, n = 0, i = r, a = n, o, s = ca.CMD, l = e.match(Rne);
  if (!l)
    return t;
  for (var u = 0; u < l.length; u++) {
    for (var c = l[u], f = c.charAt(0), d = void 0, h = c.match(Pne) || [], p = h.length, v = 0; v < p; v++)
      h[v] = parseFloat(h[v]);
    for (var g = 0; g < p; ) {
      var m = void 0, y = void 0, b = void 0, w = void 0, _ = void 0, S = void 0, C = void 0, A = r, M = n, D = void 0, N = void 0;
      switch (f) {
        case "l":
          r += h[g++], n += h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "L":
          r = h[g++], n = h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "m":
          r += h[g++], n += h[g++], d = s.M, t.addData(d, r, n), i = r, a = n, f = "l";
          break;
        case "M":
          r = h[g++], n = h[g++], d = s.M, t.addData(d, r, n), i = r, a = n, f = "L";
          break;
        case "h":
          r += h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "H":
          r = h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "v":
          n += h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "V":
          n = h[g++], d = s.L, t.addData(d, r, n);
          break;
        case "C":
          d = s.C, t.addData(d, h[g++], h[g++], h[g++], h[g++], h[g++], h[g++]), r = h[g - 2], n = h[g - 1];
          break;
        case "c":
          d = s.C, t.addData(d, h[g++] + r, h[g++] + n, h[g++] + r, h[g++] + n, h[g++] + r, h[g++] + n), r += h[g - 2], n += h[g - 1];
          break;
        case "S":
          m = r, y = n, D = t.len(), N = t.data, o === s.C && (m += r - N[D - 4], y += n - N[D - 3]), d = s.C, A = h[g++], M = h[g++], r = h[g++], n = h[g++], t.addData(d, m, y, A, M, r, n);
          break;
        case "s":
          m = r, y = n, D = t.len(), N = t.data, o === s.C && (m += r - N[D - 4], y += n - N[D - 3]), d = s.C, A = r + h[g++], M = n + h[g++], r += h[g++], n += h[g++], t.addData(d, m, y, A, M, r, n);
          break;
        case "Q":
          A = h[g++], M = h[g++], r = h[g++], n = h[g++], d = s.Q, t.addData(d, A, M, r, n);
          break;
        case "q":
          A = h[g++] + r, M = h[g++] + n, r += h[g++], n += h[g++], d = s.Q, t.addData(d, A, M, r, n);
          break;
        case "T":
          m = r, y = n, D = t.len(), N = t.data, o === s.Q && (m += r - N[D - 4], y += n - N[D - 3]), r = h[g++], n = h[g++], d = s.Q, t.addData(d, m, y, r, n);
          break;
        case "t":
          m = r, y = n, D = t.len(), N = t.data, o === s.Q && (m += r - N[D - 4], y += n - N[D - 3]), r += h[g++], n += h[g++], d = s.Q, t.addData(d, m, y, r, n);
          break;
        case "A":
          b = h[g++], w = h[g++], _ = h[g++], S = h[g++], C = h[g++], A = r, M = n, r = h[g++], n = h[g++], d = s.A, ID(A, M, r, n, S, C, b, w, _, d, t);
          break;
        case "a":
          b = h[g++], w = h[g++], _ = h[g++], S = h[g++], C = h[g++], A = r, M = n, r += h[g++], n += h[g++], d = s.A, ID(A, M, r, n, S, C, b, w, _, d, t);
          break;
      }
    }
    (f === "z" || f === "Z") && (d = s.Z, t.addData(d), r = i, n = a), o = d;
  }
  return t.toStatic(), t;
}
var X9 = function(e) {
  Ut(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.applyTransform = function(r) {
  }, t;
}(lt);
function K9(e) {
  return e.setData != null;
}
function q9(e, t) {
  var r = kne(e), n = ae({}, t);
  return n.buildPath = function(i) {
    if (K9(i)) {
      i.setData(r.data);
      var a = i.getContext();
      a && i.rebuildPath(a, 1);
    } else {
      var a = i;
      r.rebuildPath(a, 1);
    }
  }, n.applyTransform = function(i) {
    Z9(r, i), this.dirtyShape();
  }, n;
}
function J9(e, t) {
  return new X9(q9(e, t));
}
function One(e, t) {
  var r = q9(e, t), n = function(i) {
    Ut(a, i);
    function a(o) {
      var s = i.call(this, o) || this;
      return s.applyTransform = r.applyTransform, s.buildPath = r.buildPath, s;
    }
    return a;
  }(X9);
  return n;
}
function zne(e, t) {
  for (var r = [], n = e.length, i = 0; i < n; i++) {
    var a = e[i];
    r.push(a.getUpdatedPathProxy(!0));
  }
  var o = new lt(t);
  return o.createPathProxy(), o.buildPath = function(s) {
    if (K9(s)) {
      s.appendPath(r);
      var l = s.getContext();
      l && s.rebuildPath(l, 1);
    }
  }, o;
}
function vC(e, t) {
  t = t || {};
  var r = new lt();
  return e.shape && r.setShape(e.shape), r.setStyle(e.style), t.bakeTransform ? Z9(r.path, e.getComputedTransform()) : t.toLocal ? r.setLocalTransform(e.getComputedTransform()) : r.copyTransform(e), r.buildPath = e.buildPath, r.applyTransform = r.applyTransform, r.z = e.z, r.z2 = e.z2, r.zlevel = e.zlevel, r;
}
var jne = /* @__PURE__ */ function() {
  function e() {
    this.cx = 0, this.cy = 0, this.r = 0;
  }
  return e;
}(), da = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new jne();
  }, t.prototype.buildPath = function(r, n) {
    r.moveTo(n.cx + n.r, n.cy), r.arc(n.cx, n.cy, n.r, 0, Math.PI * 2);
  }, t;
}(lt);
da.prototype.type = "circle";
var Vne = /* @__PURE__ */ function() {
  function e() {
    this.cx = 0, this.cy = 0, this.rx = 0, this.ry = 0;
  }
  return e;
}(), rp = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new Vne();
  }, t.prototype.buildPath = function(r, n) {
    var i = 0.5522848, a = n.cx, o = n.cy, s = n.rx, l = n.ry, u = s * i, c = l * i;
    r.moveTo(a - s, o), r.bezierCurveTo(a - s, o - c, a - u, o - l, a, o - l), r.bezierCurveTo(a + u, o - l, a + s, o - c, a + s, o), r.bezierCurveTo(a + s, o + c, a + u, o + l, a, o + l), r.bezierCurveTo(a - u, o + l, a - s, o + c, a - s, o), r.closePath();
  }, t;
}(lt);
rp.prototype.type = "ellipse";
var Q9 = Math.PI, G1 = Q9 * 2, ks = Math.sin, wu = Math.cos, Bne = Math.acos, Hr = Math.atan2, LD = Math.abs, Fd = Math.sqrt, yd = Math.max, Vi = Math.min, hi = 1e-4;
function Fne(e, t, r, n, i, a, o, s) {
  var l = r - e, u = n - t, c = o - i, f = s - a, d = f * l - c * u;
  if (!(d * d < hi))
    return d = (c * (t - a) - f * (e - i)) / d, [e + d * l, t + d * u];
}
function rv(e, t, r, n, i, a, o) {
  var s = e - r, l = t - n, u = (o ? a : -a) / Fd(s * s + l * l), c = u * l, f = -u * s, d = e + c, h = t + f, p = r + c, v = n + f, g = (d + p) / 2, m = (h + v) / 2, y = p - d, b = v - h, w = y * y + b * b, _ = i - a, S = d * v - p * h, C = (b < 0 ? -1 : 1) * Fd(yd(0, _ * _ * w - S * S)), A = (S * b - y * C) / w, M = (-S * y - b * C) / w, D = (S * b + y * C) / w, N = (-S * y + b * C) / w, R = A - g, O = M - m, E = D - g, L = N - m;
  return R * R + O * O > E * E + L * L && (A = D, M = N), {
    cx: A,
    cy: M,
    x0: -c,
    y0: -f,
    x1: A * (i / _ - 1),
    y1: M * (i / _ - 1)
  };
}
function $ne(e) {
  var t;
  if (le(e)) {
    var r = e.length;
    if (!r)
      return e;
    r === 1 ? t = [e[0], e[0], 0, 0] : r === 2 ? t = [e[0], e[0], e[1], e[1]] : r === 3 ? t = e.concat(e[2]) : t = e;
  } else
    t = [e, e, e, e];
  return t;
}
function Hne(e, t) {
  var r, n = yd(t.r, 0), i = yd(t.r0 || 0, 0), a = n > 0, o = i > 0;
  if (!(!a && !o)) {
    if (a || (n = i, i = 0), i > n) {
      var s = n;
      n = i, i = s;
    }
    var l = t.startAngle, u = t.endAngle;
    if (!(isNaN(l) || isNaN(u))) {
      var c = t.cx, f = t.cy, d = !!t.clockwise, h = LD(u - l), p = h > G1 && h % G1;
      if (p > hi && (h = p), !(n > hi))
        e.moveTo(c, f);
      else if (h > G1 - hi)
        e.moveTo(c + n * wu(l), f + n * ks(l)), e.arc(c, f, n, l, u, !d), i > hi && (e.moveTo(c + i * wu(u), f + i * ks(u)), e.arc(c, f, i, u, l, d));
      else {
        var v = void 0, g = void 0, m = void 0, y = void 0, b = void 0, w = void 0, _ = void 0, S = void 0, C = void 0, A = void 0, M = void 0, D = void 0, N = void 0, R = void 0, O = void 0, E = void 0, L = n * wu(l), I = n * ks(l), P = i * wu(u), k = i * ks(u), z = h > hi;
        if (z) {
          var V = t.cornerRadius;
          V && (r = $ne(V), v = r[0], g = r[1], m = r[2], y = r[3]);
          var B = LD(n - i) / 2;
          if (b = Vi(B, m), w = Vi(B, y), _ = Vi(B, v), S = Vi(B, g), M = C = yd(b, w), D = A = yd(_, S), (C > hi || A > hi) && (N = n * wu(u), R = n * ks(u), O = i * wu(l), E = i * ks(l), h < Q9)) {
            var F = Fne(L, I, O, E, N, R, P, k);
            if (F) {
              var H = L - F[0], G = I - F[1], W = N - F[0], X = R - F[1], q = 1 / ks(Bne((H * W + G * X) / (Fd(H * H + G * G) * Fd(W * W + X * X))) / 2), J = Fd(F[0] * F[0] + F[1] * F[1]);
              M = Vi(C, (n - J) / (q + 1)), D = Vi(A, (i - J) / (q - 1));
            }
          }
        }
        if (!z)
          e.moveTo(c + L, f + I);
        else if (M > hi) {
          var U = Vi(m, M), $ = Vi(y, M), Y = rv(O, E, L, I, n, U, d), Z = rv(N, R, P, k, n, $, d);
          e.moveTo(c + Y.cx + Y.x0, f + Y.cy + Y.y0), M < C && U === $ ? e.arc(c + Y.cx, f + Y.cy, M, Hr(Y.y0, Y.x0), Hr(Z.y0, Z.x0), !d) : (U > 0 && e.arc(c + Y.cx, f + Y.cy, U, Hr(Y.y0, Y.x0), Hr(Y.y1, Y.x1), !d), e.arc(c, f, n, Hr(Y.cy + Y.y1, Y.cx + Y.x1), Hr(Z.cy + Z.y1, Z.cx + Z.x1), !d), $ > 0 && e.arc(c + Z.cx, f + Z.cy, $, Hr(Z.y1, Z.x1), Hr(Z.y0, Z.x0), !d));
        } else
          e.moveTo(c + L, f + I), e.arc(c, f, n, l, u, !d);
        if (!(i > hi) || !z)
          e.lineTo(c + P, f + k);
        else if (D > hi) {
          var U = Vi(v, D), $ = Vi(g, D), Y = rv(P, k, N, R, i, -$, d), Z = rv(L, I, O, E, i, -U, d);
          e.lineTo(c + Y.cx + Y.x0, f + Y.cy + Y.y0), D < A && U === $ ? e.arc(c + Y.cx, f + Y.cy, D, Hr(Y.y0, Y.x0), Hr(Z.y0, Z.x0), !d) : ($ > 0 && e.arc(c + Y.cx, f + Y.cy, $, Hr(Y.y0, Y.x0), Hr(Y.y1, Y.x1), !d), e.arc(c, f, i, Hr(Y.cy + Y.y1, Y.cx + Y.x1), Hr(Z.cy + Z.y1, Z.cx + Z.x1), d), U > 0 && e.arc(c + Z.cx, f + Z.cy, U, Hr(Z.y1, Z.x1), Hr(Z.y0, Z.x0), !d));
        } else
          e.lineTo(c + P, f + k), e.arc(c, f, i, u, l, d);
      }
      e.closePath();
    }
  }
}
var Gne = /* @__PURE__ */ function() {
  function e() {
    this.cx = 0, this.cy = 0, this.r0 = 0, this.r = 0, this.startAngle = 0, this.endAngle = Math.PI * 2, this.clockwise = !0, this.cornerRadius = 0;
  }
  return e;
}(), qr = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new Gne();
  }, t.prototype.buildPath = function(r, n) {
    Hne(r, n);
  }, t.prototype.isZeroArea = function() {
    return this.shape.startAngle === this.shape.endAngle || this.shape.r === this.shape.r0;
  }, t;
}(lt);
qr.prototype.type = "sector";
var Wne = /* @__PURE__ */ function() {
  function e() {
    this.cx = 0, this.cy = 0, this.r = 0, this.r0 = 0;
  }
  return e;
}(), of = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new Wne();
  }, t.prototype.buildPath = function(r, n) {
    var i = n.cx, a = n.cy, o = Math.PI * 2;
    r.moveTo(i + n.r, a), r.arc(i, a, n.r, 0, o, !1), r.moveTo(i + n.r0, a), r.arc(i, a, n.r0, 0, o, !0);
  }, t;
}(lt);
of.prototype.type = "ring";
function Une(e, t, r, n) {
  var i = [], a = [], o = [], s = [], l, u, c, f;
  if (n) {
    c = [1 / 0, 1 / 0], f = [-1 / 0, -1 / 0];
    for (var d = 0, h = e.length; d < h; d++)
      za(c, c, e[d]), ja(f, f, e[d]);
    za(c, c, n[0]), ja(f, f, n[1]);
  }
  for (var d = 0, h = e.length; d < h; d++) {
    var p = e[d];
    if (r)
      l = e[d ? d - 1 : h - 1], u = e[(d + 1) % h];
    else if (d === 0 || d === h - 1) {
      i.push(ra(e[d]));
      continue;
    } else
      l = e[d - 1], u = e[d + 1];
    zo(a, u, l), Ld(a, a, t);
    var v = Yg(p, l), g = Yg(p, u), m = v + g;
    m !== 0 && (v /= m, g /= m), Ld(o, a, -v), Ld(s, a, g);
    var y = V2([], p, o), b = V2([], p, s);
    n && (ja(y, y, c), za(y, y, f), ja(b, b, c), za(b, b, f)), i.push(y), i.push(b);
  }
  return r && i.push(i.shift()), i;
}
function e6(e, t, r) {
  var n = t.smooth, i = t.points;
  if (i && i.length >= 2) {
    if (n) {
      var a = Une(i, n, r, t.smoothConstraint);
      e.moveTo(i[0][0], i[0][1]);
      for (var o = i.length, s = 0; s < (r ? o : o - 1); s++) {
        var l = a[s * 2], u = a[s * 2 + 1], c = i[(s + 1) % o];
        e.bezierCurveTo(l[0], l[1], u[0], u[1], c[0], c[1]);
      }
    } else {
      e.moveTo(i[0][0], i[0][1]);
      for (var s = 1, f = i.length; s < f; s++)
        e.lineTo(i[s][0], i[s][1]);
    }
    r && e.closePath();
  }
}
var Yne = /* @__PURE__ */ function() {
  function e() {
    this.points = null, this.smooth = 0, this.smoothConstraint = null;
  }
  return e;
}(), Jr = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultShape = function() {
    return new Yne();
  }, t.prototype.buildPath = function(r, n) {
    e6(r, n, !0);
  }, t;
}(lt);
Jr.prototype.type = "polygon";
var Zne = /* @__PURE__ */ function() {
  function e() {
    this.points = null, this.percent = 1, this.smooth = 0, this.smoothConstraint = null;
  }
  return e;
}(), en = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  }, t.prototype.getDefaultShape = function() {
    return new Zne();
  }, t.prototype.buildPath = function(r, n) {
    e6(r, n, !1);
  }, t;
}(lt);
en.prototype.type = "polyline";
var Xne = {}, Kne = /* @__PURE__ */ function() {
  function e() {
    this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.percent = 1;
  }
  return e;
}(), xr = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  }, t.prototype.getDefaultShape = function() {
    return new Kne();
  }, t.prototype.buildPath = function(r, n) {
    var i, a, o, s;
    if (this.subPixelOptimize) {
      var l = k9(Xne, n, this.style);
      i = l.x1, a = l.y1, o = l.x2, s = l.y2;
    } else
      i = n.x1, a = n.y1, o = n.x2, s = n.y2;
    var u = n.percent;
    u !== 0 && (r.moveTo(i, a), u < 1 && (o = i * (1 - u) + o * u, s = a * (1 - u) + s * u), r.lineTo(o, s));
  }, t.prototype.pointAt = function(r) {
    var n = this.shape;
    return [
      n.x1 * (1 - r) + n.x2 * r,
      n.y1 * (1 - r) + n.y2 * r
    ];
  }, t;
}(lt);
xr.prototype.type = "line";
var dn = [], qne = /* @__PURE__ */ function() {
  function e() {
    this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.cpx1 = 0, this.cpy1 = 0, this.percent = 1;
  }
  return e;
}();
function RD(e, t, r) {
  var n = e.cpx2, i = e.cpy2;
  return n != null || i != null ? [
    (r ? zE : br)(e.x1, e.cpx1, e.cpx2, e.x2, t),
    (r ? zE : br)(e.y1, e.cpy1, e.cpy2, e.y2, t)
  ] : [
    (r ? G2 : Dr)(e.x1, e.cpx1, e.x2, t),
    (r ? G2 : Dr)(e.y1, e.cpy1, e.y2, t)
  ];
}
var sf = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  }, t.prototype.getDefaultShape = function() {
    return new qne();
  }, t.prototype.buildPath = function(r, n) {
    var i = n.x1, a = n.y1, o = n.x2, s = n.y2, l = n.cpx1, u = n.cpy1, c = n.cpx2, f = n.cpy2, d = n.percent;
    d !== 0 && (r.moveTo(i, a), c == null || f == null ? (d < 1 && (ch(i, l, o, d, dn), l = dn[1], o = dn[2], ch(a, u, s, d, dn), u = dn[1], s = dn[2]), r.quadraticCurveTo(l, u, o, s)) : (d < 1 && (os(i, l, c, o, d, dn), l = dn[1], c = dn[2], o = dn[3], os(a, u, f, s, d, dn), u = dn[1], f = dn[2], s = dn[3]), r.bezierCurveTo(l, u, c, f, o, s)));
  }, t.prototype.pointAt = function(r) {
    return RD(this.shape, r, !1);
  }, t.prototype.tangentAt = function(r) {
    var n = RD(this.shape, r, !0);
    return Wl(n, n);
  }, t;
}(lt);
sf.prototype.type = "bezier-curve";
var Jne = /* @__PURE__ */ function() {
  function e() {
    this.cx = 0, this.cy = 0, this.r = 0, this.startAngle = 0, this.endAngle = Math.PI * 2, this.clockwise = !0;
  }
  return e;
}(), np = function(e) {
  Ut(t, e);
  function t(r) {
    return e.call(this, r) || this;
  }
  return t.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  }, t.prototype.getDefaultShape = function() {
    return new Jne();
  }, t.prototype.buildPath = function(r, n) {
    var i = n.cx, a = n.cy, o = Math.max(n.r, 0), s = n.startAngle, l = n.endAngle, u = n.clockwise, c = Math.cos(s), f = Math.sin(s);
    r.moveTo(c * o + i, f * o + a), r.arc(i, a, o, s, l, !u);
  }, t;
}(lt);
np.prototype.type = "arc";
var $y = function(e) {
  Ut(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.type = "compound", r;
  }
  return t.prototype._updatePathDirty = function() {
    for (var r = this.shape.paths, n = this.shapeChanged(), i = 0; i < r.length; i++)
      n = n || r[i].shapeChanged();
    n && this.dirtyShape();
  }, t.prototype.beforeBrush = function() {
    this._updatePathDirty();
    for (var r = this.shape.paths || [], n = this.getGlobalScale(), i = 0; i < r.length; i++)
      r[i].path || r[i].createPathProxy(), r[i].path.setScale(n[0], n[1], r[i].segmentIgnoreThreshold);
  }, t.prototype.buildPath = function(r, n) {
    for (var i = n.paths || [], a = 0; a < i.length; a++)
      i[a].buildPath(r, i[a].shape, !0);
  }, t.prototype.afterBrush = function() {
    for (var r = this.shape.paths || [], n = 0; n < r.length; n++)
      r[n].pathUpdated();
  }, t.prototype.getBoundingRect = function() {
    return this._updatePathDirty.call(this), lt.prototype.getBoundingRect.call(this);
  }, t;
}(lt), t6 = function() {
  function e(t) {
    this.colorStops = t || [];
  }
  return e.prototype.addColorStop = function(t, r) {
    this.colorStops.push({
      offset: t,
      color: r
    });
  }, e;
}(), lf = function(e) {
  Ut(t, e);
  function t(r, n, i, a, o, s) {
    var l = e.call(this, o) || this;
    return l.x = r ?? 0, l.y = n ?? 0, l.x2 = i ?? 1, l.y2 = a ?? 0, l.type = "linear", l.global = s || !1, l;
  }
  return t;
}(t6), gC = function(e) {
  Ut(t, e);
  function t(r, n, i, a, o) {
    var s = e.call(this, a) || this;
    return s.x = r ?? 0.5, s.y = n ?? 0.5, s.r = i ?? 0.5, s.type = "radial", s.global = o || !1, s;
  }
  return t;
}(t6), Os = [0, 0], zs = [0, 0], nv = new et(), iv = new et(), am = function() {
  function e(t, r) {
    this._corners = [], this._axes = [], this._origin = [0, 0];
    for (var n = 0; n < 4; n++)
      this._corners[n] = new et();
    for (var n = 0; n < 2; n++)
      this._axes[n] = new et();
    t && this.fromBoundingRect(t, r);
  }
  return e.prototype.fromBoundingRect = function(t, r) {
    var n = this._corners, i = this._axes, a = t.x, o = t.y, s = a + t.width, l = o + t.height;
    if (n[0].set(a, o), n[1].set(s, o), n[2].set(s, l), n[3].set(a, l), r)
      for (var u = 0; u < 4; u++)
        n[u].transform(r);
    et.sub(i[0], n[1], n[0]), et.sub(i[1], n[3], n[0]), i[0].normalize(), i[1].normalize();
    for (var u = 0; u < 2; u++)
      this._origin[u] = i[u].dot(n[0]);
  }, e.prototype.intersect = function(t, r) {
    var n = !0, i = !r;
    return nv.set(1 / 0, 1 / 0), iv.set(0, 0), !this._intersectCheckOneSide(this, t, nv, iv, i, 1) && (n = !1, i) || !this._intersectCheckOneSide(t, this, nv, iv, i, -1) && (n = !1, i) || i || et.copy(r, n ? nv : iv), n;
  }, e.prototype._intersectCheckOneSide = function(t, r, n, i, a, o) {
    for (var s = !0, l = 0; l < 2; l++) {
      var u = this._axes[l];
      if (this._getProjMinMaxOnAxis(l, t._corners, Os), this._getProjMinMaxOnAxis(l, r._corners, zs), Os[1] < zs[0] || Os[0] > zs[1]) {
        if (s = !1, a)
          return s;
        var c = Math.abs(zs[0] - Os[1]), f = Math.abs(Os[0] - zs[1]);
        Math.min(c, f) > i.len() && (c < f ? et.scale(i, u, -c * o) : et.scale(i, u, f * o));
      } else if (n) {
        var c = Math.abs(zs[0] - Os[1]), f = Math.abs(Os[0] - zs[1]);
        Math.min(c, f) < n.len() && (c < f ? et.scale(n, u, c * o) : et.scale(n, u, -f * o));
      }
    }
    return s;
  }, e.prototype._getProjMinMaxOnAxis = function(t, r, n) {
    for (var i = this._axes[t], a = this._origin, o = r[0].dot(i) + a[t], s = o, l = o, u = 1; u < r.length; u++) {
      var c = r[u].dot(i) + a[t];
      s = Math.min(c, s), l = Math.max(c, l);
    }
    n[0] = s, n[1] = l;
  }, e;
}(), Qne = [], r6 = function(e) {
  Ut(t, e);
  function t() {
    var r = e !== null && e.apply(this, arguments) || this;
    return r.notClear = !0, r.incremental = !0, r._displayables = [], r._temporaryDisplayables = [], r._cursor = 0, r;
  }
  return t.prototype.traverse = function(r, n) {
    r.call(n, this);
  }, t.prototype.useStyle = function() {
    this.style = {};
  }, t.prototype.getCursor = function() {
    return this._cursor;
  }, t.prototype.innerAfterBrush = function() {
    this._cursor = this._displayables.length;
  }, t.prototype.clearDisplaybles = function() {
    this._displayables = [], this._temporaryDisplayables = [], this._cursor = 0, this.markRedraw(), this.notClear = !1;
  }, t.prototype.clearTemporalDisplayables = function() {
    this._temporaryDisplayables = [];
  }, t.prototype.addDisplayable = function(r, n) {
    n ? this._temporaryDisplayables.push(r) : this._displayables.push(r), this.markRedraw();
  }, t.prototype.addDisplayables = function(r, n) {
    n = n || !1;
    for (var i = 0; i < r.length; i++)
      this.addDisplayable(r[i], n);
  }, t.prototype.getDisplayables = function() {
    return this._displayables;
  }, t.prototype.getTemporalDisplayables = function() {
    return this._temporaryDisplayables;
  }, t.prototype.eachPendingDisplayable = function(r) {
    for (var n = this._cursor; n < this._displayables.length; n++)
      r && r(this._displayables[n]);
    for (var n = 0; n < this._temporaryDisplayables.length; n++)
      r && r(this._temporaryDisplayables[n]);
  }, t.prototype.update = function() {
    this.updateTransform();
    for (var r = this._cursor; r < this._displayables.length; r++) {
      var n = this._displayables[r];
      n.parent = this, n.update(), n.parent = null;
    }
    for (var r = 0; r < this._temporaryDisplayables.length; r++) {
      var n = this._temporaryDisplayables[r];
      n.parent = this, n.update(), n.parent = null;
    }
  }, t.prototype.getBoundingRect = function() {
    if (!this._rect) {
      for (var r = new tt(1 / 0, 1 / 0, -1 / 0, -1 / 0), n = 0; n < this._displayables.length; n++) {
        var i = this._displayables[n], a = i.getBoundingRect().clone();
        i.needLocalTransform() && a.applyTransform(i.getLocalTransform(Qne)), r.union(a);
      }
      this._rect = r;
    }
    return this._rect;
  }, t.prototype.contain = function(r, n) {
    var i = this.transformCoordToLocal(r, n), a = this.getBoundingRect();
    if (a.contain(i[0], i[1]))
      for (var o = 0; o < this._displayables.length; o++) {
        var s = this._displayables[o];
        if (s.contain(r, n))
          return !0;
      }
    return !1;
  }, t;
}(ri), n6 = yt();
function uf(e, t, r, n, i) {
  var a;
  if (t && t.ecModel) {
    var o = t.ecModel.getUpdatePayload();
    a = o && o.animation;
  }
  var s = t && t.isAnimationEnabled(), l = e === "update";
  if (s) {
    var u = void 0, c = void 0, f = void 0;
    n ? (u = Ge(n.duration, 200), c = Ge(n.easing, "cubicOut"), f = 0) : (u = t.getShallow(l ? "animationDurationUpdate" : "animationDuration"), c = t.getShallow(l ? "animationEasingUpdate" : "animationEasing"), f = t.getShallow(l ? "animationDelayUpdate" : "animationDelay")), a && (a.duration != null && (u = a.duration), a.easing != null && (c = a.easing), a.delay != null && (f = a.delay)), Ee(f) && (f = f(r, i)), Ee(u) && (u = u(r));
    var d = {
      duration: u || 0,
      delay: f,
      easing: c
    };
    return d;
  } else
    return null;
}
function mC(e, t, r, n, i, a, o) {
  var s = !1, l;
  Ee(i) ? (o = a, a = i, i = null) : Ne(i) && (a = i.cb, o = i.during, s = i.isFrom, l = i.removeOpt, i = i.dataIndex);
  var u = e === "leave";
  u || t.stopAnimation("leave");
  var c = uf(e, n, i, u ? l || {} : null, n && n.getAnimationDelayParams ? n.getAnimationDelayParams(t, i) : null);
  if (c && c.duration > 0) {
    var f = c.duration, d = c.delay, h = c.easing, p = {
      duration: f,
      delay: d || 0,
      easing: h,
      done: a,
      force: !!a || !!o,
      // Set to final state in update/init animation.
      // So the post processing based on the path shape can be done correctly.
      setToFinal: !u,
      scope: e,
      during: o
    };
    s ? t.animateFrom(r, p) : t.animateTo(r, p);
  } else
    t.stopAnimation(), !s && t.attr(r), o && o(1), a && a();
}
function _t(e, t, r, n, i, a) {
  mC("update", e, t, r, n, i, a);
}
function Wt(e, t, r, n, i, a) {
  mC("enter", e, t, r, n, i, a);
}
function pc(e) {
  if (!e.__zr)
    return !0;
  for (var t = 0; t < e.animators.length; t++) {
    var r = e.animators[t];
    if (r.scope === "leave")
      return !0;
  }
  return !1;
}
function ls(e, t, r, n, i, a) {
  pc(e) || mC("leave", e, t, r, n, i, a);
}
function PD(e, t, r, n) {
  e.removeTextContent(), e.removeTextGuideLine(), ls(e, {
    style: {
      opacity: 0
    }
  }, t, r, n);
}
function gh(e, t, r) {
  function n() {
    e.parent && e.parent.remove(e);
  }
  e.isGroup ? e.traverse(function(i) {
    i.isGroup || PD(i, t, r, n);
  }) : PD(e, t, r, n);
}
function Li(e) {
  n6(e).oldStyle = e.style;
}
function eie(e) {
  return n6(e).oldStyle;
}
var om = Math.max, sm = Math.min, gw = {};
function i6(e) {
  return lt.extend(e);
}
var tie = One;
function a6(e, t) {
  return tie(e, t);
}
function oi(e, t) {
  gw[e] = t;
}
function Hy(e) {
  if (gw.hasOwnProperty(e))
    return gw[e];
}
function ip(e, t, r, n) {
  var i = J9(e, t);
  return r && (n === "center" && (r = o6(r, i.getBoundingRect())), xC(i, r)), i;
}
function yC(e, t, r) {
  var n = new Ar({
    style: {
      image: e,
      x: t.x,
      y: t.y,
      width: t.width,
      height: t.height
    },
    onload: function(i) {
      if (r === "center") {
        var a = {
          width: i.width,
          height: i.height
        };
        n.setStyle(o6(t, a));
      }
    }
  });
  return n;
}
function o6(e, t) {
  var r = t.width / t.height, n = e.height * r, i;
  n <= e.width ? i = e.height : (n = e.width, i = n / r);
  var a = e.x + e.width / 2, o = e.y + e.height / 2;
  return {
    x: a - n / 2,
    y: o - i / 2,
    width: n,
    height: i
  };
}
var Tn = zne;
function xC(e, t) {
  if (e.applyTransform) {
    var r = e.getBoundingRect(), n = r.calculateTransform(t);
    e.applyTransform(n);
  }
}
function Pc(e, t) {
  return k9(e, e, {
    lineWidth: t
  }), e;
}
function rie(e) {
  return O9(e.shape, e.shape, e.style), e;
}
var vg = fl;
function Ko(e, t) {
  for (var r = Kh([]); e && e !== t; )
    na(r, e.getLocalTransform(), r), e = e.parent;
  return r;
}
function Ai(e, t, r) {
  return t && !zr(t) && (t = Va.getLocalTransform(t)), r && (t = Ul([], t)), Ir([], e, t);
}
function Gy(e, t, r) {
  var n = t[4] === 0 || t[5] === 0 || t[0] === 0 ? 1 : Math.abs(2 * t[4] / t[0]), i = t[4] === 0 || t[5] === 0 || t[2] === 0 ? 1 : Math.abs(2 * t[4] / t[2]), a = [e === "left" ? -n : e === "right" ? n : 0, e === "top" ? -i : e === "bottom" ? i : 0];
  return a = Ai(a, t, r), Math.abs(a[0]) > Math.abs(a[1]) ? a[0] > 0 ? "right" : "left" : a[1] > 0 ? "bottom" : "top";
}
function kD(e) {
  return !e.isGroup;
}
function nie(e) {
  return e.shape != null;
}
function ap(e, t, r) {
  if (!e || !t)
    return;
  function n(o) {
    var s = {};
    return o.traverse(function(l) {
      kD(l) && l.anid && (s[l.anid] = l);
    }), s;
  }
  function i(o) {
    var s = {
      x: o.x,
      y: o.y,
      rotation: o.rotation
    };
    return nie(o) && (s.shape = ae({}, o.shape)), s;
  }
  var a = n(e);
  t.traverse(function(o) {
    if (kD(o) && o.anid) {
      var s = a[o.anid];
      if (s) {
        var l = i(o);
        o.attr(i(s)), _t(o, l, r, He(o).dataIndex);
      }
    }
  });
}
function bC(e, t) {
  return ue(e, function(r) {
    var n = r[0];
    n = om(n, t.x), n = sm(n, t.x + t.width);
    var i = r[1];
    return i = om(i, t.y), i = sm(i, t.y + t.height), [n, i];
  });
}
function s6(e, t) {
  var r = om(e.x, t.x), n = sm(e.x + e.width, t.x + t.width), i = om(e.y, t.y), a = sm(e.y + e.height, t.y + t.height);
  if (n >= r && a >= i)
    return {
      x: r,
      y: i,
      width: n - r,
      height: a - i
    };
}
function cf(e, t, r) {
  var n = ae({
    rectHover: !0
  }, t), i = n.style = {
    strokeNoScale: !0
  };
  if (r = r || {
    x: -1,
    y: -1,
    width: 2,
    height: 2
  }, e)
    return e.indexOf("image://") === 0 ? (i.image = e.slice(8), Ie(i, r), new Ar(n)) : ip(e.replace("path://", ""), n, r, "center");
}
function xd(e, t, r, n, i) {
  for (var a = 0, o = i[i.length - 1]; a < i.length; a++) {
    var s = i[a];
    if (l6(e, t, r, n, s[0], s[1], o[0], o[1]))
      return !0;
    o = s;
  }
}
function l6(e, t, r, n, i, a, o, s) {
  var l = r - e, u = n - t, c = o - i, f = s - a, d = W1(c, f, l, u);
  if (iie(d))
    return !1;
  var h = e - i, p = t - a, v = W1(h, p, l, u) / d;
  if (v < 0 || v > 1)
    return !1;
  var g = W1(h, p, c, f) / d;
  return !(g < 0 || g > 1);
}
function W1(e, t, r, n) {
  return e * n - r * t;
}
function iie(e) {
  return e <= 1e-6 && e >= -1e-6;
}
function Yl(e) {
  var t = e.itemTooltipOption, r = e.componentModel, n = e.itemName, i = ge(t) ? {
    formatter: t
  } : t, a = r.mainType, o = r.componentIndex, s = {
    componentType: a,
    name: n,
    $vars: ["name"]
  };
  s[a + "Index"] = o;
  var l = e.formatterParamsExtra;
  l && j(ut(l), function(c) {
    be(s, c) || (s[c] = l[c], s.$vars.push(c));
  });
  var u = He(e.el);
  u.componentMainType = a, u.componentIndex = o, u.tooltipConfig = {
    name: n,
    option: Ie({
      content: n,
      encodeHTMLContent: !0,
      formatterParams: s
    }, i)
  };
}
function OD(e, t) {
  var r;
  e.isGroup && (r = t(e)), r || e.traverse(t);
}
function gs(e, t) {
  if (e)
    if (le(e))
      for (var r = 0; r < e.length; r++)
        OD(e[r], t);
    else
      OD(e, t);
}
oi("circle", da);
oi("ellipse", rp);
oi("sector", qr);
oi("ring", of);
oi("polygon", Jr);
oi("polyline", en);
oi("rect", vt);
oi("line", xr);
oi("bezierCurve", sf);
oi("arc", np);
const Zl = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Arc: np,
  BezierCurve: sf,
  BoundingRect: tt,
  Circle: da,
  CompoundPath: $y,
  Ellipse: rp,
  Group: Fe,
  Image: Ar,
  IncrementalDisplayable: r6,
  Line: xr,
  LinearGradient: lf,
  OrientedBoundingRect: am,
  Path: lt,
  Point: et,
  Polygon: Jr,
  Polyline: en,
  RadialGradient: gC,
  Rect: vt,
  Ring: of,
  Sector: qr,
  Text: pt,
  applyTransform: Ai,
  clipPointsByRect: bC,
  clipRectByRect: s6,
  createIcon: cf,
  extendPath: a6,
  extendShape: i6,
  getShapeClass: Hy,
  getTransform: Ko,
  groupTransition: ap,
  initProps: Wt,
  isElementRemoved: pc,
  lineLineIntersect: l6,
  linePolygonIntersect: xd,
  makeImage: yC,
  makePath: ip,
  mergePath: Tn,
  registerShape: oi,
  removeElement: ls,
  removeElementWithFadeOut: gh,
  resizePath: xC,
  setTooltipConfig: Yl,
  subPixelOptimize: vg,
  subPixelOptimizeLine: Pc,
  subPixelOptimizeRect: rie,
  transformDirection: Gy,
  traverseElements: gs,
  updateProps: _t
}, Symbol.toStringTag, { value: "Module" }));
var Wy = {};
function u6(e, t) {
  for (var r = 0; r < un.length; r++) {
    var n = un[r], i = t[n], a = e.ensureState(n);
    a.style = a.style || {}, a.style.text = i;
  }
  var o = e.currentStates.slice();
  e.clearStates(!0), e.setStyle({
    text: t.normal
  }), e.useStates(o, !0);
}
function mw(e, t, r) {
  var n = e.labelFetcher, i = e.labelDataIndex, a = e.labelDimIndex, o = t.normal, s;
  n && (s = n.getFormattedLabel(i, "normal", null, a, o && o.get("formatter"), r != null ? {
    interpolatedValue: r
  } : null)), s == null && (s = Ee(e.defaultText) ? e.defaultText(i, e, r) : e.defaultText);
  for (var l = {
    normal: s
  }, u = 0; u < un.length; u++) {
    var c = un[u], f = t[c];
    l[c] = Ge(n ? n.getFormattedLabel(i, c, null, a, f && f.get("formatter")) : null, s);
  }
  return l;
}
function Br(e, t, r, n) {
  r = r || Wy;
  for (var i = e instanceof pt, a = !1, o = 0; o < vh.length; o++) {
    var s = t[vh[o]];
    if (s && s.getShallow("show")) {
      a = !0;
      break;
    }
  }
  var l = i ? e : e.getTextContent();
  if (a) {
    i || (l || (l = new pt(), e.setTextContent(l)), e.stateProxy && (l.stateProxy = e.stateProxy));
    var u = mw(r, t), c = t.normal, f = !!c.getShallow("show"), d = Vt(c, n && n.normal, r, !1, !i);
    d.text = u.normal, i || e.setTextConfig(lm(c, r, !1));
    for (var o = 0; o < un.length; o++) {
      var h = un[o], s = t[h];
      if (s) {
        var p = l.ensureState(h), v = !!Ge(s.getShallow("show"), f);
        if (v !== f && (p.ignore = !v), p.style = Vt(s, n && n[h], r, !0, !i), p.style.text = u[h], !i) {
          var g = e.ensureState(h);
          g.textConfig = lm(s, r, !0);
        }
      }
    }
    l.silent = !!c.getShallow("silent"), l.style.x != null && (d.x = l.style.x), l.style.y != null && (d.y = l.style.y), l.ignore = !f, l.useStyle(d), l.dirty(), r.enableTextSetter && (ff(l).setLabelText = function(m) {
      var y = mw(r, t, m);
      u6(l, y);
    });
  } else l && (l.ignore = !0);
  e.dirty();
}
function Cr(e, t) {
  t = t || "label";
  for (var r = {
    normal: e.getModel(t)
  }, n = 0; n < un.length; n++) {
    var i = un[n];
    r[i] = e.getModel([i, t]);
  }
  return r;
}
function Vt(e, t, r, n, i) {
  var a = {};
  return aie(a, e, r, n, i), t && ae(a, t), a;
}
function lm(e, t, r) {
  t = t || {};
  var n = {}, i, a = e.getShallow("rotate"), o = Ge(e.getShallow("distance"), r ? null : 5), s = e.getShallow("offset");
  return i = e.getShallow("position") || (r ? null : "inside"), i === "outside" && (i = t.defaultOutsidePosition || "top"), i != null && (n.position = i), s != null && (n.offset = s), a != null && (a *= Math.PI / 180, n.rotation = a), o != null && (n.distance = o), n.outsideFill = e.get("color") === "inherit" ? t.inheritColor || null : "auto", n;
}
function aie(e, t, r, n, i) {
  r = r || Wy;
  var a = t.ecModel, o = a && a.option.textStyle, s = oie(t), l;
  if (s) {
    l = {};
    for (var u in s)
      if (s.hasOwnProperty(u)) {
        var c = t.getModel(["rich", u]);
        BD(l[u] = {}, c, o, r, n, i, !1, !0);
      }
  }
  l && (e.rich = l);
  var f = t.get("overflow");
  f && (e.overflow = f);
  var d = t.get("minMargin");
  d != null && (e.margin = d), BD(e, t, o, r, n, i, !0, !1);
}
function oie(e) {
  for (var t; e && e !== e.ecModel; ) {
    var r = (e.option || Wy).rich;
    if (r) {
      t = t || {};
      for (var n = ut(r), i = 0; i < n.length; i++) {
        var a = n[i];
        t[a] = 1;
      }
    }
    e = e.parentModel;
  }
  return t;
}
var zD = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "textShadowColor", "textShadowBlur", "textShadowOffsetX", "textShadowOffsetY"], jD = ["align", "lineHeight", "width", "height", "tag", "verticalAlign", "ellipsis"], VD = ["padding", "borderWidth", "borderRadius", "borderDashOffset", "backgroundColor", "borderColor", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"];
function BD(e, t, r, n, i, a, o, s) {
  r = !i && r || Wy;
  var l = n && n.inheritColor, u = t.getShallow("color"), c = t.getShallow("textBorderColor"), f = Ge(t.getShallow("opacity"), r.opacity);
  (u === "inherit" || u === "auto") && (process.env.NODE_ENV !== "production" && u === "auto" && sr("color: 'auto'", "color: 'inherit'"), l ? u = l : u = null), (c === "inherit" || c === "auto") && (process.env.NODE_ENV !== "production" && c === "auto" && sr("color: 'auto'", "color: 'inherit'"), l ? c = l : c = null), a || (u = u || r.color, c = c || r.textBorderColor), u != null && (e.fill = u), c != null && (e.stroke = c);
  var d = Ge(t.getShallow("textBorderWidth"), r.textBorderWidth);
  d != null && (e.lineWidth = d);
  var h = Ge(t.getShallow("textBorderType"), r.textBorderType);
  h != null && (e.lineDash = h);
  var p = Ge(t.getShallow("textBorderDashOffset"), r.textBorderDashOffset);
  p != null && (e.lineDashOffset = p), !i && f == null && !s && (f = n && n.defaultOpacity), f != null && (e.opacity = f), !i && !a && e.fill == null && n.inheritColor && (e.fill = n.inheritColor);
  for (var v = 0; v < zD.length; v++) {
    var g = zD[v], m = Ge(t.getShallow(g), r[g]);
    m != null && (e[g] = m);
  }
  for (var v = 0; v < jD.length; v++) {
    var g = jD[v], m = t.getShallow(g);
    m != null && (e[g] = m);
  }
  if (e.verticalAlign == null) {
    var y = t.getShallow("baseline");
    y != null && (e.verticalAlign = y);
  }
  if (!o || !n.disableBox) {
    for (var v = 0; v < VD.length; v++) {
      var g = VD[v], m = t.getShallow(g);
      m != null && (e[g] = m);
    }
    var b = t.getShallow("borderType");
    b != null && (e.borderDash = b), (e.backgroundColor === "auto" || e.backgroundColor === "inherit") && l && (process.env.NODE_ENV !== "production" && e.backgroundColor === "auto" && sr("backgroundColor: 'auto'", "backgroundColor: 'inherit'"), e.backgroundColor = l), (e.borderColor === "auto" || e.borderColor === "inherit") && l && (process.env.NODE_ENV !== "production" && e.borderColor === "auto" && sr("borderColor: 'auto'", "borderColor: 'inherit'"), e.borderColor = l);
  }
}
function wC(e, t) {
  var r = t && t.getModel("textStyle");
  return Xn([
    // FIXME in node-canvas fontWeight is before fontStyle
    e.fontStyle || r && r.getShallow("fontStyle") || "",
    e.fontWeight || r && r.getShallow("fontWeight") || "",
    (e.fontSize || r && r.getShallow("fontSize") || 12) + "px",
    e.fontFamily || r && r.getShallow("fontFamily") || "sans-serif"
  ].join(" "));
}
var ff = yt();
function c6(e, t, r, n) {
  if (e) {
    var i = ff(e);
    i.prevValue = i.value, i.value = r;
    var a = t.normal;
    i.valueAnimation = a.get("valueAnimation"), i.valueAnimation && (i.precision = a.get("precision"), i.defaultInterpolatedText = n, i.statesModels = t);
  }
}
function f6(e, t, r, n, i) {
  var a = ff(e);
  if (!a.valueAnimation || a.prevValue === a.value)
    return;
  var o = a.defaultInterpolatedText, s = Ge(a.interpolatedValue, a.prevValue), l = a.value;
  function u(c) {
    var f = A9(r, a.precision, s, l, c);
    a.interpolatedValue = c === 1 ? null : f;
    var d = mw({
      labelDataIndex: t,
      labelFetcher: i,
      defaultText: o ? o(f) : f + ""
    }, a.statesModels, f);
    u6(e, d);
  }
  e.percent = 0, (a.prevValue == null ? Wt : _t)(e, {
    // percent is used to prevent animation from being aborted #15916
    percent: 1
  }, n, t, null, u);
}
var sie = ["textStyle", "color"], U1 = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "padding", "lineHeight", "rich", "width", "height", "overflow"], Y1 = new pt(), lie = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getTextColor = function(t) {
      var r = this.ecModel;
      return this.getShallow("color") || (!t && r ? r.get(sie) : null);
    }, e.prototype.getFont = function() {
      return wC({
        fontStyle: this.getShallow("fontStyle"),
        fontWeight: this.getShallow("fontWeight"),
        fontSize: this.getShallow("fontSize"),
        fontFamily: this.getShallow("fontFamily")
      }, this.ecModel);
    }, e.prototype.getTextRect = function(t) {
      for (var r = {
        text: t,
        verticalAlign: this.getShallow("verticalAlign") || this.getShallow("baseline")
      }, n = 0; n < U1.length; n++)
        r[U1[n]] = this.getShallow(U1[n]);
      return Y1.useStyle(r), Y1.update(), Y1.getBoundingRect();
    }, e;
  }()
), d6 = [
  ["lineWidth", "width"],
  ["stroke", "color"],
  ["opacity"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["shadowColor"],
  ["lineDash", "type"],
  ["lineDashOffset", "dashOffset"],
  ["lineCap", "cap"],
  ["lineJoin", "join"],
  ["miterLimit"]
  // Option decal is in `DecalObject` but style.decal is in `PatternObject`.
  // So do not transfer decal directly.
], uie = zl(d6), cie = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getLineStyle = function(t) {
      return uie(this, t);
    }, e;
  }()
), h6 = [
  ["fill", "color"],
  ["stroke", "borderColor"],
  ["lineWidth", "borderWidth"],
  ["opacity"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["shadowColor"],
  ["lineDash", "borderType"],
  ["lineDashOffset", "borderDashOffset"],
  ["lineCap", "borderCap"],
  ["lineJoin", "borderJoin"],
  ["miterLimit", "borderMiterLimit"]
  // Option decal is in `DecalObject` but style.decal is in `PatternObject`.
  // So do not transfer decal directly.
], fie = zl(h6), die = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getItemStyle = function(t, r) {
      return fie(this, t, r);
    }, e;
  }()
), Tt = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.parentModel = r, this.ecModel = n, this.option = t;
    }
    return e.prototype.init = function(t, r, n) {
    }, e.prototype.mergeOption = function(t, r) {
      Xe(this.option, t, !0);
    }, e.prototype.get = function(t, r) {
      return t == null ? this.option : this._doGet(this.parsePath(t), !r && this.parentModel);
    }, e.prototype.getShallow = function(t, r) {
      var n = this.option, i = n == null ? n : n[t];
      if (i == null && !r) {
        var a = this.parentModel;
        a && (i = a.getShallow(t));
      }
      return i;
    }, e.prototype.getModel = function(t, r) {
      var n = t != null, i = n ? this.parsePath(t) : null, a = n ? this._doGet(i) : this.option;
      return r = r || this.parentModel && this.parentModel.getModel(this.resolveParentPath(i)), new e(a, r, this.ecModel);
    }, e.prototype.isEmpty = function() {
      return this.option == null;
    }, e.prototype.restoreData = function() {
    }, e.prototype.clone = function() {
      var t = this.constructor;
      return new t(ze(this.option));
    }, e.prototype.parsePath = function(t) {
      return typeof t == "string" ? t.split(".") : t;
    }, e.prototype.resolveParentPath = function(t) {
      return t;
    }, e.prototype.isAnimationEnabled = function() {
      if (!st.node && this.option) {
        if (this.option.animation != null)
          return !!this.option.animation;
        if (this.parentModel)
          return this.parentModel.isAnimationEnabled();
      }
    }, e.prototype._doGet = function(t, r) {
      var n = this.option;
      if (!t)
        return n;
      for (var i = 0; i < t.length && !(t[i] && (n = n && typeof n == "object" ? n[t[i]] : null, n == null)); i++)
        ;
      return n == null && r && (n = r._doGet(this.resolveParentPath(t), r.parentModel)), n;
    }, e;
  }()
);
sC(Tt);
Tre(Tt);
ir(Tt, cie);
ir(Tt, die);
ir(Tt, Nre);
ir(Tt, lie);
var hie = Math.round(Math.random() * 10);
function df(e) {
  return [e || "", hie++].join("_");
}
function pie(e) {
  var t = {};
  e.registerSubTypeDefaulter = function(r, n) {
    var i = Ki(r);
    t[i.main] = n;
  }, e.determineSubType = function(r, n) {
    var i = n.type;
    if (!i) {
      var a = Ki(r).main;
      e.hasSubTypes(r) && t[a] && (i = t[a](n));
    }
    return i;
  };
}
function vie(e, t) {
  e.topologicalTravel = function(a, o, s, l) {
    if (!a.length)
      return;
    var u = r(o), c = u.graph, f = u.noEntryList, d = {};
    for (j(a, function(y) {
      d[y] = !0;
    }); f.length; ) {
      var h = f.pop(), p = c[h], v = !!d[h];
      v && (s.call(l, h, p.originalDeps.slice()), delete d[h]), j(p.successor, v ? m : g);
    }
    j(d, function() {
      var y = "";
      throw process.env.NODE_ENV !== "production" && (y = ln("Circular dependency may exists: ", d, a, o)), new Error(y);
    });
    function g(y) {
      c[y].entryCount--, c[y].entryCount === 0 && f.push(y);
    }
    function m(y) {
      d[y] = !0, g(y);
    }
  };
  function r(a) {
    var o = {}, s = [];
    return j(a, function(l) {
      var u = n(o, l), c = u.originalDeps = t(l), f = i(c, a);
      u.entryCount = f.length, u.entryCount === 0 && s.push(l), j(f, function(d) {
        rt(u.predecessor, d) < 0 && u.predecessor.push(d);
        var h = n(o, d);
        rt(h.successor, d) < 0 && h.successor.push(l);
      });
    }), {
      graph: o,
      noEntryList: s
    };
  }
  function n(a, o) {
    return a[o] || (a[o] = {
      predecessor: [],
      successor: []
    }), a[o];
  }
  function i(a, o) {
    var s = [];
    return j(a, function(l) {
      rt(o, l) >= 0 && s.push(l);
    }), s;
  }
}
function ms(e, t) {
  return Xe(Xe({}, e, !0), t, !0);
}
const gie = {
  time: {
    month: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    monthAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    dayOfWeek: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
    dayOfWeekAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
  },
  legend: {
    selector: {
      all: "All",
      inverse: "Inv"
    }
  },
  toolbox: {
    brush: {
      title: {
        rect: "Box Select",
        polygon: "Lasso Select",
        lineX: "Horizontally Select",
        lineY: "Vertically Select",
        keep: "Keep Selections",
        clear: "Clear Selections"
      }
    },
    dataView: {
      title: "Data View",
      lang: ["Data View", "Close", "Refresh"]
    },
    dataZoom: {
      title: {
        zoom: "Zoom",
        back: "Zoom Reset"
      }
    },
    magicType: {
      title: {
        line: "Switch to Line Chart",
        bar: "Switch to Bar Chart",
        stack: "Stack",
        tiled: "Tile"
      }
    },
    restore: {
      title: "Restore"
    },
    saveAsImage: {
      title: "Save as Image",
      lang: ["Right Click to Save Image"]
    }
  },
  series: {
    typeNames: {
      pie: "Pie chart",
      bar: "Bar chart",
      line: "Line chart",
      scatter: "Scatter plot",
      effectScatter: "Ripple scatter plot",
      radar: "Radar chart",
      tree: "Tree",
      treemap: "Treemap",
      boxplot: "Boxplot",
      candlestick: "Candlestick",
      k: "K line chart",
      heatmap: "Heat map",
      map: "Map",
      parallel: "Parallel coordinate map",
      lines: "Line graph",
      graph: "Relationship graph",
      sankey: "Sankey diagram",
      funnel: "Funnel chart",
      gauge: "Gauge",
      pictorialBar: "Pictorial bar",
      themeRiver: "Theme River Map",
      sunburst: "Sunburst",
      custom: "Custom chart",
      chart: "Chart"
    }
  },
  aria: {
    general: {
      withTitle: 'This is a chart about "{title}"',
      withoutTitle: "This is a chart"
    },
    series: {
      single: {
        prefix: "",
        withName: " with type {seriesType} named {seriesName}.",
        withoutName: " with type {seriesType}."
      },
      multiple: {
        prefix: ". It consists of {seriesCount} series count.",
        withName: " The {seriesId} series is a {seriesType} representing {seriesName}.",
        withoutName: " The {seriesId} series is a {seriesType}.",
        separator: {
          middle: "",
          end: ""
        }
      }
    },
    data: {
      allData: "The data is as follows: ",
      partialData: "The first {displayCnt} items are: ",
      withName: "the data for {name} is {value}",
      withoutName: "{value}",
      separator: {
        middle: ", ",
        end: ". "
      }
    }
  }
}, mie = {
  time: {
    month: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
    monthAbbr: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
    dayOfWeek: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
    dayOfWeekAbbr: ["日", "一", "二", "三", "四", "五", "六"]
  },
  legend: {
    selector: {
      all: "全选",
      inverse: "反选"
    }
  },
  toolbox: {
    brush: {
      title: {
        rect: "矩形选择",
        polygon: "圈选",
        lineX: "横向选择",
        lineY: "纵向选择",
        keep: "保持选择",
        clear: "清除选择"
      }
    },
    dataView: {
      title: "数据视图",
      lang: ["数据视图", "关闭", "刷新"]
    },
    dataZoom: {
      title: {
        zoom: "区域缩放",
        back: "区域缩放还原"
      }
    },
    magicType: {
      title: {
        line: "切换为折线图",
        bar: "切换为柱状图",
        stack: "切换为堆叠",
        tiled: "切换为平铺"
      }
    },
    restore: {
      title: "还原"
    },
    saveAsImage: {
      title: "保存为图片",
      lang: ["右键另存为图片"]
    }
  },
  series: {
    typeNames: {
      pie: "饼图",
      bar: "柱状图",
      line: "折线图",
      scatter: "散点图",
      effectScatter: "涟漪散点图",
      radar: "雷达图",
      tree: "树图",
      treemap: "矩形树图",
      boxplot: "箱型图",
      candlestick: "K线图",
      k: "K线图",
      heatmap: "热力图",
      map: "地图",
      parallel: "平行坐标图",
      lines: "线图",
      graph: "关系图",
      sankey: "桑基图",
      funnel: "漏斗图",
      gauge: "仪表盘图",
      pictorialBar: "象形柱图",
      themeRiver: "主题河流图",
      sunburst: "旭日图",
      custom: "自定义图表",
      chart: "图表"
    }
  },
  aria: {
    general: {
      withTitle: "这是一个关于“{title}”的图表。",
      withoutTitle: "这是一个图表，"
    },
    series: {
      single: {
        prefix: "",
        withName: "图表类型是{seriesType}，表示{seriesName}。",
        withoutName: "图表类型是{seriesType}。"
      },
      multiple: {
        prefix: "它由{seriesCount}个图表系列组成。",
        withName: "第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",
        withoutName: "第{seriesId}个系列是一个{seriesType}，",
        separator: {
          middle: "；",
          end: "。"
        }
      }
    },
    data: {
      allData: "其数据是——",
      partialData: "其中，前{displayCnt}项是——",
      withName: "{name}的数据是{value}",
      withoutName: "{value}",
      separator: {
        middle: "，",
        end: ""
      }
    }
  }
};
var um = "ZH", _C = "EN", vc = _C, gg = {}, SC = {}, p6 = st.domSupported ? function() {
  var e = (
    /* eslint-disable-next-line */
    (document.documentElement.lang || navigator.language || navigator.browserLanguage || vc).toUpperCase()
  );
  return e.indexOf(um) > -1 ? um : vc;
}() : vc;
function CC(e, t) {
  e = e.toUpperCase(), SC[e] = new Tt(t), gg[e] = t;
}
function yie(e) {
  if (ge(e)) {
    var t = gg[e.toUpperCase()] || {};
    return e === um || e === _C ? ze(t) : Xe(ze(t), ze(gg[vc]), !1);
  } else
    return Xe(ze(e), ze(gg[vc]), !1);
}
function yw(e) {
  return SC[e];
}
function xie() {
  return SC[vc];
}
CC(_C, gie);
CC(um, mie);
var TC = 1e3, AC = TC * 60, $d = AC * 60, Yn = $d * 24, FD = Yn * 365, bd = {
  year: "{yyyy}",
  month: "{MMM}",
  day: "{d}",
  hour: "{HH}:{mm}",
  minute: "{HH}:{mm}",
  second: "{HH}:{mm}:{ss}",
  millisecond: "{HH}:{mm}:{ss} {SSS}",
  none: "{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"
}, av = "{yyyy}-{MM}-{dd}", $D = {
  year: "{yyyy}",
  month: "{yyyy}-{MM}",
  day: av,
  hour: av + " " + bd.hour,
  minute: av + " " + bd.minute,
  second: av + " " + bd.second,
  millisecond: bd.none
}, Z1 = ["year", "month", "day", "hour", "minute", "second", "millisecond"], v6 = ["year", "half-year", "quarter", "month", "week", "half-week", "day", "half-day", "quarter-day", "hour", "minute", "second", "millisecond"];
function nn(e, t) {
  return e += "", "0000".substr(0, t - e.length) + e;
}
function gc(e) {
  switch (e) {
    case "half-year":
    case "quarter":
      return "month";
    case "week":
    case "half-week":
      return "day";
    case "half-day":
    case "quarter-day":
      return "hour";
    default:
      return e;
  }
}
function bie(e) {
  return e === gc(e);
}
function wie(e) {
  switch (e) {
    case "year":
    case "month":
      return "day";
    case "millisecond":
      return "millisecond";
    default:
      return "second";
  }
}
function op(e, t, r, n) {
  var i = In(e), a = i[MC(r)](), o = i[mc(r)]() + 1, s = Math.floor((o - 1) / 3) + 1, l = i[Uy(r)](), u = i["get" + (r ? "UTC" : "") + "Day"](), c = i[mh(r)](), f = (c - 1) % 12 + 1, d = i[Yy(r)](), h = i[Zy(r)](), p = i[Xy(r)](), v = c >= 12 ? "pm" : "am", g = v.toUpperCase(), m = n instanceof Tt ? n : yw(n || p6) || xie(), y = m.getModel("time"), b = y.get("month"), w = y.get("monthAbbr"), _ = y.get("dayOfWeek"), S = y.get("dayOfWeekAbbr");
  return (t || "").replace(/{a}/g, v + "").replace(/{A}/g, g + "").replace(/{yyyy}/g, a + "").replace(/{yy}/g, nn(a % 100 + "", 2)).replace(/{Q}/g, s + "").replace(/{MMMM}/g, b[o - 1]).replace(/{MMM}/g, w[o - 1]).replace(/{MM}/g, nn(o, 2)).replace(/{M}/g, o + "").replace(/{dd}/g, nn(l, 2)).replace(/{d}/g, l + "").replace(/{eeee}/g, _[u]).replace(/{ee}/g, S[u]).replace(/{e}/g, u + "").replace(/{HH}/g, nn(c, 2)).replace(/{H}/g, c + "").replace(/{hh}/g, nn(f + "", 2)).replace(/{h}/g, f + "").replace(/{mm}/g, nn(d, 2)).replace(/{m}/g, d + "").replace(/{ss}/g, nn(h, 2)).replace(/{s}/g, h + "").replace(/{SSS}/g, nn(p, 3)).replace(/{S}/g, p + "");
}
function _ie(e, t, r, n, i) {
  var a = null;
  if (ge(r))
    a = r;
  else if (Ee(r))
    a = r(e.value, t, {
      level: e.level
    });
  else {
    var o = ae({}, bd);
    if (e.level > 0)
      for (var s = 0; s < Z1.length; ++s)
        o[Z1[s]] = "{primary|" + o[Z1[s]] + "}";
    var l = r ? r.inherit === !1 ? r : Ie(r, o) : o, u = g6(e.value, i);
    if (l[u])
      a = l[u];
    else if (l.inherit) {
      for (var c = v6.indexOf(u), s = c - 1; s >= 0; --s)
        if (l[u]) {
          a = l[u];
          break;
        }
      a = a || o.none;
    }
    if (le(a)) {
      var f = e.level == null ? 0 : e.level >= 0 ? e.level : a.length + e.level;
      f = Math.min(f, a.length - 1), a = a[f];
    }
  }
  return op(new Date(e.value), a, i, n);
}
function g6(e, t) {
  var r = In(e), n = r[mc(t)]() + 1, i = r[Uy(t)](), a = r[mh(t)](), o = r[Yy(t)](), s = r[Zy(t)](), l = r[Xy(t)](), u = l === 0, c = u && s === 0, f = c && o === 0, d = f && a === 0, h = d && i === 1, p = h && n === 1;
  return p ? "year" : h ? "month" : d ? "day" : f ? "hour" : c ? "minute" : u ? "second" : "millisecond";
}
function HD(e, t, r) {
  var n = bt(e) ? In(e) : e;
  switch (t = t || g6(e, r), t) {
    case "year":
      return n[MC(r)]();
    case "half-year":
      return n[mc(r)]() >= 6 ? 1 : 0;
    case "quarter":
      return Math.floor((n[mc(r)]() + 1) / 4);
    case "month":
      return n[mc(r)]();
    case "day":
      return n[Uy(r)]();
    case "half-day":
      return n[mh(r)]() / 24;
    case "hour":
      return n[mh(r)]();
    case "minute":
      return n[Yy(r)]();
    case "second":
      return n[Zy(r)]();
    case "millisecond":
      return n[Xy(r)]();
  }
}
function MC(e) {
  return e ? "getUTCFullYear" : "getFullYear";
}
function mc(e) {
  return e ? "getUTCMonth" : "getMonth";
}
function Uy(e) {
  return e ? "getUTCDate" : "getDate";
}
function mh(e) {
  return e ? "getUTCHours" : "getHours";
}
function Yy(e) {
  return e ? "getUTCMinutes" : "getMinutes";
}
function Zy(e) {
  return e ? "getUTCSeconds" : "getSeconds";
}
function Xy(e) {
  return e ? "getUTCMilliseconds" : "getMilliseconds";
}
function Sie(e) {
  return e ? "setUTCFullYear" : "setFullYear";
}
function m6(e) {
  return e ? "setUTCMonth" : "setMonth";
}
function y6(e) {
  return e ? "setUTCDate" : "setDate";
}
function x6(e) {
  return e ? "setUTCHours" : "setHours";
}
function b6(e) {
  return e ? "setUTCMinutes" : "setMinutes";
}
function w6(e) {
  return e ? "setUTCSeconds" : "setSeconds";
}
function _6(e) {
  return e ? "setUTCMilliseconds" : "setMilliseconds";
}
function Cie(e, t, r, n, i, a, o, s) {
  var l = new pt({
    style: {
      text: e,
      font: t,
      align: r,
      verticalAlign: n,
      padding: i,
      rich: a,
      overflow: o ? "truncate" : null,
      lineHeight: s
    }
  });
  return l.getBoundingRect();
}
function EC(e) {
  if (!Py(e))
    return ge(e) ? e : "-";
  var t = (e + "").split(".");
  return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, "$1,") + (t.length > 1 ? "." + t[1] : "");
}
function DC(e, t) {
  return e = (e || "").toLowerCase().replace(/-(.)/g, function(r, n) {
    return n.toUpperCase();
  }), t && e && (e = e.charAt(0).toUpperCase() + e.slice(1)), e;
}
var Xl = Ey;
function xw(e, t, r) {
  var n = "{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";
  function i(c) {
    return c && Xn(c) ? c : "-";
  }
  function a(c) {
    return !!(c != null && !isNaN(c) && isFinite(c));
  }
  var o = t === "time", s = e instanceof Date;
  if (o || s) {
    var l = o ? In(e) : e;
    if (isNaN(+l)) {
      if (s)
        return "-";
    } else return op(l, n, r);
  }
  if (t === "ordinal")
    return sh(e) ? i(e) : bt(e) && a(e) ? e + "" : "-";
  var u = ua(e);
  return a(u) ? EC(u) : sh(e) ? i(e) : typeof e == "boolean" ? e + "" : "-";
}
var GD = ["a", "b", "c", "d", "e", "f", "g"], X1 = function(e, t) {
  return "{" + e + (t ?? "") + "}";
};
function NC(e, t, r) {
  le(t) || (t = [t]);
  var n = t.length;
  if (!n)
    return "";
  for (var i = t[0].$vars || [], a = 0; a < i.length; a++) {
    var o = GD[a];
    e = e.replace(X1(o), X1(o, 0));
  }
  for (var s = 0; s < n; s++)
    for (var l = 0; l < i.length; l++) {
      var u = t[s][i[l]];
      e = e.replace(X1(GD[l], s), r ? Zr(u) : u);
    }
  return e;
}
function Tie(e, t, r) {
  return j(t, function(n, i) {
    e = e.replace("{" + i + "}", n);
  }), e;
}
function S6(e, t) {
  var r = ge(e) ? {
    color: e,
    extraCssText: t
  } : e || {}, n = r.color, i = r.type;
  t = r.extraCssText;
  var a = r.renderMode || "html";
  if (!n)
    return "";
  if (a === "html")
    return i === "subItem" ? '<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:' + Zr(n) + ";" + (t || "") + '"></span>' : '<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:' + Zr(n) + ";" + (t || "") + '"></span>';
  var o = r.markerId || "markerX";
  return {
    renderMode: a,
    content: "{" + o + "|}  ",
    style: i === "subItem" ? {
      width: 4,
      height: 4,
      borderRadius: 2,
      backgroundColor: n
    } : {
      width: 10,
      height: 10,
      borderRadius: 5,
      backgroundColor: n
    }
  };
}
function Aie(e, t, r) {
  process.env.NODE_ENV !== "production" && sr("echarts.format.formatTime", "echarts.time.format"), (e === "week" || e === "month" || e === "quarter" || e === "half-year" || e === "year") && (e = `MM-dd
yyyy`);
  var n = In(t), i = r ? "getUTC" : "get", a = n[i + "FullYear"](), o = n[i + "Month"]() + 1, s = n[i + "Date"](), l = n[i + "Hours"](), u = n[i + "Minutes"](), c = n[i + "Seconds"](), f = n[i + "Milliseconds"]();
  return e = e.replace("MM", nn(o, 2)).replace("M", o).replace("yyyy", a).replace("yy", nn(a % 100 + "", 2)).replace("dd", nn(s, 2)).replace("d", s).replace("hh", nn(l, 2)).replace("h", l).replace("mm", nn(u, 2)).replace("m", u).replace("ss", nn(c, 2)).replace("s", c).replace("SSS", nn(f, 3)), e;
}
function Mie(e) {
  return e && e.charAt(0).toUpperCase() + e.substr(1);
}
function Vl(e, t) {
  return t = t || "transparent", ge(e) ? e : Ne(e) && e.colorStops && (e.colorStops[0] || {}).color || t;
}
function cm(e, t) {
  if (t === "_blank" || t === "blank") {
    var r = window.open();
    r.opener = null, r.location.href = e;
  } else
    window.open(e, t);
}
var mg = j, C6 = ["left", "right", "top", "bottom", "width", "height"], hl = [["width", "left", "right"], ["height", "top", "bottom"]];
function IC(e, t, r, n, i) {
  var a = 0, o = 0;
  n == null && (n = 1 / 0), i == null && (i = 1 / 0);
  var s = 0;
  t.eachChild(function(l, u) {
    var c = l.getBoundingRect(), f = t.childAt(u + 1), d = f && f.getBoundingRect(), h, p;
    if (e === "horizontal") {
      var v = c.width + (d ? -d.x + c.x : 0);
      h = a + v, h > n || l.newline ? (a = 0, h = v, o += s + r, s = c.height) : s = Math.max(s, c.height);
    } else {
      var g = c.height + (d ? -d.y + c.y : 0);
      p = o + g, p > i || l.newline ? (a += s + r, o = 0, p = g, s = c.width) : s = Math.max(s, c.width);
    }
    l.newline || (l.x = a, l.y = o, l.markRedraw(), e === "horizontal" ? a = h + r : o = p + r);
  });
}
var Al = IC;
We(IC, "vertical");
We(IC, "horizontal");
function Eie(e, t, r) {
  var n = t.width, i = t.height, a = pe(e.left, n), o = pe(e.top, i), s = pe(e.right, n), l = pe(e.bottom, i);
  return (isNaN(a) || isNaN(parseFloat(e.left))) && (a = 0), (isNaN(s) || isNaN(parseFloat(e.right))) && (s = n), (isNaN(o) || isNaN(parseFloat(e.top))) && (o = 0), (isNaN(l) || isNaN(parseFloat(e.bottom))) && (l = i), r = Xl(r || 0), {
    width: Math.max(s - a - r[1] - r[3], 0),
    height: Math.max(l - o - r[0] - r[2], 0)
  };
}
function vr(e, t, r) {
  r = Xl(r || 0);
  var n = t.width, i = t.height, a = pe(e.left, n), o = pe(e.top, i), s = pe(e.right, n), l = pe(e.bottom, i), u = pe(e.width, n), c = pe(e.height, i), f = r[2] + r[0], d = r[1] + r[3], h = e.aspect;
  switch (isNaN(u) && (u = n - s - d - a), isNaN(c) && (c = i - l - f - o), h != null && (isNaN(u) && isNaN(c) && (h > n / i ? u = n * 0.8 : c = i * 0.8), isNaN(u) && (u = h * c), isNaN(c) && (c = u / h)), isNaN(a) && (a = n - s - u - d), isNaN(o) && (o = i - l - c - f), e.left || e.right) {
    case "center":
      a = n / 2 - u / 2 - r[3];
      break;
    case "right":
      a = n - u - d;
      break;
  }
  switch (e.top || e.bottom) {
    case "middle":
    case "center":
      o = i / 2 - c / 2 - r[0];
      break;
    case "bottom":
      o = i - c - f;
      break;
  }
  a = a || 0, o = o || 0, isNaN(u) && (u = n - d - a - (s || 0)), isNaN(c) && (c = i - f - o - (l || 0));
  var p = new tt(a + r[3], o + r[0], u, c);
  return p.margin = r, p;
}
function Ky(e, t, r, n, i, a) {
  var o = !i || !i.hv || i.hv[0], s = !i || !i.hv || i.hv[1], l = i && i.boundingMode || "all";
  if (a = a || e, a.x = e.x, a.y = e.y, !o && !s)
    return !1;
  var u;
  if (l === "raw")
    u = e.type === "group" ? new tt(0, 0, +t.width || 0, +t.height || 0) : e.getBoundingRect();
  else if (u = e.getBoundingRect(), e.needLocalTransform()) {
    var c = e.getLocalTransform();
    u = u.clone(), u.applyTransform(c);
  }
  var f = vr(Ie({
    width: u.width,
    height: u.height
  }, t), r, n), d = o ? f.x - u.x : 0, h = s ? f.y - u.y : 0;
  return l === "raw" ? (a.x = d, a.y = h) : (a.x += d, a.y += h), a === e && e.markRedraw(), !0;
}
function Die(e, t) {
  return e[hl[t][0]] != null || e[hl[t][1]] != null && e[hl[t][2]] != null;
}
function yh(e) {
  var t = e.layoutMode || e.constructor.layoutMode;
  return Ne(t) ? t : t ? {
    type: t
  } : null;
}
function us(e, t, r) {
  var n = r && r.ignoreSize;
  !le(n) && (n = [n, n]);
  var i = o(hl[0], 0), a = o(hl[1], 1);
  u(hl[0], e, i), u(hl[1], e, a);
  function o(c, f) {
    var d = {}, h = 0, p = {}, v = 0, g = 2;
    if (mg(c, function(b) {
      p[b] = e[b];
    }), mg(c, function(b) {
      s(t, b) && (d[b] = p[b] = t[b]), l(d, b) && h++, l(p, b) && v++;
    }), n[f])
      return l(t, c[1]) ? p[c[2]] = null : l(t, c[2]) && (p[c[1]] = null), p;
    if (v === g || !h)
      return p;
    if (h >= g)
      return d;
    for (var m = 0; m < c.length; m++) {
      var y = c[m];
      if (!s(d, y) && s(e, y)) {
        d[y] = e[y];
        break;
      }
    }
    return d;
  }
  function s(c, f) {
    return c.hasOwnProperty(f);
  }
  function l(c, f) {
    return c[f] != null && c[f] !== "auto";
  }
  function u(c, f, d) {
    mg(c, function(h) {
      f[h] = d[h];
    });
  }
}
function hf(e) {
  return T6({}, e);
}
function T6(e, t) {
  return t && e && mg(C6, function(r) {
    t.hasOwnProperty(r) && (e[r] = t[r]);
  }), e;
}
var Nie = yt(), at = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this, r, n, i) || this;
      return a.uid = df("ec_cpt_model"), a;
    }
    return t.prototype.init = function(r, n, i) {
      this.mergeDefaultAndTheme(r, i);
    }, t.prototype.mergeDefaultAndTheme = function(r, n) {
      var i = yh(this), a = i ? hf(r) : {}, o = n.getTheme();
      Xe(r, o.get(this.mainType)), Xe(r, this.getDefaultOption()), i && us(r, a, i);
    }, t.prototype.mergeOption = function(r, n) {
      Xe(this.option, r, !0);
      var i = yh(this);
      i && us(this.option, r, i);
    }, t.prototype.optionUpdated = function(r, n) {
    }, t.prototype.getDefaultOption = function() {
      var r = this.constructor;
      if (!_re(r))
        return r.defaultOption;
      var n = Nie(this);
      if (!n.defaultOption) {
        for (var i = [], a = r; a; ) {
          var o = a.prototype.defaultOption;
          o && i.push(o), a = a.superClass;
        }
        for (var s = {}, l = i.length - 1; l >= 0; l--)
          s = Xe(s, i[l], !0);
        n.defaultOption = s;
      }
      return n.defaultOption;
    }, t.prototype.getReferringComponents = function(r, n) {
      var i = r + "Index", a = r + "Id";
      return ep(this.ecModel, r, {
        index: this.get(i, !0),
        id: this.get(a, !0)
      }, n);
    }, t.prototype.getBoxLayoutParams = function() {
      var r = this;
      return {
        left: r.get("left"),
        top: r.get("top"),
        right: r.get("right"),
        bottom: r.get("bottom"),
        width: r.get("width"),
        height: r.get("height")
      };
    }, t.prototype.getZLevelKey = function() {
      return "";
    }, t.prototype.setZLevel = function(r) {
      this.option.zlevel = r;
    }, t.protoInitialize = function() {
      var r = t.prototype;
      r.type = "component", r.id = "", r.name = "", r.mainType = "", r.subType = "", r.componentIndex = 0;
    }(), t;
  }(Tt)
);
E9(at, Tt);
Oy(at);
pie(at);
vie(at, Iie);
function Iie(e) {
  var t = [];
  return j(at.getClassesByMainType(e), function(r) {
    t = t.concat(r.dependencies || r.prototype.dependencies || []);
  }), t = ue(t, function(r) {
    return Ki(r).main;
  }), e !== "dataset" && rt(t, "dataset") <= 0 && t.unshift("dataset"), t;
}
var A6 = "";
typeof navigator < "u" && (A6 = navigator.platform || "");
var _u = "rgba(0, 0, 0, 0.2)";
const Lie = {
  darkMode: "auto",
  // backgroundColor: 'rgba(0,0,0,0)',
  colorBy: "series",
  color: ["#5470c6", "#91cc75", "#fac858", "#ee6666", "#73c0de", "#3ba272", "#fc8452", "#9a60b4", "#ea7ccc"],
  gradientColor: ["#f6efa6", "#d88273", "#bf444c"],
  aria: {
    decal: {
      decals: [{
        color: _u,
        dashArrayX: [1, 0],
        dashArrayY: [2, 5],
        symbolSize: 1,
        rotation: Math.PI / 6
      }, {
        color: _u,
        symbol: "circle",
        dashArrayX: [[8, 8], [0, 8, 8, 0]],
        dashArrayY: [6, 0],
        symbolSize: 0.8
      }, {
        color: _u,
        dashArrayX: [1, 0],
        dashArrayY: [4, 3],
        rotation: -Math.PI / 4
      }, {
        color: _u,
        dashArrayX: [[6, 6], [0, 6, 6, 0]],
        dashArrayY: [6, 0]
      }, {
        color: _u,
        dashArrayX: [[1, 0], [1, 6]],
        dashArrayY: [1, 0, 6, 0],
        rotation: Math.PI / 4
      }, {
        color: _u,
        symbol: "triangle",
        dashArrayX: [[9, 9], [0, 9, 9, 0]],
        dashArrayY: [7, 2],
        symbolSize: 0.75
      }]
    }
  },
  // If xAxis and yAxis declared, grid is created by default.
  // grid: {},
  textStyle: {
    // color: '#000',
    // decoration: 'none',
    // PENDING
    fontFamily: A6.match(/^Win/) ? "Microsoft YaHei" : "sans-serif",
    // fontFamily: 'Arial, Verdana, sans-serif',
    fontSize: 12,
    fontStyle: "normal",
    fontWeight: "normal"
  },
  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/
  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation
  // Default is source-over
  blendMode: null,
  stateAnimation: {
    duration: 300,
    easing: "cubicOut"
  },
  animation: "auto",
  animationDuration: 1e3,
  animationDurationUpdate: 500,
  animationEasing: "cubicInOut",
  animationEasingUpdate: "cubicInOut",
  animationThreshold: 2e3,
  // Configuration for progressive/incremental rendering
  progressiveThreshold: 3e3,
  progressive: 400,
  // Threshold of if use single hover layer to optimize.
  // It is recommended that `hoverLayerThreshold` is equivalent to or less than
  // `progressiveThreshold`, otherwise hover will cause restart of progressive,
  // which is unexpected.
  // see example <echarts/test/heatmap-large.html>.
  hoverLayerThreshold: 3e3,
  // See: module:echarts/scale/Time
  useUTC: !1
};
var bw = Ce(["tooltip", "label", "itemName", "itemId", "itemGroupId", "itemChildGroupId", "seriesName"]), si = "original", Qr = "arrayRows", li = "objectRows", ha = "keyedColumns", $a = "typedArray", M6 = "unknown", ia = "column", pf = "row", Pr = {
  Must: 1,
  Might: 2,
  Not: 3
  // Other cases
}, E6 = yt();
function Rie(e) {
  E6(e).datasetMap = Ce();
}
function D6(e, t, r) {
  var n = {}, i = RC(t);
  if (!i || !e)
    return n;
  var a = [], o = [], s = t.ecModel, l = E6(s).datasetMap, u = i.uid + "_" + r.seriesLayoutBy, c, f;
  e = e.slice(), j(e, function(v, g) {
    var m = Ne(v) ? v : e[g] = {
      name: v
    };
    m.type === "ordinal" && c == null && (c = g, f = p(m)), n[m.name] = [];
  });
  var d = l.get(u) || l.set(u, {
    categoryWayDim: f,
    valueWayDim: 0
  });
  j(e, function(v, g) {
    var m = v.name, y = p(v);
    if (c == null) {
      var b = d.valueWayDim;
      h(n[m], b, y), h(o, b, y), d.valueWayDim += y;
    } else if (c === g)
      h(n[m], 0, y), h(a, 0, y);
    else {
      var b = d.categoryWayDim;
      h(n[m], b, y), h(o, b, y), d.categoryWayDim += y;
    }
  });
  function h(v, g, m) {
    for (var y = 0; y < m; y++)
      v.push(g + y);
  }
  function p(v) {
    var g = v.dimsDef;
    return g ? g.length : 1;
  }
  return a.length && (n.itemName = a), o.length && (n.seriesName = o), n;
}
function LC(e, t, r) {
  var n = {}, i = RC(e);
  if (!i)
    return n;
  var a = t.sourceFormat, o = t.dimensionsDefine, s;
  (a === li || a === ha) && j(o, function(c, f) {
    (Ne(c) ? c.name : c) === "name" && (s = f);
  });
  var l = function() {
    for (var c = {}, f = {}, d = [], h = 0, p = Math.min(5, r); h < p; h++) {
      var v = I6(t.data, a, t.seriesLayoutBy, o, t.startIndex, h);
      d.push(v);
      var g = v === Pr.Not;
      if (g && c.v == null && h !== s && (c.v = h), (c.n == null || c.n === c.v || !g && d[c.n] === Pr.Not) && (c.n = h), m(c) && d[c.n] !== Pr.Not)
        return c;
      g || (v === Pr.Might && f.v == null && h !== s && (f.v = h), (f.n == null || f.n === f.v) && (f.n = h));
    }
    function m(y) {
      return y.v != null && y.n != null;
    }
    return m(c) ? c : m(f) ? f : null;
  }();
  if (l) {
    n.value = [l.v];
    var u = s ?? l.n;
    n.itemName = [u], n.seriesName = [u];
  }
  return n;
}
function RC(e) {
  var t = e.get("data", !0);
  if (!t)
    return ep(e.ecModel, "dataset", {
      index: e.get("datasetIndex", !0),
      id: e.get("datasetId", !0)
    }, pr).models[0];
}
function Pie(e) {
  return !e.get("transform", !0) && !e.get("fromTransformResult", !0) ? [] : ep(e.ecModel, "dataset", {
    index: e.get("fromDatasetIndex", !0),
    id: e.get("fromDatasetId", !0)
  }, pr).models;
}
function N6(e, t) {
  return I6(e.data, e.sourceFormat, e.seriesLayoutBy, e.dimensionsDefine, e.startIndex, t);
}
function I6(e, t, r, n, i, a) {
  var o, s = 5;
  if (Kr(e))
    return Pr.Not;
  var l, u;
  if (n) {
    var c = n[a];
    Ne(c) ? (l = c.name, u = c.type) : ge(c) && (l = c);
  }
  if (u != null)
    return u === "ordinal" ? Pr.Must : Pr.Not;
  if (t === Qr) {
    var f = e;
    if (r === pf) {
      for (var d = f[a], h = 0; h < (d || []).length && h < s; h++)
        if ((o = w(d[i + h])) != null)
          return o;
    } else
      for (var h = 0; h < f.length && h < s; h++) {
        var p = f[i + h];
        if (p && (o = w(p[a])) != null)
          return o;
      }
  } else if (t === li) {
    var v = e;
    if (!l)
      return Pr.Not;
    for (var h = 0; h < v.length && h < s; h++) {
      var g = v[h];
      if (g && (o = w(g[l])) != null)
        return o;
    }
  } else if (t === ha) {
    var m = e;
    if (!l)
      return Pr.Not;
    var d = m[l];
    if (!d || Kr(d))
      return Pr.Not;
    for (var h = 0; h < d.length && h < s; h++)
      if ((o = w(d[h])) != null)
        return o;
  } else if (t === si)
    for (var y = e, h = 0; h < y.length && h < s; h++) {
      var g = y[h], b = nf(g);
      if (!le(b))
        return Pr.Not;
      if ((o = w(b[a])) != null)
        return o;
    }
  function w(_) {
    var S = ge(_);
    if (_ != null && Number.isFinite(Number(_)) && _ !== "")
      return S ? Pr.Might : Pr.Not;
    if (S && _ !== "-")
      return Pr.Must;
  }
  return Pr.Not;
}
var ww = Ce();
function kie(e, t) {
  Le(ww.get(e) == null && t), ww.set(e, t);
}
function Oie(e, t, r) {
  var n = ww.get(t);
  if (!n)
    return r;
  var i = n(e);
  if (!i)
    return r;
  if (process.env.NODE_ENV !== "production")
    for (var a = 0; a < i.length; a++)
      Le(Lc(i[a]));
  return r.concat(i);
}
var WD = yt(), zie = yt(), PC = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getColorFromPalette = function(t, r, n) {
      var i = Ot(this.get("color", !0)), a = this.get("colorLayer", !0);
      return L6(this, WD, i, a, t, r, n);
    }, e.prototype.clearColorPalette = function() {
      Vie(this, WD);
    }, e;
  }()
);
function _w(e, t, r, n) {
  var i = Ot(e.get(["aria", "decal", "decals"]));
  return L6(e, zie, i, null, t, r, n);
}
function jie(e, t) {
  for (var r = e.length, n = 0; n < r; n++)
    if (e[n].length > t)
      return e[n];
  return e[r - 1];
}
function L6(e, t, r, n, i, a, o) {
  a = a || e;
  var s = t(a), l = s.paletteIdx || 0, u = s.paletteNameMap = s.paletteNameMap || {};
  if (u.hasOwnProperty(i))
    return u[i];
  var c = o == null || !n ? r : jie(n, o);
  if (c = c || r, !(!c || !c.length)) {
    var f = c[l];
    return i && (u[i] = f), s.paletteIdx = (l + 1) % c.length, f;
  }
}
function Vie(e, t) {
  t(e).paletteIdx = 0, t(e).paletteNameMap = {};
}
var ov, Vf, UD, K1 = "\0_ec_inner", YD = 1, Bie = {
  grid: "GridComponent",
  polar: "PolarComponent",
  geo: "GeoComponent",
  singleAxis: "SingleAxisComponent",
  parallel: "ParallelComponent",
  calendar: "CalendarComponent",
  graphic: "GraphicComponent",
  toolbox: "ToolboxComponent",
  tooltip: "TooltipComponent",
  axisPointer: "AxisPointerComponent",
  brush: "BrushComponent",
  title: "TitleComponent",
  timeline: "TimelineComponent",
  markPoint: "MarkPointComponent",
  markLine: "MarkLineComponent",
  markArea: "MarkAreaComponent",
  legend: "LegendComponent",
  dataZoom: "DataZoomComponent",
  visualMap: "VisualMapComponent",
  // aria: 'AriaComponent',
  // dataset: 'DatasetComponent',
  // Dependencies
  xAxis: "GridComponent",
  yAxis: "GridComponent",
  angleAxis: "PolarComponent",
  radiusAxis: "PolarComponent"
}, Fie = {
  line: "LineChart",
  bar: "BarChart",
  pie: "PieChart",
  scatter: "ScatterChart",
  radar: "RadarChart",
  map: "MapChart",
  tree: "TreeChart",
  treemap: "TreemapChart",
  graph: "GraphChart",
  gauge: "GaugeChart",
  funnel: "FunnelChart",
  parallel: "ParallelChart",
  sankey: "SankeyChart",
  boxplot: "BoxplotChart",
  candlestick: "CandlestickChart",
  effectScatter: "EffectScatterChart",
  lines: "LinesChart",
  heatmap: "HeatmapChart",
  pictorialBar: "PictorialBarChart",
  themeRiver: "ThemeRiverChart",
  sunburst: "SunburstChart",
  custom: "CustomChart"
}, fm = {};
function $ie(e) {
  j(e, function(t, r) {
    if (!at.hasClass(r)) {
      var n = Bie[r];
      n && !fm[n] && (jr("Component " + r + ` is used but not imported.
import { ` + n + ` } from 'echarts/components';
echarts.use([` + n + "]);"), fm[n] = !0);
    }
  });
}
var kC = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.init = function(r, n, i, a, o, s) {
      a = a || {}, this.option = null, this._theme = new Tt(a), this._locale = new Tt(o), this._optionManager = s;
    }, t.prototype.setOption = function(r, n, i) {
      process.env.NODE_ENV !== "production" && (Le(r != null, "option is null/undefined"), Le(r[K1] !== YD, "please use chart.getOption()"));
      var a = KD(n);
      this._optionManager.setOption(r, i, a), this._resetOption(null, a);
    }, t.prototype.resetOption = function(r, n) {
      return this._resetOption(r, KD(n));
    }, t.prototype._resetOption = function(r, n) {
      var i = !1, a = this._optionManager;
      if (!r || r === "recreate") {
        var o = a.mountOption(r === "recreate");
        process.env.NODE_ENV !== "production" && $ie(o), !this.option || r === "recreate" ? UD(this, o) : (this.restoreData(), this._mergeOption(o, n)), i = !0;
      }
      if ((r === "timeline" || r === "media") && this.restoreData(), !r || r === "recreate" || r === "timeline") {
        var s = a.getTimelineOption(this);
        s && (i = !0, this._mergeOption(s, n));
      }
      if (!r || r === "recreate" || r === "media") {
        var l = a.getMediaOption(this);
        l.length && j(l, function(u) {
          i = !0, this._mergeOption(u, n);
        }, this);
      }
      return i;
    }, t.prototype.mergeOption = function(r) {
      this._mergeOption(r, null);
    }, t.prototype._mergeOption = function(r, n) {
      var i = this.option, a = this._componentsMap, o = this._componentsCount, s = [], l = Ce(), u = n && n.replaceMergeMainTypeMap;
      Rie(this), j(r, function(f, d) {
        f != null && (at.hasClass(d) ? d && (s.push(d), l.set(d, !0)) : i[d] = i[d] == null ? ze(f) : Xe(i[d], f, !0));
      }), u && u.each(function(f, d) {
        at.hasClass(d) && !l.get(d) && (s.push(d), l.set(d, !0));
      }), at.topologicalTravel(s, at.getAllClassMainTypes(), c, this);
      function c(f) {
        var d = Oie(this, f, Ot(r[f])), h = a.get(f), p = (
          // `!oldCmptList` means init. See the comment in `mappingToExists`
          h ? u && u.get(f) ? "replaceMerge" : "normalMerge" : "replaceAll"
        ), v = S9(h, d, p);
        hre(v, f, at), i[f] = null, a.set(f, null), o.set(f, 0);
        var g = [], m = [], y = 0, b, w;
        j(v, function(_, S) {
          var C = _.existing, A = _.newOption;
          if (!A)
            C && (C.mergeOption({}, this), C.optionUpdated({}, !1));
          else {
            var M = f === "series", D = at.getClass(
              f,
              _.keyInfo.subType,
              !M
              // Give a more detailed warn later if series don't exists
            );
            if (!D) {
              if (process.env.NODE_ENV !== "production") {
                var N = _.keyInfo.subType, R = Fie[N];
                fm[N] || (fm[N] = !0, jr(R ? "Series " + N + ` is used but not imported.
import { ` + R + ` } from 'echarts/charts';
echarts.use([` + R + "]);" : "Unknown series " + N));
              }
              return;
            }
            if (f === "tooltip") {
              if (b) {
                process.env.NODE_ENV !== "production" && (w || (qt("Currently only one tooltip component is allowed."), w = !0));
                return;
              }
              b = !0;
            }
            if (C && C.constructor === D)
              C.name = _.keyInfo.name, C.mergeOption(A, this), C.optionUpdated(A, !1);
            else {
              var O = ae({
                componentIndex: S
              }, _.keyInfo);
              C = new D(A, this, this, O), ae(C, O), _.brandNew && (C.__requireNewView = !0), C.init(A, this, this), C.optionUpdated(null, !0);
            }
          }
          C ? (g.push(C.option), m.push(C), y++) : (g.push(void 0), m.push(void 0));
        }, this), i[f] = g, a.set(f, m), o.set(f, y), f === "series" && ov(this);
      }
      this._seriesIndices || ov(this);
    }, t.prototype.getOption = function() {
      var r = ze(this.option);
      return j(r, function(n, i) {
        if (at.hasClass(i)) {
          for (var a = Ot(n), o = a.length, s = !1, l = o - 1; l >= 0; l--)
            a[l] && !Lc(a[l]) ? s = !0 : (a[l] = null, !s && o--);
          a.length = o, r[i] = a;
        }
      }), delete r[K1], r;
    }, t.prototype.getTheme = function() {
      return this._theme;
    }, t.prototype.getLocaleModel = function() {
      return this._locale;
    }, t.prototype.setUpdatePayload = function(r) {
      this._payload = r;
    }, t.prototype.getUpdatePayload = function() {
      return this._payload;
    }, t.prototype.getComponent = function(r, n) {
      var i = this._componentsMap.get(r);
      if (i) {
        var a = i[n || 0];
        if (a)
          return a;
        if (n == null) {
          for (var o = 0; o < i.length; o++)
            if (i[o])
              return i[o];
        }
      }
    }, t.prototype.queryComponents = function(r) {
      var n = r.mainType;
      if (!n)
        return [];
      var i = r.index, a = r.id, o = r.name, s = this._componentsMap.get(n);
      if (!s || !s.length)
        return [];
      var l;
      return i != null ? (l = [], j(Ot(i), function(u) {
        s[u] && l.push(s[u]);
      })) : a != null ? l = ZD("id", a, s) : o != null ? l = ZD("name", o, s) : l = Ct(s, function(u) {
        return !!u;
      }), XD(l, r);
    }, t.prototype.findComponents = function(r) {
      var n = r.query, i = r.mainType, a = s(n), o = a ? this.queryComponents(a) : Ct(this._componentsMap.get(i), function(u) {
        return !!u;
      });
      return l(XD(o, r));
      function s(u) {
        var c = i + "Index", f = i + "Id", d = i + "Name";
        return u && (u[c] != null || u[f] != null || u[d] != null) ? {
          mainType: i,
          // subType will be filtered finally.
          index: u[c],
          id: u[f],
          name: u[d]
        } : null;
      }
      function l(u) {
        return r.filter ? Ct(u, r.filter) : u;
      }
    }, t.prototype.eachComponent = function(r, n, i) {
      var a = this._componentsMap;
      if (Ee(r)) {
        var o = n, s = r;
        a.each(function(f, d) {
          for (var h = 0; f && h < f.length; h++) {
            var p = f[h];
            p && s.call(o, d, p, p.componentIndex);
          }
        });
      } else
        for (var l = ge(r) ? a.get(r) : Ne(r) ? this.findComponents(r) : null, u = 0; l && u < l.length; u++) {
          var c = l[u];
          c && n.call(i, c, c.componentIndex);
        }
    }, t.prototype.getSeriesByName = function(r) {
      var n = yr(r, null);
      return Ct(this._componentsMap.get("series"), function(i) {
        return !!i && n != null && i.name === n;
      });
    }, t.prototype.getSeriesByIndex = function(r) {
      return this._componentsMap.get("series")[r];
    }, t.prototype.getSeriesByType = function(r) {
      return Ct(this._componentsMap.get("series"), function(n) {
        return !!n && n.subType === r;
      });
    }, t.prototype.getSeries = function() {
      return Ct(this._componentsMap.get("series"), function(r) {
        return !!r;
      });
    }, t.prototype.getSeriesCount = function() {
      return this._componentsCount.get("series");
    }, t.prototype.eachSeries = function(r, n) {
      Vf(this), j(this._seriesIndices, function(i) {
        var a = this._componentsMap.get("series")[i];
        r.call(n, a, i);
      }, this);
    }, t.prototype.eachRawSeries = function(r, n) {
      j(this._componentsMap.get("series"), function(i) {
        i && r.call(n, i, i.componentIndex);
      });
    }, t.prototype.eachSeriesByType = function(r, n, i) {
      Vf(this), j(this._seriesIndices, function(a) {
        var o = this._componentsMap.get("series")[a];
        o.subType === r && n.call(i, o, a);
      }, this);
    }, t.prototype.eachRawSeriesByType = function(r, n, i) {
      return j(this.getSeriesByType(r), n, i);
    }, t.prototype.isSeriesFiltered = function(r) {
      return Vf(this), this._seriesIndicesMap.get(r.componentIndex) == null;
    }, t.prototype.getCurrentSeriesIndices = function() {
      return (this._seriesIndices || []).slice();
    }, t.prototype.filterSeries = function(r, n) {
      Vf(this);
      var i = [];
      j(this._seriesIndices, function(a) {
        var o = this._componentsMap.get("series")[a];
        r.call(n, o, a) && i.push(a);
      }, this), this._seriesIndices = i, this._seriesIndicesMap = Ce(i);
    }, t.prototype.restoreData = function(r) {
      ov(this);
      var n = this._componentsMap, i = [];
      n.each(function(a, o) {
        at.hasClass(o) && i.push(o);
      }), at.topologicalTravel(i, at.getAllClassMainTypes(), function(a) {
        j(n.get(a), function(o) {
          o && (a !== "series" || !Hie(o, r)) && o.restoreData();
        });
      });
    }, t.internalField = function() {
      ov = function(r) {
        var n = r._seriesIndices = [];
        j(r._componentsMap.get("series"), function(i) {
          i && n.push(i.componentIndex);
        }), r._seriesIndicesMap = Ce(n);
      }, Vf = function(r) {
        if (process.env.NODE_ENV !== "production" && !r._seriesIndices)
          throw new Error("Option should contains series.");
      }, UD = function(r, n) {
        r.option = {}, r.option[K1] = YD, r._componentsMap = Ce({
          series: []
        }), r._componentsCount = Ce();
        var i = n.aria;
        Ne(i) && i.enabled == null && (i.enabled = !0), Gie(n, r._theme.option), Xe(n, Lie, !1), r._mergeOption(n, null);
      };
    }(), t;
  }(Tt)
);
function Hie(e, t) {
  if (t) {
    var r = t.seriesIndex, n = t.seriesId, i = t.seriesName;
    return r != null && e.componentIndex !== r || n != null && e.id !== n || i != null && e.name !== i;
  }
}
function Gie(e, t) {
  var r = e.color && !e.colorLayer;
  j(t, function(n, i) {
    i === "colorLayer" && r || at.hasClass(i) || (typeof n == "object" ? e[i] = e[i] ? Xe(e[i], n, !1) : ze(n) : e[i] == null && (e[i] = n));
  });
}
function ZD(e, t, r) {
  if (le(t)) {
    var n = Ce();
    return j(t, function(a) {
      if (a != null) {
        var o = yr(a, null);
        o != null && n.set(a, !0);
      }
    }), Ct(r, function(a) {
      return a && n.get(a[e]);
    });
  } else {
    var i = yr(t, null);
    return Ct(r, function(a) {
      return a && i != null && a[e] === i;
    });
  }
}
function XD(e, t) {
  return t.hasOwnProperty("subType") ? Ct(e, function(r) {
    return r && r.subType === t.subType;
  }) : e;
}
function KD(e) {
  var t = Ce();
  return e && j(Ot(e.replaceMerge), function(r) {
    process.env.NODE_ENV !== "production" && Le(at.hasClass(r), '"' + r + '" is not valid component main type in "replaceMerge"'), t.set(r, !0);
  }), {
    replaceMergeMainTypeMap: t
  };
}
ir(kC, PC);
var Wie = [
  "getDom",
  "getZr",
  "getWidth",
  "getHeight",
  "getDevicePixelRatio",
  "dispatchAction",
  "isSSR",
  "isDisposed",
  "on",
  "off",
  "getDataURL",
  "getConnectedDataURL",
  // 'getModel',
  "getOption",
  // 'getViewOfComponentModel',
  // 'getViewOfSeriesModel',
  "getId",
  "updateLabelLayout"
], R6 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      j(Wie, function(r) {
        this[r] = xe(t[r], t);
      }, this);
    }
    return e;
  }()
), q1 = {}, Kl = (
  /** @class */
  function() {
    function e() {
      this._coordinateSystems = [];
    }
    return e.prototype.create = function(t, r) {
      var n = [];
      j(q1, function(i, a) {
        var o = i.create(t, r);
        n = n.concat(o || []);
      }), this._coordinateSystems = n;
    }, e.prototype.update = function(t, r) {
      j(this._coordinateSystems, function(n) {
        n.update && n.update(t, r);
      });
    }, e.prototype.getCoordinateSystems = function() {
      return this._coordinateSystems.slice();
    }, e.register = function(t, r) {
      q1[t] = r;
    }, e.get = function(t) {
      return q1[t];
    }, e;
  }()
), Uie = /^(min|max)?(.+)$/, Yie = (
  /** @class */
  function() {
    function e(t) {
      this._timelineOptions = [], this._mediaList = [], this._currentMediaIndices = [], this._api = t;
    }
    return e.prototype.setOption = function(t, r, n) {
      t && (j(Ot(t.series), function(o) {
        o && o.data && Kr(o.data) && lh(o.data);
      }), j(Ot(t.dataset), function(o) {
        o && o.source && Kr(o.source) && lh(o.source);
      })), t = ze(t);
      var i = this._optionBackup, a = Zie(t, r, !i);
      this._newBaseOption = a.baseOption, i ? (a.timelineOptions.length && (i.timelineOptions = a.timelineOptions), a.mediaList.length && (i.mediaList = a.mediaList), a.mediaDefault && (i.mediaDefault = a.mediaDefault)) : this._optionBackup = a;
    }, e.prototype.mountOption = function(t) {
      var r = this._optionBackup;
      return this._timelineOptions = r.timelineOptions, this._mediaList = r.mediaList, this._mediaDefault = r.mediaDefault, this._currentMediaIndices = [], ze(t ? r.baseOption : this._newBaseOption);
    }, e.prototype.getTimelineOption = function(t) {
      var r, n = this._timelineOptions;
      if (n.length) {
        var i = t.getComponent("timeline");
        i && (r = ze(
          // FIXME:TS as TimelineModel or quivlant interface
          n[i.getCurrentIndex()]
        ));
      }
      return r;
    }, e.prototype.getMediaOption = function(t) {
      var r = this._api.getWidth(), n = this._api.getHeight(), i = this._mediaList, a = this._mediaDefault, o = [], s = [];
      if (!i.length && !a)
        return s;
      for (var l = 0, u = i.length; l < u; l++)
        Xie(i[l].query, r, n) && o.push(l);
      return !o.length && a && (o = [-1]), o.length && !qie(o, this._currentMediaIndices) && (s = ue(o, function(c) {
        return ze(c === -1 ? a.option : i[c].option);
      })), this._currentMediaIndices = o, s;
    }, e;
  }()
);
function Zie(e, t, r) {
  var n = [], i, a, o = e.baseOption, s = e.timeline, l = e.options, u = e.media, c = !!e.media, f = !!(l || s || o && o.timeline);
  o ? (a = o, a.timeline || (a.timeline = s)) : ((f || c) && (e.options = e.media = null), a = e), c && (le(u) ? j(u, function(h) {
    process.env.NODE_ENV !== "production" && h && !h.option && Ne(h.query) && Ne(h.query.option) && jr("Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }"), h && h.option && (h.query ? n.push(h) : i || (i = h));
  }) : process.env.NODE_ENV !== "production" && jr("Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }")), d(a), j(l, function(h) {
    return d(h);
  }), j(n, function(h) {
    return d(h.option);
  });
  function d(h) {
    j(t, function(p) {
      p(h, r);
    });
  }
  return {
    baseOption: a,
    timelineOptions: l || [],
    mediaDefault: i,
    mediaList: n
  };
}
function Xie(e, t, r) {
  var n = {
    width: t,
    height: r,
    aspectratio: t / r
    // lower case for convenience.
  }, i = !0;
  return j(e, function(a, o) {
    var s = o.match(Uie);
    if (!(!s || !s[1] || !s[2])) {
      var l = s[1], u = s[2].toLowerCase();
      Kie(n[u], a, l) || (i = !1);
    }
  }), i;
}
function Kie(e, t, r) {
  return r === "min" ? e >= t : r === "max" ? e <= t : e === t;
}
function qie(e, t) {
  return e.join(",") === t.join(",");
}
var Pn = j, xh = Ne, qD = ["areaStyle", "lineStyle", "nodeStyle", "linkStyle", "chordStyle", "label", "labelLine"];
function J1(e) {
  var t = e && e.itemStyle;
  if (t)
    for (var r = 0, n = qD.length; r < n; r++) {
      var i = qD[r], a = t.normal, o = t.emphasis;
      a && a[i] && (process.env.NODE_ENV !== "production" && sr("itemStyle.normal." + i, i), e[i] = e[i] || {}, e[i].normal ? Xe(e[i].normal, a[i]) : e[i].normal = a[i], a[i] = null), o && o[i] && (process.env.NODE_ENV !== "production" && sr("itemStyle.emphasis." + i, "emphasis." + i), e[i] = e[i] || {}, e[i].emphasis ? Xe(e[i].emphasis, o[i]) : e[i].emphasis = o[i], o[i] = null);
    }
}
function Yr(e, t, r) {
  if (e && e[t] && (e[t].normal || e[t].emphasis)) {
    var n = e[t].normal, i = e[t].emphasis;
    n && (process.env.NODE_ENV !== "production" && ti("'normal' hierarchy in " + t + " has been removed since 4.0. All style properties are configured in " + t + " directly now."), r ? (e[t].normal = e[t].emphasis = null, Ie(e[t], n)) : e[t] = n), i && (process.env.NODE_ENV !== "production" && ti(t + ".emphasis has been changed to emphasis." + t + " since 4.0"), e.emphasis = e.emphasis || {}, e.emphasis[t] = i, i.focus && (e.emphasis.focus = i.focus), i.blurScope && (e.emphasis.blurScope = i.blurScope));
  }
}
function wd(e) {
  Yr(e, "itemStyle"), Yr(e, "lineStyle"), Yr(e, "areaStyle"), Yr(e, "label"), Yr(e, "labelLine"), Yr(e, "upperLabel"), Yr(e, "edgeLabel");
}
function hr(e, t) {
  var r = xh(e) && e[t], n = xh(r) && r.textStyle;
  if (n) {
    process.env.NODE_ENV !== "production" && ti("textStyle hierarchy in " + t + " has been removed since 4.0. All textStyle properties are configured in " + t + " directly now.");
    for (var i = 0, a = tD.length; i < a; i++) {
      var o = tD[i];
      n.hasOwnProperty(o) && (r[o] = n[o]);
    }
  }
}
function $n(e) {
  e && (wd(e), hr(e, "label"), e.emphasis && hr(e.emphasis, "label"));
}
function Jie(e) {
  if (xh(e)) {
    J1(e), wd(e), hr(e, "label"), hr(e, "upperLabel"), hr(e, "edgeLabel"), e.emphasis && (hr(e.emphasis, "label"), hr(e.emphasis, "upperLabel"), hr(e.emphasis, "edgeLabel"));
    var t = e.markPoint;
    t && (J1(t), $n(t));
    var r = e.markLine;
    r && (J1(r), $n(r));
    var n = e.markArea;
    n && $n(n);
    var i = e.data;
    if (e.type === "graph") {
      i = i || e.nodes;
      var a = e.links || e.edges;
      if (a && !Kr(a))
        for (var o = 0; o < a.length; o++)
          $n(a[o]);
      j(e.categories, function(u) {
        wd(u);
      });
    }
    if (i && !Kr(i))
      for (var o = 0; o < i.length; o++)
        $n(i[o]);
    if (t = e.markPoint, t && t.data)
      for (var s = t.data, o = 0; o < s.length; o++)
        $n(s[o]);
    if (r = e.markLine, r && r.data)
      for (var l = r.data, o = 0; o < l.length; o++)
        le(l[o]) ? ($n(l[o][0]), $n(l[o][1])) : $n(l[o]);
    e.type === "gauge" ? (hr(e, "axisLabel"), hr(e, "title"), hr(e, "detail")) : e.type === "treemap" ? (Yr(e.breadcrumb, "itemStyle"), j(e.levels, function(u) {
      wd(u);
    })) : e.type === "tree" && wd(e.leaves);
  }
}
function _a(e) {
  return le(e) ? e : e ? [e] : [];
}
function JD(e) {
  return (le(e) ? e[0] : e) || {};
}
function Qie(e, t) {
  Pn(_a(e.series), function(n) {
    xh(n) && Jie(n);
  });
  var r = ["xAxis", "yAxis", "radiusAxis", "angleAxis", "singleAxis", "parallelAxis", "radar"];
  t && r.push("valueAxis", "categoryAxis", "logAxis", "timeAxis"), Pn(r, function(n) {
    Pn(_a(e[n]), function(i) {
      i && (hr(i, "axisLabel"), hr(i.axisPointer, "label"));
    });
  }), Pn(_a(e.parallel), function(n) {
    var i = n && n.parallelAxisDefault;
    hr(i, "axisLabel"), hr(i && i.axisPointer, "label");
  }), Pn(_a(e.calendar), function(n) {
    Yr(n, "itemStyle"), hr(n, "dayLabel"), hr(n, "monthLabel"), hr(n, "yearLabel");
  }), Pn(_a(e.radar), function(n) {
    hr(n, "name"), n.name && n.axisName == null && (n.axisName = n.name, delete n.name, process.env.NODE_ENV !== "production" && ti("name property in radar component has been changed to axisName")), n.nameGap != null && n.axisNameGap == null && (n.axisNameGap = n.nameGap, delete n.nameGap, process.env.NODE_ENV !== "production" && ti("nameGap property in radar component has been changed to axisNameGap")), process.env.NODE_ENV !== "production" && Pn(n.indicator, function(i) {
      i.text && sr("text", "name", "radar.indicator");
    });
  }), Pn(_a(e.geo), function(n) {
    xh(n) && ($n(n), Pn(_a(n.regions), function(i) {
      $n(i);
    }));
  }), Pn(_a(e.timeline), function(n) {
    $n(n), Yr(n, "label"), Yr(n, "itemStyle"), Yr(n, "controlStyle", !0);
    var i = n.data;
    le(i) && j(i, function(a) {
      Ne(a) && (Yr(a, "label"), Yr(a, "itemStyle"));
    });
  }), Pn(_a(e.toolbox), function(n) {
    Yr(n, "iconStyle"), Pn(n.feature, function(i) {
      Yr(i, "iconStyle");
    });
  }), hr(JD(e.axisPointer), "label"), hr(JD(e.tooltip).axisPointer, "label");
}
function eae(e, t) {
  for (var r = t.split(","), n = e, i = 0; i < r.length && (n = n && n[r[i]], n != null); i++)
    ;
  return n;
}
function tae(e, t, r, n) {
  for (var i = t.split(","), a = e, o, s = 0; s < i.length - 1; s++)
    o = i[s], a[o] == null && (a[o] = {}), a = a[o];
  a[i[s]] == null && (a[i[s]] = r);
}
function QD(e) {
  e && j(rae, function(t) {
    t[0] in e && !(t[1] in e) && (e[t[1]] = e[t[0]]);
  });
}
var rae = [["x", "left"], ["y", "top"], ["x2", "right"], ["y2", "bottom"]], nae = ["grid", "geo", "parallel", "legend", "toolbox", "title", "visualMap", "dataZoom", "timeline"], Q1 = [["borderRadius", "barBorderRadius"], ["borderColor", "barBorderColor"], ["borderWidth", "barBorderWidth"]];
function Bf(e) {
  var t = e && e.itemStyle;
  if (t)
    for (var r = 0; r < Q1.length; r++) {
      var n = Q1[r][1], i = Q1[r][0];
      t[n] != null && (t[i] = t[n], process.env.NODE_ENV !== "production" && sr(n, i));
    }
}
function eN(e) {
  e && e.alignTo === "edge" && e.margin != null && e.edgeDistance == null && (process.env.NODE_ENV !== "production" && sr("label.margin", "label.edgeDistance", "pie"), e.edgeDistance = e.margin);
}
function tN(e) {
  e && e.downplay && !e.blur && (e.blur = e.downplay, process.env.NODE_ENV !== "production" && sr("downplay", "blur", "sunburst"));
}
function iae(e) {
  e && e.focusNodeAdjacency != null && (e.emphasis = e.emphasis || {}, e.emphasis.focus == null && (process.env.NODE_ENV !== "production" && sr("focusNodeAdjacency", "emphasis: { focus: 'adjacency'}", "graph/sankey"), e.emphasis.focus = "adjacency"));
}
function P6(e, t) {
  if (e)
    for (var r = 0; r < e.length; r++)
      t(e[r]), e[r] && P6(e[r].children, t);
}
function k6(e, t) {
  Qie(e, t), e.series = Ot(e.series), j(e.series, function(r) {
    if (Ne(r)) {
      var n = r.type;
      if (n === "line")
        r.clipOverflow != null && (r.clip = r.clipOverflow, process.env.NODE_ENV !== "production" && sr("clipOverflow", "clip", "line"));
      else if (n === "pie" || n === "gauge") {
        r.clockWise != null && (r.clockwise = r.clockWise, process.env.NODE_ENV !== "production" && sr("clockWise", "clockwise")), eN(r.label);
        var i = r.data;
        if (i && !Kr(i))
          for (var a = 0; a < i.length; a++)
            eN(i[a]);
        r.hoverOffset != null && (r.emphasis = r.emphasis || {}, (r.emphasis.scaleSize = null) && (process.env.NODE_ENV !== "production" && sr("hoverOffset", "emphasis.scaleSize"), r.emphasis.scaleSize = r.hoverOffset));
      } else if (n === "gauge") {
        var o = eae(r, "pointer.color");
        o != null && tae(r, "itemStyle.color", o);
      } else if (n === "bar") {
        Bf(r), Bf(r.backgroundStyle), Bf(r.emphasis);
        var i = r.data;
        if (i && !Kr(i))
          for (var a = 0; a < i.length; a++)
            typeof i[a] == "object" && (Bf(i[a]), Bf(i[a] && i[a].emphasis));
      } else if (n === "sunburst") {
        var s = r.highlightPolicy;
        s && (r.emphasis = r.emphasis || {}, r.emphasis.focus || (r.emphasis.focus = s, process.env.NODE_ENV !== "production" && sr("highlightPolicy", "emphasis.focus", "sunburst"))), tN(r), P6(r.data, tN);
      } else n === "graph" || n === "sankey" ? iae(r) : n === "map" && (r.mapType && !r.map && (process.env.NODE_ENV !== "production" && sr("mapType", "map", "map"), r.map = r.mapType), r.mapLocation && (process.env.NODE_ENV !== "production" && ti("`mapLocation` is not used anymore."), Ie(r, r.mapLocation)));
      r.hoverAnimation != null && (r.emphasis = r.emphasis || {}, r.emphasis && r.emphasis.scale == null && (process.env.NODE_ENV !== "production" && sr("hoverAnimation", "emphasis.scale"), r.emphasis.scale = r.hoverAnimation)), QD(r);
    }
  }), e.dataRange && (e.visualMap = e.dataRange), j(nae, function(r) {
    var n = e[r];
    n && (le(n) || (n = [n]), j(n, function(i) {
      QD(i);
    }));
  });
}
function aae(e) {
  var t = Ce();
  e.eachSeries(function(r) {
    var n = r.get("stack");
    if (n) {
      var i = t.get(n) || t.set(n, []), a = r.getData(), o = {
        // Used for calculate axis extent automatically.
        // TODO: Type getCalculationInfo return more specific type?
        stackResultDimension: a.getCalculationInfo("stackResultDimension"),
        stackedOverDimension: a.getCalculationInfo("stackedOverDimension"),
        stackedDimension: a.getCalculationInfo("stackedDimension"),
        stackedByDimension: a.getCalculationInfo("stackedByDimension"),
        isStackedByIndex: a.getCalculationInfo("isStackedByIndex"),
        data: a,
        seriesModel: r
      };
      if (!o.stackedDimension || !(o.isStackedByIndex || o.stackedByDimension))
        return;
      i.length && a.setCalculationInfo("stackedOnSeries", i[i.length - 1].seriesModel), i.push(o);
    }
  }), t.each(oae);
}
function oae(e) {
  j(e, function(t, r) {
    var n = [], i = [NaN, NaN], a = [t.stackResultDimension, t.stackedOverDimension], o = t.data, s = t.isStackedByIndex, l = t.seriesModel.get("stackStrategy") || "samesign";
    o.modify(a, function(u, c, f) {
      var d = o.get(t.stackedDimension, f);
      if (isNaN(d))
        return i;
      var h, p;
      s ? p = o.getRawIndex(f) : h = o.get(t.stackedByDimension, f);
      for (var v = NaN, g = r - 1; g >= 0; g--) {
        var m = e[g];
        if (s || (p = m.data.rawIndexOf(m.stackedByDimension, h)), p >= 0) {
          var y = m.data.getByRawIndex(m.stackResultDimension, p);
          if (l === "all" || l === "positive" && y > 0 || l === "negative" && y < 0 || l === "samesign" && d >= 0 && y > 0 || l === "samesign" && d <= 0 && y < 0) {
            d = ere(d, y), v = y;
            break;
          }
        }
      }
      return n[0] = d, n[1] = v, n;
    });
  });
}
var qy = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      this.data = t.data || (t.sourceFormat === ha ? {} : []), this.sourceFormat = t.sourceFormat || M6, this.seriesLayoutBy = t.seriesLayoutBy || ia, this.startIndex = t.startIndex || 0, this.dimensionsDetectedCount = t.dimensionsDetectedCount, this.metaRawOption = t.metaRawOption;
      var r = this.dimensionsDefine = t.dimensionsDefine;
      if (r)
        for (var n = 0; n < r.length; n++) {
          var i = r[n];
          i.type == null && N6(this, n) === Pr.Must && (i.type = "ordinal");
        }
    }
    return e;
  }()
);
function OC(e) {
  return e instanceof qy;
}
function Sw(e, t, r) {
  r = r || O6(e);
  var n = t.seriesLayoutBy, i = lae(e, r, n, t.sourceHeader, t.dimensions), a = new qy({
    data: e,
    sourceFormat: r,
    seriesLayoutBy: n,
    dimensionsDefine: i.dimensionsDefine,
    startIndex: i.startIndex,
    dimensionsDetectedCount: i.dimensionsDetectedCount,
    metaRawOption: ze(t)
  });
  return a;
}
function zC(e) {
  return new qy({
    data: e,
    sourceFormat: Kr(e) ? $a : si
  });
}
function sae(e) {
  return new qy({
    data: e.data,
    sourceFormat: e.sourceFormat,
    seriesLayoutBy: e.seriesLayoutBy,
    dimensionsDefine: ze(e.dimensionsDefine),
    startIndex: e.startIndex,
    dimensionsDetectedCount: e.dimensionsDetectedCount
  });
}
function O6(e) {
  var t = M6;
  if (Kr(e))
    t = $a;
  else if (le(e)) {
    e.length === 0 && (t = Qr);
    for (var r = 0, n = e.length; r < n; r++) {
      var i = e[r];
      if (i != null) {
        if (le(i) || Kr(i)) {
          t = Qr;
          break;
        } else if (Ne(i)) {
          t = li;
          break;
        }
      }
    }
  } else if (Ne(e)) {
    for (var a in e)
      if (be(e, a) && zr(e[a])) {
        t = ha;
        break;
      }
  }
  return t;
}
function lae(e, t, r, n, i) {
  var a, o;
  if (!e)
    return {
      dimensionsDefine: rN(i),
      startIndex: o,
      dimensionsDetectedCount: a
    };
  if (t === Qr) {
    var s = e;
    n === "auto" || n == null ? nN(function(u) {
      u != null && u !== "-" && (ge(u) ? o == null && (o = 1) : o = 0);
    }, r, s, 10) : o = bt(n) ? n : n ? 1 : 0, !i && o === 1 && (i = [], nN(function(u, c) {
      i[c] = u != null ? u + "" : "";
    }, r, s, 1 / 0)), a = i ? i.length : r === pf ? s.length : s[0] ? s[0].length : null;
  } else if (t === li)
    i || (i = uae(e));
  else if (t === ha)
    i || (i = [], j(e, function(u, c) {
      i.push(c);
    }));
  else if (t === si) {
    var l = nf(e[0]);
    a = le(l) && l.length || 1;
  } else t === $a && process.env.NODE_ENV !== "production" && Le(!!i, "dimensions must be given if data is TypedArray.");
  return {
    startIndex: o,
    dimensionsDefine: rN(i),
    dimensionsDetectedCount: a
  };
}
function uae(e) {
  for (var t = 0, r; t < e.length && !(r = e[t++]); )
    ;
  if (r)
    return ut(r);
}
function rN(e) {
  if (e) {
    var t = Ce();
    return ue(e, function(r, n) {
      r = Ne(r) ? r : {
        name: r
      };
      var i = {
        name: r.name,
        displayName: r.displayName,
        type: r.type
      };
      if (i.name == null)
        return i;
      i.name += "", i.displayName == null && (i.displayName = i.name);
      var a = t.get(i.name);
      return a ? i.name += "-" + a.count++ : t.set(i.name, {
        count: 1
      }), i;
    });
  }
}
function nN(e, t, r, n) {
  if (t === pf)
    for (var i = 0; i < r.length && i < n; i++)
      e(r[i] ? r[i][0] : null, i);
  else
    for (var a = r[0] || [], i = 0; i < a.length && i < n; i++)
      e(a[i], i);
}
function z6(e) {
  var t = e.sourceFormat;
  return t === li || t === ha;
}
var js, Vs, Bs, iN, aN, j6 = (
  /** @class */
  function() {
    function e(t, r) {
      var n = OC(t) ? t : zC(t);
      this._source = n;
      var i = this._data = n.data;
      if (n.sourceFormat === $a) {
        if (process.env.NODE_ENV !== "production" && r == null)
          throw new Error("Typed array data must specify dimension size");
        this._offset = 0, this._dimSize = r, this._data = i;
      }
      aN(this, i, n);
    }
    return e.prototype.getSource = function() {
      return this._source;
    }, e.prototype.count = function() {
      return 0;
    }, e.prototype.getItem = function(t, r) {
    }, e.prototype.appendData = function(t) {
    }, e.prototype.clean = function() {
    }, e.protoInitialize = function() {
      var t = e.prototype;
      t.pure = !1, t.persistent = !0;
    }(), e.internalField = function() {
      var t;
      aN = function(o, s, l) {
        var u = l.sourceFormat, c = l.seriesLayoutBy, f = l.startIndex, d = l.dimensionsDefine, h = iN[jC(u, c)];
        if (process.env.NODE_ENV !== "production" && Le(h, "Invalide sourceFormat: " + u), ae(o, h), u === $a)
          o.getItem = r, o.count = i, o.fillStorage = n;
        else {
          var p = V6(u, c);
          o.getItem = xe(p, null, s, f, d);
          var v = B6(u, c);
          o.count = xe(v, null, s, f, d);
        }
      };
      var r = function(o, s) {
        o = o - this._offset, s = s || [];
        for (var l = this._data, u = this._dimSize, c = u * o, f = 0; f < u; f++)
          s[f] = l[c + f];
        return s;
      }, n = function(o, s, l, u) {
        for (var c = this._data, f = this._dimSize, d = 0; d < f; d++) {
          for (var h = u[d], p = h[0] == null ? 1 / 0 : h[0], v = h[1] == null ? -1 / 0 : h[1], g = s - o, m = l[d], y = 0; y < g; y++) {
            var b = c[y * f + d];
            m[o + y] = b, b < p && (p = b), b > v && (v = b);
          }
          h[0] = p, h[1] = v;
        }
      }, i = function() {
        return this._data ? this._data.length / this._dimSize : 0;
      };
      iN = (t = {}, t[Qr + "_" + ia] = {
        pure: !0,
        appendData: a
      }, t[Qr + "_" + pf] = {
        pure: !0,
        appendData: function() {
          throw new Error('Do not support appendData when set seriesLayoutBy: "row".');
        }
      }, t[li] = {
        pure: !0,
        appendData: a
      }, t[ha] = {
        pure: !0,
        appendData: function(o) {
          var s = this._data;
          j(o, function(l, u) {
            for (var c = s[u] || (s[u] = []), f = 0; f < (l || []).length; f++)
              c.push(l[f]);
          });
        }
      }, t[si] = {
        appendData: a
      }, t[$a] = {
        persistent: !1,
        pure: !0,
        appendData: function(o) {
          process.env.NODE_ENV !== "production" && Le(Kr(o), "Added data must be TypedArray if data in initialization is TypedArray"), this._data = o;
        },
        // Clean self if data is already used.
        clean: function() {
          this._offset += this.count(), this._data = null;
        }
      }, t);
      function a(o) {
        for (var s = 0; s < o.length; s++)
          this._data.push(o[s]);
      }
    }(), e;
  }()
), oN = function(e, t, r, n) {
  return e[n];
}, cae = (js = {}, js[Qr + "_" + ia] = function(e, t, r, n) {
  return e[n + t];
}, js[Qr + "_" + pf] = function(e, t, r, n, i) {
  n += t;
  for (var a = i || [], o = e, s = 0; s < o.length; s++) {
    var l = o[s];
    a[s] = l ? l[n] : null;
  }
  return a;
}, js[li] = oN, js[ha] = function(e, t, r, n, i) {
  for (var a = i || [], o = 0; o < r.length; o++) {
    var s = r[o].name;
    if (process.env.NODE_ENV !== "production" && s == null)
      throw new Error();
    var l = e[s];
    a[o] = l ? l[n] : null;
  }
  return a;
}, js[si] = oN, js);
function V6(e, t) {
  var r = cae[jC(e, t)];
  return process.env.NODE_ENV !== "production" && Le(r, 'Do not support get item on "' + e + '", "' + t + '".'), r;
}
var sN = function(e, t, r) {
  return e.length;
}, fae = (Vs = {}, Vs[Qr + "_" + ia] = function(e, t, r) {
  return Math.max(0, e.length - t);
}, Vs[Qr + "_" + pf] = function(e, t, r) {
  var n = e[0];
  return n ? Math.max(0, n.length - t) : 0;
}, Vs[li] = sN, Vs[ha] = function(e, t, r) {
  var n = r[0].name;
  if (process.env.NODE_ENV !== "production" && n == null)
    throw new Error();
  var i = e[n];
  return i ? i.length : 0;
}, Vs[si] = sN, Vs);
function B6(e, t) {
  var r = fae[jC(e, t)];
  return process.env.NODE_ENV !== "production" && Le(r, 'Do not support count on "' + e + '", "' + t + '".'), r;
}
var ex = function(e, t, r) {
  return e[t];
}, dae = (Bs = {}, Bs[Qr] = ex, Bs[li] = function(e, t, r) {
  return e[r];
}, Bs[ha] = ex, Bs[si] = function(e, t, r) {
  var n = nf(e);
  return n instanceof Array ? n[t] : n;
}, Bs[$a] = ex, Bs);
function F6(e) {
  var t = dae[e];
  return process.env.NODE_ENV !== "production" && Le(t, 'Do not support get value on "' + e + '".'), t;
}
function jC(e, t) {
  return e === Qr ? e + "_" + t : e;
}
function kc(e, t, r) {
  if (e) {
    var n = e.getRawDataItem(t);
    if (n != null) {
      var i = e.getStore(), a = i.getSource().sourceFormat;
      if (r != null) {
        var o = e.getDimensionIndex(r), s = i.getDimensionProperty(o);
        return F6(a)(n, o, s);
      } else {
        var l = n;
        return a === si && (l = nf(n)), l;
      }
    }
  }
}
var hae = /\{@(.+?)\}/g, Jy = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getDataParams = function(t, r) {
      var n = this.getData(r), i = this.getRawValue(t, r), a = n.getRawIndex(t), o = n.getName(t), s = n.getRawDataItem(t), l = n.getItemVisual(t, "style"), u = l && l[n.getItemVisual(t, "drawType") || "fill"], c = l && l.stroke, f = this.mainType, d = f === "series", h = n.userOutput && n.userOutput.get();
      return {
        componentType: f,
        componentSubType: this.subType,
        componentIndex: this.componentIndex,
        seriesType: d ? this.subType : null,
        seriesIndex: this.seriesIndex,
        seriesId: d ? this.id : null,
        seriesName: d ? this.name : null,
        name: o,
        dataIndex: a,
        data: s,
        dataType: r,
        value: i,
        color: u,
        borderColor: c,
        dimensionNames: h ? h.fullDimensions : null,
        encode: h ? h.encode : null,
        // Param name list for mapping `a`, `b`, `c`, `d`, `e`
        $vars: ["seriesName", "name", "value"]
      };
    }, e.prototype.getFormattedLabel = function(t, r, n, i, a, o) {
      r = r || "normal";
      var s = this.getData(n), l = this.getDataParams(t, n);
      if (o && (l.value = o.interpolatedValue), i != null && le(l.value) && (l.value = l.value[i]), !a) {
        var u = s.getItemModel(t);
        a = u.get(r === "normal" ? ["label", "formatter"] : [r, "label", "formatter"]);
      }
      if (Ee(a))
        return l.status = r, l.dimensionIndex = i, a(l);
      if (ge(a)) {
        var c = NC(a, l);
        return c.replace(hae, function(f, d) {
          var h = d.length, p = d;
          p.charAt(0) === "[" && p.charAt(h - 1) === "]" && (p = +p.slice(1, h - 1), process.env.NODE_ENV !== "production" && isNaN(p) && jr("Invalide label formatter: @" + d + ", only support @[0], @[1], @[2], ..."));
          var v = kc(s, t, p);
          if (o && le(o.interpolatedValue)) {
            var g = s.getDimensionIndex(p);
            g >= 0 && (v = o.interpolatedValue[g]);
          }
          return v != null ? v + "" : "";
        });
      }
    }, e.prototype.getRawValue = function(t, r) {
      return kc(this.getData(r), t);
    }, e.prototype.formatTooltip = function(t, r, n) {
    }, e;
  }()
);
function lN(e) {
  var t, r;
  return Ne(e) ? e.type ? r = e : process.env.NODE_ENV !== "production" && console.warn("The return type of `formatTooltip` is not supported: " + ln(e)) : t = e, {
    text: t,
    // markers: markers || markersExisting,
    frag: r
  };
}
function Hd(e) {
  return new pae(e);
}
var pae = (
  /** @class */
  function() {
    function e(t) {
      t = t || {}, this._reset = t.reset, this._plan = t.plan, this._count = t.count, this._onDirty = t.onDirty, this._dirty = !0;
    }
    return e.prototype.perform = function(t) {
      var r = this._upstream, n = t && t.skip;
      if (this._dirty && r) {
        var i = this.context;
        i.data = i.outputData = r.context.outputData;
      }
      this.__pipeline && (this.__pipeline.currentTask = this);
      var a;
      this._plan && !n && (a = this._plan(this.context));
      var o = c(this._modBy), s = this._modDataCount || 0, l = c(t && t.modBy), u = t && t.modDataCount || 0;
      (o !== l || s !== u) && (a = "reset");
      function c(y) {
        return !(y >= 1) && (y = 1), y;
      }
      var f;
      (this._dirty || a === "reset") && (this._dirty = !1, f = this._doReset(n)), this._modBy = l, this._modDataCount = u;
      var d = t && t.step;
      if (r ? (process.env.NODE_ENV !== "production" && Le(r._outputDueEnd != null), this._dueEnd = r._outputDueEnd) : (process.env.NODE_ENV !== "production" && Le(!this._progress || this._count), this._dueEnd = this._count ? this._count(this.context) : 1 / 0), this._progress) {
        var h = this._dueIndex, p = Math.min(d != null ? this._dueIndex + d : 1 / 0, this._dueEnd);
        if (!n && (f || h < p)) {
          var v = this._progress;
          if (le(v))
            for (var g = 0; g < v.length; g++)
              this._doProgress(v[g], h, p, l, u);
          else
            this._doProgress(v, h, p, l, u);
        }
        this._dueIndex = p;
        var m = this._settedOutputEnd != null ? this._settedOutputEnd : p;
        process.env.NODE_ENV !== "production" && Le(m >= this._outputDueEnd), this._outputDueEnd = m;
      } else
        this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;
      return this.unfinished();
    }, e.prototype.dirty = function() {
      this._dirty = !0, this._onDirty && this._onDirty(this.context);
    }, e.prototype._doProgress = function(t, r, n, i, a) {
      uN.reset(r, n, i, a), this._callingProgress = t, this._callingProgress({
        start: r,
        end: n,
        count: n - r,
        next: uN.next
      }, this.context);
    }, e.prototype._doReset = function(t) {
      this._dueIndex = this._outputDueEnd = this._dueEnd = 0, this._settedOutputEnd = null;
      var r, n;
      !t && this._reset && (r = this._reset(this.context), r && r.progress && (n = r.forceFirstProgress, r = r.progress), le(r) && !r.length && (r = null)), this._progress = r, this._modBy = this._modDataCount = null;
      var i = this._downstream;
      return i && i.dirty(), n;
    }, e.prototype.unfinished = function() {
      return this._progress && this._dueIndex < this._dueEnd;
    }, e.prototype.pipe = function(t) {
      process.env.NODE_ENV !== "production" && Le(t && !t._disposed && t !== this), (this._downstream !== t || this._dirty) && (this._downstream = t, t._upstream = this, t.dirty());
    }, e.prototype.dispose = function() {
      this._disposed || (this._upstream && (this._upstream._downstream = null), this._downstream && (this._downstream._upstream = null), this._dirty = !1, this._disposed = !0);
    }, e.prototype.getUpstream = function() {
      return this._upstream;
    }, e.prototype.getDownstream = function() {
      return this._downstream;
    }, e.prototype.setOutputEnd = function(t) {
      this._outputDueEnd = this._settedOutputEnd = t;
    }, e;
  }()
), uN = /* @__PURE__ */ function() {
  var e, t, r, n, i, a = {
    reset: function(l, u, c, f) {
      t = l, e = u, r = c, n = f, i = Math.ceil(n / r), a.next = r > 1 && n > 0 ? s : o;
    }
  };
  return a;
  function o() {
    return t < e ? t++ : null;
  }
  function s() {
    var l = t % i * r + Math.ceil(t / i), u = t >= e ? null : l < n ? l : t;
    return t++, u;
  }
}();
function qo(e, t) {
  var r = t && t.type;
  return r === "ordinal" ? e : (r === "time" && !bt(e) && e != null && e !== "-" && (e = +In(e)), e == null || e === "" ? NaN : Number(e));
}
var vae = Ce({
  number: function(e) {
    return parseFloat(e);
  },
  time: function(e) {
    return +In(e);
  },
  trim: function(e) {
    return ge(e) ? Xn(e) : e;
  }
});
function $6(e) {
  return vae.get(e);
}
var H6 = {
  lt: function(e, t) {
    return e < t;
  },
  lte: function(e, t) {
    return e <= t;
  },
  gt: function(e, t) {
    return e > t;
  },
  gte: function(e, t) {
    return e >= t;
  }
}, gae = (
  /** @class */
  function() {
    function e(t, r) {
      if (!bt(r)) {
        var n = "";
        process.env.NODE_ENV !== "production" && (n = 'rvalue of "<", ">", "<=", ">=" can only be number in filter.'), Et(n);
      }
      this._opFn = H6[t], this._rvalFloat = ua(r);
    }
    return e.prototype.evaluate = function(t) {
      return bt(t) ? this._opFn(t, this._rvalFloat) : this._opFn(ua(t), this._rvalFloat);
    }, e;
  }()
), G6 = (
  /** @class */
  function() {
    function e(t, r) {
      var n = t === "desc";
      this._resultLT = n ? 1 : -1, r == null && (r = n ? "min" : "max"), this._incomparable = r === "min" ? -1 / 0 : 1 / 0;
    }
    return e.prototype.evaluate = function(t, r) {
      var n = bt(t) ? t : ua(t), i = bt(r) ? r : ua(r), a = isNaN(n), o = isNaN(i);
      if (a && (n = this._incomparable), o && (i = this._incomparable), a && o) {
        var s = ge(t), l = ge(r);
        s && (n = l ? t : 0), l && (i = s ? r : 0);
      }
      return n < i ? this._resultLT : n > i ? -this._resultLT : 0;
    }, e;
  }()
), mae = (
  /** @class */
  function() {
    function e(t, r) {
      this._rval = r, this._isEQ = t, this._rvalTypeof = typeof r, this._rvalFloat = ua(r);
    }
    return e.prototype.evaluate = function(t) {
      var r = t === this._rval;
      if (!r) {
        var n = typeof t;
        n !== this._rvalTypeof && (n === "number" || this._rvalTypeof === "number") && (r = ua(t) === this._rvalFloat);
      }
      return this._isEQ ? r : !r;
    }, e;
  }()
);
function yae(e, t) {
  return e === "eq" || e === "ne" ? new mae(e === "eq", t) : be(H6, e) ? new gae(e, t) : null;
}
var xae = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getRawData = function() {
      throw new Error("not supported");
    }, e.prototype.getRawDataItem = function(t) {
      throw new Error("not supported");
    }, e.prototype.cloneRawData = function() {
    }, e.prototype.getDimensionInfo = function(t) {
    }, e.prototype.cloneAllDimensionInfo = function() {
    }, e.prototype.count = function() {
    }, e.prototype.retrieveValue = function(t, r) {
    }, e.prototype.retrieveValueFromItem = function(t, r) {
    }, e.prototype.convertValue = function(t, r) {
      return qo(t, r);
    }, e;
  }()
);
function bae(e, t) {
  var r = new xae(), n = e.data, i = r.sourceFormat = e.sourceFormat, a = e.startIndex, o = "";
  e.seriesLayoutBy !== ia && (process.env.NODE_ENV !== "production" && (o = '`seriesLayoutBy` of upstream dataset can only be "column" in data transform.'), Et(o));
  var s = [], l = {}, u = e.dimensionsDefine;
  if (u)
    j(u, function(v, g) {
      var m = v.name, y = {
        index: g,
        name: m,
        displayName: v.displayName
      };
      if (s.push(y), m != null) {
        var b = "";
        be(l, m) && (process.env.NODE_ENV !== "production" && (b = 'dimension name "' + m + '" duplicated.'), Et(b)), l[m] = y;
      }
    });
  else
    for (var c = 0; c < e.dimensionsDetectedCount; c++)
      s.push({
        index: c
      });
  var f = V6(i, ia);
  t.__isBuiltIn && (r.getRawDataItem = function(v) {
    return f(n, a, s, v);
  }, r.getRawData = xe(wae, null, e)), r.cloneRawData = xe(_ae, null, e);
  var d = B6(i, ia);
  r.count = xe(d, null, n, a, s);
  var h = F6(i);
  r.retrieveValue = function(v, g) {
    var m = f(n, a, s, v);
    return p(m, g);
  };
  var p = r.retrieveValueFromItem = function(v, g) {
    if (v != null) {
      var m = s[g];
      if (m)
        return h(v, g, m.name);
    }
  };
  return r.getDimensionInfo = xe(Sae, null, s, l), r.cloneAllDimensionInfo = xe(Cae, null, s), r;
}
function wae(e) {
  var t = e.sourceFormat;
  if (!VC(t)) {
    var r = "";
    process.env.NODE_ENV !== "production" && (r = "`getRawData` is not supported in source format " + t), Et(r);
  }
  return e.data;
}
function _ae(e) {
  var t = e.sourceFormat, r = e.data;
  if (!VC(t)) {
    var n = "";
    process.env.NODE_ENV !== "production" && (n = "`cloneRawData` is not supported in source format " + t), Et(n);
  }
  if (t === Qr) {
    for (var i = [], a = 0, o = r.length; a < o; a++)
      i.push(r[a].slice());
    return i;
  } else if (t === li) {
    for (var i = [], a = 0, o = r.length; a < o; a++)
      i.push(ae({}, r[a]));
    return i;
  }
}
function Sae(e, t, r) {
  if (r != null) {
    if (bt(r) || !isNaN(r) && !be(t, r))
      return e[r];
    if (be(t, r))
      return t[r];
  }
}
function Cae(e) {
  return ze(e);
}
var W6 = Ce();
function Tae(e) {
  e = ze(e);
  var t = e.type, r = "";
  t || (process.env.NODE_ENV !== "production" && (r = "Must have a `type` when `registerTransform`."), Et(r));
  var n = t.split(":");
  n.length !== 2 && (process.env.NODE_ENV !== "production" && (r = 'Name must include namespace like "ns:regression".'), Et(r));
  var i = !1;
  n[0] === "echarts" && (t = n[1], i = !0), e.__isBuiltIn = i, W6.set(t, e);
}
function Aae(e, t, r) {
  var n = Ot(e), i = n.length, a = "";
  i || (process.env.NODE_ENV !== "production" && (a = "If `transform` declared, it should at least contain one transform."), Et(a));
  for (var o = 0, s = i; o < s; o++) {
    var l = n[o];
    t = Mae(l, t, r, i === 1 ? null : o), o !== s - 1 && (t.length = Math.max(t.length, 1));
  }
  return t;
}
function Mae(e, t, r, n) {
  var i = "";
  t.length || (process.env.NODE_ENV !== "production" && (i = "Must have at least one upstream dataset."), Et(i)), Ne(e) || (process.env.NODE_ENV !== "production" && (i = "transform declaration must be an object rather than " + typeof e + "."), Et(i));
  var a = e.type, o = W6.get(a);
  o || (process.env.NODE_ENV !== "production" && (i = 'Can not find transform on type "' + a + '".'), Et(i));
  var s = ue(t, function(c) {
    return bae(c, o);
  }), l = Ot(o.transform({
    upstream: s[0],
    upstreamList: s,
    config: ze(e.config)
  }));
  if (process.env.NODE_ENV !== "production" && e.print) {
    var u = ue(l, function(c) {
      var f = n != null ? " === pipe index: " + n : "";
      return ["=== dataset index: " + r.datasetIndex + f + " ===", "- transform result data:", ln(c.data), "- transform result dimensions:", ln(c.dimensions)].join(`
`);
    }).join(`
`);
    ire(u);
  }
  return ue(l, function(c, f) {
    var d = "";
    Ne(c) || (process.env.NODE_ENV !== "production" && (d = "A transform should not return some empty results."), Et(d)), c.data || (process.env.NODE_ENV !== "production" && (d = "Transform result data should be not be null or undefined"), Et(d));
    var h = O6(c.data);
    VC(h) || (process.env.NODE_ENV !== "production" && (d = "Transform result data should be array rows or object rows."), Et(d));
    var p, v = t[0];
    if (v && f === 0 && !c.dimensions) {
      var g = v.startIndex;
      g && (c.data = v.data.slice(0, g).concat(c.data)), p = {
        seriesLayoutBy: ia,
        sourceHeader: g,
        dimensions: v.metaRawOption.dimensions
      };
    } else
      p = {
        seriesLayoutBy: ia,
        sourceHeader: 0,
        dimensions: c.dimensions
      };
    return Sw(c.data, p, null);
  });
}
function VC(e) {
  return e === Qr || e === li;
}
var Qy = "undefined", Eae = typeof Uint32Array === Qy ? Array : Uint32Array, Dae = typeof Uint16Array === Qy ? Array : Uint16Array, U6 = typeof Int32Array === Qy ? Array : Int32Array, cN = typeof Float64Array === Qy ? Array : Float64Array, Y6 = {
  float: cN,
  int: U6,
  // Ordinal data type can be string or int
  ordinal: Array,
  number: Array,
  time: cN
}, tx;
function Su(e) {
  return e > 65535 ? Eae : Dae;
}
function Cu() {
  return [1 / 0, -1 / 0];
}
function Nae(e) {
  var t = e.constructor;
  return t === Array ? e.slice() : new t(e);
}
function fN(e, t, r, n, i) {
  var a = Y6[r || "float"];
  if (i) {
    var o = e[t], s = o && o.length;
    if (s !== n) {
      for (var l = new a(n), u = 0; u < s; u++)
        l[u] = o[u];
      e[t] = l;
    }
  } else
    e[t] = new a(n);
}
var Cw = (
  /** @class */
  function() {
    function e() {
      this._chunks = [], this._rawExtent = [], this._extent = [], this._count = 0, this._rawCount = 0, this._calcDimNameToIdx = Ce();
    }
    return e.prototype.initData = function(t, r, n) {
      process.env.NODE_ENV !== "production" && Le(Ee(t.getItem) && Ee(t.count), "Invalid data provider."), this._provider = t, this._chunks = [], this._indices = null, this.getRawIndex = this._getRawIdxIdentity;
      var i = t.getSource(), a = this.defaultDimValueGetter = tx[i.sourceFormat];
      this._dimValueGetter = n || a, this._rawExtent = [];
      var o = z6(i);
      this._dimensions = ue(r, function(s) {
        return process.env.NODE_ENV !== "production" && o && Le(s.property != null), {
          // Only pick these two props. Not leak other properties like orderMeta.
          type: s.type,
          property: s.property
        };
      }), this._initDataFromProvider(0, t.count());
    }, e.prototype.getProvider = function() {
      return this._provider;
    }, e.prototype.getSource = function() {
      return this._provider.getSource();
    }, e.prototype.ensureCalculationDimension = function(t, r) {
      var n = this._calcDimNameToIdx, i = this._dimensions, a = n.get(t);
      if (a != null) {
        if (i[a].type === r)
          return a;
      } else
        a = i.length;
      return i[a] = {
        type: r
      }, n.set(t, a), this._chunks[a] = new Y6[r || "float"](this._rawCount), this._rawExtent[a] = Cu(), a;
    }, e.prototype.collectOrdinalMeta = function(t, r) {
      var n = this._chunks[t], i = this._dimensions[t], a = this._rawExtent, o = i.ordinalOffset || 0, s = n.length;
      o === 0 && (a[t] = Cu());
      for (var l = a[t], u = o; u < s; u++) {
        var c = n[u] = r.parseAndCollect(n[u]);
        isNaN(c) || (l[0] = Math.min(c, l[0]), l[1] = Math.max(c, l[1]));
      }
      i.ordinalMeta = r, i.ordinalOffset = s, i.type = "ordinal";
    }, e.prototype.getOrdinalMeta = function(t) {
      var r = this._dimensions[t], n = r.ordinalMeta;
      return n;
    }, e.prototype.getDimensionProperty = function(t) {
      var r = this._dimensions[t];
      return r && r.property;
    }, e.prototype.appendData = function(t) {
      process.env.NODE_ENV !== "production" && Le(!this._indices, "appendData can only be called on raw data.");
      var r = this._provider, n = this.count();
      r.appendData(t);
      var i = r.count();
      return r.persistent || (i += n), n < i && this._initDataFromProvider(n, i, !0), [n, i];
    }, e.prototype.appendValues = function(t, r) {
      for (var n = this._chunks, i = this._dimensions, a = i.length, o = this._rawExtent, s = this.count(), l = s + Math.max(t.length, r || 0), u = 0; u < a; u++) {
        var c = i[u];
        fN(n, u, c.type, l, !0);
      }
      for (var f = [], d = s; d < l; d++)
        for (var h = d - s, p = 0; p < a; p++) {
          var c = i[p], v = tx.arrayRows.call(this, t[h] || f, c.property, h, p);
          n[p][d] = v;
          var g = o[p];
          v < g[0] && (g[0] = v), v > g[1] && (g[1] = v);
        }
      return this._rawCount = this._count = l, {
        start: s,
        end: l
      };
    }, e.prototype._initDataFromProvider = function(t, r, n) {
      for (var i = this._provider, a = this._chunks, o = this._dimensions, s = o.length, l = this._rawExtent, u = ue(o, function(y) {
        return y.property;
      }), c = 0; c < s; c++) {
        var f = o[c];
        l[c] || (l[c] = Cu()), fN(a, c, f.type, r, n);
      }
      if (i.fillStorage)
        i.fillStorage(t, r, a, l);
      else
        for (var d = [], h = t; h < r; h++) {
          d = i.getItem(h, d);
          for (var p = 0; p < s; p++) {
            var v = a[p], g = this._dimValueGetter(d, u[p], h, p);
            v[h] = g;
            var m = l[p];
            g < m[0] && (m[0] = g), g > m[1] && (m[1] = g);
          }
        }
      !i.persistent && i.clean && i.clean(), this._rawCount = this._count = r, this._extent = [];
    }, e.prototype.count = function() {
      return this._count;
    }, e.prototype.get = function(t, r) {
      if (!(r >= 0 && r < this._count))
        return NaN;
      var n = this._chunks[t];
      return n ? n[this.getRawIndex(r)] : NaN;
    }, e.prototype.getValues = function(t, r) {
      var n = [], i = [];
      if (r == null) {
        r = t, t = [];
        for (var a = 0; a < this._dimensions.length; a++)
          i.push(a);
      } else
        i = t;
      for (var a = 0, o = i.length; a < o; a++)
        n.push(this.get(i[a], r));
      return n;
    }, e.prototype.getByRawIndex = function(t, r) {
      if (!(r >= 0 && r < this._rawCount))
        return NaN;
      var n = this._chunks[t];
      return n ? n[r] : NaN;
    }, e.prototype.getSum = function(t) {
      var r = this._chunks[t], n = 0;
      if (r)
        for (var i = 0, a = this.count(); i < a; i++) {
          var o = this.get(t, i);
          isNaN(o) || (n += o);
        }
      return n;
    }, e.prototype.getMedian = function(t) {
      var r = [];
      this.each([t], function(a) {
        isNaN(a) || r.push(a);
      });
      var n = r.sort(function(a, o) {
        return a - o;
      }), i = this.count();
      return i === 0 ? 0 : i % 2 === 1 ? n[(i - 1) / 2] : (n[i / 2] + n[i / 2 - 1]) / 2;
    }, e.prototype.indexOfRawIndex = function(t) {
      if (t >= this._rawCount || t < 0)
        return -1;
      if (!this._indices)
        return t;
      var r = this._indices, n = r[t];
      if (n != null && n < this._count && n === t)
        return t;
      for (var i = 0, a = this._count - 1; i <= a; ) {
        var o = (i + a) / 2 | 0;
        if (r[o] < t)
          i = o + 1;
        else if (r[o] > t)
          a = o - 1;
        else
          return o;
      }
      return -1;
    }, e.prototype.indicesOfNearest = function(t, r, n) {
      var i = this._chunks, a = i[t], o = [];
      if (!a)
        return o;
      n == null && (n = 1 / 0);
      for (var s = 1 / 0, l = -1, u = 0, c = 0, f = this.count(); c < f; c++) {
        var d = this.getRawIndex(c), h = r - a[d], p = Math.abs(h);
        p <= n && ((p < s || p === s && h >= 0 && l < 0) && (s = p, l = h, u = 0), h === l && (o[u++] = c));
      }
      return o.length = u, o;
    }, e.prototype.getIndices = function() {
      var t, r = this._indices;
      if (r) {
        var n = r.constructor, i = this._count;
        if (n === Array) {
          t = new n(i);
          for (var a = 0; a < i; a++)
            t[a] = r[a];
        } else
          t = new n(r.buffer, 0, i);
      } else {
        var n = Su(this._rawCount);
        t = new n(this.count());
        for (var a = 0; a < t.length; a++)
          t[a] = a;
      }
      return t;
    }, e.prototype.filter = function(t, r) {
      if (!this._count)
        return this;
      for (var n = this.clone(), i = n.count(), a = Su(n._rawCount), o = new a(i), s = [], l = t.length, u = 0, c = t[0], f = n._chunks, d = 0; d < i; d++) {
        var h = void 0, p = n.getRawIndex(d);
        if (l === 0)
          h = r(d);
        else if (l === 1) {
          var v = f[c][p];
          h = r(v, d);
        } else {
          for (var g = 0; g < l; g++)
            s[g] = f[t[g]][p];
          s[g] = d, h = r.apply(null, s);
        }
        h && (o[u++] = p);
      }
      return u < i && (n._indices = o), n._count = u, n._extent = [], n._updateGetRawIdx(), n;
    }, e.prototype.selectRange = function(t) {
      var r = this.clone(), n = r._count;
      if (!n)
        return this;
      var i = ut(t), a = i.length;
      if (!a)
        return this;
      var o = r.count(), s = Su(r._rawCount), l = new s(o), u = 0, c = i[0], f = t[c][0], d = t[c][1], h = r._chunks, p = !1;
      if (!r._indices) {
        var v = 0;
        if (a === 1) {
          for (var g = h[i[0]], m = 0; m < n; m++) {
            var y = g[m];
            (y >= f && y <= d || isNaN(y)) && (l[u++] = v), v++;
          }
          p = !0;
        } else if (a === 2) {
          for (var g = h[i[0]], b = h[i[1]], w = t[i[1]][0], _ = t[i[1]][1], m = 0; m < n; m++) {
            var y = g[m], S = b[m];
            (y >= f && y <= d || isNaN(y)) && (S >= w && S <= _ || isNaN(S)) && (l[u++] = v), v++;
          }
          p = !0;
        }
      }
      if (!p)
        if (a === 1)
          for (var m = 0; m < o; m++) {
            var C = r.getRawIndex(m), y = h[i[0]][C];
            (y >= f && y <= d || isNaN(y)) && (l[u++] = C);
          }
        else
          for (var m = 0; m < o; m++) {
            for (var A = !0, C = r.getRawIndex(m), M = 0; M < a; M++) {
              var D = i[M], y = h[D][C];
              (y < t[D][0] || y > t[D][1]) && (A = !1);
            }
            A && (l[u++] = r.getRawIndex(m));
          }
      return u < o && (r._indices = l), r._count = u, r._extent = [], r._updateGetRawIdx(), r;
    }, e.prototype.map = function(t, r) {
      var n = this.clone(t);
      return this._updateDims(n, t, r), n;
    }, e.prototype.modify = function(t, r) {
      this._updateDims(this, t, r);
    }, e.prototype._updateDims = function(t, r, n) {
      for (var i = t._chunks, a = [], o = r.length, s = t.count(), l = [], u = t._rawExtent, c = 0; c < r.length; c++)
        u[r[c]] = Cu();
      for (var f = 0; f < s; f++) {
        for (var d = t.getRawIndex(f), h = 0; h < o; h++)
          l[h] = i[r[h]][d];
        l[o] = f;
        var p = n && n.apply(null, l);
        if (p != null) {
          typeof p != "object" && (a[0] = p, p = a);
          for (var c = 0; c < p.length; c++) {
            var v = r[c], g = p[c], m = u[v], y = i[v];
            y && (y[d] = g), g < m[0] && (m[0] = g), g > m[1] && (m[1] = g);
          }
        }
      }
    }, e.prototype.lttbDownSample = function(t, r) {
      var n = this.clone([t], !0), i = n._chunks, a = i[t], o = this.count(), s = 0, l = Math.floor(1 / r), u = this.getRawIndex(0), c, f, d, h = new (Su(this._rawCount))(Math.min((Math.ceil(o / l) + 2) * 2, o));
      h[s++] = u;
      for (var p = 1; p < o - 1; p += l) {
        for (var v = Math.min(p + l, o - 1), g = Math.min(p + l * 2, o), m = (g + v) / 2, y = 0, b = v; b < g; b++) {
          var w = this.getRawIndex(b), _ = a[w];
          isNaN(_) || (y += _);
        }
        y /= g - v;
        var S = p, C = Math.min(p + l, o), A = p - 1, M = a[u];
        c = -1, d = S;
        for (var D = -1, N = 0, b = S; b < C; b++) {
          var w = this.getRawIndex(b), _ = a[w];
          if (isNaN(_)) {
            N++, D < 0 && (D = w);
            continue;
          }
          f = Math.abs((A - m) * (_ - M) - (A - b) * (y - M)), f > c && (c = f, d = w);
        }
        N > 0 && N < C - S && (h[s++] = Math.min(D, d), d = Math.max(D, d)), h[s++] = d, u = d;
      }
      return h[s++] = this.getRawIndex(o - 1), n._count = s, n._indices = h, n.getRawIndex = this._getRawIdx, n;
    }, e.prototype.minmaxDownSample = function(t, r) {
      for (var n = this.clone([t], !0), i = n._chunks, a = Math.floor(1 / r), o = i[t], s = this.count(), l = new (Su(this._rawCount))(Math.ceil(s / a) * 2), u = 0, c = 0; c < s; c += a) {
        var f = c, d = o[this.getRawIndex(f)], h = c, p = o[this.getRawIndex(h)], v = a;
        c + a > s && (v = s - c);
        for (var g = 0; g < v; g++) {
          var m = this.getRawIndex(c + g), y = o[m];
          y < d && (d = y, f = c + g), y > p && (p = y, h = c + g);
        }
        var b = this.getRawIndex(f), w = this.getRawIndex(h);
        f < h ? (l[u++] = b, l[u++] = w) : (l[u++] = w, l[u++] = b);
      }
      return n._count = u, n._indices = l, n._updateGetRawIdx(), n;
    }, e.prototype.downSample = function(t, r, n, i) {
      for (var a = this.clone([t], !0), o = a._chunks, s = [], l = Math.floor(1 / r), u = o[t], c = this.count(), f = a._rawExtent[t] = Cu(), d = new (Su(this._rawCount))(Math.ceil(c / l)), h = 0, p = 0; p < c; p += l) {
        l > c - p && (l = c - p, s.length = l);
        for (var v = 0; v < l; v++) {
          var g = this.getRawIndex(p + v);
          s[v] = u[g];
        }
        var m = n(s), y = this.getRawIndex(Math.min(p + i(s, m) || 0, c - 1));
        u[y] = m, m < f[0] && (f[0] = m), m > f[1] && (f[1] = m), d[h++] = y;
      }
      return a._count = h, a._indices = d, a._updateGetRawIdx(), a;
    }, e.prototype.each = function(t, r) {
      if (this._count)
        for (var n = t.length, i = this._chunks, a = 0, o = this.count(); a < o; a++) {
          var s = this.getRawIndex(a);
          switch (n) {
            case 0:
              r(a);
              break;
            case 1:
              r(i[t[0]][s], a);
              break;
            case 2:
              r(i[t[0]][s], i[t[1]][s], a);
              break;
            default:
              for (var l = 0, u = []; l < n; l++)
                u[l] = i[t[l]][s];
              u[l] = a, r.apply(null, u);
          }
        }
    }, e.prototype.getDataExtent = function(t) {
      var r = this._chunks[t], n = Cu();
      if (!r)
        return n;
      var i = this.count(), a = !this._indices, o;
      if (a)
        return this._rawExtent[t].slice();
      if (o = this._extent[t], o)
        return o.slice();
      o = n;
      for (var s = o[0], l = o[1], u = 0; u < i; u++) {
        var c = this.getRawIndex(u), f = r[c];
        f < s && (s = f), f > l && (l = f);
      }
      return o = [s, l], this._extent[t] = o, o;
    }, e.prototype.getRawDataItem = function(t) {
      var r = this.getRawIndex(t);
      if (this._provider.persistent)
        return this._provider.getItem(r);
      for (var n = [], i = this._chunks, a = 0; a < i.length; a++)
        n.push(i[a][r]);
      return n;
    }, e.prototype.clone = function(t, r) {
      var n = new e(), i = this._chunks, a = t && ei(t, function(s, l) {
        return s[l] = !0, s;
      }, {});
      if (a)
        for (var o = 0; o < i.length; o++)
          n._chunks[o] = a[o] ? Nae(i[o]) : i[o];
      else
        n._chunks = i;
      return this._copyCommonProps(n), r || (n._indices = this._cloneIndices()), n._updateGetRawIdx(), n;
    }, e.prototype._copyCommonProps = function(t) {
      t._count = this._count, t._rawCount = this._rawCount, t._provider = this._provider, t._dimensions = this._dimensions, t._extent = ze(this._extent), t._rawExtent = ze(this._rawExtent);
    }, e.prototype._cloneIndices = function() {
      if (this._indices) {
        var t = this._indices.constructor, r = void 0;
        if (t === Array) {
          var n = this._indices.length;
          r = new t(n);
          for (var i = 0; i < n; i++)
            r[i] = this._indices[i];
        } else
          r = new t(this._indices);
        return r;
      }
      return null;
    }, e.prototype._getRawIdxIdentity = function(t) {
      return t;
    }, e.prototype._getRawIdx = function(t) {
      return t < this._count && t >= 0 ? this._indices[t] : -1;
    }, e.prototype._updateGetRawIdx = function() {
      this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;
    }, e.internalField = function() {
      function t(r, n, i, a) {
        return qo(r[a], this._dimensions[a]);
      }
      tx = {
        arrayRows: t,
        objectRows: function(r, n, i, a) {
          return qo(r[n], this._dimensions[a]);
        },
        keyedColumns: t,
        original: function(r, n, i, a) {
          var o = r && (r.value == null ? r : r.value);
          return qo(o instanceof Array ? o[a] : o, this._dimensions[a]);
        },
        typedArray: function(r, n, i, a) {
          return r[a];
        }
      };
    }(), e;
  }()
), Z6 = (
  /** @class */
  function() {
    function e(t) {
      this._sourceList = [], this._storeList = [], this._upstreamSignList = [], this._versionSignBase = 0, this._dirty = !0, this._sourceHost = t;
    }
    return e.prototype.dirty = function() {
      this._setLocalSource([], []), this._storeList = [], this._dirty = !0;
    }, e.prototype._setLocalSource = function(t, r) {
      this._sourceList = t, this._upstreamSignList = r, this._versionSignBase++, this._versionSignBase > 9e10 && (this._versionSignBase = 0);
    }, e.prototype._getVersionSign = function() {
      return this._sourceHost.uid + "_" + this._versionSignBase;
    }, e.prototype.prepareSource = function() {
      this._isDirty() && (this._createSource(), this._dirty = !1);
    }, e.prototype._createSource = function() {
      this._setLocalSource([], []);
      var t = this._sourceHost, r = this._getUpstreamSourceManagers(), n = !!r.length, i, a;
      if (Ff(t)) {
        var o = t, s = void 0, l = void 0, u = void 0;
        if (n) {
          var c = r[0];
          c.prepareSource(), u = c.getSource(), s = u.data, l = u.sourceFormat, a = [c._getVersionSign()];
        } else
          s = o.get("data", !0), l = Kr(s) ? $a : si, a = [];
        var f = this._getSourceMetaRawOption() || {}, d = u && u.metaRawOption || {}, h = Ge(f.seriesLayoutBy, d.seriesLayoutBy) || null, p = Ge(f.sourceHeader, d.sourceHeader), v = Ge(f.dimensions, d.dimensions), g = h !== d.seriesLayoutBy || !!p != !!d.sourceHeader || v;
        i = g ? [Sw(s, {
          seriesLayoutBy: h,
          sourceHeader: p,
          dimensions: v
        }, l)] : [];
      } else {
        var m = t;
        if (n) {
          var y = this._applyTransform(r);
          i = y.sourceList, a = y.upstreamSignList;
        } else {
          var b = m.get("source", !0);
          i = [Sw(b, this._getSourceMetaRawOption(), null)], a = [];
        }
      }
      process.env.NODE_ENV !== "production" && Le(i && a), this._setLocalSource(i, a);
    }, e.prototype._applyTransform = function(t) {
      var r = this._sourceHost, n = r.get("transform", !0), i = r.get("fromTransformResult", !0);
      if (process.env.NODE_ENV !== "production" && Le(i != null || n != null), i != null) {
        var a = "";
        t.length !== 1 && (process.env.NODE_ENV !== "production" && (a = "When using `fromTransformResult`, there should be only one upstream dataset"), hN(a));
      }
      var o, s = [], l = [];
      return j(t, function(u) {
        u.prepareSource();
        var c = u.getSource(i || 0), f = "";
        i != null && !c && (process.env.NODE_ENV !== "production" && (f = "Can not retrieve result by `fromTransformResult`: " + i), hN(f)), s.push(c), l.push(u._getVersionSign());
      }), n ? o = Aae(n, s, {
        datasetIndex: r.componentIndex
      }) : i != null && (o = [sae(s[0])]), {
        sourceList: o,
        upstreamSignList: l
      };
    }, e.prototype._isDirty = function() {
      if (this._dirty)
        return !0;
      for (var t = this._getUpstreamSourceManagers(), r = 0; r < t.length; r++) {
        var n = t[r];
        if (
          // Consider the case that there is ancestor diry, call it recursively.
          // The performance is probably not an issue because usually the chain is not long.
          n._isDirty() || this._upstreamSignList[r] !== n._getVersionSign()
        )
          return !0;
      }
    }, e.prototype.getSource = function(t) {
      t = t || 0;
      var r = this._sourceList[t];
      if (!r) {
        var n = this._getUpstreamSourceManagers();
        return n[0] && n[0].getSource(t);
      }
      return r;
    }, e.prototype.getSharedDataStore = function(t) {
      process.env.NODE_ENV !== "production" && Le(Ff(this._sourceHost), "Can only call getDataStore on series source manager.");
      var r = t.makeStoreSchema();
      return this._innerGetDataStore(r.dimensions, t.source, r.hash);
    }, e.prototype._innerGetDataStore = function(t, r, n) {
      var i = 0, a = this._storeList, o = a[i];
      o || (o = a[i] = {});
      var s = o[n];
      if (!s) {
        var l = this._getUpstreamSourceManagers()[0];
        Ff(this._sourceHost) && l ? s = l._innerGetDataStore(t, r, n) : (s = new Cw(), s.initData(new j6(r, t.length), t)), o[n] = s;
      }
      return s;
    }, e.prototype._getUpstreamSourceManagers = function() {
      var t = this._sourceHost;
      if (Ff(t)) {
        var r = RC(t);
        return r ? [r.getSourceManager()] : [];
      } else
        return ue(Pie(t), function(n) {
          return n.getSourceManager();
        });
    }, e.prototype._getSourceMetaRawOption = function() {
      var t = this._sourceHost, r, n, i;
      if (Ff(t))
        r = t.get("seriesLayoutBy", !0), n = t.get("sourceHeader", !0), i = t.get("dimensions", !0);
      else if (!this._getUpstreamSourceManagers().length) {
        var a = t;
        r = a.get("seriesLayoutBy", !0), n = a.get("sourceHeader", !0), i = a.get("dimensions", !0);
      }
      return {
        seriesLayoutBy: r,
        sourceHeader: n,
        dimensions: i
      };
    }, e;
  }()
);
function dN(e) {
  var t = e.option.transform;
  t && lh(e.option.transform);
}
function Ff(e) {
  return e.mainType === "series";
}
function hN(e) {
  throw new Error(e);
}
var Iae = "line-height:1";
function X6(e) {
  var t = e.lineHeight;
  return t == null ? Iae : "line-height:" + Zr(t + "") + "px";
}
function K6(e, t) {
  var r = e.color || "#6e7079", n = e.fontSize || 12, i = e.fontWeight || "400", a = e.color || "#464646", o = e.fontSize || 14, s = e.fontWeight || "900";
  return t === "html" ? {
    // eslint-disable-next-line max-len
    nameStyle: "font-size:" + Zr(n + "") + "px;color:" + Zr(r) + ";font-weight:" + Zr(i + ""),
    // eslint-disable-next-line max-len
    valueStyle: "font-size:" + Zr(o + "") + "px;color:" + Zr(a) + ";font-weight:" + Zr(s + "")
  } : {
    nameStyle: {
      fontSize: n,
      fill: r,
      fontWeight: i
    },
    valueStyle: {
      fontSize: o,
      fill: a,
      fontWeight: s
    }
  };
}
var Lae = [0, 10, 20, 30], Rae = ["", `
`, `

`, `


`];
function Tr(e, t) {
  return t.type = e, t;
}
function Tw(e) {
  return e.type === "section";
}
function q6(e) {
  return Tw(e) ? Pae : kae;
}
function J6(e) {
  if (Tw(e)) {
    var t = 0, r = e.blocks.length, n = r > 1 || r > 0 && !e.noHeader;
    return j(e.blocks, function(i) {
      var a = J6(i);
      a >= t && (t = a + +(n && // 0 always can not be readable gap level.
      (!a || Tw(i) && !i.noHeader)));
    }), t;
  }
  return 0;
}
function Pae(e, t, r, n) {
  var i = t.noHeader, a = Oae(J6(t)), o = [], s = t.blocks || [];
  Le(!s || le(s)), s = s || [];
  var l = e.orderMode;
  if (t.sortBlocks && l) {
    s = s.slice();
    var u = {
      valueAsc: "asc",
      valueDesc: "desc"
    };
    if (be(u, l)) {
      var c = new G6(u[l], null);
      s.sort(function(v, g) {
        return c.evaluate(v.sortParam, g.sortParam);
      });
    } else l === "seriesDesc" && s.reverse();
  }
  j(s, function(v, g) {
    var m = t.valueFormatter, y = q6(v)(
      // Inherit valueFormatter
      m ? ae(ae({}, e), {
        valueFormatter: m
      }) : e,
      v,
      g > 0 ? a.html : 0,
      n
    );
    y != null && o.push(y);
  });
  var f = e.renderMode === "richText" ? o.join(a.richText) : Aw(n, o.join(""), i ? r : a.html);
  if (i)
    return f;
  var d = xw(t.header, "ordinal", e.useUTC), h = K6(n, e.renderMode).nameStyle, p = X6(n);
  return e.renderMode === "richText" ? Q6(e, d, h) + a.richText + f : Aw(n, '<div style="' + h + ";" + p + ';">' + Zr(d) + "</div>" + f, r);
}
function kae(e, t, r, n) {
  var i = e.renderMode, a = t.noName, o = t.noValue, s = !t.markerType, l = t.name, u = e.useUTC, c = t.valueFormatter || e.valueFormatter || function(w) {
    return w = le(w) ? w : [w], ue(w, function(_, S) {
      return xw(_, le(h) ? h[S] : h, u);
    });
  };
  if (!(a && o)) {
    var f = s ? "" : e.markupStyleCreator.makeTooltipMarker(t.markerType, t.markerColor || "#333", i), d = a ? "" : xw(l, "ordinal", u), h = t.valueType, p = o ? [] : c(t.value, t.dataIndex), v = !s || !a, g = !s && a, m = K6(n, i), y = m.nameStyle, b = m.valueStyle;
    return i === "richText" ? (s ? "" : f) + (a ? "" : Q6(e, d, y)) + (o ? "" : Vae(e, p, v, g, b)) : Aw(n, (s ? "" : f) + (a ? "" : zae(d, !s, y)) + (o ? "" : jae(p, v, g, b)), r);
  }
}
function pN(e, t, r, n, i, a) {
  if (e) {
    var o = q6(e), s = {
      useUTC: i,
      renderMode: r,
      orderMode: n,
      markupStyleCreator: t,
      valueFormatter: e.valueFormatter
    };
    return o(s, e, 0, a);
  }
}
function Oae(e) {
  return {
    html: Lae[e],
    richText: Rae[e]
  };
}
function Aw(e, t, r) {
  var n = '<div style="clear:both"></div>', i = "margin: " + r + "px 0 0", a = X6(e);
  return '<div style="' + i + ";" + a + ';">' + t + n + "</div>";
}
function zae(e, t, r) {
  var n = t ? "margin-left:2px" : "";
  return '<span style="' + r + ";" + n + '">' + Zr(e) + "</span>";
}
function jae(e, t, r, n) {
  var i = r ? "10px" : "20px", a = t ? "float:right;margin-left:" + i : "";
  return e = le(e) ? e : [e], '<span style="' + a + ";" + n + '">' + ue(e, function(o) {
    return Zr(o);
  }).join("&nbsp;&nbsp;") + "</span>";
}
function Q6(e, t, r) {
  return e.markupStyleCreator.wrapRichTextStyle(t, r);
}
function Vae(e, t, r, n, i) {
  var a = [i], o = n ? 10 : 20;
  return r && a.push({
    padding: [0, 0, 0, o],
    align: "right"
  }), e.markupStyleCreator.wrapRichTextStyle(le(t) ? t.join("  ") : t, a);
}
function e8(e, t) {
  var r = e.getData().getItemVisual(t, "style"), n = r[e.visualDrawType];
  return Vl(n);
}
function t8(e, t) {
  var r = e.get("padding");
  return r ?? (t === "richText" ? [8, 10] : 10);
}
var rx = (
  /** @class */
  function() {
    function e() {
      this.richTextStyles = {}, this._nextStyleNameId = x9();
    }
    return e.prototype._generateStyleName = function() {
      return "__EC_aUTo_" + this._nextStyleNameId++;
    }, e.prototype.makeTooltipMarker = function(t, r, n) {
      var i = n === "richText" ? this._generateStyleName() : null, a = S6({
        color: r,
        type: t,
        renderMode: n,
        markerId: i
      });
      return ge(a) ? a : (process.env.NODE_ENV !== "production" && Le(i), this.richTextStyles[i] = a.style, a.content);
    }, e.prototype.wrapRichTextStyle = function(t, r) {
      var n = {};
      le(r) ? j(r, function(a) {
        return ae(n, a);
      }) : ae(n, r);
      var i = this._generateStyleName();
      return this.richTextStyles[i] = n, "{" + i + "|" + t + "}";
    }, e;
  }()
);
function r8(e) {
  var t = e.series, r = e.dataIndex, n = e.multipleSeries, i = t.getData(), a = i.mapDimensionsAll("defaultedTooltip"), o = a.length, s = t.getRawValue(r), l = le(s), u = e8(t, r), c, f, d, h;
  if (o > 1 || l && !o) {
    var p = Bae(s, t, r, a, u);
    c = p.inlineValues, f = p.inlineValueTypes, d = p.blocks, h = p.inlineValues[0];
  } else if (o) {
    var v = i.getDimensionInfo(a[0]);
    h = c = kc(i, r, a[0]), f = v.type;
  } else
    h = c = l ? s[0] : s;
  var g = aC(t), m = g && t.name || "", y = i.getName(r), b = n ? m : y;
  return Tr("section", {
    header: m,
    // When series name is not specified, do not show a header line with only '-'.
    // This case always happens in tooltip.trigger: 'item'.
    noHeader: n || !g,
    sortParam: h,
    blocks: [Tr("nameValue", {
      markerType: "item",
      markerColor: u,
      // Do not mix display seriesName and itemName in one tooltip,
      // which might confuses users.
      name: b,
      // name dimension might be auto assigned, where the name might
      // be not readable. So we check trim here.
      noName: !Xn(b),
      value: c,
      valueType: f,
      dataIndex: r
    })].concat(d || [])
  });
}
function Bae(e, t, r, n, i) {
  var a = t.getData(), o = ei(e, function(f, d, h) {
    var p = a.getDimensionInfo(h);
    return f = f || p && p.tooltip !== !1 && p.displayName != null;
  }, !1), s = [], l = [], u = [];
  n.length ? j(n, function(f) {
    c(kc(a, r, f), f);
  }) : j(e, c);
  function c(f, d) {
    var h = a.getDimensionInfo(d);
    !h || h.otherDims.tooltip === !1 || (o ? u.push(Tr("nameValue", {
      markerType: "subItem",
      markerColor: i,
      name: h.displayName,
      value: f,
      valueType: h.type
    })) : (s.push(f), l.push(h.type)));
  }
  return {
    inlineValues: s,
    inlineValueTypes: l,
    blocks: u
  };
}
var go = yt();
function sv(e, t) {
  return e.getName(t) || e.getId(t);
}
var yg = "__universalTransitionEnabled", zt = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r._selectedDataIndicesMap = {}, r;
    }
    return t.prototype.init = function(r, n, i) {
      this.seriesIndex = this.componentIndex, this.dataTask = Hd({
        count: $ae,
        reset: Hae
      }), this.dataTask.context = {
        model: this
      }, this.mergeDefaultAndTheme(r, i);
      var a = go(this).sourceManager = new Z6(this);
      a.prepareSource();
      var o = this.getInitialData(r, i);
      gN(o, this), this.dataTask.context.data = o, process.env.NODE_ENV !== "production" && Le(o, "getInitialData returned invalid data."), go(this).dataBeforeProcessed = o, vN(this), this._initSelectedMapFromData(o);
    }, t.prototype.mergeDefaultAndTheme = function(r, n) {
      var i = yh(this), a = i ? hf(r) : {}, o = this.subType;
      at.hasClass(o) && (o += "Series"), Xe(r, n.getTheme().get(this.subType)), Xe(r, this.getDefaultOption()), kl(r, "label", ["show"]), this.fillDataTextStyle(r.data), i && us(r, a, i);
    }, t.prototype.mergeOption = function(r, n) {
      r = Xe(this.option, r, !0), this.fillDataTextStyle(r.data);
      var i = yh(this);
      i && us(this.option, r, i);
      var a = go(this).sourceManager;
      a.dirty(), a.prepareSource();
      var o = this.getInitialData(r, n);
      gN(o, this), this.dataTask.dirty(), this.dataTask.context.data = o, go(this).dataBeforeProcessed = o, vN(this), this._initSelectedMapFromData(o);
    }, t.prototype.fillDataTextStyle = function(r) {
      if (r && !Kr(r))
        for (var n = ["show"], i = 0; i < r.length; i++)
          r[i] && r[i].label && kl(r[i], "label", n);
    }, t.prototype.getInitialData = function(r, n) {
    }, t.prototype.appendData = function(r) {
      var n = this.getRawData();
      n.appendData(r.data);
    }, t.prototype.getData = function(r) {
      var n = Mw(this);
      if (n) {
        var i = n.context.data;
        return r == null || !i.getLinkedData ? i : i.getLinkedData(r);
      } else
        return go(this).data;
    }, t.prototype.getAllData = function() {
      var r = this.getData();
      return r && r.getLinkedDataAll ? r.getLinkedDataAll() : [{
        data: r
      }];
    }, t.prototype.setData = function(r) {
      var n = Mw(this);
      if (n) {
        var i = n.context;
        i.outputData = r, n !== this.dataTask && (i.data = r);
      }
      go(this).data = r;
    }, t.prototype.getEncode = function() {
      var r = this.get("encode", !0);
      if (r)
        return Ce(r);
    }, t.prototype.getSourceManager = function() {
      return go(this).sourceManager;
    }, t.prototype.getSource = function() {
      return this.getSourceManager().getSource();
    }, t.prototype.getRawData = function() {
      return go(this).dataBeforeProcessed;
    }, t.prototype.getColorBy = function() {
      var r = this.get("colorBy");
      return r || "series";
    }, t.prototype.isColorBySeries = function() {
      return this.getColorBy() === "series";
    }, t.prototype.getBaseAxis = function() {
      var r = this.coordinateSystem;
      return r && r.getBaseAxis && r.getBaseAxis();
    }, t.prototype.formatTooltip = function(r, n, i) {
      return r8({
        series: this,
        dataIndex: r,
        multipleSeries: n
      });
    }, t.prototype.isAnimationEnabled = function() {
      var r = this.ecModel;
      if (st.node && !(r && r.ssr))
        return !1;
      var n = this.getShallow("animation");
      return n && this.getData().count() > this.getShallow("animationThreshold") && (n = !1), !!n;
    }, t.prototype.restoreData = function() {
      this.dataTask.dirty();
    }, t.prototype.getColorFromPalette = function(r, n, i) {
      var a = this.ecModel, o = PC.prototype.getColorFromPalette.call(this, r, n, i);
      return o || (o = a.getColorFromPalette(r, n, i)), o;
    }, t.prototype.coordDimToDataDim = function(r) {
      return this.getRawData().mapDimensionsAll(r);
    }, t.prototype.getProgressive = function() {
      return this.get("progressive");
    }, t.prototype.getProgressiveThreshold = function() {
      return this.get("progressiveThreshold");
    }, t.prototype.select = function(r, n) {
      this._innerSelect(this.getData(n), r);
    }, t.prototype.unselect = function(r, n) {
      var i = this.option.selectedMap;
      if (i) {
        var a = this.option.selectedMode, o = this.getData(n);
        if (a === "series" || i === "all") {
          this.option.selectedMap = {}, this._selectedDataIndicesMap = {};
          return;
        }
        for (var s = 0; s < r.length; s++) {
          var l = r[s], u = sv(o, l);
          i[u] = !1, this._selectedDataIndicesMap[u] = -1;
        }
      }
    }, t.prototype.toggleSelect = function(r, n) {
      for (var i = [], a = 0; a < r.length; a++)
        i[0] = r[a], this.isSelected(r[a], n) ? this.unselect(i, n) : this.select(i, n);
    }, t.prototype.getSelectedDataIndices = function() {
      if (this.option.selectedMap === "all")
        return [].slice.call(this.getData().getIndices());
      for (var r = this._selectedDataIndicesMap, n = ut(r), i = [], a = 0; a < n.length; a++) {
        var o = r[n[a]];
        o >= 0 && i.push(o);
      }
      return i;
    }, t.prototype.isSelected = function(r, n) {
      var i = this.option.selectedMap;
      if (!i)
        return !1;
      var a = this.getData(n);
      return (i === "all" || i[sv(a, r)]) && !a.getItemModel(r).get(["select", "disabled"]);
    }, t.prototype.isUniversalTransitionEnabled = function() {
      if (this[yg])
        return !0;
      var r = this.option.universalTransition;
      return r ? r === !0 ? !0 : r && r.enabled : !1;
    }, t.prototype._innerSelect = function(r, n) {
      var i, a, o = this.option, s = o.selectedMode, l = n.length;
      if (!(!s || !l)) {
        if (s === "series")
          o.selectedMap = "all";
        else if (s === "multiple") {
          Ne(o.selectedMap) || (o.selectedMap = {});
          for (var u = o.selectedMap, c = 0; c < l; c++) {
            var f = n[c], d = sv(r, f);
            u[d] = !0, this._selectedDataIndicesMap[d] = r.getRawIndex(f);
          }
        } else if (s === "single" || s === !0) {
          var h = n[l - 1], d = sv(r, h);
          o.selectedMap = (i = {}, i[d] = !0, i), this._selectedDataIndicesMap = (a = {}, a[d] = r.getRawIndex(h), a);
        }
      }
    }, t.prototype._initSelectedMapFromData = function(r) {
      if (!this.option.selectedMap) {
        var n = [];
        r.hasItemOption && r.each(function(i) {
          var a = r.getRawDataItem(i);
          a && a.selected && n.push(i);
        }), n.length > 0 && this._innerSelect(r, n);
      }
    }, t.registerClass = function(r) {
      return at.registerClass(r);
    }, t.protoInitialize = function() {
      var r = t.prototype;
      r.type = "series.__base__", r.seriesIndex = 0, r.ignoreStyleOnData = !1, r.hasSymbolVisual = !1, r.defaultSymbol = "circle", r.visualStyleAccessPath = "itemStyle", r.visualDrawType = "fill";
    }(), t;
  }(at)
);
ir(zt, Jy);
ir(zt, PC);
E9(zt, at);
function vN(e) {
  var t = e.name;
  aC(e) || (e.name = Fae(e) || t);
}
function Fae(e) {
  var t = e.getRawData(), r = t.mapDimensionsAll("seriesName"), n = [];
  return j(r, function(i) {
    var a = t.getDimensionInfo(i);
    a.displayName && n.push(a.displayName);
  }), n.join(" ");
}
function $ae(e) {
  return e.model.getRawData().count();
}
function Hae(e) {
  var t = e.model;
  return t.setData(t.getRawData().cloneShallow()), Gae;
}
function Gae(e, t) {
  t.outputData && e.end > t.outputData.count() && t.model.getRawData().cloneShallow(t.outputData);
}
function gN(e, t) {
  j(Nc(e.CHANGABLE_METHODS, e.DOWNSAMPLE_METHODS), function(r) {
    e.wrapMethod(r, We(Wae, t));
  });
}
function Wae(e, t) {
  var r = Mw(e);
  return r && r.setOutputEnd((t || this).count()), t;
}
function Mw(e) {
  var t = (e.ecModel || {}).scheduler, r = t && t.getPipeline(e.uid);
  if (r) {
    var n = r.currentTask;
    if (n) {
      var i = n.agentStubMap;
      i && (n = i.get(e.uid));
    }
    return n;
  }
}
var $t = (
  /** @class */
  function() {
    function e() {
      this.group = new Fe(), this.uid = df("viewComponent");
    }
    return e.prototype.init = function(t, r) {
    }, e.prototype.render = function(t, r, n, i) {
    }, e.prototype.dispose = function(t, r) {
    }, e.prototype.updateView = function(t, r, n, i) {
    }, e.prototype.updateLayout = function(t, r, n, i) {
    }, e.prototype.updateVisual = function(t, r, n, i) {
    }, e.prototype.toggleBlurSeries = function(t, r, n) {
    }, e.prototype.eachRendered = function(t) {
      var r = this.group;
      r && r.traverse(t);
    }, e;
  }()
);
sC($t);
Oy($t);
function vf() {
  var e = yt();
  return function(t) {
    var r = e(t), n = t.pipelineContext, i = !!r.large, a = !!r.progressiveRender, o = r.large = !!(n && n.large), s = r.progressiveRender = !!(n && n.progressiveRender);
    return (i !== o || a !== s) && "reset";
  };
}
var n8 = yt(), Uae = vf(), It = (
  /** @class */
  function() {
    function e() {
      this.group = new Fe(), this.uid = df("viewChart"), this.renderTask = Hd({
        plan: Yae,
        reset: Zae
      }), this.renderTask.context = {
        view: this
      };
    }
    return e.prototype.init = function(t, r) {
    }, e.prototype.render = function(t, r, n, i) {
      if (process.env.NODE_ENV !== "production")
        throw new Error("render method must been implemented");
    }, e.prototype.highlight = function(t, r, n, i) {
      var a = t.getData(i && i.dataType);
      if (!a) {
        process.env.NODE_ENV !== "production" && jr("Unknown dataType " + i.dataType);
        return;
      }
      yN(a, i, "emphasis");
    }, e.prototype.downplay = function(t, r, n, i) {
      var a = t.getData(i && i.dataType);
      if (!a) {
        process.env.NODE_ENV !== "production" && jr("Unknown dataType " + i.dataType);
        return;
      }
      yN(a, i, "normal");
    }, e.prototype.remove = function(t, r) {
      this.group.removeAll();
    }, e.prototype.dispose = function(t, r) {
    }, e.prototype.updateView = function(t, r, n, i) {
      this.render(t, r, n, i);
    }, e.prototype.updateLayout = function(t, r, n, i) {
      this.render(t, r, n, i);
    }, e.prototype.updateVisual = function(t, r, n, i) {
      this.render(t, r, n, i);
    }, e.prototype.eachRendered = function(t) {
      gs(this.group, t);
    }, e.markUpdateMethod = function(t, r) {
      n8(t).updateMethod = r;
    }, e.protoInitialize = function() {
      var t = e.prototype;
      t.type = "chart";
    }(), e;
  }()
);
function mN(e, t, r) {
  e && ss(e) && (t === "emphasis" ? Ka : qa)(e, r);
}
function yN(e, t, r) {
  var n = Ol(e, t), i = t && t.highlightKey != null ? Dne(t.highlightKey) : null;
  n != null ? j(Ot(n), function(a) {
    mN(e.getItemGraphicEl(a), r, i);
  }) : e.eachItemGraphicEl(function(a) {
    mN(a, r, i);
  });
}
sC(It, ["dispose"]);
Oy(It);
function Yae(e) {
  return Uae(e.model);
}
function Zae(e) {
  var t = e.model, r = e.ecModel, n = e.api, i = e.payload, a = t.pipelineContext.progressiveRender, o = e.view, s = i && n8(i).updateMethod, l = a ? "incrementalPrepareRender" : s && o[s] ? s : "render";
  return l !== "render" && o[l](t, r, n, i), Xae[l];
}
var Xae = {
  incrementalPrepareRender: {
    progress: function(e, t) {
      t.view.incrementalRender(e, t.model, t.ecModel, t.api, t.payload);
    }
  },
  render: {
    // Put view.render in `progress` to support appendData. But in this case
    // view.render should not be called in reset, otherwise it will be called
    // twise. Use `forceFirstProgress` to make sure that view.render is called
    // in any cases.
    forceFirstProgress: !0,
    progress: function(e, t) {
      t.view.render(t.model, t.ecModel, t.api, t.payload);
    }
  }
}, dm = "\0__throttleOriginMethod", xN = "\0__throttleRate", bN = "\0__throttleType";
function e0(e, t, r) {
  var n, i = 0, a = 0, o = null, s, l, u, c;
  t = t || 0;
  function f() {
    a = (/* @__PURE__ */ new Date()).getTime(), o = null, e.apply(l, u || []);
  }
  var d = function() {
    for (var h = [], p = 0; p < arguments.length; p++)
      h[p] = arguments[p];
    n = (/* @__PURE__ */ new Date()).getTime(), l = this, u = h;
    var v = c || t, g = c || r;
    c = null, s = n - (g ? i : a) - v, clearTimeout(o), g ? o = setTimeout(f, v) : s >= 0 ? f() : o = setTimeout(f, -s), i = n;
  };
  return d.clear = function() {
    o && (clearTimeout(o), o = null);
  }, d.debounceNextCall = function(h) {
    c = h;
  }, d;
}
function gf(e, t, r, n) {
  var i = e[t];
  if (i) {
    var a = i[dm] || i, o = i[bN], s = i[xN];
    if (s !== r || o !== n) {
      if (r == null || !n)
        return e[t] = a;
      i = e[t] = e0(a, r, n === "debounce"), i[dm] = a, i[bN] = n, i[xN] = r;
    }
    return i;
  }
}
function bh(e, t) {
  var r = e[t];
  r && r[dm] && (r.clear && r.clear(), e[t] = r[dm]);
}
var wN = yt(), _N = {
  itemStyle: zl(h6, !0),
  lineStyle: zl(d6, !0)
}, Kae = {
  lineStyle: "stroke",
  itemStyle: "fill"
};
function i8(e, t) {
  var r = e.visualStyleMapper || _N[t];
  return r || (console.warn("Unknown style type '" + t + "'."), _N.itemStyle);
}
function a8(e, t) {
  var r = e.visualDrawType || Kae[t];
  return r || (console.warn("Unknown style type '" + t + "'."), "fill");
}
var qae = {
  createOnAllSeries: !0,
  performRawSeries: !0,
  reset: function(e, t) {
    var r = e.getData(), n = e.visualStyleAccessPath || "itemStyle", i = e.getModel(n), a = i8(e, n), o = a(i), s = i.getShallow("decal");
    s && (r.setVisual("decal", s), s.dirty = !0);
    var l = a8(e, n), u = o[l], c = Ee(u) ? u : null, f = o.fill === "auto" || o.stroke === "auto";
    if (!o[l] || c || f) {
      var d = e.getColorFromPalette(
        // TODO series count changed.
        e.name,
        null,
        t.getSeriesCount()
      );
      o[l] || (o[l] = d, r.setVisual("colorFromPalette", !0)), o.fill = o.fill === "auto" || Ee(o.fill) ? d : o.fill, o.stroke = o.stroke === "auto" || Ee(o.stroke) ? d : o.stroke;
    }
    if (r.setVisual("style", o), r.setVisual("drawType", l), !t.isSeriesFiltered(e) && c)
      return r.setVisual("colorFromPalette", !1), {
        dataEach: function(h, p) {
          var v = e.getDataParams(p), g = ae({}, o);
          g[l] = c(v), h.setItemVisual(p, "style", g);
        }
      };
  }
}, $f = new Tt(), Jae = {
  createOnAllSeries: !0,
  performRawSeries: !0,
  reset: function(e, t) {
    if (!(e.ignoreStyleOnData || t.isSeriesFiltered(e))) {
      var r = e.getData(), n = e.visualStyleAccessPath || "itemStyle", i = i8(e, n), a = r.getVisual("drawType");
      return {
        dataEach: r.hasItemOption ? function(o, s) {
          var l = o.getRawDataItem(s);
          if (l && l[n]) {
            $f.option = l[n];
            var u = i($f), c = o.ensureUniqueItemVisual(s, "style");
            ae(c, u), $f.option.decal && (o.setItemVisual(s, "decal", $f.option.decal), $f.option.decal.dirty = !0), a in u && o.setItemVisual(s, "colorFromPalette", !1);
          }
        } : null
      };
    }
  }
}, Qae = {
  performRawSeries: !0,
  overallReset: function(e) {
    var t = Ce();
    e.eachSeries(function(r) {
      var n = r.getColorBy();
      if (!r.isColorBySeries()) {
        var i = r.type + "-" + n, a = t.get(i);
        a || (a = {}, t.set(i, a)), wN(r).scope = a;
      }
    }), e.eachSeries(function(r) {
      if (!(r.isColorBySeries() || e.isSeriesFiltered(r))) {
        var n = r.getRawData(), i = {}, a = r.getData(), o = wN(r).scope, s = r.visualStyleAccessPath || "itemStyle", l = a8(r, s);
        a.each(function(u) {
          var c = a.getRawIndex(u);
          i[c] = u;
        }), n.each(function(u) {
          var c = i[u], f = a.getItemVisual(c, "colorFromPalette");
          if (f) {
            var d = a.ensureUniqueItemVisual(c, "style"), h = n.getName(u) || u + "", p = n.count();
            d[l] = r.getColorFromPalette(h, o, p);
          }
        });
      }
    });
  }
}, lv = Math.PI;
function eoe(e, t) {
  t = t || {}, Ie(t, {
    text: "loading",
    textColor: "#000",
    fontSize: 12,
    fontWeight: "normal",
    fontStyle: "normal",
    fontFamily: "sans-serif",
    maskColor: "rgba(255, 255, 255, 0.8)",
    showSpinner: !0,
    color: "#5470c6",
    spinnerRadius: 10,
    lineWidth: 5,
    zlevel: 0
  });
  var r = new Fe(), n = new vt({
    style: {
      fill: t.maskColor
    },
    zlevel: t.zlevel,
    z: 1e4
  });
  r.add(n);
  var i = new pt({
    style: {
      text: t.text,
      fill: t.textColor,
      fontSize: t.fontSize,
      fontWeight: t.fontWeight,
      fontStyle: t.fontStyle,
      fontFamily: t.fontFamily
    },
    zlevel: t.zlevel,
    z: 10001
  }), a = new vt({
    style: {
      fill: "none"
    },
    textContent: i,
    textConfig: {
      position: "right",
      distance: 10
    },
    zlevel: t.zlevel,
    z: 10001
  });
  r.add(a);
  var o;
  return t.showSpinner && (o = new np({
    shape: {
      startAngle: -lv / 2,
      endAngle: -lv / 2 + 0.1,
      r: t.spinnerRadius
    },
    style: {
      stroke: t.color,
      lineCap: "round",
      lineWidth: t.lineWidth
    },
    zlevel: t.zlevel,
    z: 10001
  }), o.animateShape(!0).when(1e3, {
    endAngle: lv * 3 / 2
  }).start("circularInOut"), o.animateShape(!0).when(1e3, {
    startAngle: lv * 3 / 2
  }).delay(300).start("circularInOut"), r.add(o)), r.resize = function() {
    var s = i.getBoundingRect().width, l = t.showSpinner ? t.spinnerRadius : 0, u = (e.getWidth() - l * 2 - (t.showSpinner && s ? 10 : 0) - s) / 2 - (t.showSpinner && s ? 0 : 5 + s / 2) + (t.showSpinner ? 0 : s / 2) + (s ? 0 : l), c = e.getHeight() / 2;
    t.showSpinner && o.setShape({
      cx: u,
      cy: c
    }), a.setShape({
      x: u - l,
      y: c - l,
      width: l * 2,
      height: l * 2
    }), n.setShape({
      x: 0,
      y: 0,
      width: e.getWidth(),
      height: e.getHeight()
    });
  }, r.resize(), r;
}
var o8 = (
  /** @class */
  function() {
    function e(t, r, n, i) {
      this._stageTaskMap = Ce(), this.ecInstance = t, this.api = r, n = this._dataProcessorHandlers = n.slice(), i = this._visualHandlers = i.slice(), this._allHandlers = n.concat(i);
    }
    return e.prototype.restoreData = function(t, r) {
      t.restoreData(r), this._stageTaskMap.each(function(n) {
        var i = n.overallTask;
        i && i.dirty();
      });
    }, e.prototype.getPerformArgs = function(t, r) {
      if (t.__pipeline) {
        var n = this._pipelineMap.get(t.__pipeline.id), i = n.context, a = !r && n.progressiveEnabled && (!i || i.progressiveRender) && t.__idxInPipeline > n.blockIndex, o = a ? n.step : null, s = i && i.modDataCount, l = s != null ? Math.ceil(s / o) : null;
        return {
          step: o,
          modBy: l,
          modDataCount: s
        };
      }
    }, e.prototype.getPipeline = function(t) {
      return this._pipelineMap.get(t);
    }, e.prototype.updateStreamModes = function(t, r) {
      var n = this._pipelineMap.get(t.uid), i = t.getData(), a = i.count(), o = n.progressiveEnabled && r.incrementalPrepareRender && a >= n.threshold, s = t.get("large") && a >= t.get("largeThreshold"), l = t.get("progressiveChunkMode") === "mod" ? a : null;
      t.pipelineContext = n.context = {
        progressiveRender: o,
        modDataCount: l,
        large: s
      };
    }, e.prototype.restorePipelines = function(t) {
      var r = this, n = r._pipelineMap = Ce();
      t.eachSeries(function(i) {
        var a = i.getProgressive(), o = i.uid;
        n.set(o, {
          id: o,
          head: null,
          tail: null,
          threshold: i.getProgressiveThreshold(),
          progressiveEnabled: a && !(i.preventIncremental && i.preventIncremental()),
          blockIndex: -1,
          step: Math.round(a || 700),
          count: 0
        }), r._pipe(i, i.dataTask);
      });
    }, e.prototype.prepareStageTasks = function() {
      var t = this._stageTaskMap, r = this.api.getModel(), n = this.api;
      j(this._allHandlers, function(i) {
        var a = t.get(i.uid) || t.set(i.uid, {}), o = "";
        process.env.NODE_ENV !== "production" && (o = '"reset" and "overallReset" must not be both specified.'), Le(!(i.reset && i.overallReset), o), i.reset && this._createSeriesStageTask(i, a, r, n), i.overallReset && this._createOverallStageTask(i, a, r, n);
      }, this);
    }, e.prototype.prepareView = function(t, r, n, i) {
      var a = t.renderTask, o = a.context;
      o.model = r, o.ecModel = n, o.api = i, a.__block = !t.incrementalPrepareRender, this._pipe(r, a);
    }, e.prototype.performDataProcessorTasks = function(t, r) {
      this._performStageTasks(this._dataProcessorHandlers, t, r, {
        block: !0
      });
    }, e.prototype.performVisualTasks = function(t, r, n) {
      this._performStageTasks(this._visualHandlers, t, r, n);
    }, e.prototype._performStageTasks = function(t, r, n, i) {
      i = i || {};
      var a = !1, o = this;
      j(t, function(l, u) {
        if (!(i.visualType && i.visualType !== l.visualType)) {
          var c = o._stageTaskMap.get(l.uid), f = c.seriesTaskMap, d = c.overallTask;
          if (d) {
            var h, p = d.agentStubMap;
            p.each(function(g) {
              s(i, g) && (g.dirty(), h = !0);
            }), h && d.dirty(), o.updatePayload(d, n);
            var v = o.getPerformArgs(d, i.block);
            p.each(function(g) {
              g.perform(v);
            }), d.perform(v) && (a = !0);
          } else f && f.each(function(g, m) {
            s(i, g) && g.dirty();
            var y = o.getPerformArgs(g, i.block);
            y.skip = !l.performRawSeries && r.isSeriesFiltered(g.context.model), o.updatePayload(g, n), g.perform(y) && (a = !0);
          });
        }
      });
      function s(l, u) {
        return l.setDirty && (!l.dirtyMap || l.dirtyMap.get(u.__pipeline.id));
      }
      this.unfinished = a || this.unfinished;
    }, e.prototype.performSeriesTasks = function(t) {
      var r;
      t.eachSeries(function(n) {
        r = n.dataTask.perform() || r;
      }), this.unfinished = r || this.unfinished;
    }, e.prototype.plan = function() {
      this._pipelineMap.each(function(t) {
        var r = t.tail;
        do {
          if (r.__block) {
            t.blockIndex = r.__idxInPipeline;
            break;
          }
          r = r.getUpstream();
        } while (r);
      });
    }, e.prototype.updatePayload = function(t, r) {
      r !== "remain" && (t.context.payload = r);
    }, e.prototype._createSeriesStageTask = function(t, r, n, i) {
      var a = this, o = r.seriesTaskMap, s = r.seriesTaskMap = Ce(), l = t.seriesType, u = t.getTargetSeries;
      t.createOnAllSeries ? n.eachRawSeries(c) : l ? n.eachRawSeriesByType(l, c) : u && u(n, i).each(c);
      function c(f) {
        var d = f.uid, h = s.set(d, o && o.get(d) || Hd({
          plan: aoe,
          reset: ooe,
          count: loe
        }));
        h.context = {
          model: f,
          ecModel: n,
          api: i,
          // PENDING: `useClearVisual` not used?
          useClearVisual: t.isVisual && !t.isLayout,
          plan: t.plan,
          reset: t.reset,
          scheduler: a
        }, a._pipe(f, h);
      }
    }, e.prototype._createOverallStageTask = function(t, r, n, i) {
      var a = this, o = r.overallTask = r.overallTask || Hd({
        reset: toe
      });
      o.context = {
        ecModel: n,
        api: i,
        overallReset: t.overallReset,
        scheduler: a
      };
      var s = o.agentStubMap, l = o.agentStubMap = Ce(), u = t.seriesType, c = t.getTargetSeries, f = !0, d = !1, h = "";
      process.env.NODE_ENV !== "production" && (h = '"createOnAllSeries" is not supported for "overallReset", because it will block all streams.'), Le(!t.createOnAllSeries, h), u ? n.eachRawSeriesByType(u, p) : c ? c(n, i).each(p) : (f = !1, j(n.getSeries(), p));
      function p(v) {
        var g = v.uid, m = l.set(g, s && s.get(g) || // When the result of `getTargetSeries` changed, the overallTask
        // should be set as dirty and re-performed.
        (d = !0, Hd({
          reset: roe,
          onDirty: ioe
        })));
        m.context = {
          model: v,
          overallProgress: f
          // FIXME:TS never used, so comment it
          // modifyOutputEnd: modifyOutputEnd
        }, m.agent = o, m.__block = f, a._pipe(v, m);
      }
      d && o.dirty();
    }, e.prototype._pipe = function(t, r) {
      var n = t.uid, i = this._pipelineMap.get(n);
      !i.head && (i.head = r), i.tail && i.tail.pipe(r), i.tail = r, r.__idxInPipeline = i.count++, r.__pipeline = i;
    }, e.wrapStageHandler = function(t, r) {
      return Ee(t) && (t = {
        overallReset: t,
        seriesType: uoe(t)
      }), t.uid = df("stageHandler"), r && (t.visualType = r), t;
    }, e;
  }()
);
function toe(e) {
  e.overallReset(e.ecModel, e.api, e.payload);
}
function roe(e) {
  return e.overallProgress && noe;
}
function noe() {
  this.agent.dirty(), this.getDownstream().dirty();
}
function ioe() {
  this.agent && this.agent.dirty();
}
function aoe(e) {
  return e.plan ? e.plan(e.model, e.ecModel, e.api, e.payload) : null;
}
function ooe(e) {
  e.useClearVisual && e.data.clearAllVisual();
  var t = e.resetDefines = Ot(e.reset(e.model, e.ecModel, e.api, e.payload));
  return t.length > 1 ? ue(t, function(r, n) {
    return s8(n);
  }) : soe;
}
var soe = s8(0);
function s8(e) {
  return function(t, r) {
    var n = r.data, i = r.resetDefines[e];
    if (i && i.dataEach)
      for (var a = t.start; a < t.end; a++)
        i.dataEach(n, a);
    else i && i.progress && i.progress(t, n);
  };
}
function loe(e) {
  return e.data.count();
}
function uoe(e) {
  hm = null;
  try {
    e(wh, l8);
  } catch {
  }
  return hm;
}
var wh = {}, l8 = {}, hm;
u8(wh, kC);
u8(l8, R6);
wh.eachSeriesByType = wh.eachRawSeriesByType = function(e) {
  hm = e;
};
wh.eachComponent = function(e) {
  e.mainType === "series" && e.subType && (hm = e.subType);
};
function u8(e, t) {
  for (var r in t.prototype)
    e[r] = rr;
}
var SN = ["#37A2DA", "#32C5E9", "#67E0E3", "#9FE6B8", "#FFDB5C", "#ff9f7f", "#fb7293", "#E062AE", "#E690D1", "#e7bcf3", "#9d96f5", "#8378EA", "#96BFFF"];
const coe = {
  color: SN,
  colorLayer: [["#37A2DA", "#ffd85c", "#fd7b5f"], ["#37A2DA", "#67E0E3", "#FFDB5C", "#ff9f7f", "#E062AE", "#9d96f5"], ["#37A2DA", "#32C5E9", "#9FE6B8", "#FFDB5C", "#ff9f7f", "#fb7293", "#e7bcf3", "#8378EA", "#96BFFF"], SN]
};
var Wr = "#B9B8CE", CN = "#100C2A", uv = function() {
  return {
    axisLine: {
      lineStyle: {
        color: Wr
      }
    },
    splitLine: {
      lineStyle: {
        color: "#484753"
      }
    },
    splitArea: {
      areaStyle: {
        color: ["rgba(255,255,255,0.02)", "rgba(255,255,255,0.05)"]
      }
    },
    minorSplitLine: {
      lineStyle: {
        color: "#20203B"
      }
    }
  };
}, TN = ["#4992ff", "#7cffb2", "#fddd60", "#ff6e76", "#58d9f9", "#05c091", "#ff8a45", "#8d48e3", "#dd79ff"], c8 = {
  darkMode: !0,
  color: TN,
  backgroundColor: CN,
  axisPointer: {
    lineStyle: {
      color: "#817f91"
    },
    crossStyle: {
      color: "#817f91"
    },
    label: {
      // TODO Contrast of label backgorundColor
      color: "#fff"
    }
  },
  legend: {
    textStyle: {
      color: Wr
    },
    pageTextStyle: {
      color: Wr
    }
  },
  textStyle: {
    color: Wr
  },
  title: {
    textStyle: {
      color: "#EEF1FA"
    },
    subtextStyle: {
      color: "#B9B8CE"
    }
  },
  toolbox: {
    iconStyle: {
      borderColor: Wr
    }
  },
  dataZoom: {
    borderColor: "#71708A",
    textStyle: {
      color: Wr
    },
    brushStyle: {
      color: "rgba(135,163,206,0.3)"
    },
    handleStyle: {
      color: "#353450",
      borderColor: "#C5CBE3"
    },
    moveHandleStyle: {
      color: "#B0B6C3",
      opacity: 0.3
    },
    fillerColor: "rgba(135,163,206,0.2)",
    emphasis: {
      handleStyle: {
        borderColor: "#91B7F2",
        color: "#4D587D"
      },
      moveHandleStyle: {
        color: "#636D9A",
        opacity: 0.7
      }
    },
    dataBackground: {
      lineStyle: {
        color: "#71708A",
        width: 1
      },
      areaStyle: {
        color: "#71708A"
      }
    },
    selectedDataBackground: {
      lineStyle: {
        color: "#87A3CE"
      },
      areaStyle: {
        color: "#87A3CE"
      }
    }
  },
  visualMap: {
    textStyle: {
      color: Wr
    }
  },
  timeline: {
    lineStyle: {
      color: Wr
    },
    label: {
      color: Wr
    },
    controlStyle: {
      color: Wr,
      borderColor: Wr
    }
  },
  calendar: {
    itemStyle: {
      color: CN
    },
    dayLabel: {
      color: Wr
    },
    monthLabel: {
      color: Wr
    },
    yearLabel: {
      color: Wr
    }
  },
  timeAxis: uv(),
  logAxis: uv(),
  valueAxis: uv(),
  categoryAxis: uv(),
  line: {
    symbol: "circle"
  },
  graph: {
    color: TN
  },
  gauge: {
    title: {
      color: Wr
    },
    axisLine: {
      lineStyle: {
        color: [[1, "rgba(207,212,219,0.2)"]]
      }
    },
    axisLabel: {
      color: Wr
    },
    detail: {
      color: "#EEF1FA"
    }
  },
  candlestick: {
    itemStyle: {
      color: "#f64e56",
      color0: "#54ea92",
      borderColor: "#f64e56",
      borderColor0: "#54ea92"
      // borderColor: '#ca2824',
      // borderColor0: '#09a443'
    }
  }
};
c8.categoryAxis.splitLine.show = !1;
var foe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.normalizeQuery = function(t) {
      var r = {}, n = {}, i = {};
      if (ge(t)) {
        var a = Ki(t);
        r.mainType = a.main || null, r.subType = a.sub || null;
      } else {
        var o = ["Index", "Name", "Id"], s = {
          name: 1,
          dataIndex: 1,
          dataType: 1
        };
        j(t, function(l, u) {
          for (var c = !1, f = 0; f < o.length; f++) {
            var d = o[f], h = u.lastIndexOf(d);
            if (h > 0 && h === u.length - d.length) {
              var p = u.slice(0, h);
              p !== "data" && (r.mainType = p, r[d.toLowerCase()] = l, c = !0);
            }
          }
          s.hasOwnProperty(u) && (n[u] = l, c = !0), c || (i[u] = l);
        });
      }
      return {
        cptQuery: r,
        dataQuery: n,
        otherQuery: i
      };
    }, e.prototype.filter = function(t, r) {
      var n = this.eventInfo;
      if (!n)
        return !0;
      var i = n.targetEl, a = n.packedEvent, o = n.model, s = n.view;
      if (!o || !s)
        return !0;
      var l = r.cptQuery, u = r.dataQuery;
      return c(l, o, "mainType") && c(l, o, "subType") && c(l, o, "index", "componentIndex") && c(l, o, "name") && c(l, o, "id") && c(u, a, "name") && c(u, a, "dataIndex") && c(u, a, "dataType") && (!s.filterForExposedEvent || s.filterForExposedEvent(t, r.otherQuery, i, a));
      function c(f, d, h, p) {
        return f[h] == null || d[p || h] === f[h];
      }
    }, e.prototype.afterTrigger = function() {
      this.eventInfo = null;
    }, e;
  }()
), Ew = ["symbol", "symbolSize", "symbolRotate", "symbolOffset"], AN = Ew.concat(["symbolKeepAspect"]), doe = {
  createOnAllSeries: !0,
  // For legend.
  performRawSeries: !0,
  reset: function(e, t) {
    var r = e.getData();
    if (e.legendIcon && r.setVisual("legendIcon", e.legendIcon), !e.hasSymbolVisual)
      return;
    for (var n = {}, i = {}, a = !1, o = 0; o < Ew.length; o++) {
      var s = Ew[o], l = e.get(s);
      Ee(l) ? (a = !0, i[s] = l) : n[s] = l;
    }
    if (n.symbol = n.symbol || e.defaultSymbol, r.setVisual(ae({
      legendIcon: e.legendIcon || n.symbol,
      symbolKeepAspect: e.get("symbolKeepAspect")
    }, n)), t.isSeriesFiltered(e))
      return;
    var u = ut(i);
    function c(f, d) {
      for (var h = e.getRawValue(d), p = e.getDataParams(d), v = 0; v < u.length; v++) {
        var g = u[v];
        f.setItemVisual(d, g, i[g](h, p));
      }
    }
    return {
      dataEach: a ? c : null
    };
  }
}, hoe = {
  createOnAllSeries: !0,
  // For legend.
  performRawSeries: !0,
  reset: function(e, t) {
    if (!e.hasSymbolVisual || t.isSeriesFiltered(e))
      return;
    var r = e.getData();
    function n(i, a) {
      for (var o = i.getItemModel(a), s = 0; s < AN.length; s++) {
        var l = AN[s], u = o.getShallow(l, !0);
        u != null && i.setItemVisual(a, l, u);
      }
    }
    return {
      dataEach: r.hasItemOption ? n : null
    };
  }
};
function BC(e, t, r) {
  switch (r) {
    case "color":
      var n = e.getItemVisual(t, "style");
      return n[e.getVisual("drawType")];
    case "opacity":
      return e.getItemVisual(t, "style").opacity;
    case "symbol":
    case "symbolSize":
    case "liftZ":
      return e.getItemVisual(t, r);
    default:
      process.env.NODE_ENV !== "production" && console.warn("Unknown visual type " + r);
  }
}
function sp(e, t) {
  switch (t) {
    case "color":
      var r = e.getVisual("style");
      return r[e.getVisual("drawType")];
    case "opacity":
      return e.getVisual("style").opacity;
    case "symbol":
    case "symbolSize":
    case "liftZ":
      return e.getVisual(t);
    default:
      process.env.NODE_ENV !== "production" && console.warn("Unknown visual type " + t);
  }
}
function f8(e, t, r, n) {
  switch (r) {
    case "color":
      var i = e.ensureUniqueItemVisual(t, "style");
      i[e.getVisual("drawType")] = n, e.setItemVisual(t, "colorFromPalette", !1);
      break;
    case "opacity":
      e.ensureUniqueItemVisual(t, "style").opacity = n;
      break;
    case "symbol":
    case "symbolSize":
    case "liftZ":
      e.setItemVisual(t, r, n);
      break;
    default:
      process.env.NODE_ENV !== "production" && console.warn("Unknown visual type " + r);
  }
}
function d8(e, t) {
  function r(n, i) {
    var a = [];
    return n.eachComponent({
      mainType: "series",
      subType: e,
      query: i
    }, function(o) {
      a.push(o.seriesIndex);
    }), a;
  }
  j([[e + "ToggleSelect", "toggleSelect"], [e + "Select", "select"], [e + "UnSelect", "unselect"]], function(n) {
    t(n[0], function(i, a, o) {
      i = ae({}, i), process.env.NODE_ENV !== "production" && sr(i.type, n[1]), o.dispatchAction(ae(i, {
        type: n[1],
        seriesIndex: r(a, i)
      }));
    });
  });
}
function Tu(e, t, r, n, i) {
  var a = e + t;
  r.isSilent(a) || (process.env.NODE_ENV !== "production" && ti("event " + a + " is deprecated."), n.eachComponent({
    mainType: "series",
    subType: "pie"
  }, function(o) {
    for (var s = o.seriesIndex, l = o.option.selectedMap, u = i.selected, c = 0; c < u.length; c++)
      if (u[c].seriesIndex === s) {
        var f = o.getData(), d = Ol(f, i.fromActionPayload);
        r.trigger(a, {
          type: a,
          seriesId: o.id,
          name: le(d) ? f.getName(d[0]) : f.getName(d),
          selected: ge(l) ? l : ae({}, l)
        });
      }
  }));
}
function poe(e, t, r) {
  e.on("selectchanged", function(n) {
    var i = r.getModel();
    n.isFromClick ? (Tu("map", "selectchanged", t, i, n), Tu("pie", "selectchanged", t, i, n)) : n.fromAction === "select" ? (Tu("map", "selected", t, i, n), Tu("pie", "selected", t, i, n)) : n.fromAction === "unselect" && (Tu("map", "unselected", t, i, n), Tu("pie", "unselected", t, i, n));
  });
}
function pl(e, t, r) {
  for (var n; e && !(t(e) && (n = e, r)); )
    e = e.__hostTarget || e.parent;
  return n;
}
var voe = Math.round(Math.random() * 9), goe = typeof Object.defineProperty == "function", moe = function() {
  function e() {
    this._id = "__ec_inner_" + voe++;
  }
  return e.prototype.get = function(t) {
    return this._guard(t)[this._id];
  }, e.prototype.set = function(t, r) {
    var n = this._guard(t);
    return goe ? Object.defineProperty(n, this._id, {
      value: r,
      enumerable: !1,
      configurable: !0
    }) : n[this._id] = r, this;
  }, e.prototype.delete = function(t) {
    return this.has(t) ? (delete this._guard(t)[this._id], !0) : !1;
  }, e.prototype.has = function(t) {
    return !!this._guard(t)[this._id];
  }, e.prototype._guard = function(t) {
    if (t !== Object(t))
      throw TypeError("Value of WeakMap is not a non-null object.");
    return t;
  }, e;
}(), yoe = lt.extend({
  type: "triangle",
  shape: {
    cx: 0,
    cy: 0,
    width: 0,
    height: 0
  },
  buildPath: function(e, t) {
    var r = t.cx, n = t.cy, i = t.width / 2, a = t.height / 2;
    e.moveTo(r, n - a), e.lineTo(r + i, n + a), e.lineTo(r - i, n + a), e.closePath();
  }
}), xoe = lt.extend({
  type: "diamond",
  shape: {
    cx: 0,
    cy: 0,
    width: 0,
    height: 0
  },
  buildPath: function(e, t) {
    var r = t.cx, n = t.cy, i = t.width / 2, a = t.height / 2;
    e.moveTo(r, n - a), e.lineTo(r + i, n), e.lineTo(r, n + a), e.lineTo(r - i, n), e.closePath();
  }
}), boe = lt.extend({
  type: "pin",
  shape: {
    // x, y on the cusp
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  buildPath: function(e, t) {
    var r = t.x, n = t.y, i = t.width / 5 * 3, a = Math.max(i, t.height), o = i / 2, s = o * o / (a - o), l = n - a + o + s, u = Math.asin(s / o), c = Math.cos(u) * o, f = Math.sin(u), d = Math.cos(u), h = o * 0.6, p = o * 0.7;
    e.moveTo(r - c, l + s), e.arc(r, l, o, Math.PI - u, Math.PI * 2 + u), e.bezierCurveTo(r + c - f * h, l + s + d * h, r, n - p, r, n), e.bezierCurveTo(r, n - p, r - c + f * h, l + s + d * h, r - c, l + s), e.closePath();
  }
}), woe = lt.extend({
  type: "arrow",
  shape: {
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  buildPath: function(e, t) {
    var r = t.height, n = t.width, i = t.x, a = t.y, o = n / 3 * 2;
    e.moveTo(i, a), e.lineTo(i + o, a + r), e.lineTo(i, a + r / 4 * 3), e.lineTo(i - o, a + r), e.lineTo(i, a), e.closePath();
  }
}), _oe = {
  line: xr,
  rect: vt,
  roundRect: vt,
  square: vt,
  circle: da,
  diamond: xoe,
  pin: boe,
  arrow: woe,
  triangle: yoe
}, Soe = {
  line: function(e, t, r, n, i) {
    i.x1 = e, i.y1 = t + n / 2, i.x2 = e + r, i.y2 = t + n / 2;
  },
  rect: function(e, t, r, n, i) {
    i.x = e, i.y = t, i.width = r, i.height = n;
  },
  roundRect: function(e, t, r, n, i) {
    i.x = e, i.y = t, i.width = r, i.height = n, i.r = Math.min(r, n) / 4;
  },
  square: function(e, t, r, n, i) {
    var a = Math.min(r, n);
    i.x = e, i.y = t, i.width = a, i.height = a;
  },
  circle: function(e, t, r, n, i) {
    i.cx = e + r / 2, i.cy = t + n / 2, i.r = Math.min(r, n) / 2;
  },
  diamond: function(e, t, r, n, i) {
    i.cx = e + r / 2, i.cy = t + n / 2, i.width = r, i.height = n;
  },
  pin: function(e, t, r, n, i) {
    i.x = e + r / 2, i.y = t + n / 2, i.width = r, i.height = n;
  },
  arrow: function(e, t, r, n, i) {
    i.x = e + r / 2, i.y = t + n / 2, i.width = r, i.height = n;
  },
  triangle: function(e, t, r, n, i) {
    i.cx = e + r / 2, i.cy = t + n / 2, i.width = r, i.height = n;
  }
}, pm = {};
j(_oe, function(e, t) {
  pm[t] = new e();
});
var Coe = lt.extend({
  type: "symbol",
  shape: {
    symbolType: "",
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  calculateTextPosition: function(e, t, r) {
    var n = tm(e, t, r), i = this.shape;
    return i && i.symbolType === "pin" && t.position === "inside" && (n.y = r.y + r.height * 0.4), n;
  },
  buildPath: function(e, t, r) {
    var n = t.symbolType;
    if (n !== "none") {
      var i = pm[n];
      i || (n = "rect", i = pm[n]), Soe[n](t.x, t.y, t.width, t.height, i.shape), i.buildPath(e, i.shape, r);
    }
  }
});
function Toe(e, t) {
  if (this.type !== "image") {
    var r = this.style;
    this.__isEmptyBrush ? (r.stroke = e, r.fill = t || "#fff", r.lineWidth = 2) : this.shape.symbolType === "line" ? r.stroke = e : r.fill = e, this.markRedraw();
  }
}
function fr(e, t, r, n, i, a, o) {
  var s = e.indexOf("empty") === 0;
  s && (e = e.substr(5, 1).toLowerCase() + e.substr(6));
  var l;
  return e.indexOf("image://") === 0 ? l = yC(e.slice(8), new tt(t, r, n, i), o ? "center" : "cover") : e.indexOf("path://") === 0 ? l = ip(e.slice(7), {}, new tt(t, r, n, i), o ? "center" : "cover") : l = new Coe({
    shape: {
      symbolType: e,
      x: t,
      y: r,
      width: n,
      height: i
    }
  }), l.__isEmptyBrush = s, l.setColor = Toe, a && l.setColor(a), l;
}
function mf(e) {
  return le(e) || (e = [+e, +e]), [e[0] || 0, e[1] || 0];
}
function ql(e, t) {
  if (e != null)
    return le(e) || (e = [e, e]), [pe(e[0], t[0]) || 0, pe(Ge(e[1], e[0]), t[1]) || 0];
}
function vl(e) {
  return isFinite(e);
}
function Aoe(e, t, r) {
  var n = t.x == null ? 0 : t.x, i = t.x2 == null ? 1 : t.x2, a = t.y == null ? 0 : t.y, o = t.y2 == null ? 0 : t.y2;
  t.global || (n = n * r.width + r.x, i = i * r.width + r.x, a = a * r.height + r.y, o = o * r.height + r.y), n = vl(n) ? n : 0, i = vl(i) ? i : 1, a = vl(a) ? a : 0, o = vl(o) ? o : 0;
  var s = e.createLinearGradient(n, a, i, o);
  return s;
}
function Moe(e, t, r) {
  var n = r.width, i = r.height, a = Math.min(n, i), o = t.x == null ? 0.5 : t.x, s = t.y == null ? 0.5 : t.y, l = t.r == null ? 0.5 : t.r;
  t.global || (o = o * n + r.x, s = s * i + r.y, l = l * a), o = vl(o) ? o : 0.5, s = vl(s) ? s : 0.5, l = l >= 0 && vl(l) ? l : 0.5;
  var u = e.createRadialGradient(o, s, 0, o, s, l);
  return u;
}
function Dw(e, t, r) {
  for (var n = t.type === "radial" ? Moe(e, t, r) : Aoe(e, t, r), i = t.colorStops, a = 0; a < i.length; a++)
    n.addColorStop(i[a].offset, i[a].color);
  return n;
}
function Eoe(e, t) {
  if (e === t || !e && !t)
    return !1;
  if (!e || !t || e.length !== t.length)
    return !0;
  for (var r = 0; r < e.length; r++)
    if (e[r] !== t[r])
      return !0;
  return !1;
}
function cv(e) {
  return parseInt(e, 10);
}
function nc(e, t, r) {
  var n = ["width", "height"][t], i = ["clientWidth", "clientHeight"][t], a = ["paddingLeft", "paddingTop"][t], o = ["paddingRight", "paddingBottom"][t];
  if (r[n] != null && r[n] !== "auto")
    return parseFloat(r[n]);
  var s = document.defaultView.getComputedStyle(e);
  return (e[i] || cv(s[n]) || cv(e.style[n])) - (cv(s[a]) || 0) - (cv(s[o]) || 0) | 0;
}
function Doe(e, t) {
  return !e || e === "solid" || !(t > 0) ? null : e === "dashed" ? [4 * t, 2 * t] : e === "dotted" ? [t] : bt(e) ? [e] : le(e) ? e : null;
}
function FC(e) {
  var t = e.style, r = t.lineDash && t.lineWidth > 0 && Doe(t.lineDash, t.lineWidth), n = t.lineDashOffset;
  if (r) {
    var i = t.strokeNoScale && e.getLineScale ? e.getLineScale() : 1;
    i && i !== 1 && (r = ue(r, function(a) {
      return a / i;
    }), n /= i);
  }
  return [r, n];
}
var Noe = new ca(!0);
function vm(e) {
  var t = e.stroke;
  return !(t == null || t === "none" || !(e.lineWidth > 0));
}
function MN(e) {
  return typeof e == "string" && e !== "none";
}
function gm(e) {
  var t = e.fill;
  return t != null && t !== "none";
}
function EN(e, t) {
  if (t.fillOpacity != null && t.fillOpacity !== 1) {
    var r = e.globalAlpha;
    e.globalAlpha = t.fillOpacity * t.opacity, e.fill(), e.globalAlpha = r;
  } else
    e.fill();
}
function DN(e, t) {
  if (t.strokeOpacity != null && t.strokeOpacity !== 1) {
    var r = e.globalAlpha;
    e.globalAlpha = t.strokeOpacity * t.opacity, e.stroke(), e.globalAlpha = r;
  } else
    e.stroke();
}
function Nw(e, t, r) {
  var n = lC(t.image, t.__image, r);
  if (zy(n)) {
    var i = e.createPattern(n, t.repeat || "repeat");
    if (typeof DOMMatrix == "function" && i && i.setTransform) {
      var a = new DOMMatrix();
      a.translateSelf(t.x || 0, t.y || 0), a.rotateSelf(0, 0, (t.rotation || 0) * Id), a.scaleSelf(t.scaleX || 1, t.scaleY || 1), i.setTransform(a);
    }
    return i;
  }
}
function Ioe(e, t, r, n) {
  var i, a = vm(r), o = gm(r), s = r.strokePercent, l = s < 1, u = !t.path;
  (!t.silent || l) && u && t.createPathProxy();
  var c = t.path || Noe, f = t.__dirty;
  if (!n) {
    var d = r.fill, h = r.stroke, p = o && !!d.colorStops, v = a && !!h.colorStops, g = o && !!d.image, m = a && !!h.image, y = void 0, b = void 0, w = void 0, _ = void 0, S = void 0;
    (p || v) && (S = t.getBoundingRect()), p && (y = f ? Dw(e, d, S) : t.__canvasFillGradient, t.__canvasFillGradient = y), v && (b = f ? Dw(e, h, S) : t.__canvasStrokeGradient, t.__canvasStrokeGradient = b), g && (w = f || !t.__canvasFillPattern ? Nw(e, d, t) : t.__canvasFillPattern, t.__canvasFillPattern = w), m && (_ = f || !t.__canvasStrokePattern ? Nw(e, h, t) : t.__canvasStrokePattern, t.__canvasStrokePattern = w), p ? e.fillStyle = y : g && (w ? e.fillStyle = w : o = !1), v ? e.strokeStyle = b : m && (_ ? e.strokeStyle = _ : a = !1);
  }
  var C = t.getGlobalScale();
  c.setScale(C[0], C[1], t.segmentIgnoreThreshold);
  var A, M;
  e.setLineDash && r.lineDash && (i = FC(t), A = i[0], M = i[1]);
  var D = !0;
  (u || f & Yu) && (c.setDPR(e.dpr), l ? c.setContext(null) : (c.setContext(e), D = !1), c.reset(), t.buildPath(c, t.shape, n), c.toStatic(), t.pathUpdated()), D && c.rebuildPath(e, l ? s : 1), A && (e.setLineDash(A), e.lineDashOffset = M), n || (r.strokeFirst ? (a && DN(e, r), o && EN(e, r)) : (o && EN(e, r), a && DN(e, r))), A && e.setLineDash([]);
}
function Loe(e, t, r) {
  var n = t.__image = lC(r.image, t.__image, t, t.onload);
  if (!(!n || !zy(n))) {
    var i = r.x || 0, a = r.y || 0, o = t.getWidth(), s = t.getHeight(), l = n.width / n.height;
    if (o == null && s != null ? o = s * l : s == null && o != null ? s = o / l : o == null && s == null && (o = n.width, s = n.height), r.sWidth && r.sHeight) {
      var u = r.sx || 0, c = r.sy || 0;
      e.drawImage(n, u, c, r.sWidth, r.sHeight, i, a, o, s);
    } else if (r.sx && r.sy) {
      var u = r.sx, c = r.sy, f = o - u, d = s - c;
      e.drawImage(n, u, c, f, d, i, a, o, s);
    } else
      e.drawImage(n, i, a, o, s);
  }
}
function Roe(e, t, r) {
  var n, i = r.text;
  if (i != null && (i += ""), i) {
    e.font = r.font || ns, e.textAlign = r.textAlign, e.textBaseline = r.textBaseline;
    var a = void 0, o = void 0;
    e.setLineDash && r.lineDash && (n = FC(t), a = n[0], o = n[1]), a && (e.setLineDash(a), e.lineDashOffset = o), r.strokeFirst ? (vm(r) && e.strokeText(i, r.x, r.y), gm(r) && e.fillText(i, r.x, r.y)) : (gm(r) && e.fillText(i, r.x, r.y), vm(r) && e.strokeText(i, r.x, r.y)), a && e.setLineDash([]);
  }
}
var NN = ["shadowBlur", "shadowOffsetX", "shadowOffsetY"], IN = [
  ["lineCap", "butt"],
  ["lineJoin", "miter"],
  ["miterLimit", 10]
];
function h8(e, t, r, n, i) {
  var a = !1;
  if (!n && (r = r || {}, t === r))
    return !1;
  if (n || t.opacity !== r.opacity) {
    gn(e, i), a = !0;
    var o = Math.max(Math.min(t.opacity, 1), 0);
    e.globalAlpha = isNaN(o) ? Cl.opacity : o;
  }
  (n || t.blend !== r.blend) && (a || (gn(e, i), a = !0), e.globalCompositeOperation = t.blend || Cl.blend);
  for (var s = 0; s < NN.length; s++) {
    var l = NN[s];
    (n || t[l] !== r[l]) && (a || (gn(e, i), a = !0), e[l] = e.dpr * (t[l] || 0));
  }
  return (n || t.shadowColor !== r.shadowColor) && (a || (gn(e, i), a = !0), e.shadowColor = t.shadowColor || Cl.shadowColor), a;
}
function LN(e, t, r, n, i) {
  var a = _h(t, i.inHover), o = n ? null : r && _h(r, i.inHover) || {};
  if (a === o)
    return !1;
  var s = h8(e, a, o, n, i);
  if ((n || a.fill !== o.fill) && (s || (gn(e, i), s = !0), MN(a.fill) && (e.fillStyle = a.fill)), (n || a.stroke !== o.stroke) && (s || (gn(e, i), s = !0), MN(a.stroke) && (e.strokeStyle = a.stroke)), (n || a.opacity !== o.opacity) && (s || (gn(e, i), s = !0), e.globalAlpha = a.opacity == null ? 1 : a.opacity), t.hasStroke()) {
    var l = a.lineWidth, u = l / (a.strokeNoScale && t.getLineScale ? t.getLineScale() : 1);
    e.lineWidth !== u && (s || (gn(e, i), s = !0), e.lineWidth = u);
  }
  for (var c = 0; c < IN.length; c++) {
    var f = IN[c], d = f[0];
    (n || a[d] !== o[d]) && (s || (gn(e, i), s = !0), e[d] = a[d] || f[1]);
  }
  return s;
}
function Poe(e, t, r, n, i) {
  return h8(e, _h(t, i.inHover), r && _h(r, i.inHover), n, i);
}
function p8(e, t) {
  var r = t.transform, n = e.dpr || 1;
  r ? e.setTransform(n * r[0], n * r[1], n * r[2], n * r[3], n * r[4], n * r[5]) : e.setTransform(n, 0, 0, n, 0, 0);
}
function koe(e, t, r) {
  for (var n = !1, i = 0; i < e.length; i++) {
    var a = e[i];
    n = n || a.isZeroArea(), p8(t, a), t.beginPath(), a.buildPath(t, a.shape), t.clip();
  }
  r.allClipped = n;
}
function Ooe(e, t) {
  return e && t ? e[0] !== t[0] || e[1] !== t[1] || e[2] !== t[2] || e[3] !== t[3] || e[4] !== t[4] || e[5] !== t[5] : !(!e && !t);
}
var RN = 1, PN = 2, kN = 3, ON = 4;
function zoe(e) {
  var t = gm(e), r = vm(e);
  return !(e.lineDash || !(+t ^ +r) || t && typeof e.fill != "string" || r && typeof e.stroke != "string" || e.strokePercent < 1 || e.strokeOpacity < 1 || e.fillOpacity < 1);
}
function gn(e, t) {
  t.batchFill && e.fill(), t.batchStroke && e.stroke(), t.batchFill = "", t.batchStroke = "";
}
function _h(e, t) {
  return t && e.__hoverStyle || e.style;
}
function $C(e, t) {
  gl(e, t, { inHover: !1, viewWidth: 0, viewHeight: 0 }, !0);
}
function gl(e, t, r, n) {
  var i = t.transform;
  if (!t.shouldBePainted(r.viewWidth, r.viewHeight, !1, !1)) {
    t.__dirty &= ~Cn, t.__isRendered = !1;
    return;
  }
  var a = t.__clipPaths, o = r.prevElClipPaths, s = !1, l = !1;
  if ((!o || Eoe(a, o)) && (o && o.length && (gn(e, r), e.restore(), l = s = !0, r.prevElClipPaths = null, r.allClipped = !1, r.prevEl = null), a && a.length && (gn(e, r), e.save(), koe(a, e, r), s = !0), r.prevElClipPaths = a), r.allClipped) {
    t.__isRendered = !1;
    return;
  }
  t.beforeBrush && t.beforeBrush(), t.innerBeforeBrush();
  var u = r.prevEl;
  u || (l = s = !0);
  var c = t instanceof lt && t.autoBatch && zoe(t.style);
  s || Ooe(i, u.transform) ? (gn(e, r), p8(e, t)) : c || gn(e, r);
  var f = _h(t, r.inHover);
  t instanceof lt ? (r.lastDrawType !== RN && (l = !0, r.lastDrawType = RN), LN(e, t, u, l, r), (!c || !r.batchFill && !r.batchStroke) && e.beginPath(), Ioe(e, t, f, c), c && (r.batchFill = f.fill || "", r.batchStroke = f.stroke || "")) : t instanceof Rc ? (r.lastDrawType !== kN && (l = !0, r.lastDrawType = kN), LN(e, t, u, l, r), Roe(e, t, f)) : t instanceof Ar ? (r.lastDrawType !== PN && (l = !0, r.lastDrawType = PN), Poe(e, t, u, l, r), Loe(e, t, f)) : t.getTemporalDisplayables && (r.lastDrawType !== ON && (l = !0, r.lastDrawType = ON), joe(e, t, r)), c && n && gn(e, r), t.innerAfterBrush(), t.afterBrush && t.afterBrush(), r.prevEl = t, t.__dirty = 0, t.__isRendered = !0;
}
function joe(e, t, r) {
  var n = t.getDisplayables(), i = t.getTemporalDisplayables();
  e.save();
  var a = {
    prevElClipPaths: null,
    prevEl: null,
    allClipped: !1,
    viewWidth: r.viewWidth,
    viewHeight: r.viewHeight,
    inHover: r.inHover
  }, o, s;
  for (o = t.getCursor(), s = n.length; o < s; o++) {
    var l = n[o];
    l.beforeBrush && l.beforeBrush(), l.innerBeforeBrush(), gl(e, l, a, o === s - 1), l.innerAfterBrush(), l.afterBrush && l.afterBrush(), a.prevEl = l;
  }
  for (var u = 0, c = i.length; u < c; u++) {
    var l = i[u];
    l.beforeBrush && l.beforeBrush(), l.innerBeforeBrush(), gl(e, l, a, u === c - 1), l.innerAfterBrush(), l.afterBrush && l.afterBrush(), a.prevEl = l;
  }
  t.clearTemporalDisplayables(), t.notClear = !0, e.restore();
}
var nx = new moe(), zN = new qh(100), jN = ["symbol", "symbolSize", "symbolKeepAspect", "color", "backgroundColor", "dashArrayX", "dashArrayY", "maxTileWidth", "maxTileHeight"];
function Oc(e, t) {
  if (e === "none")
    return null;
  var r = t.getDevicePixelRatio(), n = t.getZr(), i = n.painter.type === "svg";
  e.dirty && nx.delete(e);
  var a = nx.get(e);
  if (a)
    return a;
  var o = Ie(e, {
    symbol: "rect",
    symbolSize: 1,
    symbolKeepAspect: !0,
    color: "rgba(0, 0, 0, 0.2)",
    backgroundColor: null,
    dashArrayX: 5,
    dashArrayY: 5,
    rotation: 0,
    maxTileWidth: 512,
    maxTileHeight: 512
  });
  o.backgroundColor === "none" && (o.backgroundColor = null);
  var s = {
    repeat: "repeat"
  };
  return l(s), s.rotation = o.rotation, s.scaleX = s.scaleY = i ? 1 : 1 / r, nx.set(e, s), e.dirty = !1, s;
  function l(u) {
    for (var c = [r], f = !0, d = 0; d < jN.length; ++d) {
      var h = o[jN[d]];
      if (h != null && !le(h) && !ge(h) && !bt(h) && typeof h != "boolean") {
        f = !1;
        break;
      }
      c.push(h);
    }
    var p;
    if (f) {
      p = c.join(",") + (i ? "-svg" : "");
      var v = zN.get(p);
      v && (i ? u.svgElement = v : u.image = v);
    }
    var g = g8(o.dashArrayX), m = Voe(o.dashArrayY), y = v8(o.symbol), b = Boe(g), w = m8(m), _ = !i && Di.createCanvas(), S = i && {
      tag: "g",
      attrs: {},
      key: "dcl",
      children: []
    }, C = M(), A;
    _ && (_.width = C.width * r, _.height = C.height * r, A = _.getContext("2d")), D(), f && zN.put(p, _ || S), u.image = _, u.svgElement = S, u.svgWidth = C.width, u.svgHeight = C.height;
    function M() {
      for (var N = 1, R = 0, O = b.length; R < O; ++R)
        N = JE(N, b[R]);
      for (var E = 1, R = 0, O = y.length; R < O; ++R)
        E = JE(E, y[R].length);
      N *= E;
      var L = w * b.length * y.length;
      if (process.env.NODE_ENV !== "production") {
        var I = function(P) {
          console.warn("Calculated decal size is greater than " + P + " due to decal option settings so " + P + " is used for the decal size. Please consider changing the decal option to make a smaller decal or set " + P + " to be larger to avoid incontinuity.");
        };
        N > o.maxTileWidth && I("maxTileWidth"), L > o.maxTileHeight && I("maxTileHeight");
      }
      return {
        width: Math.max(1, Math.min(N, o.maxTileWidth)),
        height: Math.max(1, Math.min(L, o.maxTileHeight))
      };
    }
    function D() {
      A && (A.clearRect(0, 0, _.width, _.height), o.backgroundColor && (A.fillStyle = o.backgroundColor, A.fillRect(0, 0, _.width, _.height)));
      for (var N = 0, R = 0; R < m.length; ++R)
        N += m[R];
      if (N <= 0)
        return;
      for (var O = -w, E = 0, L = 0, I = 0; O < C.height; ) {
        if (E % 2 === 0) {
          for (var P = L / 2 % y.length, k = 0, z = 0, V = 0; k < C.width * 2; ) {
            for (var B = 0, R = 0; R < g[I].length; ++R)
              B += g[I][R];
            if (B <= 0)
              break;
            if (z % 2 === 0) {
              var F = (1 - o.symbolSize) * 0.5, H = k + g[I][z] * F, G = O + m[E] * F, W = g[I][z] * o.symbolSize, X = m[E] * o.symbolSize, q = V / 2 % y[P].length;
              J(H, G, W, X, y[P][q]);
            }
            k += g[I][z], ++V, ++z, z === g[I].length && (z = 0);
          }
          ++I, I === g.length && (I = 0);
        }
        O += m[E], ++L, ++E, E === m.length && (E = 0);
      }
      function J(U, $, Y, Z, K) {
        var ie = i ? 1 : r, Q = fr(K, U * ie, $ * ie, Y * ie, Z * ie, o.color, o.symbolKeepAspect);
        if (i) {
          var ce = n.painter.renderOneToVNode(Q);
          ce && S.children.push(ce);
        } else
          $C(A, Q);
      }
    }
  }
}
function v8(e) {
  if (!e || e.length === 0)
    return [["rect"]];
  if (ge(e))
    return [[e]];
  for (var t = !0, r = 0; r < e.length; ++r)
    if (!ge(e[r])) {
      t = !1;
      break;
    }
  if (t)
    return v8([e]);
  for (var n = [], r = 0; r < e.length; ++r)
    ge(e[r]) ? n.push([e[r]]) : n.push(e[r]);
  return n;
}
function g8(e) {
  if (!e || e.length === 0)
    return [[0, 0]];
  if (bt(e)) {
    var t = Math.ceil(e);
    return [[t, t]];
  }
  for (var r = !0, n = 0; n < e.length; ++n)
    if (!bt(e[n])) {
      r = !1;
      break;
    }
  if (r)
    return g8([e]);
  for (var i = [], n = 0; n < e.length; ++n)
    if (bt(e[n])) {
      var t = Math.ceil(e[n]);
      i.push([t, t]);
    } else {
      var t = ue(e[n], function(s) {
        return Math.ceil(s);
      });
      t.length % 2 === 1 ? i.push(t.concat(t)) : i.push(t);
    }
  return i;
}
function Voe(e) {
  if (!e || typeof e == "object" && e.length === 0)
    return [0, 0];
  if (bt(e)) {
    var t = Math.ceil(e);
    return [t, t];
  }
  var r = ue(e, function(n) {
    return Math.ceil(n);
  });
  return e.length % 2 ? r.concat(r) : r;
}
function Boe(e) {
  return ue(e, function(t) {
    return m8(t);
  });
}
function m8(e) {
  for (var t = 0, r = 0; r < e.length; ++r)
    t += e[r];
  return e.length % 2 === 1 ? t * 2 : t;
}
function Foe(e, t) {
  e.eachRawSeries(function(r) {
    if (!e.isSeriesFiltered(r)) {
      var n = r.getData();
      n.hasItemVisual() && n.each(function(o) {
        var s = n.getItemVisual(o, "decal");
        if (s) {
          var l = n.ensureUniqueItemVisual(o, "style");
          l.decal = Oc(s, t);
        }
      });
      var i = n.getVisual("decal");
      if (i) {
        var a = n.getVisual("style");
        a.decal = Oc(i, t);
      }
    }
  });
}
var vi = new ai(), mm = {};
function $oe(e, t) {
  process.env.NODE_ENV !== "production" && mm[e] && jr("Already has an implementation of " + e + "."), mm[e] = t;
}
function y8(e) {
  return process.env.NODE_ENV !== "production" && (mm[e] || jr("Implementation of " + e + " doesn't exists.")), mm[e];
}
var Hoe = "5.6.0", Goe = {
  zrender: "5.6.1"
}, Woe = 1, Uoe = 800, Yoe = 900, Zoe = 1e3, Xoe = 2e3, Koe = 5e3, x8 = 1e3, qoe = 1100, HC = 2e3, b8 = 3e3, Joe = 4e3, t0 = 4500, Qoe = 4600, ese = 5e3, tse = 6e3, w8 = 7e3, _8 = {
  PROCESSOR: {
    FILTER: Zoe,
    SERIES_FILTER: Uoe,
    STATISTIC: Koe
  },
  VISUAL: {
    LAYOUT: x8,
    PROGRESSIVE_LAYOUT: qoe,
    GLOBAL: HC,
    CHART: b8,
    POST_CHART_LAYOUT: Qoe,
    COMPONENT: Joe,
    BRUSH: ese,
    CHART_ITEM: t0,
    ARIA: tse,
    DECAL: w8
  }
}, Gr = "__flagInMainProcess", hn = "__pendingUpdate", ix = "__needsUpdateStatus", VN = /^[a-zA-Z0-9_]+$/, ax = "__connectUpdateStatus", BN = 0, rse = 1, nse = 2;
function S8(e) {
  return function() {
    for (var t = [], r = 0; r < arguments.length; r++)
      t[r] = arguments[r];
    if (this.isDisposed()) {
      wn(this.id);
      return;
    }
    return T8(this, e, t);
  };
}
function C8(e) {
  return function() {
    for (var t = [], r = 0; r < arguments.length; r++)
      t[r] = arguments[r];
    return T8(this, e, t);
  };
}
function T8(e, t, r) {
  return r[0] = r[0] && r[0].toLowerCase(), ai.prototype[t].apply(e, r);
}
var A8 = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t;
  }(ai)
), M8 = A8.prototype;
M8.on = C8("on");
M8.off = C8("off");
var Au, ox, fv, mo, sx, lx, ux, Hf, Gf, FN, $N, cx, HN, dv, GN, E8, kn, WN, ym = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this, new foe()) || this;
      a._chartsViews = [], a._chartsMap = {}, a._componentsViews = [], a._componentsMap = {}, a._pendingActions = [], i = i || {}, ge(n) && (n = D8[n]), a._dom = r;
      var o = "canvas", s = "auto", l = !1;
      if (process.env.NODE_ENV !== "production") {
        var u = (
          /* eslint-disable-next-line */
          st.hasGlobalWindow ? window : global
        );
        u && (o = Ge(u.__ECHARTS__DEFAULT__RENDERER__, o), s = Ge(u.__ECHARTS__DEFAULT__COARSE_POINTER, s), l = Ge(u.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, l));
      }
      i.ssr && v9(function(h) {
        var p = He(h), v = p.dataIndex;
        if (v != null) {
          var g = Ce();
          return g.set("series_index", p.seriesIndex), g.set("data_index", v), p.ssrType && g.set("ssr_type", p.ssrType), g;
        }
      });
      var c = a._zr = rw(r, {
        renderer: i.renderer || o,
        devicePixelRatio: i.devicePixelRatio,
        width: i.width,
        height: i.height,
        ssr: i.ssr,
        useDirtyRect: Ge(i.useDirtyRect, l),
        useCoarsePointer: Ge(i.useCoarsePointer, s),
        pointerSize: i.pointerSize
      });
      a._ssr = i.ssr, a._throttledZrFlush = e0(xe(c.flush, c), 17), n = ze(n), n && k6(n, !0), a._theme = n, a._locale = yie(i.locale || p6), a._coordSysMgr = new Kl();
      var f = a._api = GN(a);
      function d(h, p) {
        return h.__prio - p.__prio;
      }
      return lg(bm, d), lg(Iw, d), a._scheduler = new o8(a, f, Iw, bm), a._messageCenter = new A8(), a._initEvents(), a.resize = xe(a.resize, a), c.animation.on("frame", a._onframe, a), FN(c, a), $N(c, a), lh(a), a;
    }
    return t.prototype._onframe = function() {
      if (!this._disposed) {
        WN(this);
        var r = this._scheduler;
        if (this[hn]) {
          var n = this[hn].silent;
          this[Gr] = !0;
          try {
            Au(this), mo.update.call(this, null, this[hn].updateParams);
          } catch (l) {
            throw this[Gr] = !1, this[hn] = null, l;
          }
          this._zr.flush(), this[Gr] = !1, this[hn] = null, Hf.call(this, n), Gf.call(this, n);
        } else if (r.unfinished) {
          var i = Woe, a = this._model, o = this._api;
          r.unfinished = !1;
          do {
            var s = +/* @__PURE__ */ new Date();
            r.performSeriesTasks(a), r.performDataProcessorTasks(a), lx(this, a), r.performVisualTasks(a), dv(this, this._model, o, "remain", {}), i -= +/* @__PURE__ */ new Date() - s;
          } while (i > 0 && r.unfinished);
          r.unfinished || this._zr.flush();
        }
      }
    }, t.prototype.getDom = function() {
      return this._dom;
    }, t.prototype.getId = function() {
      return this.id;
    }, t.prototype.getZr = function() {
      return this._zr;
    }, t.prototype.isSSR = function() {
      return this._ssr;
    }, t.prototype.setOption = function(r, n, i) {
      if (this[Gr]) {
        process.env.NODE_ENV !== "production" && jr("`setOption` should not be called during main process.");
        return;
      }
      if (this._disposed) {
        wn(this.id);
        return;
      }
      var a, o, s;
      if (Ne(n) && (i = n.lazyUpdate, a = n.silent, o = n.replaceMerge, s = n.transition, n = n.notMerge), this[Gr] = !0, !this._model || n) {
        var l = new Yie(this._api), u = this._theme, c = this._model = new kC();
        c.scheduler = this._scheduler, c.ssr = this._ssr, c.init(null, null, null, u, this._locale, l);
      }
      this._model.setOption(r, {
        replaceMerge: o
      }, Lw);
      var f = {
        seriesTransition: s,
        optionChanged: !0
      };
      if (i)
        this[hn] = {
          silent: a,
          updateParams: f
        }, this[Gr] = !1, this.getZr().wakeUp();
      else {
        try {
          Au(this), mo.update.call(this, null, f);
        } catch (d) {
          throw this[hn] = null, this[Gr] = !1, d;
        }
        this._ssr || this._zr.flush(), this[hn] = null, this[Gr] = !1, Hf.call(this, a), Gf.call(this, a);
      }
    }, t.prototype.setTheme = function() {
      ti("ECharts#setTheme() is DEPRECATED in ECharts 3.0");
    }, t.prototype.getModel = function() {
      return this._model;
    }, t.prototype.getOption = function() {
      return this._model && this._model.getOption();
    }, t.prototype.getWidth = function() {
      return this._zr.getWidth();
    }, t.prototype.getHeight = function() {
      return this._zr.getHeight();
    }, t.prototype.getDevicePixelRatio = function() {
      return this._zr.painter.dpr || st.hasGlobalWindow && window.devicePixelRatio || 1;
    }, t.prototype.getRenderedCanvas = function(r) {
      return process.env.NODE_ENV !== "production" && sr("getRenderedCanvas", "renderToCanvas"), this.renderToCanvas(r);
    }, t.prototype.renderToCanvas = function(r) {
      r = r || {};
      var n = this._zr.painter;
      if (process.env.NODE_ENV !== "production" && n.type !== "canvas")
        throw new Error("renderToCanvas can only be used in the canvas renderer.");
      return n.getRenderedCanvas({
        backgroundColor: r.backgroundColor || this._model.get("backgroundColor"),
        pixelRatio: r.pixelRatio || this.getDevicePixelRatio()
      });
    }, t.prototype.renderToSVGString = function(r) {
      r = r || {};
      var n = this._zr.painter;
      if (process.env.NODE_ENV !== "production" && n.type !== "svg")
        throw new Error("renderToSVGString can only be used in the svg renderer.");
      return n.renderToString({
        useViewBox: r.useViewBox
      });
    }, t.prototype.getSvgDataURL = function() {
      if (st.svgSupported) {
        var r = this._zr, n = r.storage.getDisplayList();
        return j(n, function(i) {
          i.stopAnimation(null, !0);
        }), r.painter.toDataURL();
      }
    }, t.prototype.getDataURL = function(r) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      r = r || {};
      var n = r.excludeComponents, i = this._model, a = [], o = this;
      j(n, function(l) {
        i.eachComponent({
          mainType: l
        }, function(u) {
          var c = o._componentsMap[u.__viewId];
          c.group.ignore || (a.push(c), c.group.ignore = !0);
        });
      });
      var s = this._zr.painter.getType() === "svg" ? this.getSvgDataURL() : this.renderToCanvas(r).toDataURL("image/" + (r && r.type || "png"));
      return j(a, function(l) {
        l.group.ignore = !1;
      }), s;
    }, t.prototype.getConnectedDataURL = function(r) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      var n = r.type === "svg", i = this.group, a = Math.min, o = Math.max, s = 1 / 0;
      if (wm[i]) {
        var l = s, u = s, c = -s, f = -s, d = [], h = r && r.pixelRatio || this.getDevicePixelRatio();
        j(Ml, function(b, w) {
          if (b.group === i) {
            var _ = n ? b.getZr().painter.getSvgDom().innerHTML : b.renderToCanvas(ze(r)), S = b.getDom().getBoundingClientRect();
            l = a(S.left, l), u = a(S.top, u), c = o(S.right, c), f = o(S.bottom, f), d.push({
              dom: _,
              left: S.left,
              top: S.top
            });
          }
        }), l *= h, u *= h, c *= h, f *= h;
        var p = c - l, v = f - u, g = Di.createCanvas(), m = rw(g, {
          renderer: n ? "svg" : "canvas"
        });
        if (m.resize({
          width: p,
          height: v
        }), n) {
          var y = "";
          return j(d, function(b) {
            var w = b.left - l, _ = b.top - u;
            y += '<g transform="translate(' + w + "," + _ + ')">' + b.dom + "</g>";
          }), m.painter.getSvgRoot().innerHTML = y, r.connectedBackgroundColor && m.painter.setBackgroundColor(r.connectedBackgroundColor), m.refreshImmediately(), m.painter.toDataURL();
        } else
          return r.connectedBackgroundColor && m.add(new vt({
            shape: {
              x: 0,
              y: 0,
              width: p,
              height: v
            },
            style: {
              fill: r.connectedBackgroundColor
            }
          })), j(d, function(b) {
            var w = new Ar({
              style: {
                x: b.left * h - l,
                y: b.top * h - u,
                image: b.dom
              }
            });
            m.add(w);
          }), m.refreshImmediately(), g.toDataURL("image/" + (r && r.type || "png"));
      } else
        return this.getDataURL(r);
    }, t.prototype.convertToPixel = function(r, n) {
      return sx(this, "convertToPixel", r, n);
    }, t.prototype.convertFromPixel = function(r, n) {
      return sx(this, "convertFromPixel", r, n);
    }, t.prototype.containPixel = function(r, n) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      var i = this._model, a, o = jd(i, r);
      return j(o, function(s, l) {
        l.indexOf("Models") >= 0 && j(s, function(u) {
          var c = u.coordinateSystem;
          if (c && c.containPoint)
            a = a || !!c.containPoint(n);
          else if (l === "seriesModels") {
            var f = this._chartsMap[u.__viewId];
            f && f.containPoint ? a = a || f.containPoint(n, u) : process.env.NODE_ENV !== "production" && qt(l + ": " + (f ? "The found component do not support containPoint." : "No view mapping to the found component."));
          } else
            process.env.NODE_ENV !== "production" && qt(l + ": containPoint is not supported");
        }, this);
      }, this), !!a;
    }, t.prototype.getVisual = function(r, n) {
      var i = this._model, a = jd(i, r, {
        defaultMainType: "series"
      }), o = a.seriesModel;
      process.env.NODE_ENV !== "production" && (o || qt("There is no specified series model"));
      var s = o.getData(), l = a.hasOwnProperty("dataIndexInside") ? a.dataIndexInside : a.hasOwnProperty("dataIndex") ? s.indexOfRawIndex(a.dataIndex) : null;
      return l != null ? BC(s, l, n) : sp(s, n);
    }, t.prototype.getViewOfComponentModel = function(r) {
      return this._componentsMap[r.__viewId];
    }, t.prototype.getViewOfSeriesModel = function(r) {
      return this._chartsMap[r.__viewId];
    }, t.prototype._initEvents = function() {
      var r = this;
      j(ise, function(n) {
        var i = function(a) {
          var o = r.getModel(), s = a.target, l, u = n === "globalout";
          if (u ? l = {} : s && pl(s, function(p) {
            var v = He(p);
            if (v && v.dataIndex != null) {
              var g = v.dataModel || o.getSeriesByIndex(v.seriesIndex);
              return l = g && g.getDataParams(v.dataIndex, v.dataType, s) || {}, !0;
            } else if (v.eventData)
              return l = ae({}, v.eventData), !0;
          }, !0), l) {
            var c = l.componentType, f = l.componentIndex;
            (c === "markLine" || c === "markPoint" || c === "markArea") && (c = "series", f = l.seriesIndex);
            var d = c && f != null && o.getComponent(c, f), h = d && r[d.mainType === "series" ? "_chartsMap" : "_componentsMap"][d.__viewId];
            process.env.NODE_ENV !== "production" && !u && !(d && h) && qt("model or view can not be found by params"), l.event = a, l.type = n, r._$eventProcessor.eventInfo = {
              targetEl: s,
              packedEvent: l,
              model: d,
              view: h
            }, r.trigger(n, l);
          }
        };
        i.zrEventfulCallAtLast = !0, r._zr.on(n, i, r);
      }), j(Gd, function(n, i) {
        r._messageCenter.on(i, function(a) {
          this.trigger(i, a);
        }, r);
      }), j(["selectchanged"], function(n) {
        r._messageCenter.on(n, function(i) {
          this.trigger(n, i);
        }, r);
      }), poe(this._messageCenter, this, this._api);
    }, t.prototype.isDisposed = function() {
      return this._disposed;
    }, t.prototype.clear = function() {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      this.setOption({
        series: []
      }, !0);
    }, t.prototype.dispose = function() {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      this._disposed = !0;
      var r = this.getDom();
      r && T9(this.getDom(), WC, "");
      var n = this, i = n._api, a = n._model;
      j(n._componentsViews, function(o) {
        o.dispose(a, i);
      }), j(n._chartsViews, function(o) {
        o.dispose(a, i);
      }), n._zr.dispose(), n._dom = n._model = n._chartsMap = n._componentsMap = n._chartsViews = n._componentsViews = n._scheduler = n._api = n._zr = n._throttledZrFlush = n._theme = n._coordSysMgr = n._messageCenter = null, delete Ml[n.id];
    }, t.prototype.resize = function(r) {
      if (this[Gr]) {
        process.env.NODE_ENV !== "production" && jr("`resize` should not be called during main process.");
        return;
      }
      if (this._disposed) {
        wn(this.id);
        return;
      }
      this._zr.resize(r);
      var n = this._model;
      if (this._loadingFX && this._loadingFX.resize(), !!n) {
        var i = n.resetOption("media"), a = r && r.silent;
        this[hn] && (a == null && (a = this[hn].silent), i = !0, this[hn] = null), this[Gr] = !0;
        try {
          i && Au(this), mo.update.call(this, {
            type: "resize",
            animation: ae({
              // Disable animation
              duration: 0
            }, r && r.animation)
          });
        } catch (o) {
          throw this[Gr] = !1, o;
        }
        this[Gr] = !1, Hf.call(this, a), Gf.call(this, a);
      }
    }, t.prototype.showLoading = function(r, n) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      if (Ne(r) && (n = r, r = ""), r = r || "default", this.hideLoading(), !Rw[r]) {
        process.env.NODE_ENV !== "production" && qt("Loading effects " + r + " not exists.");
        return;
      }
      var i = Rw[r](this._api, n), a = this._zr;
      this._loadingFX = i, a.add(i);
    }, t.prototype.hideLoading = function() {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      this._loadingFX && this._zr.remove(this._loadingFX), this._loadingFX = null;
    }, t.prototype.makeActionFromEvent = function(r) {
      var n = ae({}, r);
      return n.type = Gd[r.type], n;
    }, t.prototype.dispatchAction = function(r, n) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      if (Ne(n) || (n = {
        silent: !!n
      }), !!xm[r.type] && this._model) {
        if (this[Gr]) {
          this._pendingActions.push(r);
          return;
        }
        var i = n.silent;
        ux.call(this, r, i);
        var a = n.flush;
        a ? this._zr.flush() : a !== !1 && st.browser.weChat && this._throttledZrFlush(), Hf.call(this, i), Gf.call(this, i);
      }
    }, t.prototype.updateLabelLayout = function() {
      vi.trigger("series:layoutlabels", this._model, this._api, {
        // Not adding series labels.
        // TODO
        updatedSeries: []
      });
    }, t.prototype.appendData = function(r) {
      if (this._disposed) {
        wn(this.id);
        return;
      }
      var n = r.seriesIndex, i = this.getModel(), a = i.getSeriesByIndex(n);
      process.env.NODE_ENV !== "production" && Le(r.data && a), a.appendData(r), this._scheduler.unfinished = !0, this.getZr().wakeUp();
    }, t.internalField = function() {
      Au = function(f) {
        var d = f._scheduler;
        d.restorePipelines(f._model), d.prepareStageTasks(), ox(f, !0), ox(f, !1), d.plan();
      }, ox = function(f, d) {
        for (var h = f._model, p = f._scheduler, v = d ? f._componentsViews : f._chartsViews, g = d ? f._componentsMap : f._chartsMap, m = f._zr, y = f._api, b = 0; b < v.length; b++)
          v[b].__alive = !1;
        d ? h.eachComponent(function(S, C) {
          S !== "series" && w(C);
        }) : h.eachSeries(w);
        function w(S) {
          var C = S.__requireNewView;
          S.__requireNewView = !1;
          var A = "_ec_" + S.id + "_" + S.type, M = !C && g[A];
          if (!M) {
            var D = Ki(S.type), N = d ? $t.getClass(D.main, D.sub) : (
              // FIXME:TS
              // (ChartView as ChartViewConstructor).getClass('series', classType.sub)
              // For backward compat, still support a chart type declared as only subType
              // like "liquidfill", but recommend "series.liquidfill"
              // But need a base class to make a type series.
              It.getClass(D.sub)
            );
            process.env.NODE_ENV !== "production" && Le(N, D.sub + " does not exist."), M = new N(), M.init(h, y), g[A] = M, v.push(M), m.add(M.group);
          }
          S.__viewId = M.__id = A, M.__alive = !0, M.__model = S, M.group.__ecComponentInfo = {
            mainType: S.mainType,
            index: S.componentIndex
          }, !d && p.prepareView(M, S, h, y);
        }
        for (var b = 0; b < v.length; ) {
          var _ = v[b];
          _.__alive ? b++ : (!d && _.renderTask.dispose(), m.remove(_.group), _.dispose(h, y), v.splice(b, 1), g[_.__id] === _ && delete g[_.__id], _.__id = _.group.__ecComponentInfo = null);
        }
      }, fv = function(f, d, h, p, v) {
        var g = f._model;
        if (g.setUpdatePayload(h), !p) {
          j([].concat(f._componentsViews).concat(f._chartsViews), _);
          return;
        }
        var m = {};
        m[p + "Id"] = h[p + "Id"], m[p + "Index"] = h[p + "Index"], m[p + "Name"] = h[p + "Name"];
        var y = {
          mainType: p,
          query: m
        };
        v && (y.subType = v);
        var b = h.excludeSeriesId, w;
        b != null && (w = Ce(), j(Ot(b), function(S) {
          var C = yr(S, null);
          C != null && w.set(C, !0);
        })), g && g.eachComponent(y, function(S) {
          var C = w && w.get(S.id) != null;
          if (!C)
            if (MD(h))
              if (S instanceof zt)
                h.type === Tl && !h.notBlur && !S.get(["emphasis", "disabled"]) && wne(S, h, f._api);
              else {
                var A = pC(S.mainType, S.componentIndex, h.name, f._api), M = A.focusSelf, D = A.dispatchers;
                h.type === Tl && M && !h.notBlur && dw(S.mainType, S.componentIndex, f._api), D && j(D, function(N) {
                  h.type === Tl ? Ka(N) : qa(N);
                });
              }
            else pw(h) && S instanceof zt && (Cne(S, h, f._api), TD(S), kn(f));
        }, f), g && g.eachComponent(y, function(S) {
          var C = w && w.get(S.id) != null;
          C || _(f[p === "series" ? "_chartsMap" : "_componentsMap"][S.__viewId]);
        }, f);
        function _(S) {
          S && S.__alive && S[d] && S[d](S.__model, g, f._api, h);
        }
      }, mo = {
        prepareAndUpdate: function(f) {
          Au(this), mo.update.call(this, f, {
            // Needs to mark option changed if newOption is given.
            // It's from MagicType.
            // TODO If use a separate flag optionChanged in payload?
            optionChanged: f.newOption != null
          });
        },
        update: function(f, d) {
          var h = this._model, p = this._api, v = this._zr, g = this._coordSysMgr, m = this._scheduler;
          if (h) {
            h.setUpdatePayload(f), m.restoreData(h, f), m.performSeriesTasks(h), g.create(h, p), m.performDataProcessorTasks(h, f), lx(this, h), g.update(h, p), r(h), m.performVisualTasks(h, f), cx(this, h, p, f, d);
            var y = h.get("backgroundColor") || "transparent", b = h.get("darkMode");
            v.setBackgroundColor(y), b != null && b !== "auto" && v.setDarkMode(b), vi.trigger("afterupdate", h, p);
          }
        },
        updateTransform: function(f) {
          var d = this, h = this._model, p = this._api;
          if (h) {
            h.setUpdatePayload(f);
            var v = [];
            h.eachComponent(function(m, y) {
              if (m !== "series") {
                var b = d.getViewOfComponentModel(y);
                if (b && b.__alive)
                  if (b.updateTransform) {
                    var w = b.updateTransform(y, h, p, f);
                    w && w.update && v.push(b);
                  } else
                    v.push(b);
              }
            });
            var g = Ce();
            h.eachSeries(function(m) {
              var y = d._chartsMap[m.__viewId];
              if (y.updateTransform) {
                var b = y.updateTransform(m, h, p, f);
                b && b.update && g.set(m.uid, 1);
              } else
                g.set(m.uid, 1);
            }), r(h), this._scheduler.performVisualTasks(h, f, {
              setDirty: !0,
              dirtyMap: g
            }), dv(this, h, p, f, {}, g), vi.trigger("afterupdate", h, p);
          }
        },
        updateView: function(f) {
          var d = this._model;
          d && (d.setUpdatePayload(f), It.markUpdateMethod(f, "updateView"), r(d), this._scheduler.performVisualTasks(d, f, {
            setDirty: !0
          }), cx(this, d, this._api, f, {}), vi.trigger("afterupdate", d, this._api));
        },
        updateVisual: function(f) {
          var d = this, h = this._model;
          h && (h.setUpdatePayload(f), h.eachSeries(function(p) {
            p.getData().clearAllVisual();
          }), It.markUpdateMethod(f, "updateVisual"), r(h), this._scheduler.performVisualTasks(h, f, {
            visualType: "visual",
            setDirty: !0
          }), h.eachComponent(function(p, v) {
            if (p !== "series") {
              var g = d.getViewOfComponentModel(v);
              g && g.__alive && g.updateVisual(v, h, d._api, f);
            }
          }), h.eachSeries(function(p) {
            var v = d._chartsMap[p.__viewId];
            v.updateVisual(p, h, d._api, f);
          }), vi.trigger("afterupdate", h, this._api));
        },
        updateLayout: function(f) {
          mo.update.call(this, f);
        }
      }, sx = function(f, d, h, p) {
        if (f._disposed) {
          wn(f.id);
          return;
        }
        for (var v = f._model, g = f._coordSysMgr.getCoordinateSystems(), m, y = jd(v, h), b = 0; b < g.length; b++) {
          var w = g[b];
          if (w[d] && (m = w[d](v, y, p)) != null)
            return m;
        }
        process.env.NODE_ENV !== "production" && qt("No coordinate system that supports " + d + " found by the given finder.");
      }, lx = function(f, d) {
        var h = f._chartsMap, p = f._scheduler;
        d.eachSeries(function(v) {
          p.updateStreamModes(v, h[v.__viewId]);
        });
      }, ux = function(f, d) {
        var h = this, p = this.getModel(), v = f.type, g = f.escapeConnect, m = xm[v], y = m.actionInfo, b = (y.update || "update").split(":"), w = b.pop(), _ = b[0] != null && Ki(b[0]);
        this[Gr] = !0;
        var S = [f], C = !1;
        f.batch && (C = !0, S = ue(f.batch, function(E) {
          return E = Ie(ae({}, E), f), E.batch = null, E;
        }));
        var A = [], M, D = pw(f), N = MD(f);
        if (N && Y9(this._api), j(S, function(E) {
          if (M = m.action(E, h._model, h._api), M = M || ae({}, E), M.type = y.event || M.type, A.push(M), N) {
            var L = oC(f), I = L.queryOptionMap, P = L.mainTypeSpecified, k = P ? I.keys()[0] : "series";
            fv(h, w, E, k), kn(h);
          } else D ? (fv(h, w, E, "series"), kn(h)) : _ && fv(h, w, E, _.main, _.sub);
        }), w !== "none" && !N && !D && !_)
          try {
            this[hn] ? (Au(this), mo.update.call(this, f), this[hn] = null) : mo[w].call(this, f);
          } catch (E) {
            throw this[Gr] = !1, E;
          }
        if (C ? M = {
          type: y.event || v,
          escapeConnect: g,
          batch: A
        } : M = A[0], this[Gr] = !1, !d) {
          var R = this._messageCenter;
          if (R.trigger(M.type, M), D) {
            var O = {
              type: "selectchanged",
              escapeConnect: g,
              selected: Tne(p),
              isFromClick: f.isFromClick || !1,
              fromAction: f.type,
              fromActionPayload: f
            };
            R.trigger(O.type, O);
          }
        }
      }, Hf = function(f) {
        for (var d = this._pendingActions; d.length; ) {
          var h = d.shift();
          ux.call(this, h, f);
        }
      }, Gf = function(f) {
        !f && this.trigger("updated");
      }, FN = function(f, d) {
        f.on("rendered", function(h) {
          d.trigger("rendered", h), // Although zr is dirty if initial animation is not finished
          // and this checking is called on frame, we also check
          // animation finished for robustness.
          f.animation.isFinished() && !d[hn] && !d._scheduler.unfinished && !d._pendingActions.length && d.trigger("finished");
        });
      }, $N = function(f, d) {
        f.on("mouseover", function(h) {
          var p = h.target, v = pl(p, ss);
          v && (_ne(v, h, d._api), kn(d));
        }).on("mouseout", function(h) {
          var p = h.target, v = pl(p, ss);
          v && (Sne(v, h, d._api), kn(d));
        }).on("click", function(h) {
          var p = h.target, v = pl(p, function(y) {
            return He(y).dataIndex != null;
          }, !0);
          if (v) {
            var g = v.selected ? "unselect" : "select", m = He(v);
            d._api.dispatchAction({
              type: g,
              dataType: m.dataType,
              dataIndexInside: m.dataIndex,
              seriesIndex: m.seriesIndex,
              isFromClick: !0
            });
          }
        });
      };
      function r(f) {
        f.clearColorPalette(), f.eachSeries(function(d) {
          d.clearColorPalette();
        });
      }
      function n(f) {
        var d = [], h = [], p = !1;
        if (f.eachComponent(function(y, b) {
          var w = b.get("zlevel") || 0, _ = b.get("z") || 0, S = b.getZLevelKey();
          p = p || !!S, (y === "series" ? h : d).push({
            zlevel: w,
            z: _,
            idx: b.componentIndex,
            type: y,
            key: S
          });
        }), p) {
          var v = d.concat(h), g, m;
          lg(v, function(y, b) {
            return y.zlevel === b.zlevel ? y.z - b.z : y.zlevel - b.zlevel;
          }), j(v, function(y) {
            var b = f.getComponent(y.type, y.idx), w = y.zlevel, _ = y.key;
            g != null && (w = Math.max(g, w)), _ ? (w === g && _ !== m && w++, m = _) : m && (w === g && w++, m = ""), g = w, b.setZLevel(w);
          });
        }
      }
      cx = function(f, d, h, p, v) {
        n(d), HN(f, d, h, p, v), j(f._chartsViews, function(g) {
          g.__alive = !1;
        }), dv(f, d, h, p, v), j(f._chartsViews, function(g) {
          g.__alive || g.remove(d, h);
        });
      }, HN = function(f, d, h, p, v, g) {
        j(g || f._componentsViews, function(m) {
          var y = m.__model;
          u(y, m), m.render(y, d, h, p), s(y, m), c(y, m);
        });
      }, dv = function(f, d, h, p, v, g) {
        var m = f._scheduler;
        v = ae(v || {}, {
          updatedSeries: d.getSeries()
        }), vi.trigger("series:beforeupdate", d, h, v);
        var y = !1;
        d.eachSeries(function(b) {
          var w = f._chartsMap[b.__viewId];
          w.__alive = !0;
          var _ = w.renderTask;
          m.updatePayload(_, p), u(b, w), g && g.get(b.uid) && _.dirty(), _.perform(m.getPerformArgs(_)) && (y = !0), w.group.silent = !!b.get("silent"), o(b, w), TD(b);
        }), m.unfinished = y || m.unfinished, vi.trigger("series:layoutlabels", d, h, v), vi.trigger("series:transition", d, h, v), d.eachSeries(function(b) {
          var w = f._chartsMap[b.__viewId];
          s(b, w), c(b, w);
        }), a(f, d), vi.trigger("series:afterupdate", d, h, v);
      }, kn = function(f) {
        f[ix] = !0, f.getZr().wakeUp();
      }, WN = function(f) {
        f[ix] && (f.getZr().storage.traverse(function(d) {
          pc(d) || i(d);
        }), f[ix] = !1);
      };
      function i(f) {
        for (var d = [], h = f.currentStates, p = 0; p < h.length; p++) {
          var v = h[p];
          v === "emphasis" || v === "blur" || v === "select" || d.push(v);
        }
        f.selected && f.states.select && d.push("select"), f.hoverState === By && f.states.emphasis ? d.push("emphasis") : f.hoverState === tp && f.states.blur && d.push("blur"), f.useStates(d);
      }
      function a(f, d) {
        var h = f._zr, p = h.storage, v = 0;
        p.traverse(function(g) {
          g.isGroup || v++;
        }), v > d.get("hoverLayerThreshold") && !st.node && !st.worker && d.eachSeries(function(g) {
          if (!g.preventUsingHoverLayer) {
            var m = f._chartsMap[g.__viewId];
            m.__alive && m.eachRendered(function(y) {
              y.states.emphasis && (y.states.emphasis.hoverLayer = !0);
            });
          }
        });
      }
      function o(f, d) {
        var h = f.get("blendMode") || null;
        d.eachRendered(function(p) {
          p.isGroup || (p.style.blend = h);
        });
      }
      function s(f, d) {
        if (!f.preventAutoZ) {
          var h = f.get("z") || 0, p = f.get("zlevel") || 0;
          d.eachRendered(function(v) {
            return l(v, h, p, -1 / 0), !0;
          });
        }
      }
      function l(f, d, h, p) {
        var v = f.getTextContent(), g = f.getTextGuideLine(), m = f.isGroup;
        if (m)
          for (var y = f.childrenRef(), b = 0; b < y.length; b++)
            p = Math.max(l(y[b], d, h, p), p);
        else
          f.z = d, f.zlevel = h, p = Math.max(f.z2, p);
        if (v && (v.z = d, v.zlevel = h, isFinite(p) && (v.z2 = p + 2)), g) {
          var w = f.textGuideLineConfig;
          g.z = d, g.zlevel = h, isFinite(p) && (g.z2 = p + (w && w.showAbove ? 1 : -1));
        }
        return p;
      }
      function u(f, d) {
        d.eachRendered(function(h) {
          if (!pc(h)) {
            var p = h.getTextContent(), v = h.getTextGuideLine();
            h.stateTransition && (h.stateTransition = null), p && p.stateTransition && (p.stateTransition = null), v && v.stateTransition && (v.stateTransition = null), h.hasState() ? (h.prevStates = h.currentStates, h.clearStates()) : h.prevStates && (h.prevStates = null);
          }
        });
      }
      function c(f, d) {
        var h = f.getModel("stateAnimation"), p = f.isAnimationEnabled(), v = h.get("duration"), g = v > 0 ? {
          duration: v,
          delay: h.get("delay"),
          easing: h.get("easing")
          // additive: stateAnimationModel.get('additive')
        } : null;
        d.eachRendered(function(m) {
          if (m.states && m.states.emphasis) {
            if (pc(m))
              return;
            if (m instanceof lt && Nne(m), m.__dirty) {
              var y = m.prevStates;
              y && m.useStates(y);
            }
            if (p) {
              m.stateTransition = g;
              var b = m.getTextContent(), w = m.getTextGuideLine();
              b && (b.stateTransition = g), w && (w.stateTransition = g);
            }
            m.__dirty && i(m);
          }
        });
      }
      GN = function(f) {
        return new /** @class */
        (function(d) {
          ee(h, d);
          function h() {
            return d !== null && d.apply(this, arguments) || this;
          }
          return h.prototype.getCoordinateSystems = function() {
            return f._coordSysMgr.getCoordinateSystems();
          }, h.prototype.getComponentByElement = function(p) {
            for (; p; ) {
              var v = p.__ecComponentInfo;
              if (v != null)
                return f._model.getComponent(v.mainType, v.index);
              p = p.parent;
            }
          }, h.prototype.enterEmphasis = function(p, v) {
            Ka(p, v), kn(f);
          }, h.prototype.leaveEmphasis = function(p, v) {
            qa(p, v), kn(f);
          }, h.prototype.enterBlur = function(p) {
            H9(p), kn(f);
          }, h.prototype.leaveBlur = function(p) {
            hC(p), kn(f);
          }, h.prototype.enterSelect = function(p) {
            G9(p), kn(f);
          }, h.prototype.leaveSelect = function(p) {
            W9(p), kn(f);
          }, h.prototype.getModel = function() {
            return f.getModel();
          }, h.prototype.getViewOfComponentModel = function(p) {
            return f.getViewOfComponentModel(p);
          }, h.prototype.getViewOfSeriesModel = function(p) {
            return f.getViewOfSeriesModel(p);
          }, h;
        }(R6))(f);
      }, E8 = function(f) {
        function d(h, p) {
          for (var v = 0; v < h.length; v++) {
            var g = h[v];
            g[ax] = p;
          }
        }
        j(Gd, function(h, p) {
          f._messageCenter.on(p, function(v) {
            if (wm[f.group] && f[ax] !== BN) {
              if (v && v.escapeConnect)
                return;
              var g = f.makeActionFromEvent(v), m = [];
              j(Ml, function(y) {
                y !== f && y.group === f.group && m.push(y);
              }), d(m, BN), j(m, function(y) {
                y[ax] !== rse && y.dispatchAction(g);
              }), d(m, nse);
            }
          });
        });
      };
    }(), t;
  }(ai)
), GC = ym.prototype;
GC.on = S8("on");
GC.off = S8("off");
GC.one = function(e, t, r) {
  var n = this;
  ti("ECharts#one is deprecated.");
  function i() {
    for (var a = [], o = 0; o < arguments.length; o++)
      a[o] = arguments[o];
    t && t.apply && t.apply(this, a), n.off(e, i);
  }
  this.on.call(this, e, i, r);
};
var ise = ["click", "dblclick", "mouseover", "mouseout", "mousemove", "mousedown", "mouseup", "globalout", "contextmenu"];
function wn(e) {
  process.env.NODE_ENV !== "production" && qt("Instance " + e + " has been disposed");
}
var xm = {}, Gd = {}, Iw = [], Lw = [], bm = [], D8 = {}, Rw = {}, Ml = {}, wm = {}, ase = +/* @__PURE__ */ new Date() - 0, ose = +/* @__PURE__ */ new Date() - 0, WC = "_echarts_instance_";
function sse(e, t, r) {
  var n = !(r && r.ssr);
  if (n) {
    if (process.env.NODE_ENV !== "production" && !e)
      throw new Error("Initialize failed: invalid dom.");
    var i = UC(e);
    if (i)
      return process.env.NODE_ENV !== "production" && qt("There is a chart instance already initialized on the dom."), i;
    process.env.NODE_ENV !== "production" && is(e) && e.nodeName.toUpperCase() !== "CANVAS" && (!e.clientWidth && (!r || r.width == null) || !e.clientHeight && (!r || r.height == null)) && qt("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.");
  }
  var a = new ym(e, t, r);
  return a.id = "ec_" + ase++, Ml[a.id] = a, n && T9(e, WC, a.id), E8(a), vi.trigger("afterinit", a), a;
}
function lse(e) {
  if (le(e)) {
    var t = e;
    e = null, j(t, function(r) {
      r.group != null && (e = r.group);
    }), e = e || "g_" + ose++, j(t, function(r) {
      r.group = e;
    });
  }
  return wm[e] = !0, e;
}
function N8(e) {
  wm[e] = !1;
}
var use = N8;
function cse(e) {
  ge(e) ? e = Ml[e] : e instanceof ym || (e = UC(e)), e instanceof ym && !e.isDisposed() && e.dispose();
}
function UC(e) {
  return Ml[yre(e, WC)];
}
function fse(e) {
  return Ml[e];
}
function YC(e, t) {
  D8[e] = t;
}
function ZC(e) {
  rt(Lw, e) < 0 && Lw.push(e);
}
function XC(e, t) {
  KC(Iw, e, t, Xoe);
}
function I8(e) {
  r0("afterinit", e);
}
function L8(e) {
  r0("afterupdate", e);
}
function r0(e, t) {
  vi.on(e, t);
}
function Pi(e, t, r) {
  Ee(t) && (r = t, t = "");
  var n = Ne(e) ? e.type : [e, e = {
    event: t
  }][0];
  e.event = (e.event || n).toLowerCase(), t = e.event, !Gd[t] && (Le(VN.test(n) && VN.test(t)), xm[n] || (xm[n] = {
    action: r,
    actionInfo: e
  }), Gd[t] = n);
}
function R8(e, t) {
  Kl.register(e, t);
}
function dse(e) {
  var t = Kl.get(e);
  if (t)
    return t.getDimensionsInfo ? t.getDimensionsInfo() : t.dimensions.slice();
}
function P8(e, t) {
  KC(bm, e, t, x8, "layout");
}
function ys(e, t) {
  KC(bm, e, t, b8, "visual");
}
var UN = [];
function KC(e, t, r, n, i) {
  if ((Ee(t) || Ne(t)) && (r = t, t = n), process.env.NODE_ENV !== "production") {
    if (isNaN(t) || t == null)
      throw new Error("Illegal priority");
    j(e, function(o) {
      Le(o.__raw !== r);
    });
  }
  if (!(rt(UN, r) >= 0)) {
    UN.push(r);
    var a = o8.wrapStageHandler(r, i);
    a.__prio = t, a.__raw = r, e.push(a);
  }
}
function qC(e, t) {
  Rw[e] = t;
}
function hse(e) {
  process.env.NODE_ENV !== "production" && ti("setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead."), Lk({
    createCanvas: e
  });
}
function k8(e, t, r) {
  var n = y8("registerMap");
  n && n(e, t, r);
}
function pse(e) {
  var t = y8("getMap");
  return t && t(e);
}
var O8 = Tae;
ys(HC, qae);
ys(t0, Jae);
ys(t0, Qae);
ys(HC, doe);
ys(t0, hoe);
ys(w8, Foe);
ZC(k6);
XC(Yoe, aae);
qC("default", eoe);
Pi({
  type: Tl,
  event: Tl,
  update: Tl
}, rr);
Pi({
  type: hg,
  event: hg,
  update: hg
}, rr);
Pi({
  type: Vd,
  event: Vd,
  update: Vd
}, rr);
Pi({
  type: pg,
  event: pg,
  update: pg
}, rr);
Pi({
  type: Bd,
  event: Bd,
  update: Bd
}, rr);
YC("light", coe);
YC("dark", c8);
var vse = {}, YN = [], gse = {
  registerPreprocessor: ZC,
  registerProcessor: XC,
  registerPostInit: I8,
  registerPostUpdate: L8,
  registerUpdateLifecycle: r0,
  registerAction: Pi,
  registerCoordinateSystem: R8,
  registerLayout: P8,
  registerVisual: ys,
  registerTransform: O8,
  registerLoading: qC,
  registerMap: k8,
  registerImpl: $oe,
  PRIORITY: _8,
  ComponentModel: at,
  ComponentView: $t,
  SeriesModel: zt,
  ChartView: It,
  // TODO Use ComponentModel and SeriesModel instead of Constructor
  registerComponentModel: function(e) {
    at.registerClass(e);
  },
  registerComponentView: function(e) {
    $t.registerClass(e);
  },
  registerSeriesModel: function(e) {
    zt.registerClass(e);
  },
  registerChartView: function(e) {
    It.registerClass(e);
  },
  registerSubTypeDefaulter: function(e, t) {
    at.registerSubTypeDefaulter(e, t);
  },
  registerPainter: function(e, t) {
    h9(e, t);
  }
};
function ot(e) {
  if (le(e)) {
    j(e, function(t) {
      ot(t);
    });
    return;
  }
  rt(YN, e) >= 0 || (YN.push(e), Ee(e) && (e = {
    install: e
  }), e.install(gse));
}
function Wf(e) {
  return e == null ? 0 : e.length || 1;
}
function ZN(e) {
  return e;
}
var Ja = (
  /** @class */
  function() {
    function e(t, r, n, i, a, o) {
      this._old = t, this._new = r, this._oldKeyGetter = n || ZN, this._newKeyGetter = i || ZN, this.context = a, this._diffModeMultiple = o === "multiple";
    }
    return e.prototype.add = function(t) {
      return this._add = t, this;
    }, e.prototype.update = function(t) {
      return this._update = t, this;
    }, e.prototype.updateManyToOne = function(t) {
      return this._updateManyToOne = t, this;
    }, e.prototype.updateOneToMany = function(t) {
      return this._updateOneToMany = t, this;
    }, e.prototype.updateManyToMany = function(t) {
      return this._updateManyToMany = t, this;
    }, e.prototype.remove = function(t) {
      return this._remove = t, this;
    }, e.prototype.execute = function() {
      this[this._diffModeMultiple ? "_executeMultiple" : "_executeOneToOne"]();
    }, e.prototype._executeOneToOne = function() {
      var t = this._old, r = this._new, n = {}, i = new Array(t.length), a = new Array(r.length);
      this._initIndexMap(t, null, i, "_oldKeyGetter"), this._initIndexMap(r, n, a, "_newKeyGetter");
      for (var o = 0; o < t.length; o++) {
        var s = i[o], l = n[s], u = Wf(l);
        if (u > 1) {
          var c = l.shift();
          l.length === 1 && (n[s] = l[0]), this._update && this._update(c, o);
        } else u === 1 ? (n[s] = null, this._update && this._update(l, o)) : this._remove && this._remove(o);
      }
      this._performRestAdd(a, n);
    }, e.prototype._executeMultiple = function() {
      var t = this._old, r = this._new, n = {}, i = {}, a = [], o = [];
      this._initIndexMap(t, n, a, "_oldKeyGetter"), this._initIndexMap(r, i, o, "_newKeyGetter");
      for (var s = 0; s < a.length; s++) {
        var l = a[s], u = n[l], c = i[l], f = Wf(u), d = Wf(c);
        if (f > 1 && d === 1)
          this._updateManyToOne && this._updateManyToOne(c, u), i[l] = null;
        else if (f === 1 && d > 1)
          this._updateOneToMany && this._updateOneToMany(c, u), i[l] = null;
        else if (f === 1 && d === 1)
          this._update && this._update(c, u), i[l] = null;
        else if (f > 1 && d > 1)
          this._updateManyToMany && this._updateManyToMany(c, u), i[l] = null;
        else if (f > 1)
          for (var h = 0; h < f; h++)
            this._remove && this._remove(u[h]);
        else
          this._remove && this._remove(u);
      }
      this._performRestAdd(o, i);
    }, e.prototype._performRestAdd = function(t, r) {
      for (var n = 0; n < t.length; n++) {
        var i = t[n], a = r[i], o = Wf(a);
        if (o > 1)
          for (var s = 0; s < o; s++)
            this._add && this._add(a[s]);
        else o === 1 && this._add && this._add(a);
        r[i] = null;
      }
    }, e.prototype._initIndexMap = function(t, r, n, i) {
      for (var a = this._diffModeMultiple, o = 0; o < t.length; o++) {
        var s = "_ec_" + this[i](t[o], o);
        if (a || (n[o] = s), !!r) {
          var l = r[s], u = Wf(l);
          u === 0 ? (r[s] = o, a && n.push(s)) : u === 1 ? r[s] = [l, o] : l.push(o);
        }
      }
    }, e;
  }()
), mse = (
  /** @class */
  function() {
    function e(t, r) {
      this._encode = t, this._schema = r;
    }
    return e.prototype.get = function() {
      return {
        // Do not generate full dimension name until fist used.
        fullDimensions: this._getFullDimensionNames(),
        encode: this._encode
      };
    }, e.prototype._getFullDimensionNames = function() {
      return this._cachedDimNames || (this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : []), this._cachedDimNames;
    }, e;
  }()
);
function yse(e, t) {
  var r = {}, n = r.encode = {}, i = Ce(), a = [], o = [], s = {};
  j(e.dimensions, function(d) {
    var h = e.getDimensionInfo(d), p = h.coordDim;
    if (p) {
      process.env.NODE_ENV !== "production" && Le(bw.get(p) == null);
      var v = h.coordDimIndex;
      fx(n, p)[v] = d, h.isExtraCoord || (i.set(p, 1), xse(h.type) && (a[0] = d), fx(s, p)[v] = e.getDimensionIndex(h.name)), h.defaultTooltip && o.push(d);
    }
    bw.each(function(g, m) {
      var y = fx(n, m), b = h.otherDims[m];
      b != null && b !== !1 && (y[b] = h.name);
    });
  });
  var l = [], u = {};
  i.each(function(d, h) {
    var p = n[h];
    u[h] = p[0], l = l.concat(p);
  }), r.dataDimsOnCoord = l, r.dataDimIndicesOnCoord = ue(l, function(d) {
    return e.getDimensionInfo(d).storeDimIndex;
  }), r.encodeFirstDimNotExtra = u;
  var c = n.label;
  c && c.length && (a = c.slice());
  var f = n.tooltip;
  return f && f.length ? o = f.slice() : o.length || (o = a.slice()), n.defaultedLabel = a, n.defaultedTooltip = o, r.userOutput = new mse(s, t), r;
}
function fx(e, t) {
  return e.hasOwnProperty(t) || (e[t] = []), e[t];
}
function _m(e) {
  return e === "category" ? "ordinal" : e === "time" ? "time" : "float";
}
function xse(e) {
  return !(e === "ordinal" || e === "time");
}
var xg = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      this.otherDims = {}, t != null && ae(this, t);
    }
    return e;
  }()
), bse = yt(), wse = {
  float: "f",
  int: "i",
  ordinal: "o",
  number: "n",
  time: "t"
}, z8 = (
  /** @class */
  function() {
    function e(t) {
      this.dimensions = t.dimensions, this._dimOmitted = t.dimensionOmitted, this.source = t.source, this._fullDimCount = t.fullDimensionCount, this._updateDimOmitted(t.dimensionOmitted);
    }
    return e.prototype.isDimensionOmitted = function() {
      return this._dimOmitted;
    }, e.prototype._updateDimOmitted = function(t) {
      this._dimOmitted = t, t && (this._dimNameMap || (this._dimNameMap = B8(this.source)));
    }, e.prototype.getSourceDimensionIndex = function(t) {
      return Ge(this._dimNameMap.get(t), -1);
    }, e.prototype.getSourceDimension = function(t) {
      var r = this.source.dimensionsDefine;
      if (r)
        return r[t];
    }, e.prototype.makeStoreSchema = function() {
      for (var t = this._fullDimCount, r = z6(this.source), n = !F8(t), i = "", a = [], o = 0, s = 0; o < t; o++) {
        var l = void 0, u = void 0, c = void 0, f = this.dimensions[s];
        if (f && f.storeDimIndex === o)
          l = r ? f.name : null, u = f.type, c = f.ordinalMeta, s++;
        else {
          var d = this.getSourceDimension(o);
          d && (l = r ? d.name : null, u = d.type);
        }
        a.push({
          property: l,
          type: u,
          ordinalMeta: c
        }), r && l != null && (!f || !f.isCalculationCoord) && (i += n ? l.replace(/\`/g, "`1").replace(/\$/g, "`2") : l), i += "$", i += wse[u] || "f", c && (i += c.uid), i += "$";
      }
      var h = this.source, p = [h.seriesLayoutBy, h.startIndex, i].join("$$");
      return {
        dimensions: a,
        hash: p
      };
    }, e.prototype.makeOutputDimensionNames = function() {
      for (var t = [], r = 0, n = 0; r < this._fullDimCount; r++) {
        var i = void 0, a = this.dimensions[n];
        if (a && a.storeDimIndex === r)
          a.isCalculationCoord || (i = a.name), n++;
        else {
          var o = this.getSourceDimension(r);
          o && (i = o.name);
        }
        t.push(i);
      }
      return t;
    }, e.prototype.appendCalculationDimension = function(t) {
      this.dimensions.push(t), t.isCalculationCoord = !0, this._fullDimCount++, this._updateDimOmitted(!0);
    }, e;
  }()
);
function j8(e) {
  return e instanceof z8;
}
function V8(e) {
  for (var t = Ce(), r = 0; r < (e || []).length; r++) {
    var n = e[r], i = Ne(n) ? n.name : n;
    i != null && t.get(i) == null && t.set(i, r);
  }
  return t;
}
function B8(e) {
  var t = bse(e);
  return t.dimNameMap || (t.dimNameMap = V8(e.dimensionsDefine));
}
function F8(e) {
  return e > 30;
}
var Uf = Ne, yo = ue, _se = typeof Int32Array > "u" ? Array : Int32Array, Sse = "e\0\0", XN = -1, Cse = ["hasItemOption", "_nameList", "_idList", "_invertedIndicesMap", "_dimSummary", "userOutput", "_rawData", "_dimValueGetter", "_nameDimIdx", "_idDimIdx", "_nameRepeatCount"], Tse = ["_approximateExtent"], KN, hv, Yf, Mu, dx, Zf, hx, Xr = (
  /** @class */
  function() {
    function e(t, r) {
      this.type = "list", this._dimOmitted = !1, this._nameList = [], this._idList = [], this._visual = {}, this._layout = {}, this._itemVisuals = [], this._itemLayouts = [], this._graphicEls = [], this._approximateExtent = {}, this._calculationInfo = {}, this.hasItemOption = !1, this.TRANSFERABLE_METHODS = ["cloneShallow", "downSample", "minmaxDownSample", "lttbDownSample", "map"], this.CHANGABLE_METHODS = ["filterSelf", "selectRange"], this.DOWNSAMPLE_METHODS = ["downSample", "minmaxDownSample", "lttbDownSample"];
      var n, i = !1;
      j8(t) ? (n = t.dimensions, this._dimOmitted = t.isDimensionOmitted(), this._schema = t) : (i = !0, n = t), n = n || ["x", "y"];
      for (var a = {}, o = [], s = {}, l = !1, u = {}, c = 0; c < n.length; c++) {
        var f = n[c], d = ge(f) ? new xg({
          name: f
        }) : f instanceof xg ? f : new xg(f), h = d.name;
        d.type = d.type || "float", d.coordDim || (d.coordDim = h, d.coordDimIndex = 0);
        var p = d.otherDims = d.otherDims || {};
        o.push(h), a[h] = d, u[h] != null && (l = !0), d.createInvertedIndices && (s[h] = []), p.itemName === 0 && (this._nameDimIdx = c), p.itemId === 0 && (this._idDimIdx = c), process.env.NODE_ENV !== "production" && Le(i || d.storeDimIndex >= 0), i && (d.storeDimIndex = c);
      }
      if (this.dimensions = o, this._dimInfos = a, this._initGetDimensionInfo(l), this.hostModel = r, this._invertedIndicesMap = s, this._dimOmitted) {
        var v = this._dimIdxToName = Ce();
        j(o, function(g) {
          v.set(a[g].storeDimIndex, g);
        });
      }
    }
    return e.prototype.getDimension = function(t) {
      var r = this._recognizeDimIndex(t);
      if (r == null)
        return t;
      if (r = t, !this._dimOmitted)
        return this.dimensions[r];
      var n = this._dimIdxToName.get(r);
      if (n != null)
        return n;
      var i = this._schema.getSourceDimension(r);
      if (i)
        return i.name;
    }, e.prototype.getDimensionIndex = function(t) {
      var r = this._recognizeDimIndex(t);
      if (r != null)
        return r;
      if (t == null)
        return -1;
      var n = this._getDimInfo(t);
      return n ? n.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(t) : -1;
    }, e.prototype._recognizeDimIndex = function(t) {
      if (bt(t) || t != null && !isNaN(t) && !this._getDimInfo(t) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(t) < 0))
        return +t;
    }, e.prototype._getStoreDimIndex = function(t) {
      var r = this.getDimensionIndex(t);
      if (process.env.NODE_ENV !== "production" && r == null)
        throw new Error("Unknown dimension " + t);
      return r;
    }, e.prototype.getDimensionInfo = function(t) {
      return this._getDimInfo(this.getDimension(t));
    }, e.prototype._initGetDimensionInfo = function(t) {
      var r = this._dimInfos;
      this._getDimInfo = t ? function(n) {
        return r.hasOwnProperty(n) ? r[n] : void 0;
      } : function(n) {
        return r[n];
      };
    }, e.prototype.getDimensionsOnCoord = function() {
      return this._dimSummary.dataDimsOnCoord.slice();
    }, e.prototype.mapDimension = function(t, r) {
      var n = this._dimSummary;
      if (r == null)
        return n.encodeFirstDimNotExtra[t];
      var i = n.encode[t];
      return i ? i[r] : null;
    }, e.prototype.mapDimensionsAll = function(t) {
      var r = this._dimSummary, n = r.encode[t];
      return (n || []).slice();
    }, e.prototype.getStore = function() {
      return this._store;
    }, e.prototype.initData = function(t, r, n) {
      var i = this, a;
      if (t instanceof Cw && (a = t), !a) {
        var o = this.dimensions, s = OC(t) || zr(t) ? new j6(t, o.length) : t;
        a = new Cw();
        var l = yo(o, function(u) {
          return {
            type: i._dimInfos[u].type,
            property: u
          };
        });
        a.initData(s, l, n);
      }
      this._store = a, this._nameList = (r || []).slice(), this._idList = [], this._nameRepeatCount = {}, this._doInit(0, a.count()), this._dimSummary = yse(this, this._schema), this.userOutput = this._dimSummary.userOutput;
    }, e.prototype.appendData = function(t) {
      var r = this._store.appendData(t);
      this._doInit(r[0], r[1]);
    }, e.prototype.appendValues = function(t, r) {
      var n = this._store.appendValues(t, r && r.length), i = n.start, a = n.end, o = this._shouldMakeIdFromName();
      if (this._updateOrdinalMeta(), r)
        for (var s = i; s < a; s++) {
          var l = s - i;
          this._nameList[s] = r[l], o && hx(this, s);
        }
    }, e.prototype._updateOrdinalMeta = function() {
      for (var t = this._store, r = this.dimensions, n = 0; n < r.length; n++) {
        var i = this._dimInfos[r[n]];
        i.ordinalMeta && t.collectOrdinalMeta(i.storeDimIndex, i.ordinalMeta);
      }
    }, e.prototype._shouldMakeIdFromName = function() {
      var t = this._store.getProvider();
      return this._idDimIdx == null && t.getSource().sourceFormat !== $a && !t.fillStorage;
    }, e.prototype._doInit = function(t, r) {
      if (!(t >= r)) {
        var n = this._store, i = n.getProvider();
        this._updateOrdinalMeta();
        var a = this._nameList, o = this._idList, s = i.getSource().sourceFormat, l = s === si;
        if (l && !i.pure)
          for (var u = [], c = t; c < r; c++) {
            var f = i.getItem(c, u);
            if (!this.hasItemOption && are(f) && (this.hasItemOption = !0), f) {
              var d = f.name;
              a[c] == null && d != null && (a[c] = yr(d, null));
              var h = f.id;
              o[c] == null && h != null && (o[c] = yr(h, null));
            }
          }
        if (this._shouldMakeIdFromName())
          for (var c = t; c < r; c++)
            hx(this, c);
        KN(this);
      }
    }, e.prototype.getApproximateExtent = function(t) {
      return this._approximateExtent[t] || this._store.getDataExtent(this._getStoreDimIndex(t));
    }, e.prototype.setApproximateExtent = function(t, r) {
      r = this.getDimension(r), this._approximateExtent[r] = t.slice();
    }, e.prototype.getCalculationInfo = function(t) {
      return this._calculationInfo[t];
    }, e.prototype.setCalculationInfo = function(t, r) {
      Uf(t) ? ae(this._calculationInfo, t) : this._calculationInfo[t] = r;
    }, e.prototype.getName = function(t) {
      var r = this.getRawIndex(t), n = this._nameList[r];
      return n == null && this._nameDimIdx != null && (n = Yf(this, this._nameDimIdx, r)), n == null && (n = ""), n;
    }, e.prototype._getCategory = function(t, r) {
      var n = this._store.get(t, r), i = this._store.getOrdinalMeta(t);
      return i ? i.categories[n] : n;
    }, e.prototype.getId = function(t) {
      return hv(this, this.getRawIndex(t));
    }, e.prototype.count = function() {
      return this._store.count();
    }, e.prototype.get = function(t, r) {
      var n = this._store, i = this._dimInfos[t];
      if (i)
        return n.get(i.storeDimIndex, r);
    }, e.prototype.getByRawIndex = function(t, r) {
      var n = this._store, i = this._dimInfos[t];
      if (i)
        return n.getByRawIndex(i.storeDimIndex, r);
    }, e.prototype.getIndices = function() {
      return this._store.getIndices();
    }, e.prototype.getDataExtent = function(t) {
      return this._store.getDataExtent(this._getStoreDimIndex(t));
    }, e.prototype.getSum = function(t) {
      return this._store.getSum(this._getStoreDimIndex(t));
    }, e.prototype.getMedian = function(t) {
      return this._store.getMedian(this._getStoreDimIndex(t));
    }, e.prototype.getValues = function(t, r) {
      var n = this, i = this._store;
      return le(t) ? i.getValues(yo(t, function(a) {
        return n._getStoreDimIndex(a);
      }), r) : i.getValues(t);
    }, e.prototype.hasValue = function(t) {
      for (var r = this._dimSummary.dataDimIndicesOnCoord, n = 0, i = r.length; n < i; n++)
        if (isNaN(this._store.get(r[n], t)))
          return !1;
      return !0;
    }, e.prototype.indexOfName = function(t) {
      for (var r = 0, n = this._store.count(); r < n; r++)
        if (this.getName(r) === t)
          return r;
      return -1;
    }, e.prototype.getRawIndex = function(t) {
      return this._store.getRawIndex(t);
    }, e.prototype.indexOfRawIndex = function(t) {
      return this._store.indexOfRawIndex(t);
    }, e.prototype.rawIndexOf = function(t, r) {
      var n = t && this._invertedIndicesMap[t];
      if (process.env.NODE_ENV !== "production" && !n)
        throw new Error("Do not supported yet");
      var i = n && n[r];
      return i == null || isNaN(i) ? XN : i;
    }, e.prototype.indicesOfNearest = function(t, r, n) {
      return this._store.indicesOfNearest(this._getStoreDimIndex(t), r, n);
    }, e.prototype.each = function(t, r, n) {
      Ee(t) && (n = r, r = t, t = []);
      var i = n || this, a = yo(Mu(t), this._getStoreDimIndex, this);
      this._store.each(a, i ? xe(r, i) : r);
    }, e.prototype.filterSelf = function(t, r, n) {
      Ee(t) && (n = r, r = t, t = []);
      var i = n || this, a = yo(Mu(t), this._getStoreDimIndex, this);
      return this._store = this._store.filter(a, i ? xe(r, i) : r), this;
    }, e.prototype.selectRange = function(t) {
      var r = this, n = {}, i = ut(t);
      return j(i, function(a) {
        var o = r._getStoreDimIndex(a);
        n[o] = t[a];
      }), this._store = this._store.selectRange(n), this;
    }, e.prototype.mapArray = function(t, r, n) {
      Ee(t) && (n = r, r = t, t = []), n = n || this;
      var i = [];
      return this.each(t, function() {
        i.push(r && r.apply(this, arguments));
      }, n), i;
    }, e.prototype.map = function(t, r, n, i) {
      var a = n || i || this, o = yo(Mu(t), this._getStoreDimIndex, this), s = Zf(this);
      return s._store = this._store.map(o, a ? xe(r, a) : r), s;
    }, e.prototype.modify = function(t, r, n, i) {
      var a = this, o = n || i || this;
      process.env.NODE_ENV !== "production" && j(Mu(t), function(l) {
        var u = a.getDimensionInfo(l);
        u.isCalculationCoord || console.error("Danger: only stack dimension can be modified");
      });
      var s = yo(Mu(t), this._getStoreDimIndex, this);
      this._store.modify(s, o ? xe(r, o) : r);
    }, e.prototype.downSample = function(t, r, n, i) {
      var a = Zf(this);
      return a._store = this._store.downSample(this._getStoreDimIndex(t), r, n, i), a;
    }, e.prototype.minmaxDownSample = function(t, r) {
      var n = Zf(this);
      return n._store = this._store.minmaxDownSample(this._getStoreDimIndex(t), r), n;
    }, e.prototype.lttbDownSample = function(t, r) {
      var n = Zf(this);
      return n._store = this._store.lttbDownSample(this._getStoreDimIndex(t), r), n;
    }, e.prototype.getRawDataItem = function(t) {
      return this._store.getRawDataItem(t);
    }, e.prototype.getItemModel = function(t) {
      var r = this.hostModel, n = this.getRawDataItem(t);
      return new Tt(n, r, r && r.ecModel);
    }, e.prototype.diff = function(t) {
      var r = this;
      return new Ja(t ? t.getStore().getIndices() : [], this.getStore().getIndices(), function(n) {
        return hv(t, n);
      }, function(n) {
        return hv(r, n);
      });
    }, e.prototype.getVisual = function(t) {
      var r = this._visual;
      return r && r[t];
    }, e.prototype.setVisual = function(t, r) {
      this._visual = this._visual || {}, Uf(t) ? ae(this._visual, t) : this._visual[t] = r;
    }, e.prototype.getItemVisual = function(t, r) {
      var n = this._itemVisuals[t], i = n && n[r];
      return i ?? this.getVisual(r);
    }, e.prototype.hasItemVisual = function() {
      return this._itemVisuals.length > 0;
    }, e.prototype.ensureUniqueItemVisual = function(t, r) {
      var n = this._itemVisuals, i = n[t];
      i || (i = n[t] = {});
      var a = i[r];
      return a == null && (a = this.getVisual(r), le(a) ? a = a.slice() : Uf(a) && (a = ae({}, a)), i[r] = a), a;
    }, e.prototype.setItemVisual = function(t, r, n) {
      var i = this._itemVisuals[t] || {};
      this._itemVisuals[t] = i, Uf(r) ? ae(i, r) : i[r] = n;
    }, e.prototype.clearAllVisual = function() {
      this._visual = {}, this._itemVisuals = [];
    }, e.prototype.setLayout = function(t, r) {
      Uf(t) ? ae(this._layout, t) : this._layout[t] = r;
    }, e.prototype.getLayout = function(t) {
      return this._layout[t];
    }, e.prototype.getItemLayout = function(t) {
      return this._itemLayouts[t];
    }, e.prototype.setItemLayout = function(t, r, n) {
      this._itemLayouts[t] = n ? ae(this._itemLayouts[t] || {}, r) : r;
    }, e.prototype.clearItemLayouts = function() {
      this._itemLayouts.length = 0;
    }, e.prototype.setItemGraphicEl = function(t, r) {
      var n = this.hostModel && this.hostModel.seriesIndex;
      cw(n, this.dataType, t, r), this._graphicEls[t] = r;
    }, e.prototype.getItemGraphicEl = function(t) {
      return this._graphicEls[t];
    }, e.prototype.eachItemGraphicEl = function(t, r) {
      j(this._graphicEls, function(n, i) {
        n && t && t.call(r, n, i);
      });
    }, e.prototype.cloneShallow = function(t) {
      return t || (t = new e(this._schema ? this._schema : yo(this.dimensions, this._getDimInfo, this), this.hostModel)), dx(t, this), t._store = this._store, t;
    }, e.prototype.wrapMethod = function(t, r) {
      var n = this[t];
      Ee(n) && (this.__wrappedMethods = this.__wrappedMethods || [], this.__wrappedMethods.push(t), this[t] = function() {
        var i = n.apply(this, arguments);
        return r.apply(this, [i].concat(My(arguments)));
      });
    }, e.internalField = function() {
      KN = function(t) {
        var r = t._invertedIndicesMap;
        j(r, function(n, i) {
          var a = t._dimInfos[i], o = a.ordinalMeta, s = t._store;
          if (o) {
            n = r[i] = new _se(o.categories.length);
            for (var l = 0; l < n.length; l++)
              n[l] = XN;
            for (var l = 0; l < s.count(); l++)
              n[s.get(a.storeDimIndex, l)] = l;
          }
        });
      }, Yf = function(t, r, n) {
        return yr(t._getCategory(r, n), null);
      }, hv = function(t, r) {
        var n = t._idList[r];
        return n == null && t._idDimIdx != null && (n = Yf(t, t._idDimIdx, r)), n == null && (n = Sse + r), n;
      }, Mu = function(t) {
        return le(t) || (t = t != null ? [t] : []), t;
      }, Zf = function(t) {
        var r = new e(t._schema ? t._schema : yo(t.dimensions, t._getDimInfo, t), t.hostModel);
        return dx(r, t), r;
      }, dx = function(t, r) {
        j(Cse.concat(r.__wrappedMethods || []), function(n) {
          r.hasOwnProperty(n) && (t[n] = r[n]);
        }), t.__wrappedMethods = r.__wrappedMethods, j(Tse, function(n) {
          t[n] = ze(r[n]);
        }), t._calculationInfo = ae({}, r._calculationInfo);
      }, hx = function(t, r) {
        var n = t._nameList, i = t._idList, a = t._nameDimIdx, o = t._idDimIdx, s = n[r], l = i[r];
        if (s == null && a != null && (n[r] = s = Yf(t, a, r)), l == null && o != null && (i[r] = l = Yf(t, o, r)), l == null && s != null) {
          var u = t._nameRepeatCount, c = u[s] = (u[s] || 0) + 1;
          l = s, c > 1 && (l += "__ec__" + c), i[r] = l;
        }
      };
    }(), e;
  }()
);
function Ase(e, t) {
  return yf(e, t).dimensions;
}
function yf(e, t) {
  OC(e) || (e = zC(e)), t = t || {};
  var r = t.coordDimensions || [], n = t.dimensionsDefine || e.dimensionsDefine || [], i = Ce(), a = [], o = Ese(e, r, n, t.dimensionsCount), s = t.canOmitUnusedDimensions && F8(o), l = n === e.dimensionsDefine, u = l ? B8(e) : V8(n), c = t.encodeDefine;
  !c && t.encodeDefaulter && (c = t.encodeDefaulter(e, o));
  for (var f = Ce(c), d = new U6(o), h = 0; h < d.length; h++)
    d[h] = -1;
  function p(M) {
    var D = d[M];
    if (D < 0) {
      var N = n[M], R = Ne(N) ? N : {
        name: N
      }, O = new xg(), E = R.name;
      E != null && u.get(E) != null && (O.name = O.displayName = E), R.type != null && (O.type = R.type), R.displayName != null && (O.displayName = R.displayName);
      var L = a.length;
      return d[M] = L, O.storeDimIndex = M, a.push(O), O;
    }
    return a[D];
  }
  if (!s)
    for (var h = 0; h < o; h++)
      p(h);
  f.each(function(M, D) {
    var N = Ot(M).slice();
    if (N.length === 1 && !ge(N[0]) && N[0] < 0) {
      f.set(D, !1);
      return;
    }
    var R = f.set(D, []);
    j(N, function(O, E) {
      var L = ge(O) ? u.get(O) : O;
      L != null && L < o && (R[E] = L, g(p(L), D, E));
    });
  });
  var v = 0;
  j(r, function(M) {
    var D, N, R, O;
    if (ge(M))
      D = M, O = {};
    else {
      O = M, D = O.name;
      var E = O.ordinalMeta;
      O.ordinalMeta = null, O = ae({}, O), O.ordinalMeta = E, N = O.dimsDef, R = O.otherDims, O.name = O.coordDim = O.coordDimIndex = O.dimsDef = O.otherDims = null;
    }
    var L = f.get(D);
    if (L !== !1) {
      if (L = Ot(L), !L.length)
        for (var I = 0; I < (N && N.length || 1); I++) {
          for (; v < o && p(v).coordDim != null; )
            v++;
          v < o && L.push(v++);
        }
      j(L, function(P, k) {
        var z = p(P);
        if (l && O.type != null && (z.type = O.type), g(Ie(z, O), D, k), z.name == null && N) {
          var V = N[k];
          !Ne(V) && (V = {
            name: V
          }), z.name = z.displayName = V.name, z.defaultTooltip = V.defaultTooltip;
        }
        R && Ie(z.otherDims, R);
      });
    }
  });
  function g(M, D, N) {
    bw.get(D) != null ? M.otherDims[D] = N : (M.coordDim = D, M.coordDimIndex = N, i.set(D, !0));
  }
  var m = t.generateCoord, y = t.generateCoordCount, b = y != null;
  y = m ? y || 1 : 0;
  var w = m || "value";
  function _(M) {
    M.name == null && (M.name = M.coordDim);
  }
  if (s)
    j(a, function(M) {
      _(M);
    }), a.sort(function(M, D) {
      return M.storeDimIndex - D.storeDimIndex;
    });
  else
    for (var S = 0; S < o; S++) {
      var C = p(S), A = C.coordDim;
      A == null && (C.coordDim = Dse(w, i, b), C.coordDimIndex = 0, (!m || y <= 0) && (C.isExtraCoord = !0), y--), _(C), C.type == null && (N6(e, S) === Pr.Must || C.isExtraCoord && (C.otherDims.itemName != null || C.otherDims.seriesName != null)) && (C.type = "ordinal");
    }
  return Mse(a), new z8({
    source: e,
    dimensions: a,
    fullDimensionCount: o,
    dimensionOmitted: s
  });
}
function Mse(e) {
  for (var t = Ce(), r = 0; r < e.length; r++) {
    var n = e[r], i = n.name, a = t.get(i) || 0;
    a > 0 && (n.name = i + (a - 1)), a++, t.set(i, a);
  }
}
function Ese(e, t, r, n) {
  var i = Math.max(e.dimensionsDetectedCount || 1, t.length, r.length, n || 0);
  return j(t, function(a) {
    var o;
    Ne(a) && (o = a.dimsDef) && (i = Math.max(i, o.length));
  }), i;
}
function Dse(e, t, r) {
  if (r || t.hasKey(e)) {
    for (var n = 0; t.hasKey(e + n); )
      n++;
    e += n;
  }
  return t.set(e, !0), e;
}
var Nse = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      this.coordSysDims = [], this.axisMap = Ce(), this.categoryAxisMap = Ce(), this.coordSysName = t;
    }
    return e;
  }()
);
function Ise(e) {
  var t = e.get("coordinateSystem"), r = new Nse(t), n = Lse[t];
  if (n)
    return n(e, r, r.axisMap, r.categoryAxisMap), r;
}
var Lse = {
  cartesian2d: function(e, t, r, n) {
    var i = e.getReferringComponents("xAxis", pr).models[0], a = e.getReferringComponents("yAxis", pr).models[0];
    if (process.env.NODE_ENV !== "production") {
      if (!i)
        throw new Error('xAxis "' + ur(e.get("xAxisIndex"), e.get("xAxisId"), 0) + '" not found');
      if (!a)
        throw new Error('yAxis "' + ur(e.get("xAxisIndex"), e.get("yAxisId"), 0) + '" not found');
    }
    t.coordSysDims = ["x", "y"], r.set("x", i), r.set("y", a), Eu(i) && (n.set("x", i), t.firstCategoryDimIndex = 0), Eu(a) && (n.set("y", a), t.firstCategoryDimIndex == null && (t.firstCategoryDimIndex = 1));
  },
  singleAxis: function(e, t, r, n) {
    var i = e.getReferringComponents("singleAxis", pr).models[0];
    if (process.env.NODE_ENV !== "production" && !i)
      throw new Error("singleAxis should be specified.");
    t.coordSysDims = ["single"], r.set("single", i), Eu(i) && (n.set("single", i), t.firstCategoryDimIndex = 0);
  },
  polar: function(e, t, r, n) {
    var i = e.getReferringComponents("polar", pr).models[0], a = i.findAxisModel("radiusAxis"), o = i.findAxisModel("angleAxis");
    if (process.env.NODE_ENV !== "production") {
      if (!o)
        throw new Error("angleAxis option not found");
      if (!a)
        throw new Error("radiusAxis option not found");
    }
    t.coordSysDims = ["radius", "angle"], r.set("radius", a), r.set("angle", o), Eu(a) && (n.set("radius", a), t.firstCategoryDimIndex = 0), Eu(o) && (n.set("angle", o), t.firstCategoryDimIndex == null && (t.firstCategoryDimIndex = 1));
  },
  geo: function(e, t, r, n) {
    t.coordSysDims = ["lng", "lat"];
  },
  parallel: function(e, t, r, n) {
    var i = e.ecModel, a = i.getComponent("parallel", e.get("parallelIndex")), o = t.coordSysDims = a.dimensions.slice();
    j(a.parallelAxisIndex, function(s, l) {
      var u = i.getComponent("parallelAxis", s), c = o[l];
      r.set(c, u), Eu(u) && (n.set(c, u), t.firstCategoryDimIndex == null && (t.firstCategoryDimIndex = l));
    });
  }
};
function Eu(e) {
  return e.get("type") === "category";
}
function $8(e, t, r) {
  r = r || {};
  var n = r.byIndex, i = r.stackedCoordDimension, a, o, s;
  Rse(t) ? a = t : (o = t.schema, a = o.dimensions, s = t.store);
  var l = !!(e && e.get("stack")), u, c, f, d;
  if (j(a, function(y, b) {
    ge(y) && (a[b] = y = {
      name: y
    }), l && !y.isExtraCoord && (!n && !u && y.ordinalMeta && (u = y), !c && y.type !== "ordinal" && y.type !== "time" && (!i || i === y.coordDim) && (c = y));
  }), c && !n && !u && (n = !0), c) {
    f = "__\0ecstackresult_" + e.id, d = "__\0ecstackedover_" + e.id, u && (u.createInvertedIndices = !0);
    var h = c.coordDim, p = c.type, v = 0;
    j(a, function(y) {
      y.coordDim === h && v++;
    });
    var g = {
      name: f,
      coordDim: h,
      coordDimIndex: v,
      type: p,
      isExtraCoord: !0,
      isCalculationCoord: !0,
      storeDimIndex: a.length
    }, m = {
      name: d,
      // This dimension contains stack base (generally, 0), so do not set it as
      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.
      coordDim: d,
      coordDimIndex: v + 1,
      type: p,
      isExtraCoord: !0,
      isCalculationCoord: !0,
      storeDimIndex: a.length + 1
    };
    o ? (s && (g.storeDimIndex = s.ensureCalculationDimension(d, p), m.storeDimIndex = s.ensureCalculationDimension(f, p)), o.appendCalculationDimension(g), o.appendCalculationDimension(m)) : (a.push(g), a.push(m));
  }
  return {
    stackedDimension: c && c.name,
    stackedByDimension: u && u.name,
    isStackedByIndex: n,
    stackedOverDimension: d,
    stackResultDimension: f
  };
}
function Rse(e) {
  return !j8(e.schema);
}
function Qa(e, t) {
  return !!t && t === e.getCalculationInfo("stackedDimension");
}
function JC(e, t) {
  return Qa(e, t) ? e.getCalculationInfo("stackResultDimension") : t;
}
function Pse(e, t) {
  var r = e.get("coordinateSystem"), n = Kl.get(r), i;
  return t && t.coordSysDims && (i = ue(t.coordSysDims, function(a) {
    var o = {
      name: a
    }, s = t.axisMap.get(a);
    if (s) {
      var l = s.get("type");
      o.type = _m(l);
    }
    return o;
  })), i || (i = n && (n.getDimensionsInfo ? n.getDimensionsInfo() : n.dimensions.slice()) || ["x", "y"]), i;
}
function kse(e, t, r) {
  var n, i;
  return r && j(e, function(a, o) {
    var s = a.coordDim, l = r.categoryAxisMap.get(s);
    l && (n == null && (n = o), a.ordinalMeta = l.getOrdinalMeta(), t && (a.createInvertedIndices = !0)), a.otherDims.itemName != null && (i = !0);
  }), !i && n != null && (e[n].otherDims.itemName = 0), n;
}
function pa(e, t, r) {
  r = r || {};
  var n = t.getSourceManager(), i, a = !1;
  e ? (a = !0, i = zC(e)) : (i = n.getSource(), a = i.sourceFormat === si);
  var o = Ise(t), s = Pse(t, o), l = r.useEncodeDefaulter, u = Ee(l) ? l : l ? We(D6, s, t) : null, c = {
    coordDimensions: s,
    generateCoord: r.generateCoord,
    encodeDefine: t.getEncode(),
    encodeDefaulter: u,
    canOmitUnusedDimensions: !a
  }, f = yf(i, c), d = kse(f.dimensions, r.createInvertedIndices, o), h = a ? null : n.getSharedDataStore(f), p = $8(t, {
    schema: f,
    store: h
  }), v = new Xr(f, t);
  v.setCalculationInfo(p);
  var g = d != null && Ose(i) ? function(m, y, b, w) {
    return w === d ? b : this.defaultDimValueGetter(m, y, b, w);
  } : null;
  return v.hasItemOption = !1, v.initData(
    // Try to reuse the data store in sourceManager if using dataset.
    a ? i : h,
    null,
    g
  ), v;
}
function Ose(e) {
  if (e.sourceFormat === si) {
    var t = zse(e.data || []);
    return !le(nf(t));
  }
}
function zse(e) {
  for (var t = 0; t < e.length && e[t] == null; )
    t++;
  return e[t];
}
var va = (
  /** @class */
  function() {
    function e(t) {
      this._setting = t || {}, this._extent = [1 / 0, -1 / 0];
    }
    return e.prototype.getSetting = function(t) {
      return this._setting[t];
    }, e.prototype.unionExtent = function(t) {
      var r = this._extent;
      t[0] < r[0] && (r[0] = t[0]), t[1] > r[1] && (r[1] = t[1]);
    }, e.prototype.unionExtentFromData = function(t, r) {
      this.unionExtent(t.getApproximateExtent(r));
    }, e.prototype.getExtent = function() {
      return this._extent.slice();
    }, e.prototype.setExtent = function(t, r) {
      var n = this._extent;
      isNaN(t) || (n[0] = t), isNaN(r) || (n[1] = r);
    }, e.prototype.isInExtentRange = function(t) {
      return this._extent[0] <= t && this._extent[1] >= t;
    }, e.prototype.isBlank = function() {
      return this._isBlank;
    }, e.prototype.setBlank = function(t) {
      this._isBlank = t;
    }, e;
  }()
);
Oy(va);
var jse = 0, Pw = (
  /** @class */
  function() {
    function e(t) {
      this.categories = t.categories || [], this._needCollect = t.needCollect, this._deduplication = t.deduplication, this.uid = ++jse;
    }
    return e.createByAxisModel = function(t) {
      var r = t.option, n = r.data, i = n && ue(n, Vse);
      return new e({
        categories: i,
        needCollect: !i,
        // deduplication is default in axis.
        deduplication: r.dedplication !== !1
      });
    }, e.prototype.getOrdinal = function(t) {
      return this._getOrCreateMap().get(t);
    }, e.prototype.parseAndCollect = function(t) {
      var r, n = this._needCollect;
      if (!ge(t) && !n)
        return t;
      if (n && !this._deduplication)
        return r = this.categories.length, this.categories[r] = t, r;
      var i = this._getOrCreateMap();
      return r = i.get(t), r == null && (n ? (r = this.categories.length, this.categories[r] = t, i.set(t, r)) : r = NaN), r;
    }, e.prototype._getOrCreateMap = function() {
      return this._map || (this._map = Ce(this.categories));
    }, e;
  }()
);
function Vse(e) {
  return Ne(e) && e.value != null ? e.value : e + "";
}
function Bse(e) {
  var t = Math.pow(10, Qh(Math.abs(e))), r = Math.abs(e / t);
  return r === 0 || r === 1 || r === 2 || r === 3 || r === 5;
}
function kw(e) {
  return e.type === "interval" || e.type === "log";
}
function Fse(e, t, r, n) {
  var i = {}, a = e[1] - e[0], o = i.interval = iC(a / t, !0);
  r != null && o < r && (o = i.interval = r), n != null && o > n && (o = i.interval = n);
  var s = i.intervalPrecision = H8(o), l = i.niceTickExtent = [tr(Math.ceil(e[0] / o) * o, s), tr(Math.floor(e[1] / o) * o, s)];
  return $se(l, e), i;
}
function px(e) {
  var t = Math.pow(10, Qh(e)), r = e / t;
  return r ? r === 2 ? r = 3 : r === 3 ? r = 5 : r *= 2 : r = 1, tr(r * t);
}
function H8(e) {
  return bi(e) + 2;
}
function qN(e, t, r) {
  e[t] = Math.max(Math.min(e[t], r[1]), r[0]);
}
function $se(e, t) {
  !isFinite(e[0]) && (e[0] = t[0]), !isFinite(e[1]) && (e[1] = t[1]), qN(e, 0, t), qN(e, 1, t), e[0] > e[1] && (e[0] = e[1]);
}
function n0(e, t) {
  return e >= t[0] && e <= t[1];
}
function i0(e, t) {
  return t[1] === t[0] ? 0.5 : (e - t[0]) / (t[1] - t[0]);
}
function a0(e, t) {
  return e * (t[1] - t[0]) + t[0];
}
var o0 = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      n.type = "ordinal";
      var i = n.getSetting("ordinalMeta");
      return i || (i = new Pw({})), le(i) && (i = new Pw({
        categories: ue(i, function(a) {
          return Ne(a) ? a.value : a;
        })
      })), n._ordinalMeta = i, n._extent = n.getSetting("extent") || [0, i.categories.length - 1], n;
    }
    return t.prototype.parse = function(r) {
      return r == null ? NaN : ge(r) ? this._ordinalMeta.getOrdinal(r) : Math.round(r);
    }, t.prototype.contain = function(r) {
      return r = this.parse(r), n0(r, this._extent) && this._ordinalMeta.categories[r] != null;
    }, t.prototype.normalize = function(r) {
      return r = this._getTickNumber(this.parse(r)), i0(r, this._extent);
    }, t.prototype.scale = function(r) {
      return r = Math.round(a0(r, this._extent)), this.getRawOrdinalNumber(r);
    }, t.prototype.getTicks = function() {
      for (var r = [], n = this._extent, i = n[0]; i <= n[1]; )
        r.push({
          value: i
        }), i++;
      return r;
    }, t.prototype.getMinorTicks = function(r) {
    }, t.prototype.setSortInfo = function(r) {
      if (r == null) {
        this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;
        return;
      }
      for (var n = r.ordinalNumbers, i = this._ordinalNumbersByTick = [], a = this._ticksByOrdinalNumber = [], o = 0, s = this._ordinalMeta.categories.length, l = Math.min(s, n.length); o < l; ++o) {
        var u = n[o];
        i[o] = u, a[u] = o;
      }
      for (var c = 0; o < s; ++o) {
        for (; a[c] != null; )
          c++;
        i.push(c), a[c] = o;
      }
    }, t.prototype._getTickNumber = function(r) {
      var n = this._ticksByOrdinalNumber;
      return n && r >= 0 && r < n.length ? n[r] : r;
    }, t.prototype.getRawOrdinalNumber = function(r) {
      var n = this._ordinalNumbersByTick;
      return n && r >= 0 && r < n.length ? n[r] : r;
    }, t.prototype.getLabel = function(r) {
      if (!this.isBlank()) {
        var n = this.getRawOrdinalNumber(r.value), i = this._ordinalMeta.categories[n];
        return i == null ? "" : i + "";
      }
    }, t.prototype.count = function() {
      return this._extent[1] - this._extent[0] + 1;
    }, t.prototype.unionExtentFromData = function(r, n) {
      this.unionExtent(r.getApproximateExtent(n));
    }, t.prototype.isInExtentRange = function(r) {
      return r = this._getTickNumber(r), this._extent[0] <= r && this._extent[1] >= r;
    }, t.prototype.getOrdinalMeta = function() {
      return this._ordinalMeta;
    }, t.prototype.calcNiceTicks = function() {
    }, t.prototype.calcNiceExtent = function() {
    }, t.type = "ordinal", t;
  }(va)
);
va.registerClass(o0);
var Fs = tr, eo = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "interval", r._interval = 0, r._intervalPrecision = 2, r;
    }
    return t.prototype.parse = function(r) {
      return r;
    }, t.prototype.contain = function(r) {
      return n0(r, this._extent);
    }, t.prototype.normalize = function(r) {
      return i0(r, this._extent);
    }, t.prototype.scale = function(r) {
      return a0(r, this._extent);
    }, t.prototype.setExtent = function(r, n) {
      var i = this._extent;
      isNaN(r) || (i[0] = parseFloat(r)), isNaN(n) || (i[1] = parseFloat(n));
    }, t.prototype.unionExtent = function(r) {
      var n = this._extent;
      r[0] < n[0] && (n[0] = r[0]), r[1] > n[1] && (n[1] = r[1]), this.setExtent(n[0], n[1]);
    }, t.prototype.getInterval = function() {
      return this._interval;
    }, t.prototype.setInterval = function(r) {
      this._interval = r, this._niceExtent = this._extent.slice(), this._intervalPrecision = H8(r);
    }, t.prototype.getTicks = function(r) {
      var n = this._interval, i = this._extent, a = this._niceExtent, o = this._intervalPrecision, s = [];
      if (!n)
        return s;
      var l = 1e4;
      i[0] < a[0] && (r ? s.push({
        value: Fs(a[0] - n, o)
      }) : s.push({
        value: i[0]
      }));
      for (var u = a[0]; u <= a[1] && (s.push({
        value: u
      }), u = Fs(u + n, o), u !== s[s.length - 1].value); )
        if (s.length > l)
          return [];
      var c = s.length ? s[s.length - 1].value : a[1];
      return i[1] > c && (r ? s.push({
        value: Fs(c + n, o)
      }) : s.push({
        value: i[1]
      })), s;
    }, t.prototype.getMinorTicks = function(r) {
      for (var n = this.getTicks(!0), i = [], a = this.getExtent(), o = 1; o < n.length; o++) {
        for (var s = n[o], l = n[o - 1], u = 0, c = [], f = s.value - l.value, d = f / r; u < r - 1; ) {
          var h = Fs(l.value + (u + 1) * d);
          h > a[0] && h < a[1] && c.push(h), u++;
        }
        i.push(c);
      }
      return i;
    }, t.prototype.getLabel = function(r, n) {
      if (r == null)
        return "";
      var i = n && n.precision;
      i == null ? i = bi(r.value) || 0 : i === "auto" && (i = this._intervalPrecision);
      var a = Fs(r.value, i, !0);
      return EC(a);
    }, t.prototype.calcNiceTicks = function(r, n, i) {
      r = r || 5;
      var a = this._extent, o = a[1] - a[0];
      if (isFinite(o)) {
        o < 0 && (o = -o, a.reverse());
        var s = Fse(a, r, n, i);
        this._intervalPrecision = s.intervalPrecision, this._interval = s.interval, this._niceExtent = s.niceTickExtent;
      }
    }, t.prototype.calcNiceExtent = function(r) {
      var n = this._extent;
      if (n[0] === n[1])
        if (n[0] !== 0) {
          var i = Math.abs(n[0]);
          r.fixMax || (n[1] += i / 2), n[0] -= i / 2;
        } else
          n[1] = 1;
      var a = n[1] - n[0];
      isFinite(a) || (n[0] = 0, n[1] = 1), this.calcNiceTicks(r.splitNumber, r.minInterval, r.maxInterval);
      var o = this._interval;
      r.fixMin || (n[0] = Fs(Math.floor(n[0] / o) * o)), r.fixMax || (n[1] = Fs(Math.ceil(n[1] / o) * o));
    }, t.prototype.setNiceExtent = function(r, n) {
      this._niceExtent = [r, n];
    }, t.type = "interval", t;
  }(va)
);
va.registerClass(eo);
var G8 = typeof Float32Array < "u", Hse = G8 ? Float32Array : Array;
function qi(e) {
  return le(e) ? G8 ? new Float32Array(e) : e : new Hse(e);
}
var Ow = "__ec_stack_";
function W8(e) {
  return e.get("stack") || Ow + e.seriesIndex;
}
function QC(e) {
  return e.dim + e.index;
}
function Gse(e) {
  var t = [], r = e.axis, n = "axis0";
  if (r.type === "category") {
    for (var i = r.getBandWidth(), a = 0; a < e.count; a++)
      t.push(Ie({
        bandWidth: i,
        axisKey: n,
        stackId: Ow + a
      }, e));
    for (var o = Z8(t), s = [], a = 0; a < e.count; a++) {
      var l = o[n][Ow + a];
      l.offsetCenter = l.offset + l.width / 2, s.push(l);
    }
    return s;
  }
}
function U8(e, t) {
  var r = [];
  return t.eachSeriesByType(e, function(n) {
    q8(n) && r.push(n);
  }), r;
}
function Wse(e) {
  var t = {};
  j(e, function(l) {
    var u = l.coordinateSystem, c = u.getBaseAxis();
    if (!(c.type !== "time" && c.type !== "value"))
      for (var f = l.getData(), d = c.dim + "_" + c.index, h = f.getDimensionIndex(f.mapDimension(c.dim)), p = f.getStore(), v = 0, g = p.count(); v < g; ++v) {
        var m = p.get(h, v);
        t[d] ? t[d].push(m) : t[d] = [m];
      }
  });
  var r = {};
  for (var n in t)
    if (t.hasOwnProperty(n)) {
      var i = t[n];
      if (i) {
        i.sort(function(l, u) {
          return l - u;
        });
        for (var a = null, o = 1; o < i.length; ++o) {
          var s = i[o] - i[o - 1];
          s > 0 && (a = a === null ? s : Math.min(a, s));
        }
        r[n] = a;
      }
    }
  return r;
}
function Y8(e) {
  var t = Wse(e), r = [];
  return j(e, function(n) {
    var i = n.coordinateSystem, a = i.getBaseAxis(), o = a.getExtent(), s;
    if (a.type === "category")
      s = a.getBandWidth();
    else if (a.type === "value" || a.type === "time") {
      var l = a.dim + "_" + a.index, u = t[l], c = Math.abs(o[1] - o[0]), f = a.scale.getExtent(), d = Math.abs(f[1] - f[0]);
      s = u ? c / d * u : c;
    } else {
      var h = n.getData();
      s = Math.abs(o[1] - o[0]) / h.count();
    }
    var p = pe(n.get("barWidth"), s), v = pe(n.get("barMaxWidth"), s), g = pe(
      // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,
      // the auto-calculated bar width might be less than 0.5 / 1.
      n.get("barMinWidth") || (J8(n) ? 0.5 : 1),
      s
    ), m = n.get("barGap"), y = n.get("barCategoryGap");
    r.push({
      bandWidth: s,
      barWidth: p,
      barMaxWidth: v,
      barMinWidth: g,
      barGap: m,
      barCategoryGap: y,
      axisKey: QC(a),
      stackId: W8(n)
    });
  }), Z8(r);
}
function Z8(e) {
  var t = {};
  j(e, function(n, i) {
    var a = n.axisKey, o = n.bandWidth, s = t[a] || {
      bandWidth: o,
      remainedWidth: o,
      autoWidthCount: 0,
      categoryGap: null,
      gap: "20%",
      stacks: {}
    }, l = s.stacks;
    t[a] = s;
    var u = n.stackId;
    l[u] || s.autoWidthCount++, l[u] = l[u] || {
      width: 0,
      maxWidth: 0
    };
    var c = n.barWidth;
    c && !l[u].width && (l[u].width = c, c = Math.min(s.remainedWidth, c), s.remainedWidth -= c);
    var f = n.barMaxWidth;
    f && (l[u].maxWidth = f);
    var d = n.barMinWidth;
    d && (l[u].minWidth = d);
    var h = n.barGap;
    h != null && (s.gap = h);
    var p = n.barCategoryGap;
    p != null && (s.categoryGap = p);
  });
  var r = {};
  return j(t, function(n, i) {
    r[i] = {};
    var a = n.stacks, o = n.bandWidth, s = n.categoryGap;
    if (s == null) {
      var l = ut(a).length;
      s = Math.max(35 - l * 4, 15) + "%";
    }
    var u = pe(s, o), c = pe(n.gap, 1), f = n.remainedWidth, d = n.autoWidthCount, h = (f - u) / (d + (d - 1) * c);
    h = Math.max(h, 0), j(a, function(m) {
      var y = m.maxWidth, b = m.minWidth;
      if (m.width) {
        var w = m.width;
        y && (w = Math.min(w, y)), b && (w = Math.max(w, b)), m.width = w, f -= w + c * w, d--;
      } else {
        var w = h;
        y && y < w && (w = Math.min(y, f)), b && b > w && (w = b), w !== h && (m.width = w, f -= w + c * w, d--);
      }
    }), h = (f - u) / (d + (d - 1) * c), h = Math.max(h, 0);
    var p = 0, v;
    j(a, function(m, y) {
      m.width || (m.width = h), v = m, p += m.width * (1 + c);
    }), v && (p -= v.width * c);
    var g = -p / 2;
    j(a, function(m, y) {
      r[i][y] = r[i][y] || {
        bandWidth: o,
        offset: g,
        width: m.width
      }, g += m.width * (1 + c);
    });
  }), r;
}
function Use(e, t, r) {
  if (e && t) {
    var n = e[QC(t)];
    return n;
  }
}
function X8(e, t) {
  var r = U8(e, t), n = Y8(r);
  j(r, function(i) {
    var a = i.getData(), o = i.coordinateSystem, s = o.getBaseAxis(), l = W8(i), u = n[QC(s)][l], c = u.offset, f = u.width;
    a.setLayout({
      bandWidth: u.bandWidth,
      offset: c,
      size: f
    });
  });
}
function K8(e) {
  return {
    seriesType: e,
    plan: vf(),
    reset: function(t) {
      if (q8(t)) {
        var r = t.getData(), n = t.coordinateSystem, i = n.getBaseAxis(), a = n.getOtherAxis(i), o = r.getDimensionIndex(r.mapDimension(a.dim)), s = r.getDimensionIndex(r.mapDimension(i.dim)), l = t.get("showBackground", !0), u = r.mapDimension(a.dim), c = r.getCalculationInfo("stackResultDimension"), f = Qa(r, u) && !!r.getCalculationInfo("stackedOnSeries"), d = a.isHorizontal(), h = Yse(i, a), p = J8(t), v = t.get("barMinHeight") || 0, g = c && r.getDimensionIndex(c), m = r.getLayout("size"), y = r.getLayout("offset");
        return {
          progress: function(b, w) {
            for (var _ = b.count, S = p && qi(_ * 3), C = p && l && qi(_ * 3), A = p && qi(_), M = n.master.getRect(), D = d ? M.width : M.height, N, R = w.getStore(), O = 0; (N = b.next()) != null; ) {
              var E = R.get(f ? g : o, N), L = R.get(s, N), I = h, P = void 0;
              f && (P = +E - R.get(o, N));
              var k = void 0, z = void 0, V = void 0, B = void 0;
              if (d) {
                var F = n.dataToPoint([E, L]);
                if (f) {
                  var H = n.dataToPoint([P, L]);
                  I = H[0];
                }
                k = I, z = F[1] + y, V = F[0] - I, B = m, Math.abs(V) < v && (V = (V < 0 ? -1 : 1) * v);
              } else {
                var F = n.dataToPoint([L, E]);
                if (f) {
                  var H = n.dataToPoint([L, P]);
                  I = H[1];
                }
                k = F[0] + y, z = I, V = m, B = F[1] - I, Math.abs(B) < v && (B = (B <= 0 ? -1 : 1) * v);
              }
              p ? (S[O] = k, S[O + 1] = z, S[O + 2] = d ? V : B, C && (C[O] = d ? M.x : k, C[O + 1] = d ? z : M.y, C[O + 2] = D), A[N] = N) : w.setItemLayout(N, {
                x: k,
                y: z,
                width: V,
                height: B
              }), O += 3;
            }
            p && w.setLayout({
              largePoints: S,
              largeDataIndices: A,
              largeBackgroundPoints: C,
              valueAxisHorizontal: d
            });
          }
        };
      }
    }
  };
}
function q8(e) {
  return e.coordinateSystem && e.coordinateSystem.type === "cartesian2d";
}
function J8(e) {
  return e.pipelineContext && e.pipelineContext.large;
}
function Yse(e, t) {
  var r = t.model.get("startValue");
  return r || (r = 0), t.toGlobalCoord(t.dataToCoord(t.type === "log" ? r > 0 ? r : 1 : r));
}
var Zse = function(e, t, r, n) {
  for (; r < n; ) {
    var i = r + n >>> 1;
    e[i][1] < t ? r = i + 1 : n = i;
  }
  return r;
}, eT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "time", n;
    }
    return t.prototype.getLabel = function(r) {
      var n = this.getSetting("useUTC");
      return op(r.value, $D[wie(gc(this._minLevelUnit))] || $D.second, n, this.getSetting("locale"));
    }, t.prototype.getFormattedLabel = function(r, n, i) {
      var a = this.getSetting("useUTC"), o = this.getSetting("locale");
      return _ie(r, n, i, o, a);
    }, t.prototype.getTicks = function() {
      var r = this._interval, n = this._extent, i = [];
      if (!r)
        return i;
      i.push({
        value: n[0],
        level: 0
      });
      var a = this.getSetting("useUTC"), o = tle(this._minLevelUnit, this._approxInterval, a, n);
      return i = i.concat(o), i.push({
        value: n[1],
        level: 0
      }), i;
    }, t.prototype.calcNiceExtent = function(r) {
      var n = this._extent;
      if (n[0] === n[1] && (n[0] -= Yn, n[1] += Yn), n[1] === -1 / 0 && n[0] === 1 / 0) {
        var i = /* @__PURE__ */ new Date();
        n[1] = +new Date(i.getFullYear(), i.getMonth(), i.getDate()), n[0] = n[1] - Yn;
      }
      this.calcNiceTicks(r.splitNumber, r.minInterval, r.maxInterval);
    }, t.prototype.calcNiceTicks = function(r, n, i) {
      r = r || 10;
      var a = this._extent, o = a[1] - a[0];
      this._approxInterval = o / r, n != null && this._approxInterval < n && (this._approxInterval = n), i != null && this._approxInterval > i && (this._approxInterval = i);
      var s = pv.length, l = Math.min(Zse(pv, this._approxInterval, 0, s), s - 1);
      this._interval = pv[l][1], this._minLevelUnit = pv[Math.max(l - 1, 0)][0];
    }, t.prototype.parse = function(r) {
      return bt(r) ? r : +In(r);
    }, t.prototype.contain = function(r) {
      return n0(this.parse(r), this._extent);
    }, t.prototype.normalize = function(r) {
      return i0(this.parse(r), this._extent);
    }, t.prototype.scale = function(r) {
      return a0(r, this._extent);
    }, t.type = "time", t;
  }(eo)
), pv = [
  // Format                           interval
  ["second", TC],
  ["minute", AC],
  ["hour", $d],
  ["quarter-day", $d * 6],
  ["half-day", $d * 12],
  ["day", Yn * 1.2],
  ["half-week", Yn * 3.5],
  ["week", Yn * 7],
  ["month", Yn * 31],
  ["quarter", Yn * 95],
  ["half-year", FD / 2],
  ["year", FD]
  // 1Y
];
function Xse(e, t, r, n) {
  var i = In(t), a = In(r), o = function(p) {
    return HD(i, p, n) === HD(a, p, n);
  }, s = function() {
    return o("year");
  }, l = function() {
    return s() && o("month");
  }, u = function() {
    return l() && o("day");
  }, c = function() {
    return u() && o("hour");
  }, f = function() {
    return c() && o("minute");
  }, d = function() {
    return f() && o("second");
  }, h = function() {
    return d() && o("millisecond");
  };
  switch (e) {
    case "year":
      return s();
    case "month":
      return l();
    case "day":
      return u();
    case "hour":
      return c();
    case "minute":
      return f();
    case "second":
      return d();
    case "millisecond":
      return h();
  }
}
function Kse(e, t) {
  return e /= Yn, e > 16 ? 16 : e > 7.5 ? 7 : e > 3.5 ? 4 : e > 1.5 ? 2 : 1;
}
function qse(e) {
  var t = 30 * Yn;
  return e /= t, e > 6 ? 6 : e > 3 ? 3 : e > 2 ? 2 : 1;
}
function Jse(e) {
  return e /= $d, e > 12 ? 12 : e > 6 ? 6 : e > 3.5 ? 4 : e > 2 ? 2 : 1;
}
function JN(e, t) {
  return e /= t ? AC : TC, e > 30 ? 30 : e > 20 ? 20 : e > 15 ? 15 : e > 10 ? 10 : e > 5 ? 5 : e > 2 ? 2 : 1;
}
function Qse(e) {
  return iC(e, !0);
}
function ele(e, t, r) {
  var n = new Date(e);
  switch (gc(t)) {
    case "year":
    case "month":
      n[m6(r)](0);
    case "day":
      n[y6(r)](1);
    case "hour":
      n[x6(r)](0);
    case "minute":
      n[b6(r)](0);
    case "second":
      n[w6(r)](0), n[_6(r)](0);
  }
  return n.getTime();
}
function tle(e, t, r, n) {
  var i = 1e4, a = v6, o = 0;
  function s(D, N, R, O, E, L, I) {
    for (var P = new Date(N), k = N, z = P[O](); k < R && k <= n[1]; )
      I.push({
        value: k
      }), z += D, P[E](z), k = P.getTime();
    I.push({
      value: k,
      notAdd: !0
    });
  }
  function l(D, N, R) {
    var O = [], E = !N.length;
    if (!Xse(gc(D), n[0], n[1], r)) {
      E && (N = [{
        // TODO Optimize. Not include so may ticks.
        value: ele(new Date(n[0]), D, r)
      }, {
        value: n[1]
      }]);
      for (var L = 0; L < N.length - 1; L++) {
        var I = N[L].value, P = N[L + 1].value;
        if (I !== P) {
          var k = void 0, z = void 0, V = void 0, B = !1;
          switch (D) {
            case "year":
              k = Math.max(1, Math.round(t / Yn / 365)), z = MC(r), V = Sie(r);
              break;
            case "half-year":
            case "quarter":
            case "month":
              k = qse(t), z = mc(r), V = m6(r);
              break;
            case "week":
            case "half-week":
            case "day":
              k = Kse(t), z = Uy(r), V = y6(r), B = !0;
              break;
            case "half-day":
            case "quarter-day":
            case "hour":
              k = Jse(t), z = mh(r), V = x6(r);
              break;
            case "minute":
              k = JN(t, !0), z = Yy(r), V = b6(r);
              break;
            case "second":
              k = JN(t, !1), z = Zy(r), V = w6(r);
              break;
            case "millisecond":
              k = Qse(t), z = Xy(r), V = _6(r);
              break;
          }
          s(k, I, P, z, V, B, O), D === "year" && R.length > 1 && L === 0 && R.unshift({
            value: R[0].value - k
          });
        }
      }
      for (var L = 0; L < O.length; L++)
        R.push(O[L]);
      return O;
    }
  }
  for (var u = [], c = [], f = 0, d = 0, h = 0; h < a.length && o++ < i; ++h) {
    var p = gc(a[h]);
    if (bie(a[h])) {
      l(a[h], u[u.length - 1] || [], c);
      var v = a[h + 1] ? gc(a[h + 1]) : null;
      if (p !== v) {
        if (c.length) {
          d = f, c.sort(function(D, N) {
            return D.value - N.value;
          });
          for (var g = [], m = 0; m < c.length; ++m) {
            var y = c[m].value;
            (m === 0 || c[m - 1].value !== y) && (g.push(c[m]), y >= n[0] && y <= n[1] && f++);
          }
          var b = (n[1] - n[0]) / t;
          if (f > b * 1.5 && d > b / 1.5 || (u.push(g), f > b || e === a[h]))
            break;
        }
        c = [];
      }
    }
  }
  process.env.NODE_ENV !== "production" && o >= i && qt("Exceed safe limit.");
  for (var w = Ct(ue(u, function(D) {
    return Ct(D, function(N) {
      return N.value >= n[0] && N.value <= n[1] && !N.notAdd;
    });
  }), function(D) {
    return D.length > 0;
  }), _ = [], S = w.length - 1, h = 0; h < w.length; ++h)
    for (var C = w[h], A = 0; A < C.length; ++A)
      _.push({
        value: C[A].value,
        level: S - h
      });
  _.sort(function(D, N) {
    return D.value - N.value;
  });
  for (var M = [], h = 0; h < _.length; ++h)
    (h === 0 || _[h].value !== _[h - 1].value) && M.push(_[h]);
  return M;
}
va.registerClass(eT);
var QN = va.prototype, Wd = eo.prototype, rle = tr, nle = Math.floor, ile = Math.ceil, vv = Math.pow, di = Math.log, tT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "log", r.base = 10, r._originalScale = new eo(), r._interval = 0, r;
    }
    return t.prototype.getTicks = function(r) {
      var n = this._originalScale, i = this._extent, a = n.getExtent(), o = Wd.getTicks.call(this, r);
      return ue(o, function(s) {
        var l = s.value, u = tr(vv(this.base, l));
        return u = l === i[0] && this._fixMin ? gv(u, a[0]) : u, u = l === i[1] && this._fixMax ? gv(u, a[1]) : u, {
          value: u
        };
      }, this);
    }, t.prototype.setExtent = function(r, n) {
      var i = di(this.base);
      r = di(Math.max(0, r)) / i, n = di(Math.max(0, n)) / i, Wd.setExtent.call(this, r, n);
    }, t.prototype.getExtent = function() {
      var r = this.base, n = QN.getExtent.call(this);
      n[0] = vv(r, n[0]), n[1] = vv(r, n[1]);
      var i = this._originalScale, a = i.getExtent();
      return this._fixMin && (n[0] = gv(n[0], a[0])), this._fixMax && (n[1] = gv(n[1], a[1])), n;
    }, t.prototype.unionExtent = function(r) {
      this._originalScale.unionExtent(r);
      var n = this.base;
      r[0] = di(r[0]) / di(n), r[1] = di(r[1]) / di(n), QN.unionExtent.call(this, r);
    }, t.prototype.unionExtentFromData = function(r, n) {
      this.unionExtent(r.getApproximateExtent(n));
    }, t.prototype.calcNiceTicks = function(r) {
      r = r || 10;
      var n = this._extent, i = n[1] - n[0];
      if (!(i === 1 / 0 || i <= 0)) {
        var a = y9(i), o = r / i * a;
        for (o <= 0.5 && (a *= 10); !isNaN(a) && Math.abs(a) < 1 && Math.abs(a) > 0; )
          a *= 10;
        var s = [tr(ile(n[0] / a) * a), tr(nle(n[1] / a) * a)];
        this._interval = a, this._niceExtent = s;
      }
    }, t.prototype.calcNiceExtent = function(r) {
      Wd.calcNiceExtent.call(this, r), this._fixMin = r.fixMin, this._fixMax = r.fixMax;
    }, t.prototype.parse = function(r) {
      return r;
    }, t.prototype.contain = function(r) {
      return r = di(r) / di(this.base), n0(r, this._extent);
    }, t.prototype.normalize = function(r) {
      return r = di(r) / di(this.base), i0(r, this._extent);
    }, t.prototype.scale = function(r) {
      return r = a0(r, this._extent), vv(this.base, r);
    }, t.type = "log", t;
  }(va)
), Q8 = tT.prototype;
Q8.getMinorTicks = Wd.getMinorTicks;
Q8.getLabel = Wd.getLabel;
function gv(e, t) {
  return rle(e, bi(t));
}
va.registerClass(tT);
var ale = (
  /** @class */
  function() {
    function e(t, r, n) {
      this._prepareParams(t, r, n);
    }
    return e.prototype._prepareParams = function(t, r, n) {
      n[1] < n[0] && (n = [NaN, NaN]), this._dataMin = n[0], this._dataMax = n[1];
      var i = this._isOrdinal = t.type === "ordinal";
      this._needCrossZero = t.type === "interval" && r.getNeedCrossZero && r.getNeedCrossZero();
      var a = r.get("min", !0);
      a == null && (a = r.get("startValue", !0));
      var o = this._modelMinRaw = a;
      Ee(o) ? this._modelMinNum = mv(t, o({
        min: n[0],
        max: n[1]
      })) : o !== "dataMin" && (this._modelMinNum = mv(t, o));
      var s = this._modelMaxRaw = r.get("max", !0);
      if (Ee(s) ? this._modelMaxNum = mv(t, s({
        min: n[0],
        max: n[1]
      })) : s !== "dataMax" && (this._modelMaxNum = mv(t, s)), i)
        this._axisDataLen = r.getCategories().length;
      else {
        var l = r.get("boundaryGap"), u = le(l) ? l : [l || 0, l || 0];
        typeof u[0] == "boolean" || typeof u[1] == "boolean" ? (process.env.NODE_ENV !== "production" && console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'), this._boundaryGapInner = [0, 0]) : this._boundaryGapInner = [Ii(u[0], 1), Ii(u[1], 1)];
      }
    }, e.prototype.calculate = function() {
      var t = this._isOrdinal, r = this._dataMin, n = this._dataMax, i = this._axisDataLen, a = this._boundaryGapInner, o = t ? null : n - r || Math.abs(r), s = this._modelMinRaw === "dataMin" ? r : this._modelMinNum, l = this._modelMaxRaw === "dataMax" ? n : this._modelMaxNum, u = s != null, c = l != null;
      s == null && (s = t ? i ? 0 : NaN : r - a[0] * o), l == null && (l = t ? i ? i - 1 : NaN : n + a[1] * o), (s == null || !isFinite(s)) && (s = NaN), (l == null || !isFinite(l)) && (l = NaN);
      var f = as(s) || as(l) || t && !i;
      this._needCrossZero && (s > 0 && l > 0 && !u && (s = 0), s < 0 && l < 0 && !c && (l = 0));
      var d = this._determinedMin, h = this._determinedMax;
      return d != null && (s = d, u = !0), h != null && (l = h, c = !0), {
        min: s,
        max: l,
        minFixed: u,
        maxFixed: c,
        isBlank: f
      };
    }, e.prototype.modifyDataMinMax = function(t, r) {
      process.env.NODE_ENV !== "production" && Le(!this.frozen), this[sle[t]] = r;
    }, e.prototype.setDeterminedMinMax = function(t, r) {
      var n = ole[t];
      process.env.NODE_ENV !== "production" && Le(!this.frozen && this[n] == null), this[n] = r;
    }, e.prototype.freeze = function() {
      this.frozen = !0;
    }, e;
  }()
), ole = {
  min: "_determinedMin",
  max: "_determinedMax"
}, sle = {
  min: "_dataMin",
  max: "_dataMax"
};
function eO(e, t, r) {
  var n = e.rawExtentInfo;
  return n || (n = new ale(e, t, r), e.rawExtentInfo = n, n);
}
function mv(e, t) {
  return t == null ? null : as(t) ? NaN : e.parse(t);
}
function tO(e, t) {
  var r = e.type, n = eO(e, t, e.getExtent()).calculate();
  e.setBlank(n.isBlank);
  var i = n.min, a = n.max, o = t.ecModel;
  if (o && r === "time") {
    var s = U8("bar", o), l = !1;
    if (j(s, function(f) {
      l = l || f.getBaseAxis() === t.axis;
    }), l) {
      var u = Y8(s), c = lle(i, a, t, u);
      i = c.min, a = c.max;
    }
  }
  return {
    extent: [i, a],
    // "fix" means "fixed", the value should not be
    // changed in the subsequent steps.
    fixMin: n.minFixed,
    fixMax: n.maxFixed
  };
}
function lle(e, t, r, n) {
  var i = r.axis.getExtent(), a = Math.abs(i[1] - i[0]), o = Use(n, r.axis);
  if (o === void 0)
    return {
      min: e,
      max: t
    };
  var s = 1 / 0;
  j(o, function(h) {
    s = Math.min(h.offset, s);
  });
  var l = -1 / 0;
  j(o, function(h) {
    l = Math.max(h.offset + h.width, l);
  }), s = Math.abs(s), l = Math.abs(l);
  var u = s + l, c = t - e, f = 1 - (s + l) / a, d = c / f - c;
  return t += d * (l / u), e -= d * (s / u), {
    min: e,
    max: t
  };
}
function Bl(e, t) {
  var r = t, n = tO(e, r), i = n.extent, a = r.get("splitNumber");
  e instanceof tT && (e.base = r.get("logBase"));
  var o = e.type, s = r.get("interval"), l = o === "interval" || o === "time";
  e.setExtent(i[0], i[1]), e.calcNiceExtent({
    splitNumber: a,
    fixMin: n.fixMin,
    fixMax: n.fixMax,
    minInterval: l ? r.get("minInterval") : null,
    maxInterval: l ? r.get("maxInterval") : null
  }), s != null && e.setInterval && e.setInterval(s);
}
function lp(e, t) {
  if (t = t || e.get("type"), t)
    switch (t) {
      case "category":
        return new o0({
          ordinalMeta: e.getOrdinalMeta ? e.getOrdinalMeta() : e.getCategories(),
          extent: [1 / 0, -1 / 0]
        });
      case "time":
        return new eT({
          locale: e.ecModel.getLocaleModel(),
          useUTC: e.ecModel.get("useUTC")
        });
      default:
        return new (va.getClass(t) || eo)();
    }
}
function ule(e) {
  var t = e.scale.getExtent(), r = t[0], n = t[1];
  return !(r > 0 && n > 0 || r < 0 && n < 0);
}
function xf(e) {
  var t = e.getLabelModel().get("formatter"), r = e.type === "category" ? e.scale.getExtent()[0] : null;
  return e.scale.type === "time" ? /* @__PURE__ */ function(n) {
    return function(i, a) {
      return e.scale.getFormattedLabel(i, a, n);
    };
  }(t) : ge(t) ? /* @__PURE__ */ function(n) {
    return function(i) {
      var a = e.scale.getLabel(i), o = n.replace("{value}", a ?? "");
      return o;
    };
  }(t) : Ee(t) ? /* @__PURE__ */ function(n) {
    return function(i, a) {
      return r != null && (a = i.value - r), n(rT(e, i), a, i.level != null ? {
        level: i.level
      } : null);
    };
  }(t) : function(n) {
    return e.scale.getLabel(n);
  };
}
function rT(e, t) {
  return e.type === "category" ? e.scale.getLabel(t) : t.value;
}
function cle(e) {
  var t = e.model, r = e.scale;
  if (!(!t.get(["axisLabel", "show"]) || r.isBlank())) {
    var n, i, a = r.getExtent();
    r instanceof o0 ? i = r.count() : (n = r.getTicks(), i = n.length);
    var o = e.getLabelModel(), s = xf(e), l, u = 1;
    i > 40 && (u = Math.ceil(i / 40));
    for (var c = 0; c < i; c += u) {
      var f = n ? n[c] : {
        value: a[0] + c
      }, d = s(f, c), h = o.getTextRect(d), p = fle(h, o.get("rotate") || 0);
      l ? l.union(p) : l = p;
    }
    return l;
  }
}
function fle(e, t) {
  var r = t * Math.PI / 180, n = e.width, i = e.height, a = n * Math.abs(Math.cos(r)) + Math.abs(i * Math.sin(r)), o = n * Math.abs(Math.sin(r)) + Math.abs(i * Math.cos(r)), s = new tt(e.x, e.y, a, o);
  return s;
}
function nT(e) {
  var t = e.get("interval");
  return t ?? "auto";
}
function rO(e) {
  return e.type === "category" && nT(e.getLabelModel()) === 0;
}
function Sm(e, t) {
  var r = {};
  return j(e.mapDimensionsAll(t), function(n) {
    r[JC(e, n)] = !0;
  }), ut(r);
}
function dle(e, t, r) {
  t && j(Sm(t, r), function(n) {
    var i = t.getApproximateExtent(n);
    i[0] < e[0] && (e[0] = i[0]), i[1] > e[1] && (e[1] = i[1]);
  });
}
var bf = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.getNeedCrossZero = function() {
      var t = this.option;
      return !t.scale;
    }, e.prototype.getCoordSysModel = function() {
    }, e;
  }()
);
function hle(e) {
  return pa(null, e);
}
var ple = {
  isDimensionStacked: Qa,
  enableDataStack: $8,
  getStackedDimension: JC
};
function vle(e, t) {
  var r = t;
  t instanceof Tt || (r = new Tt(t));
  var n = lp(r);
  return n.setExtent(e[0], e[1]), Bl(n, r), n;
}
function gle(e) {
  ir(e, bf);
}
function mle(e, t) {
  return t = t || {}, Vt(e, null, null, t.state !== "normal");
}
const yle = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createDimensions: Ase,
  createList: hle,
  createScale: vle,
  createSymbol: fr,
  createTextStyle: mle,
  dataStack: ple,
  enableHoverEmphasis: Xo,
  getECData: He,
  getLayoutRect: vr,
  mixinAxisModelCommonMethods: gle
}, Symbol.toStringTag, { value: "Module" }));
var xle = 1e-8;
function e5(e, t) {
  return Math.abs(e - t) < xle;
}
function el(e, t, r) {
  var n = 0, i = e[0];
  if (!i)
    return !1;
  for (var a = 1; a < e.length; a++) {
    var o = e[a];
    n += Ma(i[0], i[1], o[0], o[1], t, r), i = o;
  }
  var s = e[0];
  return (!e5(i[0], s[0]) || !e5(i[1], s[1])) && (n += Ma(i[0], i[1], s[0], s[1], t, r)), n !== 0;
}
var ble = [];
function vx(e, t) {
  for (var r = 0; r < e.length; r++)
    Ir(e[r], e[r], t);
}
function t5(e, t, r, n) {
  for (var i = 0; i < e.length; i++) {
    var a = e[i];
    n && (a = n.project(a)), a && isFinite(a[0]) && isFinite(a[1]) && (za(t, t, a), ja(r, r, a));
  }
}
function wle(e) {
  for (var t = 0, r = 0, n = 0, i = e.length, a = e[i - 1][0], o = e[i - 1][1], s = 0; s < i; s++) {
    var l = e[s][0], u = e[s][1], c = a * u - l * o;
    t += c, r += (a + l) * c, n += (o + u) * c, a = l, o = u;
  }
  return t ? [r / t / 3, n / t / 3, t] : [e[0][0] || 0, e[0][1] || 0];
}
var nO = (
  /** @class */
  function() {
    function e(t) {
      this.name = t;
    }
    return e.prototype.setCenter = function(t) {
      this._center = t;
    }, e.prototype.getCenter = function() {
      var t = this._center;
      return t || (t = this._center = this.calcCenter()), t;
    }, e;
  }()
), r5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t, r) {
      this.type = "polygon", this.exterior = t, this.interiors = r;
    }
    return e;
  }()
), n5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      this.type = "linestring", this.points = t;
    }
    return e;
  }()
), iO = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this, r) || this;
      return a.type = "geoJSON", a.geometries = n, a._center = i && [i[0], i[1]], a;
    }
    return t.prototype.calcCenter = function() {
      for (var r = this.geometries, n, i = 0, a = 0; a < r.length; a++) {
        var o = r[a], s = o.exterior, l = s && s.length;
        l > i && (n = o, i = l);
      }
      if (n)
        return wle(n.exterior);
      var u = this.getBoundingRect();
      return [u.x + u.width / 2, u.y + u.height / 2];
    }, t.prototype.getBoundingRect = function(r) {
      var n = this._rect;
      if (n && !r)
        return n;
      var i = [1 / 0, 1 / 0], a = [-1 / 0, -1 / 0], o = this.geometries;
      return j(o, function(s) {
        s.type === "polygon" ? t5(s.exterior, i, a, r) : j(s.points, function(l) {
          t5(l, i, a, r);
        });
      }), isFinite(i[0]) && isFinite(i[1]) && isFinite(a[0]) && isFinite(a[1]) || (i[0] = i[1] = a[0] = a[1] = 0), n = new tt(i[0], i[1], a[0] - i[0], a[1] - i[1]), r || (this._rect = n), n;
    }, t.prototype.contain = function(r) {
      var n = this.getBoundingRect(), i = this.geometries;
      if (!n.contain(r[0], r[1]))
        return !1;
      e: for (var a = 0, o = i.length; a < o; a++) {
        var s = i[a];
        if (s.type === "polygon") {
          var l = s.exterior, u = s.interiors;
          if (el(l, r[0], r[1])) {
            for (var c = 0; c < (u ? u.length : 0); c++)
              if (el(u[c], r[0], r[1]))
                continue e;
            return !0;
          }
        }
      }
      return !1;
    }, t.prototype.transformTo = function(r, n, i, a) {
      var o = this.getBoundingRect(), s = o.width / o.height;
      i ? a || (a = i / s) : i = s * a;
      for (var l = new tt(r, n, i, a), u = o.calculateTransform(l), c = this.geometries, f = 0; f < c.length; f++) {
        var d = c[f];
        d.type === "polygon" ? (vx(d.exterior, u), j(d.interiors, function(h) {
          vx(h, u);
        })) : j(d.points, function(h) {
          vx(h, u);
        });
      }
      o = this._rect, o.copy(l), this._center = [o.x + o.width / 2, o.y + o.height / 2];
    }, t.prototype.cloneShallow = function(r) {
      r == null && (r = this.name);
      var n = new t(r, this.geometries, this._center);
      return n._rect = this._rect, n.transformTo = null, n;
    }, t;
  }(nO)
), _le = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n) {
      var i = e.call(this, r) || this;
      return i.type = "geoSVG", i._elOnlyForCalculate = n, i;
    }
    return t.prototype.calcCenter = function() {
      for (var r = this._elOnlyForCalculate, n = r.getBoundingRect(), i = [n.x + n.width / 2, n.y + n.height / 2], a = Kh(ble), o = r; o && !o.isGeoSVGGraphicRoot; )
        na(a, o.getLocalTransform(), a), o = o.parent;
      return Ul(a, a), Ir(i, i, a), i;
    }, t;
  }(nO)
);
function Sle(e) {
  if (!e.UTF8Encoding)
    return e;
  var t = e, r = t.UTF8Scale;
  r == null && (r = 1024);
  var n = t.features;
  return j(n, function(i) {
    var a = i.geometry, o = a.encodeOffsets, s = a.coordinates;
    if (o)
      switch (a.type) {
        case "LineString":
          a.coordinates = aO(s, o, r);
          break;
        case "Polygon":
          gx(s, o, r);
          break;
        case "MultiLineString":
          gx(s, o, r);
          break;
        case "MultiPolygon":
          j(s, function(l, u) {
            return gx(l, o[u], r);
          });
      }
  }), t.UTF8Encoding = !1, t;
}
function gx(e, t, r) {
  for (var n = 0; n < e.length; n++)
    e[n] = aO(e[n], t[n], r);
}
function aO(e, t, r) {
  for (var n = [], i = t[0], a = t[1], o = 0; o < e.length; o += 2) {
    var s = e.charCodeAt(o) - 64, l = e.charCodeAt(o + 1) - 64;
    s = s >> 1 ^ -(s & 1), l = l >> 1 ^ -(l & 1), s += i, l += a, i = s, a = l, n.push([s / r, l / r]);
  }
  return n;
}
function zw(e, t) {
  return e = Sle(e), ue(Ct(e.features, function(r) {
    return r.geometry && r.properties && r.geometry.coordinates.length > 0;
  }), function(r) {
    var n = r.properties, i = r.geometry, a = [];
    switch (i.type) {
      case "Polygon":
        var o = i.coordinates;
        a.push(new r5(o[0], o.slice(1)));
        break;
      case "MultiPolygon":
        j(i.coordinates, function(l) {
          l[0] && a.push(new r5(l[0], l.slice(1)));
        });
        break;
      case "LineString":
        a.push(new n5([i.coordinates]));
        break;
      case "MultiLineString":
        a.push(new n5(i.coordinates));
    }
    var s = new iO(n[t || "name"], a, n.cp);
    return s.properties = n, s;
  });
}
const Cle = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  MAX_SAFE_INTEGER: iw,
  asc: An,
  getPercentWithPrecision: Qte,
  getPixelPrecision: rC,
  getPrecision: bi,
  getPrecisionSafe: rm,
  isNumeric: Py,
  isRadianAroundZero: Ic,
  linearMap: Mt,
  nice: iC,
  numericToNumber: ua,
  parseDate: In,
  quantile: dg,
  quantity: y9,
  quantityExponent: Qh,
  reformIntervals: aw,
  remRadian: nC,
  round: tr
}, Symbol.toStringTag, { value: "Module" })), Tle = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  format: op,
  parse: In
}, Symbol.toStringTag, { value: "Module" })), Ale = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Arc: np,
  BezierCurve: sf,
  BoundingRect: tt,
  Circle: da,
  CompoundPath: $y,
  Ellipse: rp,
  Group: Fe,
  Image: Ar,
  IncrementalDisplayable: r6,
  Line: xr,
  LinearGradient: lf,
  Polygon: Jr,
  Polyline: en,
  RadialGradient: gC,
  Rect: vt,
  Ring: of,
  Sector: qr,
  Text: pt,
  clipPointsByRect: bC,
  clipRectByRect: s6,
  createIcon: cf,
  extendPath: a6,
  extendShape: i6,
  getShapeClass: Hy,
  getTransform: Ko,
  initProps: Wt,
  makeImage: yC,
  makePath: ip,
  mergePath: Tn,
  registerShape: oi,
  resizePath: xC,
  updateProps: _t
}, Symbol.toStringTag, { value: "Module" })), Mle = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  addCommas: EC,
  capitalFirst: Mie,
  encodeHTML: Zr,
  formatTime: Aie,
  formatTpl: NC,
  getTextRect: Cie,
  getTooltipMarker: S6,
  normalizeCssArray: Xl,
  toCamelCase: DC,
  truncateText: Lre
}, Symbol.toStringTag, { value: "Module" })), Ele = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  bind: xe,
  clone: ze,
  curry: We,
  defaults: Ie,
  each: j,
  extend: ae,
  filter: Ct,
  indexOf: rt,
  inherits: YS,
  isArray: le,
  isFunction: Ee,
  isObject: Ne,
  isString: ge,
  map: ue,
  merge: Xe,
  reduce: ei
}, Symbol.toStringTag, { value: "Module" }));
var Sh = yt();
function oO(e, t) {
  var r = ue(t, function(n) {
    return e.scale.parse(n);
  });
  return e.type === "time" && r.length > 0 && (r.sort(), r.unshift(r[0]), r.push(r[r.length - 1])), r;
}
function Dle(e) {
  var t = e.getLabelModel().get("customValues");
  if (t) {
    var r = xf(e), n = e.scale.getExtent(), i = oO(e, t), a = Ct(i, function(o) {
      return o >= n[0] && o <= n[1];
    });
    return {
      labels: ue(a, function(o) {
        var s = {
          value: o
        };
        return {
          formattedLabel: r(s),
          rawLabel: e.scale.getLabel(s),
          tickValue: o
        };
      })
    };
  }
  return e.type === "category" ? Ile(e) : Rle(e);
}
function Nle(e, t) {
  var r = e.getTickModel().get("customValues");
  if (r) {
    var n = e.scale.getExtent(), i = oO(e, r);
    return {
      ticks: Ct(i, function(a) {
        return a >= n[0] && a <= n[1];
      })
    };
  }
  return e.type === "category" ? Lle(e, t) : {
    ticks: ue(e.scale.getTicks(), function(a) {
      return a.value;
    })
  };
}
function Ile(e) {
  var t = e.getLabelModel(), r = sO(e, t);
  return !t.get("show") || e.scale.isBlank() ? {
    labels: [],
    labelCategoryInterval: r.labelCategoryInterval
  } : r;
}
function sO(e, t) {
  var r = lO(e, "labels"), n = nT(t), i = uO(r, n);
  if (i)
    return i;
  var a, o;
  return Ee(n) ? a = dO(e, n) : (o = n === "auto" ? Ple(e) : n, a = fO(e, o)), cO(r, n, {
    labels: a,
    labelCategoryInterval: o
  });
}
function Lle(e, t) {
  var r = lO(e, "ticks"), n = nT(t), i = uO(r, n);
  if (i)
    return i;
  var a, o;
  if ((!t.get("show") || e.scale.isBlank()) && (a = []), Ee(n))
    a = dO(e, n, !0);
  else if (n === "auto") {
    var s = sO(e, e.getLabelModel());
    o = s.labelCategoryInterval, a = ue(s.labels, function(l) {
      return l.tickValue;
    });
  } else
    o = n, a = fO(e, o, !0);
  return cO(r, n, {
    ticks: a,
    tickCategoryInterval: o
  });
}
function Rle(e) {
  var t = e.scale.getTicks(), r = xf(e);
  return {
    labels: ue(t, function(n, i) {
      return {
        level: n.level,
        formattedLabel: r(n, i),
        rawLabel: e.scale.getLabel(n),
        tickValue: n.value
      };
    })
  };
}
function lO(e, t) {
  return Sh(e)[t] || (Sh(e)[t] = []);
}
function uO(e, t) {
  for (var r = 0; r < e.length; r++)
    if (e[r].key === t)
      return e[r].value;
}
function cO(e, t, r) {
  return e.push({
    key: t,
    value: r
  }), r;
}
function Ple(e) {
  var t = Sh(e).autoInterval;
  return t ?? (Sh(e).autoInterval = e.calculateCategoryInterval());
}
function kle(e) {
  var t = Ole(e), r = xf(e), n = (t.axisRotate - t.labelRotate) / 180 * Math.PI, i = e.scale, a = i.getExtent(), o = i.count();
  if (a[1] - a[0] < 1)
    return 0;
  var s = 1;
  o > 40 && (s = Math.max(1, Math.floor(o / 40)));
  for (var l = a[0], u = e.dataToCoord(l + 1) - e.dataToCoord(l), c = Math.abs(u * Math.cos(n)), f = Math.abs(u * Math.sin(n)), d = 0, h = 0; l <= a[1]; l += s) {
    var p = 0, v = 0, g = Jh(r({
      value: l
    }), t.font, "center", "top");
    p = g.width * 1.3, v = g.height * 1.3, d = Math.max(d, p, 7), h = Math.max(h, v, 7);
  }
  var m = d / c, y = h / f;
  isNaN(m) && (m = 1 / 0), isNaN(y) && (y = 1 / 0);
  var b = Math.max(0, Math.floor(Math.min(m, y))), w = Sh(e.model), _ = e.getExtent(), S = w.lastAutoInterval, C = w.lastTickCount;
  return S != null && C != null && Math.abs(S - b) <= 1 && Math.abs(C - o) <= 1 && S > b && w.axisExtent0 === _[0] && w.axisExtent1 === _[1] ? b = S : (w.lastTickCount = o, w.lastAutoInterval = b, w.axisExtent0 = _[0], w.axisExtent1 = _[1]), b;
}
function Ole(e) {
  var t = e.getLabelModel();
  return {
    axisRotate: e.getRotate ? e.getRotate() : e.isHorizontal && !e.isHorizontal() ? 90 : 0,
    labelRotate: t.get("rotate") || 0,
    font: t.getFont()
  };
}
function fO(e, t, r) {
  var n = xf(e), i = e.scale, a = i.getExtent(), o = e.getLabelModel(), s = [], l = Math.max((t || 0) + 1, 1), u = a[0], c = i.count();
  u !== 0 && l > 1 && c / l > 2 && (u = Math.round(Math.ceil(u / l) * l));
  var f = rO(e), d = o.get("showMinLabel") || f, h = o.get("showMaxLabel") || f;
  d && u !== a[0] && v(a[0]);
  for (var p = u; p <= a[1]; p += l)
    v(p);
  h && p - l !== a[1] && v(a[1]);
  function v(g) {
    var m = {
      value: g
    };
    s.push(r ? g : {
      formattedLabel: n(m),
      rawLabel: i.getLabel(m),
      tickValue: g
    });
  }
  return s;
}
function dO(e, t, r) {
  var n = e.scale, i = xf(e), a = [];
  return j(n.getTicks(), function(o) {
    var s = n.getLabel(o), l = o.value;
    t(o.value, s) && a.push(r ? l : {
      formattedLabel: i(o),
      rawLabel: s,
      tickValue: l
    });
  }), a;
}
var i5 = [0, 1], ui = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.onBand = !1, this.inverse = !1, this.dim = t, this.scale = r, this._extent = n || [0, 0];
    }
    return e.prototype.contain = function(t) {
      var r = this._extent, n = Math.min(r[0], r[1]), i = Math.max(r[0], r[1]);
      return t >= n && t <= i;
    }, e.prototype.containData = function(t) {
      return this.scale.contain(t);
    }, e.prototype.getExtent = function() {
      return this._extent.slice();
    }, e.prototype.getPixelPrecision = function(t) {
      return rC(t || this.scale.getExtent(), this._extent);
    }, e.prototype.setExtent = function(t, r) {
      var n = this._extent;
      n[0] = t, n[1] = r;
    }, e.prototype.dataToCoord = function(t, r) {
      var n = this._extent, i = this.scale;
      return t = i.normalize(t), this.onBand && i.type === "ordinal" && (n = n.slice(), a5(n, i.count())), Mt(t, i5, n, r);
    }, e.prototype.coordToData = function(t, r) {
      var n = this._extent, i = this.scale;
      this.onBand && i.type === "ordinal" && (n = n.slice(), a5(n, i.count()));
      var a = Mt(t, n, i5, r);
      return this.scale.scale(a);
    }, e.prototype.pointToData = function(t, r) {
    }, e.prototype.getTicksCoords = function(t) {
      t = t || {};
      var r = t.tickModel || this.getTickModel(), n = Nle(this, r), i = n.ticks, a = ue(i, function(s) {
        return {
          coord: this.dataToCoord(this.scale.type === "ordinal" ? this.scale.getRawOrdinalNumber(s) : s),
          tickValue: s
        };
      }, this), o = r.get("alignWithLabel");
      return zle(this, a, o, t.clamp), a;
    }, e.prototype.getMinorTicksCoords = function() {
      if (this.scale.type === "ordinal")
        return [];
      var t = this.model.getModel("minorTick"), r = t.get("splitNumber");
      r > 0 && r < 100 || (r = 5);
      var n = this.scale.getMinorTicks(r), i = ue(n, function(a) {
        return ue(a, function(o) {
          return {
            coord: this.dataToCoord(o),
            tickValue: o
          };
        }, this);
      }, this);
      return i;
    }, e.prototype.getViewLabels = function() {
      return Dle(this).labels;
    }, e.prototype.getLabelModel = function() {
      return this.model.getModel("axisLabel");
    }, e.prototype.getTickModel = function() {
      return this.model.getModel("axisTick");
    }, e.prototype.getBandWidth = function() {
      var t = this._extent, r = this.scale.getExtent(), n = r[1] - r[0] + (this.onBand ? 1 : 0);
      n === 0 && (n = 1);
      var i = Math.abs(t[1] - t[0]);
      return Math.abs(i) / n;
    }, e.prototype.calculateCategoryInterval = function() {
      return kle(this);
    }, e;
  }()
);
function a5(e, t) {
  var r = e[1] - e[0], n = t, i = r / n / 2;
  e[0] += i, e[1] -= i;
}
function zle(e, t, r, n) {
  var i = t.length;
  if (!e.onBand || r || !i)
    return;
  var a = e.getExtent(), o, s;
  if (i === 1)
    t[0].coord = a[0], o = t[1] = {
      coord: a[1],
      tickValue: t[0].tickValue
    };
  else {
    var l = t[i - 1].tickValue - t[0].tickValue, u = (t[i - 1].coord - t[0].coord) / l;
    j(t, function(h) {
      h.coord -= u / 2;
    });
    var c = e.scale.getExtent();
    s = 1 + c[1] - t[i - 1].tickValue, o = {
      coord: t[i - 1].coord + u * s,
      tickValue: c[1] + 1
    }, t.push(o);
  }
  var f = a[0] > a[1];
  d(t[0].coord, a[0]) && (n ? t[0].coord = a[0] : t.shift()), n && d(a[0], t[0].coord) && t.unshift({
    coord: a[0]
  }), d(a[1], o.coord) && (n ? o.coord = a[1] : t.pop()), n && d(o.coord, a[1]) && t.push({
    coord: a[1]
  });
  function d(h, p) {
    return h = tr(h), p = tr(p), f ? h > p : h < p;
  }
}
function jle(e) {
  var t = at.extend(e);
  return at.registerClass(t), t;
}
function Vle(e) {
  var t = $t.extend(e);
  return $t.registerClass(t), t;
}
function Ble(e) {
  var t = zt.extend(e);
  return zt.registerClass(t), t;
}
function Fle(e) {
  var t = It.extend(e);
  return It.registerClass(t), t;
}
var Xf = Math.PI * 2, $s = ca.CMD, $le = ["top", "right", "bottom", "left"];
function Hle(e, t, r, n, i) {
  var a = r.width, o = r.height;
  switch (e) {
    case "top":
      n.set(r.x + a / 2, r.y - t), i.set(0, -1);
      break;
    case "bottom":
      n.set(r.x + a / 2, r.y + o + t), i.set(0, 1);
      break;
    case "left":
      n.set(r.x - t, r.y + o / 2), i.set(-1, 0);
      break;
    case "right":
      n.set(r.x + a + t, r.y + o / 2), i.set(1, 0);
      break;
  }
}
function Gle(e, t, r, n, i, a, o, s, l) {
  o -= e, s -= t;
  var u = Math.sqrt(o * o + s * s);
  o /= u, s /= u;
  var c = o * r + e, f = s * r + t;
  if (Math.abs(n - i) % Xf < 1e-4)
    return l[0] = c, l[1] = f, u - r;
  if (a) {
    var d = n;
    n = Mn(i), i = Mn(d);
  } else
    n = Mn(n), i = Mn(i);
  n > i && (i += Xf);
  var h = Math.atan2(s, o);
  if (h < 0 && (h += Xf), h >= n && h <= i || h + Xf >= n && h + Xf <= i)
    return l[0] = c, l[1] = f, u - r;
  var p = r * Math.cos(n) + e, v = r * Math.sin(n) + t, g = r * Math.cos(i) + e, m = r * Math.sin(i) + t, y = (p - o) * (p - o) + (v - s) * (v - s), b = (g - o) * (g - o) + (m - s) * (m - s);
  return y < b ? (l[0] = p, l[1] = v, Math.sqrt(y)) : (l[0] = g, l[1] = m, Math.sqrt(b));
}
function Cm(e, t, r, n, i, a, o, s) {
  var l = i - e, u = a - t, c = r - e, f = n - t, d = Math.sqrt(c * c + f * f);
  c /= d, f /= d;
  var h = l * c + u * f, p = h / d;
  s && (p = Math.min(Math.max(p, 0), 1)), p *= d;
  var v = o[0] = e + p * c, g = o[1] = t + p * f;
  return Math.sqrt((v - i) * (v - i) + (g - a) * (g - a));
}
function hO(e, t, r, n, i, a, o) {
  r < 0 && (e = e + r, r = -r), n < 0 && (t = t + n, n = -n);
  var s = e + r, l = t + n, u = o[0] = Math.min(Math.max(i, e), s), c = o[1] = Math.min(Math.max(a, t), l);
  return Math.sqrt((u - i) * (u - i) + (c - a) * (c - a));
}
var gi = [];
function Wle(e, t, r) {
  var n = hO(t.x, t.y, t.width, t.height, e.x, e.y, gi);
  return r.set(gi[0], gi[1]), n;
}
function Ule(e, t, r) {
  for (var n = 0, i = 0, a = 0, o = 0, s, l, u = 1 / 0, c = t.data, f = e.x, d = e.y, h = 0; h < c.length; ) {
    var p = c[h++];
    h === 1 && (n = c[h], i = c[h + 1], a = n, o = i);
    var v = u;
    switch (p) {
      case $s.M:
        a = c[h++], o = c[h++], n = a, i = o;
        break;
      case $s.L:
        v = Cm(n, i, c[h], c[h + 1], f, d, gi, !0), n = c[h++], i = c[h++];
        break;
      case $s.C:
        v = qk(n, i, c[h++], c[h++], c[h++], c[h++], c[h], c[h + 1], f, d, gi), n = c[h++], i = c[h++];
        break;
      case $s.Q:
        v = Qk(n, i, c[h++], c[h++], c[h], c[h + 1], f, d, gi), n = c[h++], i = c[h++];
        break;
      case $s.A:
        var g = c[h++], m = c[h++], y = c[h++], b = c[h++], w = c[h++], _ = c[h++];
        h += 1;
        var S = !!(1 - c[h++]);
        s = Math.cos(w) * y + g, l = Math.sin(w) * b + m, h <= 1 && (a = s, o = l);
        var C = (f - g) * b / y + g;
        v = Gle(g, m, b, w, w + _, S, C, d, gi), n = Math.cos(w + _) * y + g, i = Math.sin(w + _) * b + m;
        break;
      case $s.R:
        a = n = c[h++], o = i = c[h++];
        var A = c[h++], M = c[h++];
        v = hO(a, o, A, M, f, d, gi);
        break;
      case $s.Z:
        v = Cm(n, i, a, o, f, d, gi, !0), n = a, i = o;
        break;
    }
    v < u && (u = v, r.set(gi[0], gi[1]));
  }
  return u;
}
var wi = new et(), Ft = new et(), ar = new et(), Ji = new et(), Zi = new et();
function o5(e, t) {
  if (e) {
    var r = e.getTextGuideLine(), n = e.getTextContent();
    if (n && r) {
      var i = e.textGuideLineConfig || {}, a = [[0, 0], [0, 0], [0, 0]], o = i.candidates || $le, s = n.getBoundingRect().clone();
      s.applyTransform(n.getComputedTransform());
      var l = 1 / 0, u = i.anchor, c = e.getComputedTransform(), f = c && Ul([], c), d = t.get("length2") || 0;
      u && ar.copy(u);
      for (var h = 0; h < o.length; h++) {
        var p = o[h];
        Hle(p, 0, s, wi, Ji), et.scaleAndAdd(Ft, wi, Ji, d), Ft.transform(f);
        var v = e.getBoundingRect(), g = u ? u.distance(Ft) : e instanceof lt ? Ule(Ft, e.path, ar) : Wle(Ft, v, ar);
        g < l && (l = g, Ft.transform(c), ar.transform(c), ar.toArray(a[0]), Ft.toArray(a[1]), wi.toArray(a[2]));
      }
      pO(a, t.get("minTurnAngle")), r.setShape({
        points: a
      });
    }
  }
}
var Tm = [], an = new et();
function pO(e, t) {
  if (t <= 180 && t > 0) {
    t = t / 180 * Math.PI, wi.fromArray(e[0]), Ft.fromArray(e[1]), ar.fromArray(e[2]), et.sub(Ji, wi, Ft), et.sub(Zi, ar, Ft);
    var r = Ji.len(), n = Zi.len();
    if (!(r < 1e-3 || n < 1e-3)) {
      Ji.scale(1 / r), Zi.scale(1 / n);
      var i = Ji.dot(Zi), a = Math.cos(t);
      if (a < i) {
        var o = Cm(Ft.x, Ft.y, ar.x, ar.y, wi.x, wi.y, Tm, !1);
        an.fromArray(Tm), an.scaleAndAdd(Zi, o / Math.tan(Math.PI - t));
        var s = ar.x !== Ft.x ? (an.x - Ft.x) / (ar.x - Ft.x) : (an.y - Ft.y) / (ar.y - Ft.y);
        if (isNaN(s))
          return;
        s < 0 ? et.copy(an, Ft) : s > 1 && et.copy(an, ar), an.toArray(e[1]);
      }
    }
  }
}
function Yle(e, t, r) {
  if (r <= 180 && r > 0) {
    r = r / 180 * Math.PI, wi.fromArray(e[0]), Ft.fromArray(e[1]), ar.fromArray(e[2]), et.sub(Ji, Ft, wi), et.sub(Zi, ar, Ft);
    var n = Ji.len(), i = Zi.len();
    if (!(n < 1e-3 || i < 1e-3)) {
      Ji.scale(1 / n), Zi.scale(1 / i);
      var a = Ji.dot(t), o = Math.cos(r);
      if (a < o) {
        var s = Cm(Ft.x, Ft.y, ar.x, ar.y, wi.x, wi.y, Tm, !1);
        an.fromArray(Tm);
        var l = Math.PI / 2, u = Math.acos(Zi.dot(t)), c = l + u - r;
        if (c >= l)
          et.copy(an, ar);
        else {
          an.scaleAndAdd(Zi, s / Math.tan(Math.PI / 2 - c));
          var f = ar.x !== Ft.x ? (an.x - Ft.x) / (ar.x - Ft.x) : (an.y - Ft.y) / (ar.y - Ft.y);
          if (isNaN(f))
            return;
          f < 0 ? et.copy(an, Ft) : f > 1 && et.copy(an, ar);
        }
        an.toArray(e[1]);
      }
    }
  }
}
function mx(e, t, r, n) {
  var i = r === "normal", a = i ? e : e.ensureState(r);
  a.ignore = t;
  var o = n.get("smooth");
  o && o === !0 && (o = 0.3), a.shape = a.shape || {}, o > 0 && (a.shape.smooth = o);
  var s = n.getModel("lineStyle").getLineStyle();
  i ? e.useStyle(s) : a.style = s;
}
function Zle(e, t) {
  var r = t.smooth, n = t.points;
  if (n)
    if (e.moveTo(n[0][0], n[0][1]), r > 0 && n.length >= 3) {
      var i = Oa(n[0], n[1]), a = Oa(n[1], n[2]);
      if (!i || !a) {
        e.lineTo(n[1][0], n[1][1]), e.lineTo(n[2][0], n[2][1]);
        return;
      }
      var o = Math.min(i, a) * r, s = Rd([], n[1], n[0], o / i), l = Rd([], n[1], n[2], o / a), u = Rd([], s, l, 0.5);
      e.bezierCurveTo(s[0], s[1], s[0], s[1], u[0], u[1]), e.bezierCurveTo(l[0], l[1], l[0], l[1], n[2][0], n[2][1]);
    } else
      for (var c = 1; c < n.length; c++)
        e.lineTo(n[c][0], n[c][1]);
}
function iT(e, t, r) {
  var n = e.getTextGuideLine(), i = e.getTextContent();
  if (!i) {
    n && e.removeTextGuideLine();
    return;
  }
  for (var a = t.normal, o = a.get("show"), s = i.ignore, l = 0; l < vh.length; l++) {
    var u = vh[l], c = t[u], f = u === "normal";
    if (c) {
      var d = c.get("show"), h = f ? s : Ge(i.states[u] && i.states[u].ignore, s);
      if (h || !Ge(d, o)) {
        var p = f ? n : n && n.states[u];
        p && (p.ignore = !0), n && mx(n, !0, u, c);
        continue;
      }
      n || (n = new en(), e.setTextGuideLine(n), !f && (s || !o) && mx(n, !0, "normal", t.normal), e.stateProxy && (n.stateProxy = e.stateProxy)), mx(n, !1, u, c);
    }
  }
  if (n) {
    Ie(n.style, r), n.style.fill = null;
    var v = a.get("showAbove"), g = e.textGuideLineConfig = e.textGuideLineConfig || {};
    g.showAbove = v || !1, n.buildPath = Zle;
  }
}
function aT(e, t) {
  t = t || "labelLine";
  for (var r = {
    normal: e.getModel(t)
  }, n = 0; n < un.length; n++) {
    var i = un[n];
    r[i] = e.getModel([i, t]);
  }
  return r;
}
function vO(e) {
  for (var t = [], r = 0; r < e.length; r++) {
    var n = e[r];
    if (!n.defaultAttr.ignore) {
      var i = n.label, a = i.getComputedTransform(), o = i.getBoundingRect(), s = !a || a[1] < 1e-5 && a[2] < 1e-5, l = i.style.margin || 0, u = o.clone();
      u.applyTransform(a), u.x -= l / 2, u.y -= l / 2, u.width += l, u.height += l;
      var c = s ? new am(o, a) : null;
      t.push({
        label: i,
        labelLine: n.labelLine,
        rect: u,
        localRect: o,
        obb: c,
        priority: n.priority,
        defaultAttr: n.defaultAttr,
        layoutOption: n.computedLayoutOption,
        axisAligned: s,
        transform: a
      });
    }
  }
  return t;
}
function gO(e, t, r, n, i, a) {
  var o = e.length;
  if (o < 2)
    return;
  e.sort(function(S, C) {
    return S.rect[t] - C.rect[t];
  });
  for (var s = 0, l, u = !1, c = 0; c < o; c++) {
    var f = e[c], d = f.rect;
    l = d[t] - s, l < 0 && (d[t] -= l, f.label[t] -= l, u = !0), s = d[t] + d[r];
  }
  var h = e[0], p = e[o - 1], v, g;
  m(), v < 0 && w(-v, 0.8), g < 0 && w(g, 0.8), m(), y(v, g, 1), y(g, v, -1), m(), v < 0 && _(-v), g < 0 && _(g);
  function m() {
    v = h.rect[t] - n, g = i - p.rect[t] - p.rect[r];
  }
  function y(S, C, A) {
    if (S < 0) {
      var M = Math.min(C, -S);
      if (M > 0) {
        b(M * A, 0, o);
        var D = M + S;
        D < 0 && w(-D * A, 1);
      } else
        w(-S * A, 1);
    }
  }
  function b(S, C, A) {
    S !== 0 && (u = !0);
    for (var M = C; M < A; M++) {
      var D = e[M], N = D.rect;
      N[t] += S, D.label[t] += S;
    }
  }
  function w(S, C) {
    for (var A = [], M = 0, D = 1; D < o; D++) {
      var N = e[D - 1].rect, R = Math.max(e[D].rect[t] - N[t] - N[r], 0);
      A.push(R), M += R;
    }
    if (M) {
      var O = Math.min(Math.abs(S) / M, C);
      if (S > 0)
        for (var D = 0; D < o - 1; D++) {
          var E = A[D] * O;
          b(E, 0, D + 1);
        }
      else
        for (var D = o - 1; D > 0; D--) {
          var E = A[D - 1] * O;
          b(-E, D, o);
        }
    }
  }
  function _(S) {
    var C = S < 0 ? -1 : 1;
    S = Math.abs(S);
    for (var A = Math.ceil(S / (o - 1)), M = 0; M < o - 1; M++)
      if (C > 0 ? b(A, 0, M + 1) : b(-A, o - M - 1, o), S -= A, S <= 0)
        return;
  }
  return u;
}
function Xle(e, t, r, n) {
  return gO(e, "x", "width", t, r);
}
function mO(e, t, r, n) {
  return gO(e, "y", "height", t, r);
}
function yO(e) {
  var t = [];
  e.sort(function(v, g) {
    return g.priority - v.priority;
  });
  var r = new tt(0, 0, 0, 0);
  function n(v) {
    if (!v.ignore) {
      var g = v.ensureState("emphasis");
      g.ignore == null && (g.ignore = !1);
    }
    v.ignore = !0;
  }
  for (var i = 0; i < e.length; i++) {
    var a = e[i], o = a.axisAligned, s = a.localRect, l = a.transform, u = a.label, c = a.labelLine;
    r.copy(a.rect), r.width -= 0.1, r.height -= 0.1, r.x += 0.05, r.y += 0.05;
    for (var f = a.obb, d = !1, h = 0; h < t.length; h++) {
      var p = t[h];
      if (r.intersect(p.rect)) {
        if (o && p.axisAligned) {
          d = !0;
          break;
        }
        if (p.obb || (p.obb = new am(p.localRect, p.transform)), f || (f = new am(s, l)), f.intersect(p.obb)) {
          d = !0;
          break;
        }
      }
    }
    d ? (n(u), c && n(c)) : (u.attr("ignore", a.defaultAttr.ignore), c && c.attr("ignore", a.defaultAttr.labelGuideIgnore), t.push(a));
  }
}
function Kle(e) {
  if (e) {
    for (var t = [], r = 0; r < e.length; r++)
      t.push(e[r].slice());
    return t;
  }
}
function qle(e, t) {
  var r = e.label, n = t && t.getTextGuideLine();
  return {
    dataIndex: e.dataIndex,
    dataType: e.dataType,
    seriesIndex: e.seriesModel.seriesIndex,
    text: e.label.style.text,
    rect: e.hostRect,
    labelRect: e.rect,
    // x: labelAttr.x,
    // y: labelAttr.y,
    align: r.style.align,
    verticalAlign: r.style.verticalAlign,
    labelLinePoints: Kle(n && n.shape.points)
  };
}
var s5 = ["align", "verticalAlign", "width", "height", "fontSize"], tn = new Va(), yx = yt(), Jle = yt();
function yv(e, t, r) {
  for (var n = 0; n < r.length; n++) {
    var i = r[n];
    t[i] != null && (e[i] = t[i]);
  }
}
var xv = ["x", "y", "rotation"], Qle = (
  /** @class */
  function() {
    function e() {
      this._labelList = [], this._chartViewList = [];
    }
    return e.prototype.clearLabels = function() {
      this._labelList = [], this._chartViewList = [];
    }, e.prototype._addLabel = function(t, r, n, i, a) {
      var o = i.style, s = i.__hostTarget, l = s.textConfig || {}, u = i.getComputedTransform(), c = i.getBoundingRect().plain();
      tt.applyTransform(c, c, u), u ? tn.setLocalTransform(u) : (tn.x = tn.y = tn.rotation = tn.originX = tn.originY = 0, tn.scaleX = tn.scaleY = 1), tn.rotation = Mn(tn.rotation);
      var f = i.__hostTarget, d;
      if (f) {
        d = f.getBoundingRect().plain();
        var h = f.getComputedTransform();
        tt.applyTransform(d, d, h);
      }
      var p = d && f.getTextGuideLine();
      this._labelList.push({
        label: i,
        labelLine: p,
        seriesModel: n,
        dataIndex: t,
        dataType: r,
        layoutOption: a,
        computedLayoutOption: null,
        rect: c,
        hostRect: d,
        // Label with lower priority will be hidden when overlapped
        // Use rect size as default priority
        priority: d ? d.width * d.height : 0,
        // Save default label attributes.
        // For restore if developers want get back to default value in callback.
        defaultAttr: {
          ignore: i.ignore,
          labelGuideIgnore: p && p.ignore,
          x: tn.x,
          y: tn.y,
          scaleX: tn.scaleX,
          scaleY: tn.scaleY,
          rotation: tn.rotation,
          style: {
            x: o.x,
            y: o.y,
            align: o.align,
            verticalAlign: o.verticalAlign,
            width: o.width,
            height: o.height,
            fontSize: o.fontSize
          },
          cursor: i.cursor,
          attachedPos: l.position,
          attachedRot: l.rotation
        }
      });
    }, e.prototype.addLabelsOfSeries = function(t) {
      var r = this;
      this._chartViewList.push(t);
      var n = t.__model, i = n.get("labelLayout");
      (Ee(i) || ut(i).length) && t.group.traverse(function(a) {
        if (a.ignore)
          return !0;
        var o = a.getTextContent(), s = He(a);
        o && !o.disableLabelLayout && r._addLabel(s.dataIndex, s.dataType, n, o, i);
      });
    }, e.prototype.updateLayoutConfig = function(t) {
      var r = t.getWidth(), n = t.getHeight();
      function i(b, w) {
        return function() {
          o5(b, w);
        };
      }
      for (var a = 0; a < this._labelList.length; a++) {
        var o = this._labelList[a], s = o.label, l = s.__hostTarget, u = o.defaultAttr, c = void 0;
        Ee(o.layoutOption) ? c = o.layoutOption(qle(o, l)) : c = o.layoutOption, c = c || {}, o.computedLayoutOption = c;
        var f = Math.PI / 180;
        l && l.setTextConfig({
          // Force to set local false.
          local: !1,
          // Ignore position and rotation config on the host el if x or y is changed.
          position: c.x != null || c.y != null ? null : u.attachedPos,
          // Ignore rotation config on the host el if rotation is changed.
          rotation: c.rotate != null ? c.rotate * f : u.attachedRot,
          offset: [c.dx || 0, c.dy || 0]
        });
        var d = !1;
        if (c.x != null ? (s.x = pe(c.x, r), s.setStyle("x", 0), d = !0) : (s.x = u.x, s.setStyle("x", u.style.x)), c.y != null ? (s.y = pe(c.y, n), s.setStyle("y", 0), d = !0) : (s.y = u.y, s.setStyle("y", u.style.y)), c.labelLinePoints) {
          var h = l.getTextGuideLine();
          h && (h.setShape({
            points: c.labelLinePoints
          }), d = !1);
        }
        var p = yx(s);
        p.needsUpdateLabelLine = d, s.rotation = c.rotate != null ? c.rotate * f : u.rotation, s.scaleX = u.scaleX, s.scaleY = u.scaleY;
        for (var v = 0; v < s5.length; v++) {
          var g = s5[v];
          s.setStyle(g, c[g] != null ? c[g] : u.style[g]);
        }
        if (c.draggable) {
          if (s.draggable = !0, s.cursor = "move", l) {
            var m = o.seriesModel;
            if (o.dataIndex != null) {
              var y = o.seriesModel.getData(o.dataType);
              m = y.getItemModel(o.dataIndex);
            }
            s.on("drag", i(l, m.getModel("labelLine")));
          }
        } else
          s.off("drag"), s.cursor = u.cursor;
      }
    }, e.prototype.layout = function(t) {
      var r = t.getWidth(), n = t.getHeight(), i = vO(this._labelList), a = Ct(i, function(l) {
        return l.layoutOption.moveOverlap === "shiftX";
      }), o = Ct(i, function(l) {
        return l.layoutOption.moveOverlap === "shiftY";
      });
      Xle(a, 0, r), mO(o, 0, n);
      var s = Ct(i, function(l) {
        return l.layoutOption.hideOverlap;
      });
      yO(s);
    }, e.prototype.processLabelsOverall = function() {
      var t = this;
      j(this._chartViewList, function(r) {
        var n = r.__model, i = r.ignoreLabelLineUpdate, a = n.isAnimationEnabled();
        r.group.traverse(function(o) {
          if (o.ignore && !o.forceLabelAnimation)
            return !0;
          var s = !i, l = o.getTextContent();
          !s && l && (s = yx(l).needsUpdateLabelLine), s && t._updateLabelLine(o, n), a && t._animateLabels(o, n);
        });
      });
    }, e.prototype._updateLabelLine = function(t, r) {
      var n = t.getTextContent(), i = He(t), a = i.dataIndex;
      if (n && a != null) {
        var o = r.getData(i.dataType), s = o.getItemModel(a), l = {}, u = o.getItemVisual(a, "style");
        if (u) {
          var c = o.getVisual("drawType");
          l.stroke = u[c];
        }
        var f = s.getModel("labelLine");
        iT(t, aT(s), l), o5(t, f);
      }
    }, e.prototype._animateLabels = function(t, r) {
      var n = t.getTextContent(), i = t.getTextGuideLine();
      if (n && (t.forceLabelAnimation || !n.ignore && !n.invisible && !t.disableLabelAnimation && !pc(t))) {
        var a = yx(n), o = a.oldLayout, s = He(t), l = s.dataIndex, u = {
          x: n.x,
          y: n.y,
          rotation: n.rotation
        }, c = r.getData(s.dataType);
        if (o) {
          n.attr(o);
          var d = t.prevStates;
          d && (rt(d, "select") >= 0 && n.attr(a.oldLayoutSelect), rt(d, "emphasis") >= 0 && n.attr(a.oldLayoutEmphasis)), _t(n, u, r, l);
        } else if (n.attr(u), !ff(n).valueAnimation) {
          var f = Ge(n.style.opacity, 1);
          n.style.opacity = 0, Wt(n, {
            style: {
              opacity: f
            }
          }, r, l);
        }
        if (a.oldLayout = u, n.states.select) {
          var h = a.oldLayoutSelect = {};
          yv(h, u, xv), yv(h, n.states.select, xv);
        }
        if (n.states.emphasis) {
          var p = a.oldLayoutEmphasis = {};
          yv(p, u, xv), yv(p, n.states.emphasis, xv);
        }
        f6(n, l, c, r, r);
      }
      if (i && !i.ignore && !i.invisible) {
        var a = Jle(i), o = a.oldLayout, v = {
          points: i.shape.points
        };
        o ? (i.attr({
          shape: o
        }), _t(i, {
          shape: v
        }, r)) : (i.setShape(v), i.style.strokePercent = 0, Wt(i, {
          style: {
            strokePercent: 1
          }
        }, r)), a.oldLayout = v;
      }
    }, e;
  }()
), xx = yt();
function eue(e) {
  e.registerUpdateLifecycle("series:beforeupdate", function(t, r, n) {
    var i = xx(r).labelManager;
    i || (i = xx(r).labelManager = new Qle()), i.clearLabels();
  }), e.registerUpdateLifecycle("series:layoutlabels", function(t, r, n) {
    var i = xx(r).labelManager;
    n.updatedSeries.forEach(function(a) {
      i.addLabelsOfSeries(r.getViewOfSeriesModel(a));
    }), i.updateLayoutConfig(r), i.layout(r), i.processLabelsOverall();
  });
}
var bx = Math.sin, _x = Math.cos, xO = Math.PI, Hs = Math.PI * 2, tue = 180 / xO, bO = function() {
  function e() {
  }
  return e.prototype.reset = function(t) {
    this._start = !0, this._d = [], this._str = "", this._p = Math.pow(10, t || 4);
  }, e.prototype.moveTo = function(t, r) {
    this._add("M", t, r);
  }, e.prototype.lineTo = function(t, r) {
    this._add("L", t, r);
  }, e.prototype.bezierCurveTo = function(t, r, n, i, a, o) {
    this._add("C", t, r, n, i, a, o);
  }, e.prototype.quadraticCurveTo = function(t, r, n, i) {
    this._add("Q", t, r, n, i);
  }, e.prototype.arc = function(t, r, n, i, a, o) {
    this.ellipse(t, r, n, n, 0, i, a, o);
  }, e.prototype.ellipse = function(t, r, n, i, a, o, s, l) {
    var u = s - o, c = !l, f = Math.abs(u), d = Bo(f - Hs) || (c ? u >= Hs : -u >= Hs), h = u > 0 ? u % Hs : u % Hs + Hs, p = !1;
    d ? p = !0 : Bo(f) ? p = !1 : p = h >= xO == !!c;
    var v = t + n * _x(o), g = r + i * bx(o);
    this._start && this._add("M", v, g);
    var m = Math.round(a * tue);
    if (d) {
      var y = 1 / this._p, b = (c ? 1 : -1) * (Hs - y);
      this._add("A", n, i, m, 1, +c, t + n * _x(o + b), r + i * bx(o + b)), y > 0.01 && this._add("A", n, i, m, 0, +c, v, g);
    } else {
      var w = t + n * _x(s), _ = r + i * bx(s);
      this._add("A", n, i, m, +p, +c, w, _);
    }
  }, e.prototype.rect = function(t, r, n, i) {
    this._add("M", t, r), this._add("l", n, 0), this._add("l", 0, i), this._add("l", -n, 0), this._add("Z");
  }, e.prototype.closePath = function() {
    this._d.length > 0 && this._add("Z");
  }, e.prototype._add = function(t, r, n, i, a, o, s, l, u) {
    for (var c = [], f = this._p, d = 1; d < arguments.length; d++) {
      var h = arguments[d];
      if (isNaN(h)) {
        this._invalid = !0;
        return;
      }
      c.push(Math.round(h * f) / f);
    }
    this._d.push(t + c.join(" ")), this._start = t === "Z";
  }, e.prototype.generateStr = function() {
    this._str = this._invalid ? "" : this._d.join(""), this._d = [];
  }, e.prototype.getStr = function() {
    return this._str;
  }, e;
}(), oT = "none", rue = Math.round;
function nue(e) {
  var t = e.fill;
  return t != null && t !== oT;
}
function iue(e) {
  var t = e.stroke;
  return t != null && t !== oT;
}
var jw = ["lineCap", "miterLimit", "lineJoin"], aue = ue(jw, function(e) {
  return "stroke-" + e.toLowerCase();
});
function oue(e, t, r, n) {
  var i = t.opacity == null ? 1 : t.opacity;
  if (r instanceof Ar) {
    e("opacity", i);
    return;
  }
  if (nue(t)) {
    var a = ph(t.fill);
    e("fill", a.color);
    var o = t.fillOpacity != null ? t.fillOpacity * a.opacity * i : a.opacity * i;
    o < 1 && e("fill-opacity", o);
  } else
    e("fill", oT);
  if (iue(t)) {
    var s = ph(t.stroke);
    e("stroke", s.color);
    var l = t.strokeNoScale ? r.getLineScale() : 1, u = l ? (t.lineWidth || 0) / l : 0, c = t.strokeOpacity != null ? t.strokeOpacity * s.opacity * i : s.opacity * i, f = t.strokeFirst;
    if (u !== 1 && e("stroke-width", u), f && e("paint-order", f ? "stroke" : "fill"), c < 1 && e("stroke-opacity", c), t.lineDash) {
      var d = FC(r), h = d[0], p = d[1];
      h && (p = rue(p || 0), e("stroke-dasharray", h.join(",")), (p || n) && e("stroke-dashoffset", p));
    }
    for (var v = 0; v < jw.length; v++) {
      var g = jw[v];
      if (t[g] !== nm[g]) {
        var m = t[g] || nm[g];
        m && e(aue[v], m);
      }
    }
  }
}
var wO = "http://www.w3.org/2000/svg", _O = "http://www.w3.org/1999/xlink", sue = "http://www.w3.org/2000/xmlns/", lue = "http://www.w3.org/XML/1998/namespace", l5 = "ecmeta_";
function SO(e) {
  return document.createElementNS(wO, e);
}
function _r(e, t, r, n, i) {
  return {
    tag: e,
    attrs: r || {},
    children: n,
    text: i,
    key: t
  };
}
function uue(e, t) {
  var r = [];
  if (t)
    for (var n in t) {
      var i = t[n], a = n;
      i !== !1 && (i !== !0 && i != null && (a += '="' + i + '"'), r.push(a));
    }
  return "<" + e + " " + r.join(" ") + ">";
}
function cue(e) {
  return "</" + e + ">";
}
function sT(e, t) {
  t = t || {};
  var r = t.newline ? `
` : "";
  function n(i) {
    var a = i.children, o = i.tag, s = i.attrs, l = i.text;
    return uue(o, s) + (o !== "style" ? Zr(l) : l || "") + (a ? "" + r + ue(a, function(u) {
      return n(u);
    }).join(r) + r : "") + cue(o);
  }
  return n(e);
}
function fue(e, t, r) {
  r = r || {};
  var n = r.newline ? `
` : "", i = " {" + n, a = n + "}", o = ue(ut(e), function(l) {
    return l + i + ue(ut(e[l]), function(u) {
      return u + ":" + e[l][u] + ";";
    }).join(n) + a;
  }).join(n), s = ue(ut(t), function(l) {
    return "@keyframes " + l + i + ue(ut(t[l]), function(u) {
      return u + i + ue(ut(t[l][u]), function(c) {
        var f = t[l][u][c];
        return c === "d" && (f = 'path("' + f + '")'), c + ":" + f + ";";
      }).join(n) + a;
    }).join(n) + a;
  }).join(n);
  return !o && !s ? "" : ["<![CDATA[", o, s, "]]>"].join(n);
}
function Vw(e) {
  return {
    zrId: e,
    shadowCache: {},
    patternCache: {},
    gradientCache: {},
    clipPathCache: {},
    defs: {},
    cssNodes: {},
    cssAnims: {},
    cssStyleCache: {},
    cssAnimIdx: 0,
    shadowIdx: 0,
    gradientIdx: 0,
    patternIdx: 0,
    clipPathIdx: 0
  };
}
function u5(e, t, r, n) {
  return _r("svg", "root", {
    width: e,
    height: t,
    xmlns: wO,
    "xmlns:xlink": _O,
    version: "1.1",
    baseProfile: "full",
    viewBox: n ? "0 0 " + e + " " + t : !1
  }, r);
}
var due = 0;
function CO() {
  return due++;
}
var c5 = {
  cubicIn: "0.32,0,0.67,0",
  cubicOut: "0.33,1,0.68,1",
  cubicInOut: "0.65,0,0.35,1",
  quadraticIn: "0.11,0,0.5,0",
  quadraticOut: "0.5,1,0.89,1",
  quadraticInOut: "0.45,0,0.55,1",
  quarticIn: "0.5,0,0.75,0",
  quarticOut: "0.25,1,0.5,1",
  quarticInOut: "0.76,0,0.24,1",
  quinticIn: "0.64,0,0.78,0",
  quinticOut: "0.22,1,0.36,1",
  quinticInOut: "0.83,0,0.17,1",
  sinusoidalIn: "0.12,0,0.39,0",
  sinusoidalOut: "0.61,1,0.88,1",
  sinusoidalInOut: "0.37,0,0.63,1",
  exponentialIn: "0.7,0,0.84,0",
  exponentialOut: "0.16,1,0.3,1",
  exponentialInOut: "0.87,0,0.13,1",
  circularIn: "0.55,0,1,0.45",
  circularOut: "0,0.55,0.45,1",
  circularInOut: "0.85,0,0.15,1"
}, Ys = "transform-origin";
function hue(e, t, r) {
  var n = ae({}, e.shape);
  ae(n, t), e.buildPath(r, n);
  var i = new bO();
  return i.reset(o9(e)), r.rebuildPath(i, 1), i.generateStr(), i.getStr();
}
function pue(e, t) {
  var r = t.originX, n = t.originY;
  (r || n) && (e[Ys] = r + "px " + n + "px");
}
var vue = {
  fill: "fill",
  opacity: "opacity",
  lineWidth: "stroke-width",
  lineDashOffset: "stroke-dashoffset"
};
function TO(e, t) {
  var r = t.zrId + "-ani-" + t.cssAnimIdx++;
  return t.cssAnims[r] = e, r;
}
function gue(e, t, r) {
  var n = e.shape.paths, i = {}, a, o;
  if (j(n, function(l) {
    var u = Vw(r.zrId);
    u.animation = !0, s0(l, {}, u, !0);
    var c = u.cssAnims, f = u.cssNodes, d = ut(c), h = d.length;
    if (h) {
      o = d[h - 1];
      var p = c[o];
      for (var v in p) {
        var g = p[v];
        i[v] = i[v] || { d: "" }, i[v].d += g.d || "";
      }
      for (var m in f) {
        var y = f[m].animation;
        y.indexOf(o) >= 0 && (a = y);
      }
    }
  }), !!a) {
    t.d = !1;
    var s = TO(i, r);
    return a.replace(o, s);
  }
}
function f5(e) {
  return ge(e) ? c5[e] ? "cubic-bezier(" + c5[e] + ")" : JS(e) ? e : "" : "";
}
function s0(e, t, r, n) {
  var i = e.animators, a = i.length, o = [];
  if (e instanceof $y) {
    var s = gue(e, t, r);
    if (s)
      o.push(s);
    else if (!a)
      return;
  } else if (!a)
    return;
  for (var l = {}, u = 0; u < a; u++) {
    var c = i[u], f = [c.getMaxTime() / 1e3 + "s"], d = f5(c.getClip().easing), h = c.getDelay();
    d ? f.push(d) : f.push("linear"), h && f.push(h / 1e3 + "s"), c.getLoop() && f.push("infinite");
    var p = f.join(" ");
    l[p] = l[p] || [p, []], l[p][1].push(c);
  }
  function v(y) {
    var b = y[1], w = b.length, _ = {}, S = {}, C = {}, A = "animation-timing-function";
    function M(J, U, $) {
      for (var Y = J.getTracks(), Z = J.getMaxTime(), K = 0; K < Y.length; K++) {
        var ie = Y[K];
        if (ie.needsAnimate()) {
          var Q = ie.keyframes, ce = ie.propName;
          if ($ && (ce = $(ce)), ce)
            for (var te = 0; te < Q.length; te++) {
              var oe = Q[te], de = Math.round(oe.time / Z * 100) + "%", Pe = f5(oe.easing), Ke = oe.rawValue;
              (ge(Ke) || bt(Ke)) && (U[de] = U[de] || {}, U[de][ce] = oe.rawValue, Pe && (U[de][A] = Pe));
            }
        }
      }
    }
    for (var D = 0; D < w; D++) {
      var N = b[D], R = N.targetName;
      R ? R === "shape" && M(N, S) : !n && M(N, _);
    }
    for (var O in _) {
      var E = {};
      f9(E, e), ae(E, _[O]);
      var L = s9(E), I = _[O][A];
      C[O] = L ? {
        transform: L
      } : {}, pue(C[O], E), I && (C[O][A] = I);
    }
    var P, k = !0;
    for (var O in S) {
      C[O] = C[O] || {};
      var z = !P, I = S[O][A];
      z && (P = new ca());
      var V = P.len();
      P.reset(), C[O].d = hue(e, S[O], P);
      var B = P.len();
      if (!z && V !== B) {
        k = !1;
        break;
      }
      I && (C[O][A] = I);
    }
    if (!k)
      for (var O in C)
        delete C[O].d;
    if (!n)
      for (var D = 0; D < w; D++) {
        var N = b[D], R = N.targetName;
        R === "style" && M(N, C, function(Y) {
          return vue[Y];
        });
      }
    for (var F = ut(C), H = !0, G, D = 1; D < F.length; D++) {
      var W = F[D - 1], X = F[D];
      if (C[W][Ys] !== C[X][Ys]) {
        H = !1;
        break;
      }
      G = C[W][Ys];
    }
    if (H && G) {
      for (var O in C)
        C[O][Ys] && delete C[O][Ys];
      t[Ys] = G;
    }
    if (Ct(F, function(J) {
      return ut(C[J]).length > 0;
    }).length) {
      var q = TO(C, r);
      return q + " " + y[0] + " both";
    }
  }
  for (var g in l) {
    var s = v(l[g]);
    s && o.push(s);
  }
  if (o.length) {
    var m = r.zrId + "-cls-" + CO();
    r.cssNodes["." + m] = {
      animation: o.join(",")
    }, t.class = m;
  }
}
function mue(e, t, r) {
  if (!e.ignore)
    if (e.isSilent()) {
      var n = {
        "pointer-events": "none"
      };
      d5(n, t, r);
    } else {
      var i = e.states.emphasis && e.states.emphasis.style ? e.states.emphasis.style : {}, a = i.fill;
      if (!a) {
        var o = e.style && e.style.fill, s = e.states.select && e.states.select.style && e.states.select.style.fill, l = e.currentStates.indexOf("select") >= 0 && s || o;
        l && (a = Jg(l));
      }
      var u = i.lineWidth;
      if (u) {
        var c = !i.strokeNoScale && e.transform ? e.transform[0] : 1;
        u = u / c;
      }
      var n = {
        cursor: "pointer"
      };
      a && (n.fill = a), i.stroke && (n.stroke = i.stroke), u && (n["stroke-width"] = u), d5(n, t, r);
    }
}
function d5(e, t, r, n) {
  var i = JSON.stringify(e), a = r.cssStyleCache[i];
  a || (a = r.zrId + "-cls-" + CO(), r.cssStyleCache[i] = a, r.cssNodes["." + a + ":hover"] = e), t.class = t.class ? t.class + " " + a : a;
}
var Ch = Math.round;
function AO(e) {
  return e && ge(e.src);
}
function MO(e) {
  return e && Ee(e.toDataURL);
}
function lT(e, t, r, n) {
  oue(function(i, a) {
    var o = i === "fill" || i === "stroke";
    o && a9(a) ? DO(t, e, i, n) : o && eC(a) ? NO(r, e, i, n) : e[i] = a, o && n.ssr && a === "none" && (e["pointer-events"] = "visible");
  }, t, r, !1), Cue(r, e, n);
}
function uT(e, t) {
  var r = p9(t);
  r && (r.each(function(n, i) {
    n != null && (e[(l5 + i).toLowerCase()] = n + "");
  }), t.isSilent() && (e[l5 + "silent"] = "true"));
}
function h5(e) {
  return Bo(e[0] - 1) && Bo(e[1]) && Bo(e[2]) && Bo(e[3] - 1);
}
function yue(e) {
  return Bo(e[4]) && Bo(e[5]);
}
function cT(e, t, r) {
  if (t && !(yue(t) && h5(t))) {
    var n = 1e4;
    e.transform = h5(t) ? "translate(" + Ch(t[4] * n) / n + " " + Ch(t[5] * n) / n + ")" : mte(t);
  }
}
function p5(e, t, r) {
  for (var n = e.points, i = [], a = 0; a < n.length; a++)
    i.push(Ch(n[a][0] * r) / r), i.push(Ch(n[a][1] * r) / r);
  t.points = i.join(" ");
}
function v5(e) {
  return !e.smooth;
}
function xue(e) {
  var t = ue(e, function(r) {
    return typeof r == "string" ? [r, r] : r;
  });
  return function(r, n, i) {
    for (var a = 0; a < t.length; a++) {
      var o = t[a], s = r[o[0]];
      s != null && (n[o[1]] = Ch(s * i) / i);
    }
  };
}
var bue = {
  circle: [xue(["cx", "cy", "r"])],
  polyline: [p5, v5],
  polygon: [p5, v5]
};
function wue(e) {
  for (var t = e.animators, r = 0; r < t.length; r++)
    if (t[r].targetName === "shape")
      return !0;
  return !1;
}
function EO(e, t) {
  var r = e.style, n = e.shape, i = bue[e.type], a = {}, o = t.animation, s = "path", l = e.style.strokePercent, u = t.compress && o9(e) || 4;
  if (i && !t.willUpdate && !(i[1] && !i[1](n)) && !(o && wue(e)) && !(l < 1)) {
    s = e.type;
    var c = Math.pow(10, u);
    i[0](n, a, c);
  } else {
    var f = !e.path || e.shapeChanged();
    e.path || e.createPathProxy();
    var d = e.path;
    f && (d.beginPath(), e.buildPath(d, e.shape), e.pathUpdated());
    var h = d.getVersion(), p = e, v = p.__svgPathBuilder;
    (p.__svgPathVersion !== h || !v || l !== p.__svgPathStrokePercent) && (v || (v = p.__svgPathBuilder = new bO()), v.reset(u), d.rebuildPath(v, l), v.generateStr(), p.__svgPathVersion = h, p.__svgPathStrokePercent = l), a.d = v.getStr();
  }
  return cT(a, e.transform), lT(a, r, e, t), uT(a, e), t.animation && s0(e, a, t), t.emphasis && mue(e, a, t), _r(s, e.id + "", a);
}
function _ue(e, t) {
  var r = e.style, n = r.image;
  if (n && !ge(n) && (AO(n) ? n = n.src : MO(n) && (n = n.toDataURL())), !!n) {
    var i = r.x || 0, a = r.y || 0, o = r.width, s = r.height, l = {
      href: n,
      width: o,
      height: s
    };
    return i && (l.x = i), a && (l.y = a), cT(l, e.transform), lT(l, r, e, t), uT(l, e), t.animation && s0(e, l, t), _r("image", e.id + "", l);
  }
}
function Sue(e, t) {
  var r = e.style, n = r.text;
  if (n != null && (n += ""), !(!n || isNaN(r.x) || isNaN(r.y))) {
    var i = r.font || ns, a = r.x || 0, o = xte(r.y || 0, Ly(i), r.textBaseline), s = yte[r.textAlign] || r.textAlign, l = {
      "dominant-baseline": "central",
      "text-anchor": s
    };
    if (j9(r)) {
      var u = "", c = r.fontStyle, f = z9(r.fontSize);
      if (!parseFloat(f))
        return;
      var d = r.fontFamily || Ik, h = r.fontWeight;
      u += "font-size:" + f + ";font-family:" + d + ";", c && c !== "normal" && (u += "font-style:" + c + ";"), h && h !== "normal" && (u += "font-weight:" + h + ";"), l.style = u;
    } else
      l.style = "font: " + i;
    return n.match(/\s/) && (l["xml:space"] = "preserve"), a && (l.x = a), o && (l.y = o), cT(l, e.transform), lT(l, r, e, t), uT(l, e), t.animation && s0(e, l, t), _r("text", e.id + "", l, void 0, n);
  }
}
function g5(e, t) {
  if (e instanceof lt)
    return EO(e, t);
  if (e instanceof Ar)
    return _ue(e, t);
  if (e instanceof Rc)
    return Sue(e, t);
}
function Cue(e, t, r) {
  var n = e.style;
  if (bte(n)) {
    var i = wte(e), a = r.shadowCache, o = a[i];
    if (!o) {
      var s = e.getGlobalScale(), l = s[0], u = s[1];
      if (!l || !u)
        return;
      var c = n.shadowOffsetX || 0, f = n.shadowOffsetY || 0, d = n.shadowBlur, h = ph(n.shadowColor), p = h.opacity, v = h.color, g = d / 2 / l, m = d / 2 / u, y = g + " " + m;
      o = r.zrId + "-s" + r.shadowIdx++, r.defs[o] = _r("filter", o, {
        id: o,
        x: "-100%",
        y: "-100%",
        width: "300%",
        height: "300%"
      }, [
        _r("feDropShadow", "", {
          dx: c / l,
          dy: f / u,
          stdDeviation: y,
          "flood-color": v,
          "flood-opacity": p
        })
      ]), a[i] = o;
    }
    t.filter = Iy(o);
  }
}
function DO(e, t, r, n) {
  var i = e[r], a, o = {
    gradientUnits: i.global ? "userSpaceOnUse" : "objectBoundingBox"
  };
  if (n9(i))
    a = "linearGradient", o.x1 = i.x, o.y1 = i.y, o.x2 = i.x2, o.y2 = i.y2;
  else if (i9(i))
    a = "radialGradient", o.cx = Ge(i.x, 0.5), o.cy = Ge(i.y, 0.5), o.r = Ge(i.r, 0.5);
  else {
    process.env.NODE_ENV !== "production" && Kn("Illegal gradient type.");
    return;
  }
  for (var s = i.colorStops, l = [], u = 0, c = s.length; u < c; ++u) {
    var f = Y2(s[u].offset) * 100 + "%", d = s[u].color, h = ph(d), p = h.color, v = h.opacity, g = {
      offset: f
    };
    g["stop-color"] = p, v < 1 && (g["stop-opacity"] = v), l.push(_r("stop", u + "", g));
  }
  var m = _r(a, "", o, l), y = sT(m), b = n.gradientCache, w = b[y];
  w || (w = n.zrId + "-g" + n.gradientIdx++, b[y] = w, o.id = w, n.defs[w] = _r(a, w, o, l)), t[r] = Iy(w);
}
function NO(e, t, r, n) {
  var i = e.style[r], a = e.getBoundingRect(), o = {}, s = i.repeat, l = s === "no-repeat", u = s === "repeat-x", c = s === "repeat-y", f;
  if (r9(i)) {
    var d = i.imageWidth, h = i.imageHeight, p = void 0, v = i.image;
    if (ge(v) ? p = v : AO(v) ? p = v.src : MO(v) && (p = v.toDataURL()), typeof Image > "u") {
      var g = "Image width/height must been given explictly in svg-ssr renderer.";
      Le(d, g), Le(h, g);
    } else if (d == null || h == null) {
      var m = function(D, N) {
        if (D) {
          var R = D.elm, O = d || N.width, E = h || N.height;
          D.tag === "pattern" && (u ? (E = 1, O /= a.width) : c && (O = 1, E /= a.height)), D.attrs.width = O, D.attrs.height = E, R && (R.setAttribute("width", O), R.setAttribute("height", E));
        }
      }, y = lC(p, null, e, function(D) {
        l || m(S, D), m(f, D);
      });
      y && y.width && y.height && (d = d || y.width, h = h || y.height);
    }
    f = _r("image", "img", {
      href: p,
      width: d,
      height: h
    }), o.width = d, o.height = h;
  } else i.svgElement && (f = ze(i.svgElement), o.width = i.svgWidth, o.height = i.svgHeight);
  if (f) {
    var b, w;
    l ? b = w = 1 : u ? (w = 1, b = o.width / a.width) : c ? (b = 1, w = o.height / a.height) : o.patternUnits = "userSpaceOnUse", b != null && !isNaN(b) && (o.width = b), w != null && !isNaN(w) && (o.height = w);
    var _ = s9(i);
    _ && (o.patternTransform = _);
    var S = _r("pattern", "", o, [f]), C = sT(S), A = n.patternCache, M = A[C];
    M || (M = n.zrId + "-p" + n.patternIdx++, A[C] = M, o.id = M, S = n.defs[M] = _r("pattern", M, o, [f])), t[r] = Iy(M);
  }
}
function Tue(e, t, r) {
  var n = r.clipPathCache, i = r.defs, a = n[e.id];
  if (!a) {
    a = r.zrId + "-c" + r.clipPathIdx++;
    var o = {
      id: a
    };
    n[e.id] = a, i[a] = _r("clipPath", a, o, [EO(e, r)]);
  }
  t["clip-path"] = Iy(a);
}
function m5(e) {
  return document.createTextNode(e);
}
function tl(e, t, r) {
  e.insertBefore(t, r);
}
function y5(e, t) {
  e.removeChild(t);
}
function x5(e, t) {
  e.appendChild(t);
}
function IO(e) {
  return e.parentNode;
}
function LO(e) {
  return e.nextSibling;
}
function Sx(e, t) {
  e.textContent = t;
}
var b5 = 58, Aue = 120, Mue = _r("", "");
function Bw(e) {
  return e === void 0;
}
function Gi(e) {
  return e !== void 0;
}
function Eue(e, t, r) {
  for (var n = {}, i = t; i <= r; ++i) {
    var a = e[i].key;
    a !== void 0 && (process.env.NODE_ENV !== "production" && n[a] != null && console.error("Duplicate key " + a), n[a] = i);
  }
  return n;
}
function _d(e, t) {
  var r = e.key === t.key, n = e.tag === t.tag;
  return n && r;
}
function Th(e) {
  var t, r = e.children, n = e.tag;
  if (Gi(n)) {
    var i = e.elm = SO(n);
    if (fT(Mue, e), le(r))
      for (t = 0; t < r.length; ++t) {
        var a = r[t];
        a != null && x5(i, Th(a));
      }
    else Gi(e.text) && !Ne(e.text) && x5(i, m5(e.text));
  } else
    e.elm = m5(e.text);
  return e.elm;
}
function RO(e, t, r, n, i) {
  for (; n <= i; ++n) {
    var a = r[n];
    a != null && tl(e, Th(a), t);
  }
}
function Am(e, t, r, n) {
  for (; r <= n; ++r) {
    var i = t[r];
    if (i != null)
      if (Gi(i.tag)) {
        var a = IO(i.elm);
        y5(a, i.elm);
      } else
        y5(e, i.elm);
  }
}
function fT(e, t) {
  var r, n = t.elm, i = e && e.attrs || {}, a = t.attrs || {};
  if (i !== a) {
    for (r in a) {
      var o = a[r], s = i[r];
      s !== o && (o === !0 ? n.setAttribute(r, "") : o === !1 ? n.removeAttribute(r) : r === "style" ? n.style.cssText = o : r.charCodeAt(0) !== Aue ? n.setAttribute(r, o) : r === "xmlns:xlink" || r === "xmlns" ? n.setAttributeNS(sue, r, o) : r.charCodeAt(3) === b5 ? n.setAttributeNS(lue, r, o) : r.charCodeAt(5) === b5 ? n.setAttributeNS(_O, r, o) : n.setAttribute(r, o));
    }
    for (r in i)
      r in a || n.removeAttribute(r);
  }
}
function Due(e, t, r) {
  for (var n = 0, i = 0, a = t.length - 1, o = t[0], s = t[a], l = r.length - 1, u = r[0], c = r[l], f, d, h, p; n <= a && i <= l; )
    o == null ? o = t[++n] : s == null ? s = t[--a] : u == null ? u = r[++i] : c == null ? c = r[--l] : _d(o, u) ? (Xu(o, u), o = t[++n], u = r[++i]) : _d(s, c) ? (Xu(s, c), s = t[--a], c = r[--l]) : _d(o, c) ? (Xu(o, c), tl(e, o.elm, LO(s.elm)), o = t[++n], c = r[--l]) : _d(s, u) ? (Xu(s, u), tl(e, s.elm, o.elm), s = t[--a], u = r[++i]) : (Bw(f) && (f = Eue(t, n, a)), d = f[u.key], Bw(d) ? tl(e, Th(u), o.elm) : (h = t[d], h.tag !== u.tag ? tl(e, Th(u), o.elm) : (Xu(h, u), t[d] = void 0, tl(e, h.elm, o.elm))), u = r[++i]);
  (n <= a || i <= l) && (n > a ? (p = r[l + 1] == null ? null : r[l + 1].elm, RO(e, p, r, i, l)) : Am(e, t, n, a));
}
function Xu(e, t) {
  var r = t.elm = e.elm, n = e.children, i = t.children;
  e !== t && (fT(e, t), Bw(t.text) ? Gi(n) && Gi(i) ? n !== i && Due(r, n, i) : Gi(i) ? (Gi(e.text) && Sx(r, ""), RO(r, null, i, 0, i.length - 1)) : Gi(n) ? Am(r, n, 0, n.length - 1) : Gi(e.text) && Sx(r, "") : e.text !== t.text && (Gi(n) && Am(r, n, 0, n.length - 1), Sx(r, t.text)));
}
function Nue(e, t) {
  if (_d(e, t))
    Xu(e, t);
  else {
    var r = e.elm, n = IO(r);
    Th(t), n !== null && (tl(n, t.elm, LO(r)), Am(n, [e], 0, 0));
  }
  return t;
}
var Iue = 0, Lue = function() {
  function e(t, r, n) {
    if (this.type = "svg", this.refreshHover = w5("refreshHover"), this.configLayer = w5("configLayer"), this.storage = r, this._opts = n = ae({}, n), this.root = t, this._id = "zr" + Iue++, this._oldVNode = u5(n.width, n.height), t && !n.ssr) {
      var i = this._viewport = document.createElement("div");
      i.style.cssText = "position:relative;overflow:hidden";
      var a = this._svgDom = this._oldVNode.elm = SO("svg");
      fT(null, this._oldVNode), i.appendChild(a), t.appendChild(i);
    }
    this.resize(n.width, n.height);
  }
  return e.prototype.getType = function() {
    return this.type;
  }, e.prototype.getViewportRoot = function() {
    return this._viewport;
  }, e.prototype.getViewportRootOffset = function() {
    var t = this.getViewportRoot();
    if (t)
      return {
        offsetLeft: t.offsetLeft || 0,
        offsetTop: t.offsetTop || 0
      };
  }, e.prototype.getSvgDom = function() {
    return this._svgDom;
  }, e.prototype.refresh = function() {
    if (this.root) {
      var t = this.renderToVNode({
        willUpdate: !0
      });
      t.attrs.style = "position:absolute;left:0;top:0;user-select:none", Nue(this._oldVNode, t), this._oldVNode = t;
    }
  }, e.prototype.renderOneToVNode = function(t) {
    return g5(t, Vw(this._id));
  }, e.prototype.renderToVNode = function(t) {
    t = t || {};
    var r = this.storage.getDisplayList(!0), n = this._width, i = this._height, a = Vw(this._id);
    a.animation = t.animation, a.willUpdate = t.willUpdate, a.compress = t.compress, a.emphasis = t.emphasis, a.ssr = this._opts.ssr;
    var o = [], s = this._bgVNode = Rue(n, i, this._backgroundColor, a);
    s && o.push(s);
    var l = t.compress ? null : this._mainVNode = _r("g", "main", {}, []);
    this._paintList(r, a, l ? l.children : o), l && o.push(l);
    var u = ue(ut(a.defs), function(d) {
      return a.defs[d];
    });
    if (u.length && o.push(_r("defs", "defs", {}, u)), t.animation) {
      var c = fue(a.cssNodes, a.cssAnims, { newline: !0 });
      if (c) {
        var f = _r("style", "stl", {}, [], c);
        o.push(f);
      }
    }
    return u5(n, i, o, t.useViewBox);
  }, e.prototype.renderToString = function(t) {
    return t = t || {}, sT(this.renderToVNode({
      animation: Ge(t.cssAnimation, !0),
      emphasis: Ge(t.cssEmphasis, !0),
      willUpdate: !1,
      compress: !0,
      useViewBox: Ge(t.useViewBox, !0)
    }), { newline: !0 });
  }, e.prototype.setBackgroundColor = function(t) {
    this._backgroundColor = t;
  }, e.prototype.getSvgRoot = function() {
    return this._mainVNode && this._mainVNode.elm;
  }, e.prototype._paintList = function(t, r, n) {
    for (var i = t.length, a = [], o = 0, s, l, u = 0, c = 0; c < i; c++) {
      var f = t[c];
      if (!f.invisible) {
        var d = f.__clipPaths, h = d && d.length || 0, p = l && l.length || 0, v = void 0;
        for (v = Math.max(h - 1, p - 1); v >= 0 && !(d && l && d[v] === l[v]); v--)
          ;
        for (var g = p - 1; g > v; g--)
          o--, s = a[o - 1];
        for (var m = v + 1; m < h; m++) {
          var y = {};
          Tue(d[m], y, r);
          var b = _r("g", "clip-g-" + u++, y, []);
          (s ? s.children : n).push(b), a[o++] = b, s = b;
        }
        l = d;
        var w = g5(f, r);
        w && (s ? s.children : n).push(w);
      }
    }
  }, e.prototype.resize = function(t, r) {
    var n = this._opts, i = this.root, a = this._viewport;
    if (t != null && (n.width = t), r != null && (n.height = r), i && a && (a.style.display = "none", t = nc(i, 0, n), r = nc(i, 1, n), a.style.display = ""), this._width !== t || this._height !== r) {
      if (this._width = t, this._height = r, a) {
        var o = a.style;
        o.width = t + "px", o.height = r + "px";
      }
      if (eC(this._backgroundColor))
        this.refresh();
      else {
        var s = this._svgDom;
        s && (s.setAttribute("width", t), s.setAttribute("height", r));
        var l = this._bgVNode && this._bgVNode.elm;
        l && (l.setAttribute("width", t), l.setAttribute("height", r));
      }
    }
  }, e.prototype.getWidth = function() {
    return this._width;
  }, e.prototype.getHeight = function() {
    return this._height;
  }, e.prototype.dispose = function() {
    this.root && (this.root.innerHTML = ""), this._svgDom = this._viewport = this.storage = this._oldVNode = this._bgVNode = this._mainVNode = null;
  }, e.prototype.clear = function() {
    this._svgDom && (this._svgDom.innerHTML = null), this._oldVNode = null;
  }, e.prototype.toDataURL = function(t) {
    var r = this.renderToString(), n = "data:image/svg+xml;";
    return t ? (r = Ste(r), r && n + "base64," + r) : n + "charset=UTF-8," + encodeURIComponent(r);
  }, e;
}();
function w5(e) {
  return function() {
    process.env.NODE_ENV !== "production" && Kn('In SVG mode painter not support method "' + e + '"');
  };
}
function Rue(e, t, r, n) {
  var i;
  if (r && r !== "none")
    if (i = _r("rect", "bg", {
      width: e,
      height: t,
      x: "0",
      y: "0"
    }), a9(r))
      DO({ fill: r }, i.attrs, "fill", n);
    else if (eC(r))
      NO({
        style: {
          fill: r
        },
        dirty: rr,
        getBoundingRect: function() {
          return { width: e, height: t };
        }
      }, i.attrs, "fill", n);
    else {
      var a = ph(r), o = a.color, s = a.opacity;
      i.attrs.fill = o, s < 1 && (i.attrs["fill-opacity"] = s);
    }
  return i;
}
function Pue(e) {
  e.registerPainter("svg", Lue);
}
function _5(e, t, r) {
  var n = Di.createCanvas(), i = t.getWidth(), a = t.getHeight(), o = n.style;
  return o && (o.position = "absolute", o.left = "0", o.top = "0", o.width = i + "px", o.height = a + "px", n.setAttribute("data-zr-dom-id", e)), n.width = i * r, n.height = a * r, n;
}
var Cx = function(e) {
  Ut(t, e);
  function t(r, n, i) {
    var a = e.call(this) || this;
    a.motionBlur = !1, a.lastFrameAlpha = 0.7, a.dpr = 1, a.virtual = !1, a.config = {}, a.incremental = !1, a.zlevel = 0, a.maxRepaintRectCount = 5, a.__dirty = !0, a.__firstTimePaint = !0, a.__used = !1, a.__drawIndex = 0, a.__startIndex = 0, a.__endIndex = 0, a.__prevStartIndex = null, a.__prevEndIndex = null;
    var o;
    i = i || em, typeof r == "string" ? o = _5(r, n, i) : Ne(r) && (o = r, r = o.id), a.id = r, a.dom = o;
    var s = o.style;
    return s && (XS(o), o.onselectstart = function() {
      return !1;
    }, s.padding = "0", s.margin = "0", s.borderWidth = "0"), a.painter = n, a.dpr = i, a;
  }
  return t.prototype.getElementCount = function() {
    return this.__endIndex - this.__startIndex;
  }, t.prototype.afterBrush = function() {
    this.__prevStartIndex = this.__startIndex, this.__prevEndIndex = this.__endIndex;
  }, t.prototype.initContext = function() {
    this.ctx = this.dom.getContext("2d"), this.ctx.dpr = this.dpr;
  }, t.prototype.setUnpainted = function() {
    this.__firstTimePaint = !0;
  }, t.prototype.createBackBuffer = function() {
    var r = this.dpr;
    this.domBack = _5("back-" + this.id, this.painter, r), this.ctxBack = this.domBack.getContext("2d"), r !== 1 && this.ctxBack.scale(r, r);
  }, t.prototype.createRepaintRects = function(r, n, i, a) {
    if (this.__firstTimePaint)
      return this.__firstTimePaint = !1, null;
    var o = [], s = this.maxRepaintRectCount, l = !1, u = new tt(0, 0, 0, 0);
    function c(y) {
      if (!(!y.isFinite() || y.isZero()))
        if (o.length === 0) {
          var b = new tt(0, 0, 0, 0);
          b.copy(y), o.push(b);
        } else {
          for (var w = !1, _ = 1 / 0, S = 0, C = 0; C < o.length; ++C) {
            var A = o[C];
            if (A.intersect(y)) {
              var M = new tt(0, 0, 0, 0);
              M.copy(A), M.union(y), o[C] = M, w = !0;
              break;
            } else if (l) {
              u.copy(y), u.union(A);
              var D = y.width * y.height, N = A.width * A.height, R = u.width * u.height, O = R - D - N;
              O < _ && (_ = O, S = C);
            }
          }
          if (l && (o[S].union(y), w = !0), !w) {
            var b = new tt(0, 0, 0, 0);
            b.copy(y), o.push(b);
          }
          l || (l = o.length >= s);
        }
    }
    for (var f = this.__startIndex; f < this.__endIndex; ++f) {
      var d = r[f];
      if (d) {
        var h = d.shouldBePainted(i, a, !0, !0), p = d.__isRendered && (d.__dirty & Cn || !h) ? d.getPrevPaintRect() : null;
        p && c(p);
        var v = h && (d.__dirty & Cn || !d.__isRendered) ? d.getPaintRect() : null;
        v && c(v);
      }
    }
    for (var f = this.__prevStartIndex; f < this.__prevEndIndex; ++f) {
      var d = n[f], h = d && d.shouldBePainted(i, a, !0, !0);
      if (d && (!h || !d.__zr) && d.__isRendered) {
        var p = d.getPrevPaintRect();
        p && c(p);
      }
    }
    var g;
    do {
      g = !1;
      for (var f = 0; f < o.length; ) {
        if (o[f].isZero()) {
          o.splice(f, 1);
          continue;
        }
        for (var m = f + 1; m < o.length; )
          o[f].intersect(o[m]) ? (g = !0, o[f].union(o[m]), o.splice(m, 1)) : m++;
        f++;
      }
    } while (g);
    return this._paintRects = o, o;
  }, t.prototype.debugGetPaintRects = function() {
    return (this._paintRects || []).slice();
  }, t.prototype.resize = function(r, n) {
    var i = this.dpr, a = this.dom, o = a.style, s = this.domBack;
    o && (o.width = r + "px", o.height = n + "px"), a.width = r * i, a.height = n * i, s && (s.width = r * i, s.height = n * i, i !== 1 && this.ctxBack.scale(i, i));
  }, t.prototype.clear = function(r, n, i) {
    var a = this.dom, o = this.ctx, s = a.width, l = a.height;
    n = n || this.clearColor;
    var u = this.motionBlur && !r, c = this.lastFrameAlpha, f = this.dpr, d = this;
    u && (this.domBack || this.createBackBuffer(), this.ctxBack.globalCompositeOperation = "copy", this.ctxBack.drawImage(a, 0, 0, s / f, l / f));
    var h = this.domBack;
    function p(v, g, m, y) {
      if (o.clearRect(v, g, m, y), n && n !== "transparent") {
        var b = void 0;
        if (Zh(n)) {
          var w = n.global || n.__width === m && n.__height === y;
          b = w && n.__canvasGradient || Dw(o, n, {
            x: 0,
            y: 0,
            width: m,
            height: y
          }), n.__canvasGradient = b, n.__width = m, n.__height = y;
        } else Ok(n) && (n.scaleX = n.scaleX || f, n.scaleY = n.scaleY || f, b = Nw(o, n, {
          dirty: function() {
            d.setUnpainted(), d.painter.refresh();
          }
        }));
        o.save(), o.fillStyle = b || n, o.fillRect(v, g, m, y), o.restore();
      }
      u && (o.save(), o.globalAlpha = c, o.drawImage(h, v, g, m, y), o.restore());
    }
    !i || u ? p(0, 0, s, l) : i.length && j(i, function(v) {
      p(v.x * f, v.y * f, v.width * f, v.height * f);
    });
  }, t;
}(ai), S5 = 1e5, Gs = 314159, bv = 0.01, kue = 1e-3;
function Oue(e) {
  return e ? e.__builtin__ ? !0 : !(typeof e.resize != "function" || typeof e.refresh != "function") : !1;
}
function zue(e, t) {
  var r = document.createElement("div");
  return r.style.cssText = [
    "position:relative",
    "width:" + e + "px",
    "height:" + t + "px",
    "padding:0",
    "margin:0",
    "border-width:0"
  ].join(";") + ";", r;
}
var jue = function() {
  function e(t, r, n, i) {
    this.type = "canvas", this._zlevelList = [], this._prevDisplayList = [], this._layers = {}, this._layerConfig = {}, this._needsManuallyCompositing = !1, this.type = "canvas";
    var a = !t.nodeName || t.nodeName.toUpperCase() === "CANVAS";
    this._opts = n = ae({}, n || {}), this.dpr = n.devicePixelRatio || em, this._singleCanvas = a, this.root = t;
    var o = t.style;
    o && (XS(t), t.innerHTML = ""), this.storage = r;
    var s = this._zlevelList;
    this._prevDisplayList = [];
    var l = this._layers;
    if (a) {
      var c = t, f = c.width, d = c.height;
      n.width != null && (f = n.width), n.height != null && (d = n.height), this.dpr = n.devicePixelRatio || 1, c.width = f * this.dpr, c.height = d * this.dpr, this._width = f, this._height = d;
      var h = new Cx(c, this, this.dpr);
      h.__builtin__ = !0, h.initContext(), l[Gs] = h, h.zlevel = Gs, s.push(Gs), this._domRoot = t;
    } else {
      this._width = nc(t, 0, n), this._height = nc(t, 1, n);
      var u = this._domRoot = zue(this._width, this._height);
      t.appendChild(u);
    }
  }
  return e.prototype.getType = function() {
    return "canvas";
  }, e.prototype.isSingleCanvas = function() {
    return this._singleCanvas;
  }, e.prototype.getViewportRoot = function() {
    return this._domRoot;
  }, e.prototype.getViewportRootOffset = function() {
    var t = this.getViewportRoot();
    if (t)
      return {
        offsetLeft: t.offsetLeft || 0,
        offsetTop: t.offsetTop || 0
      };
  }, e.prototype.refresh = function(t) {
    var r = this.storage.getDisplayList(!0), n = this._prevDisplayList, i = this._zlevelList;
    this._redrawId = Math.random(), this._paintList(r, n, t, this._redrawId);
    for (var a = 0; a < i.length; a++) {
      var o = i[a], s = this._layers[o];
      if (!s.__builtin__ && s.refresh) {
        var l = a === 0 ? this._backgroundColor : null;
        s.refresh(l);
      }
    }
    return this._opts.useDirtyRect && (this._prevDisplayList = r.slice()), this;
  }, e.prototype.refreshHover = function() {
    this._paintHoverList(this.storage.getDisplayList(!1));
  }, e.prototype._paintHoverList = function(t) {
    var r = t.length, n = this._hoverlayer;
    if (n && n.clear(), !!r) {
      for (var i = {
        inHover: !0,
        viewWidth: this._width,
        viewHeight: this._height
      }, a, o = 0; o < r; o++) {
        var s = t[o];
        s.__inHover && (n || (n = this._hoverlayer = this.getLayer(S5)), a || (a = n.ctx, a.save()), gl(a, s, i, o === r - 1));
      }
      a && a.restore();
    }
  }, e.prototype.getHoverLayer = function() {
    return this.getLayer(S5);
  }, e.prototype.paintOne = function(t, r) {
    $C(t, r);
  }, e.prototype._paintList = function(t, r, n, i) {
    if (this._redrawId === i) {
      n = n || !1, this._updateLayerStatus(t);
      var a = this._doPaintList(t, r, n), o = a.finished, s = a.needsRefreshHover;
      if (this._needsManuallyCompositing && this._compositeManually(), s && this._paintHoverList(t), o)
        this.eachLayer(function(u) {
          u.afterBrush && u.afterBrush();
        });
      else {
        var l = this;
        Zg(function() {
          l._paintList(t, r, n, i);
        });
      }
    }
  }, e.prototype._compositeManually = function() {
    var t = this.getLayer(Gs).ctx, r = this._domRoot.width, n = this._domRoot.height;
    t.clearRect(0, 0, r, n), this.eachBuiltinLayer(function(i) {
      i.virtual && t.drawImage(i.dom, 0, 0, r, n);
    });
  }, e.prototype._doPaintList = function(t, r, n) {
    for (var i = this, a = [], o = this._opts.useDirtyRect, s = 0; s < this._zlevelList.length; s++) {
      var l = this._zlevelList[s], u = this._layers[l];
      u.__builtin__ && u !== this._hoverlayer && (u.__dirty || n) && a.push(u);
    }
    for (var c = !0, f = !1, d = function(v) {
      var g = a[v], m = g.ctx, y = o && g.createRepaintRects(t, r, h._width, h._height), b = n ? g.__startIndex : g.__drawIndex, w = !n && g.incremental && Date.now, _ = w && Date.now(), S = g.zlevel === h._zlevelList[0] ? h._backgroundColor : null;
      if (g.__startIndex === g.__endIndex)
        g.clear(!1, S, y);
      else if (b === g.__startIndex) {
        var C = t[b];
        (!C.incremental || !C.notClear || n) && g.clear(!1, S, y);
      }
      b === -1 && (console.error("For some unknown reason. drawIndex is -1"), b = g.__startIndex);
      var A, M = function(O) {
        var E = {
          inHover: !1,
          allClipped: !1,
          prevEl: null,
          viewWidth: i._width,
          viewHeight: i._height
        };
        for (A = b; A < g.__endIndex; A++) {
          var L = t[A];
          if (L.__inHover && (f = !0), i._doPaintEl(L, g, o, O, E, A === g.__endIndex - 1), w) {
            var I = Date.now() - _;
            if (I > 15)
              break;
          }
        }
        E.prevElClipPaths && m.restore();
      };
      if (y)
        if (y.length === 0)
          A = g.__endIndex;
        else
          for (var D = h.dpr, N = 0; N < y.length; ++N) {
            var R = y[N];
            m.save(), m.beginPath(), m.rect(R.x * D, R.y * D, R.width * D, R.height * D), m.clip(), M(R), m.restore();
          }
      else
        m.save(), M(), m.restore();
      g.__drawIndex = A, g.__drawIndex < g.__endIndex && (c = !1);
    }, h = this, p = 0; p < a.length; p++)
      d(p);
    return st.wxa && j(this._layers, function(v) {
      v && v.ctx && v.ctx.draw && v.ctx.draw();
    }), {
      finished: c,
      needsRefreshHover: f
    };
  }, e.prototype._doPaintEl = function(t, r, n, i, a, o) {
    var s = r.ctx;
    if (n) {
      var l = t.getPaintRect();
      (!i || l && l.intersect(i)) && (gl(s, t, a, o), t.setPrevPaintRect(l));
    } else
      gl(s, t, a, o);
  }, e.prototype.getLayer = function(t, r) {
    this._singleCanvas && !this._needsManuallyCompositing && (t = Gs);
    var n = this._layers[t];
    return n || (n = new Cx("zr_" + t, this, this.dpr), n.zlevel = t, n.__builtin__ = !0, this._layerConfig[t] ? Xe(n, this._layerConfig[t], !0) : this._layerConfig[t - bv] && Xe(n, this._layerConfig[t - bv], !0), r && (n.virtual = r), this.insertLayer(t, n), n.initContext()), n;
  }, e.prototype.insertLayer = function(t, r) {
    var n = this._layers, i = this._zlevelList, a = i.length, o = this._domRoot, s = null, l = -1;
    if (n[t]) {
      process.env.NODE_ENV !== "production" && Kn("ZLevel " + t + " has been used already");
      return;
    }
    if (!Oue(r)) {
      process.env.NODE_ENV !== "production" && Kn("Layer of zlevel " + t + " is not valid");
      return;
    }
    if (a > 0 && t > i[0]) {
      for (l = 0; l < a - 1 && !(i[l] < t && i[l + 1] > t); l++)
        ;
      s = n[i[l]];
    }
    if (i.splice(l + 1, 0, t), n[t] = r, !r.virtual)
      if (s) {
        var u = s.dom;
        u.nextSibling ? o.insertBefore(r.dom, u.nextSibling) : o.appendChild(r.dom);
      } else
        o.firstChild ? o.insertBefore(r.dom, o.firstChild) : o.appendChild(r.dom);
    r.painter || (r.painter = this);
  }, e.prototype.eachLayer = function(t, r) {
    for (var n = this._zlevelList, i = 0; i < n.length; i++) {
      var a = n[i];
      t.call(r, this._layers[a], a);
    }
  }, e.prototype.eachBuiltinLayer = function(t, r) {
    for (var n = this._zlevelList, i = 0; i < n.length; i++) {
      var a = n[i], o = this._layers[a];
      o.__builtin__ && t.call(r, o, a);
    }
  }, e.prototype.eachOtherLayer = function(t, r) {
    for (var n = this._zlevelList, i = 0; i < n.length; i++) {
      var a = n[i], o = this._layers[a];
      o.__builtin__ || t.call(r, o, a);
    }
  }, e.prototype.getLayers = function() {
    return this._layers;
  }, e.prototype._updateLayerStatus = function(t) {
    this.eachBuiltinLayer(function(f, d) {
      f.__dirty = f.__used = !1;
    });
    function r(f) {
      a && (a.__endIndex !== f && (a.__dirty = !0), a.__endIndex = f);
    }
    if (this._singleCanvas)
      for (var n = 1; n < t.length; n++) {
        var i = t[n];
        if (i.zlevel !== t[n - 1].zlevel || i.incremental) {
          this._needsManuallyCompositing = !0;
          break;
        }
      }
    var a = null, o = 0, s, l;
    for (l = 0; l < t.length; l++) {
      var i = t[l], u = i.zlevel, c = void 0;
      s !== u && (s = u, o = 0), i.incremental ? (c = this.getLayer(u + kue, this._needsManuallyCompositing), c.incremental = !0, o = 1) : c = this.getLayer(u + (o > 0 ? bv : 0), this._needsManuallyCompositing), c.__builtin__ || Kn("ZLevel " + u + " has been used by unkown layer " + c.id), c !== a && (c.__used = !0, c.__startIndex !== l && (c.__dirty = !0), c.__startIndex = l, c.incremental ? c.__drawIndex = -1 : c.__drawIndex = l, r(l), a = c), i.__dirty & Cn && !i.__inHover && (c.__dirty = !0, c.incremental && c.__drawIndex < 0 && (c.__drawIndex = l));
    }
    r(l), this.eachBuiltinLayer(function(f, d) {
      !f.__used && f.getElementCount() > 0 && (f.__dirty = !0, f.__startIndex = f.__endIndex = f.__drawIndex = 0), f.__dirty && f.__drawIndex < 0 && (f.__drawIndex = f.__startIndex);
    });
  }, e.prototype.clear = function() {
    return this.eachBuiltinLayer(this._clearLayer), this;
  }, e.prototype._clearLayer = function(t) {
    t.clear();
  }, e.prototype.setBackgroundColor = function(t) {
    this._backgroundColor = t, j(this._layers, function(r) {
      r.setUnpainted();
    });
  }, e.prototype.configLayer = function(t, r) {
    if (r) {
      var n = this._layerConfig;
      n[t] ? Xe(n[t], r, !0) : n[t] = r;
      for (var i = 0; i < this._zlevelList.length; i++) {
        var a = this._zlevelList[i];
        if (a === t || a === t + bv) {
          var o = this._layers[a];
          Xe(o, n[t], !0);
        }
      }
    }
  }, e.prototype.delLayer = function(t) {
    var r = this._layers, n = this._zlevelList, i = r[t];
    i && (i.dom.parentNode.removeChild(i.dom), delete r[t], n.splice(rt(n, t), 1));
  }, e.prototype.resize = function(t, r) {
    if (this._domRoot.style) {
      var n = this._domRoot;
      n.style.display = "none";
      var i = this._opts, a = this.root;
      if (t != null && (i.width = t), r != null && (i.height = r), t = nc(a, 0, i), r = nc(a, 1, i), n.style.display = "", this._width !== t || r !== this._height) {
        n.style.width = t + "px", n.style.height = r + "px";
        for (var o in this._layers)
          this._layers.hasOwnProperty(o) && this._layers[o].resize(t, r);
        this.refresh(!0);
      }
      this._width = t, this._height = r;
    } else {
      if (t == null || r == null)
        return;
      this._width = t, this._height = r, this.getLayer(Gs).resize(t, r);
    }
    return this;
  }, e.prototype.clearLayer = function(t) {
    var r = this._layers[t];
    r && r.clear();
  }, e.prototype.dispose = function() {
    this.root.innerHTML = "", this.root = this.storage = this._domRoot = this._layers = null;
  }, e.prototype.getRenderedCanvas = function(t) {
    if (t = t || {}, this._singleCanvas && !this._compositeManually)
      return this._layers[Gs].dom;
    var r = new Cx("image", this, t.pixelRatio || this.dpr);
    r.initContext(), r.clear(!1, t.backgroundColor || this._backgroundColor);
    var n = r.ctx;
    if (t.pixelRatio <= this.dpr) {
      this.refresh();
      var i = r.dom.width, a = r.dom.height;
      this.eachLayer(function(f) {
        f.__builtin__ ? n.drawImage(f.dom, 0, 0, i, a) : f.renderToCanvas && (n.save(), f.renderToCanvas(n), n.restore());
      });
    } else
      for (var o = {
        inHover: !1,
        viewWidth: this._width,
        viewHeight: this._height
      }, s = this.storage.getDisplayList(!0), l = 0, u = s.length; l < u; l++) {
        var c = s[l];
        gl(n, c, o, l === u - 1);
      }
    return r.dom;
  }, e.prototype.getWidth = function() {
    return this._width;
  }, e.prototype.getHeight = function() {
    return this._height;
  }, e;
}();
function Vue(e) {
  e.registerPainter("canvas", jue);
}
var Bue = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r;
    }
    return t.prototype.getInitialData = function(r) {
      if (process.env.NODE_ENV !== "production") {
        var n = r.coordinateSystem;
        if (n !== "polar" && n !== "cartesian2d")
          throw new Error("Line not support coordinateSystem besides cartesian and polar");
      }
      return pa(null, this, {
        useEncodeDefaulter: !0
      });
    }, t.prototype.getLegendIcon = function(r) {
      var n = new Fe(), i = fr("line", 0, r.itemHeight / 2, r.itemWidth, 0, r.lineStyle.stroke, !1);
      n.add(i), i.setStyle(r.lineStyle);
      var a = this.getData().getVisual("symbol"), o = this.getData().getVisual("symbolRotate"), s = a === "none" ? "circle" : a, l = r.itemHeight * 0.8, u = fr(s, (r.itemWidth - l) / 2, (r.itemHeight - l) / 2, l, l, r.itemStyle.fill);
      n.add(u), u.setStyle(r.itemStyle);
      var c = r.iconRotate === "inherit" ? o : r.iconRotate || 0;
      return u.rotation = c * Math.PI / 180, u.setOrigin([r.itemWidth / 2, r.itemHeight / 2]), s.indexOf("empty") > -1 && (u.style.stroke = u.style.fill, u.style.fill = "#fff", u.style.lineWidth = 2), n;
    }, t.type = "series.line", t.dependencies = ["grid", "polar"], t.defaultOption = {
      // zlevel: 0,
      z: 3,
      coordinateSystem: "cartesian2d",
      legendHoverLink: !0,
      clip: !0,
      label: {
        position: "top"
      },
      // itemStyle: {
      // },
      endLabel: {
        show: !1,
        valueAnimation: !0,
        distance: 8
      },
      lineStyle: {
        width: 2,
        type: "solid"
      },
      emphasis: {
        scale: !0
      },
      // areaStyle: {
      // origin of areaStyle. Valid values:
      // `'auto'/null/undefined`: from axisLine to data
      // `'start'`: from min to data
      // `'end'`: from data to max
      // origin: 'auto'
      // },
      // false, 'start', 'end', 'middle'
      step: !1,
      // Disabled if step is true
      smooth: !1,
      smoothMonotone: null,
      symbol: "emptyCircle",
      symbolSize: 4,
      symbolRotate: null,
      showSymbol: !0,
      // `false`: follow the label interval strategy.
      // `true`: show all symbols.
      // `'auto'`: If possible, show all symbols, otherwise
      //           follow the label interval strategy.
      showAllSymbol: "auto",
      // Whether to connect break point.
      connectNulls: !1,
      // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.
      sampling: "none",
      animationEasing: "linear",
      // Disable progressive
      progressive: 0,
      hoverLayerThreshold: 1 / 0,
      universalTransition: {
        divideShape: "clone"
      },
      triggerLineEvent: !1
    }, t;
  }(zt)
);
function zc(e, t) {
  var r = e.mapDimensionsAll("defaultedLabel"), n = r.length;
  if (n === 1) {
    var i = kc(e, t, r[0]);
    return i != null ? i + "" : null;
  } else if (n) {
    for (var a = [], o = 0; o < r.length; o++)
      a.push(kc(e, t, r[o]));
    return a.join(" ");
  }
}
function PO(e, t) {
  var r = e.mapDimensionsAll("defaultedLabel");
  if (!le(t))
    return t + "";
  for (var n = [], i = 0; i < r.length; i++) {
    var a = e.getDimensionIndex(r[i]);
    a >= 0 && n.push(t[a]);
  }
  return n.join(" ");
}
var up = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a) {
      var o = e.call(this) || this;
      return o.updateData(r, n, i, a), o;
    }
    return t.prototype._createSymbol = function(r, n, i, a, o) {
      this.removeAll();
      var s = fr(r, -1, -1, 2, 2, null, o);
      s.attr({
        z2: 100,
        culling: !0,
        scaleX: a[0] / 2,
        scaleY: a[1] / 2
      }), s.drift = Fue, this._symbolType = r, this.add(s);
    }, t.prototype.stopSymbolAnimation = function(r) {
      this.childAt(0).stopAnimation(null, r);
    }, t.prototype.getSymbolType = function() {
      return this._symbolType;
    }, t.prototype.getSymbolPath = function() {
      return this.childAt(0);
    }, t.prototype.highlight = function() {
      Ka(this.childAt(0));
    }, t.prototype.downplay = function() {
      qa(this.childAt(0));
    }, t.prototype.setZ = function(r, n) {
      var i = this.childAt(0);
      i.zlevel = r, i.z = n;
    }, t.prototype.setDraggable = function(r, n) {
      var i = this.childAt(0);
      i.draggable = r, i.cursor = !n && r ? "move" : i.cursor;
    }, t.prototype.updateData = function(r, n, i, a) {
      this.silent = !1;
      var o = r.getItemVisual(n, "symbol") || "circle", s = r.hostModel, l = t.getSymbolSize(r, n), u = o !== this._symbolType, c = a && a.disableAnimation;
      if (u) {
        var f = r.getItemVisual(n, "symbolKeepAspect");
        this._createSymbol(o, r, n, l, f);
      } else {
        var d = this.childAt(0);
        d.silent = !1;
        var h = {
          scaleX: l[0] / 2,
          scaleY: l[1] / 2
        };
        c ? d.attr(h) : _t(d, h, s, n), Li(d);
      }
      if (this._updateCommon(r, n, l, i, a), u) {
        var d = this.childAt(0);
        if (!c) {
          var h = {
            scaleX: this._sizeX,
            scaleY: this._sizeY,
            style: {
              // Always fadeIn. Because it has fadeOut animation when symbol is removed..
              opacity: d.style.opacity
            }
          };
          d.scaleX = d.scaleY = 0, d.style.opacity = 0, Wt(d, h, s, n);
        }
      }
      c && this.childAt(0).stopAnimation("leave");
    }, t.prototype._updateCommon = function(r, n, i, a, o) {
      var s = this.childAt(0), l = r.hostModel, u, c, f, d, h, p, v, g, m;
      if (a && (u = a.emphasisItemStyle, c = a.blurItemStyle, f = a.selectItemStyle, d = a.focus, h = a.blurScope, v = a.labelStatesModels, g = a.hoverScale, m = a.cursorStyle, p = a.emphasisDisabled), !a || r.hasItemOption) {
        var y = a && a.itemModel ? a.itemModel : r.getItemModel(n), b = y.getModel("emphasis");
        u = b.getModel("itemStyle").getItemStyle(), f = y.getModel(["select", "itemStyle"]).getItemStyle(), c = y.getModel(["blur", "itemStyle"]).getItemStyle(), d = b.get("focus"), h = b.get("blurScope"), p = b.get("disabled"), v = Cr(y), g = b.getShallow("scale"), m = y.getShallow("cursor");
      }
      var w = r.getItemVisual(n, "symbolRotate");
      s.attr("rotation", (w || 0) * Math.PI / 180 || 0);
      var _ = ql(r.getItemVisual(n, "symbolOffset"), i);
      _ && (s.x = _[0], s.y = _[1]), m && s.attr("cursor", m);
      var S = r.getItemVisual(n, "style"), C = S.fill;
      if (s instanceof Ar) {
        var A = s.style;
        s.useStyle(ae({
          // TODO other properties like x, y ?
          image: A.image,
          x: A.x,
          y: A.y,
          width: A.width,
          height: A.height
        }, S));
      } else
        s.__isEmptyBrush ? s.useStyle(ae({}, S)) : s.useStyle(S), s.style.decal = null, s.setColor(C, o && o.symbolInnerColor), s.style.strokeNoScale = !0;
      var M = r.getItemVisual(n, "liftZ"), D = this._z2;
      M != null ? D == null && (this._z2 = s.z2, s.z2 += M) : D != null && (s.z2 = D, this._z2 = null);
      var N = o && o.useNameLabel;
      Br(s, v, {
        labelFetcher: l,
        labelDataIndex: n,
        defaultText: R,
        inheritColor: C,
        defaultOpacity: S.opacity
      });
      function R(L) {
        return N ? r.getName(L) : zc(r, L);
      }
      this._sizeX = i[0] / 2, this._sizeY = i[1] / 2;
      var O = s.ensureState("emphasis");
      O.style = u, s.ensureState("select").style = f, s.ensureState("blur").style = c;
      var E = g == null || g === !0 ? Math.max(1.1, 3 / this._sizeY) : isFinite(g) && g > 0 ? +g : 1;
      O.scaleX = this._sizeX * E, O.scaleY = this._sizeY * E, this.setSymbolScale(1), Jt(this, d, h, p);
    }, t.prototype.setSymbolScale = function(r) {
      this.scaleX = this.scaleY = r;
    }, t.prototype.fadeOut = function(r, n, i) {
      var a = this.childAt(0), o = He(this).dataIndex, s = i && i.animation;
      if (this.silent = a.silent = !0, i && i.fadeLabel) {
        var l = a.getTextContent();
        l && ls(l, {
          style: {
            opacity: 0
          }
        }, n, {
          dataIndex: o,
          removeOpt: s,
          cb: function() {
            a.removeTextContent();
          }
        });
      } else
        a.removeTextContent();
      ls(a, {
        style: {
          opacity: 0
        },
        scaleX: 0,
        scaleY: 0
      }, n, {
        dataIndex: o,
        cb: r,
        removeOpt: s
      });
    }, t.getSymbolSize = function(r, n) {
      return mf(r.getItemVisual(n, "symbolSize"));
    }, t;
  }(Fe)
);
function Fue(e, t) {
  this.parent.drift(e, t);
}
function Tx(e, t, r, n) {
  return t && !isNaN(t[0]) && !isNaN(t[1]) && !(n.isIgnore && n.isIgnore(r)) && !(n.clipShape && !n.clipShape.contain(t[0], t[1])) && e.getItemVisual(r, "symbol") !== "none";
}
function C5(e) {
  return e != null && !Ne(e) && (e = {
    isIgnore: e
  }), e || {};
}
function T5(e) {
  var t = e.hostModel, r = t.getModel("emphasis");
  return {
    emphasisItemStyle: r.getModel("itemStyle").getItemStyle(),
    blurItemStyle: t.getModel(["blur", "itemStyle"]).getItemStyle(),
    selectItemStyle: t.getModel(["select", "itemStyle"]).getItemStyle(),
    focus: r.get("focus"),
    blurScope: r.get("blurScope"),
    emphasisDisabled: r.get("disabled"),
    hoverScale: r.get("scale"),
    labelStatesModels: Cr(t),
    cursorStyle: t.get("cursor")
  };
}
var cp = (
  /** @class */
  function() {
    function e(t) {
      this.group = new Fe(), this._SymbolCtor = t || up;
    }
    return e.prototype.updateData = function(t, r) {
      this._progressiveEls = null, r = C5(r);
      var n = this.group, i = t.hostModel, a = this._data, o = this._SymbolCtor, s = r.disableAnimation, l = T5(t), u = {
        disableAnimation: s
      }, c = r.getSymbolPoint || function(f) {
        return t.getItemLayout(f);
      };
      a || n.removeAll(), t.diff(a).add(function(f) {
        var d = c(f);
        if (Tx(t, d, f, r)) {
          var h = new o(t, f, l, u);
          h.setPosition(d), t.setItemGraphicEl(f, h), n.add(h);
        }
      }).update(function(f, d) {
        var h = a.getItemGraphicEl(d), p = c(f);
        if (!Tx(t, p, f, r)) {
          n.remove(h);
          return;
        }
        var v = t.getItemVisual(f, "symbol") || "circle", g = h && h.getSymbolType && h.getSymbolType();
        if (!h || g && g !== v)
          n.remove(h), h = new o(t, f, l, u), h.setPosition(p);
        else {
          h.updateData(t, f, l, u);
          var m = {
            x: p[0],
            y: p[1]
          };
          s ? h.attr(m) : _t(h, m, i);
        }
        n.add(h), t.setItemGraphicEl(f, h);
      }).remove(function(f) {
        var d = a.getItemGraphicEl(f);
        d && d.fadeOut(function() {
          n.remove(d);
        }, i);
      }).execute(), this._getSymbolPoint = c, this._data = t;
    }, e.prototype.updateLayout = function() {
      var t = this, r = this._data;
      r && r.eachItemGraphicEl(function(n, i) {
        var a = t._getSymbolPoint(i);
        n.setPosition(a), n.markRedraw();
      });
    }, e.prototype.incrementalPrepareUpdate = function(t) {
      this._seriesScope = T5(t), this._data = null, this.group.removeAll();
    }, e.prototype.incrementalUpdate = function(t, r, n) {
      this._progressiveEls = [], n = C5(n);
      function i(l) {
        l.isGroup || (l.incremental = !0, l.ensureState("emphasis").hoverLayer = !0);
      }
      for (var a = t.start; a < t.end; a++) {
        var o = r.getItemLayout(a);
        if (Tx(r, o, a, n)) {
          var s = new this._SymbolCtor(r, a, this._seriesScope);
          s.traverse(i), s.setPosition(o), this.group.add(s), r.setItemGraphicEl(a, s), this._progressiveEls.push(s);
        }
      }
    }, e.prototype.eachRendered = function(t) {
      gs(this._progressiveEls || this.group, t);
    }, e.prototype.remove = function(t) {
      var r = this.group, n = this._data;
      n && t ? n.eachItemGraphicEl(function(i) {
        i.fadeOut(function() {
          r.remove(i);
        }, n.hostModel);
      }) : r.removeAll();
    }, e;
  }()
);
function kO(e, t, r) {
  var n = e.getBaseAxis(), i = e.getOtherAxis(n), a = $ue(i, r), o = n.dim, s = i.dim, l = t.mapDimension(s), u = t.mapDimension(o), c = s === "x" || s === "radius" ? 1 : 0, f = ue(e.dimensions, function(p) {
    return t.mapDimension(p);
  }), d = !1, h = t.getCalculationInfo("stackResultDimension");
  return Qa(
    t,
    f[0]
    /* , dims[1] */
  ) && (d = !0, f[0] = h), Qa(
    t,
    f[1]
    /* , dims[0] */
  ) && (d = !0, f[1] = h), {
    dataDimsForPoint: f,
    valueStart: a,
    valueAxisDim: s,
    baseAxisDim: o,
    stacked: !!d,
    valueDim: l,
    baseDim: u,
    baseDataOffset: c,
    stackedOverDimension: t.getCalculationInfo("stackedOverDimension")
  };
}
function $ue(e, t) {
  var r = 0, n = e.scale.getExtent();
  return t === "start" ? r = n[0] : t === "end" ? r = n[1] : bt(t) && !isNaN(t) ? r = t : n[0] > 0 ? r = n[0] : n[1] < 0 && (r = n[1]), r;
}
function OO(e, t, r, n) {
  var i = NaN;
  e.stacked && (i = r.get(r.getCalculationInfo("stackedOverDimension"), n)), isNaN(i) && (i = e.valueStart);
  var a = e.baseDataOffset, o = [];
  return o[a] = r.get(e.baseDim, n), o[1 - a] = i, t.dataToPoint(o);
}
function Hue(e, t) {
  var r = [];
  return t.diff(e).add(function(n) {
    r.push({
      cmd: "+",
      idx: n
    });
  }).update(function(n, i) {
    r.push({
      cmd: "=",
      idx: i,
      idx1: n
    });
  }).remove(function(n) {
    r.push({
      cmd: "-",
      idx: n
    });
  }).execute(), r;
}
function Gue(e, t, r, n, i, a, o, s) {
  for (var l = Hue(e, t), u = [], c = [], f = [], d = [], h = [], p = [], v = [], g = kO(i, t, o), m = e.getLayout("points") || [], y = t.getLayout("points") || [], b = 0; b < l.length; b++) {
    var w = l[b], _ = !0, S = void 0, C = void 0;
    switch (w.cmd) {
      case "=":
        S = w.idx * 2, C = w.idx1 * 2;
        var A = m[S], M = m[S + 1], D = y[C], N = y[C + 1];
        (isNaN(A) || isNaN(M)) && (A = D, M = N), u.push(A, M), c.push(D, N), f.push(r[S], r[S + 1]), d.push(n[C], n[C + 1]), v.push(t.getRawIndex(w.idx1));
        break;
      case "+":
        var R = w.idx, O = g.dataDimsForPoint, E = i.dataToPoint([t.get(O[0], R), t.get(O[1], R)]);
        C = R * 2, u.push(E[0], E[1]), c.push(y[C], y[C + 1]);
        var L = OO(g, i, t, R);
        f.push(L[0], L[1]), d.push(n[C], n[C + 1]), v.push(t.getRawIndex(R));
        break;
      case "-":
        _ = !1;
    }
    _ && (h.push(w), p.push(p.length));
  }
  p.sort(function(W, X) {
    return v[W] - v[X];
  });
  for (var I = u.length, P = qi(I), k = qi(I), z = qi(I), V = qi(I), B = [], b = 0; b < p.length; b++) {
    var F = p[b], H = b * 2, G = F * 2;
    P[H] = u[G], P[H + 1] = u[G + 1], k[H] = c[G], k[H + 1] = c[G + 1], z[H] = f[G], z[H + 1] = f[G + 1], V[H] = d[G], V[H + 1] = d[G + 1], B[b] = h[F];
  }
  return {
    current: P,
    next: k,
    stackedOnCurrent: z,
    stackedOnNext: V,
    status: B
  };
}
var xo = Math.min, bo = Math.max;
function El(e, t) {
  return isNaN(e) || isNaN(t);
}
function Fw(e, t, r, n, i, a, o, s, l) {
  for (var u, c, f, d, h, p, v = r, g = 0; g < n; g++) {
    var m = t[v * 2], y = t[v * 2 + 1];
    if (v >= i || v < 0)
      break;
    if (El(m, y)) {
      if (l) {
        v += a;
        continue;
      }
      break;
    }
    if (v === r)
      e[a > 0 ? "moveTo" : "lineTo"](m, y), f = m, d = y;
    else {
      var b = m - u, w = y - c;
      if (b * b + w * w < 0.5) {
        v += a;
        continue;
      }
      if (o > 0) {
        for (var _ = v + a, S = t[_ * 2], C = t[_ * 2 + 1]; S === m && C === y && g < n; )
          g++, _ += a, v += a, S = t[_ * 2], C = t[_ * 2 + 1], m = t[v * 2], y = t[v * 2 + 1], b = m - u, w = y - c;
        var A = g + 1;
        if (l)
          for (; El(S, C) && A < n; )
            A++, _ += a, S = t[_ * 2], C = t[_ * 2 + 1];
        var M = 0.5, D = 0, N = 0, R = void 0, O = void 0;
        if (A >= n || El(S, C))
          h = m, p = y;
        else {
          D = S - u, N = C - c;
          var E = m - u, L = S - m, I = y - c, P = C - y, k = void 0, z = void 0;
          if (s === "x") {
            k = Math.abs(E), z = Math.abs(L);
            var V = D > 0 ? 1 : -1;
            h = m - V * k * o, p = y, R = m + V * z * o, O = y;
          } else if (s === "y") {
            k = Math.abs(I), z = Math.abs(P);
            var B = N > 0 ? 1 : -1;
            h = m, p = y - B * k * o, R = m, O = y + B * z * o;
          } else
            k = Math.sqrt(E * E + I * I), z = Math.sqrt(L * L + P * P), M = z / (z + k), h = m - D * o * (1 - M), p = y - N * o * (1 - M), R = m + D * o * M, O = y + N * o * M, R = xo(R, bo(S, m)), O = xo(O, bo(C, y)), R = bo(R, xo(S, m)), O = bo(O, xo(C, y)), D = R - m, N = O - y, h = m - D * k / z, p = y - N * k / z, h = xo(h, bo(u, m)), p = xo(p, bo(c, y)), h = bo(h, xo(u, m)), p = bo(p, xo(c, y)), D = m - h, N = y - p, R = m + D * z / k, O = y + N * z / k;
        }
        e.bezierCurveTo(f, d, h, p, m, y), f = R, d = O;
      } else
        e.lineTo(m, y);
    }
    u = m, c = y, v += a;
  }
  return g;
}
var zO = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.smooth = 0, this.smoothConstraint = !0;
    }
    return e;
  }()
), Wue = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "ec-polyline", n;
    }
    return t.prototype.getDefaultStyle = function() {
      return {
        stroke: "#000",
        fill: null
      };
    }, t.prototype.getDefaultShape = function() {
      return new zO();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.points, a = 0, o = i.length / 2;
      if (n.connectNulls) {
        for (; o > 0 && El(i[o * 2 - 2], i[o * 2 - 1]); o--)
          ;
        for (; a < o && El(i[a * 2], i[a * 2 + 1]); a++)
          ;
      }
      for (; a < o; )
        a += Fw(r, i, a, o, o, 1, n.smooth, n.smoothMonotone, n.connectNulls) + 1;
    }, t.prototype.getPointOn = function(r, n) {
      this.path || (this.createPathProxy(), this.buildPath(this.path, this.shape));
      for (var i = this.path, a = i.data, o = ca.CMD, s, l, u = n === "x", c = [], f = 0; f < a.length; ) {
        var d = a[f++], h = void 0, p = void 0, v = void 0, g = void 0, m = void 0, y = void 0, b = void 0;
        switch (d) {
          case o.M:
            s = a[f++], l = a[f++];
            break;
          case o.L:
            if (h = a[f++], p = a[f++], b = u ? (r - s) / (h - s) : (r - l) / (p - l), b <= 1 && b >= 0) {
              var w = u ? (p - l) * b + l : (h - s) * b + s;
              return u ? [r, w] : [w, r];
            }
            s = h, l = p;
            break;
          case o.C:
            h = a[f++], p = a[f++], v = a[f++], g = a[f++], m = a[f++], y = a[f++];
            var _ = u ? Kg(s, h, v, m, r, c) : Kg(l, p, g, y, r, c);
            if (_ > 0)
              for (var S = 0; S < _; S++) {
                var C = c[S];
                if (C <= 1 && C >= 0) {
                  var w = u ? br(l, p, g, y, C) : br(s, h, v, m, C);
                  return u ? [r, w] : [w, r];
                }
              }
            s = m, l = y;
            break;
        }
      }
    }, t;
  }(lt)
), Uue = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t;
  }(zO)
), jO = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "ec-polygon", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new Uue();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.points, a = n.stackedOnPoints, o = 0, s = i.length / 2, l = n.smoothMonotone;
      if (n.connectNulls) {
        for (; s > 0 && El(i[s * 2 - 2], i[s * 2 - 1]); s--)
          ;
        for (; o < s && El(i[o * 2], i[o * 2 + 1]); o++)
          ;
      }
      for (; o < s; ) {
        var u = Fw(r, i, o, s, s, 1, n.smooth, l, n.connectNulls);
        Fw(r, a, o + u - 1, u, s, -1, n.stackedOnSmooth, l, n.connectNulls), o += u + 1, r.closePath();
      }
    }, t;
  }(lt)
);
function VO(e, t, r, n, i) {
  var a = e.getArea(), o = a.x, s = a.y, l = a.width, u = a.height, c = r.get(["lineStyle", "width"]) || 0;
  o -= c / 2, s -= c / 2, l += c, u += c, l = Math.ceil(l), o !== Math.floor(o) && (o = Math.floor(o), l++);
  var f = new vt({
    shape: {
      x: o,
      y: s,
      width: l,
      height: u
    }
  });
  if (t) {
    var d = e.getBaseAxis(), h = d.isHorizontal(), p = d.inverse;
    h ? (p && (f.shape.x += l), f.shape.width = 0) : (p || (f.shape.y += u), f.shape.height = 0);
    var v = Ee(i) ? function(g) {
      i(g, f);
    } : null;
    Wt(f, {
      shape: {
        width: l,
        height: u,
        x: o,
        y: s
      }
    }, r, null, n, v);
  }
  return f;
}
function BO(e, t, r) {
  var n = e.getArea(), i = tr(n.r0, 1), a = tr(n.r, 1), o = new qr({
    shape: {
      cx: tr(e.cx, 1),
      cy: tr(e.cy, 1),
      r0: i,
      r: a,
      startAngle: n.startAngle,
      endAngle: n.endAngle,
      clockwise: n.clockwise
    }
  });
  if (t) {
    var s = e.getBaseAxis().dim === "angle";
    s ? o.shape.endAngle = n.startAngle : o.shape.r = i, Wt(o, {
      shape: {
        endAngle: n.endAngle,
        r: a
      }
    }, r);
  }
  return o;
}
function fp(e, t, r, n, i) {
  if (e) {
    if (e.type === "polar")
      return BO(e, t, r);
    if (e.type === "cartesian2d")
      return VO(e, t, r, n, i);
  } else return null;
  return null;
}
function Jl(e, t) {
  return e.type === t;
}
function A5(e, t) {
  if (e.length === t.length) {
    for (var r = 0; r < e.length; r++)
      if (e[r] !== t[r])
        return;
    return !0;
  }
}
function M5(e) {
  for (var t = 1 / 0, r = 1 / 0, n = -1 / 0, i = -1 / 0, a = 0; a < e.length; ) {
    var o = e[a++], s = e[a++];
    isNaN(o) || (t = Math.min(o, t), n = Math.max(o, n)), isNaN(s) || (r = Math.min(s, r), i = Math.max(s, i));
  }
  return [[t, r], [n, i]];
}
function E5(e, t) {
  var r = M5(e), n = r[0], i = r[1], a = M5(t), o = a[0], s = a[1];
  return Math.max(Math.abs(n[0] - o[0]), Math.abs(n[1] - o[1]), Math.abs(i[0] - s[0]), Math.abs(i[1] - s[1]));
}
function D5(e) {
  return bt(e) ? e : e ? 0.5 : 0;
}
function Yue(e, t, r) {
  if (!r.valueDim)
    return [];
  for (var n = t.count(), i = qi(n * 2), a = 0; a < n; a++) {
    var o = OO(r, e, t, a);
    i[a * 2] = o[0], i[a * 2 + 1] = o[1];
  }
  return i;
}
function wo(e, t, r, n, i) {
  var a = r.getBaseAxis(), o = a.dim === "x" || a.dim === "radius" ? 0 : 1, s = [], l = 0, u = [], c = [], f = [], d = [];
  if (i) {
    for (l = 0; l < e.length; l += 2) {
      var h = t || e;
      !isNaN(h[l]) && !isNaN(h[l + 1]) && d.push(e[l], e[l + 1]);
    }
    e = d;
  }
  for (l = 0; l < e.length - 2; l += 2)
    switch (f[0] = e[l + 2], f[1] = e[l + 3], c[0] = e[l], c[1] = e[l + 1], s.push(c[0], c[1]), n) {
      case "end":
        u[o] = f[o], u[1 - o] = c[1 - o], s.push(u[0], u[1]);
        break;
      case "middle":
        var p = (c[o] + f[o]) / 2, v = [];
        u[o] = v[o] = p, u[1 - o] = c[1 - o], v[1 - o] = f[1 - o], s.push(u[0], u[1]), s.push(v[0], v[1]);
        break;
      default:
        u[o] = c[o], u[1 - o] = f[1 - o], s.push(u[0], u[1]);
    }
  return s.push(e[l++], e[l++]), s;
}
function Zue(e, t) {
  var r = [], n = e.length, i, a;
  function o(c, f, d) {
    var h = c.coord, p = (d - h) / (f.coord - h), v = QS(p, [c.color, f.color]);
    return {
      coord: d,
      color: v
    };
  }
  for (var s = 0; s < n; s++) {
    var l = e[s], u = l.coord;
    if (u < 0)
      i = l;
    else if (u > t) {
      a ? r.push(o(a, l, t)) : i && r.push(o(i, l, 0), o(i, l, t));
      break;
    } else
      i && (r.push(o(i, l, 0)), i = null), r.push(l), a = l;
  }
  return r;
}
function Xue(e, t, r) {
  var n = e.getVisual("visualMeta");
  if (!(!n || !n.length || !e.count())) {
    if (t.type !== "cartesian2d") {
      process.env.NODE_ENV !== "production" && console.warn("Visual map on line style is only supported on cartesian2d.");
      return;
    }
    for (var i, a, o = n.length - 1; o >= 0; o--) {
      var s = e.getDimensionInfo(n[o].dimension);
      if (i = s && s.coordDim, i === "x" || i === "y") {
        a = n[o];
        break;
      }
    }
    if (!a) {
      process.env.NODE_ENV !== "production" && console.warn("Visual map on line style only support x or y dimension.");
      return;
    }
    var l = t.getAxis(i), u = ue(a.stops, function(b) {
      return {
        coord: l.toGlobalCoord(l.dataToCoord(b.value)),
        color: b.color
      };
    }), c = u.length, f = a.outerColors.slice();
    c && u[0].coord > u[c - 1].coord && (u.reverse(), f.reverse());
    var d = Zue(u, i === "x" ? r.getWidth() : r.getHeight()), h = d.length;
    if (!h && c)
      return u[0].coord < 0 ? f[1] ? f[1] : u[c - 1].color : f[0] ? f[0] : u[0].color;
    var p = 10, v = d[0].coord - p, g = d[h - 1].coord + p, m = g - v;
    if (m < 1e-3)
      return "transparent";
    j(d, function(b) {
      b.offset = (b.coord - v) / m;
    }), d.push({
      // NOTE: inRangeStopLen may still be 0 if stoplen is zero.
      offset: h ? d[h - 1].offset : 0.5,
      color: f[1] || "transparent"
    }), d.unshift({
      offset: h ? d[0].offset : 0.5,
      color: f[0] || "transparent"
    });
    var y = new lf(0, 0, 0, 0, d, !0);
    return y[i] = v, y[i + "2"] = g, y;
  }
}
function Kue(e, t, r) {
  var n = e.get("showAllSymbol"), i = n === "auto";
  if (!(n && !i)) {
    var a = r.getAxesByScale("ordinal")[0];
    if (a && !(i && que(a, t))) {
      var o = t.mapDimension(a.dim), s = {};
      return j(a.getViewLabels(), function(l) {
        var u = a.scale.getRawOrdinalNumber(l.tickValue);
        s[u] = 1;
      }), function(l) {
        return !s.hasOwnProperty(t.get(o, l));
      };
    }
  }
}
function que(e, t) {
  var r = e.getExtent(), n = Math.abs(r[1] - r[0]) / e.scale.count();
  isNaN(n) && (n = 0);
  for (var i = t.count(), a = Math.max(1, Math.round(i / 5)), o = 0; o < i; o += a)
    if (up.getSymbolSize(
      t,
      o
      // Only for cartesian, where `isHorizontal` exists.
    )[e.isHorizontal() ? 1 : 0] * 1.5 > n)
      return !1;
  return !0;
}
function Jue(e, t) {
  return isNaN(e) || isNaN(t);
}
function Que(e) {
  for (var t = e.length / 2; t > 0 && Jue(e[t * 2 - 2], e[t * 2 - 1]); t--)
    ;
  return t - 1;
}
function N5(e, t) {
  return [e[t * 2], e[t * 2 + 1]];
}
function ece(e, t, r) {
  for (var n = e.length / 2, i = r === "x" ? 0 : 1, a, o, s = 0, l = -1, u = 0; u < n; u++)
    if (o = e[u * 2 + i], !(isNaN(o) || isNaN(e[u * 2 + 1 - i]))) {
      if (u === 0) {
        a = o;
        continue;
      }
      if (a <= t && o >= t || a >= t && o <= t) {
        l = u;
        break;
      }
      s = u, a = o;
    }
  return {
    range: [s, l],
    t: (t - a) / (o - a)
  };
}
function FO(e) {
  if (e.get(["endLabel", "show"]))
    return !0;
  for (var t = 0; t < un.length; t++)
    if (e.get([un[t], "endLabel", "show"]))
      return !0;
  return !1;
}
function Ax(e, t, r, n) {
  if (Jl(t, "cartesian2d")) {
    var i = n.getModel("endLabel"), a = i.get("valueAnimation"), o = n.getData(), s = {
      lastFrameIndex: 0
    }, l = FO(n) ? function(h, p) {
      e._endLabelOnDuring(h, p, o, s, a, i, t);
    } : null, u = t.getBaseAxis().isHorizontal(), c = VO(t, r, n, function() {
      var h = e._endLabel;
      h && r && s.originalX != null && h.attr({
        x: s.originalX,
        y: s.originalY
      });
    }, l);
    if (!n.get("clip", !0)) {
      var f = c.shape, d = Math.max(f.width, f.height);
      u ? (f.y -= d, f.height += d * 2) : (f.x -= d, f.width += d * 2);
    }
    return l && l(1, c), c;
  } else
    return process.env.NODE_ENV !== "production" && n.get(["endLabel", "show"]) && console.warn("endLabel is not supported for lines in polar systems."), BO(t, r, n);
}
function tce(e, t) {
  var r = t.getBaseAxis(), n = r.isHorizontal(), i = r.inverse, a = n ? i ? "right" : "left" : "center", o = n ? "middle" : i ? "top" : "bottom";
  return {
    normal: {
      align: e.get("align") || a,
      verticalAlign: e.get("verticalAlign") || o
    }
  };
}
var rce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.init = function() {
      var r = new Fe(), n = new cp();
      this.group.add(n.group), this._symbolDraw = n, this._lineGroup = r, this._changePolyState = xe(this._changePolyState, this);
    }, t.prototype.render = function(r, n, i) {
      var a = r.coordinateSystem, o = this.group, s = r.getData(), l = r.getModel("lineStyle"), u = r.getModel("areaStyle"), c = s.getLayout("points") || [], f = a.type === "polar", d = this._coordSys, h = this._symbolDraw, p = this._polyline, v = this._polygon, g = this._lineGroup, m = !n.ssr && r.get("animation"), y = !u.isEmpty(), b = u.get("origin"), w = kO(a, s, b), _ = y && Yue(a, s, w), S = r.get("showSymbol"), C = r.get("connectNulls"), A = S && !f && Kue(r, s, a), M = this._data;
      M && M.eachItemGraphicEl(function(W, X) {
        W.__temp && (o.remove(W), M.setItemGraphicEl(X, null));
      }), S || h.remove(), o.add(g);
      var D = f ? !1 : r.get("step"), N;
      a && a.getArea && r.get("clip", !0) && (N = a.getArea(), N.width != null ? (N.x -= 0.1, N.y -= 0.1, N.width += 0.2, N.height += 0.2) : N.r0 && (N.r0 -= 0.5, N.r += 0.5)), this._clipShapeForSymbol = N;
      var R = Xue(s, a, i) || s.getVisual("style")[s.getVisual("drawType")];
      if (!(p && d.type === a.type && D === this._step))
        S && h.updateData(s, {
          isIgnore: A,
          clipShape: N,
          disableAnimation: !0,
          getSymbolPoint: function(W) {
            return [c[W * 2], c[W * 2 + 1]];
          }
        }), m && this._initSymbolLabelAnimation(s, a, N), D && (_ && (_ = wo(_, c, a, D, C)), c = wo(c, null, a, D, C)), p = this._newPolyline(c), y ? v = this._newPolygon(c, _) : v && (g.remove(v), v = this._polygon = null), f || this._initOrUpdateEndLabel(r, a, Vl(R)), g.setClipPath(Ax(this, a, !0, r));
      else {
        y && !v ? v = this._newPolygon(c, _) : v && !y && (g.remove(v), v = this._polygon = null), f || this._initOrUpdateEndLabel(r, a, Vl(R));
        var O = g.getClipPath();
        if (O) {
          var E = Ax(this, a, !1, r);
          Wt(O, {
            shape: E.shape
          }, r);
        } else
          g.setClipPath(Ax(this, a, !0, r));
        S && h.updateData(s, {
          isIgnore: A,
          clipShape: N,
          disableAnimation: !0,
          getSymbolPoint: function(W) {
            return [c[W * 2], c[W * 2 + 1]];
          }
        }), (!A5(this._stackedOnPoints, _) || !A5(this._points, c)) && (m ? this._doUpdateAnimation(s, _, a, i, D, b, C) : (D && (_ && (_ = wo(_, c, a, D, C)), c = wo(c, null, a, D, C)), p.setShape({
          points: c
        }), v && v.setShape({
          points: c,
          stackedOnPoints: _
        })));
      }
      var L = r.getModel("emphasis"), I = L.get("focus"), P = L.get("blurScope"), k = L.get("disabled");
      if (p.useStyle(Ie(
        // Use color in lineStyle first
        l.getLineStyle(),
        {
          fill: "none",
          stroke: R,
          lineJoin: "bevel"
        }
      )), Vr(p, r, "lineStyle"), p.style.lineWidth > 0 && r.get(["emphasis", "lineStyle", "width"]) === "bolder") {
        var z = p.getState("emphasis").style;
        z.lineWidth = +p.style.lineWidth + 1;
      }
      He(p).seriesIndex = r.seriesIndex, Jt(p, I, P, k);
      var V = D5(r.get("smooth")), B = r.get("smoothMonotone");
      if (p.setShape({
        smooth: V,
        smoothMonotone: B,
        connectNulls: C
      }), v) {
        var F = s.getCalculationInfo("stackedOnSeries"), H = 0;
        v.useStyle(Ie(u.getAreaStyle(), {
          fill: R,
          opacity: 0.7,
          lineJoin: "bevel",
          decal: s.getVisual("style").decal
        })), F && (H = D5(F.get("smooth"))), v.setShape({
          smooth: V,
          stackedOnSmooth: H,
          smoothMonotone: B,
          connectNulls: C
        }), Vr(v, r, "areaStyle"), He(v).seriesIndex = r.seriesIndex, Jt(v, I, P, k);
      }
      var G = this._changePolyState;
      s.eachItemGraphicEl(function(W) {
        W && (W.onHoverStateChange = G);
      }), this._polyline.onHoverStateChange = G, this._data = s, this._coordSys = a, this._stackedOnPoints = _, this._points = c, this._step = D, this._valueOrigin = b, r.get("triggerLineEvent") && (this.packEventData(r, p), v && this.packEventData(r, v));
    }, t.prototype.packEventData = function(r, n) {
      He(n).eventData = {
        componentType: "series",
        componentSubType: "line",
        componentIndex: r.componentIndex,
        seriesIndex: r.seriesIndex,
        seriesName: r.name,
        seriesType: "line"
      };
    }, t.prototype.highlight = function(r, n, i, a) {
      var o = r.getData(), s = Ol(o, a);
      if (this._changePolyState("emphasis"), !(s instanceof Array) && s != null && s >= 0) {
        var l = o.getLayout("points"), u = o.getItemGraphicEl(s);
        if (!u) {
          var c = l[s * 2], f = l[s * 2 + 1];
          if (isNaN(c) || isNaN(f) || this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(c, f))
            return;
          var d = r.get("zlevel") || 0, h = r.get("z") || 0;
          u = new up(o, s), u.x = c, u.y = f, u.setZ(d, h);
          var p = u.getSymbolPath().getTextContent();
          p && (p.zlevel = d, p.z = h, p.z2 = this._polyline.z2 + 1), u.__temp = !0, o.setItemGraphicEl(s, u), u.stopSymbolAnimation(!0), this.group.add(u);
        }
        u.highlight();
      } else
        It.prototype.highlight.call(this, r, n, i, a);
    }, t.prototype.downplay = function(r, n, i, a) {
      var o = r.getData(), s = Ol(o, a);
      if (this._changePolyState("normal"), s != null && s >= 0) {
        var l = o.getItemGraphicEl(s);
        l && (l.__temp ? (o.setItemGraphicEl(s, null), this.group.remove(l)) : l.downplay());
      } else
        It.prototype.downplay.call(this, r, n, i, a);
    }, t.prototype._changePolyState = function(r) {
      var n = this._polygon;
      im(this._polyline, r), n && im(n, r);
    }, t.prototype._newPolyline = function(r) {
      var n = this._polyline;
      return n && this._lineGroup.remove(n), n = new Wue({
        shape: {
          points: r
        },
        segmentIgnoreThreshold: 2,
        z2: 10
      }), this._lineGroup.add(n), this._polyline = n, n;
    }, t.prototype._newPolygon = function(r, n) {
      var i = this._polygon;
      return i && this._lineGroup.remove(i), i = new jO({
        shape: {
          points: r,
          stackedOnPoints: n
        },
        segmentIgnoreThreshold: 2
      }), this._lineGroup.add(i), this._polygon = i, i;
    }, t.prototype._initSymbolLabelAnimation = function(r, n, i) {
      var a, o, s = n.getBaseAxis(), l = s.inverse;
      n.type === "cartesian2d" ? (a = s.isHorizontal(), o = !1) : n.type === "polar" && (a = s.dim === "angle", o = !0);
      var u = r.hostModel, c = u.get("animationDuration");
      Ee(c) && (c = c(null));
      var f = u.get("animationDelay") || 0, d = Ee(f) ? f(null) : f;
      r.eachItemGraphicEl(function(h, p) {
        var v = h;
        if (v) {
          var g = [h.x, h.y], m = void 0, y = void 0, b = void 0;
          if (i)
            if (o) {
              var w = i, _ = n.pointToCoord(g);
              a ? (m = w.startAngle, y = w.endAngle, b = -_[1] / 180 * Math.PI) : (m = w.r0, y = w.r, b = _[0]);
            } else {
              var S = i;
              a ? (m = S.x, y = S.x + S.width, b = h.x) : (m = S.y + S.height, y = S.y, b = h.y);
            }
          var C = y === m ? 0 : (b - m) / (y - m);
          l && (C = 1 - C);
          var A = Ee(f) ? f(p) : c * C + d, M = v.getSymbolPath(), D = M.getTextContent();
          v.attr({
            scaleX: 0,
            scaleY: 0
          }), v.animateTo({
            scaleX: 1,
            scaleY: 1
          }, {
            duration: 200,
            setToFinal: !0,
            delay: A
          }), D && D.animateFrom({
            style: {
              opacity: 0
            }
          }, {
            duration: 300,
            delay: A
          }), M.disableLabelAnimation = !0;
        }
      });
    }, t.prototype._initOrUpdateEndLabel = function(r, n, i) {
      var a = r.getModel("endLabel");
      if (FO(r)) {
        var o = r.getData(), s = this._polyline, l = o.getLayout("points");
        if (!l) {
          s.removeTextContent(), this._endLabel = null;
          return;
        }
        var u = this._endLabel;
        u || (u = this._endLabel = new pt({
          z2: 200
          // should be higher than item symbol
        }), u.ignoreClip = !0, s.setTextContent(this._endLabel), s.disableLabelAnimation = !0);
        var c = Que(l);
        c >= 0 && (Br(s, Cr(r, "endLabel"), {
          inheritColor: i,
          labelFetcher: r,
          labelDataIndex: c,
          defaultText: function(f, d, h) {
            return h != null ? PO(o, h) : zc(o, f);
          },
          enableTextSetter: !0
        }, tce(a, n)), s.textConfig.position = null);
      } else this._endLabel && (this._polyline.removeTextContent(), this._endLabel = null);
    }, t.prototype._endLabelOnDuring = function(r, n, i, a, o, s, l) {
      var u = this._endLabel, c = this._polyline;
      if (u) {
        r < 1 && a.originalX == null && (a.originalX = u.x, a.originalY = u.y);
        var f = i.getLayout("points"), d = i.hostModel, h = d.get("connectNulls"), p = s.get("precision"), v = s.get("distance") || 0, g = l.getBaseAxis(), m = g.isHorizontal(), y = g.inverse, b = n.shape, w = y ? m ? b.x : b.y + b.height : m ? b.x + b.width : b.y, _ = (m ? v : 0) * (y ? -1 : 1), S = (m ? 0 : -v) * (y ? -1 : 1), C = m ? "x" : "y", A = ece(f, w, C), M = A.range, D = M[1] - M[0], N = void 0;
        if (D >= 1) {
          if (D > 1 && !h) {
            var R = N5(f, M[0]);
            u.attr({
              x: R[0] + _,
              y: R[1] + S
            }), o && (N = d.getRawValue(M[0]));
          } else {
            var R = c.getPointOn(w, C);
            R && u.attr({
              x: R[0] + _,
              y: R[1] + S
            });
            var O = d.getRawValue(M[0]), E = d.getRawValue(M[1]);
            o && (N = A9(i, p, O, E, A.t));
          }
          a.lastFrameIndex = M[0];
        } else {
          var L = r === 1 || a.lastFrameIndex > 0 ? M[0] : 0, R = N5(f, L);
          o && (N = d.getRawValue(L)), u.attr({
            x: R[0] + _,
            y: R[1] + S
          });
        }
        if (o) {
          var I = ff(u);
          typeof I.setLabelText == "function" && I.setLabelText(N);
        }
      }
    }, t.prototype._doUpdateAnimation = function(r, n, i, a, o, s, l) {
      var u = this._polyline, c = this._polygon, f = r.hostModel, d = Gue(this._data, r, this._stackedOnPoints, n, this._coordSys, i, this._valueOrigin), h = d.current, p = d.stackedOnCurrent, v = d.next, g = d.stackedOnNext;
      if (o && (p = wo(d.stackedOnCurrent, d.current, i, o, l), h = wo(d.current, null, i, o, l), g = wo(d.stackedOnNext, d.next, i, o, l), v = wo(d.next, null, i, o, l)), E5(h, v) > 3e3 || c && E5(p, g) > 3e3) {
        u.stopAnimation(), u.setShape({
          points: v
        }), c && (c.stopAnimation(), c.setShape({
          points: v,
          stackedOnPoints: g
        }));
        return;
      }
      u.shape.__points = d.current, u.shape.points = h;
      var m = {
        shape: {
          points: v
        }
      };
      d.current !== h && (m.shape.__points = d.next), u.stopAnimation(), _t(u, m, f), c && (c.setShape({
        // Reuse the points with polyline.
        points: h,
        stackedOnPoints: p
      }), c.stopAnimation(), _t(c, {
        shape: {
          stackedOnPoints: g
        }
      }, f), u.shape.points !== c.shape.points && (c.shape.points = u.shape.points));
      for (var y = [], b = d.status, w = 0; w < b.length; w++) {
        var _ = b[w].cmd;
        if (_ === "=") {
          var S = r.getItemGraphicEl(b[w].idx1);
          S && y.push({
            el: S,
            ptIdx: w
            // Index of points
          });
        }
      }
      u.animators && u.animators.length && u.animators[0].during(function() {
        c && c.dirtyShape();
        for (var C = u.shape.__points, A = 0; A < y.length; A++) {
          var M = y[A].el, D = y[A].ptIdx * 2;
          M.x = C[D], M.y = C[D + 1], M.markRedraw();
        }
      });
    }, t.prototype.remove = function(r) {
      var n = this.group, i = this._data;
      this._lineGroup.removeAll(), this._symbolDraw.remove(!0), i && i.eachItemGraphicEl(function(a, o) {
        a.__temp && (n.remove(a), i.setItemGraphicEl(o, null));
      }), this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;
    }, t.type = "line", t;
  }(It)
);
function dp(e, t) {
  return {
    seriesType: e,
    plan: vf(),
    reset: function(r) {
      var n = r.getData(), i = r.coordinateSystem, a = r.pipelineContext, o = t || a.large;
      if (i) {
        var s = ue(i.dimensions, function(h) {
          return n.mapDimension(h);
        }).slice(0, 2), l = s.length, u = n.getCalculationInfo("stackResultDimension");
        Qa(n, s[0]) && (s[0] = u), Qa(n, s[1]) && (s[1] = u);
        var c = n.getStore(), f = n.getDimensionIndex(s[0]), d = n.getDimensionIndex(s[1]);
        return l && {
          progress: function(h, p) {
            for (var v = h.end - h.start, g = o && qi(v * l), m = [], y = [], b = h.start, w = 0; b < h.end; b++) {
              var _ = void 0;
              if (l === 1) {
                var S = c.get(f, b);
                _ = i.dataToPoint(S, null, y);
              } else
                m[0] = c.get(f, b), m[1] = c.get(d, b), _ = i.dataToPoint(m, null, y);
              o ? (g[w++] = _[0], g[w++] = _[1]) : p.setItemLayout(b, _.slice());
            }
            o && p.setLayout("points", g);
          }
        };
      }
    }
  };
}
var nce = {
  average: function(e) {
    for (var t = 0, r = 0, n = 0; n < e.length; n++)
      isNaN(e[n]) || (t += e[n], r++);
    return r === 0 ? NaN : t / r;
  },
  sum: function(e) {
    for (var t = 0, r = 0; r < e.length; r++)
      t += e[r] || 0;
    return t;
  },
  max: function(e) {
    for (var t = -1 / 0, r = 0; r < e.length; r++)
      e[r] > t && (t = e[r]);
    return isFinite(t) ? t : NaN;
  },
  min: function(e) {
    for (var t = 1 / 0, r = 0; r < e.length; r++)
      e[r] < t && (t = e[r]);
    return isFinite(t) ? t : NaN;
  },
  // TODO
  // Median
  nearest: function(e) {
    return e[0];
  }
}, ice = function(e) {
  return Math.round(e.length / 2);
};
function $O(e) {
  return {
    seriesType: e,
    // FIXME:TS never used, so comment it
    // modifyOutputEnd: true,
    reset: function(t, r, n) {
      var i = t.getData(), a = t.get("sampling"), o = t.coordinateSystem, s = i.count();
      if (s > 10 && o.type === "cartesian2d" && a) {
        var l = o.getBaseAxis(), u = o.getOtherAxis(l), c = l.getExtent(), f = n.getDevicePixelRatio(), d = Math.abs(c[1] - c[0]) * (f || 1), h = Math.round(s / d);
        if (isFinite(h) && h > 1) {
          a === "lttb" ? t.setData(i.lttbDownSample(i.mapDimension(u.dim), 1 / h)) : a === "minmax" && t.setData(i.minmaxDownSample(i.mapDimension(u.dim), 1 / h));
          var p = void 0;
          ge(a) ? p = nce[a] : Ee(a) && (p = a), p && t.setData(i.downSample(i.mapDimension(u.dim), 1 / h, p, ice));
        }
      }
    }
  };
}
function ace(e) {
  e.registerChartView(rce), e.registerSeriesModel(Bue), e.registerLayout(dp("line", !0)), e.registerVisual({
    seriesType: "line",
    reset: function(t) {
      var r = t.getData(), n = t.getModel("lineStyle").getLineStyle();
      n && !n.stroke && (n.stroke = r.getVisual("style").fill), r.setVisual("legendLineStyle", n);
    }
  }), e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC, $O("line"));
}
var Ah = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return pa(null, this, {
        useEncodeDefaulter: !0
      });
    }, t.prototype.getMarkerPosition = function(r, n, i) {
      var a = this.coordinateSystem;
      if (a && a.clampData) {
        var o = a.clampData(r), s = a.dataToPoint(o);
        if (i)
          j(a.getAxes(), function(d, h) {
            if (d.type === "category" && n != null) {
              var p = d.getTicksCoords(), v = d.getTickModel().get("alignWithLabel"), g = o[h], m = n[h] === "x1" || n[h] === "y1";
              if (m && !v && (g += 1), p.length < 2)
                return;
              if (p.length === 2) {
                s[h] = d.toGlobalCoord(d.getExtent()[m ? 1 : 0]);
                return;
              }
              for (var y = void 0, b = void 0, w = 1, _ = 0; _ < p.length; _++) {
                var S = p[_].coord, C = _ === p.length - 1 ? p[_ - 1].tickValue + w : p[_].tickValue;
                if (C === g) {
                  b = S;
                  break;
                } else if (C < g)
                  y = S;
                else if (y != null && C > g) {
                  b = (S + y) / 2;
                  break;
                }
                _ === 1 && (w = C - p[0].tickValue);
              }
              b == null && (y ? y && (b = p[p.length - 1].coord) : b = p[0].coord), s[h] = d.toGlobalCoord(b);
            }
          });
        else {
          var l = this.getData(), u = l.getLayout("offset"), c = l.getLayout("size"), f = a.getBaseAxis().isHorizontal() ? 0 : 1;
          s[f] += u + c / 2;
        }
        return s;
      }
      return [NaN, NaN];
    }, t.type = "series.__base_bar__", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "cartesian2d",
      legendHoverLink: !0,
      // stack: null
      // Cartesian coordinate system
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      barMinHeight: 0,
      barMinAngle: 0,
      // cursor: null,
      large: !1,
      largeThreshold: 400,
      progressive: 3e3,
      progressiveChunkMode: "mod"
    }, t;
  }(zt)
);
zt.registerClass(Ah);
var oce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.getInitialData = function() {
      return pa(null, this, {
        useEncodeDefaulter: !0,
        createInvertedIndices: !!this.get("realtimeSort", !0) || null
      });
    }, t.prototype.getProgressive = function() {
      return this.get("large") ? this.get("progressive") : !1;
    }, t.prototype.getProgressiveThreshold = function() {
      var r = this.get("progressiveThreshold"), n = this.get("largeThreshold");
      return n > r && (r = n), r;
    }, t.prototype.brushSelector = function(r, n, i) {
      return i.rect(n.getItemLayout(r));
    }, t.type = "series.bar", t.dependencies = ["grid", "polar"], t.defaultOption = ms(Ah.defaultOption, {
      // If clipped
      // Only available on cartesian2d
      clip: !0,
      roundCap: !1,
      showBackground: !1,
      backgroundStyle: {
        color: "rgba(180, 180, 180, 0.2)",
        borderColor: null,
        borderWidth: 0,
        borderType: "solid",
        borderRadius: 0,
        shadowBlur: 0,
        shadowColor: null,
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        opacity: 1
      },
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      },
      realtimeSort: !1
    }), t;
  }(Ah)
), sce = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.cx = 0, this.cy = 0, this.r0 = 0, this.r = 0, this.startAngle = 0, this.endAngle = Math.PI * 2, this.clockwise = !0;
    }
    return e;
  }()
), Mm = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "sausage", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new sce();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.cx, a = n.cy, o = Math.max(n.r0 || 0, 0), s = Math.max(n.r, 0), l = (s - o) * 0.5, u = o + l, c = n.startAngle, f = n.endAngle, d = n.clockwise, h = Math.PI * 2, p = d ? f - c < h : c - f < h;
      p || (c = f - (d ? h : -h));
      var v = Math.cos(c), g = Math.sin(c), m = Math.cos(f), y = Math.sin(f);
      p ? (r.moveTo(v * o + i, g * o + a), r.arc(v * u + i, g * u + a, l, -Math.PI + c, c, !d)) : r.moveTo(v * s + i, g * s + a), r.arc(i, a, s, c, f, !d), r.arc(m * u + i, y * u + a, l, f - Math.PI * 2, f - Math.PI, !d), o !== 0 && r.arc(i, a, o, f, c, d);
    }, t;
  }(lt)
);
function lce(e, t) {
  t = t || {};
  var r = t.isRoundCap;
  return function(n, i, a) {
    var o = i.position;
    if (!o || o instanceof Array)
      return tm(n, i, a);
    var s = e(o), l = i.distance != null ? i.distance : 5, u = this.shape, c = u.cx, f = u.cy, d = u.r, h = u.r0, p = (d + h) / 2, v = u.startAngle, g = u.endAngle, m = (v + g) / 2, y = r ? Math.abs(d - h) / 2 : 0, b = Math.cos, w = Math.sin, _ = c + d * b(v), S = f + d * w(v), C = "left", A = "top";
    switch (s) {
      case "startArc":
        _ = c + (h - l) * b(m), S = f + (h - l) * w(m), C = "center", A = "top";
        break;
      case "insideStartArc":
        _ = c + (h + l) * b(m), S = f + (h + l) * w(m), C = "center", A = "bottom";
        break;
      case "startAngle":
        _ = c + p * b(v) + wv(v, l + y, !1), S = f + p * w(v) + _v(v, l + y, !1), C = "right", A = "middle";
        break;
      case "insideStartAngle":
        _ = c + p * b(v) + wv(v, -l + y, !1), S = f + p * w(v) + _v(v, -l + y, !1), C = "left", A = "middle";
        break;
      case "middle":
        _ = c + p * b(m), S = f + p * w(m), C = "center", A = "middle";
        break;
      case "endArc":
        _ = c + (d + l) * b(m), S = f + (d + l) * w(m), C = "center", A = "bottom";
        break;
      case "insideEndArc":
        _ = c + (d - l) * b(m), S = f + (d - l) * w(m), C = "center", A = "top";
        break;
      case "endAngle":
        _ = c + p * b(g) + wv(g, l + y, !0), S = f + p * w(g) + _v(g, l + y, !0), C = "left", A = "middle";
        break;
      case "insideEndAngle":
        _ = c + p * b(g) + wv(g, -l + y, !0), S = f + p * w(g) + _v(g, -l + y, !0), C = "right", A = "middle";
        break;
      default:
        return tm(n, i, a);
    }
    return n = n || {}, n.x = _, n.y = S, n.align = C, n.verticalAlign = A, n;
  };
}
function uce(e, t, r, n) {
  if (bt(n)) {
    e.setTextConfig({
      rotation: n
    });
    return;
  } else if (le(t)) {
    e.setTextConfig({
      rotation: 0
    });
    return;
  }
  var i = e.shape, a = i.clockwise ? i.startAngle : i.endAngle, o = i.clockwise ? i.endAngle : i.startAngle, s = (a + o) / 2, l, u = r(t);
  switch (u) {
    case "startArc":
    case "insideStartArc":
    case "middle":
    case "insideEndArc":
    case "endArc":
      l = s;
      break;
    case "startAngle":
    case "insideStartAngle":
      l = a;
      break;
    case "endAngle":
    case "insideEndAngle":
      l = o;
      break;
    default:
      e.setTextConfig({
        rotation: 0
      });
      return;
  }
  var c = Math.PI * 1.5 - l;
  u === "middle" && c > Math.PI / 2 && c < Math.PI * 1.5 && (c -= Math.PI), e.setTextConfig({
    rotation: c
  });
}
function wv(e, t, r) {
  return t * Math.sin(e) * (r ? -1 : 1);
}
function _v(e, t, r) {
  return t * Math.cos(e) * (r ? 1 : -1);
}
function ml(e, t, r) {
  var n = e.get("borderRadius");
  if (n == null)
    return r ? {
      cornerRadius: 0
    } : null;
  le(n) || (n = [n, n, n, n]);
  var i = Math.abs(t.r || 0 - t.r0 || 0);
  return {
    cornerRadius: ue(n, function(a) {
      return Ii(a, i);
    })
  };
}
var Mx = Math.max, Ex = Math.min;
function cce(e, t) {
  var r = e.getArea && e.getArea();
  if (Jl(e, "cartesian2d")) {
    var n = e.getBaseAxis();
    if (n.type !== "category" || !n.onBand) {
      var i = t.getLayout("bandWidth");
      n.isHorizontal() ? (r.x -= i, r.width += i * 2) : (r.y -= i, r.height += i * 2);
    }
  }
  return r;
}
var fce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e.call(this) || this;
      return r.type = t.type, r._isFirstFrame = !0, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      this._model = r, this._removeOnRenderedListener(i), this._updateDrawMode(r);
      var o = r.get("coordinateSystem");
      o === "cartesian2d" || o === "polar" ? (this._progressiveEls = null, this._isLargeDraw ? this._renderLarge(r, n, i) : this._renderNormal(r, n, i, a)) : process.env.NODE_ENV !== "production" && qt("Only cartesian2d and polar supported for bar.");
    }, t.prototype.incrementalPrepareRender = function(r) {
      this._clear(), this._updateDrawMode(r), this._updateLargeClip(r);
    }, t.prototype.incrementalRender = function(r, n) {
      this._progressiveEls = [], this._incrementalRenderLarge(r, n);
    }, t.prototype.eachRendered = function(r) {
      gs(this._progressiveEls || this.group, r);
    }, t.prototype._updateDrawMode = function(r) {
      var n = r.pipelineContext.large;
      (this._isLargeDraw == null || n !== this._isLargeDraw) && (this._isLargeDraw = n, this._clear());
    }, t.prototype._renderNormal = function(r, n, i, a) {
      var o = this.group, s = r.getData(), l = this._data, u = r.coordinateSystem, c = u.getBaseAxis(), f;
      u.type === "cartesian2d" ? f = c.isHorizontal() : u.type === "polar" && (f = c.dim === "angle");
      var d = r.isAnimationEnabled() ? r : null, h = dce(r, u);
      h && this._enableRealtimeSort(h, s, i);
      var p = r.get("clip", !0) || h, v = cce(u, s);
      o.removeClipPath();
      var g = r.get("roundCap", !0), m = r.get("showBackground", !0), y = r.getModel("backgroundStyle"), b = y.get("borderRadius") || 0, w = [], _ = this._backgroundEls, S = a && a.isInitSort, C = a && a.type === "changeAxisOrder";
      function A(N) {
        var R = Sv[u.type](s, N), O = xce(u, f, R);
        return O.useStyle(y.getItemStyle()), u.type === "cartesian2d" ? O.setShape("r", b) : O.setShape("cornerRadius", b), w[N] = O, O;
      }
      s.diff(l).add(function(N) {
        var R = s.getItemModel(N), O = Sv[u.type](s, N, R);
        if (m && A(N), !(!s.hasValue(N) || !k5[u.type](O))) {
          var E = !1;
          p && (E = I5[u.type](v, O));
          var L = L5[u.type](r, s, N, O, f, d, c.model, !1, g);
          h && (L.forceLabelAnimation = !0), O5(L, s, N, R, O, r, f, u.type === "polar"), S ? L.attr({
            shape: O
          }) : h ? R5(h, d, L, O, N, f, !1, !1) : Wt(L, {
            shape: O
          }, r, N), s.setItemGraphicEl(N, L), o.add(L), L.ignore = E;
        }
      }).update(function(N, R) {
        var O = s.getItemModel(N), E = Sv[u.type](s, N, O);
        if (m) {
          var L = void 0;
          _.length === 0 ? L = A(R) : (L = _[R], L.useStyle(y.getItemStyle()), u.type === "cartesian2d" ? L.setShape("r", b) : L.setShape("cornerRadius", b), w[N] = L);
          var I = Sv[u.type](s, N), P = GO(f, I, u);
          _t(L, {
            shape: P
          }, d, N);
        }
        var k = l.getItemGraphicEl(R);
        if (!s.hasValue(N) || !k5[u.type](E)) {
          o.remove(k);
          return;
        }
        var z = !1;
        if (p && (z = I5[u.type](v, E), z && o.remove(k)), k ? Li(k) : k = L5[u.type](r, s, N, E, f, d, c.model, !!k, g), h && (k.forceLabelAnimation = !0), C) {
          var V = k.getTextContent();
          if (V) {
            var B = ff(V);
            B.prevValue != null && (B.prevValue = B.value);
          }
        } else
          O5(k, s, N, O, E, r, f, u.type === "polar");
        S ? k.attr({
          shape: E
        }) : h ? R5(h, d, k, E, N, f, !0, C) : _t(k, {
          shape: E
        }, r, N, null), s.setItemGraphicEl(N, k), k.ignore = z, o.add(k);
      }).remove(function(N) {
        var R = l.getItemGraphicEl(N);
        R && gh(R, r, N);
      }).execute();
      var M = this._backgroundGroup || (this._backgroundGroup = new Fe());
      M.removeAll();
      for (var D = 0; D < w.length; ++D)
        M.add(w[D]);
      o.add(M), this._backgroundEls = w, this._data = s;
    }, t.prototype._renderLarge = function(r, n, i) {
      this._clear(), j5(r, this.group), this._updateLargeClip(r);
    }, t.prototype._incrementalRenderLarge = function(r, n) {
      this._removeBackground(), j5(n, this.group, this._progressiveEls, !0);
    }, t.prototype._updateLargeClip = function(r) {
      var n = r.get("clip", !0) && fp(r.coordinateSystem, !1, r), i = this.group;
      n ? i.setClipPath(n) : i.removeClipPath();
    }, t.prototype._enableRealtimeSort = function(r, n, i) {
      var a = this;
      if (n.count()) {
        var o = r.baseAxis;
        if (this._isFirstFrame)
          this._dispatchInitSort(n, r, i), this._isFirstFrame = !1;
        else {
          var s = function(l) {
            var u = n.getItemGraphicEl(l), c = u && u.shape;
            return c && // The result should be consistent with the initial sort by data value.
            // Do not support the case that both positive and negative exist.
            Math.abs(o.isHorizontal() ? c.height : c.width) || 0;
          };
          this._onRendered = function() {
            a._updateSortWithinSameData(n, s, o, i);
          }, i.getZr().on("rendered", this._onRendered);
        }
      }
    }, t.prototype._dataSort = function(r, n, i) {
      var a = [];
      return r.each(r.mapDimension(n.dim), function(o, s) {
        var l = i(s);
        l = l ?? NaN, a.push({
          dataIndex: s,
          mappedValue: l,
          ordinalNumber: o
        });
      }), a.sort(function(o, s) {
        return s.mappedValue - o.mappedValue;
      }), {
        ordinalNumbers: ue(a, function(o) {
          return o.ordinalNumber;
        })
      };
    }, t.prototype._isOrderChangedWithinSameData = function(r, n, i) {
      for (var a = i.scale, o = r.mapDimension(i.dim), s = Number.MAX_VALUE, l = 0, u = a.getOrdinalMeta().categories.length; l < u; ++l) {
        var c = r.rawIndexOf(o, a.getRawOrdinalNumber(l)), f = c < 0 ? Number.MIN_VALUE : n(r.indexOfRawIndex(c));
        if (f > s)
          return !0;
        s = f;
      }
      return !1;
    }, t.prototype._isOrderDifferentInView = function(r, n) {
      for (var i = n.scale, a = i.getExtent(), o = Math.max(0, a[0]), s = Math.min(a[1], i.getOrdinalMeta().categories.length - 1); o <= s; ++o)
        if (r.ordinalNumbers[o] !== i.getRawOrdinalNumber(o))
          return !0;
    }, t.prototype._updateSortWithinSameData = function(r, n, i, a) {
      if (this._isOrderChangedWithinSameData(r, n, i)) {
        var o = this._dataSort(r, i, n);
        this._isOrderDifferentInView(o, i) && (this._removeOnRenderedListener(a), a.dispatchAction({
          type: "changeAxisOrder",
          componentType: i.dim + "Axis",
          axisId: i.index,
          sortInfo: o
        }));
      }
    }, t.prototype._dispatchInitSort = function(r, n, i) {
      var a = n.baseAxis, o = this._dataSort(r, a, function(s) {
        return r.get(r.mapDimension(n.otherAxis.dim), s);
      });
      i.dispatchAction({
        type: "changeAxisOrder",
        componentType: a.dim + "Axis",
        isInitSort: !0,
        axisId: a.index,
        sortInfo: o
      });
    }, t.prototype.remove = function(r, n) {
      this._clear(this._model), this._removeOnRenderedListener(n);
    }, t.prototype.dispose = function(r, n) {
      this._removeOnRenderedListener(n);
    }, t.prototype._removeOnRenderedListener = function(r) {
      this._onRendered && (r.getZr().off("rendered", this._onRendered), this._onRendered = null);
    }, t.prototype._clear = function(r) {
      var n = this.group, i = this._data;
      r && r.isAnimationEnabled() && i && !this._isLargeDraw ? (this._removeBackground(), this._backgroundEls = [], i.eachItemGraphicEl(function(a) {
        gh(a, r, He(a).dataIndex);
      })) : n.removeAll(), this._data = null, this._isFirstFrame = !0;
    }, t.prototype._removeBackground = function() {
      this.group.remove(this._backgroundGroup), this._backgroundGroup = null;
    }, t.type = "bar", t;
  }(It)
), I5 = {
  cartesian2d: function(e, t) {
    var r = t.width < 0 ? -1 : 1, n = t.height < 0 ? -1 : 1;
    r < 0 && (t.x += t.width, t.width = -t.width), n < 0 && (t.y += t.height, t.height = -t.height);
    var i = e.x + e.width, a = e.y + e.height, o = Mx(t.x, e.x), s = Ex(t.x + t.width, i), l = Mx(t.y, e.y), u = Ex(t.y + t.height, a), c = s < o, f = u < l;
    return t.x = c && o > i ? s : o, t.y = f && l > a ? u : l, t.width = c ? 0 : s - o, t.height = f ? 0 : u - l, r < 0 && (t.x += t.width, t.width = -t.width), n < 0 && (t.y += t.height, t.height = -t.height), c || f;
  },
  polar: function(e, t) {
    var r = t.r0 <= t.r ? 1 : -1;
    if (r < 0) {
      var n = t.r;
      t.r = t.r0, t.r0 = n;
    }
    var i = Ex(t.r, e.r), a = Mx(t.r0, e.r0);
    t.r = i, t.r0 = a;
    var o = i - a < 0;
    if (r < 0) {
      var n = t.r;
      t.r = t.r0, t.r0 = n;
    }
    return o;
  }
}, L5 = {
  cartesian2d: function(e, t, r, n, i, a, o, s, l) {
    var u = new vt({
      shape: ae({}, n),
      z2: 1
    });
    if (u.__dataIndex = r, u.name = "item", a) {
      var c = u.shape, f = i ? "height" : "width";
      c[f] = 0;
    }
    return u;
  },
  polar: function(e, t, r, n, i, a, o, s, l) {
    var u = !i && l ? Mm : qr, c = new u({
      shape: n,
      z2: 1
    });
    c.name = "item";
    var f = HO(i);
    if (c.calculateTextPosition = lce(f, {
      isRoundCap: u === Mm
    }), a) {
      var d = c.shape, h = i ? "r" : "endAngle", p = {};
      d[h] = i ? n.r0 : n.startAngle, p[h] = n[h], (s ? _t : Wt)(c, {
        shape: p
        // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue
      }, a);
    }
    return c;
  }
};
function dce(e, t) {
  var r = e.get("realtimeSort", !0), n = t.getBaseAxis();
  if (process.env.NODE_ENV !== "production" && r && (n.type !== "category" && qt("`realtimeSort` will not work because this bar series is not based on a category axis."), t.type !== "cartesian2d" && qt("`realtimeSort` will not work because this bar series is not on cartesian2d.")), r && n.type === "category" && t.type === "cartesian2d")
    return {
      baseAxis: n,
      otherAxis: t.getOtherAxis(n)
    };
}
function R5(e, t, r, n, i, a, o, s) {
  var l, u;
  a ? (u = {
    x: n.x,
    width: n.width
  }, l = {
    y: n.y,
    height: n.height
  }) : (u = {
    y: n.y,
    height: n.height
  }, l = {
    x: n.x,
    width: n.width
  }), s || (o ? _t : Wt)(r, {
    shape: l
  }, t, i, null);
  var c = t ? e.baseAxis.model : null;
  (o ? _t : Wt)(r, {
    shape: u
  }, c, i);
}
function P5(e, t) {
  for (var r = 0; r < t.length; r++)
    if (!isFinite(e[t[r]]))
      return !0;
  return !1;
}
var hce = ["x", "y", "width", "height"], pce = ["cx", "cy", "r", "startAngle", "endAngle"], k5 = {
  cartesian2d: function(e) {
    return !P5(e, hce);
  },
  polar: function(e) {
    return !P5(e, pce);
  }
}, Sv = {
  // itemModel is only used to get borderWidth, which is not needed
  // when calculating bar background layout.
  cartesian2d: function(e, t, r) {
    var n = e.getItemLayout(t), i = r ? gce(r, n) : 0, a = n.width > 0 ? 1 : -1, o = n.height > 0 ? 1 : -1;
    return {
      x: n.x + a * i / 2,
      y: n.y + o * i / 2,
      width: n.width - a * i,
      height: n.height - o * i
    };
  },
  polar: function(e, t, r) {
    var n = e.getItemLayout(t);
    return {
      cx: n.cx,
      cy: n.cy,
      r0: n.r0,
      r: n.r,
      startAngle: n.startAngle,
      endAngle: n.endAngle,
      clockwise: n.clockwise
    };
  }
};
function vce(e) {
  return e.startAngle != null && e.endAngle != null && e.startAngle === e.endAngle;
}
function HO(e) {
  return /* @__PURE__ */ function(t) {
    var r = t ? "Arc" : "Angle";
    return function(n) {
      switch (n) {
        case "start":
        case "insideStart":
        case "end":
        case "insideEnd":
          return n + r;
        default:
          return n;
      }
    };
  }(e);
}
function O5(e, t, r, n, i, a, o, s) {
  var l = t.getItemVisual(r, "style");
  if (s) {
    if (!a.get("roundCap")) {
      var c = e.shape, f = ml(n.getModel("itemStyle"), c, !0);
      ae(c, f), e.setShape(c);
    }
  } else {
    var u = n.get(["itemStyle", "borderRadius"]) || 0;
    e.setShape("r", u);
  }
  e.useStyle(l);
  var d = n.getShallow("cursor");
  d && e.attr("cursor", d);
  var h = s ? o ? i.r >= i.r0 ? "endArc" : "startArc" : i.endAngle >= i.startAngle ? "endAngle" : "startAngle" : o ? i.height >= 0 ? "bottom" : "top" : i.width >= 0 ? "right" : "left", p = Cr(n);
  Br(e, p, {
    labelFetcher: a,
    labelDataIndex: r,
    defaultText: zc(a.getData(), r),
    inheritColor: l.fill,
    defaultOpacity: l.opacity,
    defaultOutsidePosition: h
  });
  var v = e.getTextContent();
  if (s && v) {
    var g = n.get(["label", "position"]);
    e.textConfig.inside = g === "middle" ? !0 : null, uce(e, g === "outside" ? h : g, HO(o), n.get(["label", "rotate"]));
  }
  c6(v, p, a.getRawValue(r), function(y) {
    return PO(t, y);
  });
  var m = n.getModel(["emphasis"]);
  Jt(e, m.get("focus"), m.get("blurScope"), m.get("disabled")), Vr(e, n), vce(i) && (e.style.fill = "none", e.style.stroke = "none", j(e.states, function(y) {
    y.style && (y.style.fill = y.style.stroke = "none");
  }));
}
function gce(e, t) {
  var r = e.get(["itemStyle", "borderColor"]);
  if (!r || r === "none")
    return 0;
  var n = e.get(["itemStyle", "borderWidth"]) || 0, i = isNaN(t.width) ? Number.MAX_VALUE : Math.abs(t.width), a = isNaN(t.height) ? Number.MAX_VALUE : Math.abs(t.height);
  return Math.min(n, i, a);
}
var mce = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), z5 = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "largeBar", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new mce();
    }, t.prototype.buildPath = function(r, n) {
      for (var i = n.points, a = this.baseDimIdx, o = 1 - this.baseDimIdx, s = [], l = [], u = this.barWidth, c = 0; c < i.length; c += 3)
        l[a] = u, l[o] = i[c + 2], s[a] = i[c + a], s[o] = i[c + o], r.rect(s[0], s[1], l[0], l[1]);
    }, t;
  }(lt)
);
function j5(e, t, r, n) {
  var i = e.getData(), a = i.getLayout("valueAxisHorizontal") ? 1 : 0, o = i.getLayout("largeDataIndices"), s = i.getLayout("size"), l = e.getModel("backgroundStyle"), u = i.getLayout("largeBackgroundPoints");
  if (u) {
    var c = new z5({
      shape: {
        points: u
      },
      incremental: !!n,
      silent: !0,
      z2: 0
    });
    c.baseDimIdx = a, c.largeDataIndices = o, c.barWidth = s, c.useStyle(l.getItemStyle()), t.add(c), r && r.push(c);
  }
  var f = new z5({
    shape: {
      points: i.getLayout("largePoints")
    },
    incremental: !!n,
    ignoreCoarsePointer: !0,
    z2: 1
  });
  f.baseDimIdx = a, f.largeDataIndices = o, f.barWidth = s, t.add(f), f.useStyle(i.getVisual("style")), f.style.stroke = null, He(f).seriesIndex = e.seriesIndex, e.get("silent") || (f.on("mousedown", V5), f.on("mousemove", V5)), r && r.push(f);
}
var V5 = e0(function(e) {
  var t = this, r = yce(t, e.offsetX, e.offsetY);
  He(t).dataIndex = r >= 0 ? r : null;
}, 30, !1);
function yce(e, t, r) {
  for (var n = e.baseDimIdx, i = 1 - n, a = e.shape.points, o = e.largeDataIndices, s = [], l = [], u = e.barWidth, c = 0, f = a.length / 3; c < f; c++) {
    var d = c * 3;
    if (l[n] = u, l[i] = a[d + 2], s[n] = a[d + n], s[i] = a[d + i], l[i] < 0 && (s[i] += l[i], l[i] = -l[i]), t >= s[0] && t <= s[0] + l[0] && r >= s[1] && r <= s[1] + l[1])
      return o[c];
  }
  return -1;
}
function GO(e, t, r) {
  if (Jl(r, "cartesian2d")) {
    var n = t, i = r.getArea();
    return {
      x: e ? n.x : i.x,
      y: e ? i.y : n.y,
      width: e ? n.width : i.width,
      height: e ? i.height : n.height
    };
  } else {
    var i = r.getArea(), a = t;
    return {
      cx: i.cx,
      cy: i.cy,
      r0: e ? i.r0 : a.r0,
      r: e ? i.r : a.r,
      startAngle: e ? a.startAngle : 0,
      endAngle: e ? a.endAngle : Math.PI * 2
    };
  }
}
function xce(e, t, r) {
  var n = e.type === "polar" ? qr : vt;
  return new n({
    shape: GO(t, r, e),
    silent: !0,
    z2: 0
  });
}
function bce(e) {
  e.registerChartView(fce), e.registerSeriesModel(oce), e.registerLayout(e.PRIORITY.VISUAL.LAYOUT, We(X8, "bar")), e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, K8("bar")), e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC, $O("bar")), e.registerAction({
    type: "changeAxisOrder",
    event: "changeAxisOrder",
    update: "update"
  }, function(t, r) {
    var n = t.componentType || "series";
    r.eachComponent({
      mainType: n,
      query: t
    }, function(i) {
      t.sortInfo && i.axis.setCategorySortInfo(t.sortInfo);
    });
  });
}
var B5 = Math.PI * 2, Cv = Math.PI / 180;
function WO(e, t) {
  return vr(e.getBoxLayoutParams(), {
    width: t.getWidth(),
    height: t.getHeight()
  });
}
function UO(e, t) {
  var r = WO(e, t), n = e.get("center"), i = e.get("radius");
  le(i) || (i = [0, i]);
  var a = pe(r.width, t.getWidth()), o = pe(r.height, t.getHeight()), s = Math.min(a, o), l = pe(i[0], s / 2), u = pe(i[1], s / 2), c, f, d = e.coordinateSystem;
  if (d) {
    var h = d.dataToPoint(n);
    c = h[0] || 0, f = h[1] || 0;
  } else
    le(n) || (n = [n, n]), c = pe(n[0], a) + r.x, f = pe(n[1], o) + r.y;
  return {
    cx: c,
    cy: f,
    r0: l,
    r: u
  };
}
function wce(e, t, r) {
  t.eachSeriesByType(e, function(n) {
    var i = n.getData(), a = i.mapDimension("value"), o = WO(n, r), s = UO(n, r), l = s.cx, u = s.cy, c = s.r, f = s.r0, d = -n.get("startAngle") * Cv, h = n.get("endAngle"), p = n.get("padAngle") * Cv;
    h = h === "auto" ? d - B5 : -h * Cv;
    var v = n.get("minAngle") * Cv, g = v + p, m = 0;
    i.each(a, function(P) {
      !isNaN(P) && m++;
    });
    var y = i.getSum(a), b = Math.PI / (y || m) * 2, w = n.get("clockwise"), _ = n.get("roseType"), S = n.get("stillShowZeroSum"), C = i.getDataExtent(a);
    C[0] = 0;
    var A = w ? 1 : -1, M = [d, h], D = A * p / 2;
    uC(M, !w), d = M[0], h = M[1];
    var N = YO(n);
    N.startAngle = d, N.endAngle = h, N.clockwise = w;
    var R = Math.abs(h - d), O = R, E = 0, L = d;
    if (i.setLayout({
      viewRect: o,
      r: c
    }), i.each(a, function(P, k) {
      var z;
      if (isNaN(P)) {
        i.setItemLayout(k, {
          angle: NaN,
          startAngle: NaN,
          endAngle: NaN,
          clockwise: w,
          cx: l,
          cy: u,
          r0: f,
          r: _ ? NaN : c
        });
        return;
      }
      _ !== "area" ? z = y === 0 && S ? b : P * b : z = R / m, z < g ? (z = g, O -= g) : E += P;
      var V = L + A * z, B = 0, F = 0;
      p > z ? (B = L + A * z / 2, F = B) : (B = L + D, F = V - D), i.setItemLayout(k, {
        angle: z,
        startAngle: B,
        endAngle: F,
        clockwise: w,
        cx: l,
        cy: u,
        r0: f,
        r: _ ? Mt(P, C, [f, c]) : c
      }), L = V;
    }), O < B5 && m)
      if (O <= 1e-3) {
        var I = R / m;
        i.each(a, function(P, k) {
          if (!isNaN(P)) {
            var z = i.getItemLayout(k);
            z.angle = I;
            var V = 0, B = 0;
            I < p ? (V = d + A * (k + 1 / 2) * I, B = V) : (V = d + A * k * I + D, B = d + A * (k + 1) * I - D), z.startAngle = V, z.endAngle = B;
          }
        });
      } else
        b = O / E, L = d, i.each(a, function(P, k) {
          if (!isNaN(P)) {
            var z = i.getItemLayout(k), V = z.angle === g ? g : P * b, B = 0, F = 0;
            V < p ? (B = L + A * V / 2, F = B) : (B = L + D, F = L + A * V - D), z.startAngle = B, z.endAngle = F, L += A * V;
          }
        });
  });
}
var YO = yt();
function hp(e) {
  return {
    seriesType: e,
    reset: function(t, r) {
      var n = r.findComponents({
        mainType: "legend"
      });
      if (!(!n || !n.length)) {
        var i = t.getData();
        i.filterSelf(function(a) {
          for (var o = i.getName(a), s = 0; s < n.length; s++)
            if (!n[s].isSelected(o))
              return !1;
          return !0;
        });
      }
    }
  };
}
var _ce = Math.PI / 180;
function F5(e, t, r, n, i, a, o, s, l, u) {
  if (e.length < 2)
    return;
  function c(v) {
    for (var g = v.rB, m = g * g, y = 0; y < v.list.length; y++) {
      var b = v.list[y], w = Math.abs(b.label.y - r), _ = n + b.len, S = _ * _, C = Math.sqrt(Math.abs((1 - w * w / m) * S)), A = t + (C + b.len2) * i, M = A - b.label.x, D = b.targetTextWidth - M * i;
      ZO(b, D, !0), b.label.x = A;
    }
  }
  function f(v) {
    for (var g = {
      list: [],
      maxY: 0
    }, m = {
      list: [],
      maxY: 0
    }, y = 0; y < v.length; y++)
      if (v[y].labelAlignTo === "none") {
        var b = v[y], w = b.label.y > r ? m : g, _ = Math.abs(b.label.y - r);
        if (_ >= w.maxY) {
          var S = b.label.x - t - b.len2 * i, C = n + b.len, A = Math.abs(S) < C ? Math.sqrt(_ * _ / (1 - S * S / C / C)) : C;
          w.rB = A, w.maxY = _;
        }
        w.list.push(b);
      }
    c(g), c(m);
  }
  for (var d = e.length, h = 0; h < d; h++)
    if (e[h].position === "outer" && e[h].labelAlignTo === "labelLine") {
      var p = e[h].label.x - u;
      e[h].linePoints[1][0] += p, e[h].label.x = u;
    }
  mO(e, l, l + o) && f(e);
}
function Sce(e, t, r, n, i, a, o, s) {
  for (var l = [], u = [], c = Number.MAX_VALUE, f = -Number.MAX_VALUE, d = 0; d < e.length; d++) {
    var h = e[d].label;
    Dx(e[d]) || (h.x < t ? (c = Math.min(c, h.x), l.push(e[d])) : (f = Math.max(f, h.x), u.push(e[d])));
  }
  for (var d = 0; d < e.length; d++) {
    var p = e[d];
    if (!Dx(p) && p.linePoints) {
      if (p.labelStyleWidth != null)
        continue;
      var h = p.label, v = p.linePoints, g = void 0;
      p.labelAlignTo === "edge" ? h.x < t ? g = v[2][0] - p.labelDistance - o - p.edgeDistance : g = o + i - p.edgeDistance - v[2][0] - p.labelDistance : p.labelAlignTo === "labelLine" ? h.x < t ? g = c - o - p.bleedMargin : g = o + i - f - p.bleedMargin : h.x < t ? g = h.x - o - p.bleedMargin : g = o + i - h.x - p.bleedMargin, p.targetTextWidth = g, ZO(p, g);
    }
  }
  F5(u, t, r, n, 1, i, a, o, s, f), F5(l, t, r, n, -1, i, a, o, s, c);
  for (var d = 0; d < e.length; d++) {
    var p = e[d];
    if (!Dx(p) && p.linePoints) {
      var h = p.label, v = p.linePoints, m = p.labelAlignTo === "edge", y = h.style.padding, b = y ? y[1] + y[3] : 0, w = h.style.backgroundColor ? 0 : b, _ = p.rect.width + w, S = v[1][0] - v[2][0];
      m ? h.x < t ? v[2][0] = o + p.edgeDistance + _ + p.labelDistance : v[2][0] = o + i - p.edgeDistance - _ - p.labelDistance : (h.x < t ? v[2][0] = h.x + p.labelDistance : v[2][0] = h.x - p.labelDistance, v[1][0] = v[2][0] + S), v[1][1] = v[2][1] = h.y;
    }
  }
}
function ZO(e, t, r) {
  if (r === void 0 && (r = !1), e.labelStyleWidth == null) {
    var n = e.label, i = n.style, a = e.rect, o = i.backgroundColor, s = i.padding, l = s ? s[1] + s[3] : 0, u = i.overflow, c = a.width + (o ? 0 : l);
    if (t < c || r) {
      var f = a.height;
      if (u && u.match("break")) {
        n.setStyle("backgroundColor", null), n.setStyle("width", t - l);
        var d = n.getBoundingRect();
        n.setStyle("width", Math.ceil(d.width)), n.setStyle("backgroundColor", o);
      } else {
        var h = t - l, p = t < c ? h : (
          // Current available width is enough, but the text may have
          // already been wrapped with a smaller available width.
          r ? h > e.unconstrainedWidth ? null : h : null
        );
        n.setStyle("width", p);
      }
      var v = n.getBoundingRect();
      a.width = v.width;
      var g = (n.style.margin || 0) + 2.1;
      a.height = v.height + g, a.y -= (a.height - f) / 2;
    }
  }
}
function Dx(e) {
  return e.position === "center";
}
function Cce(e) {
  var t = e.getData(), r = [], n, i, a = !1, o = (e.get("minShowLabelAngle") || 0) * _ce, s = t.getLayout("viewRect"), l = t.getLayout("r"), u = s.width, c = s.x, f = s.y, d = s.height;
  function h(S) {
    S.ignore = !0;
  }
  function p(S) {
    if (!S.ignore)
      return !0;
    for (var C in S.states)
      if (S.states[C].ignore === !1)
        return !0;
    return !1;
  }
  t.each(function(S) {
    var C = t.getItemGraphicEl(S), A = C.shape, M = C.getTextContent(), D = C.getTextGuideLine(), N = t.getItemModel(S), R = N.getModel("label"), O = R.get("position") || N.get(["emphasis", "label", "position"]), E = R.get("distanceToLabelLine"), L = R.get("alignTo"), I = pe(R.get("edgeDistance"), u), P = R.get("bleedMargin"), k = N.getModel("labelLine"), z = k.get("length");
    z = pe(z, u);
    var V = k.get("length2");
    if (V = pe(V, u), Math.abs(A.endAngle - A.startAngle) < o) {
      j(M.states, h), M.ignore = !0, D && (j(D.states, h), D.ignore = !0);
      return;
    }
    if (p(M)) {
      var B = (A.startAngle + A.endAngle) / 2, F = Math.cos(B), H = Math.sin(B), G, W, X, q;
      n = A.cx, i = A.cy;
      var J = O === "inside" || O === "inner";
      if (O === "center")
        G = A.cx, W = A.cy, q = "center";
      else {
        var U = (J ? (A.r + A.r0) / 2 * F : A.r * F) + n, $ = (J ? (A.r + A.r0) / 2 * H : A.r * H) + i;
        if (G = U + F * 3, W = $ + H * 3, !J) {
          var Y = U + F * (z + l - A.r), Z = $ + H * (z + l - A.r), K = Y + (F < 0 ? -1 : 1) * V, ie = Z;
          L === "edge" ? G = F < 0 ? c + I : c + u - I : G = K + (F < 0 ? -E : E), W = ie, X = [[U, $], [Y, Z], [K, ie]];
        }
        q = J ? "center" : L === "edge" ? F > 0 ? "right" : "left" : F > 0 ? "left" : "right";
      }
      var Q = Math.PI, ce = 0, te = R.get("rotate");
      if (bt(te))
        ce = te * (Q / 180);
      else if (O === "center")
        ce = 0;
      else if (te === "radial" || te === !0) {
        var oe = F < 0 ? -B + Q : -B;
        ce = oe;
      } else if (te === "tangential" && O !== "outside" && O !== "outer") {
        var de = Math.atan2(F, H);
        de < 0 && (de = Q * 2 + de);
        var Pe = H > 0;
        Pe && (de = Q + de), ce = de - Q;
      }
      if (a = !!ce, M.x = G, M.y = W, M.rotation = ce, M.setStyle({
        verticalAlign: "middle"
      }), J) {
        M.setStyle({
          align: q
        });
        var Dt = M.states.select;
        Dt && (Dt.x += M.x, Dt.y += M.y);
      } else {
        var Ke = M.getBoundingRect().clone();
        Ke.applyTransform(M.getComputedTransform());
        var it = (M.style.margin || 0) + 2.1;
        Ke.y -= it / 2, Ke.height += it, r.push({
          label: M,
          labelLine: D,
          position: O,
          len: z,
          len2: V,
          minTurnAngle: k.get("minTurnAngle"),
          maxSurfaceAngle: k.get("maxSurfaceAngle"),
          surfaceNormal: new et(F, H),
          linePoints: X,
          textAlign: q,
          labelDistance: E,
          labelAlignTo: L,
          edgeDistance: I,
          bleedMargin: P,
          rect: Ke,
          unconstrainedWidth: Ke.width,
          labelStyleWidth: M.style.width
        });
      }
      C.setTextConfig({
        inside: J
      });
    }
  }), !a && e.get("avoidLabelOverlap") && Sce(r, n, i, l, u, d, c, f);
  for (var v = 0; v < r.length; v++) {
    var g = r[v], m = g.label, y = g.labelLine, b = isNaN(m.x) || isNaN(m.y);
    if (m) {
      m.setStyle({
        align: g.textAlign
      }), b && (j(m.states, h), m.ignore = !0);
      var w = m.states.select;
      w && (w.x += m.x, w.y += m.y);
    }
    if (y) {
      var _ = g.linePoints;
      b || !_ ? (j(y.states, h), y.ignore = !0) : (pO(_, g.minTurnAngle), Yle(_, g.surfaceNormal, g.maxSurfaceAngle), y.setShape({
        points: _
      }), m.__hostTarget.textGuideLineConfig = {
        anchor: new et(_[0][0], _[0][1])
      });
    }
  }
}
var Tce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this) || this;
      a.z2 = 2;
      var o = new pt();
      return a.setTextContent(o), a.updateData(r, n, i, !0), a;
    }
    return t.prototype.updateData = function(r, n, i, a) {
      var o = this, s = r.hostModel, l = r.getItemModel(n), u = l.getModel("emphasis"), c = r.getItemLayout(n), f = ae(ml(l.getModel("itemStyle"), c, !0), c);
      if (isNaN(f.startAngle)) {
        o.setShape(f);
        return;
      }
      if (a) {
        o.setShape(f);
        var d = s.getShallow("animationType");
        s.ecModel.ssr ? (Wt(o, {
          scaleX: 0,
          scaleY: 0
        }, s, {
          dataIndex: n,
          isFrom: !0
        }), o.originX = f.cx, o.originY = f.cy) : d === "scale" ? (o.shape.r = c.r0, Wt(o, {
          shape: {
            r: c.r
          }
        }, s, n)) : i != null ? (o.setShape({
          startAngle: i,
          endAngle: i
        }), Wt(o, {
          shape: {
            startAngle: c.startAngle,
            endAngle: c.endAngle
          }
        }, s, n)) : (o.shape.endAngle = c.startAngle, _t(o, {
          shape: {
            endAngle: c.endAngle
          }
        }, s, n));
      } else
        Li(o), _t(o, {
          shape: f
        }, s, n);
      o.useStyle(r.getItemVisual(n, "style")), Vr(o, l);
      var h = (c.startAngle + c.endAngle) / 2, p = s.get("selectedOffset"), v = Math.cos(h) * p, g = Math.sin(h) * p, m = l.getShallow("cursor");
      m && o.attr("cursor", m), this._updateLabel(s, r, n), o.ensureState("emphasis").shape = ae({
        r: c.r + (u.get("scale") && u.get("scaleSize") || 0)
      }, ml(u.getModel("itemStyle"), c)), ae(o.ensureState("select"), {
        x: v,
        y: g,
        shape: ml(l.getModel(["select", "itemStyle"]), c)
      }), ae(o.ensureState("blur"), {
        shape: ml(l.getModel(["blur", "itemStyle"]), c)
      });
      var y = o.getTextGuideLine(), b = o.getTextContent();
      y && ae(y.ensureState("select"), {
        x: v,
        y: g
      }), ae(b.ensureState("select"), {
        x: v,
        y: g
      }), Jt(this, u.get("focus"), u.get("blurScope"), u.get("disabled"));
    }, t.prototype._updateLabel = function(r, n, i) {
      var a = this, o = n.getItemModel(i), s = o.getModel("labelLine"), l = n.getItemVisual(i, "style"), u = l && l.fill, c = l && l.opacity;
      Br(a, Cr(o), {
        labelFetcher: n.hostModel,
        labelDataIndex: i,
        inheritColor: u,
        defaultOpacity: c,
        defaultText: r.getFormattedLabel(i, "normal") || n.getName(i)
      });
      var f = a.getTextContent();
      a.setTextConfig({
        // reset position, rotation
        position: null,
        rotation: null
      }), f.attr({
        z2: 10
      });
      var d = r.get(["label", "position"]);
      if (d !== "outside" && d !== "outer")
        a.removeTextGuideLine();
      else {
        var h = this.getTextGuideLine();
        h || (h = new en(), this.setTextGuideLine(h)), iT(this, aT(o), {
          stroke: u,
          opacity: En(s.get(["lineStyle", "opacity"]), c, 1)
        });
      }
    }, t;
  }(qr)
), Ace = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.ignoreLabelLineUpdate = !0, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      var o = r.getData(), s = this._data, l = this.group, u;
      if (!s && o.count() > 0) {
        for (var c = o.getItemLayout(0), f = 1; isNaN(c && c.startAngle) && f < o.count(); ++f)
          c = o.getItemLayout(f);
        c && (u = c.startAngle);
      }
      if (this._emptyCircleSector && l.remove(this._emptyCircleSector), o.count() === 0 && r.get("showEmptyCircle")) {
        var d = YO(r), h = new qr({
          shape: ae(UO(r, i), d)
        });
        h.useStyle(r.getModel("emptyCircleStyle").getItemStyle()), this._emptyCircleSector = h, l.add(h);
      }
      o.diff(s).add(function(p) {
        var v = new Tce(o, p, u);
        o.setItemGraphicEl(p, v), l.add(v);
      }).update(function(p, v) {
        var g = s.getItemGraphicEl(v);
        g.updateData(o, p, u), g.off("click"), l.add(g), o.setItemGraphicEl(p, g);
      }).remove(function(p) {
        var v = s.getItemGraphicEl(p);
        gh(v, r, p);
      }).execute(), Cce(r), r.get("animationTypeUpdate") !== "expansion" && (this._data = o);
    }, t.prototype.dispose = function() {
    }, t.prototype.containPoint = function(r, n) {
      var i = n.getData(), a = i.getItemLayout(0);
      if (a) {
        var o = r[0] - a.cx, s = r[1] - a.cy, l = Math.sqrt(o * o + s * s);
        return l <= a.r && l >= a.r0;
      }
    }, t.type = "pie", t;
  }(It)
);
function wf(e, t, r) {
  t = le(t) && {
    coordDimensions: t
  } || ae({
    encodeDefine: e.getEncode()
  }, t);
  var n = e.getSource(), i = yf(n, t).dimensions, a = new Xr(i, e);
  return a.initData(n, r), a;
}
var pp = (
  /** @class */
  function() {
    function e(t, r) {
      this._getDataWithEncodedVisual = t, this._getRawData = r;
    }
    return e.prototype.getAllNames = function() {
      var t = this._getRawData();
      return t.mapArray(t.getName);
    }, e.prototype.containName = function(t) {
      var r = this._getRawData();
      return r.indexOfName(t) >= 0;
    }, e.prototype.indexOfName = function(t) {
      var r = this._getDataWithEncodedVisual();
      return r.indexOfName(t);
    }, e.prototype.getItemVisual = function(t, r) {
      var n = this._getDataWithEncodedVisual();
      return n.getItemVisual(t, r);
    }, e;
  }()
), Mce = yt(), Ece = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.init = function(r) {
      e.prototype.init.apply(this, arguments), this.legendVisualProvider = new pp(xe(this.getData, this), xe(this.getRawData, this)), this._defaultLabelLine(r);
    }, t.prototype.mergeOption = function() {
      e.prototype.mergeOption.apply(this, arguments);
    }, t.prototype.getInitialData = function() {
      return wf(this, {
        coordDimensions: ["value"],
        encodeDefaulter: We(LC, this)
      });
    }, t.prototype.getDataParams = function(r) {
      var n = this.getData(), i = Mce(n), a = i.seats;
      if (!a) {
        var o = [];
        n.each(n.mapDimension("value"), function(l) {
          o.push(l);
        }), a = i.seats = m9(o, n.hostModel.get("percentPrecision"));
      }
      var s = e.prototype.getDataParams.call(this, r);
      return s.percent = a[r] || 0, s.$vars.push("percent"), s;
    }, t.prototype._defaultLabelLine = function(r) {
      kl(r, "labelLine", ["show"]);
      var n = r.labelLine, i = r.emphasis.labelLine;
      n.show = n.show && r.label.show, i.show = i.show && r.emphasis.label.show;
    }, t.type = "series.pie", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      legendHoverLink: !0,
      colorBy: "data",
      // 默认全局居中
      center: ["50%", "50%"],
      radius: [0, "75%"],
      // 默认顺时针
      clockwise: !0,
      startAngle: 90,
      endAngle: "auto",
      padAngle: 0,
      // 最小角度改为0
      minAngle: 0,
      // If the angle of a sector less than `minShowLabelAngle`,
      // the label will not be displayed.
      minShowLabelAngle: 0,
      // 选中时扇区偏移量
      selectedOffset: 10,
      // 选择模式，默认关闭，可选single，multiple
      // selectedMode: false,
      // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）
      // roseType: null,
      percentPrecision: 2,
      // If still show when all data zero.
      stillShowZeroSum: !0,
      // cursor: null,
      left: 0,
      top: 0,
      right: 0,
      bottom: 0,
      width: null,
      height: null,
      label: {
        // color: 'inherit',
        // If rotate around circle
        rotate: 0,
        show: !0,
        overflow: "truncate",
        // 'outer', 'inside', 'center'
        position: "outer",
        // 'none', 'labelLine', 'edge'. Works only when position is 'outer'
        alignTo: "none",
        // Closest distance between label and chart edge.
        // Works only position is 'outer' and alignTo is 'edge'.
        edgeDistance: "25%",
        // Works only position is 'outer' and alignTo is not 'edge'.
        bleedMargin: 10,
        // Distance between text and label line.
        distanceToLabelLine: 5
        // formatter: 标签文本格式器，同 tooltip.formatter，不支持异步回调
        // 默认使用全局文本样式，详见 textStyle
        // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数
      },
      // Enabled when label.normal.position is 'outer'
      labelLine: {
        show: !0,
        // 引导线两段中的第一段长度
        length: 15,
        // 引导线两段中的第二段长度
        length2: 15,
        smooth: !1,
        minTurnAngle: 90,
        maxSurfaceAngle: 90,
        lineStyle: {
          // color: 各异,
          width: 1,
          type: "solid"
        }
      },
      itemStyle: {
        borderWidth: 1,
        borderJoin: "round"
      },
      showEmptyCircle: !0,
      emptyCircleStyle: {
        color: "lightgray",
        opacity: 1
      },
      labelLayout: {
        // Hide the overlapped label.
        hideOverlap: !0
      },
      emphasis: {
        scale: !0,
        scaleSize: 5
      },
      // If use strategy to avoid label overlapping
      avoidLabelOverlap: !0,
      // Animation type. Valid values: expansion, scale
      animationType: "expansion",
      animationDuration: 1e3,
      // Animation type when update. Valid values: transition, expansion
      animationTypeUpdate: "transition",
      animationEasingUpdate: "cubicInOut",
      animationDurationUpdate: 500,
      animationEasing: "cubicInOut"
    }, t;
  }(zt)
);
function Dce(e) {
  return {
    seriesType: e,
    reset: function(t, r) {
      var n = t.getData();
      n.filterSelf(function(i) {
        var a = n.mapDimension("value"), o = n.get(a, i);
        return !(bt(o) && !isNaN(o) && o < 0);
      });
    }
  };
}
function Nce(e) {
  e.registerChartView(Ace), e.registerSeriesModel(Ece), d8("pie", e.registerAction), e.registerLayout(We(wce, "pie")), e.registerProcessor(hp("pie")), e.registerProcessor(Dce("pie"));
}
var Ice = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return pa(null, this, {
        useEncodeDefaulter: !0
      });
    }, t.prototype.getProgressive = function() {
      var r = this.option.progressive;
      return r ?? (this.option.large ? 5e3 : this.get("progressive"));
    }, t.prototype.getProgressiveThreshold = function() {
      var r = this.option.progressiveThreshold;
      return r ?? (this.option.large ? 1e4 : this.get("progressiveThreshold"));
    }, t.prototype.brushSelector = function(r, n, i) {
      return i.point(n.getItemLayout(r));
    }, t.prototype.getZLevelKey = function() {
      return this.getData().count() > this.getProgressiveThreshold() ? this.id : "";
    }, t.type = "series.scatter", t.dependencies = ["grid", "polar", "geo", "singleAxis", "calendar"], t.defaultOption = {
      coordinateSystem: "cartesian2d",
      // zlevel: 0,
      z: 2,
      legendHoverLink: !0,
      symbolSize: 10,
      // symbolRotate: null,  // 图形旋转控制
      large: !1,
      // Available when large is true
      largeThreshold: 2e3,
      // cursor: null,
      itemStyle: {
        opacity: 0.8
        // color: 各异
      },
      emphasis: {
        scale: !0
      },
      // If clip the overflow graphics
      // Works on cartesian / polar series
      clip: !0,
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      },
      universalTransition: {
        divideShape: "clone"
      }
      // progressive: null
    }, t;
  }(zt)
), XO = 4, Lce = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), Rce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n._off = 0, n.hoverDataIdx = -1, n;
    }
    return t.prototype.getDefaultShape = function() {
      return new Lce();
    }, t.prototype.reset = function() {
      this.notClear = !1, this._off = 0;
    }, t.prototype.buildPath = function(r, n) {
      var i = n.points, a = n.size, o = this.symbolProxy, s = o.shape, l = r.getContext ? r.getContext() : r, u = l && a[0] < XO, c = this.softClipShape, f;
      if (u) {
        this._ctx = l;
        return;
      }
      for (this._ctx = null, f = this._off; f < i.length; ) {
        var d = i[f++], h = i[f++];
        isNaN(d) || isNaN(h) || c && !c.contain(d, h) || (s.x = d - a[0] / 2, s.y = h - a[1] / 2, s.width = a[0], s.height = a[1], o.buildPath(r, s, !0));
      }
      this.incremental && (this._off = f, this.notClear = !0);
    }, t.prototype.afterBrush = function() {
      var r = this.shape, n = r.points, i = r.size, a = this._ctx, o = this.softClipShape, s;
      if (a) {
        for (s = this._off; s < n.length; ) {
          var l = n[s++], u = n[s++];
          isNaN(l) || isNaN(u) || o && !o.contain(l, u) || a.fillRect(l - i[0] / 2, u - i[1] / 2, i[0], i[1]);
        }
        this.incremental && (this._off = s, this.notClear = !0);
      }
    }, t.prototype.findDataIndex = function(r, n) {
      for (var i = this.shape, a = i.points, o = i.size, s = Math.max(o[0], 4), l = Math.max(o[1], 4), u = a.length / 2 - 1; u >= 0; u--) {
        var c = u * 2, f = a[c] - s / 2, d = a[c + 1] - l / 2;
        if (r >= f && n >= d && r <= f + s && n <= d + l)
          return u;
      }
      return -1;
    }, t.prototype.contain = function(r, n) {
      var i = this.transformCoordToLocal(r, n), a = this.getBoundingRect();
      if (r = i[0], n = i[1], a.contain(r, n)) {
        var o = this.hoverDataIdx = this.findDataIndex(r, n);
        return o >= 0;
      }
      return this.hoverDataIdx = -1, !1;
    }, t.prototype.getBoundingRect = function() {
      var r = this._rect;
      if (!r) {
        for (var n = this.shape, i = n.points, a = n.size, o = a[0], s = a[1], l = 1 / 0, u = 1 / 0, c = -1 / 0, f = -1 / 0, d = 0; d < i.length; ) {
          var h = i[d++], p = i[d++];
          l = Math.min(h, l), c = Math.max(h, c), u = Math.min(p, u), f = Math.max(p, f);
        }
        r = this._rect = new tt(l - o / 2, u - s / 2, c - l + o, f - u + s);
      }
      return r;
    }, t;
  }(lt)
), Pce = (
  /** @class */
  function() {
    function e() {
      this.group = new Fe();
    }
    return e.prototype.updateData = function(t, r) {
      this._clear();
      var n = this._create();
      n.setShape({
        points: t.getLayout("points")
      }), this._setCommon(n, t, r);
    }, e.prototype.updateLayout = function(t) {
      var r = t.getLayout("points");
      this.group.eachChild(function(n) {
        if (n.startIndex != null) {
          var i = (n.endIndex - n.startIndex) * 2, a = n.startIndex * 4 * 2;
          r = new Float32Array(r.buffer, a, i);
        }
        n.setShape("points", r), n.reset();
      });
    }, e.prototype.incrementalPrepareUpdate = function(t) {
      this._clear();
    }, e.prototype.incrementalUpdate = function(t, r, n) {
      var i = this._newAdded[0], a = r.getLayout("points"), o = i && i.shape.points;
      if (o && o.length < 2e4) {
        var s = o.length, l = new Float32Array(s + a.length);
        l.set(o), l.set(a, s), i.endIndex = t.end, i.setShape({
          points: l
        });
      } else {
        this._newAdded = [];
        var u = this._create();
        u.startIndex = t.start, u.endIndex = t.end, u.incremental = !0, u.setShape({
          points: a
        }), this._setCommon(u, r, n);
      }
    }, e.prototype.eachRendered = function(t) {
      this._newAdded[0] && t(this._newAdded[0]);
    }, e.prototype._create = function() {
      var t = new Rce({
        cursor: "default"
      });
      return t.ignoreCoarsePointer = !0, this.group.add(t), this._newAdded.push(t), t;
    }, e.prototype._setCommon = function(t, r, n) {
      var i = r.hostModel;
      n = n || {};
      var a = r.getVisual("symbolSize");
      t.setShape("size", a instanceof Array ? a : [a, a]), t.softClipShape = n.clipShape || null, t.symbolProxy = fr(r.getVisual("symbol"), 0, 0, 0, 0), t.setColor = t.symbolProxy.setColor;
      var o = t.shape.size[0] < XO;
      t.useStyle(
        // Draw shadow when doing fillRect is extremely slow.
        i.getModel("itemStyle").getItemStyle(o ? ["color", "shadowBlur", "shadowColor"] : ["color"])
      );
      var s = r.getVisual("style"), l = s && s.fill;
      l && t.setColor(l);
      var u = He(t);
      u.seriesIndex = i.seriesIndex, t.on("mousemove", function(c) {
        u.dataIndex = null;
        var f = t.hoverDataIdx;
        f >= 0 && (u.dataIndex = f + (t.startIndex || 0));
      });
    }, e.prototype.remove = function() {
      this._clear();
    }, e.prototype._clear = function() {
      this._newAdded = [], this.group.removeAll();
    }, e;
  }()
), kce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this._updateSymbolDraw(a, r);
      o.updateData(a, {
        // TODO
        // If this parameter should be a shape or a bounding volume
        // shape will be more general.
        // But bounding volume like bounding rect will be much faster in the contain calculation
        clipShape: this._getClipShape(r)
      }), this._finished = !0;
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      var a = r.getData(), o = this._updateSymbolDraw(a, r);
      o.incrementalPrepareUpdate(a), this._finished = !1;
    }, t.prototype.incrementalRender = function(r, n, i) {
      this._symbolDraw.incrementalUpdate(r, n.getData(), {
        clipShape: this._getClipShape(n)
      }), this._finished = r.end === n.getData().count();
    }, t.prototype.updateTransform = function(r, n, i) {
      var a = r.getData();
      if (this.group.dirty(), !this._finished || a.count() > 1e4)
        return {
          update: !0
        };
      var o = dp("").reset(r, n, i);
      o.progress && o.progress({
        start: 0,
        end: a.count(),
        count: a.count()
      }, a), this._symbolDraw.updateLayout(a);
    }, t.prototype.eachRendered = function(r) {
      this._symbolDraw && this._symbolDraw.eachRendered(r);
    }, t.prototype._getClipShape = function(r) {
      if (r.get("clip", !0)) {
        var n = r.coordinateSystem;
        return n && n.getArea && n.getArea(0.1);
      }
    }, t.prototype._updateSymbolDraw = function(r, n) {
      var i = this._symbolDraw, a = n.pipelineContext, o = a.large;
      return (!i || o !== this._isLargeDraw) && (i && i.remove(), i = this._symbolDraw = o ? new Pce() : new cp(), this._isLargeDraw = o, this.group.removeAll()), this.group.add(i.group), i;
    }, t.prototype.remove = function(r, n) {
      this._symbolDraw && this._symbolDraw.remove(!0), this._symbolDraw = null;
    }, t.prototype.dispose = function() {
    }, t.type = "scatter", t;
  }(It)
), Oce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.type = "grid", t.dependencies = ["xAxis", "yAxis"], t.layoutMode = "box", t.defaultOption = {
      show: !1,
      // zlevel: 0,
      z: 0,
      left: "10%",
      top: 60,
      right: "10%",
      bottom: 70,
      // If grid size contain label
      containLabel: !1,
      // width: {totalWidth} - left - right,
      // height: {totalHeight} - top - bottom,
      backgroundColor: "rgba(0,0,0,0)",
      borderWidth: 1,
      borderColor: "#ccc"
    }, t;
  }(at)
), $w = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getCoordSysModel = function() {
      return this.getReferringComponents("grid", pr).models[0];
    }, t.type = "cartesian2dAxis", t;
  }(at)
);
ir($w, bf);
var KO = {
  show: !0,
  // zlevel: 0,
  z: 0,
  // Inverse the axis.
  inverse: !1,
  // Axis name displayed.
  name: "",
  // 'start' | 'middle' | 'end'
  nameLocation: "end",
  // By degree. By default auto rotate by nameLocation.
  nameRotate: null,
  nameTruncate: {
    maxWidth: null,
    ellipsis: "...",
    placeholder: "."
  },
  // Use global text style by default.
  nameTextStyle: {},
  // The gap between axisName and axisLine.
  nameGap: 15,
  // Default `false` to support tooltip.
  silent: !1,
  // Default `false` to avoid legacy user event listener fail.
  triggerEvent: !1,
  tooltip: {
    show: !1
  },
  axisPointer: {},
  axisLine: {
    show: !0,
    onZero: !0,
    onZeroAxisIndex: null,
    lineStyle: {
      color: "#6E7079",
      width: 1,
      type: "solid"
    },
    // The arrow at both ends the the axis.
    symbol: ["none", "none"],
    symbolSize: [10, 15]
  },
  axisTick: {
    show: !0,
    // Whether axisTick is inside the grid or outside the grid.
    inside: !1,
    // The length of axisTick.
    length: 5,
    lineStyle: {
      width: 1
    }
  },
  axisLabel: {
    show: !0,
    // Whether axisLabel is inside the grid or outside the grid.
    inside: !1,
    rotate: 0,
    // true | false | null/undefined (auto)
    showMinLabel: null,
    // true | false | null/undefined (auto)
    showMaxLabel: null,
    margin: 8,
    // formatter: null,
    fontSize: 12
  },
  splitLine: {
    show: !0,
    showMinLine: !0,
    showMaxLine: !0,
    lineStyle: {
      color: ["#E0E6F1"],
      width: 1,
      type: "solid"
    }
  },
  splitArea: {
    show: !1,
    areaStyle: {
      color: ["rgba(250,250,250,0.2)", "rgba(210,219,238,0.2)"]
    }
  }
}, zce = Xe({
  // The gap at both ends of the axis. For categoryAxis, boolean.
  boundaryGap: !0,
  // Set false to faster category collection.
  deduplication: null,
  // splitArea: {
  // show: false
  // },
  splitLine: {
    show: !1
  },
  axisTick: {
    // If tick is align with label when boundaryGap is true
    alignWithLabel: !1,
    interval: "auto"
  },
  axisLabel: {
    interval: "auto"
  }
}, KO), dT = Xe({
  boundaryGap: [0, 0],
  axisLine: {
    // Not shown when other axis is categoryAxis in cartesian
    show: "auto"
  },
  axisTick: {
    // Not shown when other axis is categoryAxis in cartesian
    show: "auto"
  },
  // TODO
  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]
  splitNumber: 5,
  minorTick: {
    // Minor tick, not available for cateogry axis.
    show: !1,
    // Split number of minor ticks. The value should be in range of (0, 100)
    splitNumber: 5,
    // Length of minor tick
    length: 3,
    // Line style
    lineStyle: {
      // Default to be same with axisTick
    }
  },
  minorSplitLine: {
    show: !1,
    lineStyle: {
      color: "#F4F7FD",
      width: 1
    }
  }
}, KO), jce = Xe({
  splitNumber: 6,
  axisLabel: {
    // To eliminate labels that are not nice
    showMinLabel: !1,
    showMaxLabel: !1,
    rich: {
      primary: {
        fontWeight: "bold"
      }
    }
  },
  splitLine: {
    show: !1
  }
}, dT), Vce = Ie({
  logBase: 10
}, dT);
const qO = {
  category: zce,
  value: dT,
  time: jce,
  log: Vce
};
var Bce = {
  value: 1,
  category: 1,
  time: 1,
  log: 1
};
function jc(e, t, r, n) {
  j(Bce, function(i, a) {
    var o = Xe(Xe({}, qO[a], !0), n, !0), s = (
      /** @class */
      function(l) {
        ee(u, l);
        function u() {
          var c = l !== null && l.apply(this, arguments) || this;
          return c.type = t + "Axis." + a, c;
        }
        return u.prototype.mergeDefaultAndTheme = function(c, f) {
          var d = yh(this), h = d ? hf(c) : {}, p = f.getTheme();
          Xe(c, p.get(a + "Axis")), Xe(c, this.getDefaultOption()), c.type = $5(c), d && us(c, h, d);
        }, u.prototype.optionUpdated = function() {
          var c = this.option;
          c.type === "category" && (this.__ordinalMeta = Pw.createByAxisModel(this));
        }, u.prototype.getCategories = function(c) {
          var f = this.option;
          if (f.type === "category")
            return c ? f.data : this.__ordinalMeta.categories;
        }, u.prototype.getOrdinalMeta = function() {
          return this.__ordinalMeta;
        }, u.type = t + "Axis." + a, u.defaultOption = o, u;
      }(r)
    );
    e.registerComponentModel(s);
  }), e.registerSubTypeDefaulter(t + "Axis", $5);
}
function $5(e) {
  return e.type || (e.data ? "category" : "value");
}
var Fce = (
  /** @class */
  function() {
    function e(t) {
      this.type = "cartesian", this._dimList = [], this._axes = {}, this.name = t || "";
    }
    return e.prototype.getAxis = function(t) {
      return this._axes[t];
    }, e.prototype.getAxes = function() {
      return ue(this._dimList, function(t) {
        return this._axes[t];
      }, this);
    }, e.prototype.getAxesByScale = function(t) {
      return t = t.toLowerCase(), Ct(this.getAxes(), function(r) {
        return r.scale.type === t;
      });
    }, e.prototype.addAxis = function(t) {
      var r = t.dim;
      this._axes[r] = t, this._dimList.push(r);
    }, e;
  }()
), Hw = ["x", "y"];
function H5(e) {
  return e.type === "interval" || e.type === "time";
}
var $ce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "cartesian2d", r.dimensions = Hw, r;
    }
    return t.prototype.calcAffineTransform = function() {
      this._transform = this._invTransform = null;
      var r = this.getAxis("x").scale, n = this.getAxis("y").scale;
      if (!(!H5(r) || !H5(n))) {
        var i = r.getExtent(), a = n.getExtent(), o = this.dataToPoint([i[0], a[0]]), s = this.dataToPoint([i[1], a[1]]), l = i[1] - i[0], u = a[1] - a[0];
        if (!(!l || !u)) {
          var c = (s[0] - o[0]) / l, f = (s[1] - o[1]) / u, d = o[0] - i[0] * c, h = o[1] - a[0] * f, p = this._transform = [c, 0, 0, f, d, h];
          this._invTransform = Ul([], p);
        }
      }
    }, t.prototype.getBaseAxis = function() {
      return this.getAxesByScale("ordinal")[0] || this.getAxesByScale("time")[0] || this.getAxis("x");
    }, t.prototype.containPoint = function(r) {
      var n = this.getAxis("x"), i = this.getAxis("y");
      return n.contain(n.toLocalCoord(r[0])) && i.contain(i.toLocalCoord(r[1]));
    }, t.prototype.containData = function(r) {
      return this.getAxis("x").containData(r[0]) && this.getAxis("y").containData(r[1]);
    }, t.prototype.containZone = function(r, n) {
      var i = this.dataToPoint(r), a = this.dataToPoint(n), o = this.getArea(), s = new tt(i[0], i[1], a[0] - i[0], a[1] - i[1]);
      return o.intersect(s);
    }, t.prototype.dataToPoint = function(r, n, i) {
      i = i || [];
      var a = r[0], o = r[1];
      if (this._transform && a != null && isFinite(a) && o != null && isFinite(o))
        return Ir(i, r, this._transform);
      var s = this.getAxis("x"), l = this.getAxis("y");
      return i[0] = s.toGlobalCoord(s.dataToCoord(a, n)), i[1] = l.toGlobalCoord(l.dataToCoord(o, n)), i;
    }, t.prototype.clampData = function(r, n) {
      var i = this.getAxis("x").scale, a = this.getAxis("y").scale, o = i.getExtent(), s = a.getExtent(), l = i.parse(r[0]), u = a.parse(r[1]);
      return n = n || [], n[0] = Math.min(Math.max(Math.min(o[0], o[1]), l), Math.max(o[0], o[1])), n[1] = Math.min(Math.max(Math.min(s[0], s[1]), u), Math.max(s[0], s[1])), n;
    }, t.prototype.pointToData = function(r, n) {
      var i = [];
      if (this._invTransform)
        return Ir(i, r, this._invTransform);
      var a = this.getAxis("x"), o = this.getAxis("y");
      return i[0] = a.coordToData(a.toLocalCoord(r[0]), n), i[1] = o.coordToData(o.toLocalCoord(r[1]), n), i;
    }, t.prototype.getOtherAxis = function(r) {
      return this.getAxis(r.dim === "x" ? "y" : "x");
    }, t.prototype.getArea = function(r) {
      r = r || 0;
      var n = this.getAxis("x").getGlobalExtent(), i = this.getAxis("y").getGlobalExtent(), a = Math.min(n[0], n[1]) - r, o = Math.min(i[0], i[1]) - r, s = Math.max(n[0], n[1]) - a + r, l = Math.max(i[0], i[1]) - o + r;
      return new tt(a, o, s, l);
    }, t;
  }(Fce)
), Hce = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a, o) {
      var s = e.call(this, r, n, i) || this;
      return s.index = 0, s.type = a || "value", s.position = o || "bottom", s;
    }
    return t.prototype.isHorizontal = function() {
      var r = this.position;
      return r === "top" || r === "bottom";
    }, t.prototype.getGlobalExtent = function(r) {
      var n = this.getExtent();
      return n[0] = this.toGlobalCoord(n[0]), n[1] = this.toGlobalCoord(n[1]), r && n[0] > n[1] && n.reverse(), n;
    }, t.prototype.pointToData = function(r, n) {
      return this.coordToData(this.toLocalCoord(r[this.dim === "x" ? 0 : 1]), n);
    }, t.prototype.setCategorySortInfo = function(r) {
      if (this.type !== "category")
        return !1;
      this.model.option.categorySortInfo = r, this.scale.setSortInfo(r);
    }, t;
  }(ui)
);
function Gw(e, t, r) {
  r = r || {};
  var n = e.coordinateSystem, i = t.axis, a = {}, o = i.getAxesOnZeroOf()[0], s = i.position, l = o ? "onZero" : s, u = i.dim, c = n.getRect(), f = [c.x, c.x + c.width, c.y, c.y + c.height], d = {
    left: 0,
    right: 1,
    top: 0,
    bottom: 1,
    onZero: 2
  }, h = t.get("offset") || 0, p = u === "x" ? [f[2] - h, f[3] + h] : [f[0] - h, f[1] + h];
  if (o) {
    var v = o.toGlobalCoord(o.dataToCoord(0));
    p[d.onZero] = Math.max(Math.min(v, p[1]), p[0]);
  }
  a.position = [u === "y" ? p[d[l]] : f[0], u === "x" ? p[d[l]] : f[3]], a.rotation = Math.PI / 2 * (u === "x" ? 0 : 1);
  var g = {
    top: -1,
    bottom: 1,
    left: -1,
    right: 1
  };
  a.labelDirection = a.tickDirection = a.nameDirection = g[s], a.labelOffset = o ? p[d[s]] - p[d.onZero] : 0, t.get(["axisTick", "inside"]) && (a.tickDirection = -a.tickDirection), ur(r.labelInside, t.get(["axisLabel", "inside"])) && (a.labelDirection = -a.labelDirection);
  var m = t.get(["axisLabel", "rotate"]);
  return a.labelRotate = l === "top" ? -m : m, a.z2 = 1, a;
}
function G5(e) {
  return e.get("coordinateSystem") === "cartesian2d";
}
function W5(e) {
  var t = {
    xAxisModel: null,
    yAxisModel: null
  };
  return j(t, function(r, n) {
    var i = n.replace(/Model$/, ""), a = e.getReferringComponents(i, pr).models[0];
    if (process.env.NODE_ENV !== "production" && !a)
      throw new Error(i + ' "' + En(e.get(i + "Index"), e.get(i + "Id"), 0) + '" not found');
    t[n] = a;
  }), t;
}
var Nx = Math.log;
function JO(e, t, r) {
  var n = eo.prototype, i = n.getTicks.call(r), a = n.getTicks.call(r, !0), o = i.length - 1, s = n.getInterval.call(r), l = tO(e, t), u = l.extent, c = l.fixMin, f = l.fixMax;
  if (e.type === "log") {
    var d = Nx(e.base);
    u = [Nx(u[0]) / d, Nx(u[1]) / d];
  }
  e.setExtent(u[0], u[1]), e.calcNiceExtent({
    splitNumber: o,
    fixMin: c,
    fixMax: f
  });
  var h = n.getExtent.call(e);
  c && (u[0] = h[0]), f && (u[1] = h[1]);
  var p = n.getInterval.call(e), v = u[0], g = u[1];
  if (c && f)
    p = (g - v) / o;
  else if (c)
    for (g = u[0] + p * o; g < u[1] && isFinite(g) && isFinite(u[1]); )
      p = px(p), g = u[0] + p * o;
  else if (f)
    for (v = u[1] - p * o; v > u[0] && isFinite(v) && isFinite(u[0]); )
      p = px(p), v = u[1] - p * o;
  else {
    var m = e.getTicks().length - 1;
    m > o && (p = px(p));
    var y = p * o;
    g = Math.ceil(u[1] / p) * p, v = tr(g - y), v < 0 && u[0] >= 0 ? (v = 0, g = tr(y)) : g > 0 && u[1] <= 0 && (g = 0, v = -tr(y));
  }
  var b = (i[0].value - a[0].value) / s, w = (i[o].value - a[o].value) / s;
  if (n.setExtent.call(e, v + p * b, g + p * w), n.setInterval.call(e, p), (b || w) && n.setNiceExtent.call(e, v + p, g - p), process.env.NODE_ENV !== "production") {
    var _ = n.getTicks.call(e);
    _[1] && (!Bse(p) || rm(_[1].value) > rm(p)) && qt(
      // eslint-disable-next-line
      "The ticks may be not readable when set min: " + t.get("min") + ", max: " + t.get("max") + " and alignTicks: true"
    );
  }
}
var Gce = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.type = "grid", this._coordsMap = {}, this._coordsList = [], this._axesMap = {}, this._axesList = [], this.axisPointerEnabled = !0, this.dimensions = Hw, this._initCartesian(t, r, n), this.model = t;
    }
    return e.prototype.getRect = function() {
      return this._rect;
    }, e.prototype.update = function(t, r) {
      var n = this._axesMap;
      this._updateScale(t, this.model);
      function i(o) {
        var s, l = ut(o), u = l.length;
        if (u) {
          for (var c = [], f = u - 1; f >= 0; f--) {
            var d = +l[f], h = o[d], p = h.model, v = h.scale;
            // Only value and log axis without interval support alignTicks.
            kw(v) && p.get("alignTicks") && p.get("interval") == null ? c.push(h) : (Bl(v, p), kw(v) && (s = h));
          }
          c.length && (s || (s = c.pop(), Bl(s.scale, s.model)), j(c, function(g) {
            JO(g.scale, g.model, s.scale);
          }));
        }
      }
      i(n.x), i(n.y);
      var a = {};
      j(n.x, function(o) {
        U5(n, "y", o, a);
      }), j(n.y, function(o) {
        U5(n, "x", o, a);
      }), this.resize(this.model, r);
    }, e.prototype.resize = function(t, r, n) {
      var i = t.getBoxLayoutParams(), a = !n && t.get("containLabel"), o = vr(i, {
        width: r.getWidth(),
        height: r.getHeight()
      });
      this._rect = o;
      var s = this._axesList;
      l(), a && (j(s, function(u) {
        if (!u.model.get(["axisLabel", "inside"])) {
          var c = cle(u);
          if (c) {
            var f = u.isHorizontal() ? "height" : "width", d = u.model.get(["axisLabel", "margin"]);
            o[f] -= c[f] + d, u.position === "top" ? o.y += c.height + d : u.position === "left" && (o.x += c.width + d);
          }
        }
      }), l()), j(this._coordsList, function(u) {
        u.calcAffineTransform();
      });
      function l() {
        j(s, function(u) {
          var c = u.isHorizontal(), f = c ? [0, o.width] : [0, o.height], d = u.inverse ? 1 : 0;
          u.setExtent(f[d], f[1 - d]), Wce(u, c ? o.x : o.y);
        });
      }
    }, e.prototype.getAxis = function(t, r) {
      var n = this._axesMap[t];
      if (n != null)
        return n[r || 0];
    }, e.prototype.getAxes = function() {
      return this._axesList.slice();
    }, e.prototype.getCartesian = function(t, r) {
      if (t != null && r != null) {
        var n = "x" + t + "y" + r;
        return this._coordsMap[n];
      }
      Ne(t) && (r = t.yAxisIndex, t = t.xAxisIndex);
      for (var i = 0, a = this._coordsList; i < a.length; i++)
        if (a[i].getAxis("x").index === t || a[i].getAxis("y").index === r)
          return a[i];
    }, e.prototype.getCartesians = function() {
      return this._coordsList.slice();
    }, e.prototype.convertToPixel = function(t, r, n) {
      var i = this._findConvertTarget(r);
      return i.cartesian ? i.cartesian.dataToPoint(n) : i.axis ? i.axis.toGlobalCoord(i.axis.dataToCoord(n)) : null;
    }, e.prototype.convertFromPixel = function(t, r, n) {
      var i = this._findConvertTarget(r);
      return i.cartesian ? i.cartesian.pointToData(n) : i.axis ? i.axis.coordToData(i.axis.toLocalCoord(n)) : null;
    }, e.prototype._findConvertTarget = function(t) {
      var r = t.seriesModel, n = t.xAxisModel || r && r.getReferringComponents("xAxis", pr).models[0], i = t.yAxisModel || r && r.getReferringComponents("yAxis", pr).models[0], a = t.gridModel, o = this._coordsList, s, l;
      if (r)
        s = r.coordinateSystem, rt(o, s) < 0 && (s = null);
      else if (n && i)
        s = this.getCartesian(n.componentIndex, i.componentIndex);
      else if (n)
        l = this.getAxis("x", n.componentIndex);
      else if (i)
        l = this.getAxis("y", i.componentIndex);
      else if (a) {
        var u = a.coordinateSystem;
        u === this && (s = this._coordsList[0]);
      }
      return {
        cartesian: s,
        axis: l
      };
    }, e.prototype.containPoint = function(t) {
      var r = this._coordsList[0];
      if (r)
        return r.containPoint(t);
    }, e.prototype._initCartesian = function(t, r, n) {
      var i = this, a = this, o = {
        left: !1,
        right: !1,
        top: !1,
        bottom: !1
      }, s = {
        x: {},
        y: {}
      }, l = {
        x: 0,
        y: 0
      };
      if (r.eachComponent("xAxis", u("x"), this), r.eachComponent("yAxis", u("y"), this), !l.x || !l.y) {
        this._axesMap = {}, this._axesList = [];
        return;
      }
      this._axesMap = s, j(s.x, function(c, f) {
        j(s.y, function(d, h) {
          var p = "x" + f + "y" + h, v = new $ce(p);
          v.master = i, v.model = t, i._coordsMap[p] = v, i._coordsList.push(v), v.addAxis(c), v.addAxis(d);
        });
      });
      function u(c) {
        return function(f, d) {
          if (Ix(f, t)) {
            var h = f.get("position");
            c === "x" ? h !== "top" && h !== "bottom" && (h = o.bottom ? "top" : "bottom") : h !== "left" && h !== "right" && (h = o.left ? "right" : "left"), o[h] = !0;
            var p = new Hce(c, lp(f), [0, 0], f.get("type"), h), v = p.type === "category";
            p.onBand = v && f.get("boundaryGap"), p.inverse = f.get("inverse"), f.axis = p, p.model = f, p.grid = a, p.index = d, a._axesList.push(p), s[c][d] = p, l[c]++;
          }
        };
      }
    }, e.prototype._updateScale = function(t, r) {
      j(this._axesList, function(i) {
        if (i.scale.setExtent(1 / 0, -1 / 0), i.type === "category") {
          var a = i.model.get("categorySortInfo");
          i.scale.setSortInfo(a);
        }
      }), t.eachSeries(function(i) {
        if (G5(i)) {
          var a = W5(i), o = a.xAxisModel, s = a.yAxisModel;
          if (!Ix(o, r) || !Ix(s, r))
            return;
          var l = this.getCartesian(o.componentIndex, s.componentIndex), u = i.getData(), c = l.getAxis("x"), f = l.getAxis("y");
          n(u, c), n(u, f);
        }
      }, this);
      function n(i, a) {
        j(Sm(i, a.dim), function(o) {
          a.scale.unionExtentFromData(i, o);
        });
      }
    }, e.prototype.getTooltipAxes = function(t) {
      var r = [], n = [];
      return j(this.getCartesians(), function(i) {
        var a = t != null && t !== "auto" ? i.getAxis(t) : i.getBaseAxis(), o = i.getOtherAxis(a);
        rt(r, a) < 0 && r.push(a), rt(n, o) < 0 && n.push(o);
      }), {
        baseAxes: r,
        otherAxes: n
      };
    }, e.create = function(t, r) {
      var n = [];
      return t.eachComponent("grid", function(i, a) {
        var o = new e(i, t, r);
        o.name = "grid_" + a, o.resize(i, r, !0), i.coordinateSystem = o, n.push(o);
      }), t.eachSeries(function(i) {
        if (G5(i)) {
          var a = W5(i), o = a.xAxisModel, s = a.yAxisModel, l = o.getCoordSysModel();
          if (process.env.NODE_ENV !== "production") {
            if (!l)
              throw new Error('Grid "' + En(o.get("gridIndex"), o.get("gridId"), 0) + '" not found');
            if (o.getCoordSysModel() !== s.getCoordSysModel())
              throw new Error("xAxis and yAxis must use the same grid");
          }
          var u = l.coordinateSystem;
          i.coordinateSystem = u.getCartesian(o.componentIndex, s.componentIndex);
        }
      }), n;
    }, e.dimensions = Hw, e;
  }()
);
function Ix(e, t) {
  return e.getCoordSysModel() === t;
}
function U5(e, t, r, n) {
  r.getAxesOnZeroOf = function() {
    return a ? [a] : [];
  };
  var i = e[t], a, o = r.model, s = o.get(["axisLine", "onZero"]), l = o.get(["axisLine", "onZeroAxisIndex"]);
  if (!s)
    return;
  if (l != null)
    Y5(i[l]) && (a = i[l]);
  else
    for (var u in i)
      if (i.hasOwnProperty(u) && Y5(i[u]) && !n[c(i[u])]) {
        a = i[u];
        break;
      }
  a && (n[c(a)] = !0);
  function c(f) {
    return f.dim + "_" + f.index;
  }
}
function Y5(e) {
  return e && e.type !== "category" && e.type !== "time" && ule(e);
}
function Wce(e, t) {
  var r = e.getExtent(), n = r[0] + r[1];
  e.toGlobalCoord = e.dim === "x" ? function(i) {
    return i + t;
  } : function(i) {
    return n - i + t;
  }, e.toLocalCoord = e.dim === "x" ? function(i) {
    return i - t;
  } : function(i) {
    return n - i + t;
  };
}
var Fo = Math.PI, sn = (
  /** @class */
  function() {
    function e(t, r) {
      this.group = new Fe(), this.opt = r, this.axisModel = t, Ie(r, {
        labelOffset: 0,
        nameDirection: 1,
        tickDirection: 1,
        labelDirection: 1,
        silent: !0,
        handleAutoShown: function() {
          return !0;
        }
      });
      var n = new Fe({
        x: r.position[0],
        y: r.position[1],
        rotation: r.rotation
      });
      n.updateTransform(), this._transformGroup = n;
    }
    return e.prototype.hasBuilder = function(t) {
      return !!Z5[t];
    }, e.prototype.add = function(t) {
      Z5[t](this.opt, this.axisModel, this.group, this._transformGroup);
    }, e.prototype.getGroup = function() {
      return this.group;
    }, e.innerTextLayout = function(t, r, n) {
      var i = nC(r - t), a, o;
      return Ic(i) ? (o = n > 0 ? "top" : "bottom", a = "center") : Ic(i - Fo) ? (o = n > 0 ? "bottom" : "top", a = "center") : (o = "middle", i > 0 && i < Fo ? a = n > 0 ? "right" : "left" : a = n > 0 ? "left" : "right"), {
        rotation: i,
        textAlign: a,
        textVerticalAlign: o
      };
    }, e.makeAxisEventDataBase = function(t) {
      var r = {
        componentType: t.mainType,
        componentIndex: t.componentIndex
      };
      return r[t.mainType + "Index"] = t.componentIndex, r;
    }, e.isLabelSilent = function(t) {
      var r = t.get("tooltip");
      return t.get("silent") || !(t.get("triggerEvent") || r && r.show);
    }, e;
  }()
), Z5 = {
  axisLine: function(e, t, r, n) {
    var i = t.get(["axisLine", "show"]);
    if (i === "auto" && e.handleAutoShown && (i = e.handleAutoShown("axisLine")), !!i) {
      var a = t.axis.getExtent(), o = n.transform, s = [a[0], 0], l = [a[1], 0], u = s[0] > l[0];
      o && (Ir(s, s, o), Ir(l, l, o));
      var c = ae({
        lineCap: "round"
      }, t.getModel(["axisLine", "lineStyle"]).getLineStyle()), f = new xr({
        shape: {
          x1: s[0],
          y1: s[1],
          x2: l[0],
          y2: l[1]
        },
        style: c,
        strokeContainThreshold: e.strokeContainThreshold || 5,
        silent: !0,
        z2: 1
      });
      Pc(f.shape, f.style.lineWidth), f.anid = "line", r.add(f);
      var d = t.get(["axisLine", "symbol"]);
      if (d != null) {
        var h = t.get(["axisLine", "symbolSize"]);
        ge(d) && (d = [d, d]), (ge(h) || bt(h)) && (h = [h, h]);
        var p = ql(t.get(["axisLine", "symbolOffset"]) || 0, h), v = h[0], g = h[1];
        j([{
          rotate: e.rotation + Math.PI / 2,
          offset: p[0],
          r: 0
        }, {
          rotate: e.rotation - Math.PI / 2,
          offset: p[1],
          r: Math.sqrt((s[0] - l[0]) * (s[0] - l[0]) + (s[1] - l[1]) * (s[1] - l[1]))
        }], function(m, y) {
          if (d[y] !== "none" && d[y] != null) {
            var b = fr(d[y], -v / 2, -g / 2, v, g, c.stroke, !0), w = m.r + m.offset, _ = u ? l : s;
            b.attr({
              rotation: m.rotate,
              x: _[0] + w * Math.cos(e.rotation),
              y: _[1] - w * Math.sin(e.rotation),
              silent: !0,
              z2: 11
            }), r.add(b);
          }
        });
      }
    }
  },
  axisTickLabel: function(e, t, r, n) {
    var i = Zce(r, n, t, e), a = Kce(r, n, t, e);
    if (Yce(t, a, i), Xce(r, n, t, e.tickDirection), t.get(["axisLabel", "hideOverlap"])) {
      var o = vO(ue(a, function(s) {
        return {
          label: s,
          priority: s.z2,
          defaultAttr: {
            ignore: s.ignore
          }
        };
      }));
      yO(o);
    }
  },
  axisName: function(e, t, r, n) {
    var i = ur(e.axisName, t.get("name"));
    if (i) {
      var a = t.get("nameLocation"), o = e.nameDirection, s = t.getModel("nameTextStyle"), l = t.get("nameGap") || 0, u = t.axis.getExtent(), c = u[0] > u[1] ? -1 : 1, f = [
        a === "start" ? u[0] - c * l : a === "end" ? u[1] + c * l : (u[0] + u[1]) / 2,
        // Reuse labelOffset.
        K5(a) ? e.labelOffset + o * l : 0
      ], d, h = t.get("nameRotate");
      h != null && (h = h * Fo / 180);
      var p;
      K5(a) ? d = sn.innerTextLayout(
        e.rotation,
        h ?? e.rotation,
        // Adapt to axis.
        o
      ) : (d = Uce(e.rotation, a, h || 0, u), p = e.axisNameAvailableWidth, p != null && (p = Math.abs(p / Math.sin(d.rotation)), !isFinite(p) && (p = null)));
      var v = s.getFont(), g = t.get("nameTruncate", !0) || {}, m = g.ellipsis, y = ur(e.nameTruncateMaxWidth, g.maxWidth, p), b = new pt({
        x: f[0],
        y: f[1],
        rotation: d.rotation,
        silent: sn.isLabelSilent(t),
        style: Vt(s, {
          text: i,
          font: v,
          overflow: "truncate",
          width: y,
          ellipsis: m,
          fill: s.getTextColor() || t.get(["axisLine", "lineStyle", "color"]),
          align: s.get("align") || d.textAlign,
          verticalAlign: s.get("verticalAlign") || d.textVerticalAlign
        }),
        z2: 1
      });
      if (Yl({
        el: b,
        componentModel: t,
        itemName: i
      }), b.__fullText = i, b.anid = "name", t.get("triggerEvent")) {
        var w = sn.makeAxisEventDataBase(t);
        w.targetType = "axisName", w.name = i, He(b).eventData = w;
      }
      n.add(b), b.updateTransform(), r.add(b), b.decomposeTransform();
    }
  }
};
function Uce(e, t, r, n) {
  var i = nC(r - e), a, o, s = n[0] > n[1], l = t === "start" && !s || t !== "start" && s;
  return Ic(i - Fo / 2) ? (o = l ? "bottom" : "top", a = "center") : Ic(i - Fo * 1.5) ? (o = l ? "top" : "bottom", a = "center") : (o = "middle", i < Fo * 1.5 && i > Fo / 2 ? a = l ? "left" : "right" : a = l ? "right" : "left"), {
    rotation: i,
    textAlign: a,
    textVerticalAlign: o
  };
}
function Yce(e, t, r) {
  if (!rO(e.axis)) {
    var n = e.get(["axisLabel", "showMinLabel"]), i = e.get(["axisLabel", "showMaxLabel"]);
    t = t || [], r = r || [];
    var a = t[0], o = t[1], s = t[t.length - 1], l = t[t.length - 2], u = r[0], c = r[1], f = r[r.length - 1], d = r[r.length - 2];
    n === !1 ? (On(a), On(u)) : X5(a, o) && (n ? (On(o), On(c)) : (On(a), On(u))), i === !1 ? (On(s), On(f)) : X5(l, s) && (i ? (On(l), On(d)) : (On(s), On(f)));
  }
}
function On(e) {
  e && (e.ignore = !0);
}
function X5(e, t) {
  var r = e && e.getBoundingRect().clone(), n = t && t.getBoundingRect().clone();
  if (!(!r || !n)) {
    var i = Kh([]);
    return vs(i, i, -e.rotation), r.applyTransform(na([], i, e.getLocalTransform())), n.applyTransform(na([], i, t.getLocalTransform())), r.intersect(n);
  }
}
function K5(e) {
  return e === "middle" || e === "center";
}
function QO(e, t, r, n, i) {
  for (var a = [], o = [], s = [], l = 0; l < e.length; l++) {
    var u = e[l].coord;
    o[0] = u, o[1] = 0, s[0] = u, s[1] = r, t && (Ir(o, o, t), Ir(s, s, t));
    var c = new xr({
      shape: {
        x1: o[0],
        y1: o[1],
        x2: s[0],
        y2: s[1]
      },
      style: n,
      z2: 2,
      autoBatch: !0,
      silent: !0
    });
    Pc(c.shape, c.style.lineWidth), c.anid = i + "_" + e[l].tickValue, a.push(c);
  }
  return a;
}
function Zce(e, t, r, n) {
  var i = r.axis, a = r.getModel("axisTick"), o = a.get("show");
  if (o === "auto" && n.handleAutoShown && (o = n.handleAutoShown("axisTick")), !(!o || i.scale.isBlank())) {
    for (var s = a.getModel("lineStyle"), l = n.tickDirection * a.get("length"), u = i.getTicksCoords(), c = QO(u, t.transform, l, Ie(s.getLineStyle(), {
      stroke: r.get(["axisLine", "lineStyle", "color"])
    }), "ticks"), f = 0; f < c.length; f++)
      e.add(c[f]);
    return c;
  }
}
function Xce(e, t, r, n) {
  var i = r.axis, a = r.getModel("minorTick");
  if (!(!a.get("show") || i.scale.isBlank())) {
    var o = i.getMinorTicksCoords();
    if (o.length)
      for (var s = a.getModel("lineStyle"), l = n * a.get("length"), u = Ie(s.getLineStyle(), Ie(r.getModel("axisTick").getLineStyle(), {
        stroke: r.get(["axisLine", "lineStyle", "color"])
      })), c = 0; c < o.length; c++)
        for (var f = QO(o[c], t.transform, l, u, "minorticks_" + c), d = 0; d < f.length; d++)
          e.add(f[d]);
  }
}
function Kce(e, t, r, n) {
  var i = r.axis, a = ur(n.axisLabelShow, r.get(["axisLabel", "show"]));
  if (!(!a || i.scale.isBlank())) {
    var o = r.getModel("axisLabel"), s = o.get("margin"), l = i.getViewLabels(), u = (ur(n.labelRotate, o.get("rotate")) || 0) * Fo / 180, c = sn.innerTextLayout(n.rotation, u, n.labelDirection), f = r.getCategories && r.getCategories(!0), d = [], h = sn.isLabelSilent(r), p = r.get("triggerEvent");
    return j(l, function(v, g) {
      var m = i.scale.type === "ordinal" ? i.scale.getRawOrdinalNumber(v.tickValue) : v.tickValue, y = v.formattedLabel, b = v.rawLabel, w = o;
      if (f && f[m]) {
        var _ = f[m];
        Ne(_) && _.textStyle && (w = new Tt(_.textStyle, o, r.ecModel));
      }
      var S = w.getTextColor() || r.get(["axisLine", "lineStyle", "color"]), C = i.dataToCoord(m), A = w.getShallow("align", !0) || c.textAlign, M = Ge(w.getShallow("alignMinLabel", !0), A), D = Ge(w.getShallow("alignMaxLabel", !0), A), N = w.getShallow("verticalAlign", !0) || w.getShallow("baseline", !0) || c.textVerticalAlign, R = Ge(w.getShallow("verticalAlignMinLabel", !0), N), O = Ge(w.getShallow("verticalAlignMaxLabel", !0), N), E = new pt({
        x: C,
        y: n.labelOffset + n.labelDirection * s,
        rotation: c.rotation,
        silent: h,
        z2: 10 + (v.level || 0),
        style: Vt(w, {
          text: y,
          align: g === 0 ? M : g === l.length - 1 ? D : A,
          verticalAlign: g === 0 ? R : g === l.length - 1 ? O : N,
          fill: Ee(S) ? S(
            // (1) In category axis with data zoom, tick is not the original
            // index of axis.data. So tick should not be exposed to user
            // in category axis.
            // (2) Compatible with previous version, which always use formatted label as
            // input. But in interval scale the formatted label is like '223,445', which
            // maked user replace ','. So we modify it to return original val but remain
            // it as 'string' to avoid error in replacing.
            i.type === "category" ? b : i.type === "value" ? m + "" : m,
            g
          ) : S
        })
      });
      if (E.anid = "label_" + m, Yl({
        el: E,
        componentModel: r,
        itemName: y,
        formatterParamsExtra: {
          isTruncated: function() {
            return E.isTruncated;
          },
          value: b,
          tickIndex: g
        }
      }), p) {
        var L = sn.makeAxisEventDataBase(r);
        L.targetType = "axisLabel", L.value = b, L.tickIndex = g, i.type === "category" && (L.dataIndex = m), He(E).eventData = L;
      }
      t.add(E), E.updateTransform(), d.push(E), e.add(E), E.decomposeTransform();
    }), d;
  }
}
function qce(e, t) {
  var r = {
    /**
     * key: makeKey(axis.model)
     * value: {
     *      axis,
     *      coordSys,
     *      axisPointerModel,
     *      triggerTooltip,
     *      triggerEmphasis,
     *      involveSeries,
     *      snap,
     *      seriesModels,
     *      seriesDataCount
     * }
     */
    axesInfo: {},
    seriesInvolved: !1,
    /**
     * key: makeKey(coordSys.model)
     * value: Object: key makeKey(axis.model), value: axisInfo
     */
    coordSysAxesInfo: {},
    coordSysMap: {}
  };
  return Jce(r, e, t), r.seriesInvolved && efe(r, e), r;
}
function Jce(e, t, r) {
  var n = t.getComponent("tooltip"), i = t.getComponent("axisPointer"), a = i.get("link", !0) || [], o = [];
  j(r.getCoordinateSystems(), function(s) {
    if (!s.axisPointerEnabled)
      return;
    var l = Mh(s.model), u = e.coordSysAxesInfo[l] = {};
    e.coordSysMap[l] = s;
    var c = s.model, f = c.getModel("tooltip", n);
    if (j(s.getAxes(), We(v, !1, null)), s.getTooltipAxes && n && f.get("show")) {
      var d = f.get("trigger") === "axis", h = f.get(["axisPointer", "type"]) === "cross", p = s.getTooltipAxes(f.get(["axisPointer", "axis"]));
      (d || h) && j(p.baseAxes, We(v, h ? "cross" : !0, d)), h && j(p.otherAxes, We(v, "cross", !1));
    }
    function v(g, m, y) {
      var b = y.model.getModel("axisPointer", i), w = b.get("show");
      if (!(!w || w === "auto" && !g && !Ww(b))) {
        m == null && (m = b.get("triggerTooltip")), b = g ? Qce(y, f, i, t, g, m) : b;
        var _ = b.get("snap"), S = b.get("triggerEmphasis"), C = Mh(y.model), A = m || _ || y.type === "category", M = e.axesInfo[C] = {
          key: C,
          axis: y,
          coordSys: s,
          axisPointerModel: b,
          triggerTooltip: m,
          triggerEmphasis: S,
          involveSeries: A,
          snap: _,
          useHandle: Ww(b),
          seriesModels: [],
          linkGroup: null
        };
        u[C] = M, e.seriesInvolved = e.seriesInvolved || A;
        var D = tfe(a, y);
        if (D != null) {
          var N = o[D] || (o[D] = {
            axesInfo: {}
          });
          N.axesInfo[C] = M, N.mapper = a[D].mapper, M.linkGroup = N;
        }
      }
    }
  });
}
function Qce(e, t, r, n, i, a) {
  var o = t.getModel("axisPointer"), s = ["type", "snap", "lineStyle", "shadowStyle", "label", "animation", "animationDurationUpdate", "animationEasingUpdate", "z"], l = {};
  j(s, function(d) {
    l[d] = ze(o.get(d));
  }), l.snap = e.type !== "category" && !!a, o.get("type") === "cross" && (l.type = "line");
  var u = l.label || (l.label = {});
  if (u.show == null && (u.show = !1), i === "cross") {
    var c = o.get(["label", "show"]);
    if (u.show = c ?? !0, !a) {
      var f = l.lineStyle = o.get("crossStyle");
      f && Ie(u, f.textStyle);
    }
  }
  return e.model.getModel("axisPointer", new Tt(l, r, n));
}
function efe(e, t) {
  t.eachSeries(function(r) {
    var n = r.coordinateSystem, i = r.get(["tooltip", "trigger"], !0), a = r.get(["tooltip", "show"], !0);
    !n || i === "none" || i === !1 || i === "item" || a === !1 || r.get(["axisPointer", "show"], !0) === !1 || j(e.coordSysAxesInfo[Mh(n.model)], function(o) {
      var s = o.axis;
      n.getAxis(s.dim) === s && (o.seriesModels.push(r), o.seriesDataCount == null && (o.seriesDataCount = 0), o.seriesDataCount += r.getData().count());
    });
  });
}
function tfe(e, t) {
  for (var r = t.model, n = t.dim, i = 0; i < e.length; i++) {
    var a = e[i] || {};
    if (Lx(a[n + "AxisId"], r.id) || Lx(a[n + "AxisIndex"], r.componentIndex) || Lx(a[n + "AxisName"], r.name))
      return i;
  }
}
function Lx(e, t) {
  return e === "all" || le(e) && rt(e, t) >= 0 || e === t;
}
function rfe(e) {
  var t = hT(e);
  if (t) {
    var r = t.axisPointerModel, n = t.axis.scale, i = r.option, a = r.get("status"), o = r.get("value");
    o != null && (o = n.parse(o));
    var s = Ww(r);
    a == null && (i.status = s ? "show" : "hide");
    var l = n.getExtent().slice();
    l[0] > l[1] && l.reverse(), // Pick a value on axis when initializing.
    (o == null || o > l[1]) && (o = l[1]), o < l[0] && (o = l[0]), i.value = o, s && (i.status = t.axis.scale.isBlank() ? "hide" : "show");
  }
}
function hT(e) {
  var t = (e.ecModel.getComponent("axisPointer") || {}).coordSysAxesInfo;
  return t && t.axesInfo[Mh(e)];
}
function nfe(e) {
  var t = hT(e);
  return t && t.axisPointerModel;
}
function Ww(e) {
  return !!e.get(["handle", "show"]);
}
function Mh(e) {
  return e.type + "||" + e.id;
}
var Rx = {}, Ql = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      this.axisPointerClass && rfe(r), e.prototype.render.apply(this, arguments), this._doUpdateAxisPointerClass(r, i, !0);
    }, t.prototype.updateAxisPointer = function(r, n, i, a) {
      this._doUpdateAxisPointerClass(r, i, !1);
    }, t.prototype.remove = function(r, n) {
      var i = this._axisPointer;
      i && i.remove(n);
    }, t.prototype.dispose = function(r, n) {
      this._disposeAxisPointer(n), e.prototype.dispose.apply(this, arguments);
    }, t.prototype._doUpdateAxisPointerClass = function(r, n, i) {
      var a = t.getAxisPointerClass(this.axisPointerClass);
      if (a) {
        var o = nfe(r);
        o ? (this._axisPointer || (this._axisPointer = new a())).render(r, o, n, i) : this._disposeAxisPointer(n);
      }
    }, t.prototype._disposeAxisPointer = function(r) {
      this._axisPointer && this._axisPointer.dispose(r), this._axisPointer = null;
    }, t.registerAxisPointerClass = function(r, n) {
      if (process.env.NODE_ENV !== "production" && Rx[r])
        throw new Error("axisPointer " + r + " exists");
      Rx[r] = n;
    }, t.getAxisPointerClass = function(r) {
      return r && Rx[r];
    }, t.type = "axis", t;
  }($t)
), Uw = yt();
function ez(e, t, r, n) {
  var i = r.axis;
  if (!i.scale.isBlank()) {
    var a = r.getModel("splitArea"), o = a.getModel("areaStyle"), s = o.get("color"), l = n.coordinateSystem.getRect(), u = i.getTicksCoords({
      tickModel: a,
      clamp: !0
    });
    if (u.length) {
      var c = s.length, f = Uw(e).splitAreaColors, d = Ce(), h = 0;
      if (f)
        for (var p = 0; p < u.length; p++) {
          var v = f.get(u[p].tickValue);
          if (v != null) {
            h = (v + (c - 1) * p) % c;
            break;
          }
        }
      var g = i.toGlobalCoord(u[0].coord), m = o.getAreaStyle();
      s = le(s) ? s : [s];
      for (var p = 1; p < u.length; p++) {
        var y = i.toGlobalCoord(u[p].coord), b = void 0, w = void 0, _ = void 0, S = void 0;
        i.isHorizontal() ? (b = g, w = l.y, _ = y - b, S = l.height, g = b + _) : (b = l.x, w = g, _ = l.width, S = y - w, g = w + S);
        var C = u[p - 1].tickValue;
        C != null && d.set(C, h), t.add(new vt({
          anid: C != null ? "area_" + C : null,
          shape: {
            x: b,
            y: w,
            width: _,
            height: S
          },
          style: Ie({
            fill: s[h]
          }, m),
          autoBatch: !0,
          silent: !0
        })), h = (h + 1) % c;
      }
      Uw(e).splitAreaColors = d;
    }
  }
}
function tz(e) {
  Uw(e).splitAreaColors = null;
}
var ife = ["axisLine", "axisTickLabel", "axisName"], afe = ["splitArea", "splitLine", "minorSplitLine"], rz = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.axisPointerClass = "CartesianAxisPointer", r;
    }
    return t.prototype.render = function(r, n, i, a) {
      this.group.removeAll();
      var o = this._axisGroup;
      if (this._axisGroup = new Fe(), this.group.add(this._axisGroup), !!r.get("show")) {
        var s = r.getCoordSysModel(), l = Gw(s, r), u = new sn(r, ae({
          handleAutoShown: function(f) {
            for (var d = s.coordinateSystem.getCartesians(), h = 0; h < d.length; h++)
              if (kw(d[h].getOtherAxis(r.axis).scale))
                return !0;
            return !1;
          }
        }, l));
        j(ife, u.add, u), this._axisGroup.add(u.getGroup()), j(afe, function(f) {
          r.get([f, "show"]) && ofe[f](this, this._axisGroup, r, s);
        }, this);
        var c = a && a.type === "changeAxisOrder" && a.isInitSort;
        c || ap(o, this._axisGroup, r), e.prototype.render.call(this, r, n, i, a);
      }
    }, t.prototype.remove = function() {
      tz(this);
    }, t.type = "cartesianAxis", t;
  }(Ql)
), ofe = {
  splitLine: function(e, t, r, n) {
    var i = r.axis;
    if (!i.scale.isBlank()) {
      var a = r.getModel("splitLine"), o = a.getModel("lineStyle"), s = o.get("color"), l = a.get("showMinLine") !== !1, u = a.get("showMaxLine") !== !1;
      s = le(s) ? s : [s];
      for (var c = n.coordinateSystem.getRect(), f = i.isHorizontal(), d = 0, h = i.getTicksCoords({
        tickModel: a
      }), p = [], v = [], g = o.getLineStyle(), m = 0; m < h.length; m++) {
        var y = i.toGlobalCoord(h[m].coord);
        if (!(m === 0 && !l || m === h.length - 1 && !u)) {
          var b = h[m].tickValue;
          f ? (p[0] = y, p[1] = c.y, v[0] = y, v[1] = c.y + c.height) : (p[0] = c.x, p[1] = y, v[0] = c.x + c.width, v[1] = y);
          var w = d++ % s.length, _ = new xr({
            anid: b != null ? "line_" + b : null,
            autoBatch: !0,
            shape: {
              x1: p[0],
              y1: p[1],
              x2: v[0],
              y2: v[1]
            },
            style: Ie({
              stroke: s[w]
            }, g),
            silent: !0
          });
          Pc(_.shape, g.lineWidth), t.add(_);
        }
      }
    }
  },
  minorSplitLine: function(e, t, r, n) {
    var i = r.axis, a = r.getModel("minorSplitLine"), o = a.getModel("lineStyle"), s = n.coordinateSystem.getRect(), l = i.isHorizontal(), u = i.getMinorTicksCoords();
    if (u.length)
      for (var c = [], f = [], d = o.getLineStyle(), h = 0; h < u.length; h++)
        for (var p = 0; p < u[h].length; p++) {
          var v = i.toGlobalCoord(u[h][p].coord);
          l ? (c[0] = v, c[1] = s.y, f[0] = v, f[1] = s.y + s.height) : (c[0] = s.x, c[1] = v, f[0] = s.x + s.width, f[1] = v);
          var g = new xr({
            anid: "minor_line_" + u[h][p].tickValue,
            autoBatch: !0,
            shape: {
              x1: c[0],
              y1: c[1],
              x2: f[0],
              y2: f[1]
            },
            style: d,
            silent: !0
          });
          Pc(g.shape, d.lineWidth), t.add(g);
        }
  },
  splitArea: function(e, t, r, n) {
    ez(e, t, r, n);
  }
}, nz = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "xAxis", t;
  }(rz)
), sfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = nz.type, r;
    }
    return t.type = "yAxis", t;
  }(rz)
), lfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "grid", r;
    }
    return t.prototype.render = function(r, n) {
      this.group.removeAll(), r.get("show") && this.group.add(new vt({
        shape: r.coordinateSystem.getRect(),
        style: Ie({
          fill: r.get("backgroundColor")
        }, r.getItemStyle()),
        silent: !0,
        z2: -1
      }));
    }, t.type = "grid", t;
  }($t)
), q5 = {
  // gridIndex: 0,
  // gridId: '',
  offset: 0
};
function iz(e) {
  e.registerComponentView(lfe), e.registerComponentModel(Oce), e.registerCoordinateSystem("cartesian2d", Gce), jc(e, "x", $w, q5), jc(e, "y", $w, q5), e.registerComponentView(nz), e.registerComponentView(sfe), e.registerPreprocessor(function(t) {
    t.xAxis && t.yAxis && !t.grid && (t.grid = {});
  });
}
function ufe(e) {
  ot(iz), e.registerSeriesModel(Ice), e.registerChartView(kce), e.registerLayout(dp("scatter"));
}
function cfe(e) {
  e.eachSeriesByType("radar", function(t) {
    var r = t.getData(), n = [], i = t.coordinateSystem;
    if (i) {
      var a = i.getIndicatorAxes();
      j(a, function(o, s) {
        r.each(r.mapDimension(a[s].dim), function(l, u) {
          n[u] = n[u] || [];
          var c = i.dataToPoint(l, s);
          n[u][s] = J5(c) ? c : Q5(i);
        });
      }), r.each(function(o) {
        var s = kk(n[o], function(l) {
          return J5(l);
        }) || Q5(i);
        n[o].push(s.slice()), r.setItemLayout(o, n[o]);
      });
    }
  });
}
function J5(e) {
  return !isNaN(e[0]) && !isNaN(e[1]);
}
function Q5(e) {
  return [e.cx, e.cy];
}
function ffe(e) {
  var t = e.polar;
  if (t) {
    le(t) || (t = [t]);
    var r = [];
    j(t, function(n, i) {
      n.indicator ? (n.type && !n.shape && (n.shape = n.type), e.radar = e.radar || [], le(e.radar) || (e.radar = [e.radar]), e.radar.push(n)) : r.push(n);
    }), e.polar = r;
  }
  j(e.series, function(n) {
    n && n.type === "radar" && n.polarIndex && (n.radarIndex = n.polarIndex);
  });
}
var dfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.coordinateSystem, o = this.group, s = r.getData(), l = this._data;
      function u(d, h) {
        var p = d.getItemVisual(h, "symbol") || "circle";
        if (p !== "none") {
          var v = mf(d.getItemVisual(h, "symbolSize")), g = fr(p, -1, -1, 2, 2), m = d.getItemVisual(h, "symbolRotate") || 0;
          return g.attr({
            style: {
              strokeNoScale: !0
            },
            z2: 100,
            scaleX: v[0] / 2,
            scaleY: v[1] / 2,
            rotation: m * Math.PI / 180 || 0
          }), g;
        }
      }
      function c(d, h, p, v, g, m) {
        p.removeAll();
        for (var y = 0; y < h.length - 1; y++) {
          var b = u(v, g);
          b && (b.__dimIdx = y, d[y] ? (b.setPosition(d[y]), Zl[m ? "initProps" : "updateProps"](b, {
            x: h[y][0],
            y: h[y][1]
          }, r, g)) : b.setPosition(h[y]), p.add(b));
        }
      }
      function f(d) {
        return ue(d, function(h) {
          return [a.cx, a.cy];
        });
      }
      s.diff(l).add(function(d) {
        var h = s.getItemLayout(d);
        if (h) {
          var p = new Jr(), v = new en(), g = {
            shape: {
              points: h
            }
          };
          p.shape.points = f(h), v.shape.points = f(h), Wt(p, g, r, d), Wt(v, g, r, d);
          var m = new Fe(), y = new Fe();
          m.add(v), m.add(p), m.add(y), c(v.shape.points, h, y, s, d, !0), s.setItemGraphicEl(d, m);
        }
      }).update(function(d, h) {
        var p = l.getItemGraphicEl(h), v = p.childAt(0), g = p.childAt(1), m = p.childAt(2), y = {
          shape: {
            points: s.getItemLayout(d)
          }
        };
        y.shape.points && (c(v.shape.points, y.shape.points, m, s, d, !1), Li(g), Li(v), _t(v, y, r), _t(g, y, r), s.setItemGraphicEl(d, p));
      }).remove(function(d) {
        o.remove(l.getItemGraphicEl(d));
      }).execute(), s.eachItemGraphicEl(function(d, h) {
        var p = s.getItemModel(h), v = d.childAt(0), g = d.childAt(1), m = d.childAt(2), y = s.getItemVisual(h, "style"), b = y.fill;
        o.add(d), v.useStyle(Ie(p.getModel("lineStyle").getLineStyle(), {
          fill: "none",
          stroke: b
        })), Vr(v, p, "lineStyle"), Vr(g, p, "areaStyle");
        var w = p.getModel("areaStyle"), _ = w.isEmpty() && w.parentModel.isEmpty();
        g.ignore = _, j(["emphasis", "select", "blur"], function(A) {
          var M = p.getModel([A, "areaStyle"]), D = M.isEmpty() && M.parentModel.isEmpty();
          g.ensureState(A).ignore = D && _;
        }), g.useStyle(Ie(w.getAreaStyle(), {
          fill: b,
          opacity: 0.7,
          decal: y.decal
        }));
        var S = p.getModel("emphasis"), C = S.getModel("itemStyle").getItemStyle();
        m.eachChild(function(A) {
          if (A instanceof Ar) {
            var M = A.style;
            A.useStyle(ae({
              // TODO other properties like x, y ?
              image: M.image,
              x: M.x,
              y: M.y,
              width: M.width,
              height: M.height
            }, y));
          } else
            A.useStyle(y), A.setColor(b), A.style.strokeNoScale = !0;
          var D = A.ensureState("emphasis");
          D.style = ze(C);
          var N = s.getStore().get(s.getDimensionIndex(A.__dimIdx), h);
          (N == null || isNaN(N)) && (N = ""), Br(A, Cr(p), {
            labelFetcher: s.hostModel,
            labelDataIndex: h,
            labelDimIndex: A.__dimIdx,
            defaultText: N,
            inheritColor: b,
            defaultOpacity: y.opacity
          });
        }), Jt(d, S.get("focus"), S.get("blurScope"), S.get("disabled"));
      }), this._data = s;
    }, t.prototype.remove = function() {
      this.group.removeAll(), this._data = null;
    }, t.type = "radar", t;
  }(It)
), hfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r;
    }
    return t.prototype.init = function(r) {
      e.prototype.init.apply(this, arguments), this.legendVisualProvider = new pp(xe(this.getData, this), xe(this.getRawData, this));
    }, t.prototype.getInitialData = function(r, n) {
      return wf(this, {
        generateCoord: "indicator_",
        generateCoordCount: 1 / 0
      });
    }, t.prototype.formatTooltip = function(r, n, i) {
      var a = this.getData(), o = this.coordinateSystem, s = o.getIndicatorAxes(), l = this.getData().getName(r), u = l === "" ? this.name : l, c = e8(this, r);
      return Tr("section", {
        header: u,
        sortBlocks: !0,
        blocks: ue(s, function(f) {
          var d = a.get(a.mapDimension(f.dim), r);
          return Tr("nameValue", {
            markerType: "subItem",
            markerColor: c,
            name: f.name,
            value: d,
            sortParam: d
          });
        })
      });
    }, t.prototype.getTooltipPosition = function(r) {
      if (r != null) {
        for (var n = this.getData(), i = this.coordinateSystem, a = n.getValues(ue(i.dimensions, function(u) {
          return n.mapDimension(u);
        }), r), o = 0, s = a.length; o < s; o++)
          if (!isNaN(a[o])) {
            var l = i.getIndicatorAxes();
            return i.coordToPoint(l[o].dataToCoord(a[o]), o);
          }
      }
    }, t.type = "series.radar", t.dependencies = ["radar"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      colorBy: "data",
      coordinateSystem: "radar",
      legendHoverLink: !0,
      radarIndex: 0,
      lineStyle: {
        width: 2,
        type: "solid",
        join: "round"
      },
      label: {
        position: "top"
      },
      // areaStyle: {
      // },
      // itemStyle: {}
      symbolSize: 8
      // symbolRotate: null
    }, t;
  }(zt)
), Kf = qO.value;
function Tv(e, t) {
  return Ie({
    show: t
  }, e);
}
var pfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.optionUpdated = function() {
      var r = this.get("boundaryGap"), n = this.get("splitNumber"), i = this.get("scale"), a = this.get("axisLine"), o = this.get("axisTick"), s = this.get("axisLabel"), l = this.get("axisName"), u = this.get(["axisName", "show"]), c = this.get(["axisName", "formatter"]), f = this.get("axisNameGap"), d = this.get("triggerEvent"), h = ue(this.get("indicator") || [], function(p) {
        p.max != null && p.max > 0 && !p.min ? p.min = 0 : p.min != null && p.min < 0 && !p.max && (p.max = 0);
        var v = l;
        p.color != null && (v = Ie({
          color: p.color
        }, l));
        var g = Xe(ze(p), {
          boundaryGap: r,
          splitNumber: n,
          scale: i,
          axisLine: a,
          axisTick: o,
          // axisType: axisType,
          axisLabel: s,
          // Compatible with 2 and use text
          name: p.text,
          showName: u,
          nameLocation: "end",
          nameGap: f,
          // min: 0,
          nameTextStyle: v,
          triggerEvent: d
        }, !1);
        if (ge(c)) {
          var m = g.name;
          g.name = c.replace("{value}", m ?? "");
        } else Ee(c) && (g.name = c(g.name, g));
        var y = new Tt(g, null, this.ecModel);
        return ir(y, bf.prototype), y.mainType = "radar", y.componentIndex = this.componentIndex, y;
      }, this);
      this._indicatorModels = h;
    }, t.prototype.getIndicatorModels = function() {
      return this._indicatorModels;
    }, t.type = "radar", t.defaultOption = {
      // zlevel: 0,
      z: 0,
      center: ["50%", "50%"],
      radius: "75%",
      startAngle: 90,
      axisName: {
        show: !0
        // formatter: null
        // textStyle: {}
      },
      boundaryGap: [0, 0],
      splitNumber: 5,
      axisNameGap: 15,
      scale: !1,
      // Polygon or circle
      shape: "polygon",
      axisLine: Xe({
        lineStyle: {
          color: "#bbb"
        }
      }, Kf.axisLine),
      axisLabel: Tv(Kf.axisLabel, !1),
      axisTick: Tv(Kf.axisTick, !1),
      // axisType: 'value',
      splitLine: Tv(Kf.splitLine, !0),
      splitArea: Tv(Kf.splitArea, !0),
      // {text, min, max}
      indicator: []
    }, t;
  }(at)
), vfe = ["axisLine", "axisTickLabel", "axisName"], gfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = this.group;
      a.removeAll(), this._buildAxes(r), this._buildSplitLineAndArea(r);
    }, t.prototype._buildAxes = function(r) {
      var n = r.coordinateSystem, i = n.getIndicatorAxes(), a = ue(i, function(o) {
        var s = o.model.get("showName") ? o.name : "", l = new sn(o.model, {
          axisName: s,
          position: [n.cx, n.cy],
          rotation: o.angle,
          labelDirection: -1,
          tickDirection: -1,
          nameDirection: 1
        });
        return l;
      });
      j(a, function(o) {
        j(vfe, o.add, o), this.group.add(o.getGroup());
      }, this);
    }, t.prototype._buildSplitLineAndArea = function(r) {
      var n = r.coordinateSystem, i = n.getIndicatorAxes();
      if (!i.length)
        return;
      var a = r.get("shape"), o = r.getModel("splitLine"), s = r.getModel("splitArea"), l = o.getModel("lineStyle"), u = s.getModel("areaStyle"), c = o.get("show"), f = s.get("show"), d = l.get("color"), h = u.get("color"), p = le(d) ? d : [d], v = le(h) ? h : [h], g = [], m = [];
      function y(L, I, P) {
        var k = P % I.length;
        return L[k] = L[k] || [], k;
      }
      if (a === "circle")
        for (var b = i[0].getTicksCoords(), w = n.cx, _ = n.cy, S = 0; S < b.length; S++) {
          if (c) {
            var C = y(g, p, S);
            g[C].push(new da({
              shape: {
                cx: w,
                cy: _,
                r: b[S].coord
              }
            }));
          }
          if (f && S < b.length - 1) {
            var C = y(m, v, S);
            m[C].push(new of({
              shape: {
                cx: w,
                cy: _,
                r0: b[S].coord,
                r: b[S + 1].coord
              }
            }));
          }
        }
      else
        for (var A, M = ue(i, function(L, I) {
          var P = L.getTicksCoords();
          return A = A == null ? P.length - 1 : Math.min(P.length - 1, A), ue(P, function(k) {
            return n.coordToPoint(k.coord, I);
          });
        }), D = [], S = 0; S <= A; S++) {
          for (var N = [], R = 0; R < i.length; R++)
            N.push(M[R][S]);
          if (N[0] ? N.push(N[0].slice()) : process.env.NODE_ENV !== "production" && console.error("Can't draw value axis " + S), c) {
            var C = y(g, p, S);
            g[C].push(new en({
              shape: {
                points: N
              }
            }));
          }
          if (f && D) {
            var C = y(m, v, S - 1);
            m[C].push(new Jr({
              shape: {
                points: N.concat(D)
              }
            }));
          }
          D = N.slice().reverse();
        }
      var O = l.getLineStyle(), E = u.getAreaStyle();
      j(m, function(L, I) {
        this.group.add(Tn(L, {
          style: Ie({
            stroke: "none",
            fill: v[I % v.length]
          }, E),
          silent: !0
        }));
      }, this), j(g, function(L, I) {
        this.group.add(Tn(L, {
          style: Ie({
            fill: "none",
            stroke: p[I % p.length]
          }, O),
          silent: !0
        }));
      }, this);
    }, t.type = "radar", t;
  }($t)
), mfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this, r, n, i) || this;
      return a.type = "value", a.angle = 0, a.name = "", a;
    }
    return t;
  }(ui)
), yfe = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.dimensions = [], this._model = t, this._indicatorAxes = ue(t.getIndicatorModels(), function(i, a) {
        var o = "indicator_" + a, s = new mfe(
          o,
          new eo()
          // (indicatorModel.get('axisType') === 'log') ? new LogScale() : new IntervalScale()
        );
        return s.name = i.get("name"), s.model = i, i.axis = s, this.dimensions.push(o), s;
      }, this), this.resize(t, n);
    }
    return e.prototype.getIndicatorAxes = function() {
      return this._indicatorAxes;
    }, e.prototype.dataToPoint = function(t, r) {
      var n = this._indicatorAxes[r];
      return this.coordToPoint(n.dataToCoord(t), r);
    }, e.prototype.coordToPoint = function(t, r) {
      var n = this._indicatorAxes[r], i = n.angle, a = this.cx + t * Math.cos(i), o = this.cy - t * Math.sin(i);
      return [a, o];
    }, e.prototype.pointToData = function(t) {
      var r = t[0] - this.cx, n = t[1] - this.cy, i = Math.sqrt(r * r + n * n);
      r /= i, n /= i;
      for (var a = Math.atan2(-n, r), o = 1 / 0, s, l = -1, u = 0; u < this._indicatorAxes.length; u++) {
        var c = this._indicatorAxes[u], f = Math.abs(a - c.angle);
        f < o && (s = c, l = u, o = f);
      }
      return [l, +(s && s.coordToData(i))];
    }, e.prototype.resize = function(t, r) {
      var n = t.get("center"), i = r.getWidth(), a = r.getHeight(), o = Math.min(i, a) / 2;
      this.cx = pe(n[0], i), this.cy = pe(n[1], a), this.startAngle = t.get("startAngle") * Math.PI / 180;
      var s = t.get("radius");
      (ge(s) || bt(s)) && (s = [0, s]), this.r0 = pe(s[0], o), this.r = pe(s[1], o), j(this._indicatorAxes, function(l, u) {
        l.setExtent(this.r0, this.r);
        var c = this.startAngle + u * Math.PI * 2 / this._indicatorAxes.length;
        c = Math.atan2(Math.sin(c), Math.cos(c)), l.angle = c;
      }, this);
    }, e.prototype.update = function(t, r) {
      var n = this._indicatorAxes, i = this._model;
      j(n, function(s) {
        s.scale.setExtent(1 / 0, -1 / 0);
      }), t.eachSeriesByType("radar", function(s, l) {
        if (!(s.get("coordinateSystem") !== "radar" || t.getComponent("radar", s.get("radarIndex")) !== i)) {
          var u = s.getData();
          j(n, function(c) {
            c.scale.unionExtentFromData(u, u.mapDimension(c.dim));
          });
        }
      }, this);
      var a = i.get("splitNumber"), o = new eo();
      o.setExtent(0, a), o.setInterval(1), j(n, function(s, l) {
        JO(s.scale, s.model, o);
      });
    }, e.prototype.convertToPixel = function(t, r, n) {
      return console.warn("Not implemented."), null;
    }, e.prototype.convertFromPixel = function(t, r, n) {
      return console.warn("Not implemented."), null;
    }, e.prototype.containPoint = function(t) {
      return console.warn("Not implemented."), !1;
    }, e.create = function(t, r) {
      var n = [];
      return t.eachComponent("radar", function(i) {
        var a = new e(i, t, r);
        n.push(a), i.coordinateSystem = a;
      }), t.eachSeriesByType("radar", function(i) {
        i.get("coordinateSystem") === "radar" && (i.coordinateSystem = n[i.get("radarIndex") || 0]);
      }), n;
    }, e.dimensions = [], e;
  }()
);
function xfe(e) {
  e.registerCoordinateSystem("radar", yfe), e.registerComponentModel(pfe), e.registerComponentView(gfe), e.registerVisual({
    seriesType: "radar",
    reset: function(t) {
      var r = t.getData();
      r.each(function(n) {
        r.setItemVisual(n, "legendIcon", "roundRect");
      }), r.setVisual("legendIcon", "roundRect");
    }
  });
}
function bfe(e) {
  ot(xfe), e.registerChartView(dfe), e.registerSeriesModel(hfe), e.registerLayout(cfe), e.registerProcessor(hp("radar")), e.registerPreprocessor(ffe);
}
var eI = "\0_ec_interaction_mutex";
function wfe(e, t, r) {
  var n = pT(e);
  n[t] = r;
}
function _fe(e, t, r) {
  var n = pT(e), i = n[t];
  i === r && (n[t] = null);
}
function tI(e, t) {
  return !!pT(e)[t];
}
function pT(e) {
  return e[eI] || (e[eI] = {});
}
Pi({
  type: "takeGlobalCursor",
  event: "globalCursorTaken",
  update: "update"
}, rr);
var vp = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this) || this;
      n._zr = r;
      var i = xe(n._mousedownHandler, n), a = xe(n._mousemoveHandler, n), o = xe(n._mouseupHandler, n), s = xe(n._mousewheelHandler, n), l = xe(n._pinchHandler, n);
      return n.enable = function(u, c) {
        this.disable(), this._opt = Ie(ze(c) || {}, {
          zoomOnMouseWheel: !0,
          moveOnMouseMove: !0,
          // By default, wheel do not trigger move.
          moveOnMouseWheel: !1,
          preventDefaultMouseMove: !0
        }), u == null && (u = !0), (u === !0 || u === "move" || u === "pan") && (r.on("mousedown", i), r.on("mousemove", a), r.on("mouseup", o)), (u === !0 || u === "scale" || u === "zoom") && (r.on("mousewheel", s), r.on("pinch", l));
      }, n.disable = function() {
        r.off("mousedown", i), r.off("mousemove", a), r.off("mouseup", o), r.off("mousewheel", s), r.off("pinch", l);
      }, n;
    }
    return t.prototype.isDragging = function() {
      return this._dragging;
    }, t.prototype.isPinching = function() {
      return this._pinching;
    }, t.prototype.setPointerChecker = function(r) {
      this.pointerChecker = r;
    }, t.prototype.dispose = function() {
      this.disable();
    }, t.prototype._mousedownHandler = function(r) {
      if (!DE(r)) {
        for (var n = r.target; n; ) {
          if (n.draggable)
            return;
          n = n.__hostTarget || n.parent;
        }
        var i = r.offsetX, a = r.offsetY;
        this.pointerChecker && this.pointerChecker(r, i, a) && (this._x = i, this._y = a, this._dragging = !0);
      }
    }, t.prototype._mousemoveHandler = function(r) {
      if (!(!this._dragging || !bg("moveOnMouseMove", r, this._opt) || r.gestureEvent === "pinch" || tI(this._zr, "globalPan"))) {
        var n = r.offsetX, i = r.offsetY, a = this._x, o = this._y, s = n - a, l = i - o;
        this._x = n, this._y = i, this._opt.preventDefaultMouseMove && Xa(r.event), az(this, "pan", "moveOnMouseMove", r, {
          dx: s,
          dy: l,
          oldX: a,
          oldY: o,
          newX: n,
          newY: i,
          isAvailableBehavior: null
        });
      }
    }, t.prototype._mouseupHandler = function(r) {
      DE(r) || (this._dragging = !1);
    }, t.prototype._mousewheelHandler = function(r) {
      var n = bg("zoomOnMouseWheel", r, this._opt), i = bg("moveOnMouseWheel", r, this._opt), a = r.wheelDelta, o = Math.abs(a), s = r.offsetX, l = r.offsetY;
      if (!(a === 0 || !n && !i)) {
        if (n) {
          var u = o > 3 ? 1.4 : o > 1 ? 1.2 : 1.1, c = a > 0 ? u : 1 / u;
          Px(this, "zoom", "zoomOnMouseWheel", r, {
            scale: c,
            originX: s,
            originY: l,
            isAvailableBehavior: null
          });
        }
        if (i) {
          var f = Math.abs(a), d = (a > 0 ? 1 : -1) * (f > 3 ? 0.4 : f > 1 ? 0.15 : 0.05);
          Px(this, "scrollMove", "moveOnMouseWheel", r, {
            scrollDelta: d,
            originX: s,
            originY: l,
            isAvailableBehavior: null
          });
        }
      }
    }, t.prototype._pinchHandler = function(r) {
      if (!tI(this._zr, "globalPan")) {
        var n = r.pinchScale > 1 ? 1.1 : 1 / 1.1;
        Px(this, "zoom", null, r, {
          scale: n,
          originX: r.pinchX,
          originY: r.pinchY,
          isAvailableBehavior: null
        });
      }
    }, t;
  }(ai)
);
function Px(e, t, r, n, i) {
  e.pointerChecker && e.pointerChecker(n, i.originX, i.originY) && (Xa(n.event), az(e, t, r, n, i));
}
function az(e, t, r, n, i) {
  i.isAvailableBehavior = xe(bg, null, r, n), e.trigger(t, i);
}
function bg(e, t, r) {
  var n = r[e];
  return !e || n && (!ge(n) || t.event[n + "Key"]);
}
function vT(e, t, r) {
  var n = e.target;
  n.x += t, n.y += r, n.dirty();
}
function gT(e, t, r, n) {
  var i = e.target, a = e.zoomLimit, o = e.zoom = e.zoom || 1;
  if (o *= t, a) {
    var s = a.min || 0, l = a.max || 1 / 0;
    o = Math.max(Math.min(l, o), s);
  }
  var u = o / e.zoom;
  e.zoom = o, i.x -= (r - i.x) * (u - 1), i.y -= (n - i.y) * (u - 1), i.scaleX *= u, i.scaleY *= u, i.dirty();
}
var Sfe = {
  axisPointer: 1,
  tooltip: 1,
  brush: 1
};
function l0(e, t, r) {
  var n = t.getComponentByElement(e.topTarget), i = n && n.coordinateSystem;
  return n && n !== r && !Sfe.hasOwnProperty(n.mainType) && i && i.model !== r;
}
function oz(e) {
  if (ge(e)) {
    var t = new DOMParser();
    e = t.parseFromString(e, "text/xml");
  }
  var r = e;
  for (r.nodeType === 9 && (r = r.firstChild); r.nodeName.toLowerCase() !== "svg" || r.nodeType !== 1; )
    r = r.nextSibling;
  return r;
}
var kx, Em = {
  fill: "fill",
  stroke: "stroke",
  "stroke-width": "lineWidth",
  opacity: "opacity",
  "fill-opacity": "fillOpacity",
  "stroke-opacity": "strokeOpacity",
  "stroke-dasharray": "lineDash",
  "stroke-dashoffset": "lineDashOffset",
  "stroke-linecap": "lineCap",
  "stroke-linejoin": "lineJoin",
  "stroke-miterlimit": "miterLimit",
  "font-family": "fontFamily",
  "font-size": "fontSize",
  "font-style": "fontStyle",
  "font-weight": "fontWeight",
  "text-anchor": "textAlign",
  visibility: "visibility",
  display: "display"
}, rI = ut(Em), Dm = {
  "alignment-baseline": "textBaseline",
  "stop-color": "stopColor"
}, nI = ut(Dm), Cfe = function() {
  function e() {
    this._defs = {}, this._root = null;
  }
  return e.prototype.parse = function(t, r) {
    r = r || {};
    var n = oz(t);
    if (process.env.NODE_ENV !== "production" && !n)
      throw new Error("Illegal svg");
    this._defsUsePending = [];
    var i = new Fe();
    this._root = i;
    var a = [], o = n.getAttribute("viewBox") || "", s = parseFloat(n.getAttribute("width") || r.width), l = parseFloat(n.getAttribute("height") || r.height);
    isNaN(s) && (s = null), isNaN(l) && (l = null), bn(n, i, null, !0, !1);
    for (var u = n.firstChild; u; )
      this._parseNode(u, i, a, null, !1, !1), u = u.nextSibling;
    Mfe(this._defs, this._defsUsePending), this._defsUsePending = [];
    var c, f;
    if (o) {
      var d = u0(o);
      d.length >= 4 && (c = {
        x: parseFloat(d[0] || 0),
        y: parseFloat(d[1] || 0),
        width: parseFloat(d[2]),
        height: parseFloat(d[3])
      });
    }
    if (c && s != null && l != null && (f = lz(c, { x: 0, y: 0, width: s, height: l }), !r.ignoreViewBox)) {
      var h = i;
      i = new Fe(), i.add(h), h.scaleX = h.scaleY = f.scale, h.x = f.x, h.y = f.y;
    }
    return !r.ignoreRootClip && s != null && l != null && i.setClipPath(new vt({
      shape: { x: 0, y: 0, width: s, height: l }
    })), {
      root: i,
      width: s,
      height: l,
      viewBoxRect: c,
      viewBoxTransform: f,
      named: a
    };
  }, e.prototype._parseNode = function(t, r, n, i, a, o) {
    var s = t.nodeName.toLowerCase(), l, u = i;
    if (s === "defs" && (a = !0), s === "text" && (o = !0), s === "defs" || s === "switch")
      l = r;
    else {
      if (!a) {
        var c = kx[s];
        if (c && be(kx, s)) {
          l = c.call(this, t, r);
          var f = t.getAttribute("name");
          if (f) {
            var d = {
              name: f,
              namedFrom: null,
              svgNodeTagLower: s,
              el: l
            };
            n.push(d), s === "g" && (u = d);
          } else i && n.push({
            name: i.name,
            namedFrom: i,
            svgNodeTagLower: s,
            el: l
          });
          r.add(l);
        }
      }
      var h = iI[s];
      if (h && be(iI, s)) {
        var p = h.call(this, t), v = t.getAttribute("id");
        v && (this._defs[v] = p);
      }
    }
    if (l && l.isGroup)
      for (var g = t.firstChild; g; )
        g.nodeType === 1 ? this._parseNode(g, l, n, u, a, o) : g.nodeType === 3 && o && this._parseText(g, l), g = g.nextSibling;
  }, e.prototype._parseText = function(t, r) {
    var n = new Rc({
      style: {
        text: t.textContent
      },
      silent: !0,
      x: this._textX || 0,
      y: this._textY || 0
    });
    zn(r, n), bn(t, n, this._defsUsePending, !1, !1), Tfe(n, r);
    var i = n.style, a = i.fontSize;
    a && a < 9 && (i.fontSize = 9, n.scaleX *= a / 9, n.scaleY *= a / 9);
    var o = (i.fontSize || i.fontFamily) && [
      i.fontStyle,
      i.fontWeight,
      (i.fontSize || 12) + "px",
      i.fontFamily || "sans-serif"
    ].join(" ");
    i.font = o;
    var s = n.getBoundingRect();
    return this._textX += s.width, r.add(n), n;
  }, e.internalField = function() {
    kx = {
      g: function(t, r) {
        var n = new Fe();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n;
      },
      rect: function(t, r) {
        var n = new vt();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n.setShape({
          x: parseFloat(t.getAttribute("x") || "0"),
          y: parseFloat(t.getAttribute("y") || "0"),
          width: parseFloat(t.getAttribute("width") || "0"),
          height: parseFloat(t.getAttribute("height") || "0")
        }), n.silent = !0, n;
      },
      circle: function(t, r) {
        var n = new da();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n.setShape({
          cx: parseFloat(t.getAttribute("cx") || "0"),
          cy: parseFloat(t.getAttribute("cy") || "0"),
          r: parseFloat(t.getAttribute("r") || "0")
        }), n.silent = !0, n;
      },
      line: function(t, r) {
        var n = new xr();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n.setShape({
          x1: parseFloat(t.getAttribute("x1") || "0"),
          y1: parseFloat(t.getAttribute("y1") || "0"),
          x2: parseFloat(t.getAttribute("x2") || "0"),
          y2: parseFloat(t.getAttribute("y2") || "0")
        }), n.silent = !0, n;
      },
      ellipse: function(t, r) {
        var n = new rp();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n.setShape({
          cx: parseFloat(t.getAttribute("cx") || "0"),
          cy: parseFloat(t.getAttribute("cy") || "0"),
          rx: parseFloat(t.getAttribute("rx") || "0"),
          ry: parseFloat(t.getAttribute("ry") || "0")
        }), n.silent = !0, n;
      },
      polygon: function(t, r) {
        var n = t.getAttribute("points"), i;
        n && (i = sI(n));
        var a = new Jr({
          shape: {
            points: i || []
          },
          silent: !0
        });
        return zn(r, a), bn(t, a, this._defsUsePending, !1, !1), a;
      },
      polyline: function(t, r) {
        var n = t.getAttribute("points"), i;
        n && (i = sI(n));
        var a = new en({
          shape: {
            points: i || []
          },
          silent: !0
        });
        return zn(r, a), bn(t, a, this._defsUsePending, !1, !1), a;
      },
      image: function(t, r) {
        var n = new Ar();
        return zn(r, n), bn(t, n, this._defsUsePending, !1, !1), n.setStyle({
          image: t.getAttribute("xlink:href") || t.getAttribute("href"),
          x: +t.getAttribute("x"),
          y: +t.getAttribute("y"),
          width: +t.getAttribute("width"),
          height: +t.getAttribute("height")
        }), n.silent = !0, n;
      },
      text: function(t, r) {
        var n = t.getAttribute("x") || "0", i = t.getAttribute("y") || "0", a = t.getAttribute("dx") || "0", o = t.getAttribute("dy") || "0";
        this._textX = parseFloat(n) + parseFloat(a), this._textY = parseFloat(i) + parseFloat(o);
        var s = new Fe();
        return zn(r, s), bn(t, s, this._defsUsePending, !1, !0), s;
      },
      tspan: function(t, r) {
        var n = t.getAttribute("x"), i = t.getAttribute("y");
        n != null && (this._textX = parseFloat(n)), i != null && (this._textY = parseFloat(i));
        var a = t.getAttribute("dx") || "0", o = t.getAttribute("dy") || "0", s = new Fe();
        return zn(r, s), bn(t, s, this._defsUsePending, !1, !0), this._textX += parseFloat(a), this._textY += parseFloat(o), s;
      },
      path: function(t, r) {
        var n = t.getAttribute("d") || "", i = J9(n);
        return zn(r, i), bn(t, i, this._defsUsePending, !1, !1), i.silent = !0, i;
      }
    };
  }(), e;
}(), iI = {
  lineargradient: function(e) {
    var t = parseInt(e.getAttribute("x1") || "0", 10), r = parseInt(e.getAttribute("y1") || "0", 10), n = parseInt(e.getAttribute("x2") || "10", 10), i = parseInt(e.getAttribute("y2") || "0", 10), a = new lf(t, r, n, i);
    return aI(e, a), oI(e, a), a;
  },
  radialgradient: function(e) {
    var t = parseInt(e.getAttribute("cx") || "0", 10), r = parseInt(e.getAttribute("cy") || "0", 10), n = parseInt(e.getAttribute("r") || "0", 10), i = new gC(t, r, n);
    return aI(e, i), oI(e, i), i;
  }
};
function aI(e, t) {
  var r = e.getAttribute("gradientUnits");
  r === "userSpaceOnUse" && (t.global = !0);
}
function oI(e, t) {
  for (var r = e.firstChild; r; ) {
    if (r.nodeType === 1 && r.nodeName.toLocaleLowerCase() === "stop") {
      var n = r.getAttribute("offset"), i = void 0;
      n && n.indexOf("%") > 0 ? i = parseInt(n, 10) / 100 : n ? i = parseFloat(n) : i = 0;
      var a = {};
      sz(r, a, a);
      var o = a.stopColor || r.getAttribute("stop-color") || "#000000";
      t.colorStops.push({
        offset: i,
        color: o
      });
    }
    r = r.nextSibling;
  }
}
function zn(e, t) {
  e && e.__inheritedStyle && (t.__inheritedStyle || (t.__inheritedStyle = {}), Ie(t.__inheritedStyle, e.__inheritedStyle));
}
function sI(e) {
  for (var t = u0(e), r = [], n = 0; n < t.length; n += 2) {
    var i = parseFloat(t[n]), a = parseFloat(t[n + 1]);
    r.push([i, a]);
  }
  return r;
}
function bn(e, t, r, n, i) {
  var a = t, o = a.__inheritedStyle = a.__inheritedStyle || {}, s = {};
  e.nodeType === 1 && (Nfe(e, t), sz(e, o, s), n || Ife(e, o, s)), a.style = a.style || {}, o.fill != null && (a.style.fill = lI(a, "fill", o.fill, r)), o.stroke != null && (a.style.stroke = lI(a, "stroke", o.stroke, r)), j([
    "lineWidth",
    "opacity",
    "fillOpacity",
    "strokeOpacity",
    "miterLimit",
    "fontSize"
  ], function(l) {
    o[l] != null && (a.style[l] = parseFloat(o[l]));
  }), j([
    "lineDashOffset",
    "lineCap",
    "lineJoin",
    "fontWeight",
    "fontFamily",
    "fontStyle",
    "textAlign"
  ], function(l) {
    o[l] != null && (a.style[l] = o[l]);
  }), i && (a.__selfStyle = s), o.lineDash && (a.style.lineDash = ue(u0(o.lineDash), function(l) {
    return parseFloat(l);
  })), (o.visibility === "hidden" || o.visibility === "collapse") && (a.invisible = !0), o.display === "none" && (a.ignore = !0);
}
function Tfe(e, t) {
  var r = t.__selfStyle;
  if (r) {
    var n = r.textBaseline, i = n;
    !n || n === "auto" || n === "baseline" ? i = "alphabetic" : n === "before-edge" || n === "text-before-edge" ? i = "top" : n === "after-edge" || n === "text-after-edge" ? i = "bottom" : (n === "central" || n === "mathematical") && (i = "middle"), e.style.textBaseline = i;
  }
  var a = t.__inheritedStyle;
  if (a) {
    var o = a.textAlign, s = o;
    o && (o === "middle" && (s = "center"), e.style.textAlign = s);
  }
}
var Afe = /^url\(\s*#(.*?)\)/;
function lI(e, t, r, n) {
  var i = r && r.match(Afe);
  if (i) {
    var a = Xn(i[1]);
    n.push([e, t, a]);
    return;
  }
  return r === "none" && (r = null), r;
}
function Mfe(e, t) {
  for (var r = 0; r < t.length; r++) {
    var n = t[r];
    n[0].style[n[1]] = e[n[2]];
  }
}
var Efe = /-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;
function u0(e) {
  return e.match(Efe) || [];
}
var Dfe = /(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g, Ox = Math.PI / 180;
function Nfe(e, t) {
  var r = e.getAttribute("transform");
  if (r) {
    r = r.replace(/,/g, " ");
    var n = [], i = null;
    r.replace(Dfe, function(f, d, h) {
      return n.push(d, h), "";
    });
    for (var a = n.length - 1; a > 0; a -= 2) {
      var o = n[a], s = n[a - 1], l = u0(o);
      switch (i = i || yn(), s) {
        case "translate":
          Ni(i, i, [parseFloat(l[0]), parseFloat(l[1] || "0")]);
          break;
        case "scale":
          Ny(i, i, [parseFloat(l[0]), parseFloat(l[1] || l[0])]);
          break;
        case "rotate":
          vs(i, i, -parseFloat(l[0]) * Ox, [
            parseFloat(l[1] || "0"),
            parseFloat(l[2] || "0")
          ]);
          break;
        case "skewX":
          var u = Math.tan(parseFloat(l[0]) * Ox);
          na(i, [1, 0, u, 1, 0, 0], i);
          break;
        case "skewY":
          var c = Math.tan(parseFloat(l[0]) * Ox);
          na(i, [1, c, 0, 1, 0, 0], i);
          break;
        case "matrix":
          i[0] = parseFloat(l[0]), i[1] = parseFloat(l[1]), i[2] = parseFloat(l[2]), i[3] = parseFloat(l[3]), i[4] = parseFloat(l[4]), i[5] = parseFloat(l[5]);
          break;
      }
    }
    t.setLocalTransform(i);
  }
}
var uI = /([^\s:;]+)\s*:\s*([^:;]+)/g;
function sz(e, t, r) {
  var n = e.getAttribute("style");
  if (n) {
    uI.lastIndex = 0;
    for (var i; (i = uI.exec(n)) != null; ) {
      var a = i[1], o = be(Em, a) ? Em[a] : null;
      o && (t[o] = i[2]);
      var s = be(Dm, a) ? Dm[a] : null;
      s && (r[s] = i[2]);
    }
  }
}
function Ife(e, t, r) {
  for (var n = 0; n < rI.length; n++) {
    var i = rI[n], a = e.getAttribute(i);
    a != null && (t[Em[i]] = a);
  }
  for (var n = 0; n < nI.length; n++) {
    var i = nI[n], a = e.getAttribute(i);
    a != null && (r[Dm[i]] = a);
  }
}
function lz(e, t) {
  var r = t.width / e.width, n = t.height / e.height, i = Math.min(r, n);
  return {
    scale: i,
    x: -(e.x + e.width / 2) * i + (t.x + t.width / 2),
    y: -(e.y + e.height / 2) * i + (t.y + t.height / 2)
  };
}
function Lfe(e, t) {
  var r = new Cfe();
  return r.parse(e, t);
}
var Rfe = Ce([
  "rect",
  "circle",
  "line",
  "ellipse",
  "polygon",
  "polyline",
  "path",
  // <text> <tspan> are also enabled because some SVG might paint text itself,
  // but still need to trigger events or tooltip.
  "text",
  "tspan",
  // <g> is also enabled because this case: if multiple tags share one name
  // and need label displayed, every tags will display the name, which is not
  // expected. So we can put them into a <g name="xxx">. Thereby only one label
  // displayed and located based on the bounding rect of the <g>.
  "g"
]), Pfe = (
  /** @class */
  function() {
    function e(t, r) {
      this.type = "geoSVG", this._usedGraphicMap = Ce(), this._freedGraphics = [], this._mapName = t, this._parsedXML = oz(r);
    }
    return e.prototype.load = function() {
      var t = this._firstGraphic;
      if (!t) {
        t = this._firstGraphic = this._buildGraphic(this._parsedXML), this._freedGraphics.push(t), this._boundingRect = this._firstGraphic.boundingRect.clone();
        var r = Ofe(t.named), n = r.regions, i = r.regionsMap;
        this._regions = n, this._regionsMap = i;
      }
      return {
        boundingRect: this._boundingRect,
        regions: this._regions,
        regionsMap: this._regionsMap
      };
    }, e.prototype._buildGraphic = function(t) {
      var r, n;
      try {
        r = t && Lfe(t, {
          ignoreViewBox: !0,
          ignoreRootClip: !0
        }) || {}, n = r.root, Le(n != null);
      } catch (g) {
        throw new Error(`Invalid svg format
` + g.message);
      }
      var i = new Fe();
      i.add(n), i.isGeoSVGGraphicRoot = !0;
      var a = r.width, o = r.height, s = r.viewBoxRect, l = this._boundingRect;
      if (!l) {
        var u = void 0, c = void 0, f = void 0, d = void 0;
        if (a != null ? (u = 0, f = a) : s && (u = s.x, f = s.width), o != null ? (c = 0, d = o) : s && (c = s.y, d = s.height), u == null || c == null) {
          var h = n.getBoundingRect();
          u == null && (u = h.x, f = h.width), c == null && (c = h.y, d = h.height);
        }
        l = this._boundingRect = new tt(u, c, f, d);
      }
      if (s) {
        var p = lz(s, l);
        n.scaleX = n.scaleY = p.scale, n.x = p.x, n.y = p.y;
      }
      i.setClipPath(new vt({
        shape: l.plain()
      }));
      var v = [];
      return j(r.named, function(g) {
        Rfe.get(g.svgNodeTagLower) != null && (v.push(g), kfe(g.el));
      }), {
        root: i,
        boundingRect: l,
        named: v
      };
    }, e.prototype.useGraphic = function(t) {
      var r = this._usedGraphicMap, n = r.get(t);
      return n || (n = this._freedGraphics.pop() || this._buildGraphic(this._parsedXML), r.set(t, n), n);
    }, e.prototype.freeGraphic = function(t) {
      var r = this._usedGraphicMap, n = r.get(t);
      n && (r.removeKey(t), this._freedGraphics.push(n));
    }, e;
  }()
);
function kfe(e) {
  e.silent = !1, e.isGroup && e.traverse(function(t) {
    t.silent = !1;
  });
}
function Ofe(e) {
  var t = [], r = Ce();
  return j(e, function(n) {
    if (n.namedFrom == null) {
      var i = new _le(n.name, n.el);
      t.push(i), r.set(n.name, i);
    }
  }), {
    regions: t,
    regionsMap: r
  };
}
var Yw = [126, 25], cI = "南海诸岛", Zs = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];
for (var Ws = 0; Ws < Zs.length; Ws++)
  for (var Du = 0; Du < Zs[Ws].length; Du++)
    Zs[Ws][Du][0] /= 10.5, Zs[Ws][Du][1] /= -10.5 / 0.75, Zs[Ws][Du][0] += Yw[0], Zs[Ws][Du][1] += Yw[1];
function zfe(e, t) {
  if (e === "china") {
    for (var r = 0; r < t.length; r++)
      if (t[r].name === cI)
        return;
    t.push(new iO(cI, ue(Zs, function(n) {
      return {
        type: "polygon",
        exterior: n
      };
    }), Yw));
  }
}
var jfe = {
  南海诸岛: [32, 80],
  // 全国
  广东: [0, -10],
  香港: [10, 5],
  澳门: [-10, 10],
  // '北京': [-10, 0],
  天津: [5, 5]
};
function Vfe(e, t) {
  if (e === "china") {
    var r = jfe[t.name];
    if (r) {
      var n = t.getCenter();
      n[0] += r[0] / 10.5, n[1] += -r[1] / (10.5 / 0.75), t.setCenter(n);
    }
  }
}
var Bfe = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];
function Ffe(e, t) {
  e === "china" && t.name === "台湾" && t.geometries.push({
    type: "polygon",
    exterior: Bfe[0]
  });
}
var $fe = "name", Hfe = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.type = "geoJSON", this._parsedMap = Ce(), this._mapName = t, this._specialAreas = n, this._geoJSON = Wfe(r);
    }
    return e.prototype.load = function(t, r) {
      r = r || $fe;
      var n = this._parsedMap.get(r);
      if (!n) {
        var i = this._parseToRegions(r);
        n = this._parsedMap.set(r, {
          regions: i,
          boundingRect: Gfe(i)
        });
      }
      var a = Ce(), o = [];
      return j(n.regions, function(s) {
        var l = s.name;
        t && be(t, l) && (s = s.cloneShallow(l = t[l])), o.push(s), a.set(l, s);
      }), {
        regions: o,
        boundingRect: n.boundingRect || new tt(0, 0, 0, 0),
        regionsMap: a
      };
    }, e.prototype._parseToRegions = function(t) {
      var r = this._mapName, n = this._geoJSON, i;
      try {
        i = n ? zw(n, t) : [];
      } catch (a) {
        throw new Error(`Invalid geoJson format
` + a.message);
      }
      return zfe(r, i), j(i, function(a) {
        var o = a.name;
        Vfe(r, a), Ffe(r, a);
        var s = this._specialAreas && this._specialAreas[o];
        s && a.transformTo(s.left, s.top, s.width, s.height);
      }, this), i;
    }, e.prototype.getMapForUser = function() {
      return {
        // For backward compatibility, use geoJson
        // PENDING: it has been returning them without clone.
        // do we need to avoid outsite modification?
        geoJson: this._geoJSON,
        geoJSON: this._geoJSON,
        specialAreas: this._specialAreas
      };
    }, e;
  }()
);
function Gfe(e) {
  for (var t, r = 0; r < e.length; r++) {
    var n = e[r].getBoundingRect();
    t = t || n.clone(), t.union(n);
  }
  return t;
}
function Wfe(e) {
  return ge(e) ? typeof JSON < "u" && JSON.parse ? JSON.parse(e) : new Function("return (" + e + ");")() : e;
}
var qf = Ce();
const to = {
  /**
   * Compatible with previous `echarts.registerMap`.
   *
   * @usage
   * ```js
   *
   * echarts.registerMap('USA', geoJson, specialAreas);
   *
   * echarts.registerMap('USA', {
   *     geoJson: geoJson,
   *     specialAreas: {...}
   * });
   * echarts.registerMap('USA', {
   *     geoJSON: geoJson,
   *     specialAreas: {...}
   * });
   *
   * echarts.registerMap('airport', {
   *     svg: svg
   * }
   * ```
   *
   * Note:
   * Do not support that register multiple geoJSON or SVG
   * one map name. Because different geoJSON and SVG have
   * different unit. It's not easy to make sure how those
   * units are mapping/normalize.
   * If intending to use multiple geoJSON or SVG, we can
   * use multiple geo coordinate system.
   */
  registerMap: function(e, t, r) {
    if (t.svg) {
      var n = new Pfe(e, t.svg);
      qf.set(e, n);
    } else {
      var i = t.geoJson || t.geoJSON;
      i && !t.features ? r = t.specialAreas : i = t;
      var n = new Hfe(e, i, r);
      qf.set(e, n);
    }
  },
  getGeoResource: function(e) {
    return qf.get(e);
  },
  /**
   * Only for exporting to users.
   * **MUST NOT** used internally.
   */
  getMapForUser: function(e) {
    var t = qf.get(e);
    return t && t.type === "geoJSON" && t.getMapForUser();
  },
  load: function(e, t, r) {
    var n = qf.get(e);
    if (!n) {
      process.env.NODE_ENV !== "production" && console.error("Map " + e + " not exists. The GeoJSON of the map must be provided.");
      return;
    }
    return n.load(t, r);
  }
};
var mT = ["rect", "circle", "line", "ellipse", "polygon", "polyline", "path"], Ufe = Ce(mT), Yfe = Ce(mT.concat(["g"])), Zfe = Ce(mT.concat(["g"])), uz = yt();
function Av(e) {
  var t = e.getItemStyle(), r = e.get("areaColor");
  return r != null && (t.fill = r), t;
}
function fI(e) {
  var t = e.style;
  t && (t.stroke = t.stroke || t.fill, t.fill = null);
}
var cz = (
  /** @class */
  function() {
    function e(t) {
      var r = new Fe();
      this.uid = df("ec_map_draw"), this._controller = new vp(t.getZr()), this._controllerHost = {
        target: r
      }, this.group = r, r.add(this._regionsGroup = new Fe()), r.add(this._svgGroup = new Fe());
    }
    return e.prototype.draw = function(t, r, n, i, a) {
      var o = t.mainType === "geo", s = t.getData && t.getData();
      o && r.eachComponent({
        mainType: "series",
        subType: "map"
      }, function(m) {
        !s && m.getHostGeoModel() === t && (s = m.getData());
      });
      var l = t.coordinateSystem, u = this._regionsGroup, c = this.group, f = l.getTransformInfo(), d = f.raw, h = f.roam, p = !u.childAt(0) || a;
      p ? (c.x = h.x, c.y = h.y, c.scaleX = h.scaleX, c.scaleY = h.scaleY, c.dirty()) : _t(c, h, t);
      var v = s && s.getVisual("visualMeta") && s.getVisual("visualMeta").length > 0, g = {
        api: n,
        geo: l,
        mapOrGeoModel: t,
        data: s,
        isVisualEncodedByVisualMap: v,
        isGeo: o,
        transformInfoRaw: d
      };
      l.resourceType === "geoJSON" ? this._buildGeoJSON(g) : l.resourceType === "geoSVG" && this._buildSVG(g), this._updateController(t, r, n), this._updateMapSelectHandler(t, u, n, i);
    }, e.prototype._buildGeoJSON = function(t) {
      var r = this._regionsGroupByName = Ce(), n = Ce(), i = this._regionsGroup, a = t.transformInfoRaw, o = t.mapOrGeoModel, s = t.data, l = t.geo.projection, u = l && l.stream;
      function c(h, p) {
        return p && (h = p(h)), h && [h[0] * a.scaleX + a.x, h[1] * a.scaleY + a.y];
      }
      function f(h) {
        for (var p = [], v = !u && l && l.project, g = 0; g < h.length; ++g) {
          var m = c(h[g], v);
          m && p.push(m);
        }
        return p;
      }
      function d(h) {
        return {
          shape: {
            points: f(h)
          }
        };
      }
      i.removeAll(), j(t.geo.regions, function(h) {
        var p = h.name, v = r.get(p), g = n.get(p) || {}, m = g.dataIdx, y = g.regionModel;
        if (!v) {
          v = r.set(p, new Fe()), i.add(v), m = s ? s.indexOfName(p) : null, y = t.isGeo ? o.getRegionModel(p) : s ? s.getItemModel(m) : null;
          var b = y.get("silent", !0);
          b != null && (v.silent = b), n.set(p, {
            dataIdx: m,
            regionModel: y
          });
        }
        var w = [], _ = [];
        j(h.geometries, function(A) {
          if (A.type === "polygon") {
            var M = [A.exterior].concat(A.interiors || []);
            u && (M = mI(M, u)), j(M, function(N) {
              w.push(new Jr(d(N)));
            });
          } else {
            var D = A.points;
            u && (D = mI(D, u, !0)), j(D, function(N) {
              _.push(new en(d(N)));
            });
          }
        });
        var S = c(h.getCenter(), l && l.project);
        function C(A, M) {
          if (A.length) {
            var D = new $y({
              culling: !0,
              segmentIgnoreThreshold: 1,
              shape: {
                paths: A
              }
            });
            v.add(D), dI(t, D, m, y), hI(t, D, p, y, o, m, S), M && (fI(D), j(D.states, fI));
          }
        }
        C(w), C(_, !0);
      }), r.each(function(h, p) {
        var v = n.get(p), g = v.dataIdx, m = v.regionModel;
        pI(t, h, p, m, o, g), vI(t, h, p, m, o), gI(t, h, p, m, o);
      }, this);
    }, e.prototype._buildSVG = function(t) {
      var r = t.geo.map, n = t.transformInfoRaw;
      this._svgGroup.x = n.x, this._svgGroup.y = n.y, this._svgGroup.scaleX = n.scaleX, this._svgGroup.scaleY = n.scaleY, this._svgResourceChanged(r) && (this._freeSVG(), this._useSVG(r));
      var i = this._svgDispatcherMap = Ce(), a = !1;
      j(this._svgGraphicRecord.named, function(o) {
        var s = o.name, l = t.mapOrGeoModel, u = t.data, c = o.svgNodeTagLower, f = o.el, d = u ? u.indexOfName(s) : null, h = l.getRegionModel(s);
        Ufe.get(c) != null && f instanceof ri && dI(t, f, d, h), f instanceof ri && (f.culling = !0);
        var p = h.get("silent", !0);
        if (p != null && (f.silent = p), f.z2EmphasisLift = 0, !o.namedFrom && (Zfe.get(c) != null && hI(t, f, s, h, l, d, null), pI(t, f, s, h, l, d), vI(t, f, s, h, l), Yfe.get(c) != null)) {
          var v = gI(t, f, s, h, l);
          v === "self" && (a = !0);
          var g = i.get(s) || i.set(s, []);
          g.push(f);
        }
      }, this), this._enableBlurEntireSVG(a, t);
    }, e.prototype._enableBlurEntireSVG = function(t, r) {
      if (t && r.isGeo) {
        var n = r.mapOrGeoModel.getModel(["blur", "itemStyle"]).getItemStyle(), i = n.opacity;
        this._svgGraphicRecord.root.traverse(function(a) {
          if (!a.isGroup) {
            jl(a);
            var o = a.ensureState("blur").style || {};
            o.opacity == null && i != null && (o.opacity = i), a.ensureState("emphasis");
          }
        });
      }
    }, e.prototype.remove = function() {
      this._regionsGroup.removeAll(), this._regionsGroupByName = null, this._svgGroup.removeAll(), this._freeSVG(), this._controller.dispose(), this._controllerHost = null;
    }, e.prototype.findHighDownDispatchers = function(t, r) {
      if (t == null)
        return [];
      var n = r.coordinateSystem;
      if (n.resourceType === "geoJSON") {
        var i = this._regionsGroupByName;
        if (i) {
          var a = i.get(t);
          return a ? [a] : [];
        }
      } else if (n.resourceType === "geoSVG")
        return this._svgDispatcherMap && this._svgDispatcherMap.get(t) || [];
    }, e.prototype._svgResourceChanged = function(t) {
      return this._svgMapName !== t;
    }, e.prototype._useSVG = function(t) {
      var r = to.getGeoResource(t);
      if (r && r.type === "geoSVG") {
        var n = r.useGraphic(this.uid);
        this._svgGroup.add(n.root), this._svgGraphicRecord = n, this._svgMapName = t;
      }
    }, e.prototype._freeSVG = function() {
      var t = this._svgMapName;
      if (t != null) {
        var r = to.getGeoResource(t);
        r && r.type === "geoSVG" && r.freeGraphic(this.uid), this._svgGraphicRecord = null, this._svgDispatcherMap = null, this._svgGroup.removeAll(), this._svgMapName = null;
      }
    }, e.prototype._updateController = function(t, r, n) {
      var i = t.coordinateSystem, a = this._controller, o = this._controllerHost;
      o.zoomLimit = t.get("scaleLimit"), o.zoom = i.getZoom(), a.enable(t.get("roam") || !1);
      var s = t.mainType;
      function l() {
        var u = {
          type: "geoRoam",
          componentType: s
        };
        return u[s + "Id"] = t.id, u;
      }
      a.off("pan").on("pan", function(u) {
        this._mouseDownFlag = !1, vT(o, u.dx, u.dy), n.dispatchAction(ae(l(), {
          dx: u.dx,
          dy: u.dy,
          animation: {
            duration: 0
          }
        }));
      }, this), a.off("zoom").on("zoom", function(u) {
        this._mouseDownFlag = !1, gT(o, u.scale, u.originX, u.originY), n.dispatchAction(ae(l(), {
          totalZoom: o.zoom,
          zoom: u.scale,
          originX: u.originX,
          originY: u.originY,
          animation: {
            duration: 0
          }
        }));
      }, this), a.setPointerChecker(function(u, c, f) {
        return i.containPoint([c, f]) && !l0(u, n, t);
      });
    }, e.prototype.resetForLabelLayout = function() {
      this.group.traverse(function(t) {
        var r = t.getTextContent();
        r && (r.ignore = uz(r).ignore);
      });
    }, e.prototype._updateMapSelectHandler = function(t, r, n, i) {
      var a = this;
      r.off("mousedown"), r.off("click"), t.get("selectedMode") && (r.on("mousedown", function() {
        a._mouseDownFlag = !0;
      }), r.on("click", function(o) {
        a._mouseDownFlag && (a._mouseDownFlag = !1);
      }));
    }, e;
  }()
);
function dI(e, t, r, n) {
  var i = n.getModel("itemStyle"), a = n.getModel(["emphasis", "itemStyle"]), o = n.getModel(["blur", "itemStyle"]), s = n.getModel(["select", "itemStyle"]), l = Av(i), u = Av(a), c = Av(s), f = Av(o), d = e.data;
  if (d) {
    var h = d.getItemVisual(r, "style"), p = d.getItemVisual(r, "decal");
    e.isVisualEncodedByVisualMap && h.fill && (l.fill = h.fill), p && (l.decal = Oc(p, e.api));
  }
  t.setStyle(l), t.style.strokeNoScale = !0, t.ensureState("emphasis").style = u, t.ensureState("select").style = c, t.ensureState("blur").style = f, jl(t);
}
function hI(e, t, r, n, i, a, o) {
  var s = e.data, l = e.isGeo, u = s && isNaN(s.get(s.mapDimension("value"), a)), c = s && s.getItemLayout(a);
  if (l || u || c && c.showLabel) {
    var f = l ? r : a, d = void 0;
    (!s || a >= 0) && (d = i);
    var h = o ? {
      normal: {
        align: "center",
        verticalAlign: "middle"
      }
    } : null;
    Br(t, Cr(n), {
      labelFetcher: d,
      labelDataIndex: f,
      defaultText: r
    }, h);
    var p = t.getTextContent();
    if (p && (uz(p).ignore = p.ignore, t.textConfig && o)) {
      var v = t.getBoundingRect().clone();
      t.textConfig.layoutRect = v, t.textConfig.position = [(o[0] - v.x) / v.width * 100 + "%", (o[1] - v.y) / v.height * 100 + "%"];
    }
    t.disableLabelAnimation = !0;
  } else
    t.removeTextContent(), t.removeTextConfig(), t.disableLabelAnimation = null;
}
function pI(e, t, r, n, i, a) {
  e.data ? e.data.setItemGraphicEl(a, t) : He(t).eventData = {
    componentType: "geo",
    componentIndex: i.componentIndex,
    geoIndex: i.componentIndex,
    name: r,
    region: n && n.option || {}
  };
}
function vI(e, t, r, n, i) {
  e.data || Yl({
    el: t,
    componentModel: i,
    itemName: r,
    // @ts-ignore FIXME:TS fix the "compatible with each other"?
    itemTooltipOption: n.get("tooltip")
  });
}
function gI(e, t, r, n, i) {
  t.highDownSilentOnTouch = !!i.get("selectedMode");
  var a = n.getModel("emphasis"), o = a.get("focus");
  return Jt(t, o, a.get("blurScope"), a.get("disabled")), e.isGeo && Ene(t, i, r), o;
}
function mI(e, t, r) {
  var n = [], i;
  function a() {
    i = [];
  }
  function o() {
    i.length && (n.push(i), i = []);
  }
  var s = t({
    polygonStart: a,
    polygonEnd: o,
    lineStart: a,
    lineEnd: o,
    point: function(l, u) {
      isFinite(l) && isFinite(u) && i.push([l, u]);
    },
    sphere: function() {
    }
  });
  return !r && s.polygonStart(), j(e, function(l) {
    s.lineStart();
    for (var u = 0; u < l.length; u++)
      s.point(l[u][0], l[u][1]);
    s.lineEnd();
  }), !r && s.polygonEnd(), n;
}
var Xfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      if (!(a && a.type === "mapToggleSelect" && a.from === this.uid)) {
        var o = this.group;
        if (o.removeAll(), !r.getHostGeoModel()) {
          if (this._mapDraw && a && a.type === "geoRoam" && this._mapDraw.resetForLabelLayout(), a && a.type === "geoRoam" && a.componentType === "series" && a.seriesId === r.id) {
            var s = this._mapDraw;
            s && o.add(s.group);
          } else if (r.needsDrawMap) {
            var s = this._mapDraw || new cz(i);
            o.add(s.group), s.draw(r, n, i, this, a), this._mapDraw = s;
          } else
            this._mapDraw && this._mapDraw.remove(), this._mapDraw = null;
          r.get("showLegendSymbol") && n.getComponent("legend") && this._renderSymbols(r, n, i);
        }
      }
    }, t.prototype.remove = function() {
      this._mapDraw && this._mapDraw.remove(), this._mapDraw = null, this.group.removeAll();
    }, t.prototype.dispose = function() {
      this._mapDraw && this._mapDraw.remove(), this._mapDraw = null;
    }, t.prototype._renderSymbols = function(r, n, i) {
      var a = r.originalData, o = this.group;
      a.each(a.mapDimension("value"), function(s, l) {
        if (!isNaN(s)) {
          var u = a.getItemLayout(l);
          if (!(!u || !u.point)) {
            var c = u.point, f = u.offset, d = new da({
              style: {
                // Because the special of map draw.
                // Which needs statistic of multiple series and draw on one map.
                // And each series also need a symbol with legend color
                //
                // Layout and visual are put one the different data
                // TODO
                fill: r.getData().getVisual("style").fill
              },
              shape: {
                cx: c[0] + f * 9,
                cy: c[1],
                r: 3
              },
              silent: !0,
              // Do not overlap the first series, on which labels are displayed.
              z2: 8 + (f ? 0 : af + 1)
            });
            if (!f) {
              var h = r.mainSeries.getData(), p = a.getName(l), v = h.indexOfName(p), g = a.getItemModel(l), m = g.getModel("label"), y = h.getItemGraphicEl(v);
              Br(d, Cr(g), {
                labelFetcher: {
                  getFormattedLabel: function(b, w) {
                    return r.getFormattedLabel(v, w);
                  }
                },
                defaultText: p
              }), d.disableLabelAnimation = !0, m.get("position") || d.setTextConfig({
                position: "bottom"
              }), y.onHoverStateChange = function(b) {
                im(d, b);
              };
            }
            o.add(d);
          }
        }
      });
    }, t.type = "map", t;
  }(It)
), Kfe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.needsDrawMap = !1, r.seriesGroup = [], r.getTooltipPosition = function(n) {
        if (n != null) {
          var i = this.getData().getName(n), a = this.coordinateSystem, o = a.getRegion(i);
          return o && a.dataToPoint(o.getCenter());
        }
      }, r;
    }
    return t.prototype.getInitialData = function(r) {
      for (var n = wf(this, {
        coordDimensions: ["value"],
        encodeDefaulter: We(LC, this)
      }), i = Ce(), a = [], o = 0, s = n.count(); o < s; o++) {
        var l = n.getName(o);
        i.set(l, o);
      }
      var u = to.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);
      return j(u.regions, function(c) {
        var f = c.name, d = i.get(f), h = c.properties && c.properties.echartsStyle, p;
        d == null ? (p = {
          name: f
        }, a.push(p)) : p = n.getRawDataItem(d), h && Xe(p, h);
      }), n.appendData(a), n;
    }, t.prototype.getHostGeoModel = function() {
      var r = this.option.geoIndex;
      return r != null ? this.ecModel.getComponent("geo", r) : null;
    }, t.prototype.getMapType = function() {
      return (this.getHostGeoModel() || this).option.map;
    }, t.prototype.getRawValue = function(r) {
      var n = this.getData();
      return n.get(n.mapDimension("value"), r);
    }, t.prototype.getRegionModel = function(r) {
      var n = this.getData();
      return n.getItemModel(n.indexOfName(r));
    }, t.prototype.formatTooltip = function(r, n, i) {
      for (var a = this.getData(), o = this.getRawValue(r), s = a.getName(r), l = this.seriesGroup, u = [], c = 0; c < l.length; c++) {
        var f = l[c].originalData.indexOfName(s), d = a.mapDimension("value");
        isNaN(l[c].originalData.get(d, f)) || u.push(l[c].name);
      }
      return Tr("section", {
        header: u.join(", "),
        noHeader: !u.length,
        blocks: [Tr("nameValue", {
          name: s,
          value: o
        })]
      });
    }, t.prototype.setZoom = function(r) {
      this.option.zoom = r;
    }, t.prototype.setCenter = function(r) {
      this.option.center = r;
    }, t.prototype.getLegendIcon = function(r) {
      var n = r.icon || "roundRect", i = fr(n, 0, 0, r.itemWidth, r.itemHeight, r.itemStyle.fill);
      return i.setStyle(r.itemStyle), i.style.stroke = "none", n.indexOf("empty") > -1 && (i.style.stroke = i.style.fill, i.style.fill = "#fff", i.style.lineWidth = 2), i;
    }, t.type = "series.map", t.dependencies = ["geo"], t.layoutMode = "box", t.defaultOption = {
      // 一级层叠
      // zlevel: 0,
      // 二级层叠
      z: 2,
      coordinateSystem: "geo",
      // map should be explicitly specified since ec3.
      map: "",
      // If `geoIndex` is not specified, a exclusive geo will be
      // created. Otherwise use the specified geo component, and
      // `map` and `mapType` are ignored.
      // geoIndex: 0,
      // 'center' | 'left' | 'right' | 'x%' | {number}
      left: "center",
      // 'center' | 'top' | 'bottom' | 'x%' | {number}
      top: "center",
      // right
      // bottom
      // width:
      // height
      // Aspect is width / height. Inited to be geoJson bbox aspect
      // This parameter is used for scale this aspect
      // Default value:
      // for geoSVG source: 1,
      // for geoJSON source: 0.75.
      aspectScale: null,
      // Layout with center and size
      // If you want to put map in a fixed size box with right aspect ratio
      // This two properties may be more convenient.
      // layoutCenter: [50%, 50%]
      // layoutSize: 100
      showLegendSymbol: !0,
      // Define left-top, right-bottom coords to control view
      // For example, [ [180, 90], [-180, -90] ],
      // higher priority than center and zoom
      boundingCoords: null,
      // Default on center of map
      center: null,
      zoom: 1,
      scaleLimit: null,
      selectedMode: !0,
      label: {
        show: !1,
        color: "#000"
      },
      // scaleLimit: null,
      itemStyle: {
        borderWidth: 0.5,
        borderColor: "#444",
        areaColor: "#eee"
      },
      emphasis: {
        label: {
          show: !0,
          color: "rgb(100,0,0)"
        },
        itemStyle: {
          areaColor: "rgba(255,215,0,0.8)"
        }
      },
      select: {
        label: {
          show: !0,
          color: "rgb(100,0,0)"
        },
        itemStyle: {
          color: "rgba(255,215,0,0.8)"
        }
      },
      nameProperty: "name"
    }, t;
  }(zt)
);
function qfe(e, t) {
  var r = {};
  return j(e, function(n) {
    n.each(n.mapDimension("value"), function(i, a) {
      var o = "ec-" + n.getName(a);
      r[o] = r[o] || [], isNaN(i) || r[o].push(i);
    });
  }), e[0].map(e[0].mapDimension("value"), function(n, i) {
    for (var a = "ec-" + e[0].getName(i), o = 0, s = 1 / 0, l = -1 / 0, u = r[a].length, c = 0; c < u; c++)
      s = Math.min(s, r[a][c]), l = Math.max(l, r[a][c]), o += r[a][c];
    var f;
    return t === "min" ? f = s : t === "max" ? f = l : t === "average" ? f = o / u : f = o, u === 0 ? NaN : f;
  });
}
function Jfe(e) {
  var t = {};
  e.eachSeriesByType("map", function(r) {
    var n = r.getHostGeoModel(), i = n ? "o" + n.id : "i" + r.getMapType();
    (t[i] = t[i] || []).push(r);
  }), j(t, function(r, n) {
    for (var i = qfe(ue(r, function(o) {
      return o.getData();
    }), r[0].get("mapValueCalculation")), a = 0; a < r.length; a++)
      r[a].originalData = r[a].getData();
    for (var a = 0; a < r.length; a++)
      r[a].seriesGroup = r, r[a].needsDrawMap = a === 0 && !r[a].getHostGeoModel(), r[a].setData(i.cloneShallow()), r[a].mainSeries = r[0];
  });
}
function Qfe(e) {
  var t = {};
  e.eachSeriesByType("map", function(r) {
    var n = r.getMapType();
    if (!(r.getHostGeoModel() || t[n])) {
      var i = {};
      j(r.seriesGroup, function(o) {
        var s = o.coordinateSystem, l = o.originalData;
        o.get("showLegendSymbol") && e.getComponent("legend") && l.each(l.mapDimension("value"), function(u, c) {
          var f = l.getName(c), d = s.getRegion(f);
          if (!(!d || isNaN(u))) {
            var h = i[f] || 0, p = s.dataToPoint(d.getCenter());
            i[f] = h + 1, l.setItemLayout(c, {
              point: p,
              offset: h
            });
          }
        });
      });
      var a = r.getData();
      a.each(function(o) {
        var s = a.getName(o), l = a.getItemLayout(o) || {};
        l.showLabel = !i[s], a.setItemLayout(o, l);
      }), t[n] = !0;
    }
  });
}
var yI = Ir, gp = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this) || this;
      return n.type = "view", n.dimensions = ["x", "y"], n._roamTransformable = new Va(), n._rawTransformable = new Va(), n.name = r, n;
    }
    return t.prototype.setBoundingRect = function(r, n, i, a) {
      return this._rect = new tt(r, n, i, a), this._rect;
    }, t.prototype.getBoundingRect = function() {
      return this._rect;
    }, t.prototype.setViewRect = function(r, n, i, a) {
      this._transformTo(r, n, i, a), this._viewRect = new tt(r, n, i, a);
    }, t.prototype._transformTo = function(r, n, i, a) {
      var o = this.getBoundingRect(), s = this._rawTransformable;
      s.transform = o.calculateTransform(new tt(r, n, i, a));
      var l = s.parent;
      s.parent = null, s.decomposeTransform(), s.parent = l, this._updateTransform();
    }, t.prototype.setCenter = function(r, n) {
      r && (this._center = [pe(r[0], n.getWidth()), pe(r[1], n.getHeight())], this._updateCenterAndZoom());
    }, t.prototype.setZoom = function(r) {
      r = r || 1;
      var n = this.zoomLimit;
      n && (n.max != null && (r = Math.min(n.max, r)), n.min != null && (r = Math.max(n.min, r))), this._zoom = r, this._updateCenterAndZoom();
    }, t.prototype.getDefaultCenter = function() {
      var r = this.getBoundingRect(), n = r.x + r.width / 2, i = r.y + r.height / 2;
      return [n, i];
    }, t.prototype.getCenter = function() {
      return this._center || this.getDefaultCenter();
    }, t.prototype.getZoom = function() {
      return this._zoom || 1;
    }, t.prototype.getRoamTransform = function() {
      return this._roamTransformable.getLocalTransform();
    }, t.prototype._updateCenterAndZoom = function() {
      var r = this._rawTransformable.getLocalTransform(), n = this._roamTransformable, i = this.getDefaultCenter(), a = this.getCenter(), o = this.getZoom();
      a = Ir([], a, r), i = Ir([], i, r), n.originX = a[0], n.originY = a[1], n.x = i[0] - a[0], n.y = i[1] - a[1], n.scaleX = n.scaleY = o, this._updateTransform();
    }, t.prototype._updateTransform = function() {
      var r = this._roamTransformable, n = this._rawTransformable;
      n.parent = r, r.updateTransform(), n.updateTransform(), Dy(this.transform || (this.transform = []), n.transform || yn()), this._rawTransform = n.getLocalTransform(), this.invTransform = this.invTransform || [], Ul(this.invTransform, this.transform), this.decomposeTransform();
    }, t.prototype.getTransformInfo = function() {
      var r = this._rawTransformable, n = this._roamTransformable, i = new Va();
      return i.transform = n.transform, i.decomposeTransform(), {
        roam: {
          x: i.x,
          y: i.y,
          scaleX: i.scaleX,
          scaleY: i.scaleY
        },
        raw: {
          x: r.x,
          y: r.y,
          scaleX: r.scaleX,
          scaleY: r.scaleY
        }
      };
    }, t.prototype.getViewRect = function() {
      return this._viewRect;
    }, t.prototype.getViewRectAfterRoam = function() {
      var r = this.getBoundingRect().clone();
      return r.applyTransform(this.transform), r;
    }, t.prototype.dataToPoint = function(r, n, i) {
      var a = n ? this._rawTransform : this.transform;
      return i = i || [], a ? yI(i, r, a) : Ur(i, r);
    }, t.prototype.pointToData = function(r) {
      var n = this.invTransform;
      return n ? yI([], r, n) : [r[0], r[1]];
    }, t.prototype.convertToPixel = function(r, n, i) {
      var a = xI(n);
      return a === this ? a.dataToPoint(i) : null;
    }, t.prototype.convertFromPixel = function(r, n, i) {
      var a = xI(n);
      return a === this ? a.pointToData(i) : null;
    }, t.prototype.containPoint = function(r) {
      return this.getViewRectAfterRoam().contain(r[0], r[1]);
    }, t.dimensions = ["x", "y"], t;
  }(Va)
);
function xI(e) {
  var t = e.seriesModel;
  return t ? t.coordinateSystem : null;
}
var ede = {
  geoJSON: {
    aspectScale: 0.75,
    invertLongitute: !0
  },
  geoSVG: {
    aspectScale: 1,
    invertLongitute: !1
  }
}, fz = ["lng", "lat"], Zw = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this, r) || this;
      a.dimensions = fz, a.type = "geo", a._nameCoordMap = Ce(), a.map = n;
      var o = i.projection, s = to.load(n, i.nameMap, i.nameProperty), l = to.getGeoResource(n), u = a.resourceType = l ? l.type : null, c = a.regions = s.regions, f = ede[l.type];
      a._regionsMap = s.regionsMap, a.regions = s.regions, process.env.NODE_ENV !== "production" && o && (u === "geoSVG" && (process.env.NODE_ENV !== "production" && qt("Map " + n + " with SVG source can't use projection. Only GeoJSON source supports projection."), o = null), o.project && o.unproject || (process.env.NODE_ENV !== "production" && qt("project and unproject must be both provided in the projeciton."), o = null)), a.projection = o;
      var d;
      if (o)
        for (var h = 0; h < c.length; h++) {
          var p = c[h].getBoundingRect(o);
          d = d || p.clone(), d.union(p);
        }
      else
        d = s.boundingRect;
      return a.setBoundingRect(d.x, d.y, d.width, d.height), a.aspectScale = o ? 1 : Ge(i.aspectScale, f.aspectScale), a._invertLongitute = o ? !1 : f.invertLongitute, a;
    }
    return t.prototype._transformTo = function(r, n, i, a) {
      var o = this.getBoundingRect(), s = this._invertLongitute;
      o = o.clone(), s && (o.y = -o.y - o.height);
      var l = this._rawTransformable;
      l.transform = o.calculateTransform(new tt(r, n, i, a));
      var u = l.parent;
      l.parent = null, l.decomposeTransform(), l.parent = u, s && (l.scaleY = -l.scaleY), this._updateTransform();
    }, t.prototype.getRegion = function(r) {
      return this._regionsMap.get(r);
    }, t.prototype.getRegionByCoord = function(r) {
      for (var n = this.regions, i = 0; i < n.length; i++) {
        var a = n[i];
        if (a.type === "geoJSON" && a.contain(r))
          return n[i];
      }
    }, t.prototype.addGeoCoord = function(r, n) {
      this._nameCoordMap.set(r, n);
    }, t.prototype.getGeoCoord = function(r) {
      var n = this._regionsMap.get(r);
      return this._nameCoordMap.get(r) || n && n.getCenter();
    }, t.prototype.dataToPoint = function(r, n, i) {
      if (ge(r) && (r = this.getGeoCoord(r)), r) {
        var a = this.projection;
        return a && (r = a.project(r)), r && this.projectedToPoint(r, n, i);
      }
    }, t.prototype.pointToData = function(r) {
      var n = this.projection;
      return n && (r = n.unproject(r)), r && this.pointToProjected(r);
    }, t.prototype.pointToProjected = function(r) {
      return e.prototype.pointToData.call(this, r);
    }, t.prototype.projectedToPoint = function(r, n, i) {
      return e.prototype.dataToPoint.call(this, r, n, i);
    }, t.prototype.convertToPixel = function(r, n, i) {
      var a = bI(n);
      return a === this ? a.dataToPoint(i) : null;
    }, t.prototype.convertFromPixel = function(r, n, i) {
      var a = bI(n);
      return a === this ? a.pointToData(i) : null;
    }, t;
  }(gp)
);
ir(Zw, gp);
function bI(e) {
  var t = e.geoModel, r = e.seriesModel;
  return t ? t.coordinateSystem : r ? r.coordinateSystem || (r.getReferringComponents("geo", pr).models[0] || {}).coordinateSystem : null;
}
function wI(e, t) {
  var r = e.get("boundingCoords");
  if (r != null) {
    var n = r[0], i = r[1];
    if (!(isFinite(n[0]) && isFinite(n[1]) && isFinite(i[0]) && isFinite(i[1])))
      process.env.NODE_ENV !== "production" && console.error("Invalid boundingCoords");
    else {
      var a = this.projection;
      if (a) {
        var o = n[0], s = n[1], l = i[0], u = i[1];
        n = [1 / 0, 1 / 0], i = [-1 / 0, -1 / 0];
        var c = function(S, C, A, M) {
          for (var D = A - S, N = M - C, R = 0; R <= 100; R++) {
            var O = R / 100, E = a.project([S + D * O, C + N * O]);
            za(n, n, E), ja(i, i, E);
          }
        };
        c(o, s, l, s), c(l, s, l, u), c(l, u, o, u), c(o, u, l, s);
      }
      this.setBoundingRect(n[0], n[1], i[0] - n[0], i[1] - n[1]);
    }
  }
  var f = this.getBoundingRect(), d = e.get("layoutCenter"), h = e.get("layoutSize"), p = t.getWidth(), v = t.getHeight(), g = f.width / f.height * this.aspectScale, m = !1, y, b;
  d && h && (y = [pe(d[0], p), pe(d[1], v)], b = pe(h, Math.min(p, v)), !isNaN(y[0]) && !isNaN(y[1]) && !isNaN(b) ? m = !0 : process.env.NODE_ENV !== "production" && console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."));
  var w;
  if (m)
    w = {}, g > 1 ? (w.width = b, w.height = b / g) : (w.height = b, w.width = b * g), w.y = y[1] - w.height / 2, w.x = y[0] - w.width / 2;
  else {
    var _ = e.getBoxLayoutParams();
    _.aspect = g, w = vr(_, {
      width: p,
      height: v
    });
  }
  this.setViewRect(w.x, w.y, w.width, w.height), this.setCenter(e.get("center"), t), this.setZoom(e.get("zoom"));
}
function tde(e, t) {
  j(t.get("geoCoord"), function(r, n) {
    e.addGeoCoord(n, r);
  });
}
var rde = (
  /** @class */
  function() {
    function e() {
      this.dimensions = fz;
    }
    return e.prototype.create = function(t, r) {
      var n = [];
      function i(o) {
        return {
          nameProperty: o.get("nameProperty"),
          aspectScale: o.get("aspectScale"),
          projection: o.get("projection")
        };
      }
      t.eachComponent("geo", function(o, s) {
        var l = o.get("map"), u = new Zw(l + s, l, ae({
          nameMap: o.get("nameMap")
        }, i(o)));
        u.zoomLimit = o.get("scaleLimit"), n.push(u), o.coordinateSystem = u, u.model = o, u.resize = wI, u.resize(o, r);
      }), t.eachSeries(function(o) {
        var s = o.get("coordinateSystem");
        if (s === "geo") {
          var l = o.get("geoIndex") || 0;
          o.coordinateSystem = n[l];
        }
      });
      var a = {};
      return t.eachSeriesByType("map", function(o) {
        if (!o.getHostGeoModel()) {
          var s = o.getMapType();
          a[s] = a[s] || [], a[s].push(o);
        }
      }), j(a, function(o, s) {
        var l = ue(o, function(c) {
          return c.get("nameMap");
        }), u = new Zw(s, s, ae({
          nameMap: Ay(l)
        }, i(o[0])));
        u.zoomLimit = ur.apply(null, ue(o, function(c) {
          return c.get("scaleLimit");
        })), n.push(u), u.resize = wI, u.resize(o[0], r), j(o, function(c) {
          c.coordinateSystem = u, tde(u, c);
        });
      }), n;
    }, e.prototype.getFilledRegions = function(t, r, n, i) {
      for (var a = (t || []).slice(), o = Ce(), s = 0; s < a.length; s++)
        o.set(a[s].name, a[s]);
      var l = to.load(r, n, i);
      return j(l.regions, function(u) {
        var c = u.name, f = o.get(c), d = u.properties && u.properties.echartsStyle;
        f || (f = {
          name: c
        }, a.push(f)), d && Xe(f, d);
      }), a;
    }, e;
  }()
), dz = new rde(), nde = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n, i) {
      var a = to.getGeoResource(r.map);
      if (a && a.type === "geoJSON") {
        var o = r.itemStyle = r.itemStyle || {};
        "color" in o || (o.color = "#eee");
      }
      this.mergeDefaultAndTheme(r, i), kl(r, "label", ["show"]);
    }, t.prototype.optionUpdated = function() {
      var r = this, n = this.option;
      n.regions = dz.getFilledRegions(n.regions, n.map, n.nameMap, n.nameProperty);
      var i = {};
      this._optionModelMap = ei(n.regions || [], function(a, o) {
        var s = o.name;
        return s && (a.set(s, new Tt(o, r, r.ecModel)), o.selected && (i[s] = !0)), a;
      }, Ce()), n.selectedMap || (n.selectedMap = i);
    }, t.prototype.getRegionModel = function(r) {
      return this._optionModelMap.get(r) || new Tt(null, this, this.ecModel);
    }, t.prototype.getFormattedLabel = function(r, n) {
      var i = this.getRegionModel(r), a = n === "normal" ? i.get(["label", "formatter"]) : i.get(["emphasis", "label", "formatter"]), o = {
        name: r
      };
      if (Ee(a))
        return o.status = n, a(o);
      if (ge(a))
        return a.replace("{a}", r ?? "");
    }, t.prototype.setZoom = function(r) {
      this.option.zoom = r;
    }, t.prototype.setCenter = function(r) {
      this.option.center = r;
    }, t.prototype.select = function(r) {
      var n = this.option, i = n.selectedMode;
      if (i) {
        i !== "multiple" && (n.selectedMap = null);
        var a = n.selectedMap || (n.selectedMap = {});
        a[r] = !0;
      }
    }, t.prototype.unSelect = function(r) {
      var n = this.option.selectedMap;
      n && (n[r] = !1);
    }, t.prototype.toggleSelected = function(r) {
      this[this.isSelected(r) ? "unSelect" : "select"](r);
    }, t.prototype.isSelected = function(r) {
      var n = this.option.selectedMap;
      return !!(n && n[r]);
    }, t.type = "geo", t.layoutMode = "box", t.defaultOption = {
      // zlevel: 0,
      z: 0,
      show: !0,
      left: "center",
      top: "center",
      // Default value:
      // for geoSVG source: 1,
      // for geoJSON source: 0.75.
      aspectScale: null,
      // /// Layout with center and size
      // If you want to put map in a fixed size box with right aspect ratio
      // This two properties may be more convenient
      // layoutCenter: [50%, 50%]
      // layoutSize: 100
      silent: !1,
      // Map type
      map: "",
      // Define left-top, right-bottom coords to control view
      // For example, [ [180, 90], [-180, -90] ]
      boundingCoords: null,
      // Default on center of map
      center: null,
      zoom: 1,
      scaleLimit: null,
      // selectedMode: false
      label: {
        show: !1,
        color: "#000"
      },
      itemStyle: {
        borderWidth: 0.5,
        borderColor: "#444"
        // Default color:
        // + geoJSON: #eee
        // + geoSVG: null (use SVG original `fill`)
        // color: '#eee'
      },
      emphasis: {
        label: {
          show: !0,
          color: "rgb(100,0,0)"
        },
        itemStyle: {
          color: "rgba(255,215,0,0.8)"
        }
      },
      select: {
        label: {
          show: !0,
          color: "rgb(100,0,0)"
        },
        itemStyle: {
          color: "rgba(255,215,0,0.8)"
        }
      },
      regions: []
      // tooltip: {
      //     show: false
      // }
    }, t;
  }(at)
);
function _I(e, t) {
  return e.pointToProjected ? e.pointToProjected(t) : e.pointToData(t);
}
function yT(e, t, r, n) {
  var i = e.getZoom(), a = e.getCenter(), o = t.zoom, s = e.projectedToPoint ? e.projectedToPoint(a) : e.dataToPoint(a);
  if (t.dx != null && t.dy != null && (s[0] -= t.dx, s[1] -= t.dy, e.setCenter(_I(e, s), n)), o != null) {
    if (r) {
      var l = r.min || 0, u = r.max || 1 / 0;
      o = Math.max(Math.min(i * o, u), l) / i;
    }
    e.scaleX *= o, e.scaleY *= o;
    var c = (t.originX - e.x) * (o - 1), f = (t.originY - e.y) * (o - 1);
    e.x -= c, e.y -= f, e.updateTransform(), e.setCenter(_I(e, s), n), e.setZoom(o * i);
  }
  return {
    center: e.getCenter(),
    zoom: e.getZoom()
  };
}
var ide = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.focusBlurEnabled = !0, r;
    }
    return t.prototype.init = function(r, n) {
      this._api = n;
    }, t.prototype.render = function(r, n, i, a) {
      if (this._model = r, !r.get("show")) {
        this._mapDraw && this._mapDraw.remove(), this._mapDraw = null;
        return;
      }
      this._mapDraw || (this._mapDraw = new cz(i));
      var o = this._mapDraw;
      o.draw(r, n, i, this, a), o.group.on("click", this._handleRegionClick, this), o.group.silent = r.get("silent"), this.group.add(o.group), this.updateSelectStatus(r, n, i);
    }, t.prototype._handleRegionClick = function(r) {
      var n;
      pl(r.target, function(i) {
        return (n = He(i).eventData) != null;
      }, !0), n && this._api.dispatchAction({
        type: "geoToggleSelect",
        geoId: this._model.id,
        name: n.name
      });
    }, t.prototype.updateSelectStatus = function(r, n, i) {
      var a = this;
      this._mapDraw.group.traverse(function(o) {
        var s = He(o).eventData;
        if (s)
          return a._model.isSelected(s.name) ? i.enterSelect(o) : i.leaveSelect(o), !0;
      });
    }, t.prototype.findHighDownDispatchers = function(r) {
      return this._mapDraw && this._mapDraw.findHighDownDispatchers(r, this._model);
    }, t.prototype.dispose = function() {
      this._mapDraw && this._mapDraw.remove();
    }, t.type = "geo", t;
  }($t)
);
function ade(e, t, r) {
  to.registerMap(e, t, r);
}
function hz(e) {
  e.registerCoordinateSystem("geo", dz), e.registerComponentModel(nde), e.registerComponentView(ide), e.registerImpl("registerMap", ade), e.registerImpl("getMap", function(r) {
    return to.getMapForUser(r);
  });
  function t(r, n) {
    n.update = "geo:updateSelectStatus", e.registerAction(n, function(i, a) {
      var o = {}, s = [];
      return a.eachComponent({
        mainType: "geo",
        query: i
      }, function(l) {
        l[r](i.name);
        var u = l.coordinateSystem;
        j(u.regions, function(f) {
          o[f.name] = l.isSelected(f.name) || !1;
        });
        var c = [];
        j(o, function(f, d) {
          o[d] && c.push(d);
        }), s.push({
          geoIndex: l.componentIndex,
          // Use singular, the same naming convention as the event `selectchanged`.
          name: c
        });
      }), {
        selected: o,
        allSelected: s,
        name: i.name
      };
    });
  }
  t("toggleSelected", {
    type: "geoToggleSelect",
    event: "geoselectchanged"
  }), t("select", {
    type: "geoSelect",
    event: "geoselected"
  }), t("unSelect", {
    type: "geoUnSelect",
    event: "geounselected"
  }), e.registerAction({
    type: "geoRoam",
    event: "geoRoam",
    update: "updateTransform"
  }, function(r, n, i) {
    var a = r.componentType || "series";
    n.eachComponent({
      mainType: a,
      query: r
    }, function(o) {
      var s = o.coordinateSystem;
      if (s.type === "geo") {
        var l = yT(s, r, o.get("scaleLimit"), i);
        o.setCenter && o.setCenter(l.center), o.setZoom && o.setZoom(l.zoom), a === "series" && j(o.seriesGroup, function(u) {
          u.setCenter(l.center), u.setZoom(l.zoom);
        });
      }
    });
  });
}
function ode(e) {
  ot(hz), e.registerChartView(Xfe), e.registerSeriesModel(Kfe), e.registerLayout(Qfe), e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC, Jfe), d8("map", e.registerAction);
}
function sde(e) {
  var t = e;
  t.hierNode = {
    defaultAncestor: null,
    ancestor: t,
    prelim: 0,
    modifier: 0,
    change: 0,
    shift: 0,
    i: 0,
    thread: null
  };
  for (var r = [t], n, i; n = r.pop(); )
    if (i = n.children, n.isExpand && i.length)
      for (var a = i.length, o = a - 1; o >= 0; o--) {
        var s = i[o];
        s.hierNode = {
          defaultAncestor: null,
          ancestor: s,
          prelim: 0,
          modifier: 0,
          change: 0,
          shift: 0,
          i: o,
          thread: null
        }, r.push(s);
      }
}
function lde(e, t) {
  var r = e.isExpand ? e.children : [], n = e.parentNode.children, i = e.hierNode.i ? n[e.hierNode.i - 1] : null;
  if (r.length) {
    fde(e);
    var a = (r[0].hierNode.prelim + r[r.length - 1].hierNode.prelim) / 2;
    i ? (e.hierNode.prelim = i.hierNode.prelim + t(e, i), e.hierNode.modifier = e.hierNode.prelim - a) : e.hierNode.prelim = a;
  } else i && (e.hierNode.prelim = i.hierNode.prelim + t(e, i));
  e.parentNode.hierNode.defaultAncestor = dde(e, i, e.parentNode.hierNode.defaultAncestor || n[0], t);
}
function ude(e) {
  var t = e.hierNode.prelim + e.parentNode.hierNode.modifier;
  e.setLayout({
    x: t
  }, !0), e.hierNode.modifier += e.parentNode.hierNode.modifier;
}
function SI(e) {
  return arguments.length ? e : vde;
}
function Sd(e, t) {
  return e -= Math.PI / 2, {
    x: t * Math.cos(e),
    y: t * Math.sin(e)
  };
}
function cde(e, t) {
  return vr(e.getBoxLayoutParams(), {
    width: t.getWidth(),
    height: t.getHeight()
  });
}
function fde(e) {
  for (var t = e.children, r = t.length, n = 0, i = 0; --r >= 0; ) {
    var a = t[r];
    a.hierNode.prelim += n, a.hierNode.modifier += n, i += a.hierNode.change, n += a.hierNode.shift + i;
  }
}
function dde(e, t, r, n) {
  if (t) {
    for (var i = e, a = e, o = a.parentNode.children[0], s = t, l = i.hierNode.modifier, u = a.hierNode.modifier, c = o.hierNode.modifier, f = s.hierNode.modifier; s = zx(s), a = jx(a), s && a; ) {
      i = zx(i), o = jx(o), i.hierNode.ancestor = e;
      var d = s.hierNode.prelim + f - a.hierNode.prelim - u + n(s, a);
      d > 0 && (pde(hde(s, e, r), e, d), u += d, l += d), f += s.hierNode.modifier, u += a.hierNode.modifier, l += i.hierNode.modifier, c += o.hierNode.modifier;
    }
    s && !zx(i) && (i.hierNode.thread = s, i.hierNode.modifier += f - l), a && !jx(o) && (o.hierNode.thread = a, o.hierNode.modifier += u - c, r = e);
  }
  return r;
}
function zx(e) {
  var t = e.children;
  return t.length && e.isExpand ? t[t.length - 1] : e.hierNode.thread;
}
function jx(e) {
  var t = e.children;
  return t.length && e.isExpand ? t[0] : e.hierNode.thread;
}
function hde(e, t, r) {
  return e.hierNode.ancestor.parentNode === t.parentNode ? e.hierNode.ancestor : r;
}
function pde(e, t, r) {
  var n = r / (t.hierNode.i - e.hierNode.i);
  t.hierNode.change -= n, t.hierNode.shift += r, t.hierNode.modifier += r, t.hierNode.prelim += r, e.hierNode.change += n;
}
function vde(e, t) {
  return e.parentNode === t.parentNode ? 1 : 2;
}
var gde = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.parentPoint = [], this.childPoints = [];
    }
    return e;
  }()
), mde = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      return e.call(this, r) || this;
    }
    return t.prototype.getDefaultStyle = function() {
      return {
        stroke: "#000",
        fill: null
      };
    }, t.prototype.getDefaultShape = function() {
      return new gde();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.childPoints, a = i.length, o = n.parentPoint, s = i[0], l = i[a - 1];
      if (a === 1) {
        r.moveTo(o[0], o[1]), r.lineTo(s[0], s[1]);
        return;
      }
      var u = n.orient, c = u === "TB" || u === "BT" ? 0 : 1, f = 1 - c, d = pe(n.forkPosition, 1), h = [];
      h[c] = o[c], h[f] = o[f] + (l[f] - o[f]) * d, r.moveTo(o[0], o[1]), r.lineTo(h[0], h[1]), r.moveTo(s[0], s[1]), h[c] = s[c], r.lineTo(h[0], h[1]), h[c] = l[c], r.lineTo(h[0], h[1]), r.lineTo(l[0], l[1]);
      for (var p = 1; p < a - 1; p++) {
        var v = i[p];
        r.moveTo(v[0], v[1]), h[c] = v[c], r.lineTo(h[0], h[1]);
      }
    }, t;
  }(lt)
), yde = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._mainGroup = new Fe(), r;
    }
    return t.prototype.init = function(r, n) {
      this._controller = new vp(n.getZr()), this._controllerHost = {
        target: this.group
      }, this.group.add(this._mainGroup);
    }, t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = r.layoutInfo, s = this._mainGroup, l = r.get("layout");
      l === "radial" ? (s.x = o.x + o.width / 2, s.y = o.y + o.height / 2) : (s.x = o.x, s.y = o.y), this._updateViewCoordSys(r, i), this._updateController(r, n, i);
      var u = this._data;
      a.diff(u).add(function(c) {
        CI(a, c) && TI(a, c, null, s, r);
      }).update(function(c, f) {
        var d = u.getItemGraphicEl(f);
        if (!CI(a, c)) {
          d && MI(u, f, d, s, r);
          return;
        }
        TI(a, c, d, s, r);
      }).remove(function(c) {
        var f = u.getItemGraphicEl(c);
        f && MI(u, c, f, s, r);
      }).execute(), this._nodeScaleRatio = r.get("nodeScaleRatio"), this._updateNodeAndLinkScale(r), r.get("expandAndCollapse") === !0 && a.eachItemGraphicEl(function(c, f) {
        c.off("click").on("click", function() {
          i.dispatchAction({
            type: "treeExpandAndCollapse",
            seriesId: r.id,
            dataIndex: f
          });
        });
      }), this._data = a;
    }, t.prototype._updateViewCoordSys = function(r, n) {
      var i = r.getData(), a = [];
      i.each(function(f) {
        var d = i.getItemLayout(f);
        d && !isNaN(d.x) && !isNaN(d.y) && a.push([+d.x, +d.y]);
      });
      var o = [], s = [];
      Vy(a, o, s);
      var l = this._min, u = this._max;
      s[0] - o[0] === 0 && (o[0] = l ? l[0] : o[0] - 1, s[0] = u ? u[0] : s[0] + 1), s[1] - o[1] === 0 && (o[1] = l ? l[1] : o[1] - 1, s[1] = u ? u[1] : s[1] + 1);
      var c = r.coordinateSystem = new gp();
      c.zoomLimit = r.get("scaleLimit"), c.setBoundingRect(o[0], o[1], s[0] - o[0], s[1] - o[1]), c.setCenter(r.get("center"), n), c.setZoom(r.get("zoom")), this.group.attr({
        x: c.x,
        y: c.y,
        scaleX: c.scaleX,
        scaleY: c.scaleY
      }), this._min = o, this._max = s;
    }, t.prototype._updateController = function(r, n, i) {
      var a = this, o = this._controller, s = this._controllerHost, l = this.group;
      o.setPointerChecker(function(u, c, f) {
        var d = l.getBoundingRect();
        return d.applyTransform(l.transform), d.contain(c, f) && !l0(u, i, r);
      }), o.enable(r.get("roam")), s.zoomLimit = r.get("scaleLimit"), s.zoom = r.coordinateSystem.getZoom(), o.off("pan").off("zoom").on("pan", function(u) {
        vT(s, u.dx, u.dy), i.dispatchAction({
          seriesId: r.id,
          type: "treeRoam",
          dx: u.dx,
          dy: u.dy
        });
      }).on("zoom", function(u) {
        gT(s, u.scale, u.originX, u.originY), i.dispatchAction({
          seriesId: r.id,
          type: "treeRoam",
          zoom: u.scale,
          originX: u.originX,
          originY: u.originY
        }), a._updateNodeAndLinkScale(r), i.updateLabelLayout();
      });
    }, t.prototype._updateNodeAndLinkScale = function(r) {
      var n = r.getData(), i = this._getNodeGlobalScale(r);
      n.eachItemGraphicEl(function(a, o) {
        a.setSymbolScale(i);
      });
    }, t.prototype._getNodeGlobalScale = function(r) {
      var n = r.coordinateSystem;
      if (n.type !== "view")
        return 1;
      var i = this._nodeScaleRatio, a = n.scaleX || 1, o = n.getZoom(), s = (o - 1) * i + 1;
      return s / a;
    }, t.prototype.dispose = function() {
      this._controller && this._controller.dispose(), this._controllerHost = null;
    }, t.prototype.remove = function() {
      this._mainGroup.removeAll(), this._data = null;
    }, t.type = "tree", t;
  }(It)
);
function CI(e, t) {
  var r = e.getItemLayout(t);
  return r && !isNaN(r.x) && !isNaN(r.y);
}
function TI(e, t, r, n, i) {
  var a = !r, o = e.tree.getNodeByDataIndex(t), s = o.getModel(), l = o.getVisual("style").fill, u = o.isExpand === !1 && o.children.length !== 0 ? l : "#fff", c = e.tree.root, f = o.parentNode === c ? o : o.parentNode || o, d = e.getItemGraphicEl(f.dataIndex), h = f.getLayout(), p = d ? {
    x: d.__oldX,
    y: d.__oldY,
    rawX: d.__radialOldRawX,
    rawY: d.__radialOldRawY
  } : h, v = o.getLayout();
  a ? (r = new up(e, t, null, {
    symbolInnerColor: u,
    useNameLabel: !0
  }), r.x = p.x, r.y = p.y) : r.updateData(e, t, null, {
    symbolInnerColor: u,
    useNameLabel: !0
  }), r.__radialOldRawX = r.__radialRawX, r.__radialOldRawY = r.__radialRawY, r.__radialRawX = v.rawX, r.__radialRawY = v.rawY, n.add(r), e.setItemGraphicEl(t, r), r.__oldX = r.x, r.__oldY = r.y, _t(r, {
    x: v.x,
    y: v.y
  }, i);
  var g = r.getSymbolPath();
  if (i.get("layout") === "radial") {
    var m = c.children[0], y = m.getLayout(), b = m.children.length, w = void 0, _ = void 0;
    if (v.x === y.x && o.isExpand === !0 && m.children.length) {
      var S = {
        x: (m.children[0].getLayout().x + m.children[b - 1].getLayout().x) / 2,
        y: (m.children[0].getLayout().y + m.children[b - 1].getLayout().y) / 2
      };
      w = Math.atan2(S.y - y.y, S.x - y.x), w < 0 && (w = Math.PI * 2 + w), _ = S.x < y.x, _ && (w = w - Math.PI);
    } else
      w = Math.atan2(v.y - y.y, v.x - y.x), w < 0 && (w = Math.PI * 2 + w), o.children.length === 0 || o.children.length !== 0 && o.isExpand === !1 ? (_ = v.x < y.x, _ && (w = w - Math.PI)) : (_ = v.x > y.x, _ || (w = w - Math.PI));
    var C = _ ? "left" : "right", A = s.getModel("label"), M = A.get("rotate"), D = M * (Math.PI / 180), N = g.getTextContent();
    N && (g.setTextConfig({
      position: A.get("position") || C,
      rotation: M == null ? -w : D,
      origin: "center"
    }), N.setStyle("verticalAlign", "middle"));
  }
  var R = s.get(["emphasis", "focus"]), O = R === "relative" ? Nc(o.getAncestorsIndices(), o.getDescendantIndices()) : R === "ancestor" ? o.getAncestorsIndices() : R === "descendant" ? o.getDescendantIndices() : null;
  O && (He(r).focus = O), xde(i, o, c, r, p, h, v, n), r.__edge && (r.onHoverStateChange = function(E) {
    if (E !== "blur") {
      var L = o.parentNode && e.getItemGraphicEl(o.parentNode.dataIndex);
      L && L.hoverState === tp || im(r.__edge, E);
    }
  });
}
function xde(e, t, r, n, i, a, o, s) {
  var l = t.getModel(), u = e.get("edgeShape"), c = e.get("layout"), f = e.getOrient(), d = e.get(["lineStyle", "curveness"]), h = e.get("edgeForkPosition"), p = l.getModel("lineStyle").getLineStyle(), v = n.__edge;
  if (u === "curve")
    t.parentNode && t.parentNode !== r && (v || (v = n.__edge = new sf({
      shape: Xw(c, f, d, i, i)
    })), _t(v, {
      shape: Xw(c, f, d, a, o)
    }, e));
  else if (u === "polyline") {
    if (c === "orthogonal") {
      if (t !== r && t.children && t.children.length !== 0 && t.isExpand === !0) {
        for (var g = t.children, m = [], y = 0; y < g.length; y++) {
          var b = g[y].getLayout();
          m.push([b.x, b.y]);
        }
        v || (v = n.__edge = new mde({
          shape: {
            parentPoint: [o.x, o.y],
            childPoints: [[o.x, o.y]],
            orient: f,
            forkPosition: h
          }
        })), _t(v, {
          shape: {
            parentPoint: [o.x, o.y],
            childPoints: m
          }
        }, e);
      }
    } else if (process.env.NODE_ENV !== "production")
      throw new Error("The polyline edgeShape can only be used in orthogonal layout");
  }
  v && !(u === "polyline" && !t.isExpand) && (v.useStyle(Ie({
    strokeNoScale: !0,
    fill: null
  }, p)), Vr(v, l, "lineStyle"), jl(v), s.add(v));
}
function AI(e, t, r, n, i) {
  var a = t.tree.root, o = pz(a, e), s = o.source, l = o.sourceLayout, u = t.getItemGraphicEl(e.dataIndex);
  if (u) {
    var c = t.getItemGraphicEl(s.dataIndex), f = c.__edge, d = u.__edge || (s.isExpand === !1 || s.children.length === 1 ? f : void 0), h = n.get("edgeShape"), p = n.get("layout"), v = n.get("orient"), g = n.get(["lineStyle", "curveness"]);
    d && (h === "curve" ? ls(d, {
      shape: Xw(p, v, g, l, l),
      style: {
        opacity: 0
      }
    }, n, {
      cb: function() {
        r.remove(d);
      },
      removeOpt: i
    }) : h === "polyline" && n.get("layout") === "orthogonal" && ls(d, {
      shape: {
        parentPoint: [l.x, l.y],
        childPoints: [[l.x, l.y]]
      },
      style: {
        opacity: 0
      }
    }, n, {
      cb: function() {
        r.remove(d);
      },
      removeOpt: i
    }));
  }
}
function pz(e, t) {
  for (var r = t.parentNode === e ? t : t.parentNode || t, n; n = r.getLayout(), n == null; )
    r = r.parentNode === e ? r : r.parentNode || r;
  return {
    source: r,
    sourceLayout: n
  };
}
function MI(e, t, r, n, i) {
  var a = e.tree.getNodeByDataIndex(t), o = e.tree.root, s = pz(o, a).sourceLayout, l = {
    duration: i.get("animationDurationUpdate"),
    easing: i.get("animationEasingUpdate")
  };
  ls(r, {
    x: s.x + 1,
    y: s.y + 1
  }, i, {
    cb: function() {
      n.remove(r), e.setItemGraphicEl(t, null);
    },
    removeOpt: l
  }), r.fadeOut(null, e.hostModel, {
    fadeLabel: !0,
    animation: l
  }), a.children.forEach(function(u) {
    AI(u, e, n, i, l);
  }), AI(a, e, n, i, l);
}
function Xw(e, t, r, n, i) {
  var a, o, s, l, u, c, f, d;
  if (e === "radial") {
    u = n.rawX, f = n.rawY, c = i.rawX, d = i.rawY;
    var h = Sd(u, f), p = Sd(u, f + (d - f) * r), v = Sd(c, d + (f - d) * r), g = Sd(c, d);
    return {
      x1: h.x || 0,
      y1: h.y || 0,
      x2: g.x || 0,
      y2: g.y || 0,
      cpx1: p.x || 0,
      cpy1: p.y || 0,
      cpx2: v.x || 0,
      cpy2: v.y || 0
    };
  } else
    u = n.x, f = n.y, c = i.x, d = i.y, (t === "LR" || t === "RL") && (a = u + (c - u) * r, o = f, s = c + (u - c) * r, l = d), (t === "TB" || t === "BT") && (a = u, o = f + (d - f) * r, s = c, l = d + (f - d) * r);
  return {
    x1: u,
    y1: f,
    x2: c,
    y2: d,
    cpx1: a,
    cpy1: o,
    cpx2: s,
    cpy2: l
  };
}
var qn = yt();
function vz(e) {
  var t = e.mainData, r = e.datas;
  r || (r = {
    main: t
  }, e.datasAttr = {
    main: "data"
  }), e.datas = e.mainData = null, gz(t, r, e), j(r, function(n) {
    j(t.TRANSFERABLE_METHODS, function(i) {
      n.wrapMethod(i, We(bde, e));
    });
  }), t.wrapMethod("cloneShallow", We(_de, e)), j(t.CHANGABLE_METHODS, function(n) {
    t.wrapMethod(n, We(wde, e));
  }), Le(r[t.dataType] === t);
}
function bde(e, t) {
  if (Tde(this)) {
    var r = ae({}, qn(this).datas);
    r[this.dataType] = t, gz(t, r, e);
  } else
    xT(t, this.dataType, qn(this).mainData, e);
  return t;
}
function wde(e, t) {
  return e.struct && e.struct.update(), t;
}
function _de(e, t) {
  return j(qn(t).datas, function(r, n) {
    r !== t && xT(r.cloneShallow(), n, t, e);
  }), t;
}
function Sde(e) {
  var t = qn(this).mainData;
  return e == null || t == null ? t : qn(t).datas[e];
}
function Cde() {
  var e = qn(this).mainData;
  return e == null ? [{
    data: e
  }] : ue(ut(qn(e).datas), function(t) {
    return {
      type: t,
      data: qn(e).datas[t]
    };
  });
}
function Tde(e) {
  return qn(e).mainData === e;
}
function gz(e, t, r) {
  qn(e).datas = {}, j(t, function(n, i) {
    xT(n, i, e, r);
  });
}
function xT(e, t, r, n) {
  qn(r).datas[t] = e, qn(e).mainData = r, e.dataType = t, n.struct && (e[n.structAttr] = n.struct, n.struct[n.datasAttr[t]] = e), e.getLinkedData = Sde, e.getLinkedDataAll = Cde;
}
var Ade = (
  /** @class */
  function() {
    function e(t, r) {
      this.depth = 0, this.height = 0, this.dataIndex = -1, this.children = [], this.viewChildren = [], this.isExpand = !1, this.name = t || "", this.hostTree = r;
    }
    return e.prototype.isRemoved = function() {
      return this.dataIndex < 0;
    }, e.prototype.eachNode = function(t, r, n) {
      Ee(t) && (n = r, r = t, t = null), t = t || {}, ge(t) && (t = {
        order: t
      });
      var i = t.order || "preorder", a = this[t.attr || "children"], o;
      i === "preorder" && (o = r.call(n, this));
      for (var s = 0; !o && s < a.length; s++)
        a[s].eachNode(t, r, n);
      i === "postorder" && r.call(n, this);
    }, e.prototype.updateDepthAndHeight = function(t) {
      var r = 0;
      this.depth = t;
      for (var n = 0; n < this.children.length; n++) {
        var i = this.children[n];
        i.updateDepthAndHeight(t + 1), i.height > r && (r = i.height);
      }
      this.height = r + 1;
    }, e.prototype.getNodeById = function(t) {
      if (this.getId() === t)
        return this;
      for (var r = 0, n = this.children, i = n.length; r < i; r++) {
        var a = n[r].getNodeById(t);
        if (a)
          return a;
      }
    }, e.prototype.contains = function(t) {
      if (t === this)
        return !0;
      for (var r = 0, n = this.children, i = n.length; r < i; r++) {
        var a = n[r].contains(t);
        if (a)
          return a;
      }
    }, e.prototype.getAncestors = function(t) {
      for (var r = [], n = t ? this : this.parentNode; n; )
        r.push(n), n = n.parentNode;
      return r.reverse(), r;
    }, e.prototype.getAncestorsIndices = function() {
      for (var t = [], r = this; r; )
        t.push(r.dataIndex), r = r.parentNode;
      return t.reverse(), t;
    }, e.prototype.getDescendantIndices = function() {
      var t = [];
      return this.eachNode(function(r) {
        t.push(r.dataIndex);
      }), t;
    }, e.prototype.getValue = function(t) {
      var r = this.hostTree.data;
      return r.getStore().get(r.getDimensionIndex(t || "value"), this.dataIndex);
    }, e.prototype.setLayout = function(t, r) {
      this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, t, r);
    }, e.prototype.getLayout = function() {
      return this.hostTree.data.getItemLayout(this.dataIndex);
    }, e.prototype.getModel = function(t) {
      if (!(this.dataIndex < 0)) {
        var r = this.hostTree, n = r.data.getItemModel(this.dataIndex);
        return n.getModel(t);
      }
    }, e.prototype.getLevelModel = function() {
      return (this.hostTree.levelModels || [])[this.depth];
    }, e.prototype.setVisual = function(t, r) {
      this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, t, r);
    }, e.prototype.getVisual = function(t) {
      return this.hostTree.data.getItemVisual(this.dataIndex, t);
    }, e.prototype.getRawIndex = function() {
      return this.hostTree.data.getRawIndex(this.dataIndex);
    }, e.prototype.getId = function() {
      return this.hostTree.data.getId(this.dataIndex);
    }, e.prototype.getChildIndex = function() {
      if (this.parentNode) {
        for (var t = this.parentNode.children, r = 0; r < t.length; ++r)
          if (t[r] === this)
            return r;
        return -1;
      }
      return -1;
    }, e.prototype.isAncestorOf = function(t) {
      for (var r = t.parentNode; r; ) {
        if (r === this)
          return !0;
        r = r.parentNode;
      }
      return !1;
    }, e.prototype.isDescendantOf = function(t) {
      return t !== this && t.isAncestorOf(this);
    }, e;
  }()
), bT = (
  /** @class */
  function() {
    function e(t) {
      this.type = "tree", this._nodes = [], this.hostModel = t;
    }
    return e.prototype.eachNode = function(t, r, n) {
      this.root.eachNode(t, r, n);
    }, e.prototype.getNodeByDataIndex = function(t) {
      var r = this.data.getRawIndex(t);
      return this._nodes[r];
    }, e.prototype.getNodeById = function(t) {
      return this.root.getNodeById(t);
    }, e.prototype.update = function() {
      for (var t = this.data, r = this._nodes, n = 0, i = r.length; n < i; n++)
        r[n].dataIndex = -1;
      for (var n = 0, i = t.count(); n < i; n++)
        r[t.getRawIndex(n)].dataIndex = n;
    }, e.prototype.clearLayouts = function() {
      this.data.clearItemLayouts();
    }, e.createTree = function(t, r, n) {
      var i = new e(r), a = [], o = 1;
      s(t);
      function s(c, f) {
        var d = c.value;
        o = Math.max(o, le(d) ? d.length : 1), a.push(c);
        var h = new Ade(yr(c.name, ""), i);
        f ? Mde(h, f) : i.root = h, i._nodes.push(h);
        var p = c.children;
        if (p)
          for (var v = 0; v < p.length; v++)
            s(p[v], h);
      }
      i.root.updateDepthAndHeight(0);
      var l = yf(a, {
        coordDimensions: ["value"],
        dimensionsCount: o
      }).dimensions, u = new Xr(l, r);
      return u.initData(a), n && n(u), vz({
        mainData: u,
        struct: i,
        structAttr: "tree"
      }), i.update(), i;
    }, e;
  }()
);
function Mde(e, t) {
  var r = t.children;
  e.parentNode !== t && (r.push(e), e.parentNode = t);
}
function Eh(e, t, r) {
  if (e && rt(t, e.type) >= 0) {
    var n = r.getData().tree.root, i = e.targetNode;
    if (ge(i) && (i = n.getNodeById(i)), i && n.contains(i))
      return {
        node: i
      };
    var a = e.targetNodeId;
    if (a != null && (i = n.getNodeById(a)))
      return {
        node: i
      };
  }
}
function mz(e) {
  for (var t = []; e; )
    e = e.parentNode, e && t.push(e);
  return t.reverse();
}
function wT(e, t) {
  var r = mz(e);
  return rt(r, t) >= 0;
}
function c0(e, t) {
  for (var r = []; e; ) {
    var n = e.dataIndex;
    r.push({
      name: e.name,
      dataIndex: n,
      value: t.getRawValue(n)
    }), e = e.parentNode;
  }
  return r.reverse(), r;
}
var Ede = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.hasSymbolVisual = !0, r.ignoreStyleOnData = !0, r;
    }
    return t.prototype.getInitialData = function(r) {
      var n = {
        name: r.name,
        children: r.data
      }, i = r.leaves || {}, a = new Tt(i, this, this.ecModel), o = bT.createTree(n, this, s);
      function s(f) {
        f.wrapMethod("getItemModel", function(d, h) {
          var p = o.getNodeByDataIndex(h);
          return p && p.children.length && p.isExpand || (d.parentModel = a), d;
        });
      }
      var l = 0;
      o.eachNode("preorder", function(f) {
        f.depth > l && (l = f.depth);
      });
      var u = r.expandAndCollapse, c = u && r.initialTreeDepth >= 0 ? r.initialTreeDepth : l;
      return o.root.eachNode("preorder", function(f) {
        var d = f.hostTree.data.getRawDataItem(f.dataIndex);
        f.isExpand = d && d.collapsed != null ? !d.collapsed : f.depth <= c;
      }), o.data;
    }, t.prototype.getOrient = function() {
      var r = this.get("orient");
      return r === "horizontal" ? r = "LR" : r === "vertical" && (r = "TB"), r;
    }, t.prototype.setZoom = function(r) {
      this.option.zoom = r;
    }, t.prototype.setCenter = function(r) {
      this.option.center = r;
    }, t.prototype.formatTooltip = function(r, n, i) {
      for (var a = this.getData().tree, o = a.root.children[0], s = a.getNodeByDataIndex(r), l = s.getValue(), u = s.name; s && s !== o; )
        u = s.parentNode.name + "." + u, s = s.parentNode;
      return Tr("nameValue", {
        name: u,
        value: l,
        noValue: isNaN(l) || l == null
      });
    }, t.prototype.getDataParams = function(r) {
      var n = e.prototype.getDataParams.apply(this, arguments), i = this.getData().tree.getNodeByDataIndex(r);
      return n.treeAncestors = c0(i, this), n.collapsed = !i.isExpand, n;
    }, t.type = "series.tree", t.layoutMode = "box", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "view",
      // the position of the whole view
      left: "12%",
      top: "12%",
      right: "12%",
      bottom: "12%",
      // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'
      layout: "orthogonal",
      // value can be 'polyline'
      edgeShape: "curve",
      edgeForkPosition: "50%",
      // true | false | 'move' | 'scale', see module:component/helper/RoamController.
      roam: !1,
      // Symbol size scale ratio in roam
      nodeScaleRatio: 0.4,
      // Default on center of graph
      center: null,
      zoom: 1,
      orient: "LR",
      symbol: "emptyCircle",
      symbolSize: 7,
      expandAndCollapse: !0,
      initialTreeDepth: 2,
      lineStyle: {
        color: "#ccc",
        width: 1.5,
        curveness: 0.5
      },
      itemStyle: {
        color: "lightsteelblue",
        // borderColor: '#c23531',
        borderWidth: 1.5
      },
      label: {
        show: !0
      },
      animationEasing: "linear",
      animationDuration: 700,
      animationDurationUpdate: 500
    }, t;
  }(zt)
);
function Dde(e, t, r) {
  for (var n = [e], i = [], a; a = n.pop(); )
    if (i.push(a), a.isExpand) {
      var o = a.children;
      if (o.length)
        for (var s = 0; s < o.length; s++)
          n.push(o[s]);
    }
  for (; a = i.pop(); )
    t(a, r);
}
function Jf(e, t) {
  for (var r = [e], n; n = r.pop(); )
    if (t(n), n.isExpand) {
      var i = n.children;
      if (i.length)
        for (var a = i.length - 1; a >= 0; a--)
          r.push(i[a]);
    }
}
function Nde(e, t) {
  e.eachSeriesByType("tree", function(r) {
    Ide(r, t);
  });
}
function Ide(e, t) {
  var r = cde(e, t);
  e.layoutInfo = r;
  var n = e.get("layout"), i = 0, a = 0, o = null;
  n === "radial" ? (i = 2 * Math.PI, a = Math.min(r.height, r.width) / 2, o = SI(function(b, w) {
    return (b.parentNode === w.parentNode ? 1 : 2) / b.depth;
  })) : (i = r.width, a = r.height, o = SI());
  var s = e.getData().tree.root, l = s.children[0];
  if (l) {
    sde(s), Dde(l, lde, o), s.hierNode.modifier = -l.hierNode.prelim, Jf(l, ude);
    var u = l, c = l, f = l;
    Jf(l, function(b) {
      var w = b.getLayout().x;
      w < u.getLayout().x && (u = b), w > c.getLayout().x && (c = b), b.depth > f.depth && (f = b);
    });
    var d = u === c ? 1 : o(u, c) / 2, h = d - u.getLayout().x, p = 0, v = 0, g = 0, m = 0;
    if (n === "radial")
      p = i / (c.getLayout().x + d + h), v = a / (f.depth - 1 || 1), Jf(l, function(b) {
        g = (b.getLayout().x + h) * p, m = (b.depth - 1) * v;
        var w = Sd(g, m);
        b.setLayout({
          x: w.x,
          y: w.y,
          rawX: g,
          rawY: m
        }, !0);
      });
    else {
      var y = e.getOrient();
      y === "RL" || y === "LR" ? (v = a / (c.getLayout().x + d + h), p = i / (f.depth - 1 || 1), Jf(l, function(b) {
        m = (b.getLayout().x + h) * v, g = y === "LR" ? (b.depth - 1) * p : i - (b.depth - 1) * p, b.setLayout({
          x: g,
          y: m
        }, !0);
      })) : (y === "TB" || y === "BT") && (p = i / (c.getLayout().x + d + h), v = a / (f.depth - 1 || 1), Jf(l, function(b) {
        g = (b.getLayout().x + h) * p, m = y === "TB" ? (b.depth - 1) * v : a - (b.depth - 1) * v, b.setLayout({
          x: g,
          y: m
        }, !0);
      }));
    }
  }
}
function Lde(e) {
  e.eachSeriesByType("tree", function(t) {
    var r = t.getData(), n = r.tree;
    n.eachNode(function(i) {
      var a = i.getModel(), o = a.getModel("itemStyle").getItemStyle(), s = r.ensureUniqueItemVisual(i.dataIndex, "style");
      ae(s, o);
    });
  });
}
function Rde(e) {
  e.registerAction({
    type: "treeExpandAndCollapse",
    event: "treeExpandAndCollapse",
    update: "update"
  }, function(t, r) {
    r.eachComponent({
      mainType: "series",
      subType: "tree",
      query: t
    }, function(n) {
      var i = t.dataIndex, a = n.getData().tree, o = a.getNodeByDataIndex(i);
      o.isExpand = !o.isExpand;
    });
  }), e.registerAction({
    type: "treeRoam",
    event: "treeRoam",
    // Here we set 'none' instead of 'update', because roam action
    // just need to update the transform matrix without having to recalculate
    // the layout. So don't need to go through the whole update process, such
    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.
    update: "none"
  }, function(t, r, n) {
    r.eachComponent({
      mainType: "series",
      subType: "tree",
      query: t
    }, function(i) {
      var a = i.coordinateSystem, o = yT(a, t, void 0, n);
      i.setCenter && i.setCenter(o.center), i.setZoom && i.setZoom(o.zoom);
    });
  });
}
function Pde(e) {
  e.registerChartView(yde), e.registerSeriesModel(Ede), e.registerLayout(Nde), e.registerVisual(Lde), Rde(e);
}
var EI = ["treemapZoomToNode", "treemapRender", "treemapMove"];
function kde(e) {
  for (var t = 0; t < EI.length; t++)
    e.registerAction({
      type: EI[t],
      update: "updateView"
    }, rr);
  e.registerAction({
    type: "treemapRootToNode",
    update: "updateView"
  }, function(r, n) {
    n.eachComponent({
      mainType: "series",
      subType: "treemap",
      query: r
    }, i);
    function i(a, o) {
      var s = ["treemapZoomToNode", "treemapRootToNode"], l = Eh(r, s, a);
      if (l) {
        var u = a.getViewRoot();
        u && (r.direction = wT(u, l.node) ? "rollUp" : "drillDown"), a.resetViewRoot(l.node);
      }
    }
  });
}
function yz(e) {
  var t = e.getData(), r = t.tree, n = {};
  r.eachNode(function(i) {
    for (var a = i; a && a.depth > 1; )
      a = a.parentNode;
    var o = _w(e.ecModel, a.name || a.dataIndex + "", n);
    i.setVisual("decal", o);
  });
}
var Ode = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.preventUsingHoverLayer = !0, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      var i = {
        name: r.name,
        children: r.data
      };
      xz(i);
      var a = r.levels || [], o = this.designatedVisualItemStyle = {}, s = new Tt({
        itemStyle: o
      }, this, n);
      a = r.levels = zde(a, n);
      var l = ue(a || [], function(f) {
        return new Tt(f, s, n);
      }, this), u = bT.createTree(i, this, c);
      function c(f) {
        f.wrapMethod("getItemModel", function(d, h) {
          var p = u.getNodeByDataIndex(h), v = p ? l[p.depth] : null;
          return d.parentModel = v || s, d;
        });
      }
      return u.data;
    }, t.prototype.optionUpdated = function() {
      this.resetViewRoot();
    }, t.prototype.formatTooltip = function(r, n, i) {
      var a = this.getData(), o = this.getRawValue(r), s = a.getName(r);
      return Tr("nameValue", {
        name: s,
        value: o
      });
    }, t.prototype.getDataParams = function(r) {
      var n = e.prototype.getDataParams.apply(this, arguments), i = this.getData().tree.getNodeByDataIndex(r);
      return n.treeAncestors = c0(i, this), n.treePathInfo = n.treeAncestors, n;
    }, t.prototype.setLayoutInfo = function(r) {
      this.layoutInfo = this.layoutInfo || {}, ae(this.layoutInfo, r);
    }, t.prototype.mapIdToIndex = function(r) {
      var n = this._idIndexMap;
      n || (n = this._idIndexMap = Ce(), this._idIndexMapCount = 0);
      var i = n.get(r);
      return i == null && n.set(r, i = this._idIndexMapCount++), i;
    }, t.prototype.getViewRoot = function() {
      return this._viewRoot;
    }, t.prototype.resetViewRoot = function(r) {
      r ? this._viewRoot = r : r = this._viewRoot;
      var n = this.getRawData().tree.root;
      (!r || r !== n && !n.contains(r)) && (this._viewRoot = n);
    }, t.prototype.enableAriaDecal = function() {
      yz(this);
    }, t.type = "series.treemap", t.layoutMode = "box", t.defaultOption = {
      // Disable progressive rendering
      progressive: 0,
      // size: ['80%', '80%'],            // deprecated, compatible with ec2.
      left: "center",
      top: "middle",
      width: "80%",
      height: "80%",
      sort: !0,
      clipWindow: "origin",
      squareRatio: 0.5 * (1 + Math.sqrt(5)),
      leafDepth: null,
      drillDownIcon: "▶",
      // to align specialized icon. ▷▶❒❐▼✚
      zoomToNodeRatio: 0.32 * 0.32,
      scaleLimit: null,
      roam: !0,
      nodeClick: "zoomToNode",
      animation: !0,
      animationDurationUpdate: 900,
      animationEasing: "quinticInOut",
      breadcrumb: {
        show: !0,
        height: 22,
        left: "center",
        top: "bottom",
        // right
        // bottom
        emptyItemWidth: 25,
        itemStyle: {
          color: "rgba(0,0,0,0.7)",
          textStyle: {
            color: "#fff"
          }
        },
        emphasis: {
          itemStyle: {
            color: "rgba(0,0,0,0.9)"
            // '#5793f3',
          }
        }
      },
      label: {
        show: !0,
        // Do not use textDistance, for ellipsis rect just the same as treemap node rect.
        distance: 0,
        padding: 5,
        position: "inside",
        // formatter: null,
        color: "#fff",
        overflow: "truncate"
        // align
        // verticalAlign
      },
      upperLabel: {
        show: !1,
        position: [0, "50%"],
        height: 20,
        // formatter: null,
        // color: '#fff',
        overflow: "truncate",
        // align: null,
        verticalAlign: "middle"
      },
      itemStyle: {
        color: null,
        colorAlpha: null,
        colorSaturation: null,
        borderWidth: 0,
        gapWidth: 0,
        borderColor: "#fff",
        borderColorSaturation: null
        // If specified, borderColor will be ineffective, and the
        // border color is evaluated by color of current node and
        // borderColorSaturation.
      },
      emphasis: {
        upperLabel: {
          show: !0,
          position: [0, "50%"],
          overflow: "truncate",
          verticalAlign: "middle"
        }
      },
      visualDimension: 0,
      visualMin: null,
      visualMax: null,
      color: [],
      // level[n].color (if necessary).
      // + Specify color list of each level. level[0].color would be global
      // color list if not specified. (see method `setDefault`).
      // + But set as a empty array to forbid fetch color from global palette
      // when using nodeModel.get('color'), otherwise nodes on deep level
      // will always has color palette set and are not able to inherit color
      // from parent node.
      // + TreemapSeries.color can not be set as 'none', otherwise effect
      // legend color fetching (see seriesColor.js).
      colorAlpha: null,
      colorSaturation: null,
      colorMappingBy: "index",
      visibleMin: 10,
      // be rendered. Only works when sort is 'asc' or 'desc'.
      childrenVisibleMin: null,
      // grandchildren will not show.
      // Why grandchildren? If not grandchildren but children,
      // some siblings show children and some not,
      // the appearance may be mess and not consistent,
      levels: []
      // Each item: {
      //     visibleMin, itemStyle, visualDimension, label
      // }
    }, t;
  }(zt)
);
function xz(e) {
  var t = 0;
  j(e.children, function(n) {
    xz(n);
    var i = n.value;
    le(i) && (i = i[0]), t += i;
  });
  var r = e.value;
  le(r) && (r = r[0]), (r == null || isNaN(r)) && (r = t), r < 0 && (r = 0), le(e.value) ? e.value[0] = r : e.value = r;
}
function zde(e, t) {
  var r = Ot(t.get("color")), n = Ot(t.get(["aria", "decal", "decals"]));
  if (r) {
    e = e || [];
    var i, a;
    j(e, function(s) {
      var l = new Tt(s), u = l.get("color"), c = l.get("decal");
      (l.get(["itemStyle", "color"]) || u && u !== "none") && (i = !0), (l.get(["itemStyle", "decal"]) || c && c !== "none") && (a = !0);
    });
    var o = e[0] || (e[0] = {});
    return i || (o.color = r.slice()), !a && n && (o.decal = n.slice()), e;
  }
}
var jde = 8, DI = 8, Vx = 5, Vde = (
  /** @class */
  function() {
    function e(t) {
      this.group = new Fe(), t.add(this.group);
    }
    return e.prototype.render = function(t, r, n, i) {
      var a = t.getModel("breadcrumb"), o = this.group;
      if (o.removeAll(), !(!a.get("show") || !n)) {
        var s = a.getModel("itemStyle"), l = a.getModel("emphasis"), u = s.getModel("textStyle"), c = l.getModel(["itemStyle", "textStyle"]), f = {
          pos: {
            left: a.get("left"),
            right: a.get("right"),
            top: a.get("top"),
            bottom: a.get("bottom")
          },
          box: {
            width: r.getWidth(),
            height: r.getHeight()
          },
          emptyItemWidth: a.get("emptyItemWidth"),
          totalWidth: 0,
          renderList: []
        };
        this._prepare(n, f, u), this._renderContent(t, f, s, l, u, c, i), Ky(o, f.pos, f.box);
      }
    }, e.prototype._prepare = function(t, r, n) {
      for (var i = t; i; i = i.parentNode) {
        var a = yr(i.getModel().get("name"), ""), o = n.getTextRect(a), s = Math.max(o.width + jde * 2, r.emptyItemWidth);
        r.totalWidth += s + DI, r.renderList.push({
          node: i,
          text: a,
          width: s
        });
      }
    }, e.prototype._renderContent = function(t, r, n, i, a, o, s) {
      for (var l = 0, u = r.emptyItemWidth, c = t.get(["breadcrumb", "height"]), f = Eie(r.pos, r.box), d = r.totalWidth, h = r.renderList, p = i.getModel("itemStyle").getItemStyle(), v = h.length - 1; v >= 0; v--) {
        var g = h[v], m = g.node, y = g.width, b = g.text;
        d > f.width && (d -= y - u, y = u, b = null);
        var w = new Jr({
          shape: {
            points: Bde(l, 0, y, c, v === h.length - 1, v === 0)
          },
          style: Ie(n.getItemStyle(), {
            lineJoin: "bevel"
          }),
          textContent: new pt({
            style: Vt(a, {
              text: b
            })
          }),
          textConfig: {
            position: "inside"
          },
          z2: af * 1e4,
          onclick: We(s, m)
        });
        w.disableLabelAnimation = !0, w.getTextContent().ensureState("emphasis").style = Vt(o, {
          text: b
        }), w.ensureState("emphasis").style = p, Jt(w, i.get("focus"), i.get("blurScope"), i.get("disabled")), this.group.add(w), Fde(w, t, m), l += y + DI;
      }
    }, e.prototype.remove = function() {
      this.group.removeAll();
    }, e;
  }()
);
function Bde(e, t, r, n, i, a) {
  var o = [[i ? e : e - Vx, t], [e + r, t], [e + r, t + n], [i ? e : e - Vx, t + n]];
  return !a && o.splice(2, 0, [e + r + Vx, t + n / 2]), !i && o.push([e, t + n / 2]), o;
}
function Fde(e, t, r) {
  He(e).eventData = {
    componentType: "series",
    componentSubType: "treemap",
    componentIndex: t.componentIndex,
    seriesIndex: t.seriesIndex,
    seriesName: t.name,
    seriesType: "treemap",
    selfType: "breadcrumb",
    nodeData: {
      dataIndex: r && r.dataIndex,
      name: r && r.name
    },
    treePathInfo: r && c0(r, t)
  };
}
var $de = (
  /** @class */
  function() {
    function e() {
      this._storage = [], this._elExistsMap = {};
    }
    return e.prototype.add = function(t, r, n, i, a) {
      return this._elExistsMap[t.id] ? !1 : (this._elExistsMap[t.id] = !0, this._storage.push({
        el: t,
        target: r,
        duration: n,
        delay: i,
        easing: a
      }), !0);
    }, e.prototype.finished = function(t) {
      return this._finishedCallback = t, this;
    }, e.prototype.start = function() {
      for (var t = this, r = this._storage.length, n = function() {
        r--, r <= 0 && (t._storage.length = 0, t._elExistsMap = {}, t._finishedCallback && t._finishedCallback());
      }, i = 0, a = this._storage.length; i < a; i++) {
        var o = this._storage[i];
        o.el.animateTo(o.target, {
          duration: o.duration,
          delay: o.delay,
          easing: o.easing,
          setToFinal: !0,
          done: n,
          aborted: n
        });
      }
      return this;
    }, e;
  }()
);
function Hde() {
  return new $de();
}
var Kw = Fe, NI = vt, II = 3, LI = "label", RI = "upperLabel", Gde = af * 10, Wde = af * 2, Ude = af * 3, Xs = zl([
  ["fill", "color"],
  // `borderColor` and `borderWidth` has been occupied,
  // so use `stroke` to indicate the stroke of the rect.
  ["stroke", "strokeColor"],
  ["lineWidth", "strokeWidth"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["shadowColor"]
  // Option decal is in `DecalObject` but style.decal is in `PatternObject`.
  // So do not transfer decal directly.
]), PI = function(e) {
  var t = Xs(e);
  return t.stroke = t.fill = t.lineWidth = null, t;
}, Nm = yt(), Yde = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._state = "ready", r._storage = Qf(), r;
    }
    return t.prototype.render = function(r, n, i, a) {
      var o = n.findComponents({
        mainType: "series",
        subType: "treemap",
        query: a
      });
      if (!(rt(o, r) < 0)) {
        this.seriesModel = r, this.api = i, this.ecModel = n;
        var s = ["treemapZoomToNode", "treemapRootToNode"], l = Eh(a, s, r), u = a && a.type, c = r.layoutInfo, f = !this._oldTree, d = this._storage, h = u === "treemapRootToNode" && l && d ? {
          rootNodeGroup: d.nodeGroup[l.node.getRawIndex()],
          direction: a.direction
        } : null, p = this._giveContainerGroup(c), v = r.get("animation"), g = this._doRender(p, r, h);
        v && !f && (!u || u === "treemapZoomToNode" || u === "treemapRootToNode") ? this._doAnimation(p, g, r, h) : g.renderFinally(), this._resetController(i), this._renderBreadcrumb(r, i, l);
      }
    }, t.prototype._giveContainerGroup = function(r) {
      var n = this._containerGroup;
      return n || (n = this._containerGroup = new Kw(), this._initEvents(n), this.group.add(n)), n.x = r.x, n.y = r.y, n;
    }, t.prototype._doRender = function(r, n, i) {
      var a = n.getData().tree, o = this._oldTree, s = Qf(), l = Qf(), u = this._storage, c = [];
      function f(y, b, w, _) {
        return Zde(n, l, u, i, s, c, y, b, w, _);
      }
      v(a.root ? [a.root] : [], o && o.root ? [o.root] : [], r, a === o || !o, 0);
      var d = g(u);
      if (this._oldTree = a, this._storage = l, this._controllerHost) {
        var h = this.seriesModel.layoutInfo, p = a.root.getLayout();
        p.width === h.width && p.height === h.height && (this._controllerHost.zoom = 1);
      }
      return {
        lastsForAnimation: s,
        willDeleteEls: d,
        renderFinally: m
      };
      function v(y, b, w, _, S) {
        _ ? (b = y, j(y, function(M, D) {
          !M.isRemoved() && A(D, D);
        })) : new Ja(b, y, C, C).add(A).update(A).remove(We(A, null)).execute();
        function C(M) {
          return M.getId();
        }
        function A(M, D) {
          var N = M != null ? y[M] : null, R = D != null ? b[D] : null, O = f(N, R, w, S);
          O && v(N && N.viewChildren || [], R && R.viewChildren || [], O, _, S + 1);
        }
      }
      function g(y) {
        var b = Qf();
        return y && j(y, function(w, _) {
          var S = b[_];
          j(w, function(C) {
            C && (S.push(C), Nm(C).willDelete = !0);
          });
        }), b;
      }
      function m() {
        j(d, function(y) {
          j(y, function(b) {
            b.parent && b.parent.remove(b);
          });
        }), j(c, function(y) {
          y.invisible = !0, y.dirty();
        });
      }
    }, t.prototype._doAnimation = function(r, n, i, a) {
      var o = i.get("animationDurationUpdate"), s = i.get("animationEasing"), l = (Ee(o) ? 0 : o) || 0, u = (Ee(s) ? null : s) || "cubicOut", c = Hde();
      j(n.willDeleteEls, function(f, d) {
        j(f, function(h, p) {
          if (!h.invisible) {
            var v = h.parent, g, m = Nm(v);
            if (a && a.direction === "drillDown")
              g = v === a.rootNodeGroup ? {
                shape: {
                  x: 0,
                  y: 0,
                  width: m.nodeWidth,
                  height: m.nodeHeight
                },
                style: {
                  opacity: 0
                }
              } : {
                style: {
                  opacity: 0
                }
              };
            else {
              var y = 0, b = 0;
              m.willDelete || (y = m.nodeWidth / 2, b = m.nodeHeight / 2), g = d === "nodeGroup" ? {
                x: y,
                y: b,
                style: {
                  opacity: 0
                }
              } : {
                shape: {
                  x: y,
                  y: b,
                  width: 0,
                  height: 0
                },
                style: {
                  opacity: 0
                }
              };
            }
            g && c.add(h, g, l, 0, u);
          }
        });
      }), j(this._storage, function(f, d) {
        j(f, function(h, p) {
          var v = n.lastsForAnimation[d][p], g = {};
          v && (h instanceof Fe ? v.oldX != null && (g.x = h.x, g.y = h.y, h.x = v.oldX, h.y = v.oldY) : (v.oldShape && (g.shape = ae({}, h.shape), h.setShape(v.oldShape)), v.fadein ? (h.setStyle("opacity", 0), g.style = {
            opacity: 1
          }) : h.style.opacity !== 1 && (g.style = {
            opacity: 1
          })), c.add(h, g, l, 0, u));
        });
      }, this), this._state = "animating", c.finished(xe(function() {
        this._state = "ready", n.renderFinally();
      }, this)).start();
    }, t.prototype._resetController = function(r) {
      var n = this._controller, i = this._controllerHost;
      i || (this._controllerHost = {
        target: this.group
      }, i = this._controllerHost), n || (n = this._controller = new vp(r.getZr()), n.enable(this.seriesModel.get("roam")), i.zoomLimit = this.seriesModel.get("scaleLimit"), i.zoom = this.seriesModel.get("zoom"), n.on("pan", xe(this._onPan, this)), n.on("zoom", xe(this._onZoom, this)));
      var a = new tt(0, 0, r.getWidth(), r.getHeight());
      n.setPointerChecker(function(o, s, l) {
        return a.contain(s, l);
      });
    }, t.prototype._clearController = function() {
      var r = this._controller;
      this._controllerHost = null, r && (r.dispose(), r = null);
    }, t.prototype._onPan = function(r) {
      if (this._state !== "animating" && (Math.abs(r.dx) > II || Math.abs(r.dy) > II)) {
        var n = this.seriesModel.getData().tree.root;
        if (!n)
          return;
        var i = n.getLayout();
        if (!i)
          return;
        this.api.dispatchAction({
          type: "treemapMove",
          from: this.uid,
          seriesId: this.seriesModel.id,
          rootRect: {
            x: i.x + r.dx,
            y: i.y + r.dy,
            width: i.width,
            height: i.height
          }
        });
      }
    }, t.prototype._onZoom = function(r) {
      var n = r.originX, i = r.originY, a = r.scale;
      if (this._state !== "animating") {
        var o = this.seriesModel.getData().tree.root;
        if (!o)
          return;
        var s = o.getLayout();
        if (!s)
          return;
        var l = new tt(s.x, s.y, s.width, s.height), u = null, c = this._controllerHost;
        u = c.zoomLimit;
        var f = c.zoom = c.zoom || 1;
        if (f *= a, u) {
          var d = u.min || 0, h = u.max || 1 / 0;
          f = Math.max(Math.min(h, f), d);
        }
        var p = f / c.zoom;
        c.zoom = f;
        var v = this.seriesModel.layoutInfo;
        n -= v.x, i -= v.y;
        var g = yn();
        Ni(g, g, [-n, -i]), Ny(g, g, [p, p]), Ni(g, g, [n, i]), l.applyTransform(g), this.api.dispatchAction({
          type: "treemapRender",
          from: this.uid,
          seriesId: this.seriesModel.id,
          rootRect: {
            x: l.x,
            y: l.y,
            width: l.width,
            height: l.height
          }
        });
      }
    }, t.prototype._initEvents = function(r) {
      var n = this;
      r.on("click", function(i) {
        if (n._state === "ready") {
          var a = n.seriesModel.get("nodeClick", !0);
          if (a) {
            var o = n.findTarget(i.offsetX, i.offsetY);
            if (o) {
              var s = o.node;
              if (s.getLayout().isLeafRoot)
                n._rootToNode(o);
              else if (a === "zoomToNode")
                n._zoomToNode(o);
              else if (a === "link") {
                var l = s.hostTree.data.getItemModel(s.dataIndex), u = l.get("link", !0), c = l.get("target", !0) || "blank";
                u && cm(u, c);
              }
            }
          }
        }
      }, this);
    }, t.prototype._renderBreadcrumb = function(r, n, i) {
      var a = this;
      i || (i = r.get("leafDepth", !0) != null ? {
        node: r.getViewRoot()
      } : this.findTarget(n.getWidth() / 2, n.getHeight() / 2), i || (i = {
        node: r.getData().tree.root
      })), (this._breadcrumb || (this._breadcrumb = new Vde(this.group))).render(r, n, i.node, function(o) {
        a._state !== "animating" && (wT(r.getViewRoot(), o) ? a._rootToNode({
          node: o
        }) : a._zoomToNode({
          node: o
        }));
      });
    }, t.prototype.remove = function() {
      this._clearController(), this._containerGroup && this._containerGroup.removeAll(), this._storage = Qf(), this._state = "ready", this._breadcrumb && this._breadcrumb.remove();
    }, t.prototype.dispose = function() {
      this._clearController();
    }, t.prototype._zoomToNode = function(r) {
      this.api.dispatchAction({
        type: "treemapZoomToNode",
        from: this.uid,
        seriesId: this.seriesModel.id,
        targetNode: r.node
      });
    }, t.prototype._rootToNode = function(r) {
      this.api.dispatchAction({
        type: "treemapRootToNode",
        from: this.uid,
        seriesId: this.seriesModel.id,
        targetNode: r.node
      });
    }, t.prototype.findTarget = function(r, n) {
      var i, a = this.seriesModel.getViewRoot();
      return a.eachNode({
        attr: "viewChildren",
        order: "preorder"
      }, function(o) {
        var s = this._storage.background[o.getRawIndex()];
        if (s) {
          var l = s.transformCoordToLocal(r, n), u = s.shape;
          if (u.x <= l[0] && l[0] <= u.x + u.width && u.y <= l[1] && l[1] <= u.y + u.height)
            i = {
              node: o,
              offsetX: l[0],
              offsetY: l[1]
            };
          else
            return !1;
        }
      }, this), i;
    }, t.type = "treemap", t;
  }(It)
);
function Qf() {
  return {
    nodeGroup: [],
    background: [],
    content: []
  };
}
function Zde(e, t, r, n, i, a, o, s, l, u) {
  if (!o)
    return;
  var c = o.getLayout(), f = e.getData(), d = o.getModel();
  if (f.setItemGraphicEl(o.dataIndex, null), !c || !c.isInView)
    return;
  var h = c.width, p = c.height, v = c.borderWidth, g = c.invisible, m = o.getRawIndex(), y = s && s.getRawIndex(), b = o.viewChildren, w = c.upperHeight, _ = b && b.length, S = d.getModel("itemStyle"), C = d.getModel(["emphasis", "itemStyle"]), A = d.getModel(["blur", "itemStyle"]), M = d.getModel(["select", "itemStyle"]), D = S.get("borderRadius") || 0, N = W("nodeGroup", Kw);
  if (!N)
    return;
  if (l.add(N), N.x = c.x || 0, N.y = c.y || 0, N.markRedraw(), Nm(N).nodeWidth = h, Nm(N).nodeHeight = p, c.isAboveViewRoot)
    return N;
  var R = W("background", NI, u, Wde);
  R && V(N, R, _ && c.upperLabelHeight);
  var O = d.getModel("emphasis"), E = O.get("focus"), L = O.get("blurScope"), I = O.get("disabled"), P = E === "ancestor" ? o.getAncestorsIndices() : E === "descendant" ? o.getDescendantIndices() : E;
  if (_)
    ss(N) && dl(N, !1), R && (dl(R, !I), f.setItemGraphicEl(o.dataIndex, R), hw(R, P, L));
  else {
    var k = W("content", NI, u, Ude);
    k && B(N, k), R.disableMorphing = !0, R && ss(R) && dl(R, !1), dl(N, !I), f.setItemGraphicEl(o.dataIndex, N);
    var z = d.getShallow("cursor");
    z && k.attr("cursor", z), hw(N, P, L);
  }
  return N;
  function V(J, U, $) {
    var Y = He(U);
    if (Y.dataIndex = o.dataIndex, Y.seriesIndex = e.seriesIndex, U.setShape({
      x: 0,
      y: 0,
      width: h,
      height: p,
      r: D
    }), g)
      F(U);
    else {
      U.invisible = !1;
      var Z = o.getVisual("style"), K = Z.stroke, ie = PI(S);
      ie.fill = K;
      var Q = Xs(C);
      Q.fill = C.get("borderColor");
      var ce = Xs(A);
      ce.fill = A.get("borderColor");
      var te = Xs(M);
      if (te.fill = M.get("borderColor"), $) {
        var oe = h - 2 * v;
        H(
          // PENDING: convert ZRColor to ColorString for text.
          U,
          K,
          Z.opacity,
          {
            x: v,
            y: 0,
            width: oe,
            height: w
          }
        );
      } else
        U.removeTextContent();
      U.setStyle(ie), U.ensureState("emphasis").style = Q, U.ensureState("blur").style = ce, U.ensureState("select").style = te, jl(U);
    }
    J.add(U);
  }
  function B(J, U) {
    var $ = He(U);
    $.dataIndex = o.dataIndex, $.seriesIndex = e.seriesIndex;
    var Y = Math.max(h - 2 * v, 0), Z = Math.max(p - 2 * v, 0);
    if (U.culling = !0, U.setShape({
      x: v,
      y: v,
      width: Y,
      height: Z,
      r: D
    }), g)
      F(U);
    else {
      U.invisible = !1;
      var K = o.getVisual("style"), ie = K.fill, Q = PI(S);
      Q.fill = ie, Q.decal = K.decal;
      var ce = Xs(C), te = Xs(A), oe = Xs(M);
      H(U, ie, K.opacity, null), U.setStyle(Q), U.ensureState("emphasis").style = ce, U.ensureState("blur").style = te, U.ensureState("select").style = oe, jl(U);
    }
    J.add(U);
  }
  function F(J) {
    !J.invisible && a.push(J);
  }
  function H(J, U, $, Y) {
    var Z = d.getModel(Y ? RI : LI), K = yr(d.get("name"), null), ie = Z.getShallow("show");
    Br(J, Cr(d, Y ? RI : LI), {
      defaultText: ie ? K : null,
      inheritColor: U,
      defaultOpacity: $,
      labelFetcher: e,
      labelDataIndex: o.dataIndex
    });
    var Q = J.getTextContent();
    if (Q) {
      var ce = Q.style, te = Ey(ce.padding || 0);
      Y && (J.setTextConfig({
        layoutRect: Y
      }), Q.disableLabelLayout = !0), Q.beforeUpdate = function() {
        var de = Math.max((Y ? Y.width : J.shape.width) - te[1] - te[3], 0), Pe = Math.max((Y ? Y.height : J.shape.height) - te[0] - te[2], 0);
        (ce.width !== de || ce.height !== Pe) && Q.setStyle({
          width: de,
          height: Pe
        });
      }, ce.truncateMinChar = 2, ce.lineOverflow = "truncate", G(ce, Y, c);
      var oe = Q.getState("emphasis");
      G(oe ? oe.style : null, Y, c);
    }
  }
  function G(J, U, $) {
    var Y = J ? J.text : null;
    if (!U && $.isLeafRoot && Y != null) {
      var Z = e.get("drillDownIcon", !0);
      J.text = Z ? Z + " " + Y : Y;
    }
  }
  function W(J, U, $, Y) {
    var Z = y != null && r[J][y], K = i[J];
    return Z ? (r[J][y] = null, X(K, Z)) : g || (Z = new U(), Z instanceof ri && (Z.z2 = Xde($, Y)), q(K, Z)), t[J][m] = Z;
  }
  function X(J, U) {
    var $ = J[m] = {};
    U instanceof Kw ? ($.oldX = U.x, $.oldY = U.y) : $.oldShape = ae({}, U.shape);
  }
  function q(J, U) {
    var $ = J[m] = {}, Y = o.parentNode, Z = U instanceof Fe;
    if (Y && (!n || n.direction === "drillDown")) {
      var K = 0, ie = 0, Q = i.background[Y.getRawIndex()];
      !n && Q && Q.oldShape && (K = Q.oldShape.width, ie = Q.oldShape.height), Z ? ($.oldX = 0, $.oldY = ie) : $.oldShape = {
        x: K,
        y: ie,
        width: 0,
        height: 0
      };
    }
    $.fadein = !Z;
  }
}
function Xde(e, t) {
  return e * Gde + t;
}
var Dh = j, Kde = Ne, Im = -1, Sr = (
  /** @class */
  function() {
    function e(t) {
      var r = t.mappingMethod, n = t.type, i = this.option = ze(t);
      this.type = n, this.mappingMethod = r, this._normalizeData = Qde[r];
      var a = e.visualHandlers[n];
      this.applyVisual = a.applyVisual, this.getColorMapper = a.getColorMapper, this._normalizedToVisual = a._normalizedToVisual[r], r === "piecewise" ? (Bx(i), qde(i)) : r === "category" ? i.categories ? Jde(i) : Bx(i, !0) : (Le(r !== "linear" || i.dataExtent), Bx(i));
    }
    return e.prototype.mapValueToVisual = function(t) {
      var r = this._normalizeData(t);
      return this._normalizedToVisual(r, t);
    }, e.prototype.getNormalizer = function() {
      return xe(this._normalizeData, this);
    }, e.listVisualTypes = function() {
      return ut(e.visualHandlers);
    }, e.isValidType = function(t) {
      return e.visualHandlers.hasOwnProperty(t);
    }, e.eachVisual = function(t, r, n) {
      Ne(t) ? j(t, r, n) : r.call(n, t);
    }, e.mapVisual = function(t, r, n) {
      var i, a = le(t) ? [] : Ne(t) ? {} : (i = !0, null);
      return e.eachVisual(t, function(o, s) {
        var l = r.call(n, o, s);
        i ? a = l : a[s] = l;
      }), a;
    }, e.retrieveVisuals = function(t) {
      var r = {}, n;
      return t && Dh(e.visualHandlers, function(i, a) {
        t.hasOwnProperty(a) && (r[a] = t[a], n = !0);
      }), n ? r : null;
    }, e.prepareVisualTypes = function(t) {
      if (le(t))
        t = t.slice();
      else if (Kde(t)) {
        var r = [];
        Dh(t, function(n, i) {
          r.push(i);
        }), t = r;
      } else
        return [];
      return t.sort(function(n, i) {
        return i === "color" && n !== "color" && n.indexOf("color") === 0 ? 1 : -1;
      }), t;
    }, e.dependsOn = function(t, r) {
      return r === "color" ? !!(t && t.indexOf(r) === 0) : t === r;
    }, e.findPieceIndex = function(t, r, n) {
      for (var i, a = 1 / 0, o = 0, s = r.length; o < s; o++) {
        var l = r[o].value;
        if (l != null) {
          if (l === t || ge(l) && l === t + "")
            return o;
          n && d(l, o);
        }
      }
      for (var o = 0, s = r.length; o < s; o++) {
        var u = r[o], c = u.interval, f = u.close;
        if (c) {
          if (c[0] === -1 / 0) {
            if (Ev(f[1], t, c[1]))
              return o;
          } else if (c[1] === 1 / 0) {
            if (Ev(f[0], c[0], t))
              return o;
          } else if (Ev(f[0], c[0], t) && Ev(f[1], t, c[1]))
            return o;
          n && d(c[0], o), n && d(c[1], o);
        }
      }
      if (n)
        return t === 1 / 0 ? r.length - 1 : t === -1 / 0 ? 0 : i;
      function d(h, p) {
        var v = Math.abs(h - t);
        v < a && (a = v, i = p);
      }
    }, e.visualHandlers = {
      color: {
        applyVisual: ed("color"),
        getColorMapper: function() {
          var t = this.option;
          return xe(t.mappingMethod === "category" ? function(r, n) {
            return !n && (r = this._normalizeData(r)), Cd.call(this, r);
          } : function(r, n, i) {
            var a = !!i;
            return !n && (r = this._normalizeData(r)), i = kd(r, t.parsedVisual, i), a ? i : Ti(i, "rgba");
          }, this);
        },
        _normalizedToVisual: {
          linear: function(t) {
            return Ti(kd(t, this.option.parsedVisual), "rgba");
          },
          category: Cd,
          piecewise: function(t, r) {
            var n = Jw.call(this, r);
            return n == null && (n = Ti(kd(t, this.option.parsedVisual), "rgba")), n;
          },
          fixed: Ks
        }
      },
      colorHue: Mv(function(t, r) {
        return hc(t, r);
      }),
      colorSaturation: Mv(function(t, r) {
        return hc(t, null, r);
      }),
      colorLightness: Mv(function(t, r) {
        return hc(t, null, null, r);
      }),
      colorAlpha: Mv(function(t, r) {
        return dh(t, r);
      }),
      decal: {
        applyVisual: ed("decal"),
        _normalizedToVisual: {
          linear: null,
          category: Cd,
          piecewise: null,
          fixed: null
        }
      },
      opacity: {
        applyVisual: ed("opacity"),
        _normalizedToVisual: qw([0, 1])
      },
      liftZ: {
        applyVisual: ed("liftZ"),
        _normalizedToVisual: {
          linear: Ks,
          category: Ks,
          piecewise: Ks,
          fixed: Ks
        }
      },
      symbol: {
        applyVisual: function(t, r, n) {
          var i = this.mapValueToVisual(t);
          n("symbol", i);
        },
        _normalizedToVisual: {
          linear: kI,
          category: Cd,
          piecewise: function(t, r) {
            var n = Jw.call(this, r);
            return n == null && (n = kI.call(this, t)), n;
          },
          fixed: Ks
        }
      },
      symbolSize: {
        applyVisual: ed("symbolSize"),
        _normalizedToVisual: qw([0, 1])
      }
    }, e;
  }()
);
function qde(e) {
  var t = e.pieceList;
  e.hasSpecialVisual = !1, j(t, function(r, n) {
    r.originIndex = n, r.visual != null && (e.hasSpecialVisual = !0);
  });
}
function Jde(e) {
  var t = e.categories, r = e.categoryMap = {}, n = e.visual;
  if (Dh(t, function(o, s) {
    r[o] = s;
  }), !le(n)) {
    var i = [];
    Ne(n) ? Dh(n, function(o, s) {
      var l = r[s];
      i[l ?? Im] = o;
    }) : i[Im] = n, n = bz(e, i);
  }
  for (var a = t.length - 1; a >= 0; a--)
    n[a] == null && (delete r[t[a]], t.pop());
}
function Bx(e, t) {
  var r = e.visual, n = [];
  Ne(r) ? Dh(r, function(a) {
    n.push(a);
  }) : r != null && n.push(r);
  var i = {
    color: 1,
    symbol: 1
  };
  !t && n.length === 1 && !i.hasOwnProperty(e.type) && (n[1] = n[0]), bz(e, n);
}
function Mv(e) {
  return {
    applyVisual: function(t, r, n) {
      var i = this.mapValueToVisual(t);
      n("color", e(r("color"), i));
    },
    _normalizedToVisual: qw([0, 1])
  };
}
function kI(e) {
  var t = this.option.visual;
  return t[Math.round(Mt(e, [0, 1], [0, t.length - 1], !0))] || {};
}
function ed(e) {
  return function(t, r, n) {
    n(e, this.mapValueToVisual(t));
  };
}
function Cd(e) {
  var t = this.option.visual;
  return t[this.option.loop && e !== Im ? e % t.length : e];
}
function Ks() {
  return this.option.visual[0];
}
function qw(e) {
  return {
    linear: function(t) {
      return Mt(t, e, this.option.visual, !0);
    },
    category: Cd,
    piecewise: function(t, r) {
      var n = Jw.call(this, r);
      return n == null && (n = Mt(t, e, this.option.visual, !0)), n;
    },
    fixed: Ks
  };
}
function Jw(e) {
  var t = this.option, r = t.pieceList;
  if (t.hasSpecialVisual) {
    var n = Sr.findPieceIndex(e, r), i = r[n];
    if (i && i.visual)
      return i.visual[this.type];
  }
}
function bz(e, t) {
  return e.visual = t, e.type === "color" && (e.parsedVisual = ue(t, function(r) {
    var n = on(r);
    return !n && process.env.NODE_ENV !== "production" && qt("'" + r + "' is an illegal color, fallback to '#000000'", !0), n || [0, 0, 0, 1];
  })), t;
}
var Qde = {
  linear: function(e) {
    return Mt(e, this.option.dataExtent, [0, 1], !0);
  },
  piecewise: function(e) {
    var t = this.option.pieceList, r = Sr.findPieceIndex(e, t, !0);
    if (r != null)
      return Mt(r, [0, t.length - 1], [0, 1], !0);
  },
  category: function(e) {
    var t = this.option.categories ? this.option.categoryMap[e] : e;
    return t ?? Im;
  },
  fixed: rr
};
function Ev(e, t, r) {
  return e ? t <= r : t < r;
}
var ehe = "itemStyle", wz = yt();
const the = {
  seriesType: "treemap",
  reset: function(e) {
    var t = e.getData().tree, r = t.root;
    r.isRemoved() || _z(
      r,
      // Visual should calculate from tree root but not view root.
      {},
      e.getViewRoot().getAncestors(),
      e
    );
  }
};
function _z(e, t, r, n) {
  var i = e.getModel(), a = e.getLayout(), o = e.hostTree.data;
  if (!(!a || a.invisible || !a.isInView)) {
    var s = i.getModel(ehe), l = rhe(s, t, n), u = o.ensureUniqueItemVisual(e.dataIndex, "style"), c = s.get("borderColor"), f = s.get("borderColorSaturation"), d;
    f != null && (d = OI(l), c = nhe(f, d)), u.stroke = c;
    var h = e.viewChildren;
    if (!h || !h.length)
      d = OI(l), u.fill = d;
    else {
      var p = ihe(e, i, a, s, l, h);
      j(h, function(v, g) {
        if (v.depth >= r.length || v === r[v.depth]) {
          var m = ahe(i, l, v, g, p, n);
          _z(v, m, r, n);
        }
      });
    }
  }
}
function rhe(e, t, r) {
  var n = ae({}, t), i = r.designatedVisualItemStyle;
  return j(["color", "colorAlpha", "colorSaturation"], function(a) {
    i[a] = t[a];
    var o = e.get(a);
    i[a] = null, o != null && (n[a] = o);
  }), n;
}
function OI(e) {
  var t = Fx(e, "color");
  if (t) {
    var r = Fx(e, "colorAlpha"), n = Fx(e, "colorSaturation");
    return n && (t = hc(t, null, null, n)), r && (t = dh(t, r)), t;
  }
}
function nhe(e, t) {
  return t != null ? hc(t, null, null, e) : null;
}
function Fx(e, t) {
  var r = e[t];
  if (r != null && r !== "none")
    return r;
}
function ihe(e, t, r, n, i, a) {
  if (!(!a || !a.length)) {
    var o = $x(t, "color") || i.color != null && i.color !== "none" && ($x(t, "colorAlpha") || $x(t, "colorSaturation"));
    if (o) {
      var s = t.get("visualMin"), l = t.get("visualMax"), u = r.dataExtent.slice();
      s != null && s < u[0] && (u[0] = s), l != null && l > u[1] && (u[1] = l);
      var c = t.get("colorMappingBy"), f = {
        type: o.name,
        dataExtent: u,
        visual: o.range
      };
      f.type === "color" && (c === "index" || c === "id") ? (f.mappingMethod = "category", f.loop = !0) : f.mappingMethod = "linear";
      var d = new Sr(f);
      return wz(d).drColorMappingBy = c, d;
    }
  }
}
function $x(e, t) {
  var r = e.get(t);
  return le(r) && r.length ? {
    name: t,
    range: r
  } : null;
}
function ahe(e, t, r, n, i, a) {
  var o = ae({}, t);
  if (i) {
    var s = i.type, l = s === "color" && wz(i).drColorMappingBy, u = l === "index" ? n : l === "id" ? a.mapIdToIndex(r.getId()) : r.getValue(e.get("visualDimension"));
    o[s] = i.mapValueToVisual(u);
  }
  return o;
}
var Nh = Math.max, Lm = Math.min, zI = ur, _T = j, Sz = ["itemStyle", "borderWidth"], ohe = ["itemStyle", "gapWidth"], she = ["upperLabel", "show"], lhe = ["upperLabel", "height"];
const uhe = {
  seriesType: "treemap",
  reset: function(e, t, r, n) {
    var i = r.getWidth(), a = r.getHeight(), o = e.option, s = vr(e.getBoxLayoutParams(), {
      width: r.getWidth(),
      height: r.getHeight()
    }), l = o.size || [], u = pe(zI(s.width, l[0]), i), c = pe(zI(s.height, l[1]), a), f = n && n.type, d = ["treemapZoomToNode", "treemapRootToNode"], h = Eh(n, d, e), p = f === "treemapRender" || f === "treemapMove" ? n.rootRect : null, v = e.getViewRoot(), g = mz(v);
    if (f !== "treemapMove") {
      var m = f === "treemapZoomToNode" ? vhe(e, h, v, u, c) : p ? [p.width, p.height] : [u, c], y = o.sort;
      y && y !== "asc" && y !== "desc" && (y = "desc");
      var b = {
        squareRatio: o.squareRatio,
        sort: y,
        leafDepth: o.leafDepth
      };
      v.hostTree.clearLayouts();
      var w = {
        x: 0,
        y: 0,
        width: m[0],
        height: m[1],
        area: m[0] * m[1]
      };
      v.setLayout(w), Cz(v, b, !1, 0), w = v.getLayout(), _T(g, function(S, C) {
        var A = (g[C + 1] || v).getValue();
        S.setLayout(ae({
          dataExtent: [A, A],
          borderWidth: 0,
          upperHeight: 0
        }, w));
      });
    }
    var _ = e.getData().tree.root;
    _.setLayout(ghe(s, p, h), !0), e.setLayoutInfo(s), Tz(
      _,
      // Transform to base element coordinate system.
      new tt(-s.x, -s.y, i, a),
      g,
      v,
      0
    );
  }
};
function Cz(e, t, r, n) {
  var i, a;
  if (!e.isRemoved()) {
    var o = e.getLayout();
    i = o.width, a = o.height;
    var s = e.getModel(), l = s.get(Sz), u = s.get(ohe) / 2, c = Az(s), f = Math.max(l, c), d = l - u, h = f - u;
    e.setLayout({
      borderWidth: l,
      upperHeight: f,
      upperLabelHeight: c
    }, !0), i = Nh(i - 2 * d, 0), a = Nh(a - d - h, 0);
    var p = i * a, v = che(e, s, p, t, r, n);
    if (v.length) {
      var g = {
        x: d,
        y: h,
        width: i,
        height: a
      }, m = Lm(i, a), y = 1 / 0, b = [];
      b.area = 0;
      for (var w = 0, _ = v.length; w < _; ) {
        var S = v[w];
        b.push(S), b.area += S.getLayout().area;
        var C = phe(b, m, t.squareRatio);
        C <= y ? (w++, y = C) : (b.area -= b.pop().getLayout().area, jI(b, m, g, u, !1), m = Lm(g.width, g.height), b.length = b.area = 0, y = 1 / 0);
      }
      if (b.length && jI(b, m, g, u, !0), !r) {
        var A = s.get("childrenVisibleMin");
        A != null && p < A && (r = !0);
      }
      for (var w = 0, _ = v.length; w < _; w++)
        Cz(v[w], t, r, n + 1);
    }
  }
}
function che(e, t, r, n, i, a) {
  var o = e.children || [], s = n.sort;
  s !== "asc" && s !== "desc" && (s = null);
  var l = n.leafDepth != null && n.leafDepth <= a;
  if (i && !l)
    return e.viewChildren = [];
  o = Ct(o, function(h) {
    return !h.isRemoved();
  }), dhe(o, s);
  var u = hhe(t, o, s);
  if (u.sum === 0)
    return e.viewChildren = [];
  if (u.sum = fhe(t, r, u.sum, s, o), u.sum === 0)
    return e.viewChildren = [];
  for (var c = 0, f = o.length; c < f; c++) {
    var d = o[c].getValue() / u.sum * r;
    o[c].setLayout({
      area: d
    });
  }
  return l && (o.length && e.setLayout({
    isLeafRoot: !0
  }, !0), o.length = 0), e.viewChildren = o, e.setLayout({
    dataExtent: u.dataExtent
  }, !0), o;
}
function fhe(e, t, r, n, i) {
  if (!n)
    return r;
  for (var a = e.get("visibleMin"), o = i.length, s = o, l = o - 1; l >= 0; l--) {
    var u = i[n === "asc" ? o - l - 1 : l].getValue();
    u / r * t < a && (s = l, r -= u);
  }
  return n === "asc" ? i.splice(0, o - s) : i.splice(s, o - s), r;
}
function dhe(e, t) {
  return t && e.sort(function(r, n) {
    var i = t === "asc" ? r.getValue() - n.getValue() : n.getValue() - r.getValue();
    return i === 0 ? t === "asc" ? r.dataIndex - n.dataIndex : n.dataIndex - r.dataIndex : i;
  }), e;
}
function hhe(e, t, r) {
  for (var n = 0, i = 0, a = t.length; i < a; i++)
    n += t[i].getValue();
  var o = e.get("visualDimension"), s;
  return !t || !t.length ? s = [NaN, NaN] : o === "value" && r ? (s = [t[t.length - 1].getValue(), t[0].getValue()], r === "asc" && s.reverse()) : (s = [1 / 0, -1 / 0], _T(t, function(l) {
    var u = l.getValue(o);
    u < s[0] && (s[0] = u), u > s[1] && (s[1] = u);
  })), {
    sum: n,
    dataExtent: s
  };
}
function phe(e, t, r) {
  for (var n = 0, i = 1 / 0, a = 0, o = void 0, s = e.length; a < s; a++)
    o = e[a].getLayout().area, o && (o < i && (i = o), o > n && (n = o));
  var l = e.area * e.area, u = t * t * r;
  return l ? Nh(u * n / l, l / (u * i)) : 1 / 0;
}
function jI(e, t, r, n, i) {
  var a = t === r.width ? 0 : 1, o = 1 - a, s = ["x", "y"], l = ["width", "height"], u = r[s[a]], c = t ? e.area / t : 0;
  (i || c > r[l[o]]) && (c = r[l[o]]);
  for (var f = 0, d = e.length; f < d; f++) {
    var h = e[f], p = {}, v = c ? h.getLayout().area / c : 0, g = p[l[o]] = Nh(c - 2 * n, 0), m = r[s[a]] + r[l[a]] - u, y = f === d - 1 || m < v ? m : v, b = p[l[a]] = Nh(y - 2 * n, 0);
    p[s[o]] = r[s[o]] + Lm(n, g / 2), p[s[a]] = u + Lm(n, b / 2), u += y, h.setLayout(p, !0);
  }
  r[s[o]] += c, r[l[o]] -= c;
}
function vhe(e, t, r, n, i) {
  var a = (t || {}).node, o = [n, i];
  if (!a || a === r)
    return o;
  for (var s, l = n * i, u = l * e.option.zoomToNodeRatio; s = a.parentNode; ) {
    for (var c = 0, f = s.children, d = 0, h = f.length; d < h; d++)
      c += f[d].getValue();
    var p = a.getValue();
    if (p === 0)
      return o;
    u *= c / p;
    var v = s.getModel(), g = v.get(Sz), m = Math.max(g, Az(v));
    u += 4 * g * g + (3 * g + m) * Math.pow(u, 0.5), u > iw && (u = iw), a = s;
  }
  u < l && (u = l);
  var y = Math.pow(u / l, 0.5);
  return [n * y, i * y];
}
function ghe(e, t, r) {
  if (t)
    return {
      x: t.x,
      y: t.y
    };
  var n = {
    x: 0,
    y: 0
  };
  if (!r)
    return n;
  var i = r.node, a = i.getLayout();
  if (!a)
    return n;
  for (var o = [a.width / 2, a.height / 2], s = i; s; ) {
    var l = s.getLayout();
    o[0] += l.x, o[1] += l.y, s = s.parentNode;
  }
  return {
    x: e.width / 2 - o[0],
    y: e.height / 2 - o[1]
  };
}
function Tz(e, t, r, n, i) {
  var a = e.getLayout(), o = r[i], s = o && o === e;
  if (!(o && !s || i === r.length && e !== n)) {
    e.setLayout({
      // isInView means: viewRoot sub tree + viewAbovePath
      isInView: !0,
      // invisible only means: outside view clip so that the node can not
      // see but still layout for animation preparation but not render.
      invisible: !s && !t.intersect(a),
      isAboveViewRoot: s
    }, !0);
    var l = new tt(t.x - a.x, t.y - a.y, t.width, t.height);
    _T(e.viewChildren || [], function(u) {
      Tz(u, l, r, n, i + 1);
    });
  }
}
function Az(e) {
  return e.get(she) ? e.get(lhe) : 0;
}
function mhe(e) {
  e.registerSeriesModel(Ode), e.registerChartView(Yde), e.registerVisual(the), e.registerLayout(uhe), kde(e);
}
function yhe(e) {
  var t = e.findComponents({
    mainType: "legend"
  });
  !t || !t.length || e.eachSeriesByType("graph", function(r) {
    var n = r.getCategoriesData(), i = r.getGraph(), a = i.data, o = n.mapArray(n.getName);
    a.filterSelf(function(s) {
      var l = a.getItemModel(s), u = l.getShallow("category");
      if (u != null) {
        bt(u) && (u = o[u]);
        for (var c = 0; c < t.length; c++)
          if (!t[c].isSelected(u))
            return !1;
      }
      return !0;
    });
  });
}
function xhe(e) {
  var t = {};
  e.eachSeriesByType("graph", function(r) {
    var n = r.getCategoriesData(), i = r.getData(), a = {};
    n.each(function(o) {
      var s = n.getName(o);
      a["ec-" + s] = o;
      var l = n.getItemModel(o), u = l.getModel("itemStyle").getItemStyle();
      u.fill || (u.fill = r.getColorFromPalette(s, t)), n.setItemVisual(o, "style", u);
      for (var c = ["symbol", "symbolSize", "symbolKeepAspect"], f = 0; f < c.length; f++) {
        var d = l.getShallow(c[f], !0);
        d != null && n.setItemVisual(o, c[f], d);
      }
    }), n.count() && i.each(function(o) {
      var s = i.getItemModel(o), l = s.getShallow("category");
      if (l != null) {
        ge(l) && (l = a["ec-" + l]);
        var u = n.getItemVisual(l, "style"), c = i.ensureUniqueItemVisual(o, "style");
        ae(c, u);
        for (var f = ["symbol", "symbolSize", "symbolKeepAspect"], d = 0; d < f.length; d++)
          i.setItemVisual(o, f[d], n.getItemVisual(l, f[d]));
      }
    });
  });
}
function Dv(e) {
  return e instanceof Array || (e = [e, e]), e;
}
function bhe(e) {
  e.eachSeriesByType("graph", function(t) {
    var r = t.getGraph(), n = t.getEdgeData(), i = Dv(t.get("edgeSymbol")), a = Dv(t.get("edgeSymbolSize"));
    n.setVisual("fromSymbol", i && i[0]), n.setVisual("toSymbol", i && i[1]), n.setVisual("fromSymbolSize", a && a[0]), n.setVisual("toSymbolSize", a && a[1]), n.setVisual("style", t.getModel("lineStyle").getLineStyle()), n.each(function(o) {
      var s = n.getItemModel(o), l = r.getEdgeByIndex(o), u = Dv(s.getShallow("symbol", !0)), c = Dv(s.getShallow("symbolSize", !0)), f = s.getModel("lineStyle").getLineStyle(), d = n.ensureUniqueItemVisual(o, "style");
      switch (ae(d, f), d.stroke) {
        case "source": {
          var h = l.node1.getVisual("style");
          d.stroke = h && h.fill;
          break;
        }
        case "target": {
          var h = l.node2.getVisual("style");
          d.stroke = h && h.fill;
          break;
        }
      }
      u[0] && l.setVisual("fromSymbol", u[0]), u[1] && l.setVisual("toSymbol", u[1]), c[0] && l.setVisual("fromSymbolSize", c[0]), c[1] && l.setVisual("toSymbolSize", c[1]);
    });
  });
}
var Qw = "-->", f0 = function(e) {
  return e.get("autoCurveness") || null;
}, Mz = function(e, t) {
  var r = f0(e), n = 20, i = [];
  if (bt(r))
    n = r;
  else if (le(r)) {
    e.__curvenessList = r;
    return;
  }
  t > n && (n = t);
  var a = n % 2 ? n + 2 : n + 3;
  i = [];
  for (var o = 0; o < a; o++)
    i.push((o % 2 ? o + 1 : o) / 10 * (o % 2 ? -1 : 1));
  e.__curvenessList = i;
}, Ih = function(e, t, r) {
  var n = [e.id, e.dataIndex].join("."), i = [t.id, t.dataIndex].join(".");
  return [r.uid, n, i].join(Qw);
}, Ez = function(e) {
  var t = e.split(Qw);
  return [t[0], t[2], t[1]].join(Qw);
}, whe = function(e, t) {
  var r = Ih(e.node1, e.node2, t);
  return t.__edgeMap[r];
}, _he = function(e, t) {
  var r = e_(Ih(e.node1, e.node2, t), t), n = e_(Ih(e.node2, e.node1, t), t);
  return r + n;
}, e_ = function(e, t) {
  var r = t.__edgeMap;
  return r[e] ? r[e].length : 0;
};
function She(e) {
  f0(e) && (e.__curvenessList = [], e.__edgeMap = {}, Mz(e));
}
function Che(e, t, r, n) {
  if (f0(r)) {
    var i = Ih(e, t, r), a = r.__edgeMap, o = a[Ez(i)];
    a[i] && !o ? a[i].isForward = !0 : o && a[i] && (o.isForward = !0, a[i].isForward = !1), a[i] = a[i] || [], a[i].push(n);
  }
}
function ST(e, t, r, n) {
  var i = f0(t), a = le(i);
  if (!i)
    return null;
  var o = whe(e, t);
  if (!o)
    return null;
  for (var s = -1, l = 0; l < o.length; l++)
    if (o[l] === r) {
      s = l;
      break;
    }
  var u = _he(e, t);
  Mz(t, u), e.lineStyle = e.lineStyle || {};
  var c = Ih(e.node1, e.node2, t), f = t.__curvenessList, d = a || u % 2 ? 0 : 1;
  if (o.isForward)
    return f[d + s];
  var h = Ez(c), p = e_(h, t), v = f[s + p + d];
  return n ? a ? i && i[0] === 0 ? (p + d) % 2 ? v : -v : ((p % 2 ? 0 : 1) + d) % 2 ? v : -v : (p + d) % 2 ? v : -v : f[s + p + d];
}
function Dz(e) {
  var t = e.coordinateSystem;
  if (!(t && t.type !== "view")) {
    var r = e.getGraph();
    r.eachNode(function(n) {
      var i = n.getModel();
      n.setLayout([+i.get("x"), +i.get("y")]);
    }), CT(r, e);
  }
}
function CT(e, t) {
  e.eachEdge(function(r, n) {
    var i = En(r.getModel().get(["lineStyle", "curveness"]), -ST(r, t, n, !0), 0), a = ra(r.node1.getLayout()), o = ra(r.node2.getLayout()), s = [a, o];
    +i && s.push([(a[0] + o[0]) / 2 - (a[1] - o[1]) * i, (a[1] + o[1]) / 2 - (o[0] - a[0]) * i]), r.setLayout(s);
  });
}
function The(e, t) {
  e.eachSeriesByType("graph", function(r) {
    var n = r.get("layout"), i = r.coordinateSystem;
    if (i && i.type !== "view") {
      var a = r.getData(), o = [];
      j(i.dimensions, function(d) {
        o = o.concat(a.mapDimensionsAll(d));
      });
      for (var s = 0; s < a.count(); s++) {
        for (var l = [], u = !1, c = 0; c < o.length; c++) {
          var f = a.get(o[c], s);
          isNaN(f) || (u = !0), l.push(f);
        }
        u ? a.setItemLayout(s, i.dataToPoint(l)) : a.setItemLayout(s, [NaN, NaN]);
      }
      CT(a.graph, r);
    } else (!n || n === "none") && Dz(r);
  });
}
function Td(e) {
  var t = e.coordinateSystem;
  if (t.type !== "view")
    return 1;
  var r = e.option.nodeScaleRatio, n = t.scaleX, i = t.getZoom(), a = (i - 1) * r + 1;
  return a / n;
}
function Ad(e) {
  var t = e.getVisual("symbolSize");
  return t instanceof Array && (t = (t[0] + t[1]) / 2), +t;
}
var VI = Math.PI, Hx = [];
function TT(e, t, r, n) {
  var i = e.coordinateSystem;
  if (!(i && i.type !== "view")) {
    var a = i.getBoundingRect(), o = e.getData(), s = o.graph, l = a.width / 2 + a.x, u = a.height / 2 + a.y, c = Math.min(a.width, a.height) / 2, f = o.count();
    if (o.setLayout({
      cx: l,
      cy: u
    }), !!f) {
      if (r) {
        var d = i.pointToData(n), h = d[0], p = d[1], v = [h - l, p - u];
        Wl(v, v), Ld(v, v, c), r.setLayout([l + v[0], u + v[1]], !0);
        var g = e.get(["circular", "rotateLabel"]);
        Nz(r, g, l, u);
      }
      Ahe[t](e, s, o, c, l, u, f), s.eachEdge(function(m, y) {
        var b = En(m.getModel().get(["lineStyle", "curveness"]), ST(m, e, y), 0), w = ra(m.node1.getLayout()), _ = ra(m.node2.getLayout()), S, C = (w[0] + _[0]) / 2, A = (w[1] + _[1]) / 2;
        +b && (b *= 3, S = [l * b + C * (1 - b), u * b + A * (1 - b)]), m.setLayout([w, _, S]);
      });
    }
  }
}
var Ahe = {
  value: function(e, t, r, n, i, a, o) {
    var s = 0, l = r.getSum("value"), u = Math.PI * 2 / (l || o);
    t.eachNode(function(c) {
      var f = c.getValue("value"), d = u * (l ? f : 1) / 2;
      s += d, c.setLayout([n * Math.cos(s) + i, n * Math.sin(s) + a]), s += d;
    });
  },
  symbolSize: function(e, t, r, n, i, a, o) {
    var s = 0;
    Hx.length = o;
    var l = Td(e);
    t.eachNode(function(f) {
      var d = Ad(f);
      isNaN(d) && (d = 2), d < 0 && (d = 0), d *= l;
      var h = Math.asin(d / 2 / n);
      isNaN(h) && (h = VI / 2), Hx[f.dataIndex] = h, s += h * 2;
    });
    var u = (2 * VI - s) / o / 2, c = 0;
    t.eachNode(function(f) {
      var d = u + Hx[f.dataIndex];
      c += d, (!f.getLayout() || !f.getLayout().fixed) && f.setLayout([n * Math.cos(c) + i, n * Math.sin(c) + a]), c += d;
    });
  }
};
function Nz(e, t, r, n) {
  var i = e.getGraphicEl();
  if (i) {
    var a = e.getModel(), o = a.get(["label", "rotate"]) || 0, s = i.getSymbolPath();
    if (t) {
      var l = e.getLayout(), u = Math.atan2(l[1] - n, l[0] - r);
      u < 0 && (u = Math.PI * 2 + u);
      var c = l[0] < r;
      c && (u = u - Math.PI);
      var f = c ? "left" : "right";
      s.setTextConfig({
        rotation: -u,
        position: f,
        origin: "center"
      });
      var d = s.ensureState("emphasis");
      ae(d.textConfig || (d.textConfig = {}), {
        position: f
      });
    } else
      s.setTextConfig({
        rotation: o *= Math.PI / 180
      });
  }
}
function Mhe(e) {
  e.eachSeriesByType("graph", function(t) {
    t.get("layout") === "circular" && TT(t, "symbolSize");
  });
}
var Nu = Ug;
function Ehe(e, t, r) {
  for (var n = e, i = t, a = r.rect, o = a.width, s = a.height, l = [a.x + o / 2, a.y + s / 2], u = r.gravity == null ? 0.1 : r.gravity, c = 0; c < n.length; c++) {
    var f = n[c];
    f.p || (f.p = ps(o * (Math.random() - 0.5) + l[0], s * (Math.random() - 0.5) + l[1])), f.pp = ra(f.p), f.edges = null;
  }
  var d = r.friction == null ? 0.6 : r.friction, h = d, p, v;
  return {
    warmUp: function() {
      h = d * 0.8;
    },
    setFixed: function(g) {
      n[g].fixed = !0;
    },
    setUnfixed: function(g) {
      n[g].fixed = !1;
    },
    /**
     * Before step hook
     */
    beforeStep: function(g) {
      p = g;
    },
    /**
     * After step hook
     */
    afterStep: function(g) {
      v = g;
    },
    /**
     * Some formulas were originally copied from "d3.js"
     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js
     * with some modifications made for this project.
     * See the license statement at the head of this file.
     */
    step: function(g) {
      p && p(n, i);
      for (var m = [], y = n.length, b = 0; b < i.length; b++) {
        var w = i[b];
        if (!w.ignoreForceLayout) {
          var _ = w.n1, S = w.n2;
          zo(m, S.p, _.p);
          var C = uh(m) - w.d, A = S.w / (_.w + S.w);
          isNaN(A) && (A = 0), Wl(m, m), !_.fixed && Nu(_.p, _.p, m, A * C * h), !S.fixed && Nu(S.p, S.p, m, -(1 - A) * C * h);
        }
      }
      for (var b = 0; b < y; b++) {
        var M = n[b];
        M.fixed || (zo(m, l, M.p), Nu(M.p, M.p, m, u * h));
      }
      for (var b = 0; b < y; b++)
        for (var _ = n[b], D = b + 1; D < y; D++) {
          var S = n[D];
          zo(m, S.p, _.p);
          var C = uh(m);
          C === 0 && (Bk(m, Math.random() - 0.5, Math.random() - 0.5), C = 1);
          var N = (_.rep + S.rep) / C / C;
          !_.fixed && Nu(_.pp, _.pp, m, N), !S.fixed && Nu(S.pp, S.pp, m, -N);
        }
      for (var R = [], b = 0; b < y; b++) {
        var M = n[b];
        M.fixed || (zo(R, M.p, M.pp), Nu(M.p, M.p, R, h), Ur(M.pp, M.p));
      }
      h = h * 0.992;
      var O = h < 0.01;
      v && v(n, i, O), g && g(O);
    }
  };
}
function Dhe(e) {
  e.eachSeriesByType("graph", function(t) {
    var r = t.coordinateSystem;
    if (!(r && r.type !== "view"))
      if (t.get("layout") === "force") {
        var n = t.preservedPoints || {}, i = t.getGraph(), a = i.data, o = i.edgeData, s = t.getModel("force"), l = s.get("initLayout");
        t.preservedPoints ? a.each(function(b) {
          var w = a.getId(b);
          a.setItemLayout(b, n[w] || [NaN, NaN]);
        }) : !l || l === "none" ? Dz(t) : l === "circular" && TT(t, "value");
        var u = a.getDataExtent("value"), c = o.getDataExtent("value"), f = s.get("repulsion"), d = s.get("edgeLength"), h = le(f) ? f : [f, f], p = le(d) ? d : [d, d];
        p = [p[1], p[0]];
        var v = a.mapArray("value", function(b, w) {
          var _ = a.getItemLayout(w), S = Mt(b, u, h);
          return isNaN(S) && (S = (h[0] + h[1]) / 2), {
            w: S,
            rep: S,
            fixed: a.getItemModel(w).get("fixed"),
            p: !_ || isNaN(_[0]) || isNaN(_[1]) ? null : _
          };
        }), g = o.mapArray("value", function(b, w) {
          var _ = i.getEdgeByIndex(w), S = Mt(b, c, p);
          isNaN(S) && (S = (p[0] + p[1]) / 2);
          var C = _.getModel(), A = En(_.getModel().get(["lineStyle", "curveness"]), -ST(_, t, w, !0), 0);
          return {
            n1: v[_.node1.dataIndex],
            n2: v[_.node2.dataIndex],
            d: S,
            curveness: A,
            ignoreForceLayout: C.get("ignoreForceLayout")
          };
        }), m = r.getBoundingRect(), y = Ehe(v, g, {
          rect: m,
          gravity: s.get("gravity"),
          friction: s.get("friction")
        });
        y.beforeStep(function(b, w) {
          for (var _ = 0, S = b.length; _ < S; _++)
            b[_].fixed && Ur(b[_].p, i.getNodeByIndex(_).getLayout());
        }), y.afterStep(function(b, w, _) {
          for (var S = 0, C = b.length; S < C; S++)
            b[S].fixed || i.getNodeByIndex(S).setLayout(b[S].p), n[a.getId(S)] = b[S].p;
          for (var S = 0, C = w.length; S < C; S++) {
            var A = w[S], M = i.getEdgeByIndex(S), D = A.n1.p, N = A.n2.p, R = M.getLayout();
            R = R ? R.slice() : [], R[0] = R[0] || [], R[1] = R[1] || [], Ur(R[0], D), Ur(R[1], N), +A.curveness && (R[2] = [(D[0] + N[0]) / 2 - (D[1] - N[1]) * A.curveness, (D[1] + N[1]) / 2 - (N[0] - D[0]) * A.curveness]), M.setLayout(R);
          }
        }), t.forceLayout = y, t.preservedPoints = n, y.step();
      } else
        t.forceLayout = null;
  });
}
function Nhe(e, t, r) {
  var n = ae(e.getBoxLayoutParams(), {
    aspect: r
  });
  return vr(n, {
    width: t.getWidth(),
    height: t.getHeight()
  });
}
function Ihe(e, t) {
  var r = [];
  return e.eachSeriesByType("graph", function(n) {
    var i = n.get("coordinateSystem");
    if (!i || i === "view") {
      var a = n.getData(), o = a.mapArray(function(g) {
        var m = a.getItemModel(g);
        return [+m.get("x"), +m.get("y")];
      }), s = [], l = [];
      Vy(o, s, l), l[0] - s[0] === 0 && (l[0] += 1, s[0] -= 1), l[1] - s[1] === 0 && (l[1] += 1, s[1] -= 1);
      var u = (l[0] - s[0]) / (l[1] - s[1]), c = Nhe(n, t, u);
      isNaN(u) && (s = [c.x, c.y], l = [c.x + c.width, c.y + c.height]);
      var f = l[0] - s[0], d = l[1] - s[1], h = c.width, p = c.height, v = n.coordinateSystem = new gp();
      v.zoomLimit = n.get("scaleLimit"), v.setBoundingRect(s[0], s[1], f, d), v.setViewRect(c.x, c.y, h, p), v.setCenter(n.get("center"), t), v.setZoom(n.get("zoom")), r.push(v);
    }
  }), r;
}
var BI = xr.prototype, Gx = sf.prototype, Iz = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.percent = 1;
    }
    return e;
  }()
);
(function(e) {
  ee(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t;
})(Iz);
function Wx(e) {
  return isNaN(+e.cpx1) || isNaN(+e.cpy1);
}
var Lhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "ec-line", n;
    }
    return t.prototype.getDefaultStyle = function() {
      return {
        stroke: "#000",
        fill: null
      };
    }, t.prototype.getDefaultShape = function() {
      return new Iz();
    }, t.prototype.buildPath = function(r, n) {
      Wx(n) ? BI.buildPath.call(this, r, n) : Gx.buildPath.call(this, r, n);
    }, t.prototype.pointAt = function(r) {
      return Wx(this.shape) ? BI.pointAt.call(this, r) : Gx.pointAt.call(this, r);
    }, t.prototype.tangentAt = function(r) {
      var n = this.shape, i = Wx(n) ? [n.x2 - n.x1, n.y2 - n.y1] : Gx.tangentAt.call(this, r);
      return Wl(i, i);
    }, t;
  }(lt)
), Ux = ["fromSymbol", "toSymbol"];
function FI(e) {
  return "_" + e + "Type";
}
function $I(e, t, r) {
  var n = t.getItemVisual(r, e);
  if (!n || n === "none")
    return n;
  var i = t.getItemVisual(r, e + "Size"), a = t.getItemVisual(r, e + "Rotate"), o = t.getItemVisual(r, e + "Offset"), s = t.getItemVisual(r, e + "KeepAspect"), l = mf(i), u = ql(o || 0, l);
  return n + l + u + (a || "") + (s || "");
}
function HI(e, t, r) {
  var n = t.getItemVisual(r, e);
  if (!(!n || n === "none")) {
    var i = t.getItemVisual(r, e + "Size"), a = t.getItemVisual(r, e + "Rotate"), o = t.getItemVisual(r, e + "Offset"), s = t.getItemVisual(r, e + "KeepAspect"), l = mf(i), u = ql(o || 0, l), c = fr(n, -l[0] / 2 + u[0], -l[1] / 2 + u[1], l[0], l[1], null, s);
    return c.__specifiedRotation = a == null || isNaN(a) ? void 0 : +a * Math.PI / 180 || 0, c.name = e, c;
  }
}
function Rhe(e) {
  var t = new Lhe({
    name: "line",
    subPixelOptimize: !0
  });
  return t_(t.shape, e), t;
}
function t_(e, t) {
  e.x1 = t[0][0], e.y1 = t[0][1], e.x2 = t[1][0], e.y2 = t[1][1], e.percent = 1;
  var r = t[2];
  r ? (e.cpx1 = r[0], e.cpy1 = r[1]) : (e.cpx1 = NaN, e.cpy1 = NaN);
}
var AT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this) || this;
      return a._createLine(r, n, i), a;
    }
    return t.prototype._createLine = function(r, n, i) {
      var a = r.hostModel, o = r.getItemLayout(n), s = Rhe(o);
      s.shape.percent = 0, Wt(s, {
        shape: {
          percent: 1
        }
      }, a, n), this.add(s), j(Ux, function(l) {
        var u = HI(l, r, n);
        this.add(u), this[FI(l)] = $I(l, r, n);
      }, this), this._updateCommonStl(r, n, i);
    }, t.prototype.updateData = function(r, n, i) {
      var a = r.hostModel, o = this.childOfName("line"), s = r.getItemLayout(n), l = {
        shape: {}
      };
      t_(l.shape, s), _t(o, l, a, n), j(Ux, function(u) {
        var c = $I(u, r, n), f = FI(u);
        if (this[f] !== c) {
          this.remove(this.childOfName(u));
          var d = HI(u, r, n);
          this.add(d);
        }
        this[f] = c;
      }, this), this._updateCommonStl(r, n, i);
    }, t.prototype.getLinePath = function() {
      return this.childAt(0);
    }, t.prototype._updateCommonStl = function(r, n, i) {
      var a = r.hostModel, o = this.childOfName("line"), s = i && i.emphasisLineStyle, l = i && i.blurLineStyle, u = i && i.selectLineStyle, c = i && i.labelStatesModels, f = i && i.emphasisDisabled, d = i && i.focus, h = i && i.blurScope;
      if (!i || r.hasItemOption) {
        var p = r.getItemModel(n), v = p.getModel("emphasis");
        s = v.getModel("lineStyle").getLineStyle(), l = p.getModel(["blur", "lineStyle"]).getLineStyle(), u = p.getModel(["select", "lineStyle"]).getLineStyle(), f = v.get("disabled"), d = v.get("focus"), h = v.get("blurScope"), c = Cr(p);
      }
      var g = r.getItemVisual(n, "style"), m = g.stroke;
      o.useStyle(g), o.style.fill = null, o.style.strokeNoScale = !0, o.ensureState("emphasis").style = s, o.ensureState("blur").style = l, o.ensureState("select").style = u, j(Ux, function(S) {
        var C = this.childOfName(S);
        if (C) {
          C.setColor(m), C.style.opacity = g.opacity;
          for (var A = 0; A < un.length; A++) {
            var M = un[A], D = o.getState(M);
            if (D) {
              var N = D.style || {}, R = C.ensureState(M), O = R.style || (R.style = {});
              N.stroke != null && (O[C.__isEmptyBrush ? "stroke" : "fill"] = N.stroke), N.opacity != null && (O.opacity = N.opacity);
            }
          }
          C.markRedraw();
        }
      }, this);
      var y = a.getRawValue(n);
      Br(this, c, {
        labelDataIndex: n,
        labelFetcher: {
          getFormattedLabel: function(S, C) {
            return a.getFormattedLabel(S, C, r.dataType);
          }
        },
        inheritColor: m || "#000",
        defaultOpacity: g.opacity,
        defaultText: (y == null ? r.getName(n) : isFinite(y) ? tr(y) : y) + ""
      });
      var b = this.getTextContent();
      if (b) {
        var w = c.normal;
        b.__align = b.style.align, b.__verticalAlign = b.style.verticalAlign, b.__position = w.get("position") || "middle";
        var _ = w.get("distance");
        le(_) || (_ = [_, _]), b.__labelDistance = _;
      }
      this.setTextConfig({
        position: null,
        local: !0,
        inside: !1
        // Can't be inside for stroke element.
      }), Jt(this, d, h, f);
    }, t.prototype.highlight = function() {
      Ka(this);
    }, t.prototype.downplay = function() {
      qa(this);
    }, t.prototype.updateLayout = function(r, n) {
      this.setLinePoints(r.getItemLayout(n));
    }, t.prototype.setLinePoints = function(r) {
      var n = this.childOfName("line");
      t_(n.shape, r), n.dirty();
    }, t.prototype.beforeUpdate = function() {
      var r = this, n = r.childOfName("fromSymbol"), i = r.childOfName("toSymbol"), a = r.getTextContent();
      if (!n && !i && (!a || a.ignore))
        return;
      for (var o = 1, s = this.parent; s; )
        s.scaleX && (o /= s.scaleX), s = s.parent;
      var l = r.childOfName("line");
      if (!this.__dirty && !l.__dirty)
        return;
      var u = l.shape.percent, c = l.pointAt(0), f = l.pointAt(u), d = zo([], f, c);
      Wl(d, d);
      function h(D, N) {
        var R = D.__specifiedRotation;
        if (R == null) {
          var O = l.tangentAt(N);
          D.attr("rotation", (N === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(O[1], O[0]));
        } else
          D.attr("rotation", R);
      }
      if (n && (n.setPosition(c), h(n, 0), n.scaleX = n.scaleY = o * u, n.markRedraw()), i && (i.setPosition(f), h(i, 1), i.scaleX = i.scaleY = o * u, i.markRedraw()), a && !a.ignore) {
        a.x = a.y = 0, a.originX = a.originY = 0;
        var p = void 0, v = void 0, g = a.__labelDistance, m = g[0] * o, y = g[1] * o, b = u / 2, w = l.tangentAt(b), _ = [w[1], -w[0]], S = l.pointAt(b);
        _[1] > 0 && (_[0] = -_[0], _[1] = -_[1]);
        var C = w[0] < 0 ? -1 : 1;
        if (a.__position !== "start" && a.__position !== "end") {
          var A = -Math.atan2(w[1], w[0]);
          f[0] < c[0] && (A = Math.PI + A), a.rotation = A;
        }
        var M = void 0;
        switch (a.__position) {
          case "insideStartTop":
          case "insideMiddleTop":
          case "insideEndTop":
          case "middle":
            M = -y, v = "bottom";
            break;
          case "insideStartBottom":
          case "insideMiddleBottom":
          case "insideEndBottom":
            M = y, v = "top";
            break;
          default:
            M = 0, v = "middle";
        }
        switch (a.__position) {
          case "end":
            a.x = d[0] * m + f[0], a.y = d[1] * y + f[1], p = d[0] > 0.8 ? "left" : d[0] < -0.8 ? "right" : "center", v = d[1] > 0.8 ? "top" : d[1] < -0.8 ? "bottom" : "middle";
            break;
          case "start":
            a.x = -d[0] * m + c[0], a.y = -d[1] * y + c[1], p = d[0] > 0.8 ? "right" : d[0] < -0.8 ? "left" : "center", v = d[1] > 0.8 ? "bottom" : d[1] < -0.8 ? "top" : "middle";
            break;
          case "insideStartTop":
          case "insideStart":
          case "insideStartBottom":
            a.x = m * C + c[0], a.y = c[1] + M, p = w[0] < 0 ? "right" : "left", a.originX = -m * C, a.originY = -M;
            break;
          case "insideMiddleTop":
          case "insideMiddle":
          case "insideMiddleBottom":
          case "middle":
            a.x = S[0], a.y = S[1] + M, p = "center", a.originY = -M;
            break;
          case "insideEndTop":
          case "insideEnd":
          case "insideEndBottom":
            a.x = -m * C + f[0], a.y = f[1] + M, p = w[0] >= 0 ? "right" : "left", a.originX = m * C, a.originY = -M;
            break;
        }
        a.scaleX = a.scaleY = o, a.setStyle({
          // Use the user specified text align and baseline first
          verticalAlign: a.__verticalAlign || v,
          align: a.__align || p
        });
      }
    }, t;
  }(Fe)
), MT = (
  /** @class */
  function() {
    function e(t) {
      this.group = new Fe(), this._LineCtor = t || AT;
    }
    return e.prototype.updateData = function(t) {
      var r = this;
      this._progressiveEls = null;
      var n = this, i = n.group, a = n._lineData;
      n._lineData = t, a || i.removeAll();
      var o = GI(t);
      t.diff(a).add(function(s) {
        r._doAdd(t, s, o);
      }).update(function(s, l) {
        r._doUpdate(a, t, l, s, o);
      }).remove(function(s) {
        i.remove(a.getItemGraphicEl(s));
      }).execute();
    }, e.prototype.updateLayout = function() {
      var t = this._lineData;
      t && t.eachItemGraphicEl(function(r, n) {
        r.updateLayout(t, n);
      }, this);
    }, e.prototype.incrementalPrepareUpdate = function(t) {
      this._seriesScope = GI(t), this._lineData = null, this.group.removeAll();
    }, e.prototype.incrementalUpdate = function(t, r) {
      this._progressiveEls = [];
      function n(s) {
        !s.isGroup && !Phe(s) && (s.incremental = !0, s.ensureState("emphasis").hoverLayer = !0);
      }
      for (var i = t.start; i < t.end; i++) {
        var a = r.getItemLayout(i);
        if (Yx(a)) {
          var o = new this._LineCtor(r, i, this._seriesScope);
          o.traverse(n), this.group.add(o), r.setItemGraphicEl(i, o), this._progressiveEls.push(o);
        }
      }
    }, e.prototype.remove = function() {
      this.group.removeAll();
    }, e.prototype.eachRendered = function(t) {
      gs(this._progressiveEls || this.group, t);
    }, e.prototype._doAdd = function(t, r, n) {
      var i = t.getItemLayout(r);
      if (Yx(i)) {
        var a = new this._LineCtor(t, r, n);
        t.setItemGraphicEl(r, a), this.group.add(a);
      }
    }, e.prototype._doUpdate = function(t, r, n, i, a) {
      var o = t.getItemGraphicEl(n);
      if (!Yx(r.getItemLayout(i))) {
        this.group.remove(o);
        return;
      }
      o ? o.updateData(r, i, a) : o = new this._LineCtor(r, i, a), r.setItemGraphicEl(i, o), this.group.add(o);
    }, e;
  }()
);
function Phe(e) {
  return e.animators && e.animators.length > 0;
}
function GI(e) {
  var t = e.hostModel, r = t.getModel("emphasis");
  return {
    lineStyle: t.getModel("lineStyle").getLineStyle(),
    emphasisLineStyle: r.getModel(["lineStyle"]).getLineStyle(),
    blurLineStyle: t.getModel(["blur", "lineStyle"]).getLineStyle(),
    selectLineStyle: t.getModel(["select", "lineStyle"]).getLineStyle(),
    emphasisDisabled: r.get("disabled"),
    blurScope: r.get("blurScope"),
    focus: r.get("focus"),
    labelStatesModels: Cr(t)
  };
}
function WI(e) {
  return isNaN(e[0]) || isNaN(e[1]);
}
function Yx(e) {
  return e && !WI(e[0]) && !WI(e[1]);
}
var Zx = [], Xx = [], Kx = [], Iu = Dr, qx = Yo, UI = Math.abs;
function YI(e, t, r) {
  for (var n = e[0], i = e[1], a = e[2], o = 1 / 0, s, l = r * r, u = 0.1, c = 0.1; c <= 0.9; c += 0.1) {
    Zx[0] = Iu(n[0], i[0], a[0], c), Zx[1] = Iu(n[1], i[1], a[1], c);
    var f = UI(qx(Zx, t) - l);
    f < o && (o = f, s = c);
  }
  for (var d = 0; d < 32; d++) {
    var h = s + u;
    Xx[0] = Iu(n[0], i[0], a[0], s), Xx[1] = Iu(n[1], i[1], a[1], s), Kx[0] = Iu(n[0], i[0], a[0], h), Kx[1] = Iu(n[1], i[1], a[1], h);
    var f = qx(Xx, t) - l;
    if (UI(f) < 0.01)
      break;
    var p = qx(Kx, t) - l;
    u /= 2, f < 0 ? p >= 0 ? s = s + u : s = s - u : p >= 0 ? s = s - u : s = s + u;
  }
  return s;
}
function Jx(e, t) {
  var r = [], n = ch, i = [[], [], []], a = [[], []], o = [];
  t /= 2, e.eachEdge(function(s, l) {
    var u = s.getLayout(), c = s.getVisual("fromSymbol"), f = s.getVisual("toSymbol");
    u.__original || (u.__original = [ra(u[0]), ra(u[1])], u[2] && u.__original.push(ra(u[2])));
    var d = u.__original;
    if (u[2] != null) {
      if (Ur(i[0], d[0]), Ur(i[1], d[2]), Ur(i[2], d[1]), c && c !== "none") {
        var h = Ad(s.node1), p = YI(i, d[0], h * t);
        n(i[0][0], i[1][0], i[2][0], p, r), i[0][0] = r[3], i[1][0] = r[4], n(i[0][1], i[1][1], i[2][1], p, r), i[0][1] = r[3], i[1][1] = r[4];
      }
      if (f && f !== "none") {
        var h = Ad(s.node2), p = YI(i, d[1], h * t);
        n(i[0][0], i[1][0], i[2][0], p, r), i[1][0] = r[1], i[2][0] = r[2], n(i[0][1], i[1][1], i[2][1], p, r), i[1][1] = r[1], i[2][1] = r[2];
      }
      Ur(u[0], i[0]), Ur(u[1], i[2]), Ur(u[2], i[1]);
    } else {
      if (Ur(a[0], d[0]), Ur(a[1], d[1]), zo(o, a[1], a[0]), Wl(o, o), c && c !== "none") {
        var h = Ad(s.node1);
        Ug(a[0], a[0], o, h * t);
      }
      if (f && f !== "none") {
        var h = Ad(s.node2);
        Ug(a[1], a[1], o, -h * t);
      }
      Ur(u[0], a[0]), Ur(u[1], a[1]);
    }
  });
}
function ZI(e) {
  return e.type === "view";
}
var khe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n) {
      var i = new cp(), a = new MT(), o = this.group;
      this._controller = new vp(n.getZr()), this._controllerHost = {
        target: o
      }, o.add(i.group), o.add(a.group), this._symbolDraw = i, this._lineDraw = a, this._firstRender = !0;
    }, t.prototype.render = function(r, n, i) {
      var a = this, o = r.coordinateSystem;
      this._model = r;
      var s = this._symbolDraw, l = this._lineDraw, u = this.group;
      if (ZI(o)) {
        var c = {
          x: o.x,
          y: o.y,
          scaleX: o.scaleX,
          scaleY: o.scaleY
        };
        this._firstRender ? u.attr(c) : _t(u, c, r);
      }
      Jx(r.getGraph(), Td(r));
      var f = r.getData();
      s.updateData(f);
      var d = r.getEdgeData();
      l.updateData(d), this._updateNodeAndLinkScale(), this._updateController(r, n, i), clearTimeout(this._layoutTimeout);
      var h = r.forceLayout, p = r.get(["force", "layoutAnimation"]);
      h && this._startForceLayoutIteration(h, p);
      var v = r.get("layout");
      f.graph.eachNode(function(b) {
        var w = b.dataIndex, _ = b.getGraphicEl(), S = b.getModel();
        if (_) {
          _.off("drag").off("dragend");
          var C = S.get("draggable");
          C && _.on("drag", function(M) {
            switch (v) {
              case "force":
                h.warmUp(), !a._layouting && a._startForceLayoutIteration(h, p), h.setFixed(w), f.setItemLayout(w, [_.x, _.y]);
                break;
              case "circular":
                f.setItemLayout(w, [_.x, _.y]), b.setLayout({
                  fixed: !0
                }, !0), TT(r, "symbolSize", b, [M.offsetX, M.offsetY]), a.updateLayout(r);
                break;
              case "none":
              default:
                f.setItemLayout(w, [_.x, _.y]), CT(r.getGraph(), r), a.updateLayout(r);
                break;
            }
          }).on("dragend", function() {
            h && h.setUnfixed(w);
          }), _.setDraggable(C, !!S.get("cursor"));
          var A = S.get(["emphasis", "focus"]);
          A === "adjacency" && (He(_).focus = b.getAdjacentDataIndices());
        }
      }), f.graph.eachEdge(function(b) {
        var w = b.getGraphicEl(), _ = b.getModel().get(["emphasis", "focus"]);
        w && _ === "adjacency" && (He(w).focus = {
          edge: [b.dataIndex],
          node: [b.node1.dataIndex, b.node2.dataIndex]
        });
      });
      var g = r.get("layout") === "circular" && r.get(["circular", "rotateLabel"]), m = f.getLayout("cx"), y = f.getLayout("cy");
      f.graph.eachNode(function(b) {
        Nz(b, g, m, y);
      }), this._firstRender = !1;
    }, t.prototype.dispose = function() {
      this.remove(), this._controller && this._controller.dispose(), this._controllerHost = null;
    }, t.prototype._startForceLayoutIteration = function(r, n) {
      var i = this;
      (function a() {
        r.step(function(o) {
          i.updateLayout(i._model), (i._layouting = !o) && (n ? i._layoutTimeout = setTimeout(a, 16) : a());
        });
      })();
    }, t.prototype._updateController = function(r, n, i) {
      var a = this, o = this._controller, s = this._controllerHost, l = this.group;
      if (o.setPointerChecker(function(u, c, f) {
        var d = l.getBoundingRect();
        return d.applyTransform(l.transform), d.contain(c, f) && !l0(u, i, r);
      }), !ZI(r.coordinateSystem)) {
        o.disable();
        return;
      }
      o.enable(r.get("roam")), s.zoomLimit = r.get("scaleLimit"), s.zoom = r.coordinateSystem.getZoom(), o.off("pan").off("zoom").on("pan", function(u) {
        vT(s, u.dx, u.dy), i.dispatchAction({
          seriesId: r.id,
          type: "graphRoam",
          dx: u.dx,
          dy: u.dy
        });
      }).on("zoom", function(u) {
        gT(s, u.scale, u.originX, u.originY), i.dispatchAction({
          seriesId: r.id,
          type: "graphRoam",
          zoom: u.scale,
          originX: u.originX,
          originY: u.originY
        }), a._updateNodeAndLinkScale(), Jx(r.getGraph(), Td(r)), a._lineDraw.updateLayout(), i.updateLabelLayout();
      });
    }, t.prototype._updateNodeAndLinkScale = function() {
      var r = this._model, n = r.getData(), i = Td(r);
      n.eachItemGraphicEl(function(a, o) {
        a && a.setSymbolScale(i);
      });
    }, t.prototype.updateLayout = function(r) {
      Jx(r.getGraph(), Td(r)), this._symbolDraw.updateLayout(), this._lineDraw.updateLayout();
    }, t.prototype.remove = function() {
      clearTimeout(this._layoutTimeout), this._layouting = !1, this._layoutTimeout = null, this._symbolDraw && this._symbolDraw.remove(), this._lineDraw && this._lineDraw.remove();
    }, t.type = "graph", t;
  }(It)
);
function Lu(e) {
  return "_EC_" + e;
}
var Ohe = (
  /** @class */
  function() {
    function e(t) {
      this.type = "graph", this.nodes = [], this.edges = [], this._nodesMap = {}, this._edgesMap = {}, this._directed = t || !1;
    }
    return e.prototype.isDirected = function() {
      return this._directed;
    }, e.prototype.addNode = function(t, r) {
      t = t == null ? "" + r : "" + t;
      var n = this._nodesMap;
      if (n[Lu(t)]) {
        process.env.NODE_ENV !== "production" && console.error("Graph nodes have duplicate name or id");
        return;
      }
      var i = new qs(t, r);
      return i.hostGraph = this, this.nodes.push(i), n[Lu(t)] = i, i;
    }, e.prototype.getNodeByIndex = function(t) {
      var r = this.data.getRawIndex(t);
      return this.nodes[r];
    }, e.prototype.getNodeById = function(t) {
      return this._nodesMap[Lu(t)];
    }, e.prototype.addEdge = function(t, r, n) {
      var i = this._nodesMap, a = this._edgesMap;
      if (bt(t) && (t = this.nodes[t]), bt(r) && (r = this.nodes[r]), t instanceof qs || (t = i[Lu(t)]), r instanceof qs || (r = i[Lu(r)]), !(!t || !r)) {
        var o = t.id + "-" + r.id, s = new Lz(t, r, n);
        return s.hostGraph = this, this._directed && (t.outEdges.push(s), r.inEdges.push(s)), t.edges.push(s), t !== r && r.edges.push(s), this.edges.push(s), a[o] = s, s;
      }
    }, e.prototype.getEdgeByIndex = function(t) {
      var r = this.edgeData.getRawIndex(t);
      return this.edges[r];
    }, e.prototype.getEdge = function(t, r) {
      t instanceof qs && (t = t.id), r instanceof qs && (r = r.id);
      var n = this._edgesMap;
      return this._directed ? n[t + "-" + r] : n[t + "-" + r] || n[r + "-" + t];
    }, e.prototype.eachNode = function(t, r) {
      for (var n = this.nodes, i = n.length, a = 0; a < i; a++)
        n[a].dataIndex >= 0 && t.call(r, n[a], a);
    }, e.prototype.eachEdge = function(t, r) {
      for (var n = this.edges, i = n.length, a = 0; a < i; a++)
        n[a].dataIndex >= 0 && n[a].node1.dataIndex >= 0 && n[a].node2.dataIndex >= 0 && t.call(r, n[a], a);
    }, e.prototype.breadthFirstTraverse = function(t, r, n, i) {
      if (r instanceof qs || (r = this._nodesMap[Lu(r)]), !!r) {
        for (var a = n === "out" ? "outEdges" : n === "in" ? "inEdges" : "edges", o = 0; o < this.nodes.length; o++)
          this.nodes[o].__visited = !1;
        if (!t.call(i, r, null))
          for (var s = [r]; s.length; )
            for (var l = s.shift(), u = l[a], o = 0; o < u.length; o++) {
              var c = u[o], f = c.node1 === l ? c.node2 : c.node1;
              if (!f.__visited) {
                if (t.call(i, f, l))
                  return;
                s.push(f), f.__visited = !0;
              }
            }
      }
    }, e.prototype.update = function() {
      for (var t = this.data, r = this.edgeData, n = this.nodes, i = this.edges, a = 0, o = n.length; a < o; a++)
        n[a].dataIndex = -1;
      for (var a = 0, o = t.count(); a < o; a++)
        n[t.getRawIndex(a)].dataIndex = a;
      r.filterSelf(function(s) {
        var l = i[r.getRawIndex(s)];
        return l.node1.dataIndex >= 0 && l.node2.dataIndex >= 0;
      });
      for (var a = 0, o = i.length; a < o; a++)
        i[a].dataIndex = -1;
      for (var a = 0, o = r.count(); a < o; a++)
        i[r.getRawIndex(a)].dataIndex = a;
    }, e.prototype.clone = function() {
      for (var t = new e(this._directed), r = this.nodes, n = this.edges, i = 0; i < r.length; i++)
        t.addNode(r[i].id, r[i].dataIndex);
      for (var i = 0; i < n.length; i++) {
        var a = n[i];
        t.addEdge(a.node1.id, a.node2.id, a.dataIndex);
      }
      return t;
    }, e;
  }()
), qs = (
  /** @class */
  function() {
    function e(t, r) {
      this.inEdges = [], this.outEdges = [], this.edges = [], this.dataIndex = -1, this.id = t ?? "", this.dataIndex = r ?? -1;
    }
    return e.prototype.degree = function() {
      return this.edges.length;
    }, e.prototype.inDegree = function() {
      return this.inEdges.length;
    }, e.prototype.outDegree = function() {
      return this.outEdges.length;
    }, e.prototype.getModel = function(t) {
      if (!(this.dataIndex < 0)) {
        var r = this.hostGraph, n = r.data.getItemModel(this.dataIndex);
        return n.getModel(t);
      }
    }, e.prototype.getAdjacentDataIndices = function() {
      for (var t = {
        edge: [],
        node: []
      }, r = 0; r < this.edges.length; r++) {
        var n = this.edges[r];
        n.dataIndex < 0 || (t.edge.push(n.dataIndex), t.node.push(n.node1.dataIndex, n.node2.dataIndex));
      }
      return t;
    }, e.prototype.getTrajectoryDataIndices = function() {
      for (var t = Ce(), r = Ce(), n = 0; n < this.edges.length; n++) {
        var i = this.edges[n];
        if (!(i.dataIndex < 0)) {
          t.set(i.dataIndex, !0);
          for (var a = [i.node1], o = [i.node2], s = 0; s < a.length; ) {
            var l = a[s];
            s++, r.set(l.dataIndex, !0);
            for (var u = 0; u < l.inEdges.length; u++)
              t.set(l.inEdges[u].dataIndex, !0), a.push(l.inEdges[u].node1);
          }
          for (s = 0; s < o.length; ) {
            var c = o[s];
            s++, r.set(c.dataIndex, !0);
            for (var u = 0; u < c.outEdges.length; u++)
              t.set(c.outEdges[u].dataIndex, !0), o.push(c.outEdges[u].node2);
          }
        }
      }
      return {
        edge: t.keys(),
        node: r.keys()
      };
    }, e;
  }()
), Lz = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.dataIndex = -1, this.node1 = t, this.node2 = r, this.dataIndex = n ?? -1;
    }
    return e.prototype.getModel = function(t) {
      if (!(this.dataIndex < 0)) {
        var r = this.hostGraph, n = r.edgeData.getItemModel(this.dataIndex);
        return n.getModel(t);
      }
    }, e.prototype.getAdjacentDataIndices = function() {
      return {
        edge: [this.dataIndex],
        node: [this.node1.dataIndex, this.node2.dataIndex]
      };
    }, e.prototype.getTrajectoryDataIndices = function() {
      var t = Ce(), r = Ce();
      t.set(this.dataIndex, !0);
      for (var n = [this.node1], i = [this.node2], a = 0; a < n.length; ) {
        var o = n[a];
        a++, r.set(o.dataIndex, !0);
        for (var s = 0; s < o.inEdges.length; s++)
          t.set(o.inEdges[s].dataIndex, !0), n.push(o.inEdges[s].node1);
      }
      for (a = 0; a < i.length; ) {
        var l = i[a];
        a++, r.set(l.dataIndex, !0);
        for (var s = 0; s < l.outEdges.length; s++)
          t.set(l.outEdges[s].dataIndex, !0), i.push(l.outEdges[s].node2);
      }
      return {
        edge: t.keys(),
        node: r.keys()
      };
    }, e;
  }()
);
function Rz(e, t) {
  return {
    /**
     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.
     */
    getValue: function(r) {
      var n = this[e][t];
      return n.getStore().get(n.getDimensionIndex(r || "value"), this.dataIndex);
    },
    // TODO: TYPE stricter type.
    setVisual: function(r, n) {
      this.dataIndex >= 0 && this[e][t].setItemVisual(this.dataIndex, r, n);
    },
    getVisual: function(r) {
      return this[e][t].getItemVisual(this.dataIndex, r);
    },
    setLayout: function(r, n) {
      this.dataIndex >= 0 && this[e][t].setItemLayout(this.dataIndex, r, n);
    },
    getLayout: function() {
      return this[e][t].getItemLayout(this.dataIndex);
    },
    getGraphicEl: function() {
      return this[e][t].getItemGraphicEl(this.dataIndex);
    },
    getRawIndex: function() {
      return this[e][t].getRawIndex(this.dataIndex);
    }
  };
}
ir(qs, Rz("hostGraph", "data"));
ir(Lz, Rz("hostGraph", "edgeData"));
function Pz(e, t, r, n, i) {
  for (var a = new Ohe(n), o = 0; o < e.length; o++)
    a.addNode(ur(
      // Id, name, dataIndex
      e[o].id,
      e[o].name,
      o
    ), o);
  for (var s = [], l = [], u = 0, o = 0; o < t.length; o++) {
    var c = t[o], f = c.source, d = c.target;
    a.addEdge(f, d, u) && (l.push(c), s.push(ur(yr(c.id, null), f + " > " + d)), u++);
  }
  var h = r.get("coordinateSystem"), p;
  if (h === "cartesian2d" || h === "polar")
    p = pa(e, r);
  else {
    var v = Kl.get(h), g = v ? v.dimensions || [] : [];
    rt(g, "value") < 0 && g.concat(["value"]);
    var m = yf(e, {
      coordDimensions: g,
      encodeDefine: r.getEncode()
    }).dimensions;
    p = new Xr(m, r), p.initData(e);
  }
  var y = new Xr(["value"], r);
  return y.initData(l, s), i && i(p, y), vz({
    mainData: p,
    struct: a,
    structAttr: "graph",
    datas: {
      node: p,
      edge: y
    },
    datasAttr: {
      node: "data",
      edge: "edgeData"
    }
  }), a.update(), a;
}
var zhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r;
    }
    return t.prototype.init = function(r) {
      e.prototype.init.apply(this, arguments);
      var n = this;
      function i() {
        return n._categoriesData;
      }
      this.legendVisualProvider = new pp(i, i), this.fillDataTextStyle(r.edges || r.links), this._updateCategoriesData();
    }, t.prototype.mergeOption = function(r) {
      e.prototype.mergeOption.apply(this, arguments), this.fillDataTextStyle(r.edges || r.links), this._updateCategoriesData();
    }, t.prototype.mergeDefaultAndTheme = function(r) {
      e.prototype.mergeDefaultAndTheme.apply(this, arguments), kl(r, "edgeLabel", ["show"]);
    }, t.prototype.getInitialData = function(r, n) {
      var i = r.edges || r.links || [], a = r.data || r.nodes || [], o = this;
      if (a && i) {
        She(this);
        var s = Pz(a, i, this, !0, l);
        return j(s.edges, function(u) {
          Che(u.node1, u.node2, this, u.dataIndex);
        }, this), s.data;
      }
      function l(u, c) {
        u.wrapMethod("getItemModel", function(p) {
          var v = o._categoriesModels, g = p.getShallow("category"), m = v[g];
          return m && (m.parentModel = p.parentModel, p.parentModel = m), p;
        });
        var f = Tt.prototype.getModel;
        function d(p, v) {
          var g = f.call(this, p, v);
          return g.resolveParentPath = h, g;
        }
        c.wrapMethod("getItemModel", function(p) {
          return p.resolveParentPath = h, p.getModel = d, p;
        });
        function h(p) {
          if (p && (p[0] === "label" || p[1] === "label")) {
            var v = p.slice();
            return p[0] === "label" ? v[0] = "edgeLabel" : p[1] === "label" && (v[1] = "edgeLabel"), v;
          }
          return p;
        }
      }
    }, t.prototype.getGraph = function() {
      return this.getData().graph;
    }, t.prototype.getEdgeData = function() {
      return this.getGraph().edgeData;
    }, t.prototype.getCategoriesData = function() {
      return this._categoriesData;
    }, t.prototype.formatTooltip = function(r, n, i) {
      if (i === "edge") {
        var a = this.getData(), o = this.getDataParams(r, i), s = a.graph.getEdgeByIndex(r), l = a.getName(s.node1.dataIndex), u = a.getName(s.node2.dataIndex), c = [];
        return l != null && c.push(l), u != null && c.push(u), Tr("nameValue", {
          name: c.join(" > "),
          value: o.value,
          noValue: o.value == null
        });
      }
      var f = r8({
        series: this,
        dataIndex: r,
        multipleSeries: n
      });
      return f;
    }, t.prototype._updateCategoriesData = function() {
      var r = ue(this.option.categories || [], function(i) {
        return i.value != null ? i : ae({
          value: 0
        }, i);
      }), n = new Xr(["value"], this);
      n.initData(r), this._categoriesData = n, this._categoriesModels = n.mapArray(function(i) {
        return n.getItemModel(i);
      });
    }, t.prototype.setZoom = function(r) {
      this.option.zoom = r;
    }, t.prototype.setCenter = function(r) {
      this.option.center = r;
    }, t.prototype.isAnimationEnabled = function() {
      return e.prototype.isAnimationEnabled.call(this) && !(this.get("layout") === "force" && this.get(["force", "layoutAnimation"]));
    }, t.type = "series.graph", t.dependencies = ["grid", "polar", "geo", "singleAxis", "calendar"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "view",
      // Default option for all coordinate systems
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      // polarIndex: 0,
      // geoIndex: 0,
      legendHoverLink: !0,
      layout: null,
      // Configuration of circular layout
      circular: {
        rotateLabel: !1
      },
      // Configuration of force directed layout
      force: {
        initLayout: null,
        // Node repulsion. Can be an array to represent range.
        repulsion: [0, 50],
        gravity: 0.1,
        // Initial friction
        friction: 0.6,
        // Edge length. Can be an array to represent range.
        edgeLength: 30,
        layoutAnimation: !0
      },
      left: "center",
      top: "center",
      // right: null,
      // bottom: null,
      // width: '80%',
      // height: '80%',
      symbol: "circle",
      symbolSize: 10,
      edgeSymbol: ["none", "none"],
      edgeSymbolSize: 10,
      edgeLabel: {
        position: "middle",
        distance: 5
      },
      draggable: !1,
      roam: !1,
      // Default on center of graph
      center: null,
      zoom: 1,
      // Symbol size scale ratio in roam
      nodeScaleRatio: 0.6,
      // cursor: null,
      // categories: [],
      // data: []
      // Or
      // nodes: []
      //
      // links: []
      // Or
      // edges: []
      label: {
        show: !1,
        formatter: "{b}"
      },
      itemStyle: {},
      lineStyle: {
        color: "#aaa",
        width: 1,
        opacity: 0.5
      },
      emphasis: {
        scale: !0,
        label: {
          show: !0
        }
      },
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      }
    }, t;
  }(zt)
), jhe = {
  type: "graphRoam",
  event: "graphRoam",
  update: "none"
};
function Vhe(e) {
  e.registerChartView(khe), e.registerSeriesModel(zhe), e.registerProcessor(yhe), e.registerVisual(xhe), e.registerVisual(bhe), e.registerLayout(The), e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT, Mhe), e.registerLayout(Dhe), e.registerCoordinateSystem("graphView", {
    dimensions: gp.dimensions,
    create: Ihe
  }), e.registerAction({
    type: "focusNodeAdjacency",
    event: "focusNodeAdjacency",
    update: "series:focusNodeAdjacency"
  }, rr), e.registerAction({
    type: "unfocusNodeAdjacency",
    event: "unfocusNodeAdjacency",
    update: "series:unfocusNodeAdjacency"
  }, rr), e.registerAction(jhe, function(t, r, n) {
    r.eachComponent({
      mainType: "series",
      query: t
    }, function(i) {
      var a = i.coordinateSystem, o = yT(a, t, void 0, n);
      i.setCenter && i.setCenter(o.center), i.setZoom && i.setZoom(o.zoom);
    });
  });
}
var Bhe = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.angle = 0, this.width = 10, this.r = 10, this.x = 0, this.y = 0;
    }
    return e;
  }()
), Fhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "pointer", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new Bhe();
    }, t.prototype.buildPath = function(r, n) {
      var i = Math.cos, a = Math.sin, o = n.r, s = n.width, l = n.angle, u = n.x - i(l) * s * (s >= o / 3 ? 1 : 2), c = n.y - a(l) * s * (s >= o / 3 ? 1 : 2);
      l = n.angle - Math.PI / 2, r.moveTo(u, c), r.lineTo(n.x + i(l) * s, n.y + a(l) * s), r.lineTo(n.x + i(n.angle) * o, n.y + a(n.angle) * o), r.lineTo(n.x - i(l) * s, n.y - a(l) * s), r.lineTo(u, c);
    }, t;
  }(lt)
);
function $he(e, t) {
  var r = e.get("center"), n = t.getWidth(), i = t.getHeight(), a = Math.min(n, i), o = pe(r[0], t.getWidth()), s = pe(r[1], t.getHeight()), l = pe(e.get("radius"), a / 2);
  return {
    cx: o,
    cy: s,
    r: l
  };
}
function Nv(e, t) {
  var r = e == null ? "" : e + "";
  return t && (ge(t) ? r = t.replace("{value}", r) : Ee(t) && (r = t(e))), r;
}
var Hhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      this.group.removeAll();
      var a = r.get(["axisLine", "lineStyle", "color"]), o = $he(r, i);
      this._renderMain(r, n, i, a, o), this._data = r.getData();
    }, t.prototype.dispose = function() {
    }, t.prototype._renderMain = function(r, n, i, a, o) {
      var s = this.group, l = r.get("clockwise"), u = -r.get("startAngle") / 180 * Math.PI, c = -r.get("endAngle") / 180 * Math.PI, f = r.getModel("axisLine"), d = f.get("roundCap"), h = d ? Mm : qr, p = f.get("show"), v = f.getModel("lineStyle"), g = v.get("width"), m = [u, c];
      uC(m, !l), u = m[0], c = m[1];
      for (var y = c - u, b = u, w = [], _ = 0; p && _ < a.length; _++) {
        var S = Math.min(Math.max(a[_][0], 0), 1);
        c = u + y * S;
        var C = new h({
          shape: {
            startAngle: b,
            endAngle: c,
            cx: o.cx,
            cy: o.cy,
            clockwise: l,
            r0: o.r - g,
            r: o.r
          },
          silent: !0
        });
        C.setStyle({
          fill: a[_][1]
        }), C.setStyle(v.getLineStyle(
          // Because we use sector to simulate arc
          // so the properties for stroking are useless
          ["color", "width"]
        )), w.push(C), b = c;
      }
      w.reverse(), j(w, function(M) {
        return s.add(M);
      });
      var A = function(M) {
        if (M <= 0)
          return a[0][1];
        var D;
        for (D = 0; D < a.length; D++)
          if (a[D][0] >= M && (D === 0 ? 0 : a[D - 1][0]) < M)
            return a[D][1];
        return a[D - 1][1];
      };
      this._renderTicks(r, n, i, A, o, u, c, l, g), this._renderTitleAndDetail(r, n, i, A, o), this._renderAnchor(r, o), this._renderPointer(r, n, i, A, o, u, c, l, g);
    }, t.prototype._renderTicks = function(r, n, i, a, o, s, l, u, c) {
      for (var f = this.group, d = o.cx, h = o.cy, p = o.r, v = +r.get("min"), g = +r.get("max"), m = r.getModel("splitLine"), y = r.getModel("axisTick"), b = r.getModel("axisLabel"), w = r.get("splitNumber"), _ = y.get("splitNumber"), S = pe(m.get("length"), p), C = pe(y.get("length"), p), A = s, M = (l - s) / w, D = M / _, N = m.getModel("lineStyle").getLineStyle(), R = y.getModel("lineStyle").getLineStyle(), O = m.get("distance"), E, L, I = 0; I <= w; I++) {
        if (E = Math.cos(A), L = Math.sin(A), m.get("show")) {
          var P = O ? O + c : c, k = new xr({
            shape: {
              x1: E * (p - P) + d,
              y1: L * (p - P) + h,
              x2: E * (p - S - P) + d,
              y2: L * (p - S - P) + h
            },
            style: N,
            silent: !0
          });
          N.stroke === "auto" && k.setStyle({
            stroke: a(I / w)
          }), f.add(k);
        }
        if (b.get("show")) {
          var P = b.get("distance") + O, z = Nv(tr(I / w * (g - v) + v), b.get("formatter")), V = a(I / w), B = E * (p - S - P) + d, F = L * (p - S - P) + h, H = b.get("rotate"), G = 0;
          H === "radial" ? (G = -A + 2 * Math.PI, G > Math.PI / 2 && (G += Math.PI)) : H === "tangential" ? G = -A - Math.PI / 2 : bt(H) && (G = H * Math.PI / 180), G === 0 ? f.add(new pt({
            style: Vt(b, {
              text: z,
              x: B,
              y: F,
              verticalAlign: L < -0.8 ? "top" : L > 0.8 ? "bottom" : "middle",
              align: E < -0.4 ? "left" : E > 0.4 ? "right" : "center"
            }, {
              inheritColor: V
            }),
            silent: !0
          })) : f.add(new pt({
            style: Vt(b, {
              text: z,
              x: B,
              y: F,
              verticalAlign: "middle",
              align: "center"
            }, {
              inheritColor: V
            }),
            silent: !0,
            originX: B,
            originY: F,
            rotation: G
          }));
        }
        if (y.get("show") && I !== w) {
          var P = y.get("distance");
          P = P ? P + c : c;
          for (var W = 0; W <= _; W++) {
            E = Math.cos(A), L = Math.sin(A);
            var X = new xr({
              shape: {
                x1: E * (p - P) + d,
                y1: L * (p - P) + h,
                x2: E * (p - C - P) + d,
                y2: L * (p - C - P) + h
              },
              silent: !0,
              style: R
            });
            R.stroke === "auto" && X.setStyle({
              stroke: a((I + W / _) / w)
            }), f.add(X), A += D;
          }
          A -= D;
        } else
          A += M;
      }
    }, t.prototype._renderPointer = function(r, n, i, a, o, s, l, u, c) {
      var f = this.group, d = this._data, h = this._progressEls, p = [], v = r.get(["pointer", "show"]), g = r.getModel("progress"), m = g.get("show"), y = r.getData(), b = y.mapDimension("value"), w = +r.get("min"), _ = +r.get("max"), S = [w, _], C = [s, l];
      function A(D, N) {
        var R = y.getItemModel(D), O = R.getModel("pointer"), E = pe(O.get("width"), o.r), L = pe(O.get("length"), o.r), I = r.get(["pointer", "icon"]), P = O.get("offsetCenter"), k = pe(P[0], o.r), z = pe(P[1], o.r), V = O.get("keepAspect"), B;
        return I ? B = fr(I, k - E / 2, z - L, E, L, null, V) : B = new Fhe({
          shape: {
            angle: -Math.PI / 2,
            width: E,
            r: L,
            x: k,
            y: z
          }
        }), B.rotation = -(N + Math.PI / 2), B.x = o.cx, B.y = o.cy, B;
      }
      function M(D, N) {
        var R = g.get("roundCap"), O = R ? Mm : qr, E = g.get("overlap"), L = E ? g.get("width") : c / y.count(), I = E ? o.r - L : o.r - (D + 1) * L, P = E ? o.r : o.r - D * L, k = new O({
          shape: {
            startAngle: s,
            endAngle: N,
            cx: o.cx,
            cy: o.cy,
            clockwise: u,
            r0: I,
            r: P
          }
        });
        return E && (k.z2 = Mt(y.get(b, D), [w, _], [100, 0], !0)), k;
      }
      (m || v) && (y.diff(d).add(function(D) {
        var N = y.get(b, D);
        if (v) {
          var R = A(D, s);
          Wt(R, {
            rotation: -((isNaN(+N) ? C[0] : Mt(N, S, C, !0)) + Math.PI / 2)
          }, r), f.add(R), y.setItemGraphicEl(D, R);
        }
        if (m) {
          var O = M(D, s), E = g.get("clip");
          Wt(O, {
            shape: {
              endAngle: Mt(N, S, C, E)
            }
          }, r), f.add(O), cw(r.seriesIndex, y.dataType, D, O), p[D] = O;
        }
      }).update(function(D, N) {
        var R = y.get(b, D);
        if (v) {
          var O = d.getItemGraphicEl(N), E = O ? O.rotation : s, L = A(D, E);
          L.rotation = E, _t(L, {
            rotation: -((isNaN(+R) ? C[0] : Mt(R, S, C, !0)) + Math.PI / 2)
          }, r), f.add(L), y.setItemGraphicEl(D, L);
        }
        if (m) {
          var I = h[N], P = I ? I.shape.endAngle : s, k = M(D, P), z = g.get("clip");
          _t(k, {
            shape: {
              endAngle: Mt(R, S, C, z)
            }
          }, r), f.add(k), cw(r.seriesIndex, y.dataType, D, k), p[D] = k;
        }
      }).execute(), y.each(function(D) {
        var N = y.getItemModel(D), R = N.getModel("emphasis"), O = R.get("focus"), E = R.get("blurScope"), L = R.get("disabled");
        if (v) {
          var I = y.getItemGraphicEl(D), P = y.getItemVisual(D, "style"), k = P.fill;
          if (I instanceof Ar) {
            var z = I.style;
            I.useStyle(ae({
              image: z.image,
              x: z.x,
              y: z.y,
              width: z.width,
              height: z.height
            }, P));
          } else
            I.useStyle(P), I.type !== "pointer" && I.setColor(k);
          I.setStyle(N.getModel(["pointer", "itemStyle"]).getItemStyle()), I.style.fill === "auto" && I.setStyle("fill", a(Mt(y.get(b, D), S, [0, 1], !0))), I.z2EmphasisLift = 0, Vr(I, N), Jt(I, O, E, L);
        }
        if (m) {
          var V = p[D];
          V.useStyle(y.getItemVisual(D, "style")), V.setStyle(N.getModel(["progress", "itemStyle"]).getItemStyle()), V.z2EmphasisLift = 0, Vr(V, N), Jt(V, O, E, L);
        }
      }), this._progressEls = p);
    }, t.prototype._renderAnchor = function(r, n) {
      var i = r.getModel("anchor"), a = i.get("show");
      if (a) {
        var o = i.get("size"), s = i.get("icon"), l = i.get("offsetCenter"), u = i.get("keepAspect"), c = fr(s, n.cx - o / 2 + pe(l[0], n.r), n.cy - o / 2 + pe(l[1], n.r), o, o, null, u);
        c.z2 = i.get("showAbove") ? 1 : 0, c.setStyle(i.getModel("itemStyle").getItemStyle()), this.group.add(c);
      }
    }, t.prototype._renderTitleAndDetail = function(r, n, i, a, o) {
      var s = this, l = r.getData(), u = l.mapDimension("value"), c = +r.get("min"), f = +r.get("max"), d = new Fe(), h = [], p = [], v = r.isAnimationEnabled(), g = r.get(["pointer", "showAbove"]);
      l.diff(this._data).add(function(m) {
        h[m] = new pt({
          silent: !0
        }), p[m] = new pt({
          silent: !0
        });
      }).update(function(m, y) {
        h[m] = s._titleEls[y], p[m] = s._detailEls[y];
      }).execute(), l.each(function(m) {
        var y = l.getItemModel(m), b = l.get(u, m), w = new Fe(), _ = a(Mt(b, [c, f], [0, 1], !0)), S = y.getModel("title");
        if (S.get("show")) {
          var C = S.get("offsetCenter"), A = o.cx + pe(C[0], o.r), M = o.cy + pe(C[1], o.r), D = h[m];
          D.attr({
            z2: g ? 0 : 2,
            style: Vt(S, {
              x: A,
              y: M,
              text: l.getName(m),
              align: "center",
              verticalAlign: "middle"
            }, {
              inheritColor: _
            })
          }), w.add(D);
        }
        var N = y.getModel("detail");
        if (N.get("show")) {
          var R = N.get("offsetCenter"), O = o.cx + pe(R[0], o.r), E = o.cy + pe(R[1], o.r), L = pe(N.get("width"), o.r), I = pe(N.get("height"), o.r), P = r.get(["progress", "show"]) ? l.getItemVisual(m, "style").fill : _, D = p[m], k = N.get("formatter");
          D.attr({
            z2: g ? 0 : 2,
            style: Vt(N, {
              x: O,
              y: E,
              text: Nv(b, k),
              width: isNaN(L) ? null : L,
              height: isNaN(I) ? null : I,
              align: "center",
              verticalAlign: "middle"
            }, {
              inheritColor: P
            })
          }), c6(D, {
            normal: N
          }, b, function(V) {
            return Nv(V, k);
          }), v && f6(D, m, l, r, {
            getFormattedLabel: function(V, B, F, H, G, W) {
              return Nv(W ? W.interpolatedValue : b, k);
            }
          }), w.add(D);
        }
        d.add(w);
      }), this.group.add(d), this._titleEls = h, this._detailEls = p;
    }, t.type = "gauge", t;
  }(It)
), Ghe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.visualStyleAccessPath = "itemStyle", r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return wf(this, ["value"]);
    }, t.type = "series.gauge", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      colorBy: "data",
      // 默认全局居中
      center: ["50%", "50%"],
      legendHoverLink: !0,
      radius: "75%",
      startAngle: 225,
      endAngle: -45,
      clockwise: !0,
      // 最小值
      min: 0,
      // 最大值
      max: 100,
      // 分割段数，默认为10
      splitNumber: 10,
      // 坐标轴线
      axisLine: {
        // 默认显示，属性show控制显示与否
        show: !0,
        roundCap: !1,
        lineStyle: {
          color: [[1, "#E6EBF8"]],
          width: 10
        }
      },
      // 坐标轴线
      progress: {
        // 默认显示，属性show控制显示与否
        show: !1,
        overlap: !0,
        width: 10,
        roundCap: !1,
        clip: !0
      },
      // 分隔线
      splitLine: {
        // 默认显示，属性show控制显示与否
        show: !0,
        // 属性length控制线长
        length: 10,
        distance: 10,
        // 属性lineStyle（详见lineStyle）控制线条样式
        lineStyle: {
          color: "#63677A",
          width: 3,
          type: "solid"
        }
      },
      // 坐标轴小标记
      axisTick: {
        // 属性show控制显示与否，默认不显示
        show: !0,
        // 每份split细分多少段
        splitNumber: 5,
        // 属性length控制线长
        length: 6,
        distance: 10,
        // 属性lineStyle控制线条样式
        lineStyle: {
          color: "#63677A",
          width: 1,
          type: "solid"
        }
      },
      axisLabel: {
        show: !0,
        distance: 15,
        // formatter: null,
        color: "#464646",
        fontSize: 12,
        rotate: 0
      },
      pointer: {
        icon: null,
        offsetCenter: [0, 0],
        show: !0,
        showAbove: !0,
        length: "60%",
        width: 6,
        keepAspect: !1
      },
      anchor: {
        show: !1,
        showAbove: !1,
        size: 6,
        icon: "circle",
        offsetCenter: [0, 0],
        keepAspect: !1,
        itemStyle: {
          color: "#fff",
          borderWidth: 0,
          borderColor: "#5470c6"
        }
      },
      title: {
        show: !0,
        // x, y，单位px
        offsetCenter: [0, "20%"],
        // 其余属性默认使用全局文本样式，详见TEXTSTYLE
        color: "#464646",
        fontSize: 16,
        valueAnimation: !1
      },
      detail: {
        show: !0,
        backgroundColor: "rgba(0,0,0,0)",
        borderWidth: 0,
        borderColor: "#ccc",
        width: 100,
        height: null,
        padding: [5, 10],
        // x, y，单位px
        offsetCenter: [0, "40%"],
        // formatter: null,
        // 其余属性默认使用全局文本样式，详见TEXTSTYLE
        color: "#464646",
        fontSize: 30,
        fontWeight: "bold",
        lineHeight: 30,
        valueAnimation: !1
      }
    }, t;
  }(zt)
);
function Whe(e) {
  e.registerChartView(Hhe), e.registerSeriesModel(Ghe);
}
var Uhe = ["itemStyle", "opacity"], Yhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n) {
      var i = e.call(this) || this, a = i, o = new en(), s = new pt();
      return a.setTextContent(s), i.setTextGuideLine(o), i.updateData(r, n, !0), i;
    }
    return t.prototype.updateData = function(r, n, i) {
      var a = this, o = r.hostModel, s = r.getItemModel(n), l = r.getItemLayout(n), u = s.getModel("emphasis"), c = s.get(Uhe);
      c = c ?? 1, i || Li(a), a.useStyle(r.getItemVisual(n, "style")), a.style.lineJoin = "round", i ? (a.setShape({
        points: l.points
      }), a.style.opacity = 0, Wt(a, {
        style: {
          opacity: c
        }
      }, o, n)) : _t(a, {
        style: {
          opacity: c
        },
        shape: {
          points: l.points
        }
      }, o, n), Vr(a, s), this._updateLabel(r, n), Jt(this, u.get("focus"), u.get("blurScope"), u.get("disabled"));
    }, t.prototype._updateLabel = function(r, n) {
      var i = this, a = this.getTextGuideLine(), o = i.getTextContent(), s = r.hostModel, l = r.getItemModel(n), u = r.getItemLayout(n), c = u.label, f = r.getItemVisual(n, "style"), d = f.fill;
      Br(
        // position will not be used in setLabelStyle
        o,
        Cr(l),
        {
          labelFetcher: r.hostModel,
          labelDataIndex: n,
          defaultOpacity: f.opacity,
          defaultText: r.getName(n)
        },
        {
          normal: {
            align: c.textAlign,
            verticalAlign: c.verticalAlign
          }
        }
      ), i.setTextConfig({
        local: !0,
        inside: !!c.inside,
        insideStroke: d,
        // insideFill: 'auto',
        outsideFill: d
      });
      var h = c.linePoints;
      a.setShape({
        points: h
      }), i.textGuideLineConfig = {
        anchor: h ? new et(h[0][0], h[0][1]) : null
      }, _t(o, {
        style: {
          x: c.x,
          y: c.y
        }
      }, s, n), o.attr({
        rotation: c.rotation,
        originX: c.x,
        originY: c.y,
        z2: 10
      }), iT(i, aT(l), {
        // Default use item visual color
        stroke: d
      });
    }, t;
  }(Jr)
), Zhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.ignoreLabelLineUpdate = !0, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this._data, s = this.group;
      a.diff(o).add(function(l) {
        var u = new Yhe(a, l);
        a.setItemGraphicEl(l, u), s.add(u);
      }).update(function(l, u) {
        var c = o.getItemGraphicEl(u);
        c.updateData(a, l), s.add(c), a.setItemGraphicEl(l, c);
      }).remove(function(l) {
        var u = o.getItemGraphicEl(l);
        gh(u, r, l);
      }).execute(), this._data = a;
    }, t.prototype.remove = function() {
      this.group.removeAll(), this._data = null;
    }, t.prototype.dispose = function() {
    }, t.type = "funnel", t;
  }(It)
), Xhe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r) {
      e.prototype.init.apply(this, arguments), this.legendVisualProvider = new pp(xe(this.getData, this), xe(this.getRawData, this)), this._defaultLabelLine(r);
    }, t.prototype.getInitialData = function(r, n) {
      return wf(this, {
        coordDimensions: ["value"],
        encodeDefaulter: We(LC, this)
      });
    }, t.prototype._defaultLabelLine = function(r) {
      kl(r, "labelLine", ["show"]);
      var n = r.labelLine, i = r.emphasis.labelLine;
      n.show = n.show && r.label.show, i.show = i.show && r.emphasis.label.show;
    }, t.prototype.getDataParams = function(r) {
      var n = this.getData(), i = e.prototype.getDataParams.call(this, r), a = n.mapDimension("value"), o = n.getSum(a);
      return i.percent = o ? +(n.get(a, r) / o * 100).toFixed(2) : 0, i.$vars.push("percent"), i;
    }, t.type = "series.funnel", t.defaultOption = {
      // zlevel: 0,                  // 一级层叠
      z: 2,
      legendHoverLink: !0,
      colorBy: "data",
      left: 80,
      top: 60,
      right: 80,
      bottom: 60,
      // width: {totalWidth} - left - right,
      // height: {totalHeight} - top - bottom,
      // 默认取数据最小最大值
      // min: 0,
      // max: 100,
      minSize: "0%",
      maxSize: "100%",
      sort: "descending",
      orient: "vertical",
      gap: 0,
      funnelAlign: "center",
      label: {
        show: !0,
        position: "outer"
        // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调
      },
      labelLine: {
        show: !0,
        length: 20,
        lineStyle: {
          // color: 各异,
          width: 1
        }
      },
      itemStyle: {
        // color: 各异,
        borderColor: "#fff",
        borderWidth: 1
      },
      emphasis: {
        label: {
          show: !0
        }
      },
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      }
    }, t;
  }(zt)
);
function Khe(e, t) {
  return vr(e.getBoxLayoutParams(), {
    width: t.getWidth(),
    height: t.getHeight()
  });
}
function qhe(e, t) {
  for (var r = e.mapDimension("value"), n = e.mapArray(r, function(l) {
    return l;
  }), i = [], a = t === "ascending", o = 0, s = e.count(); o < s; o++)
    i[o] = o;
  return Ee(t) ? i.sort(t) : t !== "none" && i.sort(function(l, u) {
    return a ? n[l] - n[u] : n[u] - n[l];
  }), i;
}
function Jhe(e) {
  var t = e.hostModel, r = t.get("orient");
  e.each(function(n) {
    var i = e.getItemModel(n), a = i.getModel("label"), o = a.get("position"), s = i.getModel("labelLine"), l = e.getItemLayout(n), u = l.points, c = o === "inner" || o === "inside" || o === "center" || o === "insideLeft" || o === "insideRight", f, d, h, p;
    if (c)
      o === "insideLeft" ? (d = (u[0][0] + u[3][0]) / 2 + 5, h = (u[0][1] + u[3][1]) / 2, f = "left") : o === "insideRight" ? (d = (u[1][0] + u[2][0]) / 2 - 5, h = (u[1][1] + u[2][1]) / 2, f = "right") : (d = (u[0][0] + u[1][0] + u[2][0] + u[3][0]) / 4, h = (u[0][1] + u[1][1] + u[2][1] + u[3][1]) / 4, f = "center"), p = [[d, h], [d, h]];
    else {
      var v = void 0, g = void 0, m = void 0, y = void 0, b = s.get("length");
      process.env.NODE_ENV !== "production" && (r === "vertical" && ["top", "bottom"].indexOf(o) > -1 && (o = "left", console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")), r === "horizontal" && ["left", "right"].indexOf(o) > -1 && (o = "bottom", console.warn("Position error: Funnel chart on horizontal orient dose not support left and right."))), o === "left" ? (v = (u[3][0] + u[0][0]) / 2, g = (u[3][1] + u[0][1]) / 2, m = v - b, d = m - 5, f = "right") : o === "right" ? (v = (u[1][0] + u[2][0]) / 2, g = (u[1][1] + u[2][1]) / 2, m = v + b, d = m + 5, f = "left") : o === "top" ? (v = (u[3][0] + u[0][0]) / 2, g = (u[3][1] + u[0][1]) / 2, y = g - b, h = y - 5, f = "center") : o === "bottom" ? (v = (u[1][0] + u[2][0]) / 2, g = (u[1][1] + u[2][1]) / 2, y = g + b, h = y + 5, f = "center") : o === "rightTop" ? (v = r === "horizontal" ? u[3][0] : u[1][0], g = r === "horizontal" ? u[3][1] : u[1][1], r === "horizontal" ? (y = g - b, h = y - 5, f = "center") : (m = v + b, d = m + 5, f = "top")) : o === "rightBottom" ? (v = u[2][0], g = u[2][1], r === "horizontal" ? (y = g + b, h = y + 5, f = "center") : (m = v + b, d = m + 5, f = "bottom")) : o === "leftTop" ? (v = u[0][0], g = r === "horizontal" ? u[0][1] : u[1][1], r === "horizontal" ? (y = g - b, h = y - 5, f = "center") : (m = v - b, d = m - 5, f = "right")) : o === "leftBottom" ? (v = r === "horizontal" ? u[1][0] : u[3][0], g = r === "horizontal" ? u[1][1] : u[2][1], r === "horizontal" ? (y = g + b, h = y + 5, f = "center") : (m = v - b, d = m - 5, f = "right")) : (v = (u[1][0] + u[2][0]) / 2, g = (u[1][1] + u[2][1]) / 2, r === "horizontal" ? (y = g + b, h = y + 5, f = "center") : (m = v + b, d = m + 5, f = "left")), r === "horizontal" ? (m = v, d = m) : (y = g, h = y), p = [[v, g], [m, y]];
    }
    l.label = {
      linePoints: p,
      x: d,
      y: h,
      verticalAlign: "middle",
      textAlign: f,
      inside: c
    };
  });
}
function Qhe(e, t) {
  e.eachSeriesByType("funnel", function(r) {
    var n = r.getData(), i = n.mapDimension("value"), a = r.get("sort"), o = Khe(r, t), s = r.get("orient"), l = o.width, u = o.height, c = qhe(n, a), f = o.x, d = o.y, h = s === "horizontal" ? [pe(r.get("minSize"), u), pe(r.get("maxSize"), u)] : [pe(r.get("minSize"), l), pe(r.get("maxSize"), l)], p = n.getDataExtent(i), v = r.get("min"), g = r.get("max");
    v == null && (v = Math.min(p[0], 0)), g == null && (g = p[1]);
    var m = r.get("funnelAlign"), y = r.get("gap"), b = s === "horizontal" ? l : u, w = (b - y * (n.count() - 1)) / n.count(), _ = function(E, L) {
      if (s === "horizontal") {
        var I = n.get(i, E) || 0, P = Mt(I, [v, g], h, !0), k = void 0;
        switch (m) {
          case "top":
            k = d;
            break;
          case "center":
            k = d + (u - P) / 2;
            break;
          case "bottom":
            k = d + (u - P);
            break;
        }
        return [[L, k], [L, k + P]];
      }
      var z = n.get(i, E) || 0, V = Mt(z, [v, g], h, !0), B;
      switch (m) {
        case "left":
          B = f;
          break;
        case "center":
          B = f + (l - V) / 2;
          break;
        case "right":
          B = f + l - V;
          break;
      }
      return [[B, L], [B + V, L]];
    };
    a === "ascending" && (w = -w, y = -y, s === "horizontal" ? f += l : d += u, c = c.reverse());
    for (var S = 0; S < c.length; S++) {
      var C = c[S], A = c[S + 1], M = n.getItemModel(C);
      if (s === "horizontal") {
        var D = M.get(["itemStyle", "width"]);
        D == null ? D = w : (D = pe(D, l), a === "ascending" && (D = -D));
        var N = _(C, f), R = _(A, f + D);
        f += D + y, n.setItemLayout(C, {
          points: N.concat(R.slice().reverse())
        });
      } else {
        var O = M.get(["itemStyle", "height"]);
        O == null ? O = w : (O = pe(O, u), a === "ascending" && (O = -O));
        var N = _(C, d), R = _(A, d + O);
        d += O + y, n.setItemLayout(C, {
          points: N.concat(R.slice().reverse())
        });
      }
    }
    Jhe(n);
  });
}
function epe(e) {
  e.registerChartView(Zhe), e.registerSeriesModel(Xhe), e.registerLayout(Qhe), e.registerProcessor(hp("funnel"));
}
var tpe = 0.3, rpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._dataGroup = new Fe(), r._initialized = !1, r;
    }
    return t.prototype.init = function() {
      this.group.add(this._dataGroup);
    }, t.prototype.render = function(r, n, i, a) {
      this._progressiveEls = null;
      var o = this._dataGroup, s = r.getData(), l = this._data, u = r.coordinateSystem, c = u.dimensions, f = KI(r);
      s.diff(l).add(d).update(h).remove(p).execute();
      function d(g) {
        var m = XI(s, o, g, c, u);
        Qx(m, s, g, f);
      }
      function h(g, m) {
        var y = l.getItemGraphicEl(m), b = kz(s, g, c, u);
        s.setItemGraphicEl(g, y), _t(y, {
          shape: {
            points: b
          }
        }, r, g), Li(y), Qx(y, s, g, f);
      }
      function p(g) {
        var m = l.getItemGraphicEl(g);
        o.remove(m);
      }
      if (!this._initialized) {
        this._initialized = !0;
        var v = npe(u, r, function() {
          setTimeout(function() {
            o.removeClipPath();
          });
        });
        o.setClipPath(v);
      }
      this._data = s;
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      this._initialized = !0, this._data = null, this._dataGroup.removeAll();
    }, t.prototype.incrementalRender = function(r, n, i) {
      for (var a = n.getData(), o = n.coordinateSystem, s = o.dimensions, l = KI(n), u = this._progressiveEls = [], c = r.start; c < r.end; c++) {
        var f = XI(a, this._dataGroup, c, s, o);
        f.incremental = !0, Qx(f, a, c, l), u.push(f);
      }
    }, t.prototype.remove = function() {
      this._dataGroup && this._dataGroup.removeAll(), this._data = null;
    }, t.type = "parallel", t;
  }(It)
);
function npe(e, t, r) {
  var n = e.model, i = e.getRect(), a = new vt({
    shape: {
      x: i.x,
      y: i.y,
      width: i.width,
      height: i.height
    }
  }), o = n.get("layout") === "horizontal" ? "width" : "height";
  return a.setShape(o, 0), Wt(a, {
    shape: {
      width: i.width,
      height: i.height
    }
  }, t, r), a;
}
function kz(e, t, r, n) {
  for (var i = [], a = 0; a < r.length; a++) {
    var o = r[a], s = e.get(e.mapDimension(o), t);
    ipe(s, n.getAxis(o).type) || i.push(n.dataToPoint(s, o));
  }
  return i;
}
function XI(e, t, r, n, i) {
  var a = kz(e, r, n, i), o = new en({
    shape: {
      points: a
    },
    // silent: true,
    z2: 10
  });
  return t.add(o), e.setItemGraphicEl(r, o), o;
}
function KI(e) {
  var t = e.get("smooth", !0);
  return t === !0 && (t = tpe), t = ua(t), as(t) && (t = 0), {
    smooth: t
  };
}
function Qx(e, t, r, n) {
  e.useStyle(t.getItemVisual(r, "style")), e.style.fill = null, e.setShape("smooth", n.smooth);
  var i = t.getItemModel(r), a = i.getModel("emphasis");
  Vr(e, i, "lineStyle"), Jt(e, a.get("focus"), a.get("blurScope"), a.get("disabled"));
}
function ipe(e, t) {
  return t === "category" ? e == null : e == null || isNaN(e);
}
var ape = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.visualStyleAccessPath = "lineStyle", r.visualDrawType = "stroke", r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return pa(null, this, {
        useEncodeDefaulter: xe(ope, null, this)
      });
    }, t.prototype.getRawIndicesByActiveState = function(r) {
      var n = this.coordinateSystem, i = this.getData(), a = [];
      return n.eachActiveState(i, function(o, s) {
        r === o && a.push(i.getRawIndex(s));
      }), a;
    }, t.type = "series.parallel", t.dependencies = ["parallel"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "parallel",
      parallelIndex: 0,
      label: {
        show: !1
      },
      inactiveOpacity: 0.05,
      activeOpacity: 1,
      lineStyle: {
        width: 1,
        opacity: 0.45,
        type: "solid"
      },
      emphasis: {
        label: {
          show: !1
        }
      },
      progressive: 500,
      smooth: !1,
      animationEasing: "linear"
    }, t;
  }(zt)
);
function ope(e) {
  var t = e.ecModel.getComponent("parallel", e.get("parallelIndex"));
  if (t) {
    var r = {};
    return j(t.dimensions, function(n) {
      var i = spe(n);
      r[n] = i;
    }), r;
  }
}
function spe(e) {
  return +e.replace("dim", "");
}
var lpe = ["lineStyle", "opacity"], upe = {
  seriesType: "parallel",
  reset: function(e, t) {
    var r = e.coordinateSystem, n = {
      normal: e.get(["lineStyle", "opacity"]),
      active: e.get("activeOpacity"),
      inactive: e.get("inactiveOpacity")
    };
    return {
      progress: function(i, a) {
        r.eachActiveState(a, function(o, s) {
          var l = n[o];
          if (o === "normal" && a.hasItemOption) {
            var u = a.getItemModel(s).get(lpe, !0);
            u != null && (l = u);
          }
          var c = a.ensureUniqueItemVisual(s, "style");
          c.opacity = l;
        }, i.start, i.end);
      }
    };
  }
};
function cpe(e) {
  fpe(e), dpe(e);
}
function fpe(e) {
  if (!e.parallel) {
    var t = !1;
    j(e.series, function(r) {
      r && r.type === "parallel" && (t = !0);
    }), t && (e.parallel = [{}]);
  }
}
function dpe(e) {
  var t = Ot(e.parallelAxis);
  j(t, function(r) {
    if (Ne(r)) {
      var n = r.parallelIndex || 0, i = Ot(e.parallel)[n];
      i && i.parallelAxisDefault && Xe(r, i.parallelAxisDefault, !1);
    }
  });
}
var hpe = 5, ppe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      this._model = r, this._api = i, this._handlers || (this._handlers = {}, j(vpe, function(a, o) {
        i.getZr().on(o, this._handlers[o] = xe(a, this));
      }, this)), gf(this, "_throttledDispatchExpand", r.get("axisExpandRate"), "fixRate");
    }, t.prototype.dispose = function(r, n) {
      bh(this, "_throttledDispatchExpand"), j(this._handlers, function(i, a) {
        n.getZr().off(a, i);
      }), this._handlers = null;
    }, t.prototype._throttledDispatchExpand = function(r) {
      this._dispatchExpand(r);
    }, t.prototype._dispatchExpand = function(r) {
      r && this._api.dispatchAction(ae({
        type: "parallelAxisExpand"
      }, r));
    }, t.type = "parallel", t;
  }($t)
), vpe = {
  mousedown: function(e) {
    eb(this, "click") && (this._mouseDownPoint = [e.offsetX, e.offsetY]);
  },
  mouseup: function(e) {
    var t = this._mouseDownPoint;
    if (eb(this, "click") && t) {
      var r = [e.offsetX, e.offsetY], n = Math.pow(t[0] - r[0], 2) + Math.pow(t[1] - r[1], 2);
      if (n > hpe)
        return;
      var i = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);
      i.behavior !== "none" && this._dispatchExpand({
        axisExpandWindow: i.axisExpandWindow
      });
    }
    this._mouseDownPoint = null;
  },
  mousemove: function(e) {
    if (!(this._mouseDownPoint || !eb(this, "mousemove"))) {
      var t = this._model, r = t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]), n = r.behavior;
      n === "jump" && this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")), this._throttledDispatchExpand(n === "none" ? null : {
        axisExpandWindow: r.axisExpandWindow,
        // Jumping uses animation, and sliding suppresses animation.
        animation: n === "jump" ? null : {
          duration: 0
          // Disable animation.
        }
      });
    }
  }
};
function eb(e, t) {
  var r = e._model;
  return r.get("axisExpandable") && r.get("axisExpandTriggerOn") === t;
}
var gpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function() {
      e.prototype.init.apply(this, arguments), this.mergeOption({});
    }, t.prototype.mergeOption = function(r) {
      var n = this.option;
      r && Xe(n, r, !0), this._initDimensions();
    }, t.prototype.contains = function(r, n) {
      var i = r.get("parallelIndex");
      return i != null && n.getComponent("parallel", i) === this;
    }, t.prototype.setAxisExpand = function(r) {
      j(["axisExpandable", "axisExpandCenter", "axisExpandCount", "axisExpandWidth", "axisExpandWindow"], function(n) {
        r.hasOwnProperty(n) && (this.option[n] = r[n]);
      }, this);
    }, t.prototype._initDimensions = function() {
      var r = this.dimensions = [], n = this.parallelAxisIndex = [], i = Ct(this.ecModel.queryComponents({
        mainType: "parallelAxis"
      }), function(a) {
        return (a.get("parallelIndex") || 0) === this.componentIndex;
      }, this);
      j(i, function(a) {
        r.push("dim" + a.get("dim")), n.push(a.componentIndex);
      });
    }, t.type = "parallel", t.dependencies = ["parallelAxis"], t.layoutMode = "box", t.defaultOption = {
      // zlevel: 0,
      z: 0,
      left: 80,
      top: 60,
      right: 80,
      bottom: 60,
      // width: {totalWidth} - left - right,
      // height: {totalHeight} - top - bottom,
      layout: "horizontal",
      // FIXME
      // naming?
      axisExpandable: !1,
      axisExpandCenter: null,
      axisExpandCount: 0,
      axisExpandWidth: 50,
      axisExpandRate: 17,
      axisExpandDebounce: 50,
      // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.
      // Do not doc to user until necessary.
      axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],
      axisExpandTriggerOn: "click",
      parallelAxisDefault: null
    }, t;
  }(at)
), mpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a, o) {
      var s = e.call(this, r, n, i) || this;
      return s.type = a || "value", s.axisIndex = o, s;
    }
    return t.prototype.isHorizontal = function() {
      return this.coordinateSystem.getModel().get("layout") !== "horizontal";
    }, t;
  }(ui)
);
function eu(e, t, r, n, i, a) {
  e = e || 0;
  var o = r[1] - r[0];
  if (i != null && (i = Ru(i, [0, o])), a != null && (a = Math.max(a, i ?? 0)), n === "all") {
    var s = Math.abs(t[1] - t[0]);
    s = Ru(s, [0, o]), i = a = Ru(s, [i, a]), n = 0;
  }
  t[0] = Ru(t[0], r), t[1] = Ru(t[1], r);
  var l = tb(t, n);
  t[n] += e;
  var u = i || 0, c = r.slice();
  l.sign < 0 ? c[0] += u : c[1] -= u, t[n] = Ru(t[n], c);
  var f;
  return f = tb(t, n), i != null && (f.sign !== l.sign || f.span < i) && (t[1 - n] = t[n] + l.sign * i), f = tb(t, n), a != null && f.span > a && (t[1 - n] = t[n] + f.sign * a), t;
}
function tb(e, t) {
  var r = e[t] - e[1 - t];
  return {
    span: Math.abs(r),
    sign: r > 0 ? -1 : r < 0 ? 1 : t ? -1 : 1
  };
}
function Ru(e, t) {
  return Math.min(t[1] != null ? t[1] : 1 / 0, Math.max(t[0] != null ? t[0] : -1 / 0, e));
}
var rb = j, Oz = Math.min, zz = Math.max, qI = Math.floor, ype = Math.ceil, JI = tr, xpe = Math.PI, bpe = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.type = "parallel", this._axesMap = Ce(), this._axesLayout = {}, this.dimensions = t.dimensions, this._model = t, this._init(t, r, n);
    }
    return e.prototype._init = function(t, r, n) {
      var i = t.dimensions, a = t.parallelAxisIndex;
      rb(i, function(o, s) {
        var l = a[s], u = r.getComponent("parallelAxis", l), c = this._axesMap.set(o, new mpe(o, lp(u), [0, 0], u.get("type"), l)), f = c.type === "category";
        c.onBand = f && u.get("boundaryGap"), c.inverse = u.get("inverse"), u.axis = c, c.model = u, c.coordinateSystem = u.coordinateSystem = this;
      }, this);
    }, e.prototype.update = function(t, r) {
      this._updateAxesFromSeries(this._model, t);
    }, e.prototype.containPoint = function(t) {
      var r = this._makeLayoutInfo(), n = r.axisBase, i = r.layoutBase, a = r.pixelDimIndex, o = t[1 - a], s = t[a];
      return o >= n && o <= n + r.axisLength && s >= i && s <= i + r.layoutLength;
    }, e.prototype.getModel = function() {
      return this._model;
    }, e.prototype._updateAxesFromSeries = function(t, r) {
      r.eachSeries(function(n) {
        if (t.contains(n, r)) {
          var i = n.getData();
          rb(this.dimensions, function(a) {
            var o = this._axesMap.get(a);
            o.scale.unionExtentFromData(i, i.mapDimension(a)), Bl(o.scale, o.model);
          }, this);
        }
      }, this);
    }, e.prototype.resize = function(t, r) {
      this._rect = vr(t.getBoxLayoutParams(), {
        width: r.getWidth(),
        height: r.getHeight()
      }), this._layoutAxes();
    }, e.prototype.getRect = function() {
      return this._rect;
    }, e.prototype._makeLayoutInfo = function() {
      var t = this._model, r = this._rect, n = ["x", "y"], i = ["width", "height"], a = t.get("layout"), o = a === "horizontal" ? 0 : 1, s = r[i[o]], l = [0, s], u = this.dimensions.length, c = Iv(t.get("axisExpandWidth"), l), f = Iv(t.get("axisExpandCount") || 0, [0, u]), d = t.get("axisExpandable") && u > 3 && u > f && f > 1 && c > 0 && s > 0, h = t.get("axisExpandWindow"), p;
      if (h)
        p = Iv(h[1] - h[0], l), h[1] = h[0] + p;
      else {
        p = Iv(c * (f - 1), l);
        var v = t.get("axisExpandCenter") || qI(u / 2);
        h = [c * v - p / 2], h[1] = h[0] + p;
      }
      var g = (s - p) / (u - f);
      g < 3 && (g = 0);
      var m = [qI(JI(h[0] / c, 1)) + 1, ype(JI(h[1] / c, 1)) - 1], y = g / c * h[0];
      return {
        layout: a,
        pixelDimIndex: o,
        layoutBase: r[n[o]],
        layoutLength: s,
        axisBase: r[n[1 - o]],
        axisLength: r[i[1 - o]],
        axisExpandable: d,
        axisExpandWidth: c,
        axisCollapseWidth: g,
        axisExpandWindow: h,
        axisCount: u,
        winInnerIndices: m,
        axisExpandWindow0Pos: y
      };
    }, e.prototype._layoutAxes = function() {
      var t = this._rect, r = this._axesMap, n = this.dimensions, i = this._makeLayoutInfo(), a = i.layout;
      r.each(function(o) {
        var s = [0, i.axisLength], l = o.inverse ? 1 : 0;
        o.setExtent(s[l], s[1 - l]);
      }), rb(n, function(o, s) {
        var l = (i.axisExpandable ? _pe : wpe)(s, i), u = {
          horizontal: {
            x: l.position,
            y: i.axisLength
          },
          vertical: {
            x: 0,
            y: l.position
          }
        }, c = {
          horizontal: xpe / 2,
          vertical: 0
        }, f = [u[a].x + t.x, u[a].y + t.y], d = c[a], h = yn();
        vs(h, h, d), Ni(h, h, f), this._axesLayout[o] = {
          position: f,
          rotation: d,
          transform: h,
          axisNameAvailableWidth: l.axisNameAvailableWidth,
          axisLabelShow: l.axisLabelShow,
          nameTruncateMaxWidth: l.nameTruncateMaxWidth,
          tickDirection: 1,
          labelDirection: 1
        };
      }, this);
    }, e.prototype.getAxis = function(t) {
      return this._axesMap.get(t);
    }, e.prototype.dataToPoint = function(t, r) {
      return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t), r);
    }, e.prototype.eachActiveState = function(t, r, n, i) {
      n == null && (n = 0), i == null && (i = t.count());
      var a = this._axesMap, o = this.dimensions, s = [], l = [];
      j(o, function(g) {
        s.push(t.mapDimension(g)), l.push(a.get(g).model);
      });
      for (var u = this.hasAxisBrushed(), c = n; c < i; c++) {
        var f = void 0;
        if (!u)
          f = "normal";
        else {
          f = "active";
          for (var d = t.getValues(s, c), h = 0, p = o.length; h < p; h++) {
            var v = l[h].getActiveState(d[h]);
            if (v === "inactive") {
              f = "inactive";
              break;
            }
          }
        }
        r(f, c);
      }
    }, e.prototype.hasAxisBrushed = function() {
      for (var t = this.dimensions, r = this._axesMap, n = !1, i = 0, a = t.length; i < a; i++)
        r.get(t[i]).model.getActiveState() !== "normal" && (n = !0);
      return n;
    }, e.prototype.axisCoordToPoint = function(t, r) {
      var n = this._axesLayout[r];
      return Ai([t, 0], n.transform);
    }, e.prototype.getAxisLayout = function(t) {
      return ze(this._axesLayout[t]);
    }, e.prototype.getSlidedAxisExpandWindow = function(t) {
      var r = this._makeLayoutInfo(), n = r.pixelDimIndex, i = r.axisExpandWindow.slice(), a = i[1] - i[0], o = [0, r.axisExpandWidth * (r.axisCount - 1)];
      if (!this.containPoint(t))
        return {
          behavior: "none",
          axisExpandWindow: i
        };
      var s = t[n] - r.layoutBase - r.axisExpandWindow0Pos, l, u = "slide", c = r.axisCollapseWidth, f = this._model.get("axisExpandSlideTriggerArea"), d = f[0] != null;
      if (c)
        d && c && s < a * f[0] ? (u = "jump", l = s - a * f[2]) : d && c && s > a * (1 - f[0]) ? (u = "jump", l = s - a * (1 - f[2])) : (l = s - a * f[1]) >= 0 && (l = s - a * (1 - f[1])) <= 0 && (l = 0), l *= r.axisExpandWidth / c, l ? eu(l, i, o, "all") : u = "none";
      else {
        var h = i[1] - i[0], p = o[1] * s / h;
        i = [zz(0, p - h / 2)], i[1] = Oz(o[1], i[0] + h), i[0] = i[1] - h;
      }
      return {
        axisExpandWindow: i,
        behavior: u
      };
    }, e;
  }()
);
function Iv(e, t) {
  return Oz(zz(e, t[0]), t[1]);
}
function wpe(e, t) {
  var r = t.layoutLength / (t.axisCount - 1);
  return {
    position: r * e,
    axisNameAvailableWidth: r,
    axisLabelShow: !0
  };
}
function _pe(e, t) {
  var r = t.layoutLength, n = t.axisExpandWidth, i = t.axisCount, a = t.axisCollapseWidth, o = t.winInnerIndices, s, l = a, u = !1, c;
  return e < o[0] ? (s = e * a, c = a) : e <= o[1] ? (s = t.axisExpandWindow0Pos + e * n - t.axisExpandWindow[0], l = n, u = !0) : (s = r - (i - 1 - e) * a, c = a), {
    position: s,
    axisNameAvailableWidth: l,
    axisLabelShow: u,
    nameTruncateMaxWidth: c
  };
}
function Spe(e, t) {
  var r = [];
  return e.eachComponent("parallel", function(n, i) {
    var a = new bpe(n, e, t);
    a.name = "parallel_" + i, a.resize(n, t), n.coordinateSystem = a, a.model = n, r.push(a);
  }), e.eachSeries(function(n) {
    if (n.get("coordinateSystem") === "parallel") {
      var i = n.getReferringComponents("parallel", pr).models[0];
      n.coordinateSystem = i.coordinateSystem;
    }
  }), r;
}
var Cpe = {
  create: Spe
}, r_ = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.activeIntervals = [], r;
    }
    return t.prototype.getAreaSelectStyle = function() {
      return zl([
        ["fill", "color"],
        ["lineWidth", "borderWidth"],
        ["stroke", "borderColor"],
        ["width", "width"],
        ["opacity", "opacity"]
        // Option decal is in `DecalObject` but style.decal is in `PatternObject`.
        // So do not transfer decal directly.
      ])(this.getModel("areaSelectStyle"));
    }, t.prototype.setActiveIntervals = function(r) {
      var n = this.activeIntervals = ze(r);
      if (n)
        for (var i = n.length - 1; i >= 0; i--)
          An(n[i]);
    }, t.prototype.getActiveState = function(r) {
      var n = this.activeIntervals;
      if (!n.length)
        return "normal";
      if (r == null || isNaN(+r))
        return "inactive";
      if (n.length === 1) {
        var i = n[0];
        if (i[0] <= r && r <= i[1])
          return "active";
      } else
        for (var a = 0, o = n.length; a < o; a++)
          if (n[a][0] <= r && r <= n[a][1])
            return "active";
      return "inactive";
    }, t;
  }(at)
);
ir(r_, bf);
var Fl = !0, Lh = Math.min, Vc = Math.max, Tpe = Math.pow, Ape = 1e4, Mpe = 6, Epe = 6, QI = "globalPan", Dpe = {
  w: [0, 0],
  e: [0, 1],
  n: [1, 0],
  s: [1, 1]
}, Npe = {
  w: "ew",
  e: "ew",
  n: "ns",
  s: "ns",
  ne: "nesw",
  sw: "nesw",
  nw: "nwse",
  se: "nwse"
}, e3 = {
  brushStyle: {
    lineWidth: 2,
    stroke: "rgba(210,219,238,0.3)",
    fill: "#D2DBEE"
  },
  transformable: !0,
  brushMode: "single",
  removeOnClick: !1
}, Ipe = 0, ET = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this) || this;
      return n._track = [], n._covers = [], n._handlers = {}, process.env.NODE_ENV !== "production" && Le(r), n._zr = r, n.group = new Fe(), n._uid = "brushController_" + Ipe++, j(jpe, function(i, a) {
        this._handlers[a] = xe(i, this);
      }, n), n;
    }
    return t.prototype.enableBrush = function(r) {
      return process.env.NODE_ENV !== "production" && Le(this._mounted), this._brushType && this._doDisableBrush(), r.brushType && this._doEnableBrush(r), this;
    }, t.prototype._doEnableBrush = function(r) {
      var n = this._zr;
      this._enableGlobalPan || wfe(n, QI, this._uid), j(this._handlers, function(i, a) {
        n.on(a, i);
      }), this._brushType = r.brushType, this._brushOption = Xe(ze(e3), r, !0);
    }, t.prototype._doDisableBrush = function() {
      var r = this._zr;
      _fe(r, QI, this._uid), j(this._handlers, function(n, i) {
        r.off(i, n);
      }), this._brushType = this._brushOption = null;
    }, t.prototype.setPanels = function(r) {
      if (r && r.length) {
        var n = this._panels = {};
        j(r, function(i) {
          n[i.panelId] = ze(i);
        });
      } else
        this._panels = null;
      return this;
    }, t.prototype.mount = function(r) {
      r = r || {}, process.env.NODE_ENV !== "production" && (this._mounted = !0), this._enableGlobalPan = r.enableGlobalPan;
      var n = this.group;
      return this._zr.add(n), n.attr({
        x: r.x || 0,
        y: r.y || 0,
        rotation: r.rotation || 0,
        scaleX: r.scaleX || 1,
        scaleY: r.scaleY || 1
      }), this._transform = n.getLocalTransform(), this;
    }, t.prototype.updateCovers = function(r) {
      process.env.NODE_ENV !== "production" && Le(this._mounted), r = ue(r, function(d) {
        return Xe(ze(e3), d, !0);
      });
      var n = "\0-brush-index-", i = this._covers, a = this._covers = [], o = this, s = this._creatingCover;
      return new Ja(i, r, u, l).add(c).update(c).remove(f).execute(), this;
      function l(d, h) {
        return (d.id != null ? d.id : n + h) + "-" + d.brushType;
      }
      function u(d, h) {
        return l(d.__brushOption, h);
      }
      function c(d, h) {
        var p = r[d];
        if (h != null && i[h] === s)
          a[d] = i[h];
        else {
          var v = a[d] = h != null ? (i[h].__brushOption = p, i[h]) : Vz(o, jz(o, p));
          DT(o, v);
        }
      }
      function f(d) {
        i[d] !== s && o.group.remove(i[d]);
      }
    }, t.prototype.unmount = function() {
      if (!(process.env.NODE_ENV !== "production" && !this._mounted))
        return this.enableBrush(!1), n_(this), this._zr.remove(this.group), process.env.NODE_ENV !== "production" && (this._mounted = !1), this;
    }, t.prototype.dispose = function() {
      this.unmount(), this.off();
    }, t;
  }(ai)
);
function jz(e, t) {
  var r = d0[t.brushType].createCover(e, t);
  return r.__brushOption = t, Fz(r, t), e.group.add(r), r;
}
function Vz(e, t) {
  var r = NT(t);
  return r.endCreating && (r.endCreating(e, t), Fz(t, t.__brushOption)), t;
}
function Bz(e, t) {
  var r = t.__brushOption;
  NT(t).updateCoverShape(e, t, r.range, r);
}
function Fz(e, t) {
  var r = t.z;
  r == null && (r = Ape), e.traverse(function(n) {
    n.z = r, n.z2 = r;
  });
}
function DT(e, t) {
  NT(t).updateCommon(e, t), Bz(e, t);
}
function NT(e) {
  return d0[e.__brushOption.brushType];
}
function IT(e, t, r) {
  var n = e._panels;
  if (!n)
    return Fl;
  var i, a = e._transform;
  return j(n, function(o) {
    o.isTargetByCursor(t, r, a) && (i = o);
  }), i;
}
function $z(e, t) {
  var r = e._panels;
  if (!r)
    return Fl;
  var n = t.__brushOption.panelId;
  return n != null ? r[n] : Fl;
}
function n_(e) {
  var t = e._covers, r = t.length;
  return j(t, function(n) {
    e.group.remove(n);
  }, e), t.length = 0, !!r;
}
function $l(e, t) {
  var r = ue(e._covers, function(n) {
    var i = n.__brushOption, a = ze(i.range);
    return {
      brushType: i.brushType,
      panelId: i.panelId,
      range: a
    };
  });
  e.trigger("brush", {
    areas: r,
    isEnd: !!t.isEnd,
    removeOnClick: !!t.removeOnClick
  });
}
function Lpe(e) {
  var t = e._track;
  if (!t.length)
    return !1;
  var r = t[t.length - 1], n = t[0], i = r[0] - n[0], a = r[1] - n[1], o = Tpe(i * i + a * a, 0.5);
  return o > Mpe;
}
function Hz(e) {
  var t = e.length - 1;
  return t < 0 && (t = 0), [e[0], e[t]];
}
function Gz(e, t, r, n) {
  var i = new Fe();
  return i.add(new vt({
    name: "main",
    style: LT(r),
    silent: !0,
    draggable: !0,
    cursor: "move",
    drift: We(t3, e, t, i, ["n", "s", "w", "e"]),
    ondragend: We($l, t, {
      isEnd: !0
    })
  })), j(n, function(a) {
    i.add(new vt({
      name: a.join(""),
      style: {
        opacity: 0
      },
      draggable: !0,
      silent: !0,
      invisible: !0,
      drift: We(t3, e, t, i, a),
      ondragend: We($l, t, {
        isEnd: !0
      })
    }));
  }), i;
}
function Wz(e, t, r, n) {
  var i = n.brushStyle.lineWidth || 0, a = Vc(i, Epe), o = r[0][0], s = r[1][0], l = o - i / 2, u = s - i / 2, c = r[0][1], f = r[1][1], d = c - a + i / 2, h = f - a + i / 2, p = c - o, v = f - s, g = p + i, m = v + i;
  Sa(e, t, "main", o, s, p, v), n.transformable && (Sa(e, t, "w", l, u, a, m), Sa(e, t, "e", d, u, a, m), Sa(e, t, "n", l, u, g, a), Sa(e, t, "s", l, h, g, a), Sa(e, t, "nw", l, u, a, a), Sa(e, t, "ne", d, u, a, a), Sa(e, t, "sw", l, h, a, a), Sa(e, t, "se", d, h, a, a));
}
function i_(e, t) {
  var r = t.__brushOption, n = r.transformable, i = t.childAt(0);
  i.useStyle(LT(r)), i.attr({
    silent: !n,
    cursor: n ? "move" : "default"
  }), j([["w"], ["e"], ["n"], ["s"], ["s", "e"], ["s", "w"], ["n", "e"], ["n", "w"]], function(a) {
    var o = t.childOfName(a.join("")), s = a.length === 1 ? a_(e, a[0]) : Ppe(e, a);
    o && o.attr({
      silent: !n,
      invisible: !n,
      cursor: n ? Npe[s] + "-resize" : null
    });
  });
}
function Sa(e, t, r, n, i, a, o) {
  var s = t.childOfName(r);
  s && s.setShape(Ope(RT(e, t, [[n, i], [n + a, i + o]])));
}
function LT(e) {
  return Ie({
    strokeNoScale: !0
  }, e.brushStyle);
}
function Uz(e, t, r, n) {
  var i = [Lh(e, r), Lh(t, n)], a = [Vc(e, r), Vc(t, n)];
  return [
    [i[0], a[0]],
    [i[1], a[1]]
    // y range
  ];
}
function Rpe(e) {
  return Ko(e.group);
}
function a_(e, t) {
  var r = {
    w: "left",
    e: "right",
    n: "top",
    s: "bottom"
  }, n = {
    left: "w",
    right: "e",
    top: "n",
    bottom: "s"
  }, i = Gy(r[t], Rpe(e));
  return n[i];
}
function Ppe(e, t) {
  var r = [a_(e, t[0]), a_(e, t[1])];
  return (r[0] === "e" || r[0] === "w") && r.reverse(), r.join("");
}
function t3(e, t, r, n, i, a) {
  var o = r.__brushOption, s = e.toRectRange(o.range), l = Yz(t, i, a);
  j(n, function(u) {
    var c = Dpe[u];
    s[c[0]][c[1]] += l[c[0]];
  }), o.range = e.fromRectRange(Uz(s[0][0], s[1][0], s[0][1], s[1][1])), DT(t, r), $l(t, {
    isEnd: !1
  });
}
function kpe(e, t, r, n) {
  var i = t.__brushOption.range, a = Yz(e, r, n);
  j(i, function(o) {
    o[0] += a[0], o[1] += a[1];
  }), DT(e, t), $l(e, {
    isEnd: !1
  });
}
function Yz(e, t, r) {
  var n = e.group, i = n.transformCoordToLocal(t, r), a = n.transformCoordToLocal(0, 0);
  return [i[0] - a[0], i[1] - a[1]];
}
function RT(e, t, r) {
  var n = $z(e, t);
  return n && n !== Fl ? n.clipPath(r, e._transform) : ze(r);
}
function Ope(e) {
  var t = Lh(e[0][0], e[1][0]), r = Lh(e[0][1], e[1][1]), n = Vc(e[0][0], e[1][0]), i = Vc(e[0][1], e[1][1]);
  return {
    x: t,
    y: r,
    width: n - t,
    height: i - r
  };
}
function zpe(e, t, r) {
  if (
    // Check active
    !(!e._brushType || Vpe(e, t.offsetX, t.offsetY))
  ) {
    var n = e._zr, i = e._covers, a = IT(e, t, r);
    if (!e._dragging)
      for (var o = 0; o < i.length; o++) {
        var s = i[o].__brushOption;
        if (a && (a === Fl || s.panelId === a.panelId) && d0[s.brushType].contain(i[o], r[0], r[1]))
          return;
      }
    a && n.setCursorStyle("crosshair");
  }
}
function o_(e) {
  var t = e.event;
  t.preventDefault && t.preventDefault();
}
function s_(e, t, r) {
  return e.childOfName("main").contain(t, r);
}
function Zz(e, t, r, n) {
  var i = e._creatingCover, a = e._creatingPanel, o = e._brushOption, s;
  if (e._track.push(r.slice()), Lpe(e) || i) {
    if (a && !i) {
      o.brushMode === "single" && n_(e);
      var l = ze(o);
      l.brushType = r3(l.brushType, a), l.panelId = a === Fl ? null : a.panelId, i = e._creatingCover = jz(e, l), e._covers.push(i);
    }
    if (i) {
      var u = d0[r3(e._brushType, a)], c = i.__brushOption;
      c.range = u.getCreatingRange(RT(e, i, e._track)), n && (Vz(e, i), u.updateCommon(e, i)), Bz(e, i), s = {
        isEnd: n
      };
    }
  } else n && o.brushMode === "single" && o.removeOnClick && IT(e, t, r) && n_(e) && (s = {
    isEnd: n,
    removeOnClick: !0
  });
  return s;
}
function r3(e, t) {
  return e === "auto" ? (process.env.NODE_ENV !== "production" && Le(t && t.defaultBrushType, 'MUST have defaultBrushType when brushType is "atuo"'), t.defaultBrushType) : e;
}
var jpe = {
  mousedown: function(e) {
    if (this._dragging)
      n3(this, e);
    else if (!e.target || !e.target.draggable) {
      o_(e);
      var t = this.group.transformCoordToLocal(e.offsetX, e.offsetY);
      this._creatingCover = null;
      var r = this._creatingPanel = IT(this, e, t);
      r && (this._dragging = !0, this._track = [t.slice()]);
    }
  },
  mousemove: function(e) {
    var t = e.offsetX, r = e.offsetY, n = this.group.transformCoordToLocal(t, r);
    if (zpe(this, e, n), this._dragging) {
      o_(e);
      var i = Zz(this, e, n, !1);
      i && $l(this, i);
    }
  },
  mouseup: function(e) {
    n3(this, e);
  }
};
function n3(e, t) {
  if (e._dragging) {
    o_(t);
    var r = t.offsetX, n = t.offsetY, i = e.group.transformCoordToLocal(r, n), a = Zz(e, t, i, !0);
    e._dragging = !1, e._track = [], e._creatingCover = null, a && $l(e, a);
  }
}
function Vpe(e, t, r) {
  var n = e._zr;
  return t < 0 || t > n.getWidth() || r < 0 || r > n.getHeight();
}
var d0 = {
  lineX: i3(0),
  lineY: i3(1),
  rect: {
    createCover: function(e, t) {
      function r(n) {
        return n;
      }
      return Gz({
        toRectRange: r,
        fromRectRange: r
      }, e, t, [["w"], ["e"], ["n"], ["s"], ["s", "e"], ["s", "w"], ["n", "e"], ["n", "w"]]);
    },
    getCreatingRange: function(e) {
      var t = Hz(e);
      return Uz(t[1][0], t[1][1], t[0][0], t[0][1]);
    },
    updateCoverShape: function(e, t, r, n) {
      Wz(e, t, r, n);
    },
    updateCommon: i_,
    contain: s_
  },
  polygon: {
    createCover: function(e, t) {
      var r = new Fe();
      return r.add(new en({
        name: "main",
        style: LT(t),
        silent: !0
      })), r;
    },
    getCreatingRange: function(e) {
      return e;
    },
    endCreating: function(e, t) {
      t.remove(t.childAt(0)), t.add(new Jr({
        name: "main",
        draggable: !0,
        drift: We(kpe, e, t),
        ondragend: We($l, e, {
          isEnd: !0
        })
      }));
    },
    updateCoverShape: function(e, t, r, n) {
      t.childAt(0).setShape({
        points: RT(e, t, r)
      });
    },
    updateCommon: i_,
    contain: s_
  }
};
function i3(e) {
  return {
    createCover: function(t, r) {
      return Gz({
        toRectRange: function(n) {
          var i = [n, [0, 100]];
          return e && i.reverse(), i;
        },
        fromRectRange: function(n) {
          return n[e];
        }
      }, t, r, [[["w"], ["e"]], [["n"], ["s"]]][e]);
    },
    getCreatingRange: function(t) {
      var r = Hz(t), n = Lh(r[0][e], r[1][e]), i = Vc(r[0][e], r[1][e]);
      return [n, i];
    },
    updateCoverShape: function(t, r, n, i) {
      var a, o = $z(t, r);
      if (o !== Fl && o.getLinearBrushOtherExtent)
        a = o.getLinearBrushOtherExtent(e);
      else {
        var s = t._zr;
        a = [0, [s.getWidth(), s.getHeight()][1 - e]];
      }
      var l = [n, a];
      e && l.reverse(), Wz(t, r, l, i);
    },
    updateCommon: i_,
    contain: s_
  };
}
function Xz(e) {
  return e = PT(e), function(t) {
    return bC(t, e);
  };
}
function Kz(e, t) {
  return e = PT(e), function(r) {
    var n = t ?? r, i = n ? e.width : e.height, a = n ? e.x : e.y;
    return [a, a + (i || 0)];
  };
}
function qz(e, t, r) {
  var n = PT(e);
  return function(i, a) {
    return n.contain(a[0], a[1]) && !l0(i, t, r);
  };
}
function PT(e) {
  return tt.create(e);
}
var Bpe = ["axisLine", "axisTickLabel", "axisName"], Fpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n) {
      e.prototype.init.apply(this, arguments), (this._brushController = new ET(n.getZr())).on("brush", xe(this._onBrush, this));
    }, t.prototype.render = function(r, n, i, a) {
      if (!$pe(r, n, a)) {
        this.axisModel = r, this.api = i, this.group.removeAll();
        var o = this._axisGroup;
        if (this._axisGroup = new Fe(), this.group.add(this._axisGroup), !!r.get("show")) {
          var s = Gpe(r, n), l = s.coordinateSystem, u = r.getAreaSelectStyle(), c = u.width, f = r.axis.dim, d = l.getAxisLayout(f), h = ae({
            strokeContainThreshold: c
          }, d), p = new sn(r, h);
          j(Bpe, p.add, p), this._axisGroup.add(p.getGroup()), this._refreshBrushController(h, u, r, s, c, i), ap(o, this._axisGroup, r);
        }
      }
    }, t.prototype._refreshBrushController = function(r, n, i, a, o, s) {
      var l = i.axis.getExtent(), u = l[1] - l[0], c = Math.min(30, Math.abs(u) * 0.1), f = tt.create({
        x: l[0],
        y: -o / 2,
        width: u,
        height: o
      });
      f.x -= c, f.width += 2 * c, this._brushController.mount({
        enableGlobalPan: !0,
        rotation: r.rotation,
        x: r.position[0],
        y: r.position[1]
      }).setPanels([{
        panelId: "pl",
        clipPath: Xz(f),
        isTargetByCursor: qz(f, s, a),
        getLinearBrushOtherExtent: Kz(f, 0)
      }]).enableBrush({
        brushType: "lineX",
        brushStyle: n,
        removeOnClick: !0
      }).updateCovers(Hpe(i));
    }, t.prototype._onBrush = function(r) {
      var n = r.areas, i = this.axisModel, a = i.axis, o = ue(n, function(s) {
        return [a.coordToData(s.range[0], !0), a.coordToData(s.range[1], !0)];
      });
      (!i.option.realtime === r.isEnd || r.removeOnClick) && this.api.dispatchAction({
        type: "axisAreaSelect",
        parallelAxisId: i.id,
        intervals: o
      });
    }, t.prototype.dispose = function() {
      this._brushController.dispose();
    }, t.type = "parallelAxis", t;
  }($t)
);
function $pe(e, t, r) {
  return r && r.type === "axisAreaSelect" && t.findComponents({
    mainType: "parallelAxis",
    query: r
  })[0] === e;
}
function Hpe(e) {
  var t = e.axis;
  return ue(e.activeIntervals, function(r) {
    return {
      brushType: "lineX",
      panelId: "pl",
      range: [t.dataToCoord(r[0], !0), t.dataToCoord(r[1], !0)]
    };
  });
}
function Gpe(e, t) {
  return t.getComponent("parallel", e.get("parallelIndex"));
}
var Wpe = {
  type: "axisAreaSelect",
  event: "axisAreaSelected"
  // update: 'updateVisual'
};
function Upe(e) {
  e.registerAction(Wpe, function(t, r) {
    r.eachComponent({
      mainType: "parallelAxis",
      query: t
    }, function(n) {
      n.axis.model.setActiveIntervals(t.intervals);
    });
  }), e.registerAction("parallelAxisExpand", function(t, r) {
    r.eachComponent({
      mainType: "parallel",
      query: t
    }, function(n) {
      n.setAxisExpand(t);
    });
  });
}
var Ype = {
  type: "value",
  areaSelectStyle: {
    width: 20,
    borderWidth: 1,
    borderColor: "rgba(160,197,232)",
    color: "rgba(160,197,232)",
    opacity: 0.3
  },
  realtime: !0,
  z: 10
};
function Jz(e) {
  e.registerComponentView(ppe), e.registerComponentModel(gpe), e.registerCoordinateSystem("parallel", Cpe), e.registerPreprocessor(cpe), e.registerComponentModel(r_), e.registerComponentView(Fpe), jc(e, "parallel", r_, Ype), Upe(e);
}
function Zpe(e) {
  ot(Jz), e.registerChartView(rpe), e.registerSeriesModel(ape), e.registerVisual(e.PRIORITY.VISUAL.BRUSH, upe);
}
var Xpe = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.cpx1 = 0, this.cpy1 = 0, this.cpx2 = 0, this.cpy2 = 0, this.extent = 0;
    }
    return e;
  }()
), Kpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      return e.call(this, r) || this;
    }
    return t.prototype.getDefaultShape = function() {
      return new Xpe();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.extent;
      r.moveTo(n.x1, n.y1), r.bezierCurveTo(n.cpx1, n.cpy1, n.cpx2, n.cpy2, n.x2, n.y2), n.orient === "vertical" ? (r.lineTo(n.x2 + i, n.y2), r.bezierCurveTo(n.cpx2 + i, n.cpy2, n.cpx1 + i, n.cpy1, n.x1 + i, n.y1)) : (r.lineTo(n.x2, n.y2 + i), r.bezierCurveTo(n.cpx2, n.cpy2 + i, n.cpx1, n.cpy1 + i, n.x1, n.y1 + i)), r.closePath();
    }, t.prototype.highlight = function() {
      Ka(this);
    }, t.prototype.downplay = function() {
      qa(this);
    }, t;
  }(lt)
), qpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._focusAdjacencyDisabled = !1, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = this, o = r.getGraph(), s = this.group, l = r.layoutInfo, u = l.width, c = l.height, f = r.getData(), d = r.getData("edge"), h = r.get("orient");
      this._model = r, s.removeAll(), s.x = l.x, s.y = l.y, o.eachEdge(function(p) {
        var v = new Kpe(), g = He(v);
        g.dataIndex = p.dataIndex, g.seriesIndex = r.seriesIndex, g.dataType = "edge";
        var m = p.getModel(), y = m.getModel("lineStyle"), b = y.get("curveness"), w = p.node1.getLayout(), _ = p.node1.getModel(), S = _.get("localX"), C = _.get("localY"), A = p.node2.getLayout(), M = p.node2.getModel(), D = M.get("localX"), N = M.get("localY"), R = p.getLayout(), O, E, L, I, P, k, z, V;
        v.shape.extent = Math.max(1, R.dy), v.shape.orient = h, h === "vertical" ? (O = (S != null ? S * u : w.x) + R.sy, E = (C != null ? C * c : w.y) + w.dy, L = (D != null ? D * u : A.x) + R.ty, I = N != null ? N * c : A.y, P = O, k = E * (1 - b) + I * b, z = L, V = E * b + I * (1 - b)) : (O = (S != null ? S * u : w.x) + w.dx, E = (C != null ? C * c : w.y) + R.sy, L = D != null ? D * u : A.x, I = (N != null ? N * c : A.y) + R.ty, P = O * (1 - b) + L * b, k = E, z = O * b + L * (1 - b), V = I), v.setShape({
          x1: O,
          y1: E,
          x2: L,
          y2: I,
          cpx1: P,
          cpy1: k,
          cpx2: z,
          cpy2: V
        }), v.useStyle(y.getItemStyle()), a3(v.style, h, p);
        var B = "" + m.get("value"), F = Cr(m, "edgeLabel");
        Br(v, F, {
          labelFetcher: {
            getFormattedLabel: function(W, X, q, J, U, $) {
              return r.getFormattedLabel(
                W,
                X,
                "edge",
                J,
                // ensure edgeLabel formatter is provided
                // to prevent the inheritance from `label.formatter` of the series
                En(U, F.normal && F.normal.get("formatter"), B),
                $
              );
            }
          },
          labelDataIndex: p.dataIndex,
          defaultText: B
        }), v.setTextConfig({
          position: "inside"
        });
        var H = m.getModel("emphasis");
        Vr(v, m, "lineStyle", function(W) {
          var X = W.getItemStyle();
          return a3(X, h, p), X;
        }), s.add(v), d.setItemGraphicEl(p.dataIndex, v);
        var G = H.get("focus");
        Jt(v, G === "adjacency" ? p.getAdjacentDataIndices() : G === "trajectory" ? p.getTrajectoryDataIndices() : G, H.get("blurScope"), H.get("disabled"));
      }), o.eachNode(function(p) {
        var v = p.getLayout(), g = p.getModel(), m = g.get("localX"), y = g.get("localY"), b = g.getModel("emphasis"), w = g.get(["itemStyle", "borderRadius"]) || 0, _ = new vt({
          shape: {
            x: m != null ? m * u : v.x,
            y: y != null ? y * c : v.y,
            width: v.dx,
            height: v.dy,
            r: w
          },
          style: g.getModel("itemStyle").getItemStyle(),
          z2: 10
        });
        Br(_, Cr(g), {
          labelFetcher: {
            getFormattedLabel: function(C, A) {
              return r.getFormattedLabel(C, A, "node");
            }
          },
          labelDataIndex: p.dataIndex,
          defaultText: p.id
        }), _.disableLabelAnimation = !0, _.setStyle("fill", p.getVisual("color")), _.setStyle("decal", p.getVisual("style").decal), Vr(_, g), s.add(_), f.setItemGraphicEl(p.dataIndex, _), He(_).dataType = "node";
        var S = b.get("focus");
        Jt(_, S === "adjacency" ? p.getAdjacentDataIndices() : S === "trajectory" ? p.getTrajectoryDataIndices() : S, b.get("blurScope"), b.get("disabled"));
      }), f.eachItemGraphicEl(function(p, v) {
        var g = f.getItemModel(v);
        g.get("draggable") && (p.drift = function(m, y) {
          a._focusAdjacencyDisabled = !0, this.shape.x += m, this.shape.y += y, this.dirty(), i.dispatchAction({
            type: "dragNode",
            seriesId: r.id,
            dataIndex: f.getRawIndex(v),
            localX: this.shape.x / u,
            localY: this.shape.y / c
          });
        }, p.ondragend = function() {
          a._focusAdjacencyDisabled = !1;
        }, p.draggable = !0, p.cursor = "move");
      }), !this._data && r.isAnimationEnabled() && s.setClipPath(Jpe(s.getBoundingRect(), r, function() {
        s.removeClipPath();
      })), this._data = r.getData();
    }, t.prototype.dispose = function() {
    }, t.type = "sankey", t;
  }(It)
);
function a3(e, t, r) {
  switch (e.fill) {
    case "source":
      e.fill = r.node1.getVisual("color"), e.decal = r.node1.getVisual("style").decal;
      break;
    case "target":
      e.fill = r.node2.getVisual("color"), e.decal = r.node2.getVisual("style").decal;
      break;
    case "gradient":
      var n = r.node1.getVisual("color"), i = r.node2.getVisual("color");
      ge(n) && ge(i) && (e.fill = new lf(0, 0, +(t === "horizontal"), +(t === "vertical"), [{
        color: n,
        offset: 0
      }, {
        color: i,
        offset: 1
      }]));
  }
}
function Jpe(e, t, r) {
  var n = new vt({
    shape: {
      x: e.x - 10,
      y: e.y - 10,
      width: 0,
      height: e.height + 20
    }
  });
  return Wt(n, {
    shape: {
      width: e.width + 20
    }
  }, t, r), n;
}
var Qpe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      var i = r.edges || r.links || [], a = r.data || r.nodes || [], o = r.levels || [];
      this.levelModels = [];
      for (var s = this.levelModels, l = 0; l < o.length; l++)
        if (o[l].depth != null && o[l].depth >= 0)
          s[o[l].depth] = new Tt(o[l], this, n);
        else if (process.env.NODE_ENV !== "production")
          throw new Error("levels[i].depth is mandatory and should be natural number");
      var u = Pz(a, i, this, !0, c);
      return u.data;
      function c(f, d) {
        f.wrapMethod("getItemModel", function(h, p) {
          var v = h.parentModel, g = v.getData().getItemLayout(p);
          if (g) {
            var m = g.depth, y = v.levelModels[m];
            y && (h.parentModel = y);
          }
          return h;
        }), d.wrapMethod("getItemModel", function(h, p) {
          var v = h.parentModel, g = v.getGraph().getEdgeByIndex(p), m = g.node1.getLayout();
          if (m) {
            var y = m.depth, b = v.levelModels[y];
            b && (h.parentModel = b);
          }
          return h;
        });
      }
    }, t.prototype.setNodePosition = function(r, n) {
      var i = this.option.data || this.option.nodes, a = i[r];
      a.localX = n[0], a.localY = n[1];
    }, t.prototype.getGraph = function() {
      return this.getData().graph;
    }, t.prototype.getEdgeData = function() {
      return this.getGraph().edgeData;
    }, t.prototype.formatTooltip = function(r, n, i) {
      function a(h) {
        return isNaN(h) || h == null;
      }
      if (i === "edge") {
        var o = this.getDataParams(r, i), s = o.data, l = o.value, u = s.source + " -- " + s.target;
        return Tr("nameValue", {
          name: u,
          value: l,
          noValue: a(l)
        });
      } else {
        var c = this.getGraph().getNodeByIndex(r), f = c.getLayout().value, d = this.getDataParams(r, i).data.name;
        return Tr("nameValue", {
          name: d != null ? d + "" : null,
          value: f,
          noValue: a(f)
        });
      }
    }, t.prototype.optionUpdated = function() {
    }, t.prototype.getDataParams = function(r, n) {
      var i = e.prototype.getDataParams.call(this, r, n);
      if (i.value == null && n === "node") {
        var a = this.getGraph().getNodeByIndex(r), o = a.getLayout().value;
        i.value = o;
      }
      return i;
    }, t.type = "series.sankey", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "view",
      left: "5%",
      top: "5%",
      right: "20%",
      bottom: "5%",
      orient: "horizontal",
      nodeWidth: 20,
      nodeGap: 8,
      draggable: !0,
      layoutIterations: 32,
      label: {
        show: !0,
        position: "right",
        fontSize: 12
      },
      edgeLabel: {
        show: !1,
        fontSize: 12
      },
      levels: [],
      nodeAlign: "justify",
      lineStyle: {
        color: "#314656",
        opacity: 0.2,
        curveness: 0.5
      },
      emphasis: {
        label: {
          show: !0
        },
        lineStyle: {
          opacity: 0.5
        }
      },
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      },
      animationEasing: "linear",
      animationDuration: 1e3
    }, t;
  }(zt)
);
function eve(e, t) {
  e.eachSeriesByType("sankey", function(r) {
    var n = r.get("nodeWidth"), i = r.get("nodeGap"), a = tve(r, t);
    r.layoutInfo = a;
    var o = a.width, s = a.height, l = r.getGraph(), u = l.nodes, c = l.edges;
    nve(u);
    var f = Ct(u, function(v) {
      return v.getLayout().value === 0;
    }), d = f.length !== 0 ? 0 : r.get("layoutIterations"), h = r.get("orient"), p = r.get("nodeAlign");
    rve(u, c, n, i, o, s, d, h, p);
  });
}
function tve(e, t) {
  return vr(e.getBoxLayoutParams(), {
    width: t.getWidth(),
    height: t.getHeight()
  });
}
function rve(e, t, r, n, i, a, o, s, l) {
  ive(e, t, r, i, a, s, l), lve(e, t, a, i, n, o, s), mve(e, s);
}
function nve(e) {
  j(e, function(t) {
    var r = Jo(t.outEdges, Rm), n = Jo(t.inEdges, Rm), i = t.getValue() || 0, a = Math.max(r, n, i);
    t.setLayout({
      value: a
    }, !0);
  });
}
function ive(e, t, r, n, i, a, o) {
  for (var s = [], l = [], u = [], c = [], f = 0, d = 0; d < t.length; d++)
    s[d] = 1;
  for (var d = 0; d < e.length; d++)
    l[d] = e[d].inEdges.length, l[d] === 0 && u.push(e[d]);
  for (var h = -1; u.length; ) {
    for (var p = 0; p < u.length; p++) {
      var v = u[p], g = v.hostGraph.data.getRawDataItem(v.dataIndex), m = g.depth != null && g.depth >= 0;
      m && g.depth > h && (h = g.depth), v.setLayout({
        depth: m ? g.depth : f
      }, !0), a === "vertical" ? v.setLayout({
        dy: r
      }, !0) : v.setLayout({
        dx: r
      }, !0);
      for (var y = 0; y < v.outEdges.length; y++) {
        var b = v.outEdges[y], w = t.indexOf(b);
        s[w] = 0;
        var _ = b.node2, S = e.indexOf(_);
        --l[S] === 0 && c.indexOf(_) < 0 && c.push(_);
      }
    }
    ++f, u = c, c = [];
  }
  for (var d = 0; d < s.length; d++)
    if (s[d] === 1)
      throw new Error("Sankey is a DAG, the original data has cycle!");
  var C = h > f - 1 ? h : f - 1;
  o && o !== "left" && ave(e, o, a, C);
  var A = a === "vertical" ? (i - r) / C : (n - r) / C;
  sve(e, A, a);
}
function Qz(e) {
  var t = e.hostGraph.data.getRawDataItem(e.dataIndex);
  return t.depth != null && t.depth >= 0;
}
function ave(e, t, r, n) {
  if (t === "right") {
    for (var i = [], a = e, o = 0; a.length; ) {
      for (var s = 0; s < a.length; s++) {
        var l = a[s];
        l.setLayout({
          skNodeHeight: o
        }, !0);
        for (var u = 0; u < l.inEdges.length; u++) {
          var c = l.inEdges[u];
          i.indexOf(c.node1) < 0 && i.push(c.node1);
        }
      }
      a = i, i = [], ++o;
    }
    j(e, function(f) {
      Qz(f) || f.setLayout({
        depth: Math.max(0, n - f.getLayout().skNodeHeight)
      }, !0);
    });
  } else t === "justify" && ove(e, n);
}
function ove(e, t) {
  j(e, function(r) {
    !Qz(r) && !r.outEdges.length && r.setLayout({
      depth: t
    }, !0);
  });
}
function sve(e, t, r) {
  j(e, function(n) {
    var i = n.getLayout().depth * t;
    r === "vertical" ? n.setLayout({
      y: i
    }, !0) : n.setLayout({
      x: i
    }, !0);
  });
}
function lve(e, t, r, n, i, a, o) {
  var s = uve(e, o);
  cve(s, t, r, n, i, o), nb(s, i, r, n, o);
  for (var l = 1; a > 0; a--)
    l *= 0.99, fve(s, l, o), nb(s, i, r, n, o), gve(s, l, o), nb(s, i, r, n, o);
}
function uve(e, t) {
  var r = [], n = t === "vertical" ? "y" : "x", i = ow(e, function(a) {
    return a.getLayout()[n];
  });
  return i.keys.sort(function(a, o) {
    return a - o;
  }), j(i.keys, function(a) {
    r.push(i.buckets.get(a));
  }), r;
}
function cve(e, t, r, n, i, a) {
  var o = 1 / 0;
  j(e, function(s) {
    var l = s.length, u = 0;
    j(s, function(f) {
      u += f.getLayout().value;
    });
    var c = a === "vertical" ? (n - (l - 1) * i) / u : (r - (l - 1) * i) / u;
    c < o && (o = c);
  }), j(e, function(s) {
    j(s, function(l, u) {
      var c = l.getLayout().value * o;
      a === "vertical" ? (l.setLayout({
        x: u
      }, !0), l.setLayout({
        dx: c
      }, !0)) : (l.setLayout({
        y: u
      }, !0), l.setLayout({
        dy: c
      }, !0));
    });
  }), j(t, function(s) {
    var l = +s.getValue() * o;
    s.setLayout({
      dy: l
    }, !0);
  });
}
function nb(e, t, r, n, i) {
  var a = i === "vertical" ? "x" : "y";
  j(e, function(o) {
    o.sort(function(v, g) {
      return v.getLayout()[a] - g.getLayout()[a];
    });
    for (var s, l, u, c = 0, f = o.length, d = i === "vertical" ? "dx" : "dy", h = 0; h < f; h++)
      l = o[h], u = c - l.getLayout()[a], u > 0 && (s = l.getLayout()[a] + u, i === "vertical" ? l.setLayout({
        x: s
      }, !0) : l.setLayout({
        y: s
      }, !0)), c = l.getLayout()[a] + l.getLayout()[d] + t;
    var p = i === "vertical" ? n : r;
    if (u = c - t - p, u > 0) {
      s = l.getLayout()[a] - u, i === "vertical" ? l.setLayout({
        x: s
      }, !0) : l.setLayout({
        y: s
      }, !0), c = s;
      for (var h = f - 2; h >= 0; --h)
        l = o[h], u = l.getLayout()[a] + l.getLayout()[d] + t - c, u > 0 && (s = l.getLayout()[a] - u, i === "vertical" ? l.setLayout({
          x: s
        }, !0) : l.setLayout({
          y: s
        }, !0)), c = l.getLayout()[a];
    }
  });
}
function fve(e, t, r) {
  j(e.slice().reverse(), function(n) {
    j(n, function(i) {
      if (i.outEdges.length) {
        var a = Jo(i.outEdges, dve, r) / Jo(i.outEdges, Rm);
        if (isNaN(a)) {
          var o = i.outEdges.length;
          a = o ? Jo(i.outEdges, hve, r) / o : 0;
        }
        if (r === "vertical") {
          var s = i.getLayout().x + (a - cs(i, r)) * t;
          i.setLayout({
            x: s
          }, !0);
        } else {
          var l = i.getLayout().y + (a - cs(i, r)) * t;
          i.setLayout({
            y: l
          }, !0);
        }
      }
    });
  });
}
function dve(e, t) {
  return cs(e.node2, t) * e.getValue();
}
function hve(e, t) {
  return cs(e.node2, t);
}
function pve(e, t) {
  return cs(e.node1, t) * e.getValue();
}
function vve(e, t) {
  return cs(e.node1, t);
}
function cs(e, t) {
  return t === "vertical" ? e.getLayout().x + e.getLayout().dx / 2 : e.getLayout().y + e.getLayout().dy / 2;
}
function Rm(e) {
  return e.getValue();
}
function Jo(e, t, r) {
  for (var n = 0, i = e.length, a = -1; ++a < i; ) {
    var o = +t(e[a], r);
    isNaN(o) || (n += o);
  }
  return n;
}
function gve(e, t, r) {
  j(e, function(n) {
    j(n, function(i) {
      if (i.inEdges.length) {
        var a = Jo(i.inEdges, pve, r) / Jo(i.inEdges, Rm);
        if (isNaN(a)) {
          var o = i.inEdges.length;
          a = o ? Jo(i.inEdges, vve, r) / o : 0;
        }
        if (r === "vertical") {
          var s = i.getLayout().x + (a - cs(i, r)) * t;
          i.setLayout({
            x: s
          }, !0);
        } else {
          var l = i.getLayout().y + (a - cs(i, r)) * t;
          i.setLayout({
            y: l
          }, !0);
        }
      }
    });
  });
}
function mve(e, t) {
  var r = t === "vertical" ? "x" : "y";
  j(e, function(n) {
    n.outEdges.sort(function(i, a) {
      return i.node2.getLayout()[r] - a.node2.getLayout()[r];
    }), n.inEdges.sort(function(i, a) {
      return i.node1.getLayout()[r] - a.node1.getLayout()[r];
    });
  }), j(e, function(n) {
    var i = 0, a = 0;
    j(n.outEdges, function(o) {
      o.setLayout({
        sy: i
      }, !0), i += o.getLayout().dy;
    }), j(n.inEdges, function(o) {
      o.setLayout({
        ty: a
      }, !0), a += o.getLayout().dy;
    });
  });
}
function yve(e) {
  e.eachSeriesByType("sankey", function(t) {
    var r = t.getGraph(), n = r.nodes, i = r.edges;
    if (n.length) {
      var a = 1 / 0, o = -1 / 0;
      j(n, function(s) {
        var l = s.getLayout().value;
        l < a && (a = l), l > o && (o = l);
      }), j(n, function(s) {
        var l = new Sr({
          type: "color",
          mappingMethod: "linear",
          dataExtent: [a, o],
          visual: t.get("color")
        }), u = l.mapValueToVisual(s.getLayout().value), c = s.getModel().get(["itemStyle", "color"]);
        c != null ? (s.setVisual("color", c), s.setVisual("style", {
          fill: c
        })) : (s.setVisual("color", u), s.setVisual("style", {
          fill: u
        }));
      });
    }
    i.length && j(i, function(s) {
      var l = s.getModel().get("lineStyle");
      s.setVisual("style", l);
    });
  });
}
function xve(e) {
  e.registerChartView(qpe), e.registerSeriesModel(Qpe), e.registerLayout(eve), e.registerVisual(yve), e.registerAction({
    type: "dragNode",
    event: "dragnode",
    // here can only use 'update' now, other value is not support in echarts.
    update: "update"
  }, function(t, r) {
    r.eachComponent({
      mainType: "series",
      subType: "sankey",
      query: t
    }, function(n) {
      n.setNodePosition(t.dataIndex, [t.localX, t.localY]);
    });
  });
}
var ej = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype._hasEncodeRule = function(t) {
      var r = this.getEncode();
      return r && r.get(t) != null;
    }, e.prototype.getInitialData = function(t, r) {
      var n, i = r.getComponent("xAxis", this.get("xAxisIndex")), a = r.getComponent("yAxis", this.get("yAxisIndex")), o = i.get("type"), s = a.get("type"), l;
      o === "category" ? (t.layout = "horizontal", n = i.getOrdinalMeta(), l = !this._hasEncodeRule("x")) : s === "category" ? (t.layout = "vertical", n = a.getOrdinalMeta(), l = !this._hasEncodeRule("y")) : t.layout = t.layout || "horizontal";
      var u = ["x", "y"], c = t.layout === "horizontal" ? 0 : 1, f = this._baseAxisDim = u[c], d = u[1 - c], h = [i, a], p = h[c].get("type"), v = h[1 - c].get("type"), g = t.data;
      if (g && l) {
        var m = [];
        j(g, function(w, _) {
          var S;
          le(w) ? (S = w.slice(), w.unshift(_)) : le(w.value) ? (S = ae({}, w), S.value = S.value.slice(), w.value.unshift(_)) : S = w, m.push(S);
        }), t.data = m;
      }
      var y = this.defaultValueDimensions, b = [{
        name: f,
        type: _m(p),
        ordinalMeta: n,
        otherDims: {
          tooltip: !1,
          itemName: 0
        },
        dimsDef: ["base"]
      }, {
        name: d,
        type: _m(v),
        dimsDef: y.slice()
      }];
      return wf(this, {
        coordDimensions: b,
        dimensionsCount: y.length + 1,
        encodeDefaulter: We(D6, b, this)
      });
    }, e.prototype.getBaseAxis = function() {
      var t = this._baseAxisDim;
      return this.ecModel.getComponent(t + "Axis", this.get(t + "AxisIndex")).axis;
    }, e;
  }()
), tj = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.defaultValueDimensions = [{
        name: "min",
        defaultTooltip: !0
      }, {
        name: "Q1",
        defaultTooltip: !0
      }, {
        name: "median",
        defaultTooltip: !0
      }, {
        name: "Q3",
        defaultTooltip: !0
      }, {
        name: "max",
        defaultTooltip: !0
      }], r.visualDrawType = "stroke", r;
    }
    return t.type = "series.boxplot", t.dependencies = ["xAxis", "yAxis", "grid"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "cartesian2d",
      legendHoverLink: !0,
      layout: null,
      boxWidth: [7, 50],
      itemStyle: {
        color: "#fff",
        borderWidth: 1
      },
      emphasis: {
        scale: !0,
        itemStyle: {
          borderWidth: 2,
          shadowBlur: 5,
          shadowOffsetX: 1,
          shadowOffsetY: 1,
          shadowColor: "rgba(0,0,0,0.2)"
        }
      },
      animationDuration: 800
    }, t;
  }(zt)
);
ir(tj, ej, !0);
var bve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this.group, s = this._data;
      this._data || o.removeAll();
      var l = r.get("layout") === "horizontal" ? 1 : 0;
      a.diff(s).add(function(u) {
        if (a.hasValue(u)) {
          var c = a.getItemLayout(u), f = o3(c, a, u, l, !0);
          a.setItemGraphicEl(u, f), o.add(f);
        }
      }).update(function(u, c) {
        var f = s.getItemGraphicEl(c);
        if (!a.hasValue(u)) {
          o.remove(f);
          return;
        }
        var d = a.getItemLayout(u);
        f ? (Li(f), rj(d, f, a, u)) : f = o3(d, a, u, l), o.add(f), a.setItemGraphicEl(u, f);
      }).remove(function(u) {
        var c = s.getItemGraphicEl(u);
        c && o.remove(c);
      }).execute(), this._data = a;
    }, t.prototype.remove = function(r) {
      var n = this.group, i = this._data;
      this._data = null, i && i.eachItemGraphicEl(function(a) {
        a && n.remove(a);
      });
    }, t.type = "boxplot", t;
  }(It)
), wve = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), _ve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "boxplotBoxPath", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new wve();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.points, a = 0;
      for (r.moveTo(i[a][0], i[a][1]), a++; a < 4; a++)
        r.lineTo(i[a][0], i[a][1]);
      for (r.closePath(); a < i.length; a++)
        r.moveTo(i[a][0], i[a][1]), a++, r.lineTo(i[a][0], i[a][1]);
    }, t;
  }(lt)
);
function o3(e, t, r, n, i) {
  var a = e.ends, o = new _ve({
    shape: {
      points: i ? Sve(a, n, e) : a
    }
  });
  return rj(e, o, t, r, i), o;
}
function rj(e, t, r, n, i) {
  var a = r.hostModel, o = Zl[i ? "initProps" : "updateProps"];
  o(t, {
    shape: {
      points: e.ends
    }
  }, a, n), t.useStyle(r.getItemVisual(n, "style")), t.style.strokeNoScale = !0, t.z2 = 100;
  var s = r.getItemModel(n), l = s.getModel("emphasis");
  Vr(t, s), Jt(t, l.get("focus"), l.get("blurScope"), l.get("disabled"));
}
function Sve(e, t, r) {
  return ue(e, function(n) {
    return n = n.slice(), n[t] = r.initBaseline, n;
  });
}
var Ud = j;
function Cve(e) {
  var t = Tve(e);
  Ud(t, function(r) {
    var n = r.seriesModels;
    n.length && (Ave(r), Ud(n, function(i, a) {
      Mve(i, r.boxOffsetList[a], r.boxWidthList[a]);
    }));
  });
}
function Tve(e) {
  var t = [], r = [];
  return e.eachSeriesByType("boxplot", function(n) {
    var i = n.getBaseAxis(), a = rt(r, i);
    a < 0 && (a = r.length, r[a] = i, t[a] = {
      axis: i,
      seriesModels: []
    }), t[a].seriesModels.push(n);
  }), t;
}
function Ave(e) {
  var t = e.axis, r = e.seriesModels, n = r.length, i = e.boxWidthList = [], a = e.boxOffsetList = [], o = [], s;
  if (t.type === "category")
    s = t.getBandWidth();
  else {
    var l = 0;
    Ud(r, function(p) {
      l = Math.max(l, p.getData().count());
    });
    var u = t.getExtent();
    s = Math.abs(u[1] - u[0]) / l;
  }
  Ud(r, function(p) {
    var v = p.get("boxWidth");
    le(v) || (v = [v, v]), o.push([pe(v[0], s) || 0, pe(v[1], s) || 0]);
  });
  var c = s * 0.8 - 2, f = c / n * 0.3, d = (c - f * (n - 1)) / n, h = d / 2 - c / 2;
  Ud(r, function(p, v) {
    a.push(h), h += f + d, i.push(Math.min(Math.max(d, o[v][0]), o[v][1]));
  });
}
function Mve(e, t, r) {
  var n = e.coordinateSystem, i = e.getData(), a = r / 2, o = e.get("layout") === "horizontal" ? 0 : 1, s = 1 - o, l = ["x", "y"], u = i.mapDimension(l[o]), c = i.mapDimensionsAll(l[s]);
  if (u == null || c.length < 5)
    return;
  for (var f = 0; f < i.count(); f++) {
    var d = i.get(u, f), h = b(d, c[2], f), p = b(d, c[0], f), v = b(d, c[1], f), g = b(d, c[3], f), m = b(d, c[4], f), y = [];
    w(y, v, !1), w(y, g, !0), y.push(p, v, m, g), _(y, p), _(y, m), _(y, h), i.setItemLayout(f, {
      initBaseline: h[s],
      ends: y
    });
  }
  function b(S, C, A) {
    var M = i.get(C, A), D = [];
    D[o] = S, D[s] = M;
    var N;
    return isNaN(S) || isNaN(M) ? N = [NaN, NaN] : (N = n.dataToPoint(D), N[o] += t), N;
  }
  function w(S, C, A) {
    var M = C.slice(), D = C.slice();
    M[o] += a, D[o] -= a, A ? S.push(M, D) : S.push(D, M);
  }
  function _(S, C) {
    var A = C.slice(), M = C.slice();
    A[o] -= a, M[o] += a, S.push(A, M);
  }
}
function Eve(e, t) {
  t = t || {};
  for (var r = [], n = [], i = t.boundIQR, a = i === "none" || i === 0, o = 0; o < e.length; o++) {
    var s = An(e[o].slice()), l = dg(s, 0.25), u = dg(s, 0.5), c = dg(s, 0.75), f = s[0], d = s[s.length - 1], h = (i ?? 1.5) * (c - l), p = a ? f : Math.max(f, l - h), v = a ? d : Math.min(d, c + h), g = t.itemNameFormatter, m = Ee(g) ? g({
      value: o
    }) : ge(g) ? g.replace("{value}", o + "") : o + "";
    r.push([m, p, l, u, c, v]);
    for (var y = 0; y < s.length; y++) {
      var b = s[y];
      if (b < p || b > v) {
        var w = [m, b];
        n.push(w);
      }
    }
  }
  return {
    boxData: r,
    outliers: n
  };
}
var Dve = {
  type: "echarts:boxplot",
  transform: function(t) {
    var r = t.upstream;
    if (r.sourceFormat !== Qr) {
      var n = "";
      process.env.NODE_ENV !== "production" && (n = ln("source data is not applicable for this boxplot transform. Expect number[][].")), Et(n);
    }
    var i = Eve(r.getRawData(), t.config);
    return [{
      dimensions: ["ItemName", "Low", "Q1", "Q2", "Q3", "High"],
      data: i.boxData
    }, {
      data: i.outliers
    }];
  }
};
function Nve(e) {
  e.registerSeriesModel(tj), e.registerChartView(bve), e.registerLayout(Cve), e.registerTransform(Dve);
}
var Ive = ["itemStyle", "borderColor"], Lve = ["itemStyle", "borderColor0"], Rve = ["itemStyle", "borderColorDoji"], Pve = ["itemStyle", "color"], kve = ["itemStyle", "color0"];
function kT(e, t) {
  return t.get(e > 0 ? Pve : kve);
}
function OT(e, t) {
  return t.get(e === 0 ? Rve : e > 0 ? Ive : Lve);
}
var Ove = {
  seriesType: "candlestick",
  plan: vf(),
  // For legend.
  performRawSeries: !0,
  reset: function(e, t) {
    if (!t.isSeriesFiltered(e)) {
      var r = e.pipelineContext.large;
      return !r && {
        progress: function(n, i) {
          for (var a; (a = n.next()) != null; ) {
            var o = i.getItemModel(a), s = i.getItemLayout(a).sign, l = o.getItemStyle();
            l.fill = kT(s, o), l.stroke = OT(s, o) || l.fill;
            var u = i.ensureUniqueItemVisual(a, "style");
            ae(u, l);
          }
        }
      };
    }
  }
}, zve = ["color", "borderColor"], jve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      this.group.removeClipPath(), this._progressiveEls = null, this._updateDrawMode(r), this._isLargeDraw ? this._renderLarge(r) : this._renderNormal(r);
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      this._clear(), this._updateDrawMode(r);
    }, t.prototype.incrementalRender = function(r, n, i, a) {
      this._progressiveEls = [], this._isLargeDraw ? this._incrementalRenderLarge(r, n) : this._incrementalRenderNormal(r, n);
    }, t.prototype.eachRendered = function(r) {
      gs(this._progressiveEls || this.group, r);
    }, t.prototype._updateDrawMode = function(r) {
      var n = r.pipelineContext.large;
      (this._isLargeDraw == null || n !== this._isLargeDraw) && (this._isLargeDraw = n, this._clear());
    }, t.prototype._renderNormal = function(r) {
      var n = r.getData(), i = this._data, a = this.group, o = n.getLayout("isSimpleBox"), s = r.get("clip", !0), l = r.coordinateSystem, u = l.getArea && l.getArea();
      this._data || a.removeAll(), n.diff(i).add(function(c) {
        if (n.hasValue(c)) {
          var f = n.getItemLayout(c);
          if (s && s3(u, f))
            return;
          var d = ib(f, c, !0);
          Wt(d, {
            shape: {
              points: f.ends
            }
          }, r, c), ab(d, n, c, o), a.add(d), n.setItemGraphicEl(c, d);
        }
      }).update(function(c, f) {
        var d = i.getItemGraphicEl(f);
        if (!n.hasValue(c)) {
          a.remove(d);
          return;
        }
        var h = n.getItemLayout(c);
        if (s && s3(u, h)) {
          a.remove(d);
          return;
        }
        d ? (_t(d, {
          shape: {
            points: h.ends
          }
        }, r, c), Li(d)) : d = ib(h), ab(d, n, c, o), a.add(d), n.setItemGraphicEl(c, d);
      }).remove(function(c) {
        var f = i.getItemGraphicEl(c);
        f && a.remove(f);
      }).execute(), this._data = n;
    }, t.prototype._renderLarge = function(r) {
      this._clear(), l3(r, this.group);
      var n = r.get("clip", !0) ? fp(r.coordinateSystem, !1, r) : null;
      n ? this.group.setClipPath(n) : this.group.removeClipPath();
    }, t.prototype._incrementalRenderNormal = function(r, n) {
      for (var i = n.getData(), a = i.getLayout("isSimpleBox"), o; (o = r.next()) != null; ) {
        var s = i.getItemLayout(o), l = ib(s);
        ab(l, i, o, a), l.incremental = !0, this.group.add(l), this._progressiveEls.push(l);
      }
    }, t.prototype._incrementalRenderLarge = function(r, n) {
      l3(n, this.group, this._progressiveEls, !0);
    }, t.prototype.remove = function(r) {
      this._clear();
    }, t.prototype._clear = function() {
      this.group.removeAll(), this._data = null;
    }, t.type = "candlestick", t;
  }(It)
), Vve = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), Bve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "normalCandlestickBox", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new Vve();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.points;
      this.__simpleBox ? (r.moveTo(i[4][0], i[4][1]), r.lineTo(i[6][0], i[6][1])) : (r.moveTo(i[0][0], i[0][1]), r.lineTo(i[1][0], i[1][1]), r.lineTo(i[2][0], i[2][1]), r.lineTo(i[3][0], i[3][1]), r.closePath(), r.moveTo(i[4][0], i[4][1]), r.lineTo(i[5][0], i[5][1]), r.moveTo(i[6][0], i[6][1]), r.lineTo(i[7][0], i[7][1]));
    }, t;
  }(lt)
);
function ib(e, t, r) {
  var n = e.ends;
  return new Bve({
    shape: {
      points: r ? Fve(n, e) : n
    },
    z2: 100
  });
}
function s3(e, t) {
  for (var r = !0, n = 0; n < t.ends.length; n++)
    if (e.contain(t.ends[n][0], t.ends[n][1])) {
      r = !1;
      break;
    }
  return r;
}
function ab(e, t, r, n) {
  var i = t.getItemModel(r);
  e.useStyle(t.getItemVisual(r, "style")), e.style.strokeNoScale = !0, e.__simpleBox = n, Vr(e, i);
  var a = t.getItemLayout(r).sign;
  j(e.states, function(s, l) {
    var u = i.getModel(l), c = kT(a, u), f = OT(a, u) || c, d = s.style || (s.style = {});
    c && (d.fill = c), f && (d.stroke = f);
  });
  var o = i.getModel("emphasis");
  Jt(e, o.get("focus"), o.get("blurScope"), o.get("disabled"));
}
function Fve(e, t) {
  return ue(e, function(r) {
    return r = r.slice(), r[1] = t.initBaseline, r;
  });
}
var $ve = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), ob = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.type = "largeCandlestickBox", n;
    }
    return t.prototype.getDefaultShape = function() {
      return new $ve();
    }, t.prototype.buildPath = function(r, n) {
      for (var i = n.points, a = 0; a < i.length; )
        if (this.__sign === i[a++]) {
          var o = i[a++];
          r.moveTo(o, i[a++]), r.lineTo(o, i[a++]);
        } else
          a += 3;
    }, t;
  }(lt)
);
function l3(e, t, r, n) {
  var i = e.getData(), a = i.getLayout("largePoints"), o = new ob({
    shape: {
      points: a
    },
    __sign: 1,
    ignoreCoarsePointer: !0
  });
  t.add(o);
  var s = new ob({
    shape: {
      points: a
    },
    __sign: -1,
    ignoreCoarsePointer: !0
  });
  t.add(s);
  var l = new ob({
    shape: {
      points: a
    },
    __sign: 0,
    ignoreCoarsePointer: !0
  });
  t.add(l), sb(1, o, e), sb(-1, s, e), sb(0, l, e), n && (o.incremental = !0, s.incremental = !0), r && r.push(o, s);
}
function sb(e, t, r, n) {
  var i = OT(e, r) || kT(e, r), a = r.getModel("itemStyle").getItemStyle(zve);
  t.useStyle(a), t.style.fill = null, t.style.stroke = i;
}
var nj = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.defaultValueDimensions = [{
        name: "open",
        defaultTooltip: !0
      }, {
        name: "close",
        defaultTooltip: !0
      }, {
        name: "lowest",
        defaultTooltip: !0
      }, {
        name: "highest",
        defaultTooltip: !0
      }], r;
    }
    return t.prototype.getShadowDim = function() {
      return "open";
    }, t.prototype.brushSelector = function(r, n, i) {
      var a = n.getItemLayout(r);
      return a && i.rect(a.brushRect);
    }, t.type = "series.candlestick", t.dependencies = ["xAxis", "yAxis", "grid"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      coordinateSystem: "cartesian2d",
      legendHoverLink: !0,
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      layout: null,
      clip: !0,
      itemStyle: {
        color: "#eb5454",
        color0: "#47b262",
        borderColor: "#eb5454",
        borderColor0: "#47b262",
        borderColorDoji: null,
        // borderColor: '#d24040',
        // borderColor0: '#398f4f',
        borderWidth: 1
      },
      emphasis: {
        itemStyle: {
          borderWidth: 2
        }
      },
      barMaxWidth: null,
      barMinWidth: null,
      barWidth: null,
      large: !0,
      largeThreshold: 600,
      progressive: 3e3,
      progressiveThreshold: 1e4,
      progressiveChunkMode: "mod",
      animationEasing: "linear",
      animationDuration: 300
    }, t;
  }(zt)
);
ir(nj, ej, !0);
function Hve(e) {
  !e || !le(e.series) || j(e.series, function(t) {
    Ne(t) && t.type === "k" && (t.type = "candlestick");
  });
}
var Gve = {
  seriesType: "candlestick",
  plan: vf(),
  reset: function(e) {
    var t = e.coordinateSystem, r = e.getData(), n = Wve(e, r), i = 0, a = 1, o = ["x", "y"], s = r.getDimensionIndex(r.mapDimension(o[i])), l = ue(r.mapDimensionsAll(o[a]), r.getDimensionIndex, r), u = l[0], c = l[1], f = l[2], d = l[3];
    if (r.setLayout({
      candleWidth: n,
      // The value is experimented visually.
      isSimpleBox: n <= 1.3
    }), s < 0 || l.length < 4)
      return;
    return {
      progress: e.pipelineContext.large ? p : h
    };
    function h(v, g) {
      for (var m, y = g.getStore(); (m = v.next()) != null; ) {
        var b = y.get(s, m), w = y.get(u, m), _ = y.get(c, m), S = y.get(f, m), C = y.get(d, m), A = Math.min(w, _), M = Math.max(w, _), D = P(A, b), N = P(M, b), R = P(S, b), O = P(C, b), E = [];
        k(E, N, 0), k(E, D, 1), E.push(V(O), V(N), V(R), V(D));
        var L = g.getItemModel(m), I = !!L.get(["itemStyle", "borderColorDoji"]);
        g.setItemLayout(m, {
          sign: u3(y, m, w, _, c, I),
          initBaseline: w > _ ? N[a] : D[a],
          ends: E,
          brushRect: z(S, C, b)
        });
      }
      function P(B, F) {
        var H = [];
        return H[i] = F, H[a] = B, isNaN(F) || isNaN(B) ? [NaN, NaN] : t.dataToPoint(H);
      }
      function k(B, F, H) {
        var G = F.slice(), W = F.slice();
        G[i] = vg(G[i] + n / 2, 1, !1), W[i] = vg(W[i] - n / 2, 1, !0), H ? B.push(G, W) : B.push(W, G);
      }
      function z(B, F, H) {
        var G = P(B, H), W = P(F, H);
        return G[i] -= n / 2, W[i] -= n / 2, {
          x: G[0],
          y: G[1],
          width: n,
          height: W[1] - G[1]
        };
      }
      function V(B) {
        return B[i] = vg(B[i], 1), B;
      }
    }
    function p(v, g) {
      for (var m = qi(v.count * 4), y = 0, b, w = [], _ = [], S, C = g.getStore(), A = !!e.get(["itemStyle", "borderColorDoji"]); (S = v.next()) != null; ) {
        var M = C.get(s, S), D = C.get(u, S), N = C.get(c, S), R = C.get(f, S), O = C.get(d, S);
        if (isNaN(M) || isNaN(R) || isNaN(O)) {
          m[y++] = NaN, y += 3;
          continue;
        }
        m[y++] = u3(C, S, D, N, c, A), w[i] = M, w[a] = R, b = t.dataToPoint(w, null, _), m[y++] = b ? b[0] : NaN, m[y++] = b ? b[1] : NaN, w[a] = O, b = t.dataToPoint(w, null, _), m[y++] = b ? b[1] : NaN;
      }
      g.setLayout("largePoints", m);
    }
  }
};
function u3(e, t, r, n, i, a) {
  var o;
  return r > n ? o = -1 : r < n ? o = 1 : o = a ? 0 : t > 0 ? e.get(i, t - 1) <= n ? 1 : -1 : 1, o;
}
function Wve(e, t) {
  var r = e.getBaseAxis(), n, i = r.type === "category" ? r.getBandWidth() : (n = r.getExtent(), Math.abs(n[1] - n[0]) / t.count()), a = pe(Ge(e.get("barMaxWidth"), i), i), o = pe(Ge(e.get("barMinWidth"), 1), i), s = e.get("barWidth");
  return s != null ? pe(s, i) : Math.max(Math.min(i / 2, a), o);
}
function Uve(e) {
  e.registerChartView(jve), e.registerSeriesModel(nj), e.registerPreprocessor(Hve), e.registerVisual(Ove), e.registerLayout(Gve);
}
function c3(e, t) {
  var r = t.rippleEffectColor || t.color;
  e.eachChild(function(n) {
    n.attr({
      z: t.z,
      zlevel: t.zlevel,
      style: {
        stroke: t.brushType === "stroke" ? r : null,
        fill: t.brushType === "fill" ? r : null
      }
    });
  });
}
var Yve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n) {
      var i = e.call(this) || this, a = new up(r, n), o = new Fe();
      return i.add(a), i.add(o), i.updateData(r, n), i;
    }
    return t.prototype.stopEffectAnimation = function() {
      this.childAt(1).removeAll();
    }, t.prototype.startEffectAnimation = function(r) {
      for (var n = r.symbolType, i = r.color, a = r.rippleNumber, o = this.childAt(1), s = 0; s < a; s++) {
        var l = fr(n, -1, -1, 2, 2, i);
        l.attr({
          style: {
            strokeNoScale: !0
          },
          z2: 99,
          silent: !0,
          scaleX: 0.5,
          scaleY: 0.5
        });
        var u = -s / a * r.period + r.effectOffset;
        l.animate("", !0).when(r.period, {
          scaleX: r.rippleScale / 2,
          scaleY: r.rippleScale / 2
        }).delay(u).start(), l.animateStyle(!0).when(r.period, {
          opacity: 0
        }).delay(u).start(), o.add(l);
      }
      c3(o, r);
    }, t.prototype.updateEffectAnimation = function(r) {
      for (var n = this._effectCfg, i = this.childAt(1), a = ["symbolType", "period", "rippleScale", "rippleNumber"], o = 0; o < a.length; o++) {
        var s = a[o];
        if (n[s] !== r[s]) {
          this.stopEffectAnimation(), this.startEffectAnimation(r);
          return;
        }
      }
      c3(i, r);
    }, t.prototype.highlight = function() {
      Ka(this);
    }, t.prototype.downplay = function() {
      qa(this);
    }, t.prototype.getSymbolType = function() {
      var r = this.childAt(0);
      return r && r.getSymbolType();
    }, t.prototype.updateData = function(r, n) {
      var i = this, a = r.hostModel;
      this.childAt(0).updateData(r, n);
      var o = this.childAt(1), s = r.getItemModel(n), l = r.getItemVisual(n, "symbol"), u = mf(r.getItemVisual(n, "symbolSize")), c = r.getItemVisual(n, "style"), f = c && c.fill, d = s.getModel("emphasis");
      o.setScale(u), o.traverse(function(g) {
        g.setStyle("fill", f);
      });
      var h = ql(r.getItemVisual(n, "symbolOffset"), u);
      h && (o.x = h[0], o.y = h[1]);
      var p = r.getItemVisual(n, "symbolRotate");
      o.rotation = (p || 0) * Math.PI / 180 || 0;
      var v = {};
      v.showEffectOn = a.get("showEffectOn"), v.rippleScale = s.get(["rippleEffect", "scale"]), v.brushType = s.get(["rippleEffect", "brushType"]), v.period = s.get(["rippleEffect", "period"]) * 1e3, v.effectOffset = n / r.count(), v.z = a.getShallow("z") || 0, v.zlevel = a.getShallow("zlevel") || 0, v.symbolType = l, v.color = f, v.rippleEffectColor = s.get(["rippleEffect", "color"]), v.rippleNumber = s.get(["rippleEffect", "number"]), v.showEffectOn === "render" ? (this._effectCfg ? this.updateEffectAnimation(v) : this.startEffectAnimation(v), this._effectCfg = v) : (this._effectCfg = null, this.stopEffectAnimation(), this.onHoverStateChange = function(g) {
        g === "emphasis" ? v.showEffectOn !== "render" && i.startEffectAnimation(v) : g === "normal" && v.showEffectOn !== "render" && i.stopEffectAnimation();
      }), this._effectCfg = v, Jt(this, d.get("focus"), d.get("blurScope"), d.get("disabled"));
    }, t.prototype.fadeOut = function(r) {
      r && r();
    }, t;
  }(Fe)
), Zve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function() {
      this._symbolDraw = new cp(Yve);
    }, t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this._symbolDraw;
      o.updateData(a, {
        clipShape: this._getClipShape(r)
      }), this.group.add(o.group);
    }, t.prototype._getClipShape = function(r) {
      var n = r.coordinateSystem, i = n && n.getArea && n.getArea();
      return r.get("clip", !0) ? i : null;
    }, t.prototype.updateTransform = function(r, n, i) {
      var a = r.getData();
      this.group.dirty();
      var o = dp("").reset(r, n, i);
      o.progress && o.progress({
        start: 0,
        end: a.count(),
        count: a.count()
      }, a), this._symbolDraw.updateLayout();
    }, t.prototype._updateGroupTransform = function(r) {
      var n = r.coordinateSystem;
      n && n.getRoamTransform && (this.group.transform = Hk(n.getRoamTransform()), this.group.decomposeTransform());
    }, t.prototype.remove = function(r, n) {
      this._symbolDraw && this._symbolDraw.remove(!0);
    }, t.type = "effectScatter", t;
  }(It)
), Xve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return pa(null, this, {
        useEncodeDefaulter: !0
      });
    }, t.prototype.brushSelector = function(r, n, i) {
      return i.point(n.getItemLayout(r));
    }, t.type = "series.effectScatter", t.dependencies = ["grid", "polar"], t.defaultOption = {
      coordinateSystem: "cartesian2d",
      // zlevel: 0,
      z: 2,
      legendHoverLink: !0,
      effectType: "ripple",
      progressive: 0,
      // When to show the effect, option: 'render'|'emphasis'
      showEffectOn: "render",
      clip: !0,
      // Ripple effect config
      rippleEffect: {
        period: 4,
        // Scale of ripple
        scale: 2.5,
        // Brush type can be fill or stroke
        brushType: "fill",
        // Ripple number
        number: 3
      },
      universalTransition: {
        divideShape: "clone"
      },
      // Cartesian coordinate system
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      // Polar coordinate system
      // polarIndex: 0,
      // Geo coordinate system
      // geoIndex: 0,
      // symbol: null,        // 图形类型
      symbolSize: 10
      // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2
      // symbolRotate: null,  // 图形旋转控制
      // itemStyle: {
      //     opacity: 1
      // }
    }, t;
  }(zt)
);
function Kve(e) {
  e.registerChartView(Zve), e.registerSeriesModel(Xve), e.registerLayout(dp("effectScatter"));
}
var ij = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this) || this;
      return a.add(a.createLine(r, n, i)), a._updateEffectSymbol(r, n), a;
    }
    return t.prototype.createLine = function(r, n, i) {
      return new AT(r, n, i);
    }, t.prototype._updateEffectSymbol = function(r, n) {
      var i = r.getItemModel(n), a = i.getModel("effect"), o = a.get("symbolSize"), s = a.get("symbol");
      le(o) || (o = [o, o]);
      var l = r.getItemVisual(n, "style"), u = a.get("color") || l && l.stroke, c = this.childAt(1);
      this._symbolType !== s && (this.remove(c), c = fr(s, -0.5, -0.5, 1, 1, u), c.z2 = 100, c.culling = !0, this.add(c)), c && (c.setStyle("shadowColor", u), c.setStyle(a.getItemStyle(["color"])), c.scaleX = o[0], c.scaleY = o[1], c.setColor(u), this._symbolType = s, this._symbolScale = o, this._updateEffectAnimation(r, a, n));
    }, t.prototype._updateEffectAnimation = function(r, n, i) {
      var a = this.childAt(1);
      if (a) {
        var o = r.getItemLayout(i), s = n.get("period") * 1e3, l = n.get("loop"), u = n.get("roundTrip"), c = n.get("constantSpeed"), f = ur(n.get("delay"), function(h) {
          return h / r.count() * s / 3;
        });
        if (a.ignore = !0, this._updateAnimationPoints(a, o), c > 0 && (s = this._getLineLength(a) / c * 1e3), s !== this._period || l !== this._loop || u !== this._roundTrip) {
          a.stopAnimation();
          var d = void 0;
          Ee(f) ? d = f(i) : d = f, a.__t > 0 && (d = -s * a.__t), this._animateSymbol(a, s, d, l, u);
        }
        this._period = s, this._loop = l, this._roundTrip = u;
      }
    }, t.prototype._animateSymbol = function(r, n, i, a, o) {
      if (n > 0) {
        r.__t = 0;
        var s = this, l = r.animate("", a).when(o ? n * 2 : n, {
          __t: o ? 2 : 1
        }).delay(i).during(function() {
          s._updateSymbolPosition(r);
        });
        a || l.done(function() {
          s.remove(r);
        }), l.start();
      }
    }, t.prototype._getLineLength = function(r) {
      return Oa(r.__p1, r.__cp1) + Oa(r.__cp1, r.__p2);
    }, t.prototype._updateAnimationPoints = function(r, n) {
      r.__p1 = n[0], r.__p2 = n[1], r.__cp1 = n[2] || [(n[0][0] + n[1][0]) / 2, (n[0][1] + n[1][1]) / 2];
    }, t.prototype.updateData = function(r, n, i) {
      this.childAt(0).updateData(r, n, i), this._updateEffectSymbol(r, n);
    }, t.prototype._updateSymbolPosition = function(r) {
      var n = r.__p1, i = r.__p2, a = r.__cp1, o = r.__t < 1 ? r.__t : 2 - r.__t, s = [r.x, r.y], l = s.slice(), u = Dr, c = G2;
      s[0] = u(n[0], a[0], i[0], o), s[1] = u(n[1], a[1], i[1], o);
      var f = r.__t < 1 ? c(n[0], a[0], i[0], o) : c(i[0], a[0], n[0], 1 - o), d = r.__t < 1 ? c(n[1], a[1], i[1], o) : c(i[1], a[1], n[1], 1 - o);
      r.rotation = -Math.atan2(d, f) - Math.PI / 2, (this._symbolType === "line" || this._symbolType === "rect" || this._symbolType === "roundRect") && (r.__lastT !== void 0 && r.__lastT < r.__t ? (r.scaleY = Oa(l, s) * 1.05, o === 1 && (s[0] = l[0] + (s[0] - l[0]) / 2, s[1] = l[1] + (s[1] - l[1]) / 2)) : r.__lastT === 1 ? r.scaleY = 2 * Oa(n, s) : r.scaleY = this._symbolScale[1]), r.__lastT = r.__t, r.ignore = !1, r.x = s[0], r.y = s[1];
    }, t.prototype.updateLayout = function(r, n) {
      this.childAt(0).updateLayout(r, n);
      var i = r.getItemModel(n).getModel("effect");
      this._updateEffectAnimation(r, i, n);
    }, t;
  }(Fe)
), aj = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i) {
      var a = e.call(this) || this;
      return a._createPolyline(r, n, i), a;
    }
    return t.prototype._createPolyline = function(r, n, i) {
      var a = r.getItemLayout(n), o = new en({
        shape: {
          points: a
        }
      });
      this.add(o), this._updateCommonStl(r, n, i);
    }, t.prototype.updateData = function(r, n, i) {
      var a = r.hostModel, o = this.childAt(0), s = {
        shape: {
          points: r.getItemLayout(n)
        }
      };
      _t(o, s, a, n), this._updateCommonStl(r, n, i);
    }, t.prototype._updateCommonStl = function(r, n, i) {
      var a = this.childAt(0), o = r.getItemModel(n), s = i && i.emphasisLineStyle, l = i && i.focus, u = i && i.blurScope, c = i && i.emphasisDisabled;
      if (!i || r.hasItemOption) {
        var f = o.getModel("emphasis");
        s = f.getModel("lineStyle").getLineStyle(), c = f.get("disabled"), l = f.get("focus"), u = f.get("blurScope");
      }
      a.useStyle(r.getItemVisual(n, "style")), a.style.fill = null, a.style.strokeNoScale = !0;
      var d = a.ensureState("emphasis");
      d.style = s, Jt(this, l, u, c);
    }, t.prototype.updateLayout = function(r, n) {
      var i = this.childAt(0);
      i.setShape("points", r.getItemLayout(n));
    }, t;
  }(Fe)
), qve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r._lastFrame = 0, r._lastFramePercent = 0, r;
    }
    return t.prototype.createLine = function(r, n, i) {
      return new aj(r, n, i);
    }, t.prototype._updateAnimationPoints = function(r, n) {
      this._points = n;
      for (var i = [0], a = 0, o = 1; o < n.length; o++) {
        var s = n[o - 1], l = n[o];
        a += Oa(s, l), i.push(a);
      }
      if (a === 0) {
        this._length = 0;
        return;
      }
      for (var o = 0; o < i.length; o++)
        i[o] /= a;
      this._offsets = i, this._length = a;
    }, t.prototype._getLineLength = function() {
      return this._length;
    }, t.prototype._updateSymbolPosition = function(r) {
      var n = r.__t < 1 ? r.__t : 2 - r.__t, i = this._points, a = this._offsets, o = i.length;
      if (a) {
        var s = this._lastFrame, l;
        if (n < this._lastFramePercent) {
          var u = Math.min(s + 1, o - 1);
          for (l = u; l >= 0 && !(a[l] <= n); l--)
            ;
          l = Math.min(l, o - 2);
        } else {
          for (l = s; l < o && !(a[l] > n); l++)
            ;
          l = Math.min(l - 1, o - 2);
        }
        var c = (n - a[l]) / (a[l + 1] - a[l]), f = i[l], d = i[l + 1];
        r.x = f[0] * (1 - c) + c * d[0], r.y = f[1] * (1 - c) + c * d[1];
        var h = r.__t < 1 ? d[0] - f[0] : f[0] - d[0], p = r.__t < 1 ? d[1] - f[1] : f[1] - d[1];
        r.rotation = -Math.atan2(p, h) - Math.PI / 2, this._lastFrame = l, this._lastFramePercent = n, r.ignore = !1;
      }
    }, t;
  }(ij)
), Jve = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.polyline = !1, this.curveness = 0, this.segs = [];
    }
    return e;
  }()
), Qve = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n._off = 0, n.hoverDataIdx = -1, n;
    }
    return t.prototype.reset = function() {
      this.notClear = !1, this._off = 0;
    }, t.prototype.getDefaultStyle = function() {
      return {
        stroke: "#000",
        fill: null
      };
    }, t.prototype.getDefaultShape = function() {
      return new Jve();
    }, t.prototype.buildPath = function(r, n) {
      var i = n.segs, a = n.curveness, o;
      if (n.polyline)
        for (o = this._off; o < i.length; ) {
          var s = i[o++];
          if (s > 0) {
            r.moveTo(i[o++], i[o++]);
            for (var l = 1; l < s; l++)
              r.lineTo(i[o++], i[o++]);
          }
        }
      else
        for (o = this._off; o < i.length; ) {
          var u = i[o++], c = i[o++], f = i[o++], d = i[o++];
          if (r.moveTo(u, c), a > 0) {
            var h = (u + f) / 2 - (c - d) * a, p = (c + d) / 2 - (f - u) * a;
            r.quadraticCurveTo(h, p, f, d);
          } else
            r.lineTo(f, d);
        }
      this.incremental && (this._off = o, this.notClear = !0);
    }, t.prototype.findDataIndex = function(r, n) {
      var i = this.shape, a = i.segs, o = i.curveness, s = this.style.lineWidth;
      if (i.polyline)
        for (var l = 0, u = 0; u < a.length; ) {
          var c = a[u++];
          if (c > 0)
            for (var f = a[u++], d = a[u++], h = 1; h < c; h++) {
              var p = a[u++], v = a[u++];
              if (Io(f, d, p, v, s, r, n))
                return l;
            }
          l++;
        }
      else
        for (var l = 0, u = 0; u < a.length; ) {
          var f = a[u++], d = a[u++], p = a[u++], v = a[u++];
          if (o > 0) {
            var g = (f + p) / 2 - (d - v) * o, m = (d + v) / 2 - (p - f) * o;
            if (R9(f, d, g, m, p, v, s, r, n))
              return l;
          } else if (Io(f, d, p, v, s, r, n))
            return l;
          l++;
        }
      return -1;
    }, t.prototype.contain = function(r, n) {
      var i = this.transformCoordToLocal(r, n), a = this.getBoundingRect();
      if (r = i[0], n = i[1], a.contain(r, n)) {
        var o = this.hoverDataIdx = this.findDataIndex(r, n);
        return o >= 0;
      }
      return this.hoverDataIdx = -1, !1;
    }, t.prototype.getBoundingRect = function() {
      var r = this._rect;
      if (!r) {
        for (var n = this.shape, i = n.segs, a = 1 / 0, o = 1 / 0, s = -1 / 0, l = -1 / 0, u = 0; u < i.length; ) {
          var c = i[u++], f = i[u++];
          a = Math.min(c, a), s = Math.max(c, s), o = Math.min(f, o), l = Math.max(f, l);
        }
        r = this._rect = new tt(a, o, s, l);
      }
      return r;
    }, t;
  }(lt)
), ege = (
  /** @class */
  function() {
    function e() {
      this.group = new Fe();
    }
    return e.prototype.updateData = function(t) {
      this._clear();
      var r = this._create();
      r.setShape({
        segs: t.getLayout("linesPoints")
      }), this._setCommon(r, t);
    }, e.prototype.incrementalPrepareUpdate = function(t) {
      this.group.removeAll(), this._clear();
    }, e.prototype.incrementalUpdate = function(t, r) {
      var n = this._newAdded[0], i = r.getLayout("linesPoints"), a = n && n.shape.segs;
      if (a && a.length < 2e4) {
        var o = a.length, s = new Float32Array(o + i.length);
        s.set(a), s.set(i, o), n.setShape({
          segs: s
        });
      } else {
        this._newAdded = [];
        var l = this._create();
        l.incremental = !0, l.setShape({
          segs: i
        }), this._setCommon(l, r), l.__startIndex = t.start;
      }
    }, e.prototype.remove = function() {
      this._clear();
    }, e.prototype.eachRendered = function(t) {
      this._newAdded[0] && t(this._newAdded[0]);
    }, e.prototype._create = function() {
      var t = new Qve({
        cursor: "default",
        ignoreCoarsePointer: !0
      });
      return this._newAdded.push(t), this.group.add(t), t;
    }, e.prototype._setCommon = function(t, r, n) {
      var i = r.hostModel;
      t.setShape({
        polyline: i.get("polyline"),
        curveness: i.get(["lineStyle", "curveness"])
      }), t.useStyle(i.getModel("lineStyle").getLineStyle()), t.style.strokeNoScale = !0;
      var a = r.getVisual("style");
      a && a.stroke && t.setStyle("stroke", a.stroke), t.setStyle("fill", null);
      var o = He(t);
      o.seriesIndex = i.seriesIndex, t.on("mousemove", function(s) {
        o.dataIndex = null;
        var l = t.hoverDataIdx;
        l > 0 && (o.dataIndex = l + t.__startIndex);
      });
    }, e.prototype._clear = function() {
      this._newAdded = [], this.group.removeAll();
    }, e;
  }()
), oj = {
  seriesType: "lines",
  plan: vf(),
  reset: function(e) {
    var t = e.coordinateSystem;
    if (!t) {
      process.env.NODE_ENV !== "production" && jr("The lines series must have a coordinate system.");
      return;
    }
    var r = e.get("polyline"), n = e.pipelineContext.large;
    return {
      progress: function(i, a) {
        var o = [];
        if (n) {
          var s = void 0, l = i.end - i.start;
          if (r) {
            for (var u = 0, c = i.start; c < i.end; c++)
              u += e.getLineCoordsCount(c);
            s = new Float32Array(l + u * 2);
          } else
            s = new Float32Array(l * 4);
          for (var f = 0, d = [], c = i.start; c < i.end; c++) {
            var h = e.getLineCoords(c, o);
            r && (s[f++] = h);
            for (var p = 0; p < h; p++)
              d = t.dataToPoint(o[p], !1, d), s[f++] = d[0], s[f++] = d[1];
          }
          a.setLayout("linesPoints", s);
        } else
          for (var c = i.start; c < i.end; c++) {
            var v = a.getItemModel(c), h = e.getLineCoords(c, o), g = [];
            if (r)
              for (var m = 0; m < h; m++)
                g.push(t.dataToPoint(o[m]));
            else {
              g[0] = t.dataToPoint(o[0]), g[1] = t.dataToPoint(o[1]);
              var y = v.get(["lineStyle", "curveness"]);
              +y && (g[2] = [(g[0][0] + g[1][0]) / 2 - (g[0][1] - g[1][1]) * y, (g[0][1] + g[1][1]) / 2 - (g[1][0] - g[0][0]) * y]);
            }
            a.setItemLayout(c, g);
          }
      }
    };
  }
}, tge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this._updateLineDraw(a, r), s = r.get("zlevel"), l = r.get(["effect", "trailLength"]), u = i.getZr(), c = u.painter.getType() === "svg";
      c || u.painter.getLayer(s).clear(!0), this._lastZlevel != null && !c && u.configLayer(this._lastZlevel, {
        motionBlur: !1
      }), this._showEffect(r) && l > 0 && (c ? process.env.NODE_ENV !== "production" && console.warn("SVG render mode doesn't support lines with trail effect") : u.configLayer(s, {
        motionBlur: !0,
        lastFrameAlpha: Math.max(Math.min(l / 10 + 0.9, 1), 0)
      })), o.updateData(a);
      var f = r.get("clip", !0) && fp(r.coordinateSystem, !1, r);
      f ? this.group.setClipPath(f) : this.group.removeClipPath(), this._lastZlevel = s, this._finished = !0;
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      var a = r.getData(), o = this._updateLineDraw(a, r);
      o.incrementalPrepareUpdate(a), this._clearLayer(i), this._finished = !1;
    }, t.prototype.incrementalRender = function(r, n, i) {
      this._lineDraw.incrementalUpdate(r, n.getData()), this._finished = r.end === n.getData().count();
    }, t.prototype.eachRendered = function(r) {
      this._lineDraw && this._lineDraw.eachRendered(r);
    }, t.prototype.updateTransform = function(r, n, i) {
      var a = r.getData(), o = r.pipelineContext;
      if (!this._finished || o.large || o.progressiveRender)
        return {
          update: !0
        };
      var s = oj.reset(r, n, i);
      s.progress && s.progress({
        start: 0,
        end: a.count(),
        count: a.count()
      }, a), this._lineDraw.updateLayout(), this._clearLayer(i);
    }, t.prototype._updateLineDraw = function(r, n) {
      var i = this._lineDraw, a = this._showEffect(n), o = !!n.get("polyline"), s = n.pipelineContext, l = s.large;
      return process.env.NODE_ENV !== "production" && a && l && console.warn("Large lines not support effect"), (!i || a !== this._hasEffet || o !== this._isPolyline || l !== this._isLargeDraw) && (i && i.remove(), i = this._lineDraw = l ? new ege() : new MT(o ? a ? qve : aj : a ? ij : AT), this._hasEffet = a, this._isPolyline = o, this._isLargeDraw = l), this.group.add(i.group), i;
    }, t.prototype._showEffect = function(r) {
      return !!r.get(["effect", "show"]);
    }, t.prototype._clearLayer = function(r) {
      var n = r.getZr(), i = n.painter.getType() === "svg";
      !i && this._lastZlevel != null && n.painter.getLayer(this._lastZlevel).clear(!0);
    }, t.prototype.remove = function(r, n) {
      this._lineDraw && this._lineDraw.remove(), this._lineDraw = null, this._clearLayer(n);
    }, t.prototype.dispose = function(r, n) {
      this.remove(r, n);
    }, t.type = "lines", t;
  }(It)
), rge = typeof Uint32Array > "u" ? Array : Uint32Array, nge = typeof Float64Array > "u" ? Array : Float64Array;
function f3(e) {
  var t = e.data;
  t && t[0] && t[0][0] && t[0][0].coord && (process.env.NODE_ENV !== "production" && console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"), e.data = ue(t, function(r) {
    var n = [r[0].coord, r[1].coord], i = {
      coords: n
    };
    return r[0].name && (i.fromName = r[0].name), r[1].name && (i.toName = r[1].name), Ay([i, r[0], r[1]]);
  }));
}
var ige = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.visualStyleAccessPath = "lineStyle", r.visualDrawType = "stroke", r;
    }
    return t.prototype.init = function(r) {
      r.data = r.data || [], f3(r);
      var n = this._processFlatCoordsArray(r.data);
      this._flatCoords = n.flatCoords, this._flatCoordsOffset = n.flatCoordsOffset, n.flatCoords && (r.data = new Float32Array(n.count)), e.prototype.init.apply(this, arguments);
    }, t.prototype.mergeOption = function(r) {
      if (f3(r), r.data) {
        var n = this._processFlatCoordsArray(r.data);
        this._flatCoords = n.flatCoords, this._flatCoordsOffset = n.flatCoordsOffset, n.flatCoords && (r.data = new Float32Array(n.count));
      }
      e.prototype.mergeOption.apply(this, arguments);
    }, t.prototype.appendData = function(r) {
      var n = this._processFlatCoordsArray(r.data);
      n.flatCoords && (this._flatCoords ? (this._flatCoords = Nc(this._flatCoords, n.flatCoords), this._flatCoordsOffset = Nc(this._flatCoordsOffset, n.flatCoordsOffset)) : (this._flatCoords = n.flatCoords, this._flatCoordsOffset = n.flatCoordsOffset), r.data = new Float32Array(n.count)), this.getRawData().appendData(r.data);
    }, t.prototype._getCoordsFromItemModel = function(r) {
      var n = this.getData().getItemModel(r), i = n.option instanceof Array ? n.option : n.getShallow("coords");
      if (process.env.NODE_ENV !== "production" && !(i instanceof Array && i.length > 0 && i[0] instanceof Array))
        throw new Error("Invalid coords " + JSON.stringify(i) + ". Lines must have 2d coords array in data item.");
      return i;
    }, t.prototype.getLineCoordsCount = function(r) {
      return this._flatCoordsOffset ? this._flatCoordsOffset[r * 2 + 1] : this._getCoordsFromItemModel(r).length;
    }, t.prototype.getLineCoords = function(r, n) {
      if (this._flatCoordsOffset) {
        for (var i = this._flatCoordsOffset[r * 2], a = this._flatCoordsOffset[r * 2 + 1], o = 0; o < a; o++)
          n[o] = n[o] || [], n[o][0] = this._flatCoords[i + o * 2], n[o][1] = this._flatCoords[i + o * 2 + 1];
        return a;
      } else {
        for (var s = this._getCoordsFromItemModel(r), o = 0; o < s.length; o++)
          n[o] = n[o] || [], n[o][0] = s[o][0], n[o][1] = s[o][1];
        return s.length;
      }
    }, t.prototype._processFlatCoordsArray = function(r) {
      var n = 0;
      if (this._flatCoords && (n = this._flatCoords.length), bt(r[0])) {
        for (var i = r.length, a = new rge(i), o = new nge(i), s = 0, l = 0, u = 0, c = 0; c < i; ) {
          u++;
          var f = r[c++];
          a[l++] = s + n, a[l++] = f;
          for (var d = 0; d < f; d++) {
            var h = r[c++], p = r[c++];
            if (o[s++] = h, o[s++] = p, c > i && process.env.NODE_ENV !== "production")
              throw new Error("Invalid data format.");
          }
        }
        return {
          flatCoordsOffset: new Uint32Array(a.buffer, 0, l),
          flatCoords: o,
          count: u
        };
      }
      return {
        flatCoordsOffset: null,
        flatCoords: null,
        count: r.length
      };
    }, t.prototype.getInitialData = function(r, n) {
      if (process.env.NODE_ENV !== "production") {
        var i = Kl.get(r.coordinateSystem);
        if (!i)
          throw new Error("Unknown coordinate system " + r.coordinateSystem);
      }
      var a = new Xr(["value"], this);
      return a.hasItemOption = !1, a.initData(r.data, [], function(o, s, l, u) {
        if (o instanceof Array)
          return NaN;
        a.hasItemOption = !0;
        var c = o.value;
        if (c != null)
          return c instanceof Array ? c[u] : c;
      }), a;
    }, t.prototype.formatTooltip = function(r, n, i) {
      var a = this.getData(), o = a.getItemModel(r), s = o.get("name");
      if (s)
        return s;
      var l = o.get("fromName"), u = o.get("toName"), c = [];
      return l != null && c.push(l), u != null && c.push(u), Tr("nameValue", {
        name: c.join(" > ")
      });
    }, t.prototype.preventIncremental = function() {
      return !!this.get(["effect", "show"]);
    }, t.prototype.getProgressive = function() {
      var r = this.option.progressive;
      return r ?? (this.option.large ? 1e4 : this.get("progressive"));
    }, t.prototype.getProgressiveThreshold = function() {
      var r = this.option.progressiveThreshold;
      return r ?? (this.option.large ? 2e4 : this.get("progressiveThreshold"));
    }, t.prototype.getZLevelKey = function() {
      var r = this.getModel("effect"), n = r.get("trailLength");
      return this.getData().count() > this.getProgressiveThreshold() ? this.id : r.get("show") && n > 0 ? n + "" : "";
    }, t.type = "series.lines", t.dependencies = ["grid", "polar", "geo", "calendar"], t.defaultOption = {
      coordinateSystem: "geo",
      // zlevel: 0,
      z: 2,
      legendHoverLink: !0,
      // Cartesian coordinate system
      xAxisIndex: 0,
      yAxisIndex: 0,
      symbol: ["none", "none"],
      symbolSize: [10, 10],
      // Geo coordinate system
      geoIndex: 0,
      effect: {
        show: !1,
        period: 4,
        constantSpeed: 0,
        symbol: "circle",
        symbolSize: 3,
        loop: !0,
        trailLength: 0.2
      },
      large: !1,
      // Available when large is true
      largeThreshold: 2e3,
      polyline: !1,
      clip: !0,
      label: {
        show: !1,
        position: "end"
        // distance: 5,
        // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调
      },
      lineStyle: {
        opacity: 0.5
      }
    }, t;
  }(zt)
);
function Lv(e) {
  return e instanceof Array || (e = [e, e]), e;
}
var age = {
  seriesType: "lines",
  reset: function(e) {
    var t = Lv(e.get("symbol")), r = Lv(e.get("symbolSize")), n = e.getData();
    n.setVisual("fromSymbol", t && t[0]), n.setVisual("toSymbol", t && t[1]), n.setVisual("fromSymbolSize", r && r[0]), n.setVisual("toSymbolSize", r && r[1]);
    function i(a, o) {
      var s = a.getItemModel(o), l = Lv(s.getShallow("symbol", !0)), u = Lv(s.getShallow("symbolSize", !0));
      l[0] && a.setItemVisual(o, "fromSymbol", l[0]), l[1] && a.setItemVisual(o, "toSymbol", l[1]), u[0] && a.setItemVisual(o, "fromSymbolSize", u[0]), u[1] && a.setItemVisual(o, "toSymbolSize", u[1]);
    }
    return {
      dataEach: n.hasItemOption ? i : null
    };
  }
};
function oge(e) {
  e.registerChartView(tge), e.registerSeriesModel(ige), e.registerLayout(oj), e.registerVisual(age);
}
var sge = 256, lge = (
  /** @class */
  function() {
    function e() {
      this.blurSize = 30, this.pointSize = 20, this.maxOpacity = 1, this.minOpacity = 0, this._gradientPixels = {
        inRange: null,
        outOfRange: null
      };
      var t = Di.createCanvas();
      this.canvas = t;
    }
    return e.prototype.update = function(t, r, n, i, a, o) {
      var s = this._getBrush(), l = this._getGradient(a, "inRange"), u = this._getGradient(a, "outOfRange"), c = this.pointSize + this.blurSize, f = this.canvas, d = f.getContext("2d"), h = t.length;
      f.width = r, f.height = n;
      for (var p = 0; p < h; ++p) {
        var v = t[p], g = v[0], m = v[1], y = v[2], b = i(y);
        d.globalAlpha = b, d.drawImage(s, g - c, m - c);
      }
      if (!f.width || !f.height)
        return f;
      for (var w = d.getImageData(0, 0, f.width, f.height), _ = w.data, S = 0, C = _.length, A = this.minOpacity, M = this.maxOpacity, D = M - A; S < C; ) {
        var b = _[S + 3] / 256, N = Math.floor(b * (sge - 1)) * 4;
        if (b > 0) {
          var R = o(b) ? l : u;
          b > 0 && (b = b * D + A), _[S++] = R[N], _[S++] = R[N + 1], _[S++] = R[N + 2], _[S++] = R[N + 3] * b * 256;
        } else
          S += 4;
      }
      return d.putImageData(w, 0, 0), f;
    }, e.prototype._getBrush = function() {
      var t = this._brushCanvas || (this._brushCanvas = Di.createCanvas()), r = this.pointSize + this.blurSize, n = r * 2;
      t.width = n, t.height = n;
      var i = t.getContext("2d");
      return i.clearRect(0, 0, n, n), i.shadowOffsetX = n, i.shadowBlur = this.blurSize, i.shadowColor = "#000", i.beginPath(), i.arc(-r, r, this.pointSize, 0, Math.PI * 2, !0), i.closePath(), i.fill(), t;
    }, e.prototype._getGradient = function(t, r) {
      for (var n = this._gradientPixels, i = n[r] || (n[r] = new Uint8ClampedArray(256 * 4)), a = [0, 0, 0, 0], o = 0, s = 0; s < 256; s++)
        t[r](s / 255, !0, a), i[o++] = a[0], i[o++] = a[1], i[o++] = a[2], i[o++] = a[3];
      return i;
    }, e;
  }()
);
function uge(e, t, r) {
  var n = e[1] - e[0];
  t = ue(t, function(o) {
    return {
      interval: [(o.interval[0] - e[0]) / n, (o.interval[1] - e[0]) / n]
    };
  });
  var i = t.length, a = 0;
  return function(o) {
    var s;
    for (s = a; s < i; s++) {
      var l = t[s].interval;
      if (l[0] <= o && o <= l[1]) {
        a = s;
        break;
      }
    }
    if (s === i)
      for (s = a - 1; s >= 0; s--) {
        var l = t[s].interval;
        if (l[0] <= o && o <= l[1]) {
          a = s;
          break;
        }
      }
    return s >= 0 && s < i && r[s];
  };
}
function cge(e, t) {
  var r = e[1] - e[0];
  return t = [(t[0] - e[0]) / r, (t[1] - e[0]) / r], function(n) {
    return n >= t[0] && n <= t[1];
  };
}
function d3(e) {
  var t = e.dimensions;
  return t[0] === "lng" && t[1] === "lat";
}
var fge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a;
      if (n.eachComponent("visualMap", function(s) {
        s.eachTargetSeries(function(l) {
          l === r && (a = s);
        });
      }), process.env.NODE_ENV !== "production" && !a)
        throw new Error("Heatmap must use with visualMap");
      this._progressiveEls = null, this.group.removeAll();
      var o = r.coordinateSystem;
      o.type === "cartesian2d" || o.type === "calendar" ? this._renderOnCartesianAndCalendar(r, i, 0, r.getData().count()) : d3(o) && this._renderOnGeo(o, r, a, i);
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      this.group.removeAll();
    }, t.prototype.incrementalRender = function(r, n, i, a) {
      var o = n.coordinateSystem;
      o && (d3(o) ? this.render(n, i, a) : (this._progressiveEls = [], this._renderOnCartesianAndCalendar(n, a, r.start, r.end, !0)));
    }, t.prototype.eachRendered = function(r) {
      gs(this._progressiveEls || this.group, r);
    }, t.prototype._renderOnCartesianAndCalendar = function(r, n, i, a, o) {
      var s = r.coordinateSystem, l = Jl(s, "cartesian2d"), u, c, f, d;
      if (l) {
        var h = s.getAxis("x"), p = s.getAxis("y");
        if (process.env.NODE_ENV !== "production") {
          if (!(h.type === "category" && p.type === "category"))
            throw new Error("Heatmap on cartesian must have two category axes");
          if (!(h.onBand && p.onBand))
            throw new Error("Heatmap on cartesian must have two axes with boundaryGap true");
        }
        u = h.getBandWidth() + 0.5, c = p.getBandWidth() + 0.5, f = h.scale.getExtent(), d = p.scale.getExtent();
      }
      for (var v = this.group, g = r.getData(), m = r.getModel(["emphasis", "itemStyle"]).getItemStyle(), y = r.getModel(["blur", "itemStyle"]).getItemStyle(), b = r.getModel(["select", "itemStyle"]).getItemStyle(), w = r.get(["itemStyle", "borderRadius"]), _ = Cr(r), S = r.getModel("emphasis"), C = S.get("focus"), A = S.get("blurScope"), M = S.get("disabled"), D = l ? [g.mapDimension("x"), g.mapDimension("y"), g.mapDimension("value")] : [g.mapDimension("time"), g.mapDimension("value")], N = i; N < a; N++) {
        var R = void 0, O = g.getItemVisual(N, "style");
        if (l) {
          var E = g.get(D[0], N), L = g.get(D[1], N);
          if (isNaN(g.get(D[2], N)) || isNaN(E) || isNaN(L) || E < f[0] || E > f[1] || L < d[0] || L > d[1])
            continue;
          var I = s.dataToPoint([E, L]);
          R = new vt({
            shape: {
              x: I[0] - u / 2,
              y: I[1] - c / 2,
              width: u,
              height: c
            },
            style: O
          });
        } else {
          if (isNaN(g.get(D[1], N)))
            continue;
          R = new vt({
            z2: 1,
            shape: s.dataToRect([g.get(D[0], N)]).contentShape,
            style: O
          });
        }
        if (g.hasItemOption) {
          var P = g.getItemModel(N), k = P.getModel("emphasis");
          m = k.getModel("itemStyle").getItemStyle(), y = P.getModel(["blur", "itemStyle"]).getItemStyle(), b = P.getModel(["select", "itemStyle"]).getItemStyle(), w = P.get(["itemStyle", "borderRadius"]), C = k.get("focus"), A = k.get("blurScope"), M = k.get("disabled"), _ = Cr(P);
        }
        R.shape.r = w;
        var z = r.getRawValue(N), V = "-";
        z && z[2] != null && (V = z[2] + ""), Br(R, _, {
          labelFetcher: r,
          labelDataIndex: N,
          defaultOpacity: O.opacity,
          defaultText: V
        }), R.ensureState("emphasis").style = m, R.ensureState("blur").style = y, R.ensureState("select").style = b, Jt(R, C, A, M), R.incremental = o, o && (R.states.emphasis.hoverLayer = !0), v.add(R), g.setItemGraphicEl(N, R), this._progressiveEls && this._progressiveEls.push(R);
      }
    }, t.prototype._renderOnGeo = function(r, n, i, a) {
      var o = i.targetVisuals.inRange, s = i.targetVisuals.outOfRange, l = n.getData(), u = this._hmLayer || this._hmLayer || new lge();
      u.blurSize = n.get("blurSize"), u.pointSize = n.get("pointSize"), u.minOpacity = n.get("minOpacity"), u.maxOpacity = n.get("maxOpacity");
      var c = r.getViewRect().clone(), f = r.getRoamTransform();
      c.applyTransform(f);
      var d = Math.max(c.x, 0), h = Math.max(c.y, 0), p = Math.min(c.width + c.x, a.getWidth()), v = Math.min(c.height + c.y, a.getHeight()), g = p - d, m = v - h, y = [l.mapDimension("lng"), l.mapDimension("lat"), l.mapDimension("value")], b = l.mapArray(y, function(C, A, M) {
        var D = r.dataToPoint([C, A]);
        return D[0] -= d, D[1] -= h, D.push(M), D;
      }), w = i.getExtent(), _ = i.type === "visualMap.continuous" ? cge(w, i.option.range) : uge(w, i.getPieceList(), i.option.selected);
      u.update(b, g, m, o.color.getNormalizer(), {
        inRange: o.color.getColorMapper(),
        outOfRange: s.color.getColorMapper()
      }, _);
      var S = new Ar({
        style: {
          width: g,
          height: m,
          x: d,
          y: h,
          image: u.canvas
        },
        silent: !0
      });
      this.group.add(S);
    }, t.type = "heatmap", t;
  }(It)
), dge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      return pa(null, this, {
        generateCoord: "value"
      });
    }, t.prototype.preventIncremental = function() {
      var r = Kl.get(this.get("coordinateSystem"));
      if (r && r.dimensions)
        return r.dimensions[0] === "lng" && r.dimensions[1] === "lat";
    }, t.type = "series.heatmap", t.dependencies = ["grid", "geo", "calendar"], t.defaultOption = {
      coordinateSystem: "cartesian2d",
      // zlevel: 0,
      z: 2,
      // Cartesian coordinate system
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      // Geo coordinate system
      geoIndex: 0,
      blurSize: 30,
      pointSize: 20,
      maxOpacity: 1,
      minOpacity: 0,
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      }
    }, t;
  }(zt)
);
function hge(e) {
  e.registerChartView(fge), e.registerSeriesModel(dge);
}
var pge = ["itemStyle", "borderWidth"], h3 = [{
  xy: "x",
  wh: "width",
  index: 0,
  posDesc: ["left", "right"]
}, {
  xy: "y",
  wh: "height",
  index: 1,
  posDesc: ["top", "bottom"]
}], lb = new da(), vge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = this.group, o = r.getData(), s = this._data, l = r.coordinateSystem, u = l.getBaseAxis(), c = u.isHorizontal(), f = l.master.getRect(), d = {
        ecSize: {
          width: i.getWidth(),
          height: i.getHeight()
        },
        seriesModel: r,
        coordSys: l,
        coordSysExtent: [[f.x, f.x + f.width], [f.y, f.y + f.height]],
        isHorizontal: c,
        valueDim: h3[+c],
        categoryDim: h3[1 - +c]
      };
      o.diff(s).add(function(p) {
        if (o.hasValue(p)) {
          var v = v3(o, p), g = p3(o, p, v, d), m = g3(o, d, g);
          o.setItemGraphicEl(p, m), a.add(m), y3(m, d, g);
        }
      }).update(function(p, v) {
        var g = s.getItemGraphicEl(v);
        if (!o.hasValue(p)) {
          a.remove(g);
          return;
        }
        var m = v3(o, p), y = p3(o, p, m, d), b = dj(o, y);
        g && b !== g.__pictorialShapeStr && (a.remove(g), o.setItemGraphicEl(p, null), g = null), g ? _ge(g, d, y) : g = g3(o, d, y, !0), o.setItemGraphicEl(p, g), g.__pictorialSymbolMeta = y, a.add(g), y3(g, d, y);
      }).remove(function(p) {
        var v = s.getItemGraphicEl(p);
        v && m3(s, p, v.__pictorialSymbolMeta.animationModel, v);
      }).execute();
      var h = r.get("clip", !0) ? fp(r.coordinateSystem, !1, r) : null;
      return h ? a.setClipPath(h) : a.removeClipPath(), this._data = o, this.group;
    }, t.prototype.remove = function(r, n) {
      var i = this.group, a = this._data;
      r.get("animation") ? a && a.eachItemGraphicEl(function(o) {
        m3(a, He(o).dataIndex, r, o);
      }) : i.removeAll();
    }, t.type = "pictorialBar", t;
  }(It)
);
function p3(e, t, r, n) {
  var i = e.getItemLayout(t), a = r.get("symbolRepeat"), o = r.get("symbolClip"), s = r.get("symbolPosition") || "start", l = r.get("symbolRotate"), u = (l || 0) * Math.PI / 180 || 0, c = r.get("symbolPatternSize") || 2, f = r.isAnimationEnabled(), d = {
    dataIndex: t,
    layout: i,
    itemModel: r,
    symbolType: e.getItemVisual(t, "symbol") || "circle",
    style: e.getItemVisual(t, "style"),
    symbolClip: o,
    symbolRepeat: a,
    symbolRepeatDirection: r.get("symbolRepeatDirection"),
    symbolPatternSize: c,
    rotation: u,
    animationModel: f ? r : null,
    hoverScale: f && r.get(["emphasis", "scale"]),
    z2: r.getShallow("z", !0) || 0
  };
  gge(r, a, i, n, d), mge(e, t, i, a, o, d.boundingLength, d.pxSign, c, n, d), yge(r, d.symbolScale, u, n, d);
  var h = d.symbolSize, p = ql(r.get("symbolOffset"), h);
  return xge(r, h, i, a, o, p, s, d.valueLineWidth, d.boundingLength, d.repeatCutLength, n, d), d;
}
function gge(e, t, r, n, i) {
  var a = n.valueDim, o = e.get("symbolBoundingData"), s = n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()), l = s.toGlobalCoord(s.dataToCoord(0)), u = 1 - +(r[a.wh] <= 0), c;
  if (le(o)) {
    var f = [ub(s, o[0]) - l, ub(s, o[1]) - l];
    f[1] < f[0] && f.reverse(), c = f[u];
  } else o != null ? c = ub(s, o) - l : t ? c = n.coordSysExtent[a.index][u] - l : c = r[a.wh];
  i.boundingLength = c, t && (i.repeatCutLength = r[a.wh]);
  var d = a.xy === "x", h = s.inverse;
  i.pxSign = d && !h || !d && h ? c >= 0 ? 1 : -1 : c > 0 ? 1 : -1;
}
function ub(e, t) {
  return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)));
}
function mge(e, t, r, n, i, a, o, s, l, u) {
  var c = l.valueDim, f = l.categoryDim, d = Math.abs(r[f.wh]), h = e.getItemVisual(t, "symbolSize"), p;
  le(h) ? p = h.slice() : h == null ? p = ["100%", "100%"] : p = [h, h], p[f.index] = pe(p[f.index], d), p[c.index] = pe(p[c.index], n ? d : Math.abs(a)), u.symbolSize = p;
  var v = u.symbolScale = [p[0] / s, p[1] / s];
  v[c.index] *= (l.isHorizontal ? -1 : 1) * o;
}
function yge(e, t, r, n, i) {
  var a = e.get(pge) || 0;
  a && (lb.attr({
    scaleX: t[0],
    scaleY: t[1],
    rotation: r
  }), lb.updateTransform(), a /= lb.getLineScale(), a *= t[n.valueDim.index]), i.valueLineWidth = a || 0;
}
function xge(e, t, r, n, i, a, o, s, l, u, c, f) {
  var d = c.categoryDim, h = c.valueDim, p = f.pxSign, v = Math.max(t[h.index] + s, 0), g = v;
  if (n) {
    var m = Math.abs(l), y = ur(e.get("symbolMargin"), "15%") + "", b = !1;
    y.lastIndexOf("!") === y.length - 1 && (b = !0, y = y.slice(0, y.length - 1));
    var w = pe(y, t[h.index]), _ = Math.max(v + w * 2, 0), S = b ? 0 : w * 2, C = Py(n), A = C ? n : x3((m + S) / _), M = m - A * v;
    w = M / 2 / (b ? A : Math.max(A - 1, 1)), _ = v + w * 2, S = b ? 0 : w * 2, !C && n !== "fixed" && (A = u ? x3((Math.abs(u) + S) / _) : 0), g = A * _ - S, f.repeatTimes = A, f.symbolMargin = w;
  }
  var D = p * (g / 2), N = f.pathPosition = [];
  N[d.index] = r[d.wh] / 2, N[h.index] = o === "start" ? D : o === "end" ? l - D : l / 2, a && (N[0] += a[0], N[1] += a[1]);
  var R = f.bundlePosition = [];
  R[d.index] = r[d.xy], R[h.index] = r[h.xy];
  var O = f.barRectShape = ae({}, r);
  O[h.wh] = p * Math.max(Math.abs(r[h.wh]), Math.abs(N[h.index] + D)), O[d.wh] = r[d.wh];
  var E = f.clipShape = {};
  E[d.xy] = -r[d.xy], E[d.wh] = c.ecSize[d.wh], E[h.xy] = 0, E[h.wh] = r[h.wh];
}
function sj(e) {
  var t = e.symbolPatternSize, r = fr(
    // Consider texture img, make a big size.
    e.symbolType,
    -t / 2,
    -t / 2,
    t,
    t
  );
  return r.attr({
    culling: !0
  }), r.type !== "image" && r.setStyle({
    strokeNoScale: !0
  }), r;
}
function lj(e, t, r, n) {
  var i = e.__pictorialBundle, a = r.symbolSize, o = r.valueLineWidth, s = r.pathPosition, l = t.valueDim, u = r.repeatTimes || 0, c = 0, f = a[t.valueDim.index] + o + r.symbolMargin * 2;
  for (zT(e, function(v) {
    v.__pictorialAnimationIndex = c, v.__pictorialRepeatTimes = u, c < u ? yc(v, null, p(c), r, n) : yc(v, null, {
      scaleX: 0,
      scaleY: 0
    }, r, n, function() {
      i.remove(v);
    }), c++;
  }); c < u; c++) {
    var d = sj(r);
    d.__pictorialAnimationIndex = c, d.__pictorialRepeatTimes = u, i.add(d);
    var h = p(c);
    yc(d, {
      x: h.x,
      y: h.y,
      scaleX: 0,
      scaleY: 0
    }, {
      scaleX: h.scaleX,
      scaleY: h.scaleY,
      rotation: h.rotation
    }, r, n);
  }
  function p(v) {
    var g = s.slice(), m = r.pxSign, y = v;
    return (r.symbolRepeatDirection === "start" ? m > 0 : m < 0) && (y = u - 1 - v), g[l.index] = f * (y - u / 2 + 0.5) + s[l.index], {
      x: g[0],
      y: g[1],
      scaleX: r.symbolScale[0],
      scaleY: r.symbolScale[1],
      rotation: r.rotation
    };
  }
}
function uj(e, t, r, n) {
  var i = e.__pictorialBundle, a = e.__pictorialMainPath;
  a ? yc(a, null, {
    x: r.pathPosition[0],
    y: r.pathPosition[1],
    scaleX: r.symbolScale[0],
    scaleY: r.symbolScale[1],
    rotation: r.rotation
  }, r, n) : (a = e.__pictorialMainPath = sj(r), i.add(a), yc(a, {
    x: r.pathPosition[0],
    y: r.pathPosition[1],
    scaleX: 0,
    scaleY: 0,
    rotation: r.rotation
  }, {
    scaleX: r.symbolScale[0],
    scaleY: r.symbolScale[1]
  }, r, n));
}
function cj(e, t, r) {
  var n = ae({}, t.barRectShape), i = e.__pictorialBarRect;
  i ? yc(i, null, {
    shape: n
  }, t, r) : (i = e.__pictorialBarRect = new vt({
    z2: 2,
    shape: n,
    silent: !0,
    style: {
      stroke: "transparent",
      fill: "transparent",
      lineWidth: 0
    }
  }), i.disableMorphing = !0, e.add(i));
}
function fj(e, t, r, n) {
  if (r.symbolClip) {
    var i = e.__pictorialClipPath, a = ae({}, r.clipShape), o = t.valueDim, s = r.animationModel, l = r.dataIndex;
    if (i)
      _t(i, {
        shape: a
      }, s, l);
    else {
      a[o.wh] = 0, i = new vt({
        shape: a
      }), e.__pictorialBundle.setClipPath(i), e.__pictorialClipPath = i;
      var u = {};
      u[o.wh] = r.clipShape[o.wh], Zl[n ? "updateProps" : "initProps"](i, {
        shape: u
      }, s, l);
    }
  }
}
function v3(e, t) {
  var r = e.getItemModel(t);
  return r.getAnimationDelayParams = bge, r.isAnimationEnabled = wge, r;
}
function bge(e) {
  return {
    index: e.__pictorialAnimationIndex,
    count: e.__pictorialRepeatTimes
  };
}
function wge() {
  return this.parentModel.isAnimationEnabled() && !!this.getShallow("animation");
}
function g3(e, t, r, n) {
  var i = new Fe(), a = new Fe();
  return i.add(a), i.__pictorialBundle = a, a.x = r.bundlePosition[0], a.y = r.bundlePosition[1], r.symbolRepeat ? lj(i, t, r) : uj(i, t, r), cj(i, r, n), fj(i, t, r, n), i.__pictorialShapeStr = dj(e, r), i.__pictorialSymbolMeta = r, i;
}
function _ge(e, t, r) {
  var n = r.animationModel, i = r.dataIndex, a = e.__pictorialBundle;
  _t(a, {
    x: r.bundlePosition[0],
    y: r.bundlePosition[1]
  }, n, i), r.symbolRepeat ? lj(e, t, r, !0) : uj(e, t, r, !0), cj(e, r, !0), fj(e, t, r, !0);
}
function m3(e, t, r, n) {
  var i = n.__pictorialBarRect;
  i && i.removeTextContent();
  var a = [];
  zT(n, function(o) {
    a.push(o);
  }), n.__pictorialMainPath && a.push(n.__pictorialMainPath), n.__pictorialClipPath && (r = null), j(a, function(o) {
    ls(o, {
      scaleX: 0,
      scaleY: 0
    }, r, t, function() {
      n.parent && n.parent.remove(n);
    });
  }), e.setItemGraphicEl(t, null);
}
function dj(e, t) {
  return [e.getItemVisual(t.dataIndex, "symbol") || "none", !!t.symbolRepeat, !!t.symbolClip].join(":");
}
function zT(e, t, r) {
  j(e.__pictorialBundle.children(), function(n) {
    n !== e.__pictorialBarRect && t.call(r, n);
  });
}
function yc(e, t, r, n, i, a) {
  t && e.attr(t), n.symbolClip && !i ? r && e.attr(r) : r && Zl[i ? "updateProps" : "initProps"](e, r, n.animationModel, n.dataIndex, a);
}
function y3(e, t, r) {
  var n = r.dataIndex, i = r.itemModel, a = i.getModel("emphasis"), o = a.getModel("itemStyle").getItemStyle(), s = i.getModel(["blur", "itemStyle"]).getItemStyle(), l = i.getModel(["select", "itemStyle"]).getItemStyle(), u = i.getShallow("cursor"), c = a.get("focus"), f = a.get("blurScope"), d = a.get("scale");
  zT(e, function(v) {
    if (v instanceof Ar) {
      var g = v.style;
      v.useStyle(ae({
        // TODO other properties like dx, dy ?
        image: g.image,
        x: g.x,
        y: g.y,
        width: g.width,
        height: g.height
      }, r.style));
    } else
      v.useStyle(r.style);
    var m = v.ensureState("emphasis");
    m.style = o, d && (m.scaleX = v.scaleX * 1.1, m.scaleY = v.scaleY * 1.1), v.ensureState("blur").style = s, v.ensureState("select").style = l, u && (v.cursor = u), v.z2 = r.z2;
  });
  var h = t.valueDim.posDesc[+(r.boundingLength > 0)], p = e.__pictorialBarRect;
  p.ignoreClip = !0, Br(p, Cr(i), {
    labelFetcher: t.seriesModel,
    labelDataIndex: n,
    defaultText: zc(t.seriesModel.getData(), n),
    inheritColor: r.style.fill,
    defaultOpacity: r.style.opacity,
    defaultOutsidePosition: h
  }), Jt(e, c, f, a.get("disabled"));
}
function x3(e) {
  var t = Math.round(e);
  return Math.abs(e - t) < 1e-4 ? t : Math.ceil(e);
}
var Sge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.hasSymbolVisual = !0, r.defaultSymbol = "roundRect", r;
    }
    return t.prototype.getInitialData = function(r) {
      return r.stack = null, e.prototype.getInitialData.apply(this, arguments);
    }, t.type = "series.pictorialBar", t.dependencies = ["grid"], t.defaultOption = ms(Ah.defaultOption, {
      symbol: "circle",
      symbolSize: null,
      symbolRotate: null,
      symbolPosition: null,
      symbolOffset: null,
      symbolMargin: null,
      symbolRepeat: !1,
      symbolRepeatDirection: "end",
      symbolClip: !1,
      symbolBoundingData: null,
      symbolPatternSize: 400,
      barGap: "-100%",
      // Pictorial bar do not clip by default because in many cases
      // xAxis and yAxis are not displayed and it's expected not to clip
      clip: !1,
      // z can be set in data item, which is z2 actually.
      // Disable progressive
      progressive: 0,
      emphasis: {
        // By default pictorialBar do not hover scale. Hover scale is not suitable
        // for the case that both has foreground and background.
        scale: !1
      },
      select: {
        itemStyle: {
          borderColor: "#212121"
        }
      }
    }), t;
  }(Ah)
);
function Cge(e) {
  e.registerChartView(vge), e.registerSeriesModel(Sge), e.registerLayout(e.PRIORITY.VISUAL.LAYOUT, We(X8, "pictorialBar")), e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, K8("pictorialBar"));
}
var Tge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._layers = [], r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = r.getData(), o = this, s = this.group, l = r.getLayerSeries(), u = a.getLayout("layoutInfo"), c = u.rect, f = u.boundaryGap;
      s.x = 0, s.y = c.y + f[0];
      function d(g) {
        return g.name;
      }
      var h = new Ja(this._layersSeries || [], l, d, d), p = [];
      h.add(xe(v, this, "add")).update(xe(v, this, "update")).remove(xe(v, this, "remove")).execute();
      function v(g, m, y) {
        var b = o._layers;
        if (g === "remove") {
          s.remove(b[m]);
          return;
        }
        for (var w = [], _ = [], S, C = l[m].indices, A = 0; A < C.length; A++) {
          var M = a.getItemLayout(C[A]), D = M.x, N = M.y0, R = M.y;
          w.push(D, N), _.push(D, N + R), S = a.getItemVisual(C[A], "style");
        }
        var O, E = a.getItemLayout(C[0]), L = r.getModel("label"), I = L.get("margin"), P = r.getModel("emphasis");
        if (g === "add") {
          var k = p[m] = new Fe();
          O = new jO({
            shape: {
              points: w,
              stackedOnPoints: _,
              smooth: 0.4,
              stackedOnSmooth: 0.4,
              smoothConstraint: !1
            },
            z2: 0
          }), k.add(O), s.add(k), r.isAnimationEnabled() && O.setClipPath(Age(O.getBoundingRect(), r, function() {
            O.removeClipPath();
          }));
        } else {
          var k = b[y];
          O = k.childAt(0), s.add(k), p[m] = k, _t(O, {
            shape: {
              points: w,
              stackedOnPoints: _
            }
          }, r), Li(O);
        }
        Br(O, Cr(r), {
          labelDataIndex: C[A - 1],
          defaultText: a.getName(C[A - 1]),
          inheritColor: S.fill
        }, {
          normal: {
            verticalAlign: "middle"
            // align: 'right'
          }
        }), O.setTextConfig({
          position: null,
          local: !0
        });
        var z = O.getTextContent();
        z && (z.x = E.x - I, z.y = E.y0 + E.y / 2), O.useStyle(S), a.setItemGraphicEl(m, O), Vr(O, r), Jt(O, P.get("focus"), P.get("blurScope"), P.get("disabled"));
      }
      this._layersSeries = l, this._layers = p;
    }, t.type = "themeRiver", t;
  }(It)
);
function Age(e, t, r) {
  var n = new vt({
    shape: {
      x: e.x - 10,
      y: e.y - 10,
      width: 0,
      height: e.height + 20
    }
  });
  return Wt(n, {
    shape: {
      x: e.x - 50,
      width: e.width + 100,
      height: e.height + 20
    }
  }, t, r), n;
}
var cb = 2, Mge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r) {
      e.prototype.init.apply(this, arguments), this.legendVisualProvider = new pp(xe(this.getData, this), xe(this.getRawData, this));
    }, t.prototype.fixData = function(r) {
      var n = r.length, i = {}, a = ow(r, function(d) {
        return i.hasOwnProperty(d[0] + "") || (i[d[0] + ""] = -1), d[2];
      }), o = [];
      a.buckets.each(function(d, h) {
        o.push({
          name: h,
          dataList: d
        });
      });
      for (var s = o.length, l = 0; l < s; ++l) {
        for (var u = o[l].name, c = 0; c < o[l].dataList.length; ++c) {
          var f = o[l].dataList[c][0] + "";
          i[f] = l;
        }
        for (var f in i)
          i.hasOwnProperty(f) && i[f] !== l && (i[f] = l, r[n] = [f, 0, u], n++);
      }
      return r;
    }, t.prototype.getInitialData = function(r, n) {
      for (var i = this.getReferringComponents("singleAxis", pr).models[0], a = i.get("type"), o = Ct(r.data, function(p) {
        return p[2] !== void 0;
      }), s = this.fixData(o || []), l = [], u = this.nameMap = Ce(), c = 0, f = 0; f < s.length; ++f)
        l.push(s[f][cb]), u.get(s[f][cb]) || (u.set(s[f][cb], c), c++);
      var d = yf(s, {
        coordDimensions: ["single"],
        dimensionsDefine: [{
          name: "time",
          type: _m(a)
        }, {
          name: "value",
          type: "float"
        }, {
          name: "name",
          type: "ordinal"
        }],
        encodeDefine: {
          single: 0,
          value: 1,
          itemName: 2
        }
      }).dimensions, h = new Xr(d, this);
      return h.initData(s), h;
    }, t.prototype.getLayerSeries = function() {
      for (var r = this.getData(), n = r.count(), i = [], a = 0; a < n; ++a)
        i[a] = a;
      var o = r.mapDimension("single"), s = ow(i, function(u) {
        return r.get("name", u);
      }), l = [];
      return s.buckets.each(function(u, c) {
        u.sort(function(f, d) {
          return r.get(o, f) - r.get(o, d);
        }), l.push({
          name: c,
          indices: u
        });
      }), l;
    }, t.prototype.getAxisTooltipData = function(r, n, i) {
      le(r) || (r = r ? [r] : []);
      for (var a = this.getData(), o = this.getLayerSeries(), s = [], l = o.length, u, c = 0; c < l; ++c) {
        for (var f = Number.MAX_VALUE, d = -1, h = o[c].indices.length, p = 0; p < h; ++p) {
          var v = a.get(r[0], o[c].indices[p]), g = Math.abs(v - n);
          g <= f && (u = v, f = g, d = o[c].indices[p]);
        }
        s.push(d);
      }
      return {
        dataIndices: s,
        nestestValue: u
      };
    }, t.prototype.formatTooltip = function(r, n, i) {
      var a = this.getData(), o = a.getName(r), s = a.get(a.mapDimension("value"), r);
      return Tr("nameValue", {
        name: o,
        value: s
      });
    }, t.type = "series.themeRiver", t.dependencies = ["singleAxis"], t.defaultOption = {
      // zlevel: 0,
      z: 2,
      colorBy: "data",
      coordinateSystem: "singleAxis",
      // gap in axis's orthogonal orientation
      boundaryGap: ["10%", "10%"],
      // legendHoverLink: true,
      singleAxisIndex: 0,
      animationEasing: "linear",
      label: {
        margin: 4,
        show: !0,
        position: "left",
        fontSize: 11
      },
      emphasis: {
        label: {
          show: !0
        }
      }
    }, t;
  }(zt)
);
function Ege(e, t) {
  e.eachSeriesByType("themeRiver", function(r) {
    var n = r.getData(), i = r.coordinateSystem, a = {}, o = i.getRect();
    a.rect = o;
    var s = r.get("boundaryGap"), l = i.getAxis();
    if (a.boundaryGap = s, l.orient === "horizontal") {
      s[0] = pe(s[0], o.height), s[1] = pe(s[1], o.height);
      var u = o.height - s[0] - s[1];
      b3(n, r, u);
    } else {
      s[0] = pe(s[0], o.width), s[1] = pe(s[1], o.width);
      var c = o.width - s[0] - s[1];
      b3(n, r, c);
    }
    n.setLayout("layoutInfo", a);
  });
}
function b3(e, t, r) {
  if (e.count())
    for (var n = t.coordinateSystem, i = t.getLayerSeries(), a = e.mapDimension("single"), o = e.mapDimension("value"), s = ue(i, function(g) {
      return ue(g.indices, function(m) {
        var y = n.dataToPoint(e.get(a, m));
        return y[1] = e.get(o, m), y;
      });
    }), l = Dge(s), u = l.y0, c = r / l.max, f = i.length, d = i[0].indices.length, h, p = 0; p < d; ++p) {
      h = u[p] * c, e.setItemLayout(i[0].indices[p], {
        layerIndex: 0,
        x: s[0][p][0],
        y0: h,
        y: s[0][p][1] * c
      });
      for (var v = 1; v < f; ++v)
        h += s[v - 1][p][1] * c, e.setItemLayout(i[v].indices[p], {
          layerIndex: v,
          x: s[v][p][0],
          y0: h,
          y: s[v][p][1] * c
        });
    }
}
function Dge(e) {
  for (var t = e.length, r = e[0].length, n = [], i = [], a = 0, o = 0; o < r; ++o) {
    for (var s = 0, l = 0; l < t; ++l)
      s += e[l][o][1];
    s > a && (a = s), n.push(s);
  }
  for (var u = 0; u < r; ++u)
    i[u] = (a - n[u]) / 2;
  a = 0;
  for (var c = 0; c < r; ++c) {
    var f = n[c] + i[c];
    f > a && (a = f);
  }
  return {
    y0: i,
    max: a
  };
}
function Nge(e) {
  e.registerChartView(Tge), e.registerSeriesModel(Mge), e.registerLayout(Ege), e.registerProcessor(hp("themeRiver"));
}
var Ige = 2, Lge = 4, w3 = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a) {
      var o = e.call(this) || this;
      o.z2 = Ige, o.textConfig = {
        inside: !0
      }, He(o).seriesIndex = n.seriesIndex;
      var s = new pt({
        z2: Lge,
        silent: r.getModel().get(["label", "silent"])
      });
      return o.setTextContent(s), o.updateData(!0, r, n, i, a), o;
    }
    return t.prototype.updateData = function(r, n, i, a, o) {
      this.node = n, n.piece = this, i = i || this._seriesModel, a = a || this._ecModel;
      var s = this;
      He(s).dataIndex = n.dataIndex;
      var l = n.getModel(), u = l.getModel("emphasis"), c = n.getLayout(), f = ae({}, c);
      f.label = null;
      var d = n.getVisual("style");
      d.lineJoin = "bevel";
      var h = n.getVisual("decal");
      h && (d.decal = Oc(h, o));
      var p = ml(l.getModel("itemStyle"), f, !0);
      ae(f, p), j(un, function(y) {
        var b = s.ensureState(y), w = l.getModel([y, "itemStyle"]);
        b.style = w.getItemStyle();
        var _ = ml(w, f);
        _ && (b.shape = _);
      }), r ? (s.setShape(f), s.shape.r = c.r0, Wt(s, {
        shape: {
          r: c.r
        }
      }, i, n.dataIndex)) : (_t(s, {
        shape: f
      }, i), Li(s)), s.useStyle(d), this._updateLabel(i);
      var v = l.getShallow("cursor");
      v && s.attr("cursor", v), this._seriesModel = i || this._seriesModel, this._ecModel = a || this._ecModel;
      var g = u.get("focus"), m = g === "relative" ? Nc(n.getAncestorsIndices(), n.getDescendantIndices()) : g === "ancestor" ? n.getAncestorsIndices() : g === "descendant" ? n.getDescendantIndices() : g;
      Jt(this, m, u.get("blurScope"), u.get("disabled"));
    }, t.prototype._updateLabel = function(r) {
      var n = this, i = this.node.getModel(), a = i.getModel("label"), o = this.node.getLayout(), s = o.endAngle - o.startAngle, l = (o.startAngle + o.endAngle) / 2, u = Math.cos(l), c = Math.sin(l), f = this, d = f.getTextContent(), h = this.node.dataIndex, p = a.get("minAngle") / 180 * Math.PI, v = a.get("show") && !(p != null && Math.abs(s) < p);
      d.ignore = !v, j(vh, function(m) {
        var y = m === "normal" ? i.getModel("label") : i.getModel([m, "label"]), b = m === "normal", w = b ? d : d.ensureState(m), _ = r.getFormattedLabel(h, m);
        b && (_ = _ || n.node.name), w.style = Vt(y, {}, null, m !== "normal", !0), _ && (w.style.text = _);
        var S = y.get("show");
        S != null && !b && (w.ignore = !S);
        var C = g(y, "position"), A = b ? f : f.states[m], M = A.style.fill;
        A.textConfig = {
          outsideFill: y.get("color") === "inherit" ? M : null,
          inside: C !== "outside"
        };
        var D, N = g(y, "distance") || 0, R = g(y, "align"), O = g(y, "rotate"), E = Math.PI * 0.5, L = Math.PI * 1.5, I = Mn(O === "tangential" ? Math.PI / 2 - l : l), P = I > E && !Ic(I - E) && I < L;
        C === "outside" ? (D = o.r + N, R = P ? "right" : "left") : !R || R === "center" ? (s === 2 * Math.PI && o.r0 === 0 ? D = 0 : D = (o.r + o.r0) / 2, R = "center") : R === "left" ? (D = o.r0 + N, R = P ? "right" : "left") : R === "right" && (D = o.r - N, R = P ? "left" : "right"), w.style.align = R, w.style.verticalAlign = g(y, "verticalAlign") || "middle", w.x = D * u + o.cx, w.y = D * c + o.cy;
        var k = 0;
        O === "radial" ? k = Mn(-l) + (P ? Math.PI : 0) : O === "tangential" ? k = Mn(Math.PI / 2 - l) + (P ? Math.PI : 0) : bt(O) && (k = O * Math.PI / 180), w.rotation = Mn(k);
      });
      function g(m, y) {
        var b = m.get(y);
        return b ?? a.get(y);
      }
      d.dirtyStyle();
    }, t;
  }(qr)
), l_ = "sunburstRootToNode", _3 = "sunburstHighlight", Rge = "sunburstUnhighlight";
function Pge(e) {
  e.registerAction({
    type: l_,
    update: "updateView"
  }, function(t, r) {
    r.eachComponent({
      mainType: "series",
      subType: "sunburst",
      query: t
    }, n);
    function n(i, a) {
      var o = Eh(t, [l_], i);
      if (o) {
        var s = i.getViewRoot();
        s && (t.direction = wT(s, o.node) ? "rollUp" : "drillDown"), i.resetViewRoot(o.node);
      }
    }
  }), e.registerAction({
    type: _3,
    update: "none"
  }, function(t, r, n) {
    t = ae({}, t), r.eachComponent({
      mainType: "series",
      subType: "sunburst",
      query: t
    }, i);
    function i(a) {
      var o = Eh(t, [_3], a);
      o && (t.dataIndex = o.node.dataIndex);
    }
    process.env.NODE_ENV !== "production" && sr("sunburstHighlight", "highlight"), n.dispatchAction(ae(t, {
      type: "highlight"
    }));
  }), e.registerAction({
    type: Rge,
    update: "updateView"
  }, function(t, r, n) {
    t = ae({}, t), process.env.NODE_ENV !== "production" && sr("sunburstUnhighlight", "downplay"), n.dispatchAction(ae(t, {
      type: "downplay"
    }));
  });
}
var kge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      var o = this;
      this.seriesModel = r, this.api = i, this.ecModel = n;
      var s = r.getData(), l = s.tree.root, u = r.getViewRoot(), c = this.group, f = r.get("renderLabelForZeroData"), d = [];
      u.eachNode(function(y) {
        d.push(y);
      });
      var h = this._oldChildren || [];
      p(d, h), m(l, u), this._initEvents(), this._oldChildren = d;
      function p(y, b) {
        if (y.length === 0 && b.length === 0)
          return;
        new Ja(b, y, w, w).add(_).update(_).remove(We(_, null)).execute();
        function w(S) {
          return S.getId();
        }
        function _(S, C) {
          var A = S == null ? null : y[S], M = C == null ? null : b[C];
          v(A, M);
        }
      }
      function v(y, b) {
        if (!f && y && !y.getValue() && (y = null), y !== l && b !== l) {
          if (b && b.piece)
            y ? (b.piece.updateData(!1, y, r, n, i), s.setItemGraphicEl(y.dataIndex, b.piece)) : g(b);
          else if (y) {
            var w = new w3(y, r, n, i);
            c.add(w), s.setItemGraphicEl(y.dataIndex, w);
          }
        }
      }
      function g(y) {
        y && y.piece && (c.remove(y.piece), y.piece = null);
      }
      function m(y, b) {
        b.depth > 0 ? (o.virtualPiece ? o.virtualPiece.updateData(!1, y, r, n, i) : (o.virtualPiece = new w3(y, r, n, i), c.add(o.virtualPiece)), b.piece.off("click"), o.virtualPiece.on("click", function(w) {
          o._rootToNode(b.parentNode);
        })) : o.virtualPiece && (c.remove(o.virtualPiece), o.virtualPiece = null);
      }
    }, t.prototype._initEvents = function() {
      var r = this;
      this.group.off("click"), this.group.on("click", function(n) {
        var i = !1, a = r.seriesModel.getViewRoot();
        a.eachNode(function(o) {
          if (!i && o.piece && o.piece === n.target) {
            var s = o.getModel().get("nodeClick");
            if (s === "rootToNode")
              r._rootToNode(o);
            else if (s === "link") {
              var l = o.getModel(), u = l.get("link");
              if (u) {
                var c = l.get("target", !0) || "_blank";
                cm(u, c);
              }
            }
            i = !0;
          }
        });
      });
    }, t.prototype._rootToNode = function(r) {
      r !== this.seriesModel.getViewRoot() && this.api.dispatchAction({
        type: l_,
        from: this.uid,
        seriesId: this.seriesModel.id,
        targetNode: r
      });
    }, t.prototype.containPoint = function(r, n) {
      var i = n.getData(), a = i.getItemLayout(0);
      if (a) {
        var o = r[0] - a.cx, s = r[1] - a.cy, l = Math.sqrt(o * o + s * s);
        return l <= a.r && l >= a.r0;
      }
    }, t.type = "sunburst", t;
  }(It)
), Oge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.ignoreStyleOnData = !0, r;
    }
    return t.prototype.getInitialData = function(r, n) {
      var i = {
        name: r.name,
        children: r.data
      };
      hj(i);
      var a = this._levelModels = ue(r.levels || [], function(l) {
        return new Tt(l, this, n);
      }, this), o = bT.createTree(i, this, s);
      function s(l) {
        l.wrapMethod("getItemModel", function(u, c) {
          var f = o.getNodeByDataIndex(c), d = a[f.depth];
          return d && (u.parentModel = d), u;
        });
      }
      return o.data;
    }, t.prototype.optionUpdated = function() {
      this.resetViewRoot();
    }, t.prototype.getDataParams = function(r) {
      var n = e.prototype.getDataParams.apply(this, arguments), i = this.getData().tree.getNodeByDataIndex(r);
      return n.treePathInfo = c0(i, this), n;
    }, t.prototype.getLevelModel = function(r) {
      return this._levelModels && this._levelModels[r.depth];
    }, t.prototype.getViewRoot = function() {
      return this._viewRoot;
    }, t.prototype.resetViewRoot = function(r) {
      r ? this._viewRoot = r : r = this._viewRoot;
      var n = this.getRawData().tree.root;
      (!r || r !== n && !n.contains(r)) && (this._viewRoot = n);
    }, t.prototype.enableAriaDecal = function() {
      yz(this);
    }, t.type = "series.sunburst", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      // 默认全局居中
      center: ["50%", "50%"],
      radius: [0, "75%"],
      // 默认顺时针
      clockwise: !0,
      startAngle: 90,
      // 最小角度改为0
      minAngle: 0,
      // If still show when all data zero.
      stillShowZeroSum: !0,
      // 'rootToNode', 'link', or false
      nodeClick: "rootToNode",
      renderLabelForZeroData: !1,
      label: {
        // could be: 'radial', 'tangential', or 'none'
        rotate: "radial",
        show: !0,
        opacity: 1,
        // 'left' is for inner side of inside, and 'right' is for outer
        // side for inside
        align: "center",
        position: "inside",
        distance: 5,
        silent: !0
      },
      itemStyle: {
        borderWidth: 1,
        borderColor: "white",
        borderType: "solid",
        shadowBlur: 0,
        shadowColor: "rgba(0, 0, 0, 0.2)",
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        opacity: 1
      },
      emphasis: {
        focus: "descendant"
      },
      blur: {
        itemStyle: {
          opacity: 0.2
        },
        label: {
          opacity: 0.1
        }
      },
      // Animation type can be expansion, scale.
      animationType: "expansion",
      animationDuration: 1e3,
      animationDurationUpdate: 500,
      data: [],
      /**
       * Sort order.
       *
       * Valid values: 'desc', 'asc', null, or callback function.
       * 'desc' and 'asc' for descend and ascendant order;
       * null for not sorting;
       * example of callback function:
       * function(nodeA, nodeB) {
       *     return nodeA.getValue() - nodeB.getValue();
       * }
       */
      sort: "desc"
    }, t;
  }(zt)
);
function hj(e) {
  var t = 0;
  j(e.children, function(n) {
    hj(n);
    var i = n.value;
    le(i) && (i = i[0]), t += i;
  });
  var r = e.value;
  le(r) && (r = r[0]), (r == null || isNaN(r)) && (r = t), r < 0 && (r = 0), le(e.value) ? e.value[0] = r : e.value = r;
}
var S3 = Math.PI / 180;
function zge(e, t, r) {
  t.eachSeriesByType(e, function(n) {
    var i = n.get("center"), a = n.get("radius");
    le(a) || (a = [0, a]), le(i) || (i = [i, i]);
    var o = r.getWidth(), s = r.getHeight(), l = Math.min(o, s), u = pe(i[0], o), c = pe(i[1], s), f = pe(a[0], l / 2), d = pe(a[1], l / 2), h = -n.get("startAngle") * S3, p = n.get("minAngle") * S3, v = n.getData().tree.root, g = n.getViewRoot(), m = g.depth, y = n.get("sort");
    y != null && pj(g, y);
    var b = 0;
    j(g.children, function(I) {
      !isNaN(I.getValue()) && b++;
    });
    var w = g.getValue(), _ = Math.PI / (w || b) * 2, S = g.depth > 0, C = g.height - (S ? -1 : 1), A = (d - f) / (C || 1), M = n.get("clockwise"), D = n.get("stillShowZeroSum"), N = M ? 1 : -1, R = function(I, P) {
      if (I) {
        var k = P;
        if (I !== v) {
          var z = I.getValue(), V = w === 0 && D ? _ : z * _;
          V < p && (V = p), k = P + N * V;
          var B = I.depth - m - (S ? -1 : 1), F = f + A * B, H = f + A * (B + 1), G = n.getLevelModel(I);
          if (G) {
            var W = G.get("r0", !0), X = G.get("r", !0), q = G.get("radius", !0);
            q != null && (W = q[0], X = q[1]), W != null && (F = pe(W, l / 2)), X != null && (H = pe(X, l / 2));
          }
          I.setLayout({
            angle: V,
            startAngle: P,
            endAngle: k,
            clockwise: M,
            cx: u,
            cy: c,
            r0: F,
            r: H
          });
        }
        if (I.children && I.children.length) {
          var J = 0;
          j(I.children, function(U) {
            J += R(U, P + J);
          });
        }
        return k - P;
      }
    };
    if (S) {
      var O = f, E = f + A, L = Math.PI * 2;
      v.setLayout({
        angle: L,
        startAngle: h,
        endAngle: h + L,
        clockwise: M,
        cx: u,
        cy: c,
        r0: O,
        r: E
      });
    }
    R(g, h);
  });
}
function pj(e, t) {
  var r = e.children || [];
  e.children = jge(r, t), r.length && j(e.children, function(n) {
    pj(n, t);
  });
}
function jge(e, t) {
  if (Ee(t)) {
    var r = ue(e, function(i, a) {
      var o = i.getValue();
      return {
        params: {
          depth: i.depth,
          height: i.height,
          dataIndex: i.dataIndex,
          getValue: function() {
            return o;
          }
        },
        index: a
      };
    });
    return r.sort(function(i, a) {
      return t(i.params, a.params);
    }), ue(r, function(i) {
      return e[i.index];
    });
  } else {
    var n = t === "asc";
    return e.sort(function(i, a) {
      var o = (i.getValue() - a.getValue()) * (n ? 1 : -1);
      return o === 0 ? (i.dataIndex - a.dataIndex) * (n ? -1 : 1) : o;
    });
  }
}
function Vge(e) {
  var t = {};
  function r(n, i, a) {
    for (var o = n; o && o.depth > 1; )
      o = o.parentNode;
    var s = i.getColorFromPalette(o.name || o.dataIndex + "", t);
    return n.depth > 1 && ge(s) && (s = qg(s, (n.depth - 1) / (a - 1) * 0.5)), s;
  }
  e.eachSeriesByType("sunburst", function(n) {
    var i = n.getData(), a = i.tree;
    a.eachNode(function(o) {
      var s = o.getModel(), l = s.getModel("itemStyle").getItemStyle();
      l.fill || (l.fill = r(o, n, a.root.height));
      var u = i.ensureUniqueItemVisual(o.dataIndex, "style");
      ae(u, l);
    });
  });
}
function Bge(e) {
  e.registerChartView(kge), e.registerSeriesModel(Oge), e.registerLayout(We(zge, "sunburst")), e.registerProcessor(We(hp, "sunburst")), e.registerVisual(Vge), Pge(e);
}
var C3 = {
  color: "fill",
  borderColor: "stroke"
}, Fge = {
  symbol: 1,
  symbolSize: 1,
  symbolKeepAspect: 1,
  legendIcon: 1,
  visualMeta: 1,
  liftZ: 1,
  decal: 1
}, Ha = yt(), $ge = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.optionUpdated = function() {
      this.currentZLevel = this.get("zlevel", !0), this.currentZ = this.get("z", !0);
    }, t.prototype.getInitialData = function(r, n) {
      return pa(null, this);
    }, t.prototype.getDataParams = function(r, n, i) {
      var a = e.prototype.getDataParams.call(this, r, n);
      return i && (a.info = Ha(i).info), a;
    }, t.type = "series.custom", t.dependencies = ["grid", "polar", "geo", "singleAxis", "calendar"], t.defaultOption = {
      coordinateSystem: "cartesian2d",
      // zlevel: 0,
      z: 2,
      legendHoverLink: !0,
      // Custom series will not clip by default.
      // Some case will use custom series to draw label
      // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight
      clip: !1
      // Cartesian coordinate system
      // xAxisIndex: 0,
      // yAxisIndex: 0,
      // Polar coordinate system
      // polarIndex: 0,
      // Geo coordinate system
      // geoIndex: 0,
    }, t;
  }(zt)
);
function Hge(e, t) {
  return t = t || [0, 0], ue(["x", "y"], function(r, n) {
    var i = this.getAxis(r), a = t[n], o = e[n] / 2;
    return i.type === "category" ? i.getBandWidth() : Math.abs(i.dataToCoord(a - o) - i.dataToCoord(a + o));
  }, this);
}
function Gge(e) {
  var t = e.master.getRect();
  return {
    coordSys: {
      // The name exposed to user is always 'cartesian2d' but not 'grid'.
      type: "cartesian2d",
      x: t.x,
      y: t.y,
      width: t.width,
      height: t.height
    },
    api: {
      coord: function(r) {
        return e.dataToPoint(r);
      },
      size: xe(Hge, e)
    }
  };
}
function Wge(e, t) {
  return t = t || [0, 0], ue([0, 1], function(r) {
    var n = t[r], i = e[r] / 2, a = [], o = [];
    return a[r] = n - i, o[r] = n + i, a[1 - r] = o[1 - r] = t[1 - r], Math.abs(this.dataToPoint(a)[r] - this.dataToPoint(o)[r]);
  }, this);
}
function Uge(e) {
  var t = e.getBoundingRect();
  return {
    coordSys: {
      type: "geo",
      x: t.x,
      y: t.y,
      width: t.width,
      height: t.height,
      zoom: e.getZoom()
    },
    api: {
      coord: function(r) {
        return e.dataToPoint(r);
      },
      size: xe(Wge, e)
    }
  };
}
function Yge(e, t) {
  var r = this.getAxis(), n = t instanceof Array ? t[0] : t, i = (e instanceof Array ? e[0] : e) / 2;
  return r.type === "category" ? r.getBandWidth() : Math.abs(r.dataToCoord(n - i) - r.dataToCoord(n + i));
}
function Zge(e) {
  var t = e.getRect();
  return {
    coordSys: {
      type: "singleAxis",
      x: t.x,
      y: t.y,
      width: t.width,
      height: t.height
    },
    api: {
      coord: function(r) {
        return e.dataToPoint(r);
      },
      size: xe(Yge, e)
    }
  };
}
function Xge(e, t) {
  return t = t || [0, 0], ue(["Radius", "Angle"], function(r, n) {
    var i = "get" + r + "Axis", a = this[i](), o = t[n], s = e[n] / 2, l = a.type === "category" ? a.getBandWidth() : Math.abs(a.dataToCoord(o - s) - a.dataToCoord(o + s));
    return r === "Angle" && (l = l * Math.PI / 180), l;
  }, this);
}
function Kge(e) {
  var t = e.getRadiusAxis(), r = e.getAngleAxis(), n = t.getExtent();
  return n[0] > n[1] && n.reverse(), {
    coordSys: {
      type: "polar",
      cx: e.cx,
      cy: e.cy,
      r: n[1],
      r0: n[0]
    },
    api: {
      coord: function(i) {
        var a = t.dataToRadius(i[0]), o = r.dataToAngle(i[1]), s = e.coordToPoint([a, o]);
        return s.push(a, o * Math.PI / 180), s;
      },
      size: xe(Xge, e)
    }
  };
}
function qge(e) {
  var t = e.getRect(), r = e.getRangeInfo();
  return {
    coordSys: {
      type: "calendar",
      x: t.x,
      y: t.y,
      width: t.width,
      height: t.height,
      cellWidth: e.getCellWidth(),
      cellHeight: e.getCellHeight(),
      rangeInfo: {
        start: r.start,
        end: r.end,
        weeks: r.weeks,
        dayCount: r.allDay
      }
    },
    api: {
      coord: function(n, i) {
        return e.dataToPoint(n, i);
      }
    }
  };
}
var T3 = {};
function vj(e, t, r, n) {
  return e && (e.legacy || e.legacy !== !1 && !r && !n && t !== "tspan" && (t === "text" || be(e, "text")));
}
function gj(e, t, r) {
  var n = e, i, a, o;
  if (t === "text")
    o = n;
  else {
    o = {}, be(n, "text") && (o.text = n.text), be(n, "rich") && (o.rich = n.rich), be(n, "textFill") && (o.fill = n.textFill), be(n, "textStroke") && (o.stroke = n.textStroke), be(n, "fontFamily") && (o.fontFamily = n.fontFamily), be(n, "fontSize") && (o.fontSize = n.fontSize), be(n, "fontStyle") && (o.fontStyle = n.fontStyle), be(n, "fontWeight") && (o.fontWeight = n.fontWeight), a = {
      type: "text",
      style: o,
      // ec4 does not support rectText trigger.
      // And when text position is different in normal and emphasis
      // => hover text trigger emphasis;
      // => text position changed, leave mouse pointer immediately;
      // That might cause incorrect state.
      silent: !0
    }, i = {};
    var s = be(n, "textPosition");
    r ? i.position = s ? n.textPosition : "inside" : s && (i.position = n.textPosition), be(n, "textPosition") && (i.position = n.textPosition), be(n, "textOffset") && (i.offset = n.textOffset), be(n, "textRotation") && (i.rotation = n.textRotation), be(n, "textDistance") && (i.distance = n.textDistance);
  }
  return A3(o, e), j(o.rich, function(l) {
    A3(l, l);
  }), {
    textConfig: i,
    textContent: a
  };
}
function A3(e, t) {
  t && (t.font = t.textFont || t.font, be(t, "textStrokeWidth") && (e.lineWidth = t.textStrokeWidth), be(t, "textAlign") && (e.align = t.textAlign), be(t, "textVerticalAlign") && (e.verticalAlign = t.textVerticalAlign), be(t, "textLineHeight") && (e.lineHeight = t.textLineHeight), be(t, "textWidth") && (e.width = t.textWidth), be(t, "textHeight") && (e.height = t.textHeight), be(t, "textBackgroundColor") && (e.backgroundColor = t.textBackgroundColor), be(t, "textPadding") && (e.padding = t.textPadding), be(t, "textBorderColor") && (e.borderColor = t.textBorderColor), be(t, "textBorderWidth") && (e.borderWidth = t.textBorderWidth), be(t, "textBorderRadius") && (e.borderRadius = t.textBorderRadius), be(t, "textBoxShadowColor") && (e.shadowColor = t.textBoxShadowColor), be(t, "textBoxShadowBlur") && (e.shadowBlur = t.textBoxShadowBlur), be(t, "textBoxShadowOffsetX") && (e.shadowOffsetX = t.textBoxShadowOffsetX), be(t, "textBoxShadowOffsetY") && (e.shadowOffsetY = t.textBoxShadowOffsetY));
}
function M3(e, t, r) {
  var n = e;
  n.textPosition = n.textPosition || r.position || "inside", r.offset != null && (n.textOffset = r.offset), r.rotation != null && (n.textRotation = r.rotation), r.distance != null && (n.textDistance = r.distance);
  var i = n.textPosition.indexOf("inside") >= 0, a = e.fill || "#000";
  E3(n, t);
  var o = n.textFill == null;
  return i ? o && (n.textFill = r.insideFill || "#fff", !n.textStroke && r.insideStroke && (n.textStroke = r.insideStroke), !n.textStroke && (n.textStroke = a), n.textStrokeWidth == null && (n.textStrokeWidth = 2)) : (o && (n.textFill = e.fill || r.outsideFill || "#000"), !n.textStroke && r.outsideStroke && (n.textStroke = r.outsideStroke)), n.text = t.text, n.rich = t.rich, j(t.rich, function(s) {
    E3(s, s);
  }), n;
}
function E3(e, t) {
  t && (be(t, "fill") && (e.textFill = t.fill), be(t, "stroke") && (e.textStroke = t.fill), be(t, "lineWidth") && (e.textStrokeWidth = t.lineWidth), be(t, "font") && (e.font = t.font), be(t, "fontStyle") && (e.fontStyle = t.fontStyle), be(t, "fontWeight") && (e.fontWeight = t.fontWeight), be(t, "fontSize") && (e.fontSize = t.fontSize), be(t, "fontFamily") && (e.fontFamily = t.fontFamily), be(t, "align") && (e.textAlign = t.align), be(t, "verticalAlign") && (e.textVerticalAlign = t.verticalAlign), be(t, "lineHeight") && (e.textLineHeight = t.lineHeight), be(t, "width") && (e.textWidth = t.width), be(t, "height") && (e.textHeight = t.height), be(t, "backgroundColor") && (e.textBackgroundColor = t.backgroundColor), be(t, "padding") && (e.textPadding = t.padding), be(t, "borderColor") && (e.textBorderColor = t.borderColor), be(t, "borderWidth") && (e.textBorderWidth = t.borderWidth), be(t, "borderRadius") && (e.textBorderRadius = t.borderRadius), be(t, "shadowColor") && (e.textBoxShadowColor = t.shadowColor), be(t, "shadowBlur") && (e.textBoxShadowBlur = t.shadowBlur), be(t, "shadowOffsetX") && (e.textBoxShadowOffsetX = t.shadowOffsetX), be(t, "shadowOffsetY") && (e.textBoxShadowOffsetY = t.shadowOffsetY), be(t, "textShadowColor") && (e.textShadowColor = t.textShadowColor), be(t, "textShadowBlur") && (e.textShadowBlur = t.textShadowBlur), be(t, "textShadowOffsetX") && (e.textShadowOffsetX = t.textShadowOffsetX), be(t, "textShadowOffsetY") && (e.textShadowOffsetY = t.textShadowOffsetY));
}
function D3(e, t) {
  if (process.env.NODE_ENV !== "production") {
    var r = e + "^_^" + t;
    T3[r] || (console.warn('[ECharts] DEPRECATED: "' + e + '" has been deprecated. ' + t), T3[r] = !0);
  }
}
var mj = {
  position: ["x", "y"],
  scale: ["scaleX", "scaleY"],
  origin: ["originX", "originY"]
}, N3 = ut(mj), Pm = ei(la, function(e, t) {
  return e[t] = 1, e;
}, {}), I3 = la.join(", "), km = ["", "style", "shape", "extra"], Bc = yt();
function jT(e, t, r, n, i) {
  var a = e + "Animation", o = uf(e, n, i) || {}, s = Bc(t).userDuring;
  return o.duration > 0 && (o.during = s ? xe(rme, {
    el: t,
    userDuring: s
  }) : null, o.setToFinal = !0, o.scope = e), ae(o, r[a]), o;
}
function wg(e, t, r, n) {
  n = n || {};
  var i = n.dataIndex, a = n.isInit, o = n.clearStyle, s = r.isAnimationEnabled(), l = Bc(e), u = t.style;
  l.userDuring = t.during;
  var c = {}, f = {};
  if (ime(e, t, f), R3("shape", t, f), R3("extra", t, f), !a && s && (nme(e, t, c), L3("shape", e, t, c), L3("extra", e, t, c), ame(e, t, u, c)), f.style = u, Jge(e, f, o), eme(e, t), s)
    if (a) {
      var d = {};
      j(km, function(p) {
        var v = p ? t[p] : t;
        v && v.enterFrom && (p && (d[p] = d[p] || {}), ae(p ? d[p] : d, v.enterFrom));
      });
      var h = jT("enter", e, t, r, i);
      h.duration > 0 && e.animateFrom(d, h);
    } else
      Qge(e, t, i || 0, r, c);
  yj(e, t), u ? e.dirty() : e.markRedraw();
}
function yj(e, t) {
  for (var r = Bc(e).leaveToProps, n = 0; n < km.length; n++) {
    var i = km[n], a = i ? t[i] : t;
    a && a.leaveTo && (r || (r = Bc(e).leaveToProps = {}), i && (r[i] = r[i] || {}), ae(i ? r[i] : r, a.leaveTo));
  }
}
function h0(e, t, r, n) {
  if (e) {
    var i = e.parent, a = Bc(e).leaveToProps;
    if (a) {
      var o = jT("update", e, t, r, 0);
      o.done = function() {
        i.remove(e);
      }, e.animateTo(a, o);
    } else
      i.remove(e);
  }
}
function Dl(e) {
  return e === "all";
}
function Jge(e, t, r) {
  var n = t.style;
  if (!e.isGroup && n) {
    if (r) {
      e.useStyle({});
      for (var i = e.animators, a = 0; a < i.length; a++) {
        var o = i[a];
        o.targetName === "style" && o.changeTarget(e.style);
      }
    }
    e.setStyle(n);
  }
  t && (t.style = null, t && e.attr(t), t.style = n);
}
function Qge(e, t, r, n, i) {
  if (i) {
    var a = jT("update", e, t, n, r);
    a.duration > 0 && e.animateFrom(i, a);
  }
}
function eme(e, t) {
  be(t, "silent") && (e.silent = t.silent), be(t, "ignore") && (e.ignore = t.ignore), e instanceof ri && be(t, "invisible") && (e.invisible = t.invisible), e instanceof lt && be(t, "autoBatch") && (e.autoBatch = t.autoBatch);
}
var Fi = {}, tme = {
  // Usually other props do not need to be changed in animation during.
  setTransform: function(e, t) {
    return process.env.NODE_ENV !== "production" && Le(be(Pm, e), "Only " + I3 + " available in `setTransform`."), Fi.el[e] = t, this;
  },
  getTransform: function(e) {
    return process.env.NODE_ENV !== "production" && Le(be(Pm, e), "Only " + I3 + " available in `getTransform`."), Fi.el[e];
  },
  setShape: function(e, t) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var r = Fi.el, n = r.shape || (r.shape = {});
    return n[e] = t, r.dirtyShape && r.dirtyShape(), this;
  },
  getShape: function(e) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var t = Fi.el.shape;
    if (t)
      return t[e];
  },
  setStyle: function(e, t) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var r = Fi.el, n = r.style;
    return n && (process.env.NODE_ENV !== "production" && as(t) && qt("style." + e + " must not be assigned with NaN."), n[e] = t, r.dirtyStyle && r.dirtyStyle()), this;
  },
  getStyle: function(e) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var t = Fi.el.style;
    if (t)
      return t[e];
  },
  setExtra: function(e, t) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var r = Fi.el.extra || (Fi.el.extra = {});
    return r[e] = t, this;
  },
  getExtra: function(e) {
    process.env.NODE_ENV !== "production" && Pu(e);
    var t = Fi.el.extra;
    if (t)
      return t[e];
  }
};
function Pu(e) {
  if (process.env.NODE_ENV !== "production" && (e === "transition" || e === "enterFrom" || e === "leaveTo"))
    throw new Error('key must not be "' + e + '"');
}
function rme() {
  var e = this, t = e.el;
  if (t) {
    var r = Bc(t).userDuring, n = e.userDuring;
    if (r !== n) {
      e.el = e.userDuring = null;
      return;
    }
    Fi.el = t, n(tme);
  }
}
function L3(e, t, r, n) {
  var i = r[e];
  if (i) {
    var a = t[e], o;
    if (a) {
      var s = r.transition, l = i.transition;
      if (l)
        if (!o && (o = n[e] = {}), Dl(l))
          ae(o, a);
        else
          for (var u = Ot(l), c = 0; c < u.length; c++) {
            var f = u[c], d = a[f];
            o[f] = d;
          }
      else if (Dl(s) || rt(s, e) >= 0) {
        !o && (o = n[e] = {});
        for (var h = ut(a), c = 0; c < h.length; c++) {
          var f = h[c], d = a[f];
          ome(i[f], d) && (o[f] = d);
        }
      }
    }
  }
}
function R3(e, t, r) {
  var n = t[e];
  if (n)
    for (var i = r[e] = {}, a = ut(n), o = 0; o < a.length; o++) {
      var s = a[o];
      i[s] = Od(n[s]);
    }
}
function nme(e, t, r) {
  for (var n = t.transition, i = Dl(n) ? la : Ot(n || []), a = 0; a < i.length; a++) {
    var o = i[a];
    if (!(o === "style" || o === "shape" || o === "extra")) {
      var s = e[o];
      process.env.NODE_ENV !== "production" && xj(o, "el.transition"), r[o] = s;
    }
  }
}
function ime(e, t, r) {
  for (var n = 0; n < N3.length; n++) {
    var i = N3[n], a = mj[i], o = t[i];
    o && (r[a[0]] = o[0], r[a[1]] = o[1]);
  }
  for (var n = 0; n < la.length; n++) {
    var s = la[n];
    t[s] != null && (r[s] = t[s]);
  }
}
function ame(e, t, r, n) {
  if (r) {
    var i = e.style, a;
    if (i) {
      var o = r.transition, s = t.transition;
      if (o && !Dl(o)) {
        var l = Ot(o);
        !a && (a = n.style = {});
        for (var u = 0; u < l.length; u++) {
          var c = l[u], f = i[c];
          a[c] = f;
        }
      } else if (e.getAnimationStyleProps && (Dl(s) || Dl(o) || rt(s, "style") >= 0)) {
        var d = e.getAnimationStyleProps(), h = d ? d.style : null;
        if (h) {
          !a && (a = n.style = {});
          for (var p = ut(r), u = 0; u < p.length; u++) {
            var c = p[u];
            if (h[c]) {
              var f = i[c];
              a[c] = f;
            }
          }
        }
      }
    }
  }
}
function ome(e, t) {
  return zr(e) ? e !== t : e != null && isFinite(e);
}
var xj;
process.env.NODE_ENV !== "production" && (xj = function(e, t) {
  be(Pm, e) || qt("Prop `" + e + "` is not a permitted in `" + t + "`. Only `" + ut(Pm).join("`, `") + "` are permitted.");
});
var bj = yt(), sme = ["percent", "easing", "shape", "style", "extra"];
function wj(e) {
  e.stopAnimation("keyframe"), e.attr(bj(e));
}
function Om(e, t, r) {
  if (!(!r.isAnimationEnabled() || !t)) {
    if (le(t)) {
      j(t, function(s) {
        Om(e, s, r);
      });
      return;
    }
    var n = t.keyframes, i = t.duration;
    if (r && i == null) {
      var a = uf("enter", r, 0);
      i = a && a.duration;
    }
    if (!(!n || !i)) {
      var o = bj(e);
      j(km, function(s) {
        if (!(s && !e[s])) {
          var l, u = !1;
          n.sort(function(c, f) {
            return c.percent - f.percent;
          }), j(n, function(c) {
            var f = e.animators, d = s ? c[s] : c;
            if (process.env.NODE_ENV !== "production" && c.percent >= 1 && (u = !0), !!d) {
              var h = ut(d);
              if (s || (h = Ct(h, function(g) {
                return rt(sme, g) < 0;
              })), !!h.length) {
                l || (l = e.animate(s, t.loop, !0), l.scope = "keyframe");
                for (var p = 0; p < f.length; p++)
                  f[p] !== l && f[p].targetName === l.targetName && f[p].stopTracks(h);
                s && (o[s] = o[s] || {});
                var v = s ? o[s] : o;
                j(h, function(g) {
                  v[g] = ((s ? e[s] : e) || {})[g];
                }), l.whenWithKeys(i * c.percent, d, h, c.easing);
              }
            }
          }), l && (process.env.NODE_ENV !== "production" && (u || qt("End frame with percent: 1 is missing in the keyframeAnimation.", !0)), l.delay(t.delay || 0).duration(i).start(t.easing));
        }
      });
    }
  }
}
var Ga = "emphasis", $o = "normal", VT = "blur", BT = "select", fs = [$o, Ga, VT, BT], fb = {
  normal: ["itemStyle"],
  emphasis: [Ga, "itemStyle"],
  blur: [VT, "itemStyle"],
  select: [BT, "itemStyle"]
}, db = {
  normal: ["label"],
  emphasis: [Ga, "label"],
  blur: [VT, "label"],
  select: [BT, "label"]
}, lme = ["x", "y"], ume = "e\0\0", jn = {
  normal: {},
  emphasis: {},
  blur: {},
  select: {}
}, P3 = {
  cartesian2d: Gge,
  geo: Uge,
  single: Zge,
  polar: Kge,
  calendar: qge
};
function zm(e) {
  return e instanceof lt;
}
function u_(e) {
  return e instanceof ri;
}
function cme(e, t) {
  t.copyTransform(e), u_(t) && u_(e) && (t.setStyle(e.style), t.z = e.z, t.z2 = e.z2, t.zlevel = e.zlevel, t.invisible = e.invisible, t.ignore = e.ignore, zm(t) && zm(e) && t.setShape(e.shape));
}
var fme = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      this._progressiveEls = null;
      var o = this._data, s = r.getData(), l = this.group, u = k3(r, s, n, i);
      o || l.removeAll(), s.diff(o).add(function(f) {
        hb(i, null, f, u(f, a), r, l, s);
      }).remove(function(f) {
        var d = o.getItemGraphicEl(f);
        d && h0(d, Ha(d).option, r);
      }).update(function(f, d) {
        var h = o.getItemGraphicEl(d);
        hb(i, h, f, u(f, a), r, l, s);
      }).execute();
      var c = r.get("clip", !0) ? fp(r.coordinateSystem, !1, r) : null;
      c ? l.setClipPath(c) : l.removeClipPath(), this._data = s;
    }, t.prototype.incrementalPrepareRender = function(r, n, i) {
      this.group.removeAll(), this._data = null;
    }, t.prototype.incrementalRender = function(r, n, i, a, o) {
      var s = n.getData(), l = k3(n, s, i, a), u = this._progressiveEls = [];
      function c(h) {
        h.isGroup || (h.incremental = !0, h.ensureState("emphasis").hoverLayer = !0);
      }
      for (var f = r.start; f < r.end; f++) {
        var d = hb(null, null, f, l(f, o), n, this.group, s);
        d && (d.traverse(c), u.push(d));
      }
    }, t.prototype.eachRendered = function(r) {
      gs(this._progressiveEls || this.group, r);
    }, t.prototype.filterForExposedEvent = function(r, n, i, a) {
      var o = n.element;
      if (o == null || i.name === o)
        return !0;
      for (; (i = i.__hostTarget || i.parent) && i !== this.group; )
        if (i.name === o)
          return !0;
      return !1;
    }, t.type = "custom", t;
  }(It)
);
function FT(e) {
  var t = e.type, r;
  if (t === "path") {
    var n = e.shape, i = n.width != null && n.height != null ? {
      x: n.x || 0,
      y: n.y || 0,
      width: n.width,
      height: n.height
    } : null, a = Cj(n);
    r = ip(a, null, i, n.layout || "center"), Ha(r).customPathData = a;
  } else if (t === "image")
    r = new Ar({}), Ha(r).customImagePath = e.style.image;
  else if (t === "text")
    r = new pt({});
  else if (t === "group")
    r = new Fe();
  else {
    if (t === "compoundPath")
      throw new Error('"compoundPath" is not supported yet.');
    var o = Hy(t);
    if (!o) {
      var s = "";
      process.env.NODE_ENV !== "production" && (s = 'graphic type "' + t + '" can not be found.'), Et(s);
    }
    r = new o();
  }
  return Ha(r).customGraphicType = t, r.name = e.name, r.z2EmphasisLift = 1, r.z2SelectLift = 1, r;
}
function $T(e, t, r, n, i, a, o) {
  wj(t);
  var s = i && i.normal.cfg;
  s && t.setTextConfig(s), n && n.transition == null && (n.transition = lme);
  var l = n && n.style;
  if (l) {
    if (t.type === "text") {
      var u = l;
      be(u, "textFill") && (u.fill = u.textFill), be(u, "textStroke") && (u.stroke = u.textStroke);
    }
    var c = void 0, f = zm(t) ? l.decal : null;
    e && f && (f.dirty = !0, c = Oc(f, e)), l.__decalPattern = c;
  }
  if (u_(t) && l) {
    var c = l.__decalPattern;
    c && (l.decal = c);
  }
  wg(t, n, a, {
    dataIndex: r,
    isInit: o,
    clearStyle: !0
  }), Om(t, n.keyframeAnimation, a);
}
function _j(e, t, r, n, i) {
  var a = t.isGroup ? null : t, o = i && i[e].cfg;
  if (a) {
    var s = a.ensureState(e);
    if (n === !1) {
      var l = a.getState(e);
      l && (l.style = null);
    } else
      s.style = n || null;
    o && (s.textConfig = o), jl(a);
  }
}
function dme(e, t, r) {
  if (!e.isGroup) {
    var n = e, i = r.currentZ, a = r.currentZLevel;
    n.z = i, n.zlevel = a;
    var o = t.z2;
    o != null && (n.z2 = o || 0);
    for (var s = 0; s < fs.length; s++)
      hme(n, t, fs[s]);
  }
}
function hme(e, t, r) {
  var n = r === $o, i = n ? t : jm(t, r), a = i ? i.z2 : null, o;
  a != null && (o = n ? e : e.ensureState(r), o.z2 = a || 0);
}
function k3(e, t, r, n) {
  var i = e.get("renderItem"), a = e.coordinateSystem, o = {};
  a && (process.env.NODE_ENV !== "production" && (Le(i, "series.render is required."), Le(a.prepareCustoms || P3[a.type], "This coordSys does not support custom series.")), o = a.prepareCustoms ? a.prepareCustoms(a) : P3[a.type](a));
  for (var s = Ie({
    getWidth: n.getWidth,
    getHeight: n.getHeight,
    getZr: n.getZr,
    getDevicePixelRatio: n.getDevicePixelRatio,
    value: w,
    style: S,
    ordinalRawValue: _,
    styleEmphasis: C,
    visual: D,
    barLayout: N,
    currentSeriesIndices: R,
    font: O
  }, o.api || {}), l = {
    // The life cycle of context: current round of rendering.
    // The global life cycle is probably not necessary, because
    // user can store global status by themselves.
    context: {},
    seriesId: e.id,
    seriesName: e.name,
    seriesIndex: e.seriesIndex,
    coordSys: o.coordSys,
    dataInsideLength: t.count(),
    encode: pme(e.getData())
  }, u, c, f = {}, d = {}, h = {}, p = {}, v = 0; v < fs.length; v++) {
    var g = fs[v];
    h[g] = e.getModel(fb[g]), p[g] = e.getModel(db[g]);
  }
  function m(E) {
    return E === u ? c || (c = t.getItemModel(E)) : t.getItemModel(E);
  }
  function y(E, L) {
    return t.hasItemOption ? E === u ? f[L] || (f[L] = m(E).getModel(fb[L])) : m(E).getModel(fb[L]) : h[L];
  }
  function b(E, L) {
    return t.hasItemOption ? E === u ? d[L] || (d[L] = m(E).getModel(db[L])) : m(E).getModel(db[L]) : p[L];
  }
  return function(E, L) {
    return u = E, c = null, f = {}, d = {}, i && i(Ie({
      dataIndexInside: E,
      dataIndex: t.getRawIndex(E),
      // Can be used for optimization when zoom or roam.
      actionType: L ? L.type : null
    }, l), s);
  };
  function w(E, L) {
    return L == null && (L = u), t.getStore().get(t.getDimensionIndex(E || 0), L);
  }
  function _(E, L) {
    L == null && (L = u), E = E || 0;
    var I = t.getDimensionInfo(E);
    if (!I) {
      var P = t.getDimensionIndex(E);
      return P >= 0 ? t.getStore().get(P, L) : void 0;
    }
    var k = t.get(I.name, L), z = I && I.ordinalMeta;
    return z ? z.categories[k] : k;
  }
  function S(E, L) {
    process.env.NODE_ENV !== "production" && D3("api.style", "Please write literal style directly instead."), L == null && (L = u);
    var I = t.getItemVisual(L, "style"), P = I && I.fill, k = I && I.opacity, z = y(L, $o).getItemStyle();
    P != null && (z.fill = P), k != null && (z.opacity = k);
    var V = {
      inheritColor: ge(P) ? P : "#000"
    }, B = b(L, $o), F = Vt(B, null, V, !1, !0);
    F.text = B.getShallow("show") ? Ge(e.getFormattedLabel(L, $o), zc(t, L)) : null;
    var H = lm(B, V, !1);
    return M(E, z), z = M3(z, F, H), E && A(z, E), z.legacy = !0, z;
  }
  function C(E, L) {
    process.env.NODE_ENV !== "production" && D3("api.styleEmphasis", "Please write literal style directly instead."), L == null && (L = u);
    var I = y(L, Ga).getItemStyle(), P = b(L, Ga), k = Vt(P, null, null, !0, !0);
    k.text = P.getShallow("show") ? En(e.getFormattedLabel(L, Ga), e.getFormattedLabel(L, $o), zc(t, L)) : null;
    var z = lm(P, null, !0);
    return M(E, I), I = M3(I, k, z), E && A(I, E), I.legacy = !0, I;
  }
  function A(E, L) {
    for (var I in L)
      be(L, I) && (E[I] = L[I]);
  }
  function M(E, L) {
    E && (E.textFill && (L.textFill = E.textFill), E.textPosition && (L.textPosition = E.textPosition));
  }
  function D(E, L) {
    if (L == null && (L = u), be(C3, E)) {
      var I = t.getItemVisual(L, "style");
      return I ? I[C3[E]] : null;
    }
    if (be(Fge, E))
      return t.getItemVisual(L, E);
  }
  function N(E) {
    if (a.type === "cartesian2d") {
      var L = a.getBaseAxis();
      return Gse(Ie({
        axis: L
      }, E));
    }
  }
  function R() {
    return r.getCurrentSeriesIndices();
  }
  function O(E) {
    return wC(E, r);
  }
}
function pme(e) {
  var t = {};
  return j(e.dimensions, function(r) {
    var n = e.getDimensionInfo(r);
    if (!n.isExtraCoord) {
      var i = n.coordDim, a = t[i] = t[i] || [];
      a[n.coordDimIndex] = e.getDimensionIndex(r);
    }
  }), t;
}
function hb(e, t, r, n, i, a, o) {
  if (!n) {
    a.remove(t);
    return;
  }
  var s = HT(e, t, r, n, i, a);
  return s && o.setItemGraphicEl(r, s), s && Jt(s, n.focus, n.blurScope, n.emphasisDisabled), s;
}
function HT(e, t, r, n, i, a) {
  process.env.NODE_ENV !== "production" && Le(n, "should not have an null/undefined element setting");
  var o = -1, s = t;
  t && Sj(t, n, i) && (o = rt(a.childrenRef(), t), t = null);
  var l = !t, u = t;
  u ? u.clearStates() : (u = FT(n), s && cme(s, u)), n.morph === !1 ? u.disableMorphing = !0 : u.disableMorphing && (u.disableMorphing = !1), jn.normal.cfg = jn.normal.conOpt = jn.emphasis.cfg = jn.emphasis.conOpt = jn.blur.cfg = jn.blur.conOpt = jn.select.cfg = jn.select.conOpt = null, jn.isLegacy = !1, gme(u, r, n, i, l, jn), vme(u, r, n, i, l), $T(e, u, r, n, jn, i, l), be(n, "info") && (Ha(u).info = n.info);
  for (var c = 0; c < fs.length; c++) {
    var f = fs[c];
    if (f !== $o) {
      var d = jm(n, f), h = GT(n, d, f);
      _j(f, u, d, h, jn);
    }
  }
  return dme(u, n, i), n.type === "group" && mme(e, u, r, n, i), o >= 0 ? a.replaceAt(u, o) : a.add(u), u;
}
function Sj(e, t, r) {
  var n = Ha(e), i = t.type, a = t.shape, o = t.style;
  return (
    // Always create new if universal transition is enabled.
    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.
    r.isUniversalTransitionEnabled() || i != null && i !== n.customGraphicType || i === "path" && wme(a) && Cj(a) !== n.customPathData || i === "image" && be(o, "image") && o.image !== n.customImagePath
  );
}
function vme(e, t, r, n, i) {
  var a = r.clipPath;
  if (a === !1)
    e && e.getClipPath() && e.removeClipPath();
  else if (a) {
    var o = e.getClipPath();
    o && Sj(o, a, n) && (o = null), o || (o = FT(a), process.env.NODE_ENV !== "production" && Le(zm(o), "Only any type of `path` can be used in `clipPath`, rather than " + o.type + "."), e.setClipPath(o)), $T(null, o, t, a, null, n, i);
  }
}
function gme(e, t, r, n, i, a) {
  if (!e.isGroup) {
    O3(r, null, a), O3(r, Ga, a);
    var o = a.normal.conOpt, s = a.emphasis.conOpt, l = a.blur.conOpt, u = a.select.conOpt;
    if (o != null || s != null || u != null || l != null) {
      var c = e.getTextContent();
      if (o === !1)
        c && e.removeTextContent();
      else {
        o = a.normal.conOpt = o || {
          type: "text"
        }, c ? c.clearStates() : (c = FT(o), e.setTextContent(c)), $T(null, c, t, o, null, n, i);
        for (var f = o && o.style, d = 0; d < fs.length; d++) {
          var h = fs[d];
          if (h !== $o) {
            var p = a[h].conOpt;
            _j(h, c, p, GT(o, p, h), null);
          }
        }
        f ? c.dirty() : c.markRedraw();
      }
    }
  }
}
function O3(e, t, r) {
  var n = t ? jm(e, t) : e, i = t ? GT(e, n, Ga) : e.style, a = e.type, o = n ? n.textConfig : null, s = e.textContent, l = s ? t ? jm(s, t) : s : null;
  if (i && // Because emphasis style has little info to detect legacy,
  // if normal is legacy, emphasis is trade as legacy.
  (r.isLegacy || vj(i, a, !!o, !!l))) {
    r.isLegacy = !0;
    var u = gj(i, a, !t);
    !o && u.textConfig && (o = u.textConfig), !l && u.textContent && (l = u.textContent);
  }
  if (!t && l) {
    var c = l;
    !c.type && (c.type = "text"), process.env.NODE_ENV !== "production" && Le(c.type === "text", 'textContent.type must be "text"');
  }
  var f = t ? r[t] : r.normal;
  f.cfg = o, f.conOpt = l;
}
function jm(e, t) {
  return t ? e ? e[t] : null : e;
}
function GT(e, t, r) {
  var n = t && t.style;
  return n == null && r === Ga && e && (n = e.styleEmphasis), n;
}
function mme(e, t, r, n, i) {
  var a = n.children, o = a ? a.length : 0, s = n.$mergeChildren, l = s === "byName" || n.diffChildrenByName, u = s === !1;
  if (!(!o && !l && !u)) {
    if (l) {
      xme({
        api: e,
        oldChildren: t.children() || [],
        newChildren: a || [],
        dataIndex: r,
        seriesModel: i,
        group: t
      });
      return;
    }
    u && t.removeAll();
    for (var c = 0; c < o; c++) {
      var f = a[c], d = t.childAt(c);
      f ? (f.ignore == null && (f.ignore = !1), HT(e, d, r, f, i, t)) : (process.env.NODE_ENV !== "production" && Le(d, "renderItem should not return a group containing elements as null/undefined/{} if they do not exist before."), d.ignore = !0);
    }
    for (var h = t.childCount() - 1; h >= c; h--) {
      var p = t.childAt(h);
      yme(t, p, i);
    }
  }
}
function yme(e, t, r) {
  t && h0(t, Ha(e).option, r);
}
function xme(e) {
  new Ja(e.oldChildren, e.newChildren, z3, z3, e).add(j3).update(j3).remove(bme).execute();
}
function z3(e, t) {
  var r = e && e.name;
  return r ?? ume + t;
}
function j3(e, t) {
  var r = this.context, n = e != null ? r.newChildren[e] : null, i = t != null ? r.oldChildren[t] : null;
  HT(r.api, i, r.dataIndex, n, r.seriesModel, r.group);
}
function bme(e) {
  var t = this.context, r = t.oldChildren[e];
  r && h0(r, Ha(r).option, t.seriesModel);
}
function Cj(e) {
  return e && (e.pathData || e.d);
}
function wme(e) {
  return e && (be(e, "pathData") || be(e, "d"));
}
function _me(e) {
  e.registerChartView(fme), e.registerSeriesModel($ge);
}
var rl = yt(), V3 = ze, pb = xe, WT = (
  /** @class */
  function() {
    function e() {
      this._dragging = !1, this.animationThreshold = 15;
    }
    return e.prototype.render = function(t, r, n, i) {
      var a = r.get("value"), o = r.get("status");
      if (this._axisModel = t, this._axisPointerModel = r, this._api = n, !(!i && this._lastValue === a && this._lastStatus === o)) {
        this._lastValue = a, this._lastStatus = o;
        var s = this._group, l = this._handle;
        if (!o || o === "hide") {
          s && s.hide(), l && l.hide();
          return;
        }
        s && s.show(), l && l.show();
        var u = {};
        this.makeElOption(u, a, t, r, n);
        var c = u.graphicKey;
        c !== this._lastGraphicKey && this.clear(n), this._lastGraphicKey = c;
        var f = this._moveAnimation = this.determineAnimation(t, r);
        if (!s)
          s = this._group = new Fe(), this.createPointerEl(s, u, t, r), this.createLabelEl(s, u, t, r), n.getZr().add(s);
        else {
          var d = We(B3, r, f);
          this.updatePointerEl(s, u, d), this.updateLabelEl(s, u, d, r);
        }
        $3(s, r, !0), this._renderHandle(a);
      }
    }, e.prototype.remove = function(t) {
      this.clear(t);
    }, e.prototype.dispose = function(t) {
      this.clear(t);
    }, e.prototype.determineAnimation = function(t, r) {
      var n = r.get("animation"), i = t.axis, a = i.type === "category", o = r.get("snap");
      if (!o && !a)
        return !1;
      if (n === "auto" || n == null) {
        var s = this.animationThreshold;
        if (a && i.getBandWidth() > s)
          return !0;
        if (o) {
          var l = hT(t).seriesDataCount, u = i.getExtent();
          return Math.abs(u[0] - u[1]) / l > s;
        }
        return !1;
      }
      return n === !0;
    }, e.prototype.makeElOption = function(t, r, n, i, a) {
    }, e.prototype.createPointerEl = function(t, r, n, i) {
      var a = r.pointer;
      if (a) {
        var o = rl(t).pointerEl = new Zl[a.type](V3(r.pointer));
        t.add(o);
      }
    }, e.prototype.createLabelEl = function(t, r, n, i) {
      if (r.label) {
        var a = rl(t).labelEl = new pt(V3(r.label));
        t.add(a), F3(a, i);
      }
    }, e.prototype.updatePointerEl = function(t, r, n) {
      var i = rl(t).pointerEl;
      i && r.pointer && (i.setStyle(r.pointer.style), n(i, {
        shape: r.pointer.shape
      }));
    }, e.prototype.updateLabelEl = function(t, r, n, i) {
      var a = rl(t).labelEl;
      a && (a.setStyle(r.label.style), n(a, {
        // Consider text length change in vertical axis, animation should
        // be used on shape, otherwise the effect will be weird.
        // TODOTODO
        // shape: elOption.label.shape,
        x: r.label.x,
        y: r.label.y
      }), F3(a, i));
    }, e.prototype._renderHandle = function(t) {
      if (!(this._dragging || !this.updateHandleTransform)) {
        var r = this._axisPointerModel, n = this._api.getZr(), i = this._handle, a = r.getModel("handle"), o = r.get("status");
        if (!a.get("show") || !o || o === "hide") {
          i && n.remove(i), this._handle = null;
          return;
        }
        var s;
        this._handle || (s = !0, i = this._handle = cf(a.get("icon"), {
          cursor: "move",
          draggable: !0,
          onmousemove: function(u) {
            Xa(u.event);
          },
          onmousedown: pb(this._onHandleDragMove, this, 0, 0),
          drift: pb(this._onHandleDragMove, this),
          ondragend: pb(this._onHandleDragEnd, this)
        }), n.add(i)), $3(i, r, !1), i.setStyle(a.getItemStyle(null, ["color", "borderColor", "borderWidth", "opacity", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"]));
        var l = a.get("size");
        le(l) || (l = [l, l]), i.scaleX = l[0] / 2, i.scaleY = l[1] / 2, gf(this, "_doDispatchAxisPointer", a.get("throttle") || 0, "fixRate"), this._moveHandleToValue(t, s);
      }
    }, e.prototype._moveHandleToValue = function(t, r) {
      B3(this._axisPointerModel, !r && this._moveAnimation, this._handle, vb(this.getHandleTransform(t, this._axisModel, this._axisPointerModel)));
    }, e.prototype._onHandleDragMove = function(t, r) {
      var n = this._handle;
      if (n) {
        this._dragging = !0;
        var i = this.updateHandleTransform(vb(n), [t, r], this._axisModel, this._axisPointerModel);
        this._payloadInfo = i, n.stopAnimation(), n.attr(vb(i)), rl(n).lastProp = null, this._doDispatchAxisPointer();
      }
    }, e.prototype._doDispatchAxisPointer = function() {
      var t = this._handle;
      if (t) {
        var r = this._payloadInfo, n = this._axisModel;
        this._api.dispatchAction({
          type: "updateAxisPointer",
          x: r.cursorPoint[0],
          y: r.cursorPoint[1],
          tooltipOption: r.tooltipOption,
          axesInfo: [{
            axisDim: n.axis.dim,
            axisIndex: n.componentIndex
          }]
        });
      }
    }, e.prototype._onHandleDragEnd = function() {
      this._dragging = !1;
      var t = this._handle;
      if (t) {
        var r = this._axisPointerModel.get("value");
        this._moveHandleToValue(r), this._api.dispatchAction({
          type: "hideTip"
        });
      }
    }, e.prototype.clear = function(t) {
      this._lastValue = null, this._lastStatus = null;
      var r = t.getZr(), n = this._group, i = this._handle;
      r && n && (this._lastGraphicKey = null, n && r.remove(n), i && r.remove(i), this._group = null, this._handle = null, this._payloadInfo = null), bh(this, "_doDispatchAxisPointer");
    }, e.prototype.doClear = function() {
    }, e.prototype.buildLabel = function(t, r, n) {
      return n = n || 0, {
        x: t[n],
        y: t[1 - n],
        width: r[n],
        height: r[1 - n]
      };
    }, e;
  }()
);
function B3(e, t, r, n) {
  Tj(rl(r).lastProp, n) || (rl(r).lastProp = n, t ? _t(r, n, e) : (r.stopAnimation(), r.attr(n)));
}
function Tj(e, t) {
  if (Ne(e) && Ne(t)) {
    var r = !0;
    return j(t, function(n, i) {
      r = r && Tj(e[i], n);
    }), !!r;
  } else
    return e === t;
}
function F3(e, t) {
  e[t.get(["label", "show"]) ? "show" : "hide"]();
}
function vb(e) {
  return {
    x: e.x || 0,
    y: e.y || 0,
    rotation: e.rotation || 0
  };
}
function $3(e, t, r) {
  var n = t.get("z"), i = t.get("zlevel");
  e && e.traverse(function(a) {
    a.type !== "group" && (n != null && (a.z = n), i != null && (a.zlevel = i), a.silent = r);
  });
}
function UT(e) {
  var t = e.get("type"), r = e.getModel(t + "Style"), n;
  return t === "line" ? (n = r.getLineStyle(), n.fill = null) : t === "shadow" && (n = r.getAreaStyle(), n.stroke = null), n;
}
function Aj(e, t, r, n, i) {
  var a = r.get("value"), o = Mj(a, t.axis, t.ecModel, r.get("seriesDataIndices"), {
    precision: r.get(["label", "precision"]),
    formatter: r.get(["label", "formatter"])
  }), s = r.getModel("label"), l = Xl(s.get("padding") || 0), u = s.getFont(), c = Jh(o, u), f = i.position, d = c.width + l[1] + l[3], h = c.height + l[0] + l[2], p = i.align;
  p === "right" && (f[0] -= d), p === "center" && (f[0] -= d / 2);
  var v = i.verticalAlign;
  v === "bottom" && (f[1] -= h), v === "middle" && (f[1] -= h / 2), Sme(f, d, h, n);
  var g = s.get("backgroundColor");
  (!g || g === "auto") && (g = t.get(["axisLine", "lineStyle", "color"])), e.label = {
    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},
    x: f[0],
    y: f[1],
    style: Vt(s, {
      text: o,
      font: u,
      fill: s.getTextColor(),
      padding: l,
      backgroundColor: g
    }),
    // Label should be over axisPointer.
    z2: 10
  };
}
function Sme(e, t, r, n) {
  var i = n.getWidth(), a = n.getHeight();
  e[0] = Math.min(e[0] + t, i) - t, e[1] = Math.min(e[1] + r, a) - r, e[0] = Math.max(e[0], 0), e[1] = Math.max(e[1], 0);
}
function Mj(e, t, r, n, i) {
  e = t.scale.parse(e);
  var a = t.scale.getLabel({
    value: e
  }, {
    // If `precision` is set, width can be fixed (like '12.00500'), which
    // helps to debounce when when moving label.
    precision: i.precision
  }), o = i.formatter;
  if (o) {
    var s = {
      value: rT(t, {
        value: e
      }),
      axisDimension: t.dim,
      axisIndex: t.index,
      seriesData: []
    };
    j(n, function(l) {
      var u = r.getSeriesByIndex(l.seriesIndex), c = l.dataIndexInside, f = u && u.getDataParams(c);
      f && s.seriesData.push(f);
    }), ge(o) ? a = o.replace("{value}", a) : Ee(o) && (a = o(s));
  }
  return a;
}
function YT(e, t, r) {
  var n = yn();
  return vs(n, n, r.rotation), Ni(n, n, r.position), Ai([e.dataToCoord(t), (r.labelOffset || 0) + (r.labelDirection || 1) * (r.labelMargin || 0)], n);
}
function Ej(e, t, r, n, i, a) {
  var o = sn.innerTextLayout(r.rotation, 0, r.labelDirection);
  r.labelMargin = i.get(["label", "margin"]), Aj(t, n, i, a, {
    position: YT(n.axis, e, r),
    align: o.textAlign,
    verticalAlign: o.textVerticalAlign
  });
}
function ZT(e, t, r) {
  return r = r || 0, {
    x1: e[r],
    y1: e[1 - r],
    x2: t[r],
    y2: t[1 - r]
  };
}
function Dj(e, t, r) {
  return r = r || 0, {
    x: e[r],
    y: e[1 - r],
    width: t[r],
    height: t[1 - r]
  };
}
function H3(e, t, r, n, i, a) {
  return {
    cx: e,
    cy: t,
    r0: r,
    r: n,
    startAngle: i,
    endAngle: a,
    clockwise: !0
  };
}
var Cme = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.makeElOption = function(r, n, i, a, o) {
      var s = i.axis, l = s.grid, u = a.get("type"), c = G3(l, s).getOtherAxis(s).getGlobalExtent(), f = s.toGlobalCoord(s.dataToCoord(n, !0));
      if (u && u !== "none") {
        var d = UT(a), h = Tme[u](s, f, c);
        h.style = d, r.graphicKey = h.type, r.pointer = h;
      }
      var p = Gw(l.model, i);
      Ej(
        // @ts-ignore
        n,
        r,
        p,
        i,
        a,
        o
      );
    }, t.prototype.getHandleTransform = function(r, n, i) {
      var a = Gw(n.axis.grid.model, n, {
        labelInside: !1
      });
      a.labelMargin = i.get(["handle", "margin"]);
      var o = YT(n.axis, r, a);
      return {
        x: o[0],
        y: o[1],
        rotation: a.rotation + (a.labelDirection < 0 ? Math.PI : 0)
      };
    }, t.prototype.updateHandleTransform = function(r, n, i, a) {
      var o = i.axis, s = o.grid, l = o.getGlobalExtent(!0), u = G3(s, o).getOtherAxis(o).getGlobalExtent(), c = o.dim === "x" ? 0 : 1, f = [r.x, r.y];
      f[c] += n[c], f[c] = Math.min(l[1], f[c]), f[c] = Math.max(l[0], f[c]);
      var d = (u[1] + u[0]) / 2, h = [d, d];
      h[c] = f[c];
      var p = [{
        verticalAlign: "middle"
      }, {
        align: "center"
      }];
      return {
        x: f[0],
        y: f[1],
        rotation: r.rotation,
        cursorPoint: h,
        tooltipOption: p[c]
      };
    }, t;
  }(WT)
);
function G3(e, t) {
  var r = {};
  return r[t.dim + "AxisIndex"] = t.index, e.getCartesian(r);
}
var Tme = {
  line: function(e, t, r) {
    var n = ZT([t, r[0]], [t, r[1]], W3(e));
    return {
      type: "Line",
      subPixelOptimize: !0,
      shape: n
    };
  },
  shadow: function(e, t, r) {
    var n = Math.max(1, e.getBandWidth()), i = r[1] - r[0];
    return {
      type: "Rect",
      shape: Dj([t - n / 2, r[0]], [n, i], W3(e))
    };
  }
};
function W3(e) {
  return e.dim === "x" ? 0 : 1;
}
var Ame = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "axisPointer", t.defaultOption = {
      // 'auto' means that show when triggered by tooltip or handle.
      show: "auto",
      // zlevel: 0,
      z: 50,
      type: "line",
      // axispointer triggered by tootip determine snap automatically,
      // see `modelHelper`.
      snap: !1,
      triggerTooltip: !0,
      triggerEmphasis: !0,
      value: null,
      status: null,
      link: [],
      // Do not set 'auto' here, otherwise global animation: false
      // will not effect at this axispointer.
      animation: null,
      animationDurationUpdate: 200,
      lineStyle: {
        color: "#B9BEC9",
        width: 1,
        type: "dashed"
      },
      shadowStyle: {
        color: "rgba(210,219,238,0.2)"
      },
      label: {
        show: !0,
        formatter: null,
        precision: "auto",
        margin: 3,
        color: "#fff",
        padding: [5, 7, 5, 7],
        backgroundColor: "auto",
        borderColor: null,
        borderWidth: 0,
        borderRadius: 3
      },
      handle: {
        show: !1,
        // eslint-disable-next-line
        icon: "M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",
        size: 45,
        // handle margin is from symbol center to axis, which is stable when circular move.
        margin: 50,
        // color: '#1b8bbd'
        // color: '#2f4554'
        color: "#333",
        shadowBlur: 3,
        shadowColor: "#aaa",
        shadowOffsetX: 0,
        shadowOffsetY: 2,
        // For mobile performance
        throttle: 40
      }
    }, t;
  }(at)
), Ba = yt(), Mme = j;
function Nj(e, t, r) {
  if (!st.node) {
    var n = t.getZr();
    Ba(n).records || (Ba(n).records = {}), Eme(n, t);
    var i = Ba(n).records[e] || (Ba(n).records[e] = {});
    i.handler = r;
  }
}
function Eme(e, t) {
  if (Ba(e).initialized)
    return;
  Ba(e).initialized = !0, r("click", We(U3, "click")), r("mousemove", We(U3, "mousemove")), r("globalout", Nme);
  function r(n, i) {
    e.on(n, function(a) {
      var o = Ime(t);
      Mme(Ba(e).records, function(s) {
        s && i(s, a, o.dispatchAction);
      }), Dme(o.pendings, t);
    });
  }
}
function Dme(e, t) {
  var r = e.showTip.length, n = e.hideTip.length, i;
  r ? i = e.showTip[r - 1] : n && (i = e.hideTip[n - 1]), i && (i.dispatchAction = null, t.dispatchAction(i));
}
function Nme(e, t, r) {
  e.handler("leave", null, r);
}
function U3(e, t, r, n) {
  t.handler(e, r, n);
}
function Ime(e) {
  var t = {
    showTip: [],
    hideTip: []
  }, r = function(n) {
    var i = t[n.type];
    i ? i.push(n) : (n.dispatchAction = r, e.dispatchAction(n));
  };
  return {
    dispatchAction: r,
    pendings: t
  };
}
function c_(e, t) {
  if (!st.node) {
    var r = t.getZr(), n = (Ba(r).records || {})[e];
    n && (Ba(r).records[e] = null);
  }
}
var Lme = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = n.getComponent("tooltip"), o = r.get("triggerOn") || a && a.get("triggerOn") || "mousemove|click";
      Nj("axisPointer", i, function(s, l, u) {
        o !== "none" && (s === "leave" || o.indexOf(s) >= 0) && u({
          type: "updateAxisPointer",
          currTrigger: s,
          x: l && l.offsetX,
          y: l && l.offsetY
        });
      });
    }, t.prototype.remove = function(r, n) {
      c_("axisPointer", n);
    }, t.prototype.dispose = function(r, n) {
      c_("axisPointer", n);
    }, t.type = "axisPointer", t;
  }($t)
);
function Ij(e, t) {
  var r = [], n = e.seriesIndex, i;
  if (n == null || !(i = t.getSeriesByIndex(n)))
    return {
      point: []
    };
  var a = i.getData(), o = Ol(a, e);
  if (o == null || o < 0 || le(o))
    return {
      point: []
    };
  var s = a.getItemGraphicEl(o), l = i.coordinateSystem;
  if (i.getTooltipPosition)
    r = i.getTooltipPosition(o) || [];
  else if (l && l.dataToPoint)
    if (e.isStacked) {
      var u = l.getBaseAxis(), c = l.getOtherAxis(u), f = c.dim, d = u.dim, h = f === "x" || f === "radius" ? 1 : 0, p = a.mapDimension(d), v = [];
      v[h] = a.get(p, o), v[1 - h] = a.get(a.getCalculationInfo("stackResultDimension"), o), r = l.dataToPoint(v) || [];
    } else
      r = l.dataToPoint(a.getValues(ue(l.dimensions, function(m) {
        return a.mapDimension(m);
      }), o)) || [];
  else if (s) {
    var g = s.getBoundingRect().clone();
    g.applyTransform(s.transform), r = [g.x + g.width / 2, g.y + g.height / 2];
  }
  return {
    point: r,
    el: s
  };
}
var Y3 = yt();
function Rme(e, t, r) {
  var n = e.currTrigger, i = [e.x, e.y], a = e, o = e.dispatchAction || xe(r.dispatchAction, r), s = t.getComponent("axisPointer").coordSysAxesInfo;
  if (s) {
    _g(i) && (i = Ij({
      seriesIndex: a.seriesIndex,
      // Do not use dataIndexInside from other ec instance.
      // FIXME: auto detect it?
      dataIndex: a.dataIndex
    }, t).point);
    var l = _g(i), u = a.axesInfo, c = s.axesInfo, f = n === "leave" || _g(i), d = {}, h = {}, p = {
      list: [],
      map: {}
    }, v = {
      showPointer: We(kme, h),
      showTooltip: We(Ome, p)
    };
    j(s.coordSysMap, function(m, y) {
      var b = l || m.containPoint(i);
      j(s.coordSysAxesInfo[y], function(w, _) {
        var S = w.axis, C = Bme(u, w);
        if (!f && b && (!u || C)) {
          var A = C && C.value;
          A == null && !l && (A = S.pointToData(i)), A != null && Z3(w, A, v, !1, d);
        }
      });
    });
    var g = {};
    return j(c, function(m, y) {
      var b = m.linkGroup;
      b && !h[y] && j(b.axesInfo, function(w, _) {
        var S = h[_];
        if (w !== m && S) {
          var C = S.value;
          b.mapper && (C = m.axis.scale.parse(b.mapper(C, X3(w), X3(m)))), g[m.key] = C;
        }
      });
    }), j(g, function(m, y) {
      Z3(c[y], m, v, !0, d);
    }), zme(h, c, d), jme(p, i, e, o), Vme(c, o, r), d;
  }
}
function Z3(e, t, r, n, i) {
  var a = e.axis;
  if (!(a.scale.isBlank() || !a.containData(t))) {
    if (!e.involveSeries) {
      r.showPointer(e, t);
      return;
    }
    var o = Pme(t, e), s = o.payloadBatch, l = o.snapToValue;
    s[0] && i.seriesIndex == null && ae(i, s[0]), !n && e.snap && a.containData(l) && l != null && (t = l), r.showPointer(e, t, s), r.showTooltip(e, o, l);
  }
}
function Pme(e, t) {
  var r = t.axis, n = r.dim, i = e, a = [], o = Number.MAX_VALUE, s = -1;
  return j(t.seriesModels, function(l, u) {
    var c = l.getData().mapDimensionsAll(n), f, d;
    if (l.getAxisTooltipData) {
      var h = l.getAxisTooltipData(c, e, r);
      d = h.dataIndices, f = h.nestestValue;
    } else {
      if (d = l.getData().indicesOfNearest(
        c[0],
        e,
        // Add a threshold to avoid find the wrong dataIndex
        // when data length is not same.
        // false,
        r.type === "category" ? 0.5 : null
      ), !d.length)
        return;
      f = l.getData().get(c[0], d[0]);
    }
    if (!(f == null || !isFinite(f))) {
      var p = e - f, v = Math.abs(p);
      v <= o && ((v < o || p >= 0 && s < 0) && (o = v, s = p, i = f, a.length = 0), j(d, function(g) {
        a.push({
          seriesIndex: l.seriesIndex,
          dataIndexInside: g,
          dataIndex: l.getData().getRawIndex(g)
        });
      }));
    }
  }), {
    payloadBatch: a,
    snapToValue: i
  };
}
function kme(e, t, r, n) {
  e[t.key] = {
    value: r,
    payloadBatch: n
  };
}
function Ome(e, t, r, n) {
  var i = r.payloadBatch, a = t.axis, o = a.model, s = t.axisPointerModel;
  if (!(!t.triggerTooltip || !i.length)) {
    var l = t.coordSys.model, u = Mh(l), c = e.map[u];
    c || (c = e.map[u] = {
      coordSysId: l.id,
      coordSysIndex: l.componentIndex,
      coordSysType: l.type,
      coordSysMainType: l.mainType,
      dataByAxis: []
    }, e.list.push(c)), c.dataByAxis.push({
      axisDim: a.dim,
      axisIndex: o.componentIndex,
      axisType: o.type,
      axisId: o.id,
      value: n,
      // Caustion: viewHelper.getValueLabel is actually on "view stage", which
      // depends that all models have been updated. So it should not be performed
      // here. Considering axisPointerModel used here is volatile, which is hard
      // to be retrieve in TooltipView, we prepare parameters here.
      valueLabelOpt: {
        precision: s.get(["label", "precision"]),
        formatter: s.get(["label", "formatter"])
      },
      seriesDataIndices: i.slice()
    });
  }
}
function zme(e, t, r) {
  var n = r.axesInfo = [];
  j(t, function(i, a) {
    var o = i.axisPointerModel.option, s = e[a];
    s ? (!i.useHandle && (o.status = "show"), o.value = s.value, o.seriesDataIndices = (s.payloadBatch || []).slice()) : !i.useHandle && (o.status = "hide"), o.status === "show" && n.push({
      axisDim: i.axis.dim,
      axisIndex: i.axis.model.componentIndex,
      value: o.value
    });
  });
}
function jme(e, t, r, n) {
  if (_g(t) || !e.list.length) {
    n({
      type: "hideTip"
    });
    return;
  }
  var i = ((e.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};
  n({
    type: "showTip",
    escapeConnect: !0,
    x: t[0],
    y: t[1],
    tooltipOption: r.tooltipOption,
    position: r.position,
    dataIndexInside: i.dataIndexInside,
    dataIndex: i.dataIndex,
    seriesIndex: i.seriesIndex,
    dataByCoordSys: e.list
  });
}
function Vme(e, t, r) {
  var n = r.getZr(), i = "axisPointerLastHighlights", a = Y3(n)[i] || {}, o = Y3(n)[i] = {};
  j(e, function(u, c) {
    var f = u.axisPointerModel.option;
    f.status === "show" && u.triggerEmphasis && j(f.seriesDataIndices, function(d) {
      var h = d.seriesIndex + " | " + d.dataIndex;
      o[h] = d;
    });
  });
  var s = [], l = [];
  j(a, function(u, c) {
    !o[c] && l.push(u);
  }), j(o, function(u, c) {
    !a[c] && s.push(u);
  }), l.length && r.dispatchAction({
    type: "downplay",
    escapeConnect: !0,
    // Not blur others when highlight in axisPointer.
    notBlur: !0,
    batch: l
  }), s.length && r.dispatchAction({
    type: "highlight",
    escapeConnect: !0,
    // Not blur others when highlight in axisPointer.
    notBlur: !0,
    batch: s
  });
}
function Bme(e, t) {
  for (var r = 0; r < (e || []).length; r++) {
    var n = e[r];
    if (t.axis.dim === n.axisDim && t.axis.model.componentIndex === n.axisIndex)
      return n;
  }
}
function X3(e) {
  var t = e.axis.model, r = {}, n = r.axisDim = e.axis.dim;
  return r.axisIndex = r[n + "AxisIndex"] = t.componentIndex, r.axisName = r[n + "AxisName"] = t.name, r.axisId = r[n + "AxisId"] = t.id, r;
}
function _g(e) {
  return !e || e[0] == null || isNaN(e[0]) || e[1] == null || isNaN(e[1]);
}
function mp(e) {
  Ql.registerAxisPointerClass("CartesianAxisPointer", Cme), e.registerComponentModel(Ame), e.registerComponentView(Lme), e.registerPreprocessor(function(t) {
    if (t) {
      (!t.axisPointer || t.axisPointer.length === 0) && (t.axisPointer = {});
      var r = t.axisPointer.link;
      r && !le(r) && (t.axisPointer.link = [r]);
    }
  }), e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC, function(t, r) {
    t.getComponent("axisPointer").coordSysAxesInfo = qce(t, r);
  }), e.registerAction({
    type: "updateAxisPointer",
    event: "updateAxisPointer",
    update: ":updateAxisPointer"
  }, Rme);
}
function Fme(e) {
  ot(iz), ot(mp);
}
var $me = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.makeElOption = function(r, n, i, a, o) {
      var s = i.axis;
      s.dim === "angle" && (this.animationThreshold = Math.PI / 18);
      var l = s.polar, u = l.getOtherAxis(s), c = u.getExtent(), f = s.dataToCoord(n), d = a.get("type");
      if (d && d !== "none") {
        var h = UT(a), p = Gme[d](s, l, f, c);
        p.style = h, r.graphicKey = p.type, r.pointer = p;
      }
      var v = a.get(["label", "margin"]), g = Hme(n, i, a, l, v);
      Aj(r, i, a, o, g);
    }, t;
  }(WT)
);
function Hme(e, t, r, n, i) {
  var a = t.axis, o = a.dataToCoord(e), s = n.getAngleAxis().getExtent()[0];
  s = s / 180 * Math.PI;
  var l = n.getRadiusAxis().getExtent(), u, c, f;
  if (a.dim === "radius") {
    var d = yn();
    vs(d, d, s), Ni(d, d, [n.cx, n.cy]), u = Ai([o, -i], d);
    var h = t.getModel("axisLabel").get("rotate") || 0, p = sn.innerTextLayout(s, h * Math.PI / 180, -1);
    c = p.textAlign, f = p.textVerticalAlign;
  } else {
    var v = l[1];
    u = n.coordToPoint([v + i, o]);
    var g = n.cx, m = n.cy;
    c = Math.abs(u[0] - g) / v < 0.3 ? "center" : u[0] > g ? "left" : "right", f = Math.abs(u[1] - m) / v < 0.3 ? "middle" : u[1] > m ? "top" : "bottom";
  }
  return {
    position: u,
    align: c,
    verticalAlign: f
  };
}
var Gme = {
  line: function(e, t, r, n) {
    return e.dim === "angle" ? {
      type: "Line",
      shape: ZT(t.coordToPoint([n[0], r]), t.coordToPoint([n[1], r]))
    } : {
      type: "Circle",
      shape: {
        cx: t.cx,
        cy: t.cy,
        r
      }
    };
  },
  shadow: function(e, t, r, n) {
    var i = Math.max(1, e.getBandWidth()), a = Math.PI / 180;
    return e.dim === "angle" ? {
      type: "Sector",
      shape: H3(
        t.cx,
        t.cy,
        n[0],
        n[1],
        // In ECharts y is negative if angle is positive
        (-r - i / 2) * a,
        (-r + i / 2) * a
      )
    } : {
      type: "Sector",
      shape: H3(t.cx, t.cy, r - i / 2, r + i / 2, 0, Math.PI * 2)
    };
  }
}, Wme = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.findAxisModel = function(r) {
      var n, i = this.ecModel;
      return i.eachComponent(r, function(a) {
        a.getCoordSysModel() === this && (n = a);
      }, this), n;
    }, t.type = "polar", t.dependencies = ["radiusAxis", "angleAxis"], t.defaultOption = {
      // zlevel: 0,
      z: 0,
      center: ["50%", "50%"],
      radius: "80%"
    }, t;
  }(at)
), XT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getCoordSysModel = function() {
      return this.getReferringComponents("polar", pr).models[0];
    }, t.type = "polarAxis", t;
  }(at)
);
ir(XT, bf);
var Ume = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "angleAxis", t;
  }(XT)
), Yme = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "radiusAxis", t;
  }(XT)
), KT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n) {
      return e.call(this, "radius", r, n) || this;
    }
    return t.prototype.pointToData = function(r, n) {
      return this.polar.pointToData(r, n)[this.dim === "radius" ? 0 : 1];
    }, t;
  }(ui)
);
KT.prototype.dataToRadius = ui.prototype.dataToCoord;
KT.prototype.radiusToData = ui.prototype.coordToData;
var Zme = yt(), qT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n) {
      return e.call(this, "angle", r, n || [0, 360]) || this;
    }
    return t.prototype.pointToData = function(r, n) {
      return this.polar.pointToData(r, n)[this.dim === "radius" ? 0 : 1];
    }, t.prototype.calculateCategoryInterval = function() {
      var r = this, n = r.getLabelModel(), i = r.scale, a = i.getExtent(), o = i.count();
      if (a[1] - a[0] < 1)
        return 0;
      var s = a[0], l = r.dataToCoord(s + 1) - r.dataToCoord(s), u = Math.abs(l), c = Jh(s == null ? "" : s + "", n.getFont(), "center", "top"), f = Math.max(c.height, 7), d = f / u;
      isNaN(d) && (d = 1 / 0);
      var h = Math.max(0, Math.floor(d)), p = Zme(r.model), v = p.lastAutoInterval, g = p.lastTickCount;
      return v != null && g != null && Math.abs(v - h) <= 1 && Math.abs(g - o) <= 1 && v > h ? h = v : (p.lastTickCount = o, p.lastAutoInterval = h), h;
    }, t;
  }(ui)
);
qT.prototype.dataToAngle = ui.prototype.dataToCoord;
qT.prototype.angleToData = ui.prototype.coordToData;
var Lj = ["radius", "angle"], Xme = (
  /** @class */
  function() {
    function e(t) {
      this.dimensions = Lj, this.type = "polar", this.cx = 0, this.cy = 0, this._radiusAxis = new KT(), this._angleAxis = new qT(), this.axisPointerEnabled = !0, this.name = t || "", this._radiusAxis.polar = this._angleAxis.polar = this;
    }
    return e.prototype.containPoint = function(t) {
      var r = this.pointToCoord(t);
      return this._radiusAxis.contain(r[0]) && this._angleAxis.contain(r[1]);
    }, e.prototype.containData = function(t) {
      return this._radiusAxis.containData(t[0]) && this._angleAxis.containData(t[1]);
    }, e.prototype.getAxis = function(t) {
      var r = "_" + t + "Axis";
      return this[r];
    }, e.prototype.getAxes = function() {
      return [this._radiusAxis, this._angleAxis];
    }, e.prototype.getAxesByScale = function(t) {
      var r = [], n = this._angleAxis, i = this._radiusAxis;
      return n.scale.type === t && r.push(n), i.scale.type === t && r.push(i), r;
    }, e.prototype.getAngleAxis = function() {
      return this._angleAxis;
    }, e.prototype.getRadiusAxis = function() {
      return this._radiusAxis;
    }, e.prototype.getOtherAxis = function(t) {
      var r = this._angleAxis;
      return t === r ? this._radiusAxis : r;
    }, e.prototype.getBaseAxis = function() {
      return this.getAxesByScale("ordinal")[0] || this.getAxesByScale("time")[0] || this.getAngleAxis();
    }, e.prototype.getTooltipAxes = function(t) {
      var r = t != null && t !== "auto" ? this.getAxis(t) : this.getBaseAxis();
      return {
        baseAxes: [r],
        otherAxes: [this.getOtherAxis(r)]
      };
    }, e.prototype.dataToPoint = function(t, r) {
      return this.coordToPoint([this._radiusAxis.dataToRadius(t[0], r), this._angleAxis.dataToAngle(t[1], r)]);
    }, e.prototype.pointToData = function(t, r) {
      var n = this.pointToCoord(t);
      return [this._radiusAxis.radiusToData(n[0], r), this._angleAxis.angleToData(n[1], r)];
    }, e.prototype.pointToCoord = function(t) {
      var r = t[0] - this.cx, n = t[1] - this.cy, i = this.getAngleAxis(), a = i.getExtent(), o = Math.min(a[0], a[1]), s = Math.max(a[0], a[1]);
      i.inverse ? o = s - 360 : s = o + 360;
      var l = Math.sqrt(r * r + n * n);
      r /= l, n /= l;
      for (var u = Math.atan2(-n, r) / Math.PI * 180, c = u < o ? 1 : -1; u < o || u > s; )
        u += c * 360;
      return [l, u];
    }, e.prototype.coordToPoint = function(t) {
      var r = t[0], n = t[1] / 180 * Math.PI, i = Math.cos(n) * r + this.cx, a = -Math.sin(n) * r + this.cy;
      return [i, a];
    }, e.prototype.getArea = function() {
      var t = this.getAngleAxis(), r = this.getRadiusAxis(), n = r.getExtent().slice();
      n[0] > n[1] && n.reverse();
      var i = t.getExtent(), a = Math.PI / 180, o = 1e-4;
      return {
        cx: this.cx,
        cy: this.cy,
        r0: n[0],
        r: n[1],
        startAngle: -i[0] * a,
        endAngle: -i[1] * a,
        clockwise: t.inverse,
        contain: function(s, l) {
          var u = s - this.cx, c = l - this.cy, f = u * u + c * c, d = this.r, h = this.r0;
          return d !== h && f - o <= d * d && f + o >= h * h;
        }
      };
    }, e.prototype.convertToPixel = function(t, r, n) {
      var i = K3(r);
      return i === this ? this.dataToPoint(n) : null;
    }, e.prototype.convertFromPixel = function(t, r, n) {
      var i = K3(r);
      return i === this ? this.pointToData(n) : null;
    }, e;
  }()
);
function K3(e) {
  var t = e.seriesModel, r = e.polarModel;
  return r && r.coordinateSystem || t && t.coordinateSystem;
}
function Kme(e, t, r) {
  var n = t.get("center"), i = r.getWidth(), a = r.getHeight();
  e.cx = pe(n[0], i), e.cy = pe(n[1], a);
  var o = e.getRadiusAxis(), s = Math.min(i, a) / 2, l = t.get("radius");
  l == null ? l = [0, "100%"] : le(l) || (l = [0, l]);
  var u = [pe(l[0], s), pe(l[1], s)];
  o.inverse ? o.setExtent(u[1], u[0]) : o.setExtent(u[0], u[1]);
}
function qme(e, t) {
  var r = this, n = r.getAngleAxis(), i = r.getRadiusAxis();
  if (n.scale.setExtent(1 / 0, -1 / 0), i.scale.setExtent(1 / 0, -1 / 0), e.eachSeries(function(s) {
    if (s.coordinateSystem === r) {
      var l = s.getData();
      j(Sm(l, "radius"), function(u) {
        i.scale.unionExtentFromData(l, u);
      }), j(Sm(l, "angle"), function(u) {
        n.scale.unionExtentFromData(l, u);
      });
    }
  }), Bl(n.scale, n.model), Bl(i.scale, i.model), n.type === "category" && !n.onBand) {
    var a = n.getExtent(), o = 360 / n.scale.count();
    n.inverse ? a[1] += o : a[1] -= o, n.setExtent(a[0], a[1]);
  }
}
function Jme(e) {
  return e.mainType === "angleAxis";
}
function q3(e, t) {
  var r;
  if (e.type = t.get("type"), e.scale = lp(t), e.onBand = t.get("boundaryGap") && e.type === "category", e.inverse = t.get("inverse"), Jme(t)) {
    e.inverse = e.inverse !== t.get("clockwise");
    var n = t.get("startAngle"), i = (r = t.get("endAngle")) !== null && r !== void 0 ? r : n + (e.inverse ? -360 : 360);
    e.setExtent(n, i);
  }
  t.axis = e, e.model = t;
}
var Qme = {
  dimensions: Lj,
  create: function(e, t) {
    var r = [];
    return e.eachComponent("polar", function(n, i) {
      var a = new Xme(i + "");
      a.update = qme;
      var o = a.getRadiusAxis(), s = a.getAngleAxis(), l = n.findAxisModel("radiusAxis"), u = n.findAxisModel("angleAxis");
      q3(o, l), q3(s, u), Kme(a, n, t), r.push(a), n.coordinateSystem = a, a.model = n;
    }), e.eachSeries(function(n) {
      if (n.get("coordinateSystem") === "polar") {
        var i = n.getReferringComponents("polar", pr).models[0];
        if (process.env.NODE_ENV !== "production" && !i)
          throw new Error('Polar "' + ur(n.get("polarIndex"), n.get("polarId"), 0) + '" not found');
        n.coordinateSystem = i.coordinateSystem;
      }
    }), r;
  }
}, eye = ["axisLine", "axisLabel", "axisTick", "minorTick", "splitLine", "minorSplitLine", "splitArea"];
function Rv(e, t, r) {
  t[1] > t[0] && (t = t.slice().reverse());
  var n = e.coordToPoint([t[0], r]), i = e.coordToPoint([t[1], r]);
  return {
    x1: n[0],
    y1: n[1],
    x2: i[0],
    y2: i[1]
  };
}
function Pv(e) {
  var t = e.getRadiusAxis();
  return t.inverse ? 0 : 1;
}
function J3(e) {
  var t = e[0], r = e[e.length - 1];
  t && r && Math.abs(Math.abs(t.coord - r.coord) - 360) < 1e-4 && e.pop();
}
var tye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.axisPointerClass = "PolarAxisPointer", r;
    }
    return t.prototype.render = function(r, n) {
      if (this.group.removeAll(), !!r.get("show")) {
        var i = r.axis, a = i.polar, o = a.getRadiusAxis().getExtent(), s = i.getTicksCoords(), l = i.getMinorTicksCoords(), u = ue(i.getViewLabels(), function(c) {
          c = ze(c);
          var f = i.scale, d = f.type === "ordinal" ? f.getRawOrdinalNumber(c.tickValue) : c.tickValue;
          return c.coord = i.dataToCoord(d), c;
        });
        J3(u), J3(s), j(eye, function(c) {
          r.get([c, "show"]) && (!i.scale.isBlank() || c === "axisLine") && rye[c](this.group, r, a, s, l, o, u);
        }, this);
      }
    }, t.type = "angleAxis", t;
  }(Ql)
), rye = {
  axisLine: function(e, t, r, n, i, a) {
    var o = t.getModel(["axisLine", "lineStyle"]), s = r.getAngleAxis(), l = Math.PI / 180, u = s.getExtent(), c = Pv(r), f = c ? 0 : 1, d, h = Math.abs(u[1] - u[0]) === 360 ? "Circle" : "Arc";
    a[f] === 0 ? d = new Zl[h]({
      shape: {
        cx: r.cx,
        cy: r.cy,
        r: a[c],
        startAngle: -u[0] * l,
        endAngle: -u[1] * l,
        clockwise: s.inverse
      },
      style: o.getLineStyle(),
      z2: 1,
      silent: !0
    }) : d = new of({
      shape: {
        cx: r.cx,
        cy: r.cy,
        r: a[c],
        r0: a[f]
      },
      style: o.getLineStyle(),
      z2: 1,
      silent: !0
    }), d.style.fill = null, e.add(d);
  },
  axisTick: function(e, t, r, n, i, a) {
    var o = t.getModel("axisTick"), s = (o.get("inside") ? -1 : 1) * o.get("length"), l = a[Pv(r)], u = ue(n, function(c) {
      return new xr({
        shape: Rv(r, [l, l + s], c.coord)
      });
    });
    e.add(Tn(u, {
      style: Ie(o.getModel("lineStyle").getLineStyle(), {
        stroke: t.get(["axisLine", "lineStyle", "color"])
      })
    }));
  },
  minorTick: function(e, t, r, n, i, a) {
    if (i.length) {
      for (var o = t.getModel("axisTick"), s = t.getModel("minorTick"), l = (o.get("inside") ? -1 : 1) * s.get("length"), u = a[Pv(r)], c = [], f = 0; f < i.length; f++)
        for (var d = 0; d < i[f].length; d++)
          c.push(new xr({
            shape: Rv(r, [u, u + l], i[f][d].coord)
          }));
      e.add(Tn(c, {
        style: Ie(s.getModel("lineStyle").getLineStyle(), Ie(o.getLineStyle(), {
          stroke: t.get(["axisLine", "lineStyle", "color"])
        }))
      }));
    }
  },
  axisLabel: function(e, t, r, n, i, a, o) {
    var s = t.getCategories(!0), l = t.getModel("axisLabel"), u = l.get("margin"), c = t.get("triggerEvent");
    j(o, function(f, d) {
      var h = l, p = f.tickValue, v = a[Pv(r)], g = r.coordToPoint([v + u, f.coord]), m = r.cx, y = r.cy, b = Math.abs(g[0] - m) / v < 0.3 ? "center" : g[0] > m ? "left" : "right", w = Math.abs(g[1] - y) / v < 0.3 ? "middle" : g[1] > y ? "top" : "bottom";
      if (s && s[p]) {
        var _ = s[p];
        Ne(_) && _.textStyle && (h = new Tt(_.textStyle, l, l.ecModel));
      }
      var S = new pt({
        silent: sn.isLabelSilent(t),
        style: Vt(h, {
          x: g[0],
          y: g[1],
          fill: h.getTextColor() || t.get(["axisLine", "lineStyle", "color"]),
          text: f.formattedLabel,
          align: b,
          verticalAlign: w
        })
      });
      if (e.add(S), c) {
        var C = sn.makeAxisEventDataBase(t);
        C.targetType = "axisLabel", C.value = f.rawLabel, He(S).eventData = C;
      }
    }, this);
  },
  splitLine: function(e, t, r, n, i, a) {
    var o = t.getModel("splitLine"), s = o.getModel("lineStyle"), l = s.get("color"), u = 0;
    l = l instanceof Array ? l : [l];
    for (var c = [], f = 0; f < n.length; f++) {
      var d = u++ % l.length;
      c[d] = c[d] || [], c[d].push(new xr({
        shape: Rv(r, a, n[f].coord)
      }));
    }
    for (var f = 0; f < c.length; f++)
      e.add(Tn(c[f], {
        style: Ie({
          stroke: l[f % l.length]
        }, s.getLineStyle()),
        silent: !0,
        z: t.get("z")
      }));
  },
  minorSplitLine: function(e, t, r, n, i, a) {
    if (i.length) {
      for (var o = t.getModel("minorSplitLine"), s = o.getModel("lineStyle"), l = [], u = 0; u < i.length; u++)
        for (var c = 0; c < i[u].length; c++)
          l.push(new xr({
            shape: Rv(r, a, i[u][c].coord)
          }));
      e.add(Tn(l, {
        style: s.getLineStyle(),
        silent: !0,
        z: t.get("z")
      }));
    }
  },
  splitArea: function(e, t, r, n, i, a) {
    if (n.length) {
      var o = t.getModel("splitArea"), s = o.getModel("areaStyle"), l = s.get("color"), u = 0;
      l = l instanceof Array ? l : [l];
      for (var c = [], f = Math.PI / 180, d = -n[0].coord * f, h = Math.min(a[0], a[1]), p = Math.max(a[0], a[1]), v = t.get("clockwise"), g = 1, m = n.length; g <= m; g++) {
        var y = g === m ? n[0].coord : n[g].coord, b = u++ % l.length;
        c[b] = c[b] || [], c[b].push(new qr({
          shape: {
            cx: r.cx,
            cy: r.cy,
            r0: h,
            r: p,
            startAngle: d,
            endAngle: -y * f,
            clockwise: v
          },
          silent: !0
        })), d = -y * f;
      }
      for (var g = 0; g < c.length; g++)
        e.add(Tn(c[g], {
          style: Ie({
            fill: l[g % l.length]
          }, s.getAreaStyle()),
          silent: !0
        }));
    }
  }
}, nye = ["axisLine", "axisTickLabel", "axisName"], iye = ["splitLine", "splitArea", "minorSplitLine"], aye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.axisPointerClass = "PolarAxisPointer", r;
    }
    return t.prototype.render = function(r, n) {
      if (this.group.removeAll(), !!r.get("show")) {
        var i = this._axisGroup, a = this._axisGroup = new Fe();
        this.group.add(a);
        var o = r.axis, s = o.polar, l = s.getAngleAxis(), u = o.getTicksCoords(), c = o.getMinorTicksCoords(), f = l.getExtent()[0], d = o.getExtent(), h = sye(s, r, f), p = new sn(r, h);
        j(nye, p.add, p), a.add(p.getGroup()), ap(i, a, r), j(iye, function(v) {
          r.get([v, "show"]) && !o.scale.isBlank() && oye[v](this.group, r, s, f, d, u, c);
        }, this);
      }
    }, t.type = "radiusAxis", t;
  }(Ql)
), oye = {
  splitLine: function(e, t, r, n, i, a) {
    var o = t.getModel("splitLine"), s = o.getModel("lineStyle"), l = s.get("color"), u = 0, c = r.getAngleAxis(), f = Math.PI / 180, d = c.getExtent(), h = Math.abs(d[1] - d[0]) === 360 ? "Circle" : "Arc";
    l = l instanceof Array ? l : [l];
    for (var p = [], v = 0; v < a.length; v++) {
      var g = u++ % l.length;
      p[g] = p[g] || [], p[g].push(new Zl[h]({
        shape: {
          cx: r.cx,
          cy: r.cy,
          // ensure circle radius >= 0
          r: Math.max(a[v].coord, 0),
          startAngle: -d[0] * f,
          endAngle: -d[1] * f,
          clockwise: c.inverse
        }
      }));
    }
    for (var v = 0; v < p.length; v++)
      e.add(Tn(p[v], {
        style: Ie({
          stroke: l[v % l.length],
          fill: null
        }, s.getLineStyle()),
        silent: !0
      }));
  },
  minorSplitLine: function(e, t, r, n, i, a, o) {
    if (o.length) {
      for (var s = t.getModel("minorSplitLine"), l = s.getModel("lineStyle"), u = [], c = 0; c < o.length; c++)
        for (var f = 0; f < o[c].length; f++)
          u.push(new da({
            shape: {
              cx: r.cx,
              cy: r.cy,
              r: o[c][f].coord
            }
          }));
      e.add(Tn(u, {
        style: Ie({
          fill: null
        }, l.getLineStyle()),
        silent: !0
      }));
    }
  },
  splitArea: function(e, t, r, n, i, a) {
    if (a.length) {
      var o = t.getModel("splitArea"), s = o.getModel("areaStyle"), l = s.get("color"), u = 0;
      l = l instanceof Array ? l : [l];
      for (var c = [], f = a[0].coord, d = 1; d < a.length; d++) {
        var h = u++ % l.length;
        c[h] = c[h] || [], c[h].push(new qr({
          shape: {
            cx: r.cx,
            cy: r.cy,
            r0: f,
            r: a[d].coord,
            startAngle: 0,
            endAngle: Math.PI * 2
          },
          silent: !0
        })), f = a[d].coord;
      }
      for (var d = 0; d < c.length; d++)
        e.add(Tn(c[d], {
          style: Ie({
            fill: l[d % l.length]
          }, s.getAreaStyle()),
          silent: !0
        }));
    }
  }
};
function sye(e, t, r) {
  return {
    position: [e.cx, e.cy],
    rotation: r / 180 * Math.PI,
    labelDirection: -1,
    tickDirection: -1,
    nameDirection: 1,
    labelRotate: t.getModel("axisLabel").get("rotate"),
    // Over splitLine and splitArea
    z2: 1
  };
}
function Rj(e) {
  return e.get("stack") || "__ec_stack_" + e.seriesIndex;
}
function Pj(e, t) {
  return t.dim + e.model.componentIndex;
}
function lye(e, t, r) {
  var n = {}, i = uye(Ct(t.getSeriesByType(e), function(a) {
    return !t.isSeriesFiltered(a) && a.coordinateSystem && a.coordinateSystem.type === "polar";
  }));
  t.eachSeriesByType(e, function(a) {
    if (a.coordinateSystem.type === "polar") {
      var o = a.getData(), s = a.coordinateSystem, l = s.getBaseAxis(), u = Pj(s, l), c = Rj(a), f = i[u][c], d = f.offset, h = f.width, p = s.getOtherAxis(l), v = a.coordinateSystem.cx, g = a.coordinateSystem.cy, m = a.get("barMinHeight") || 0, y = a.get("barMinAngle") || 0;
      n[c] = n[c] || [];
      for (var b = o.mapDimension(p.dim), w = o.mapDimension(l.dim), _ = Qa(
        o,
        b
        /* , baseDim */
      ), S = l.dim !== "radius" || !a.get("roundCap", !0), C = p.model, A = C.get("startValue"), M = p.dataToCoord(A || 0), D = 0, N = o.count(); D < N; D++) {
        var R = o.get(b, D), O = o.get(w, D), E = R >= 0 ? "p" : "n", L = M;
        _ && (n[c][O] || (n[c][O] = {
          p: M,
          n: M
          // Negative stack
        }), L = n[c][O][E]);
        var I = void 0, P = void 0, k = void 0, z = void 0;
        if (p.dim === "radius") {
          var V = p.dataToCoord(R) - M, B = l.dataToCoord(O);
          Math.abs(V) < m && (V = (V < 0 ? -1 : 1) * m), I = L, P = L + V, k = B - d, z = k - h, _ && (n[c][O][E] = P);
        } else {
          var F = p.dataToCoord(R, S) - M, H = l.dataToCoord(O);
          Math.abs(F) < y && (F = (F < 0 ? -1 : 1) * y), I = H + d, P = I + h, k = L, z = L + F, _ && (n[c][O][E] = z);
        }
        o.setItemLayout(D, {
          cx: v,
          cy: g,
          r0: I,
          r: P,
          // Consider that positive angle is anti-clockwise,
          // while positive radian of sector is clockwise
          startAngle: -k * Math.PI / 180,
          endAngle: -z * Math.PI / 180,
          /**
           * Keep the same logic with bar in catesion: use end value to
           * control direction. Notice that if clockwise is true (by
           * default), the sector will always draw clockwisely, no matter
           * whether endAngle is greater or less than startAngle.
           */
          clockwise: k >= z
        });
      }
    }
  });
}
function uye(e) {
  var t = {};
  j(e, function(n, i) {
    var a = n.getData(), o = n.coordinateSystem, s = o.getBaseAxis(), l = Pj(o, s), u = s.getExtent(), c = s.type === "category" ? s.getBandWidth() : Math.abs(u[1] - u[0]) / a.count(), f = t[l] || {
      bandWidth: c,
      remainedWidth: c,
      autoWidthCount: 0,
      categoryGap: "20%",
      gap: "30%",
      stacks: {}
    }, d = f.stacks;
    t[l] = f;
    var h = Rj(n);
    d[h] || f.autoWidthCount++, d[h] = d[h] || {
      width: 0,
      maxWidth: 0
    };
    var p = pe(n.get("barWidth"), c), v = pe(n.get("barMaxWidth"), c), g = n.get("barGap"), m = n.get("barCategoryGap");
    p && !d[h].width && (p = Math.min(f.remainedWidth, p), d[h].width = p, f.remainedWidth -= p), v && (d[h].maxWidth = v), g != null && (f.gap = g), m != null && (f.categoryGap = m);
  });
  var r = {};
  return j(t, function(n, i) {
    r[i] = {};
    var a = n.stacks, o = n.bandWidth, s = pe(n.categoryGap, o), l = pe(n.gap, 1), u = n.remainedWidth, c = n.autoWidthCount, f = (u - s) / (c + (c - 1) * l);
    f = Math.max(f, 0), j(a, function(v, g) {
      var m = v.maxWidth;
      m && m < f && (m = Math.min(m, u), v.width && (m = Math.min(m, v.width)), u -= m, v.width = m, c--);
    }), f = (u - s) / (c + (c - 1) * l), f = Math.max(f, 0);
    var d = 0, h;
    j(a, function(v, g) {
      v.width || (v.width = f), h = v, d += v.width * (1 + l);
    }), h && (d -= h.width * l);
    var p = -d / 2;
    j(a, function(v, g) {
      r[i][g] = r[i][g] || {
        offset: p,
        width: v.width
      }, p += v.width * (1 + l);
    });
  }), r;
}
var cye = {
  startAngle: 90,
  clockwise: !0,
  splitNumber: 12,
  axisLabel: {
    rotate: 0
  }
}, fye = {
  splitNumber: 5
}, dye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "polar", t;
  }($t)
);
function hye(e) {
  ot(mp), Ql.registerAxisPointerClass("PolarAxisPointer", $me), e.registerCoordinateSystem("polar", Qme), e.registerComponentModel(Wme), e.registerComponentView(dye), jc(e, "angle", Ume, cye), jc(e, "radius", Yme, fye), e.registerComponentView(tye), e.registerComponentView(aye), e.registerLayout(We(lye, "bar"));
}
function f_(e, t) {
  t = t || {};
  var r = e.coordinateSystem, n = e.axis, i = {}, a = n.position, o = n.orient, s = r.getRect(), l = [s.x, s.x + s.width, s.y, s.y + s.height], u = {
    horizontal: {
      top: l[2],
      bottom: l[3]
    },
    vertical: {
      left: l[0],
      right: l[1]
    }
  };
  i.position = [o === "vertical" ? u.vertical[a] : l[0], o === "horizontal" ? u.horizontal[a] : l[3]];
  var c = {
    horizontal: 0,
    vertical: 1
  };
  i.rotation = Math.PI / 2 * c[o];
  var f = {
    top: -1,
    bottom: 1,
    right: 1,
    left: -1
  };
  i.labelDirection = i.tickDirection = i.nameDirection = f[a], e.get(["axisTick", "inside"]) && (i.tickDirection = -i.tickDirection), ur(t.labelInside, e.get(["axisLabel", "inside"])) && (i.labelDirection = -i.labelDirection);
  var d = t.rotate;
  return d == null && (d = e.get(["axisLabel", "rotate"])), i.labelRotation = a === "top" ? -d : d, i.z2 = 1, i;
}
var pye = ["axisLine", "axisTickLabel", "axisName"], vye = ["splitArea", "splitLine"], gye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.axisPointerClass = "SingleAxisPointer", r;
    }
    return t.prototype.render = function(r, n, i, a) {
      var o = this.group;
      o.removeAll();
      var s = this._axisGroup;
      this._axisGroup = new Fe();
      var l = f_(r), u = new sn(r, l);
      j(pye, u.add, u), o.add(this._axisGroup), o.add(u.getGroup()), j(vye, function(c) {
        r.get([c, "show"]) && mye[c](this, this.group, this._axisGroup, r);
      }, this), ap(s, this._axisGroup, r), e.prototype.render.call(this, r, n, i, a);
    }, t.prototype.remove = function() {
      tz(this);
    }, t.type = "singleAxis", t;
  }(Ql)
), mye = {
  splitLine: function(e, t, r, n) {
    var i = n.axis;
    if (!i.scale.isBlank()) {
      var a = n.getModel("splitLine"), o = a.getModel("lineStyle"), s = o.get("color");
      s = s instanceof Array ? s : [s];
      for (var l = o.get("width"), u = n.coordinateSystem.getRect(), c = i.isHorizontal(), f = [], d = 0, h = i.getTicksCoords({
        tickModel: a
      }), p = [], v = [], g = 0; g < h.length; ++g) {
        var m = i.toGlobalCoord(h[g].coord);
        c ? (p[0] = m, p[1] = u.y, v[0] = m, v[1] = u.y + u.height) : (p[0] = u.x, p[1] = m, v[0] = u.x + u.width, v[1] = m);
        var y = new xr({
          shape: {
            x1: p[0],
            y1: p[1],
            x2: v[0],
            y2: v[1]
          },
          silent: !0
        });
        Pc(y.shape, l);
        var b = d++ % s.length;
        f[b] = f[b] || [], f[b].push(y);
      }
      for (var w = o.getLineStyle(["color"]), g = 0; g < f.length; ++g)
        t.add(Tn(f[g], {
          style: Ie({
            stroke: s[g % s.length]
          }, w),
          silent: !0
        }));
    }
  },
  splitArea: function(e, t, r, n) {
    ez(e, r, n, n);
  }
}, Sg = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.getCoordSysModel = function() {
      return this;
    }, t.type = "singleAxis", t.layoutMode = "box", t.defaultOption = {
      left: "5%",
      top: "5%",
      right: "5%",
      bottom: "5%",
      type: "value",
      position: "bottom",
      orient: "horizontal",
      axisLine: {
        show: !0,
        lineStyle: {
          width: 1,
          type: "solid"
        }
      },
      // Single coordinate system and single axis is the,
      // which is used as the parent tooltip model.
      // same model, so we set default tooltip show as true.
      tooltip: {
        show: !0
      },
      axisTick: {
        show: !0,
        length: 6,
        lineStyle: {
          width: 1
        }
      },
      axisLabel: {
        show: !0,
        interval: "auto"
      },
      splitLine: {
        show: !0,
        lineStyle: {
          type: "dashed",
          opacity: 0.2
        }
      }
    }, t;
  }(at)
);
ir(Sg, bf.prototype);
var yye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a, o) {
      var s = e.call(this, r, n, i) || this;
      return s.type = a || "value", s.position = o || "bottom", s;
    }
    return t.prototype.isHorizontal = function() {
      var r = this.position;
      return r === "top" || r === "bottom";
    }, t.prototype.pointToData = function(r, n) {
      return this.coordinateSystem.pointToData(r)[0];
    }, t;
  }(ui)
), kj = ["single"], xye = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.type = "single", this.dimension = "single", this.dimensions = kj, this.axisPointerEnabled = !0, this.model = t, this._init(t, r, n);
    }
    return e.prototype._init = function(t, r, n) {
      var i = this.dimension, a = new yye(i, lp(t), [0, 0], t.get("type"), t.get("position")), o = a.type === "category";
      a.onBand = o && t.get("boundaryGap"), a.inverse = t.get("inverse"), a.orient = t.get("orient"), t.axis = a, a.model = t, a.coordinateSystem = this, this._axis = a;
    }, e.prototype.update = function(t, r) {
      t.eachSeries(function(n) {
        if (n.coordinateSystem === this) {
          var i = n.getData();
          j(i.mapDimensionsAll(this.dimension), function(a) {
            this._axis.scale.unionExtentFromData(i, a);
          }, this), Bl(this._axis.scale, this._axis.model);
        }
      }, this);
    }, e.prototype.resize = function(t, r) {
      this._rect = vr({
        left: t.get("left"),
        top: t.get("top"),
        right: t.get("right"),
        bottom: t.get("bottom"),
        width: t.get("width"),
        height: t.get("height")
      }, {
        width: r.getWidth(),
        height: r.getHeight()
      }), this._adjustAxis();
    }, e.prototype.getRect = function() {
      return this._rect;
    }, e.prototype._adjustAxis = function() {
      var t = this._rect, r = this._axis, n = r.isHorizontal(), i = n ? [0, t.width] : [0, t.height], a = r.inverse ? 1 : 0;
      r.setExtent(i[a], i[1 - a]), this._updateAxisTransform(r, n ? t.x : t.y);
    }, e.prototype._updateAxisTransform = function(t, r) {
      var n = t.getExtent(), i = n[0] + n[1], a = t.isHorizontal();
      t.toGlobalCoord = a ? function(o) {
        return o + r;
      } : function(o) {
        return i - o + r;
      }, t.toLocalCoord = a ? function(o) {
        return o - r;
      } : function(o) {
        return i - o + r;
      };
    }, e.prototype.getAxis = function() {
      return this._axis;
    }, e.prototype.getBaseAxis = function() {
      return this._axis;
    }, e.prototype.getAxes = function() {
      return [this._axis];
    }, e.prototype.getTooltipAxes = function() {
      return {
        baseAxes: [this.getAxis()],
        // Empty otherAxes
        otherAxes: []
      };
    }, e.prototype.containPoint = function(t) {
      var r = this.getRect(), n = this.getAxis(), i = n.orient;
      return i === "horizontal" ? n.contain(n.toLocalCoord(t[0])) && t[1] >= r.y && t[1] <= r.y + r.height : n.contain(n.toLocalCoord(t[1])) && t[0] >= r.y && t[0] <= r.y + r.height;
    }, e.prototype.pointToData = function(t) {
      var r = this.getAxis();
      return [r.coordToData(r.toLocalCoord(t[r.orient === "horizontal" ? 0 : 1]))];
    }, e.prototype.dataToPoint = function(t) {
      var r = this.getAxis(), n = this.getRect(), i = [], a = r.orient === "horizontal" ? 0 : 1;
      return t instanceof Array && (t = t[0]), i[a] = r.toGlobalCoord(r.dataToCoord(+t)), i[1 - a] = a === 0 ? n.y + n.height / 2 : n.x + n.width / 2, i;
    }, e.prototype.convertToPixel = function(t, r, n) {
      var i = Q3(r);
      return i === this ? this.dataToPoint(n) : null;
    }, e.prototype.convertFromPixel = function(t, r, n) {
      var i = Q3(r);
      return i === this ? this.pointToData(n) : null;
    }, e;
  }()
);
function Q3(e) {
  var t = e.seriesModel, r = e.singleAxisModel;
  return r && r.coordinateSystem || t && t.coordinateSystem;
}
function bye(e, t) {
  var r = [];
  return e.eachComponent("singleAxis", function(n, i) {
    var a = new xye(n, e, t);
    a.name = "single_" + i, a.resize(n, t), n.coordinateSystem = a, r.push(a);
  }), e.eachSeries(function(n) {
    if (n.get("coordinateSystem") === "singleAxis") {
      var i = n.getReferringComponents("singleAxis", pr).models[0];
      n.coordinateSystem = i && i.coordinateSystem;
    }
  }), r;
}
var wye = {
  create: bye,
  dimensions: kj
}, eL = ["x", "y"], _ye = ["width", "height"], Sye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.makeElOption = function(r, n, i, a, o) {
      var s = i.axis, l = s.coordinateSystem, u = gb(l, 1 - Vm(s)), c = l.dataToPoint(n)[0], f = a.get("type");
      if (f && f !== "none") {
        var d = UT(a), h = Cye[f](s, c, u);
        h.style = d, r.graphicKey = h.type, r.pointer = h;
      }
      var p = f_(i);
      Ej(
        // @ts-ignore
        n,
        r,
        p,
        i,
        a,
        o
      );
    }, t.prototype.getHandleTransform = function(r, n, i) {
      var a = f_(n, {
        labelInside: !1
      });
      a.labelMargin = i.get(["handle", "margin"]);
      var o = YT(n.axis, r, a);
      return {
        x: o[0],
        y: o[1],
        rotation: a.rotation + (a.labelDirection < 0 ? Math.PI : 0)
      };
    }, t.prototype.updateHandleTransform = function(r, n, i, a) {
      var o = i.axis, s = o.coordinateSystem, l = Vm(o), u = gb(s, l), c = [r.x, r.y];
      c[l] += n[l], c[l] = Math.min(u[1], c[l]), c[l] = Math.max(u[0], c[l]);
      var f = gb(s, 1 - l), d = (f[1] + f[0]) / 2, h = [d, d];
      return h[l] = c[l], {
        x: c[0],
        y: c[1],
        rotation: r.rotation,
        cursorPoint: h,
        tooltipOption: {
          verticalAlign: "middle"
        }
      };
    }, t;
  }(WT)
), Cye = {
  line: function(e, t, r) {
    var n = ZT([t, r[0]], [t, r[1]], Vm(e));
    return {
      type: "Line",
      subPixelOptimize: !0,
      shape: n
    };
  },
  shadow: function(e, t, r) {
    var n = e.getBandWidth(), i = r[1] - r[0];
    return {
      type: "Rect",
      shape: Dj([t - n / 2, r[0]], [n, i], Vm(e))
    };
  }
};
function Vm(e) {
  return e.isHorizontal() ? 0 : 1;
}
function gb(e, t) {
  var r = e.getRect();
  return [r[eL[t]], r[eL[t]] + r[_ye[t]]];
}
var Tye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "single", t;
  }($t)
);
function Aye(e) {
  ot(mp), Ql.registerAxisPointerClass("SingleAxisPointer", Sye), e.registerComponentView(Tye), e.registerComponentView(gye), e.registerComponentModel(Sg), jc(e, "single", Sg, Sg.defaultOption), e.registerCoordinateSystem("single", wye);
}
var Mye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n, i) {
      var a = hf(r);
      e.prototype.init.apply(this, arguments), tL(r, a);
    }, t.prototype.mergeOption = function(r) {
      e.prototype.mergeOption.apply(this, arguments), tL(this.option, r);
    }, t.prototype.getCellSize = function() {
      return this.option.cellSize;
    }, t.type = "calendar", t.defaultOption = {
      // zlevel: 0,
      z: 2,
      left: 80,
      top: 60,
      cellSize: 20,
      // horizontal vertical
      orient: "horizontal",
      // month separate line style
      splitLine: {
        show: !0,
        lineStyle: {
          color: "#000",
          width: 1,
          type: "solid"
        }
      },
      // rect style  temporarily unused emphasis
      itemStyle: {
        color: "#fff",
        borderWidth: 1,
        borderColor: "#ccc"
      },
      // week text style
      dayLabel: {
        show: !0,
        firstDay: 0,
        // start end
        position: "start",
        margin: "50%",
        color: "#000"
      },
      // month text style
      monthLabel: {
        show: !0,
        // start end
        position: "start",
        margin: 5,
        // center or left
        align: "center",
        formatter: null,
        color: "#000"
      },
      // year text style
      yearLabel: {
        show: !0,
        // top bottom left right
        position: null,
        margin: 30,
        formatter: null,
        color: "#ccc",
        fontFamily: "sans-serif",
        fontWeight: "bolder",
        fontSize: 20
      }
    }, t;
  }(at)
);
function tL(e, t) {
  var r = e.cellSize, n;
  le(r) ? n = r : n = e.cellSize = [r, r], n.length === 1 && (n[1] = n[0]);
  var i = ue([0, 1], function(a) {
    return Die(t, a) && (n[a] = "auto"), n[a] != null && n[a] !== "auto";
  });
  us(e, t, {
    type: "box",
    ignoreSize: i
  });
}
var Eye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      var a = this.group;
      a.removeAll();
      var o = r.coordinateSystem, s = o.getRangeInfo(), l = o.getOrient(), u = n.getLocaleModel();
      this._renderDayRect(r, s, a), this._renderLines(r, s, l, a), this._renderYearText(r, s, l, a), this._renderMonthText(r, u, l, a), this._renderWeekText(r, u, s, l, a);
    }, t.prototype._renderDayRect = function(r, n, i) {
      for (var a = r.coordinateSystem, o = r.getModel("itemStyle").getItemStyle(), s = a.getCellWidth(), l = a.getCellHeight(), u = n.start.time; u <= n.end.time; u = a.getNextNDay(u, 1).time) {
        var c = a.dataToRect([u], !1).tl, f = new vt({
          shape: {
            x: c[0],
            y: c[1],
            width: s,
            height: l
          },
          cursor: "default",
          style: o
        });
        i.add(f);
      }
    }, t.prototype._renderLines = function(r, n, i, a) {
      var o = this, s = r.coordinateSystem, l = r.getModel(["splitLine", "lineStyle"]).getLineStyle(), u = r.get(["splitLine", "show"]), c = l.lineWidth;
      this._tlpoints = [], this._blpoints = [], this._firstDayOfMonth = [], this._firstDayPoints = [];
      for (var f = n.start, d = 0; f.time <= n.end.time; d++) {
        p(f.formatedDate), d === 0 && (f = s.getDateInfo(n.start.y + "-" + n.start.m));
        var h = f.date;
        h.setMonth(h.getMonth() + 1), f = s.getDateInfo(h);
      }
      p(s.getNextNDay(n.end.time, 1).formatedDate);
      function p(v) {
        o._firstDayOfMonth.push(s.getDateInfo(v)), o._firstDayPoints.push(s.dataToRect([v], !1).tl);
        var g = o._getLinePointsOfOneWeek(r, v, i);
        o._tlpoints.push(g[0]), o._blpoints.push(g[g.length - 1]), u && o._drawSplitline(g, l, a);
      }
      u && this._drawSplitline(o._getEdgesPoints(o._tlpoints, c, i), l, a), u && this._drawSplitline(o._getEdgesPoints(o._blpoints, c, i), l, a);
    }, t.prototype._getEdgesPoints = function(r, n, i) {
      var a = [r[0].slice(), r[r.length - 1].slice()], o = i === "horizontal" ? 0 : 1;
      return a[0][o] = a[0][o] - n / 2, a[1][o] = a[1][o] + n / 2, a;
    }, t.prototype._drawSplitline = function(r, n, i) {
      var a = new en({
        z2: 20,
        shape: {
          points: r
        },
        style: n
      });
      i.add(a);
    }, t.prototype._getLinePointsOfOneWeek = function(r, n, i) {
      for (var a = r.coordinateSystem, o = a.getDateInfo(n), s = [], l = 0; l < 7; l++) {
        var u = a.getNextNDay(o.time, l), c = a.dataToRect([u.time], !1);
        s[2 * u.day] = c.tl, s[2 * u.day + 1] = c[i === "horizontal" ? "bl" : "tr"];
      }
      return s;
    }, t.prototype._formatterLabel = function(r, n) {
      return ge(r) && r ? Tie(r, n) : Ee(r) ? r(n) : n.nameMap;
    }, t.prototype._yearTextPositionControl = function(r, n, i, a, o) {
      var s = n[0], l = n[1], u = ["center", "bottom"];
      a === "bottom" ? (l += o, u = ["center", "top"]) : a === "left" ? s -= o : a === "right" ? (s += o, u = ["center", "top"]) : l -= o;
      var c = 0;
      return (a === "left" || a === "right") && (c = Math.PI / 2), {
        rotation: c,
        x: s,
        y: l,
        style: {
          align: u[0],
          verticalAlign: u[1]
        }
      };
    }, t.prototype._renderYearText = function(r, n, i, a) {
      var o = r.getModel("yearLabel");
      if (o.get("show")) {
        var s = o.get("margin"), l = o.get("position");
        l || (l = i !== "horizontal" ? "top" : "left");
        var u = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]], c = (u[0][0] + u[1][0]) / 2, f = (u[0][1] + u[1][1]) / 2, d = i === "horizontal" ? 0 : 1, h = {
          top: [c, u[d][1]],
          bottom: [c, u[1 - d][1]],
          left: [u[1 - d][0], f],
          right: [u[d][0], f]
        }, p = n.start.y;
        +n.end.y > +n.start.y && (p = p + "-" + n.end.y);
        var v = o.get("formatter"), g = {
          start: n.start.y,
          end: n.end.y,
          nameMap: p
        }, m = this._formatterLabel(v, g), y = new pt({
          z2: 30,
          style: Vt(o, {
            text: m
          }),
          silent: o.get("silent")
        });
        y.attr(this._yearTextPositionControl(y, h[l], i, l, s)), a.add(y);
      }
    }, t.prototype._monthTextPositionControl = function(r, n, i, a, o) {
      var s = "left", l = "top", u = r[0], c = r[1];
      return i === "horizontal" ? (c = c + o, n && (s = "center"), a === "start" && (l = "bottom")) : (u = u + o, n && (l = "middle"), a === "start" && (s = "right")), {
        x: u,
        y: c,
        align: s,
        verticalAlign: l
      };
    }, t.prototype._renderMonthText = function(r, n, i, a) {
      var o = r.getModel("monthLabel");
      if (o.get("show")) {
        var s = o.get("nameMap"), l = o.get("margin"), u = o.get("position"), c = o.get("align"), f = [this._tlpoints, this._blpoints];
        (!s || ge(s)) && (s && (n = yw(s) || n), s = n.get(["time", "monthAbbr"]) || []);
        var d = u === "start" ? 0 : 1, h = i === "horizontal" ? 0 : 1;
        l = u === "start" ? -l : l;
        for (var p = c === "center", v = o.get("silent"), g = 0; g < f[d].length - 1; g++) {
          var m = f[d][g].slice(), y = this._firstDayOfMonth[g];
          if (p) {
            var b = this._firstDayPoints[g];
            m[h] = (b[h] + f[0][g + 1][h]) / 2;
          }
          var w = o.get("formatter"), _ = s[+y.m - 1], S = {
            yyyy: y.y,
            yy: (y.y + "").slice(2),
            MM: y.m,
            M: +y.m,
            nameMap: _
          }, C = this._formatterLabel(w, S), A = new pt({
            z2: 30,
            style: ae(Vt(o, {
              text: C
            }), this._monthTextPositionControl(m, p, i, u, l)),
            silent: v
          });
          a.add(A);
        }
      }
    }, t.prototype._weekTextPositionControl = function(r, n, i, a, o) {
      var s = "center", l = "middle", u = r[0], c = r[1], f = i === "start";
      return n === "horizontal" ? (u = u + a + (f ? 1 : -1) * o[0] / 2, s = f ? "right" : "left") : (c = c + a + (f ? 1 : -1) * o[1] / 2, l = f ? "bottom" : "top"), {
        x: u,
        y: c,
        align: s,
        verticalAlign: l
      };
    }, t.prototype._renderWeekText = function(r, n, i, a, o) {
      var s = r.getModel("dayLabel");
      if (s.get("show")) {
        var l = r.coordinateSystem, u = s.get("position"), c = s.get("nameMap"), f = s.get("margin"), d = l.getFirstDayOfWeek();
        if (!c || ge(c)) {
          c && (n = yw(c) || n);
          var h = n.get(["time", "dayOfWeekShort"]);
          c = h || ue(n.get(["time", "dayOfWeekAbbr"]), function(S) {
            return S[0];
          });
        }
        var p = l.getNextNDay(i.end.time, 7 - i.lweek).time, v = [l.getCellWidth(), l.getCellHeight()];
        f = pe(f, Math.min(v[1], v[0])), u === "start" && (p = l.getNextNDay(i.start.time, -(7 + i.fweek)).time, f = -f);
        for (var g = s.get("silent"), m = 0; m < 7; m++) {
          var y = l.getNextNDay(p, m), b = l.dataToRect([y.time], !1).center, w = m;
          w = Math.abs((m + d) % 7);
          var _ = new pt({
            z2: 30,
            style: ae(Vt(s, {
              text: c[w]
            }), this._weekTextPositionControl(b, a, u, f, v)),
            silent: g
          });
          o.add(_);
        }
      }
    }, t.type = "calendar", t;
  }($t)
), mb = 864e5, Dye = (
  /** @class */
  function() {
    function e(t, r, n) {
      this.type = "calendar", this.dimensions = e.dimensions, this.getDimensionsInfo = e.getDimensionsInfo, this._model = t;
    }
    return e.getDimensionsInfo = function() {
      return [{
        name: "time",
        type: "time"
      }, "value"];
    }, e.prototype.getRangeInfo = function() {
      return this._rangeInfo;
    }, e.prototype.getModel = function() {
      return this._model;
    }, e.prototype.getRect = function() {
      return this._rect;
    }, e.prototype.getCellWidth = function() {
      return this._sw;
    }, e.prototype.getCellHeight = function() {
      return this._sh;
    }, e.prototype.getOrient = function() {
      return this._orient;
    }, e.prototype.getFirstDayOfWeek = function() {
      return this._firstDayOfWeek;
    }, e.prototype.getDateInfo = function(t) {
      t = In(t);
      var r = t.getFullYear(), n = t.getMonth() + 1, i = n < 10 ? "0" + n : "" + n, a = t.getDate(), o = a < 10 ? "0" + a : "" + a, s = t.getDay();
      return s = Math.abs((s + 7 - this.getFirstDayOfWeek()) % 7), {
        y: r + "",
        m: i,
        d: o,
        day: s,
        time: t.getTime(),
        formatedDate: r + "-" + i + "-" + o,
        date: t
      };
    }, e.prototype.getNextNDay = function(t, r) {
      return r = r || 0, r === 0 ? this.getDateInfo(t) : (t = new Date(this.getDateInfo(t).time), t.setDate(t.getDate() + r), this.getDateInfo(t));
    }, e.prototype.update = function(t, r) {
      this._firstDayOfWeek = +this._model.getModel("dayLabel").get("firstDay"), this._orient = this._model.get("orient"), this._lineWidth = this._model.getModel("itemStyle").getItemStyle().lineWidth || 0, this._rangeInfo = this._getRangeInfo(this._initRangeOption());
      var n = this._rangeInfo.weeks || 1, i = ["width", "height"], a = this._model.getCellSize().slice(), o = this._model.getBoxLayoutParams(), s = this._orient === "horizontal" ? [n, 7] : [7, n];
      j([0, 1], function(f) {
        c(a, f) && (o[i[f]] = a[f] * s[f]);
      });
      var l = {
        width: r.getWidth(),
        height: r.getHeight()
      }, u = this._rect = vr(o, l);
      j([0, 1], function(f) {
        c(a, f) || (a[f] = u[i[f]] / s[f]);
      });
      function c(f, d) {
        return f[d] != null && f[d] !== "auto";
      }
      this._sw = a[0], this._sh = a[1];
    }, e.prototype.dataToPoint = function(t, r) {
      le(t) && (t = t[0]), r == null && (r = !0);
      var n = this.getDateInfo(t), i = this._rangeInfo, a = n.formatedDate;
      if (r && !(n.time >= i.start.time && n.time < i.end.time + mb))
        return [NaN, NaN];
      var o = n.day, s = this._getRangeInfo([i.start.time, a]).nthWeek;
      return this._orient === "vertical" ? [this._rect.x + o * this._sw + this._sw / 2, this._rect.y + s * this._sh + this._sh / 2] : [this._rect.x + s * this._sw + this._sw / 2, this._rect.y + o * this._sh + this._sh / 2];
    }, e.prototype.pointToData = function(t) {
      var r = this.pointToDate(t);
      return r && r.time;
    }, e.prototype.dataToRect = function(t, r) {
      var n = this.dataToPoint(t, r);
      return {
        contentShape: {
          x: n[0] - (this._sw - this._lineWidth) / 2,
          y: n[1] - (this._sh - this._lineWidth) / 2,
          width: this._sw - this._lineWidth,
          height: this._sh - this._lineWidth
        },
        center: n,
        tl: [n[0] - this._sw / 2, n[1] - this._sh / 2],
        tr: [n[0] + this._sw / 2, n[1] - this._sh / 2],
        br: [n[0] + this._sw / 2, n[1] + this._sh / 2],
        bl: [n[0] - this._sw / 2, n[1] + this._sh / 2]
      };
    }, e.prototype.pointToDate = function(t) {
      var r = Math.floor((t[0] - this._rect.x) / this._sw) + 1, n = Math.floor((t[1] - this._rect.y) / this._sh) + 1, i = this._rangeInfo.range;
      return this._orient === "vertical" ? this._getDateByWeeksAndDay(n, r - 1, i) : this._getDateByWeeksAndDay(r, n - 1, i);
    }, e.prototype.convertToPixel = function(t, r, n) {
      var i = rL(r);
      return i === this ? i.dataToPoint(n) : null;
    }, e.prototype.convertFromPixel = function(t, r, n) {
      var i = rL(r);
      return i === this ? i.pointToData(n) : null;
    }, e.prototype.containPoint = function(t) {
      return console.warn("Not implemented."), !1;
    }, e.prototype._initRangeOption = function() {
      var t = this._model.get("range"), r;
      if (le(t) && t.length === 1 && (t = t[0]), le(t))
        r = t;
      else {
        var n = t.toString();
        if (/^\d{4}$/.test(n) && (r = [n + "-01-01", n + "-12-31"]), /^\d{4}[\/|-]\d{1,2}$/.test(n)) {
          var i = this.getDateInfo(n), a = i.date;
          a.setMonth(a.getMonth() + 1);
          var o = this.getNextNDay(a, -1);
          r = [i.formatedDate, o.formatedDate];
        }
        /^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n) && (r = [n, n]);
      }
      if (!r)
        return process.env.NODE_ENV !== "production" && Kn("Invalid date range."), t;
      var s = this._getRangeInfo(r);
      return s.start.time > s.end.time && r.reverse(), r;
    }, e.prototype._getRangeInfo = function(t) {
      var r = [this.getDateInfo(t[0]), this.getDateInfo(t[1])], n;
      r[0].time > r[1].time && (n = !0, r.reverse());
      var i = Math.floor(r[1].time / mb) - Math.floor(r[0].time / mb) + 1, a = new Date(r[0].time), o = a.getDate(), s = r[1].date.getDate();
      a.setDate(o + i - 1);
      var l = a.getDate();
      if (l !== s)
        for (var u = a.getTime() - r[1].time > 0 ? 1 : -1; (l = a.getDate()) !== s && (a.getTime() - r[1].time) * u > 0; )
          i -= u, a.setDate(l - u);
      var c = Math.floor((i + r[0].day + 6) / 7), f = n ? -c + 1 : c - 1;
      return n && r.reverse(), {
        range: [r[0].formatedDate, r[1].formatedDate],
        start: r[0],
        end: r[1],
        allDay: i,
        weeks: c,
        // From 0.
        nthWeek: f,
        fweek: r[0].day,
        lweek: r[1].day
      };
    }, e.prototype._getDateByWeeksAndDay = function(t, r, n) {
      var i = this._getRangeInfo(n);
      if (t > i.weeks || t === 0 && r < i.fweek || t === i.weeks && r > i.lweek)
        return null;
      var a = (t - 1) * 7 - i.fweek + r, o = new Date(i.start.time);
      return o.setDate(+i.start.d + a), this.getDateInfo(o);
    }, e.create = function(t, r) {
      var n = [];
      return t.eachComponent("calendar", function(i) {
        var a = new e(i);
        n.push(a), i.coordinateSystem = a;
      }), t.eachSeries(function(i) {
        i.get("coordinateSystem") === "calendar" && (i.coordinateSystem = n[i.get("calendarIndex") || 0]);
      }), n;
    }, e.dimensions = ["time", "value"], e;
  }()
);
function rL(e) {
  var t = e.calendarModel, r = e.seriesModel, n = t ? t.coordinateSystem : r ? r.coordinateSystem : null;
  return n;
}
function Nye(e) {
  e.registerComponentModel(Mye), e.registerComponentView(Eye), e.registerCoordinateSystem("calendar", Dye);
}
function Iye(e, t) {
  var r = e.existing;
  if (t.id = e.keyInfo.id, !t.type && r && (t.type = r.type), t.parentId == null) {
    var n = t.parentOption;
    n ? t.parentId = n.id : r && (t.parentId = r.parentId);
  }
  t.parentOption = null;
}
function nL(e, t) {
  var r;
  return j(t, function(n) {
    e[n] != null && e[n] !== "auto" && (r = !0);
  }), r;
}
function Lye(e, t, r) {
  var n = ae({}, r), i = e[t], a = r.$action || "merge";
  if (a === "merge")
    if (i) {
      if (process.env.NODE_ENV !== "production") {
        var o = r.type;
        Le(!o || i.type === o, 'Please set $action: "replace" to change `type`');
      }
      Xe(i, n, !0), us(i, n, {
        ignoreSize: !0
      }), T6(r, i), kv(r, i), kv(r, i, "shape"), kv(r, i, "style"), kv(r, i, "extra"), r.clipPath = i.clipPath;
    } else
      e[t] = n;
  else a === "replace" ? e[t] = n : a === "remove" && i && (e[t] = null);
}
var Oj = ["transition", "enterFrom", "leaveTo"], Rye = Oj.concat(["enterAnimation", "updateAnimation", "leaveAnimation"]);
function kv(e, t, r) {
  if (r && (!e[r] && t[r] && (e[r] = {}), e = e[r], t = t[r]), !(!e || !t))
    for (var n = r ? Oj : Rye, i = 0; i < n.length; i++) {
      var a = n[i];
      e[a] == null && t[a] != null && (e[a] = t[a]);
    }
}
function Pye(e, t) {
  if (e && (e.hv = t.hv = [
    // Rigid body, don't care about `width`.
    nL(t, ["left", "right"]),
    // Rigid body, don't care about `height`.
    nL(t, ["top", "bottom"])
  ], e.type === "group")) {
    var r = e, n = t;
    r.width == null && (r.width = n.width = 0), r.height == null && (r.height = n.height = 0);
  }
}
var kye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.preventAutoZ = !0, r;
    }
    return t.prototype.mergeOption = function(r, n) {
      var i = this.option.elements;
      this.option.elements = null, e.prototype.mergeOption.call(this, r, n), this.option.elements = i;
    }, t.prototype.optionUpdated = function(r, n) {
      var i = this.option, a = (n ? i : r).elements, o = i.elements = n ? [] : i.elements, s = [];
      this._flatten(a, s, null);
      var l = S9(o, s, "normalMerge"), u = this._elOptionsToUpdate = [];
      j(l, function(c, f) {
        var d = c.newOption;
        process.env.NODE_ENV !== "production" && Le(Ne(d) || c.existing, "Empty graphic option definition"), d && (u.push(d), Iye(c, d), Lye(o, f, d), Pye(o[f], d));
      }, this), i.elements = Ct(o, function(c) {
        return c && delete c.$action, c != null;
      });
    }, t.prototype._flatten = function(r, n, i) {
      j(r, function(a) {
        if (a) {
          i && (a.parentOption = i), n.push(a);
          var o = a.children;
          o && o.length && this._flatten(o, n, a), delete a.children;
        }
      }, this);
    }, t.prototype.useElOptionsToUpdate = function() {
      var r = this._elOptionsToUpdate;
      return this._elOptionsToUpdate = null, r;
    }, t.type = "graphic", t.defaultOption = {
      elements: []
      // parentId: null
    }, t;
  }(at)
), iL = {
  // Reserved but not supported in graphic component.
  path: null,
  compoundPath: null,
  // Supported in graphic component.
  group: Fe,
  image: Ar,
  text: pt
}, Gn = yt(), Oye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function() {
      this._elMap = Ce();
    }, t.prototype.render = function(r, n, i) {
      r !== this._lastGraphicModel && this._clear(), this._lastGraphicModel = r, this._updateElements(r), this._relocate(r, i);
    }, t.prototype._updateElements = function(r) {
      var n = r.useElOptionsToUpdate();
      if (n) {
        var i = this._elMap, a = this.group, o = r.get("z"), s = r.get("zlevel");
        j(n, function(l) {
          var u = yr(l.id, null), c = u != null ? i.get(u) : null, f = yr(l.parentId, null), d = f != null ? i.get(f) : a, h = l.type, p = l.style;
          h === "text" && p && l.hv && l.hv[1] && (p.textVerticalAlign = p.textBaseline = p.verticalAlign = p.align = null);
          var v = l.textContent, g = l.textConfig;
          if (p && vj(p, h, !!g, !!v)) {
            var m = gj(p, h, !0);
            !g && m.textConfig && (g = l.textConfig = m.textConfig), !v && m.textContent && (v = m.textContent);
          }
          var y = zye(l);
          process.env.NODE_ENV !== "production" && c && Le(d === c.parent, "Changing parent is not supported.");
          var b = l.$action || "merge", w = b === "merge", _ = b === "replace";
          if (w) {
            var S = !c, C = c;
            S ? C = aL(u, d, l.type, i) : (C && (Gn(C).isNew = !1), wj(C)), C && (wg(C, y, r, {
              isInit: S
            }), oL(C, l, o, s));
          } else if (_) {
            Cg(c, l, i, r);
            var A = aL(u, d, l.type, i);
            A && (wg(A, y, r, {
              isInit: !0
            }), oL(A, l, o, s));
          } else b === "remove" && (yj(c, l), Cg(c, l, i, r));
          var M = i.get(u);
          if (M && v)
            if (w) {
              var D = M.getTextContent();
              D ? D.attr(v) : M.setTextContent(new pt(v));
            } else _ && M.setTextContent(new pt(v));
          if (M) {
            var N = l.clipPath;
            if (N) {
              var R = N.type, O = void 0, S = !1;
              if (w) {
                var E = M.getClipPath();
                S = !E || Gn(E).type !== R, O = S ? d_(R) : E;
              } else _ && (S = !0, O = d_(R));
              M.setClipPath(O), wg(O, N, r, {
                isInit: S
              }), Om(O, N.keyframeAnimation, r);
            }
            var L = Gn(M);
            M.setTextConfig(g), L.option = l, jye(M, r, l), Yl({
              el: M,
              componentModel: r,
              itemName: M.name,
              itemTooltipOption: l.tooltip
            }), Om(M, l.keyframeAnimation, r);
          }
        });
      }
    }, t.prototype._relocate = function(r, n) {
      for (var i = r.option.elements, a = this.group, o = this._elMap, s = n.getWidth(), l = n.getHeight(), u = ["x", "y"], c = 0; c < i.length; c++) {
        var f = i[c], d = yr(f.id, null), h = d != null ? o.get(d) : null;
        if (!(!h || !h.isGroup)) {
          var p = h.parent, v = p === a, g = Gn(h), m = Gn(p);
          g.width = pe(g.option.width, v ? s : m.width) || 0, g.height = pe(g.option.height, v ? l : m.height) || 0;
        }
      }
      for (var c = i.length - 1; c >= 0; c--) {
        var f = i[c], d = yr(f.id, null), h = d != null ? o.get(d) : null;
        if (h) {
          var p = h.parent, m = Gn(p), y = p === a ? {
            width: s,
            height: l
          } : {
            width: m.width,
            height: m.height
          }, b = {}, w = Ky(h, f, y, null, {
            hv: f.hv,
            boundingMode: f.bounding
          }, b);
          if (!Gn(h).isNew && w) {
            for (var _ = f.transition, S = {}, C = 0; C < u.length; C++) {
              var A = u[C], M = b[A];
              _ && (Dl(_) || rt(_, A) >= 0) ? S[A] = M : h[A] = M;
            }
            _t(h, S, r, 0);
          } else
            h.attr(b);
        }
      }
    }, t.prototype._clear = function() {
      var r = this, n = this._elMap;
      n.each(function(i) {
        Cg(i, Gn(i).option, n, r._lastGraphicModel);
      }), this._elMap = Ce();
    }, t.prototype.dispose = function() {
      this._clear();
    }, t.type = "graphic", t;
  }($t)
);
function d_(e) {
  process.env.NODE_ENV !== "production" && Le(e, "graphic type MUST be set");
  var t = be(iL, e) ? iL[e] : Hy(e);
  process.env.NODE_ENV !== "production" && Le(t, "graphic type " + e + " can not be found");
  var r = new t({});
  return Gn(r).type = e, r;
}
function aL(e, t, r, n) {
  var i = d_(r);
  return t.add(i), n.set(e, i), Gn(i).id = e, Gn(i).isNew = !0, i;
}
function Cg(e, t, r, n) {
  var i = e && e.parent;
  i && (e.type === "group" && e.traverse(function(a) {
    Cg(a, t, r, n);
  }), h0(e, t, n), r.removeKey(Gn(e).id));
}
function oL(e, t, r, n) {
  e.isGroup || j([
    ["cursor", ri.prototype.cursor],
    // We should not support configure z and zlevel in the element level.
    // But seems we didn't limit it previously. So here still use it to avoid breaking.
    ["zlevel", n || 0],
    ["z", r || 0],
    // z2 must not be null/undefined, otherwise sort error may occur.
    ["z2", 0]
  ], function(i) {
    var a = i[0];
    be(t, a) ? e[a] = Ge(t[a], i[1]) : e[a] == null && (e[a] = i[1]);
  }), j(ut(t), function(i) {
    if (i.indexOf("on") === 0) {
      var a = t[i];
      e[i] = Ee(a) ? a : null;
    }
  }), be(t, "draggable") && (e.draggable = t.draggable), t.name != null && (e.name = t.name), t.id != null && (e.id = t.id);
}
function zye(e) {
  return e = ae({}, e), j(["id", "parentId", "$action", "hv", "bounding", "textContent", "clipPath"].concat(C6), function(t) {
    delete e[t];
  }), e;
}
function jye(e, t, r) {
  var n = He(e).eventData;
  !e.silent && !e.ignore && !n && (n = He(e).eventData = {
    componentType: "graphic",
    componentIndex: t.componentIndex,
    name: e.name
  }), n && (n.info = r.info);
}
function Vye(e) {
  e.registerComponentModel(kye), e.registerComponentView(Oye), e.registerPreprocessor(function(t) {
    var r = t.graphic;
    le(r) ? !r[0] || !r[0].elements ? t.graphic = [{
      elements: r
    }] : t.graphic = [t.graphic[0]] : r && !r.elements && (t.graphic = [{
      elements: [r]
    }]);
  });
}
var sL = ["x", "y", "radius", "angle", "single"], Bye = ["cartesian2d", "polar", "singleAxis"];
function Fye(e) {
  var t = e.get("coordinateSystem");
  return rt(Bye, t) >= 0;
}
function Ho(e) {
  return process.env.NODE_ENV !== "production" && Le(e), e + "Axis";
}
function $ye(e, t) {
  var r = Ce(), n = [], i = Ce();
  e.eachComponent({
    mainType: "dataZoom",
    query: t
  }, function(c) {
    i.get(c.uid) || s(c);
  });
  var a;
  do
    a = !1, e.eachComponent("dataZoom", o);
  while (a);
  function o(c) {
    !i.get(c.uid) && l(c) && (s(c), a = !0);
  }
  function s(c) {
    i.set(c.uid, !0), n.push(c), u(c);
  }
  function l(c) {
    var f = !1;
    return c.eachTargetAxis(function(d, h) {
      var p = r.get(d);
      p && p[h] && (f = !0);
    }), f;
  }
  function u(c) {
    c.eachTargetAxis(function(f, d) {
      (r.get(f) || r.set(f, []))[d] = !0;
    });
  }
  return n;
}
function zj(e) {
  var t = e.ecModel, r = {
    infoList: [],
    infoMap: Ce()
  };
  return e.eachTargetAxis(function(n, i) {
    var a = t.getComponent(Ho(n), i);
    if (a) {
      var o = a.getCoordSysModel();
      if (o) {
        var s = o.uid, l = r.infoMap.get(s);
        l || (l = {
          model: o,
          axisModels: []
        }, r.infoList.push(l), r.infoMap.set(s, l)), l.axisModels.push(a);
      }
    }
  }), r;
}
var yb = (
  /** @class */
  function() {
    function e() {
      this.indexList = [], this.indexMap = [];
    }
    return e.prototype.add = function(t) {
      this.indexMap[t] || (this.indexList.push(t), this.indexMap[t] = !0);
    }, e;
  }()
), Rh = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._autoThrottle = !0, r._noTarget = !0, r._rangePropMode = ["percent", "percent"], r;
    }
    return t.prototype.init = function(r, n, i) {
      var a = lL(r);
      this.settledOption = a, this.mergeDefaultAndTheme(r, i), this._doInit(a);
    }, t.prototype.mergeOption = function(r) {
      var n = lL(r);
      Xe(this.option, r, !0), Xe(this.settledOption, n, !0), this._doInit(n);
    }, t.prototype._doInit = function(r) {
      var n = this.option;
      this._setDefaultThrottle(r), this._updateRangeUse(r);
      var i = this.settledOption;
      j([["start", "startValue"], ["end", "endValue"]], function(a, o) {
        this._rangePropMode[o] === "value" && (n[a[0]] = i[a[0]] = null);
      }, this), this._resetTarget();
    }, t.prototype._resetTarget = function() {
      var r = this.get("orient", !0), n = this._targetAxisInfoMap = Ce(), i = this._fillSpecifiedTargetAxis(n);
      i ? this._orient = r || this._makeAutoOrientByTargetAxis() : (this._orient = r || "horizontal", this._fillAutoTargetAxisByOrient(n, this._orient)), this._noTarget = !0, n.each(function(a) {
        a.indexList.length && (this._noTarget = !1);
      }, this);
    }, t.prototype._fillSpecifiedTargetAxis = function(r) {
      var n = !1;
      return j(sL, function(i) {
        var a = this.getReferringComponents(Ho(i), mre);
        if (a.specified) {
          n = !0;
          var o = new yb();
          j(a.models, function(s) {
            o.add(s.componentIndex);
          }), r.set(i, o);
        }
      }, this), n;
    }, t.prototype._fillAutoTargetAxisByOrient = function(r, n) {
      var i = this.ecModel, a = !0;
      if (a) {
        var o = n === "vertical" ? "y" : "x", s = i.findComponents({
          mainType: o + "Axis"
        });
        l(s, o);
      }
      if (a) {
        var s = i.findComponents({
          mainType: "singleAxis",
          filter: function(c) {
            return c.get("orient", !0) === n;
          }
        });
        l(s, "single");
      }
      function l(u, c) {
        var f = u[0];
        if (f) {
          var d = new yb();
          if (d.add(f.componentIndex), r.set(c, d), a = !1, c === "x" || c === "y") {
            var h = f.getReferringComponents("grid", pr).models[0];
            h && j(u, function(p) {
              f.componentIndex !== p.componentIndex && h === p.getReferringComponents("grid", pr).models[0] && d.add(p.componentIndex);
            });
          }
        }
      }
      a && j(sL, function(u) {
        if (a) {
          var c = i.findComponents({
            mainType: Ho(u),
            filter: function(d) {
              return d.get("type", !0) === "category";
            }
          });
          if (c[0]) {
            var f = new yb();
            f.add(c[0].componentIndex), r.set(u, f), a = !1;
          }
        }
      }, this);
    }, t.prototype._makeAutoOrientByTargetAxis = function() {
      var r;
      return this.eachTargetAxis(function(n) {
        !r && (r = n);
      }, this), r === "y" ? "vertical" : "horizontal";
    }, t.prototype._setDefaultThrottle = function(r) {
      if (r.hasOwnProperty("throttle") && (this._autoThrottle = !1), this._autoThrottle) {
        var n = this.ecModel.option;
        this.option.throttle = n.animation && n.animationDurationUpdate > 0 ? 100 : 20;
      }
    }, t.prototype._updateRangeUse = function(r) {
      var n = this._rangePropMode, i = this.get("rangeMode");
      j([["start", "startValue"], ["end", "endValue"]], function(a, o) {
        var s = r[a[0]] != null, l = r[a[1]] != null;
        s && !l ? n[o] = "percent" : !s && l ? n[o] = "value" : i ? n[o] = i[o] : s && (n[o] = "percent");
      });
    }, t.prototype.noTarget = function() {
      return this._noTarget;
    }, t.prototype.getFirstTargetAxisModel = function() {
      var r;
      return this.eachTargetAxis(function(n, i) {
        r == null && (r = this.ecModel.getComponent(Ho(n), i));
      }, this), r;
    }, t.prototype.eachTargetAxis = function(r, n) {
      this._targetAxisInfoMap.each(function(i, a) {
        j(i.indexList, function(o) {
          r.call(n, a, o);
        });
      });
    }, t.prototype.getAxisProxy = function(r, n) {
      var i = this.getAxisModel(r, n);
      if (i)
        return i.__dzAxisProxy;
    }, t.prototype.getAxisModel = function(r, n) {
      process.env.NODE_ENV !== "production" && Le(r && n != null);
      var i = this._targetAxisInfoMap.get(r);
      if (i && i.indexMap[n])
        return this.ecModel.getComponent(Ho(r), n);
    }, t.prototype.setRawRange = function(r) {
      var n = this.option, i = this.settledOption;
      j([["start", "startValue"], ["end", "endValue"]], function(a) {
        (r[a[0]] != null || r[a[1]] != null) && (n[a[0]] = i[a[0]] = r[a[0]], n[a[1]] = i[a[1]] = r[a[1]]);
      }, this), this._updateRangeUse(r);
    }, t.prototype.setCalculatedRange = function(r) {
      var n = this.option;
      j(["start", "startValue", "end", "endValue"], function(i) {
        n[i] = r[i];
      });
    }, t.prototype.getPercentRange = function() {
      var r = this.findRepresentativeAxisProxy();
      if (r)
        return r.getDataPercentWindow();
    }, t.prototype.getValueRange = function(r, n) {
      if (r == null && n == null) {
        var i = this.findRepresentativeAxisProxy();
        if (i)
          return i.getDataValueWindow();
      } else
        return this.getAxisProxy(r, n).getDataValueWindow();
    }, t.prototype.findRepresentativeAxisProxy = function(r) {
      if (r)
        return r.__dzAxisProxy;
      for (var n, i = this._targetAxisInfoMap.keys(), a = 0; a < i.length; a++)
        for (var o = i[a], s = this._targetAxisInfoMap.get(o), l = 0; l < s.indexList.length; l++) {
          var u = this.getAxisProxy(o, s.indexList[l]);
          if (u.hostedBy(this))
            return u;
          n || (n = u);
        }
      return n;
    }, t.prototype.getRangePropMode = function() {
      return this._rangePropMode.slice();
    }, t.prototype.getOrient = function() {
      return process.env.NODE_ENV !== "production" && Le(this._orient), this._orient;
    }, t.type = "dataZoom", t.dependencies = ["xAxis", "yAxis", "radiusAxis", "angleAxis", "singleAxis", "series", "toolbox"], t.defaultOption = {
      // zlevel: 0,
      z: 4,
      filterMode: "filter",
      start: 0,
      end: 100
    }, t;
  }(at)
);
function lL(e) {
  var t = {};
  return j(["start", "end", "startValue", "endValue", "throttle"], function(r) {
    e.hasOwnProperty(r) && (t[r] = e[r]);
  }), t;
}
var Hye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "dataZoom.select", t;
  }(Rh)
), JT = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i, a) {
      this.dataZoomModel = r, this.ecModel = n, this.api = i;
    }, t.type = "dataZoom", t;
  }($t)
), Gye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "dataZoom.select", t;
  }(JT)
), Ku = j, uL = An, Wye = (
  /** @class */
  function() {
    function e(t, r, n, i) {
      this._dimName = t, this._axisIndex = r, this.ecModel = i, this._dataZoomModel = n;
    }
    return e.prototype.hostedBy = function(t) {
      return this._dataZoomModel === t;
    }, e.prototype.getDataValueWindow = function() {
      return this._valueWindow.slice();
    }, e.prototype.getDataPercentWindow = function() {
      return this._percentWindow.slice();
    }, e.prototype.getTargetSeriesModels = function() {
      var t = [];
      return this.ecModel.eachSeries(function(r) {
        if (Fye(r)) {
          var n = Ho(this._dimName), i = r.getReferringComponents(n, pr).models[0];
          i && this._axisIndex === i.componentIndex && t.push(r);
        }
      }, this), t;
    }, e.prototype.getAxisModel = function() {
      return this.ecModel.getComponent(this._dimName + "Axis", this._axisIndex);
    }, e.prototype.getMinMaxSpan = function() {
      return ze(this._minMaxSpan);
    }, e.prototype.calculateDataWindow = function(t) {
      var r = this._dataExtent, n = this.getAxisModel(), i = n.axis.scale, a = this._dataZoomModel.getRangePropMode(), o = [0, 100], s = [], l = [], u;
      Ku(["start", "end"], function(d, h) {
        var p = t[d], v = t[d + "Value"];
        a[h] === "percent" ? (p == null && (p = o[h]), v = i.parse(Mt(p, o, r))) : (u = !0, v = v == null ? r[h] : i.parse(v), p = Mt(v, r, o)), l[h] = v == null || isNaN(v) ? r[h] : v, s[h] = p == null || isNaN(p) ? o[h] : p;
      }), uL(l), uL(s);
      var c = this._minMaxSpan;
      u ? f(l, s, r, o, !1) : f(s, l, o, r, !0);
      function f(d, h, p, v, g) {
        var m = g ? "Span" : "ValueSpan";
        eu(0, d, p, "all", c["min" + m], c["max" + m]);
        for (var y = 0; y < 2; y++)
          h[y] = Mt(d[y], p, v, !0), g && (h[y] = i.parse(h[y]));
      }
      return {
        valueWindow: l,
        percentWindow: s
      };
    }, e.prototype.reset = function(t) {
      if (t === this._dataZoomModel) {
        var r = this.getTargetSeriesModels();
        this._dataExtent = Uye(this, this._dimName, r), this._updateMinMaxSpan();
        var n = this.calculateDataWindow(t.settledOption);
        this._valueWindow = n.valueWindow, this._percentWindow = n.percentWindow, this._setAxisModel();
      }
    }, e.prototype.filterData = function(t, r) {
      if (t !== this._dataZoomModel)
        return;
      var n = this._dimName, i = this.getTargetSeriesModels(), a = t.get("filterMode"), o = this._valueWindow;
      if (a === "none")
        return;
      Ku(i, function(l) {
        var u = l.getData(), c = u.mapDimensionsAll(n);
        if (c.length) {
          if (a === "weakFilter") {
            var f = u.getStore(), d = ue(c, function(h) {
              return u.getDimensionIndex(h);
            }, u);
            u.filterSelf(function(h) {
              for (var p, v, g, m = 0; m < c.length; m++) {
                var y = f.get(d[m], h), b = !isNaN(y), w = y < o[0], _ = y > o[1];
                if (b && !w && !_)
                  return !0;
                b && (g = !0), w && (p = !0), _ && (v = !0);
              }
              return g && p && v;
            });
          } else
            Ku(c, function(h) {
              if (a === "empty")
                l.setData(u = u.map(h, function(v) {
                  return s(v) ? v : NaN;
                }));
              else {
                var p = {};
                p[h] = o, u.selectRange(p);
              }
            });
          Ku(c, function(h) {
            u.setApproximateExtent(o, h);
          });
        }
      });
      function s(l) {
        return l >= o[0] && l <= o[1];
      }
    }, e.prototype._updateMinMaxSpan = function() {
      var t = this._minMaxSpan = {}, r = this._dataZoomModel, n = this._dataExtent;
      Ku(["min", "max"], function(i) {
        var a = r.get(i + "Span"), o = r.get(i + "ValueSpan");
        o != null && (o = this.getAxisModel().axis.scale.parse(o)), o != null ? a = Mt(n[0] + o, n, [0, 100], !0) : a != null && (o = Mt(a, [0, 100], n, !0) - n[0]), t[i + "Span"] = a, t[i + "ValueSpan"] = o;
      }, this);
    }, e.prototype._setAxisModel = function() {
      var t = this.getAxisModel(), r = this._percentWindow, n = this._valueWindow;
      if (r) {
        var i = rC(n, [0, 500]);
        i = Math.min(i, 20);
        var a = t.axis.scale.rawExtentInfo;
        r[0] !== 0 && a.setDeterminedMinMax("min", +n[0].toFixed(i)), r[1] !== 100 && a.setDeterminedMinMax("max", +n[1].toFixed(i)), a.freeze();
      }
    }, e;
  }()
);
function Uye(e, t, r) {
  var n = [1 / 0, -1 / 0];
  Ku(r, function(o) {
    dle(n, o.getData(), t);
  });
  var i = e.getAxisModel(), a = eO(i.axis.scale, i, n).calculate();
  return [a.min, a.max];
}
var Yye = {
  // `dataZoomProcessor` will only be performed in needed series. Consider if
  // there is a line series and a pie series, it is better not to update the
  // line series if only pie series is needed to be updated.
  getTargetSeries: function(e) {
    function t(i) {
      e.eachComponent("dataZoom", function(a) {
        a.eachTargetAxis(function(o, s) {
          var l = e.getComponent(Ho(o), s);
          i(o, s, l, a);
        });
      });
    }
    t(function(i, a, o, s) {
      o.__dzAxisProxy = null;
    });
    var r = [];
    t(function(i, a, o, s) {
      o.__dzAxisProxy || (o.__dzAxisProxy = new Wye(i, a, s, e), r.push(o.__dzAxisProxy));
    });
    var n = Ce();
    return j(r, function(i) {
      j(i.getTargetSeriesModels(), function(a) {
        n.set(a.uid, a);
      });
    }), n;
  },
  // Consider appendData, where filter should be performed. Because data process is
  // in block mode currently, it is not need to worry about that the overallProgress
  // execute every frame.
  overallReset: function(e, t) {
    e.eachComponent("dataZoom", function(r) {
      r.eachTargetAxis(function(n, i) {
        r.getAxisProxy(n, i).reset(r);
      }), r.eachTargetAxis(function(n, i) {
        r.getAxisProxy(n, i).filterData(r, t);
      });
    }), e.eachComponent("dataZoom", function(r) {
      var n = r.findRepresentativeAxisProxy();
      if (n) {
        var i = n.getDataPercentWindow(), a = n.getDataValueWindow();
        r.setCalculatedRange({
          start: i[0],
          end: i[1],
          startValue: a[0],
          endValue: a[1]
        });
      }
    });
  }
};
function Zye(e) {
  e.registerAction("dataZoom", function(t, r) {
    var n = $ye(r, t);
    j(n, function(i) {
      i.setRawRange({
        start: t.start,
        end: t.end,
        startValue: t.startValue,
        endValue: t.endValue
      });
    });
  });
}
var cL = !1;
function QT(e) {
  cL || (cL = !0, e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER, Yye), Zye(e), e.registerSubTypeDefaulter("dataZoom", function() {
    return "slider";
  }));
}
function Xye(e) {
  e.registerComponentModel(Hye), e.registerComponentView(Gye), QT(e);
}
var Un = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
    }
    return e;
  }()
), jj = {};
function qu(e, t) {
  jj[e] = t;
}
function Vj(e) {
  return jj[e];
}
var Kye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.optionUpdated = function() {
      e.prototype.optionUpdated.apply(this, arguments);
      var r = this.ecModel;
      j(this.option.feature, function(n, i) {
        var a = Vj(i);
        a && (a.getDefaultOption && (a.defaultOption = a.getDefaultOption(r)), Xe(n, a.defaultOption));
      });
    }, t.type = "toolbox", t.layoutMode = {
      type: "box",
      ignoreSize: !0
    }, t.defaultOption = {
      show: !0,
      z: 6,
      // zlevel: 0,
      orient: "horizontal",
      left: "right",
      top: "top",
      // right
      // bottom
      backgroundColor: "transparent",
      borderColor: "#ccc",
      borderRadius: 0,
      borderWidth: 0,
      padding: 5,
      itemSize: 15,
      itemGap: 8,
      showTitle: !0,
      iconStyle: {
        borderColor: "#666",
        color: "none"
      },
      emphasis: {
        iconStyle: {
          borderColor: "#3E98C5"
        }
      },
      // textStyle: {},
      // feature
      tooltip: {
        show: !1,
        position: "bottom"
      }
    }, t;
  }(at)
);
function qye(e, t, r) {
  var n = t.getBoxLayoutParams(), i = t.get("padding"), a = {
    width: r.getWidth(),
    height: r.getHeight()
  }, o = vr(n, a, i);
  Al(t.get("orient"), e, t.get("itemGap"), o.width, o.height), Ky(e, n, a, i);
}
function Bj(e, t) {
  var r = Xl(t.get("padding")), n = t.getItemStyle(["color", "opacity"]);
  return n.fill = t.get("backgroundColor"), e = new vt({
    shape: {
      x: e.x - r[3],
      y: e.y - r[0],
      width: e.width + r[1] + r[3],
      height: e.height + r[0] + r[2],
      r: t.get("borderRadius")
    },
    style: n,
    silent: !0,
    z2: -1
  }), e;
}
var Jye = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function(r, n, i, a) {
      var o = this.group;
      if (o.removeAll(), !r.get("show"))
        return;
      var s = +r.get("itemSize"), l = r.get("orient") === "vertical", u = r.get("feature") || {}, c = this._features || (this._features = {}), f = [];
      j(u, function(p, v) {
        f.push(v);
      }), new Ja(this._featureNames || [], f).add(d).update(d).remove(We(d, null)).execute(), this._featureNames = f;
      function d(p, v) {
        var g = f[p], m = f[v], y = u[g], b = new Tt(y, r, r.ecModel), w;
        if (a && a.newTitle != null && a.featureName === g && (y.title = a.newTitle), g && !m) {
          if (Qye(g))
            w = {
              onclick: b.option.onclick,
              featureName: g
            };
          else {
            var _ = Vj(g);
            if (!_)
              return;
            w = new _();
          }
          c[g] = w;
        } else if (w = c[m], !w)
          return;
        w.uid = df("toolbox-feature"), w.model = b, w.ecModel = n, w.api = i;
        var S = w instanceof Un;
        if (!g && m) {
          S && w.dispose && w.dispose(n, i);
          return;
        }
        if (!b.get("show") || S && w.unusable) {
          S && w.remove && w.remove(n, i);
          return;
        }
        h(b, w, g), b.setIconStatus = function(C, A) {
          var M = this.option, D = this.iconPaths;
          M.iconStatus = M.iconStatus || {}, M.iconStatus[C] = A, D[C] && (A === "emphasis" ? Ka : qa)(D[C]);
        }, w instanceof Un && w.render && w.render(b, n, i, a);
      }
      function h(p, v, g) {
        var m = p.getModel("iconStyle"), y = p.getModel(["emphasis", "iconStyle"]), b = v instanceof Un && v.getIcons ? v.getIcons() : p.get("icon"), w = p.get("title") || {}, _, S;
        ge(b) ? (_ = {}, _[g] = b) : _ = b, ge(w) ? (S = {}, S[g] = w) : S = w;
        var C = p.iconPaths = {};
        j(_, function(A, M) {
          var D = cf(A, {}, {
            x: -s / 2,
            y: -s / 2,
            width: s,
            height: s
          });
          D.setStyle(m.getItemStyle());
          var N = D.ensureState("emphasis");
          N.style = y.getItemStyle();
          var R = new pt({
            style: {
              text: S[M],
              align: y.get("textAlign"),
              borderRadius: y.get("textBorderRadius"),
              padding: y.get("textPadding"),
              fill: null,
              font: wC({
                fontStyle: y.get("textFontStyle"),
                fontFamily: y.get("textFontFamily"),
                fontSize: y.get("textFontSize"),
                fontWeight: y.get("textFontWeight")
              }, n)
            },
            ignore: !0
          });
          D.setTextContent(R), Yl({
            el: D,
            componentModel: r,
            itemName: M,
            formatterParamsExtra: {
              title: S[M]
            }
          }), D.__title = S[M], D.on("mouseover", function() {
            var O = y.getItemStyle(), E = l ? r.get("right") == null && r.get("left") !== "right" ? "right" : "left" : r.get("bottom") == null && r.get("top") !== "bottom" ? "bottom" : "top";
            R.setStyle({
              fill: y.get("textFill") || O.fill || O.stroke || "#000",
              backgroundColor: y.get("textBackgroundColor")
            }), D.setTextConfig({
              position: y.get("textPosition") || E
            }), R.ignore = !r.get("showTitle"), i.enterEmphasis(this);
          }).on("mouseout", function() {
            p.get(["iconStatus", M]) !== "emphasis" && i.leaveEmphasis(this), R.hide();
          }), (p.get(["iconStatus", M]) === "emphasis" ? Ka : qa)(D), o.add(D), D.on("click", xe(v.onclick, v, n, i, M)), C[M] = D;
        });
      }
      qye(o, r, i), o.add(Bj(o.getBoundingRect(), r)), l || o.eachChild(function(p) {
        var v = p.__title, g = p.ensureState("emphasis"), m = g.textConfig || (g.textConfig = {}), y = p.getTextContent(), b = y && y.ensureState("emphasis");
        if (b && !Ee(b) && v) {
          var w = b.style || (b.style = {}), _ = Jh(v, pt.makeFont(w)), S = p.x + o.x, C = p.y + o.y + s, A = !1;
          C + _.height > i.getHeight() && (m.position = "top", A = !0);
          var M = A ? -5 - _.height : s + 10;
          S + _.width / 2 > i.getWidth() ? (m.position = ["100%", M], w.align = "right") : S - _.width / 2 < 0 && (m.position = [0, M], w.align = "left");
        }
      });
    }, t.prototype.updateView = function(r, n, i, a) {
      j(this._features, function(o) {
        o instanceof Un && o.updateView && o.updateView(o.model, n, i, a);
      });
    }, t.prototype.remove = function(r, n) {
      j(this._features, function(i) {
        i instanceof Un && i.remove && i.remove(r, n);
      }), this.group.removeAll();
    }, t.prototype.dispose = function(r, n) {
      j(this._features, function(i) {
        i instanceof Un && i.dispose && i.dispose(r, n);
      });
    }, t.type = "toolbox", t;
  }($t)
);
function Qye(e) {
  return e.indexOf("my") === 0;
}
var e0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.onclick = function(r, n) {
      var i = this.model, a = i.get("name") || r.get("title.0.text") || "echarts", o = n.getZr().painter.getType() === "svg", s = o ? "svg" : i.get("type", !0) || "png", l = n.getConnectedDataURL({
        type: s,
        backgroundColor: i.get("backgroundColor", !0) || r.get("backgroundColor") || "#fff",
        connectedBackgroundColor: i.get("connectedBackgroundColor"),
        excludeComponents: i.get("excludeComponents"),
        pixelRatio: i.get("pixelRatio")
      }), u = st.browser;
      if (typeof MouseEvent == "function" && (u.newEdge || !u.ie && !u.edge)) {
        var c = document.createElement("a");
        c.download = a + "." + s, c.target = "_blank", c.href = l;
        var f = new MouseEvent("click", {
          // some micro front-end framework， window maybe is a Proxy
          view: document.defaultView,
          bubbles: !0,
          cancelable: !1
        });
        c.dispatchEvent(f);
      } else if (window.navigator.msSaveOrOpenBlob || o) {
        var d = l.split(","), h = d[0].indexOf("base64") > -1, p = o ? decodeURIComponent(d[1]) : d[1];
        h && (p = window.atob(p));
        var v = a + "." + s;
        if (window.navigator.msSaveOrOpenBlob) {
          for (var g = p.length, m = new Uint8Array(g); g--; )
            m[g] = p.charCodeAt(g);
          var y = new Blob([m]);
          window.navigator.msSaveOrOpenBlob(y, v);
        } else {
          var b = document.createElement("iframe");
          document.body.appendChild(b);
          var w = b.contentWindow, _ = w.document;
          _.open("image/svg+xml", "replace"), _.write(p), _.close(), w.focus(), _.execCommand("SaveAs", !0, v), document.body.removeChild(b);
        }
      } else {
        var S = i.get("lang"), C = '<body style="margin:0;"><img src="' + l + '" style="max-width:100%;" title="' + (S && S[0] || "") + '" /></body>', A = window.open();
        A.document.write(C), A.document.title = a;
      }
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        icon: "M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",
        title: r.getLocaleModel().get(["toolbox", "saveAsImage", "title"]),
        type: "png",
        // Default use option.backgroundColor
        // backgroundColor: '#fff',
        connectedBackgroundColor: "#fff",
        name: "",
        excludeComponents: ["toolbox"],
        // use current pixel ratio of device by default
        // pixelRatio: 1,
        lang: r.getLocaleModel().get(["toolbox", "saveAsImage", "lang"])
      };
      return n;
    }, t;
  }(Un)
), fL = "__ec_magicType_stack__", t0e = [["line", "bar"], ["stack"]], r0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getIcons = function() {
      var r = this.model, n = r.get("icon"), i = {};
      return j(r.get("type"), function(a) {
        n[a] && (i[a] = n[a]);
      }), i;
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        type: [],
        // Icon group
        icon: {
          line: "M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",
          bar: "M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",
          // eslint-disable-next-line
          stack: "M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"
          // jshint ignore:line
        },
        // `line`, `bar`, `stack`, `tiled`
        title: r.getLocaleModel().get(["toolbox", "magicType", "title"]),
        option: {},
        seriesIndex: {}
      };
      return n;
    }, t.prototype.onclick = function(r, n, i) {
      var a = this.model, o = a.get(["seriesIndex", i]);
      if (dL[i]) {
        var s = {
          series: []
        }, l = function(f) {
          var d = f.subType, h = f.id, p = dL[i](d, h, f, a);
          p && (Ie(p, f.option), s.series.push(p));
          var v = f.coordinateSystem;
          if (v && v.type === "cartesian2d" && (i === "line" || i === "bar")) {
            var g = v.getAxesByScale("ordinal")[0];
            if (g) {
              var m = g.dim, y = m + "Axis", b = f.getReferringComponents(y, pr).models[0], w = b.componentIndex;
              s[y] = s[y] || [];
              for (var _ = 0; _ <= w; _++)
                s[y][w] = s[y][w] || {};
              s[y][w].boundaryGap = i === "bar";
            }
          }
        };
        j(t0e, function(f) {
          rt(f, i) >= 0 && j(f, function(d) {
            a.setIconStatus(d, "normal");
          });
        }), a.setIconStatus(i, "emphasis"), r.eachComponent({
          mainType: "series",
          query: o == null ? null : {
            seriesIndex: o
          }
        }, l);
        var u, c = i;
        i === "stack" && (u = Xe({
          stack: a.option.title.tiled,
          tiled: a.option.title.stack
        }, a.option.title), a.get(["iconStatus", i]) !== "emphasis" && (c = "tiled")), n.dispatchAction({
          type: "changeMagicType",
          currentType: c,
          newOption: s,
          newTitle: u,
          featureName: "magicType"
        });
      }
    }, t;
  }(Un)
), dL = {
  line: function(e, t, r, n) {
    if (e === "bar")
      return Xe({
        id: t,
        type: "line",
        // Preserve data related option
        data: r.get("data"),
        stack: r.get("stack"),
        markPoint: r.get("markPoint"),
        markLine: r.get("markLine")
      }, n.get(["option", "line"]) || {}, !0);
  },
  bar: function(e, t, r, n) {
    if (e === "line")
      return Xe({
        id: t,
        type: "bar",
        // Preserve data related option
        data: r.get("data"),
        stack: r.get("stack"),
        markPoint: r.get("markPoint"),
        markLine: r.get("markLine")
      }, n.get(["option", "bar"]) || {}, !0);
  },
  stack: function(e, t, r, n) {
    var i = r.get("stack") === fL;
    if (e === "line" || e === "bar")
      return n.setIconStatus("stack", i ? "normal" : "emphasis"), Xe({
        id: t,
        stack: i ? "" : fL
      }, n.get(["option", "stack"]) || {}, !0);
  }
};
Pi({
  type: "changeMagicType",
  event: "magicTypeChanged",
  update: "prepareAndUpdate"
}, function(e, t) {
  t.mergeOption(e.newOption);
});
var p0 = new Array(60).join("-"), Fc = "	";
function n0e(e) {
  var t = {}, r = [], n = [];
  return e.eachRawSeries(function(i) {
    var a = i.coordinateSystem;
    if (a && (a.type === "cartesian2d" || a.type === "polar")) {
      var o = a.getBaseAxis();
      if (o.type === "category") {
        var s = o.dim + "_" + o.index;
        t[s] || (t[s] = {
          categoryAxis: o,
          valueAxis: a.getOtherAxis(o),
          series: []
        }, n.push({
          axisDim: o.dim,
          axisIndex: o.index
        })), t[s].series.push(i);
      } else
        r.push(i);
    } else
      r.push(i);
  }), {
    seriesGroupByCategoryAxis: t,
    other: r,
    meta: n
  };
}
function i0e(e) {
  var t = [];
  return j(e, function(r, n) {
    var i = r.categoryAxis, a = r.valueAxis, o = a.dim, s = [" "].concat(ue(r.series, function(h) {
      return h.name;
    })), l = [i.model.getCategories()];
    j(r.series, function(h) {
      var p = h.getRawData();
      l.push(h.getRawData().mapArray(p.mapDimension(o), function(v) {
        return v;
      }));
    });
    for (var u = [s.join(Fc)], c = 0; c < l[0].length; c++) {
      for (var f = [], d = 0; d < l.length; d++)
        f.push(l[d][c]);
      u.push(f.join(Fc));
    }
    t.push(u.join(`
`));
  }), t.join(`

` + p0 + `

`);
}
function a0e(e) {
  return ue(e, function(t) {
    var r = t.getRawData(), n = [t.name], i = [];
    return r.each(r.dimensions, function() {
      for (var a = arguments.length, o = arguments[a - 1], s = r.getName(o), l = 0; l < a - 1; l++)
        i[l] = arguments[l];
      n.push((s ? s + Fc : "") + i.join(Fc));
    }), n.join(`
`);
  }).join(`

` + p0 + `

`);
}
function o0e(e) {
  var t = n0e(e);
  return {
    value: Ct([i0e(t.seriesGroupByCategoryAxis), a0e(t.other)], function(r) {
      return !!r.replace(/[\n\t\s]/g, "");
    }).join(`

` + p0 + `

`),
    meta: t.meta
  };
}
function Bm(e) {
  return e.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
}
function s0e(e) {
  var t = e.slice(0, e.indexOf(`
`));
  if (t.indexOf(Fc) >= 0)
    return !0;
}
var h_ = new RegExp("[" + Fc + "]+", "g");
function l0e(e) {
  for (var t = e.split(/\n+/g), r = Bm(t.shift()).split(h_), n = [], i = ue(r, function(l) {
    return {
      name: l,
      data: []
    };
  }), a = 0; a < t.length; a++) {
    var o = Bm(t[a]).split(h_);
    n.push(o.shift());
    for (var s = 0; s < o.length; s++)
      i[s] && (i[s].data[a] = o[s]);
  }
  return {
    series: i,
    categories: n
  };
}
function u0e(e) {
  for (var t = e.split(/\n+/g), r = Bm(t.shift()), n = [], i = 0; i < t.length; i++) {
    var a = Bm(t[i]);
    if (a) {
      var o = a.split(h_), s = "", l = void 0, u = !1;
      isNaN(o[0]) ? (u = !0, s = o[0], o = o.slice(1), n[i] = {
        name: s,
        value: []
      }, l = n[i].value) : l = n[i] = [];
      for (var c = 0; c < o.length; c++)
        l.push(+o[c]);
      l.length === 1 && (u ? n[i].value = l[0] : n[i] = l[0]);
    }
  }
  return {
    name: r,
    data: n
  };
}
function c0e(e, t) {
  var r = e.split(new RegExp(`
*` + p0 + `
*`, "g")), n = {
    series: []
  };
  return j(r, function(i, a) {
    if (s0e(i)) {
      var o = l0e(i), s = t[a], l = s.axisDim + "Axis";
      s && (n[l] = n[l] || [], n[l][s.axisIndex] = {
        data: o.categories
      }, n.series = n.series.concat(o.series));
    } else {
      var o = u0e(i);
      n.series.push(o);
    }
  }), n;
}
var f0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.onclick = function(r, n) {
      setTimeout(function() {
        n.dispatchAction({
          type: "hideTip"
        });
      });
      var i = n.getDom(), a = this.model;
      this._dom && i.removeChild(this._dom);
      var o = document.createElement("div");
      o.style.cssText = "position:absolute;top:0;bottom:0;left:0;right:0;padding:5px", o.style.backgroundColor = a.get("backgroundColor") || "#fff";
      var s = document.createElement("h4"), l = a.get("lang") || [];
      s.innerHTML = l[0] || a.get("title"), s.style.cssText = "margin:10px 20px", s.style.color = a.get("textColor");
      var u = document.createElement("div"), c = document.createElement("textarea");
      u.style.cssText = "overflow:auto";
      var f = a.get("optionToContent"), d = a.get("contentToOption"), h = o0e(r);
      if (Ee(f)) {
        var p = f(n.getOption());
        ge(p) ? u.innerHTML = p : is(p) && u.appendChild(p);
      } else {
        c.readOnly = a.get("readOnly");
        var v = c.style;
        v.cssText = "display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none", v.color = a.get("textColor"), v.borderColor = a.get("textareaBorderColor"), v.backgroundColor = a.get("textareaColor"), c.value = h.value, u.appendChild(c);
      }
      var g = h.meta, m = document.createElement("div");
      m.style.cssText = "position:absolute;bottom:5px;left:0;right:0";
      var y = "float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px", b = document.createElement("div"), w = document.createElement("div");
      y += ";background-color:" + a.get("buttonColor"), y += ";color:" + a.get("buttonTextColor");
      var _ = this;
      function S() {
        i.removeChild(o), _._dom = null;
      }
      H2(b, "click", S), H2(w, "click", function() {
        if (d == null && f != null || d != null && f == null) {
          process.env.NODE_ENV !== "production" && qt("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."), S();
          return;
        }
        var C;
        try {
          Ee(d) ? C = d(u, n.getOption()) : C = c0e(c.value, g);
        } catch (A) {
          throw S(), new Error("Data view format error " + A);
        }
        C && n.dispatchAction({
          type: "changeDataView",
          newOption: C
        }), S();
      }), b.innerHTML = l[1], w.innerHTML = l[2], w.style.cssText = b.style.cssText = y, !a.get("readOnly") && m.appendChild(w), m.appendChild(b), o.appendChild(s), o.appendChild(u), o.appendChild(m), u.style.height = i.clientHeight - 80 + "px", i.appendChild(o), this._dom = o;
    }, t.prototype.remove = function(r, n) {
      this._dom && n.getDom().removeChild(this._dom);
    }, t.prototype.dispose = function(r, n) {
      this.remove(r, n);
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        readOnly: !1,
        optionToContent: null,
        contentToOption: null,
        // eslint-disable-next-line
        icon: "M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",
        title: r.getLocaleModel().get(["toolbox", "dataView", "title"]),
        lang: r.getLocaleModel().get(["toolbox", "dataView", "lang"]),
        backgroundColor: "#fff",
        textColor: "#000",
        textareaColor: "#fff",
        textareaBorderColor: "#333",
        buttonColor: "#c23531",
        buttonTextColor: "#fff"
      };
      return n;
    }, t;
  }(Un)
);
function d0e(e, t) {
  return ue(e, function(r, n) {
    var i = t && t[n];
    if (Ne(i) && !le(i)) {
      var a = Ne(r) && !le(r);
      a || (r = {
        value: r
      });
      var o = i.name != null && r.name == null;
      return r = Ie(r, i), o && delete r.name, r;
    } else
      return r;
  });
}
Pi({
  type: "changeDataView",
  event: "dataViewChanged",
  update: "prepareAndUpdate"
}, function(e, t) {
  var r = [];
  j(e.newOption.series, function(n) {
    var i = t.getSeriesByName(n.name)[0];
    if (!i)
      r.push(ae({
        // Default is scatter
        type: "scatter"
      }, n));
    else {
      var a = i.get("data");
      r.push({
        name: n.name,
        data: d0e(n.data, a)
      });
    }
  }), t.mergeOption(Ie({
    series: r
  }, e.newOption));
});
var Fj = j, $j = yt();
function h0e(e, t) {
  var r = eA(e);
  Fj(t, function(n, i) {
    for (var a = r.length - 1; a >= 0; a--) {
      var o = r[a];
      if (o[i])
        break;
    }
    if (a < 0) {
      var s = e.queryComponents({
        mainType: "dataZoom",
        subType: "select",
        id: i
      })[0];
      if (s) {
        var l = s.getPercentRange();
        r[0][i] = {
          dataZoomId: i,
          start: l[0],
          end: l[1]
        };
      }
    }
  }), r.push(t);
}
function p0e(e) {
  var t = eA(e), r = t[t.length - 1];
  t.length > 1 && t.pop();
  var n = {};
  return Fj(r, function(i, a) {
    for (var o = t.length - 1; o >= 0; o--)
      if (i = t[o][a], i) {
        n[a] = i;
        break;
      }
  }), n;
}
function v0e(e) {
  $j(e).snapshots = null;
}
function g0e(e) {
  return eA(e).length;
}
function eA(e) {
  var t = $j(e);
  return t.snapshots || (t.snapshots = [{}]), t.snapshots;
}
var m0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.onclick = function(r, n) {
      v0e(r), n.dispatchAction({
        type: "restore",
        from: this.uid
      });
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        // eslint-disable-next-line
        icon: "M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",
        title: r.getLocaleModel().get(["toolbox", "restore", "title"])
      };
      return n;
    }, t;
  }(Un)
);
Pi({
  type: "restore",
  event: "restore",
  update: "prepareAndUpdate"
}, function(e, t) {
  t.resetOption("recreate");
});
var y0e = ["grid", "xAxis", "yAxis", "geo", "graph", "polar", "radiusAxis", "angleAxis", "bmap"], tA = (
  /** @class */
  function() {
    function e(t, r, n) {
      var i = this;
      this._targetInfoList = [];
      var a = hL(r, t);
      j(x0e, function(o, s) {
        (!n || !n.include || rt(n.include, s) >= 0) && o(a, i._targetInfoList);
      });
    }
    return e.prototype.setOutputRanges = function(t, r) {
      return this.matchOutputRanges(t, r, function(n, i, a) {
        if ((n.coordRanges || (n.coordRanges = [])).push(i), !n.coordRange) {
          n.coordRange = i;
          var o = xb[n.brushType](0, a, i);
          n.__rangeOffset = {
            offset: mL[n.brushType](o.values, n.range, [1, 1]),
            xyMinMax: o.xyMinMax
          };
        }
      }), t;
    }, e.prototype.matchOutputRanges = function(t, r, n) {
      j(t, function(i) {
        var a = this.findTargetInfo(i, r);
        a && a !== !0 && j(a.coordSyses, function(o) {
          var s = xb[i.brushType](1, o, i.range, !0);
          n(i, s.values, o, r);
        });
      }, this);
    }, e.prototype.setInputRanges = function(t, r) {
      j(t, function(n) {
        var i = this.findTargetInfo(n, r);
        if (process.env.NODE_ENV !== "production" && (Le(!i || i === !0 || n.coordRange, "coordRange must be specified when coord index specified."), Le(!i || i !== !0 || n.range, "range must be specified in global brush.")), n.range = n.range || [], i && i !== !0) {
          n.panelId = i.panelId;
          var a = xb[n.brushType](0, i.coordSys, n.coordRange), o = n.__rangeOffset;
          n.range = o ? mL[n.brushType](a.values, o.offset, b0e(a.xyMinMax, o.xyMinMax)) : a.values;
        }
      }, this);
    }, e.prototype.makePanelOpts = function(t, r) {
      return ue(this._targetInfoList, function(n) {
        var i = n.getPanelRect();
        return {
          panelId: n.panelId,
          defaultBrushType: r ? r(n) : null,
          clipPath: Xz(i),
          isTargetByCursor: qz(i, t, n.coordSysModel),
          getLinearBrushOtherExtent: Kz(i)
        };
      });
    }, e.prototype.controlSeries = function(t, r, n) {
      var i = this.findTargetInfo(t, n);
      return i === !0 || i && rt(i.coordSyses, r.coordinateSystem) >= 0;
    }, e.prototype.findTargetInfo = function(t, r) {
      for (var n = this._targetInfoList, i = hL(r, t), a = 0; a < n.length; a++) {
        var o = n[a], s = t.panelId;
        if (s) {
          if (o.panelId === s)
            return o;
        } else
          for (var l = 0; l < pL.length; l++)
            if (pL[l](i, o))
              return o;
      }
      return !0;
    }, e;
  }()
);
function p_(e) {
  return e[0] > e[1] && e.reverse(), e;
}
function hL(e, t) {
  return jd(e, t, {
    includeMainTypes: y0e
  });
}
var x0e = {
  grid: function(e, t) {
    var r = e.xAxisModels, n = e.yAxisModels, i = e.gridModels, a = Ce(), o = {}, s = {};
    !r && !n && !i || (j(r, function(l) {
      var u = l.axis.grid.model;
      a.set(u.id, u), o[u.id] = !0;
    }), j(n, function(l) {
      var u = l.axis.grid.model;
      a.set(u.id, u), s[u.id] = !0;
    }), j(i, function(l) {
      a.set(l.id, l), o[l.id] = !0, s[l.id] = !0;
    }), a.each(function(l) {
      var u = l.coordinateSystem, c = [];
      j(u.getCartesians(), function(f, d) {
        (rt(r, f.getAxis("x").model) >= 0 || rt(n, f.getAxis("y").model) >= 0) && c.push(f);
      }), t.push({
        panelId: "grid--" + l.id,
        gridModel: l,
        coordSysModel: l,
        // Use the first one as the representitive coordSys.
        coordSys: c[0],
        coordSyses: c,
        getPanelRect: vL.grid,
        xAxisDeclared: o[l.id],
        yAxisDeclared: s[l.id]
      });
    }));
  },
  geo: function(e, t) {
    j(e.geoModels, function(r) {
      var n = r.coordinateSystem;
      t.push({
        panelId: "geo--" + r.id,
        geoModel: r,
        coordSysModel: r,
        coordSys: n,
        coordSyses: [n],
        getPanelRect: vL.geo
      });
    });
  }
}, pL = [
  // grid
  function(e, t) {
    var r = e.xAxisModel, n = e.yAxisModel, i = e.gridModel;
    return !i && r && (i = r.axis.grid.model), !i && n && (i = n.axis.grid.model), i && i === t.gridModel;
  },
  // geo
  function(e, t) {
    var r = e.geoModel;
    return r && r === t.geoModel;
  }
], vL = {
  grid: function() {
    return this.coordSys.master.getRect().clone();
  },
  geo: function() {
    var e = this.coordSys, t = e.getBoundingRect().clone();
    return t.applyTransform(Ko(e)), t;
  }
}, xb = {
  lineX: We(gL, 0),
  lineY: We(gL, 1),
  rect: function(e, t, r, n) {
    var i = e ? t.pointToData([r[0][0], r[1][0]], n) : t.dataToPoint([r[0][0], r[1][0]], n), a = e ? t.pointToData([r[0][1], r[1][1]], n) : t.dataToPoint([r[0][1], r[1][1]], n), o = [p_([i[0], a[0]]), p_([i[1], a[1]])];
    return {
      values: o,
      xyMinMax: o
    };
  },
  polygon: function(e, t, r, n) {
    var i = [[1 / 0, -1 / 0], [1 / 0, -1 / 0]], a = ue(r, function(o) {
      var s = e ? t.pointToData(o, n) : t.dataToPoint(o, n);
      return i[0][0] = Math.min(i[0][0], s[0]), i[1][0] = Math.min(i[1][0], s[1]), i[0][1] = Math.max(i[0][1], s[0]), i[1][1] = Math.max(i[1][1], s[1]), s;
    });
    return {
      values: a,
      xyMinMax: i
    };
  }
};
function gL(e, t, r, n) {
  process.env.NODE_ENV !== "production" && Le(r.type === "cartesian2d", "lineX/lineY brush is available only in cartesian2d.");
  var i = r.getAxis(["x", "y"][e]), a = p_(ue([0, 1], function(s) {
    return t ? i.coordToData(i.toLocalCoord(n[s]), !0) : i.toGlobalCoord(i.dataToCoord(n[s]));
  })), o = [];
  return o[e] = a, o[1 - e] = [NaN, NaN], {
    values: a,
    xyMinMax: o
  };
}
var mL = {
  lineX: We(yL, 0),
  lineY: We(yL, 1),
  rect: function(e, t, r) {
    return [[e[0][0] - r[0] * t[0][0], e[0][1] - r[0] * t[0][1]], [e[1][0] - r[1] * t[1][0], e[1][1] - r[1] * t[1][1]]];
  },
  polygon: function(e, t, r) {
    return ue(e, function(n, i) {
      return [n[0] - r[0] * t[i][0], n[1] - r[1] * t[i][1]];
    });
  }
};
function yL(e, t, r, n) {
  return [t[0] - n[e] * r[0], t[1] - n[e] * r[1]];
}
function b0e(e, t) {
  var r = xL(e), n = xL(t), i = [r[0] / n[0], r[1] / n[1]];
  return isNaN(i[0]) && (i[0] = 1), isNaN(i[1]) && (i[1] = 1), i;
}
function xL(e) {
  return e ? [e[0][1] - e[0][0], e[1][1] - e[1][0]] : [NaN, NaN];
}
var v_ = j, w0e = dre("toolbox-dataZoom_"), _0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function(r, n, i, a) {
      this._brushController || (this._brushController = new ET(i.getZr()), this._brushController.on("brush", xe(this._onBrush, this)).mount()), T0e(r, n, this, a, i), C0e(r, n);
    }, t.prototype.onclick = function(r, n, i) {
      S0e[i].call(this);
    }, t.prototype.remove = function(r, n) {
      this._brushController && this._brushController.unmount();
    }, t.prototype.dispose = function(r, n) {
      this._brushController && this._brushController.dispose();
    }, t.prototype._onBrush = function(r) {
      var n = r.areas;
      if (!r.isEnd || !n.length)
        return;
      var i = {}, a = this.ecModel;
      this._brushController.updateCovers([]);
      var o = new tA(rA(this.model), a, {
        include: ["grid"]
      });
      o.matchOutputRanges(n, a, function(u, c, f) {
        if (f.type === "cartesian2d") {
          var d = u.brushType;
          d === "rect" ? (s("x", f, c[0]), s("y", f, c[1])) : s({
            lineX: "x",
            lineY: "y"
          }[d], f, c);
        }
      }), h0e(a, i), this._dispatchZoomAction(i);
      function s(u, c, f) {
        var d = c.getAxis(u), h = d.model, p = l(u, h, a), v = p.findRepresentativeAxisProxy(h).getMinMaxSpan();
        (v.minValueSpan != null || v.maxValueSpan != null) && (f = eu(0, f.slice(), d.scale.getExtent(), 0, v.minValueSpan, v.maxValueSpan)), p && (i[p.id] = {
          dataZoomId: p.id,
          startValue: f[0],
          endValue: f[1]
        });
      }
      function l(u, c, f) {
        var d;
        return f.eachComponent({
          mainType: "dataZoom",
          subType: "select"
        }, function(h) {
          var p = h.getAxisModel(u, c.componentIndex);
          p && (d = h);
        }), d;
      }
    }, t.prototype._dispatchZoomAction = function(r) {
      var n = [];
      v_(r, function(i, a) {
        n.push(ze(i));
      }), n.length && this.api.dispatchAction({
        type: "dataZoom",
        from: this.uid,
        batch: n
      });
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        filterMode: "filter",
        // Icon group
        icon: {
          zoom: "M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",
          back: "M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"
        },
        // `zoom`, `back`
        title: r.getLocaleModel().get(["toolbox", "dataZoom", "title"]),
        brushStyle: {
          borderWidth: 0,
          color: "rgba(210,219,238,0.2)"
        }
      };
      return n;
    }, t;
  }(Un)
), S0e = {
  zoom: function() {
    var e = !this._isZoomActive;
    this.api.dispatchAction({
      type: "takeGlobalCursor",
      key: "dataZoomSelect",
      dataZoomSelectActive: e
    });
  },
  back: function() {
    this._dispatchZoomAction(p0e(this.ecModel));
  }
};
function rA(e) {
  var t = {
    xAxisIndex: e.get("xAxisIndex", !0),
    yAxisIndex: e.get("yAxisIndex", !0),
    xAxisId: e.get("xAxisId", !0),
    yAxisId: e.get("yAxisId", !0)
  };
  return t.xAxisIndex == null && t.xAxisId == null && (t.xAxisIndex = "all"), t.yAxisIndex == null && t.yAxisId == null && (t.yAxisIndex = "all"), t;
}
function C0e(e, t) {
  e.setIconStatus("back", g0e(t) > 1 ? "emphasis" : "normal");
}
function T0e(e, t, r, n, i) {
  var a = r._isZoomActive;
  n && n.type === "takeGlobalCursor" && (a = n.key === "dataZoomSelect" ? n.dataZoomSelectActive : !1), r._isZoomActive = a, e.setIconStatus("zoom", a ? "emphasis" : "normal");
  var o = new tA(rA(e), t, {
    include: ["grid"]
  }), s = o.makePanelOpts(i, function(l) {
    return l.xAxisDeclared && !l.yAxisDeclared ? "lineX" : !l.xAxisDeclared && l.yAxisDeclared ? "lineY" : "rect";
  });
  r._brushController.setPanels(s).enableBrush(a && s.length ? {
    brushType: "auto",
    brushStyle: e.getModel("brushStyle").getItemStyle()
  } : !1);
}
kie("dataZoom", function(e) {
  var t = e.getComponent("toolbox", 0), r = ["feature", "dataZoom"];
  if (!t || t.get(r) == null)
    return;
  var n = t.getModel(r), i = [], a = rA(n), o = jd(e, a);
  v_(o.xAxisModels, function(l) {
    return s(l, "xAxis", "xAxisIndex");
  }), v_(o.yAxisModels, function(l) {
    return s(l, "yAxis", "yAxisIndex");
  });
  function s(l, u, c) {
    var f = l.componentIndex, d = {
      type: "select",
      $fromToolbox: !0,
      // Default to be filter
      filterMode: n.get("filterMode", !0) || "filter",
      // Id for merge mapping.
      id: w0e + u + f
    };
    d[c] = f, i.push(d);
  }
  return i;
});
function A0e(e) {
  e.registerComponentModel(Kye), e.registerComponentView(Jye), qu("saveAsImage", e0e), qu("magicType", r0e), qu("dataView", f0e), qu("dataZoom", _0e), qu("restore", m0e), ot(Xye);
}
var M0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "tooltip", t.dependencies = ["axisPointer"], t.defaultOption = {
      // zlevel: 0,
      z: 60,
      show: !0,
      // tooltip main content
      showContent: !0,
      // 'trigger' only works on coordinate system.
      // 'item' | 'axis' | 'none'
      trigger: "item",
      // 'click' | 'mousemove' | 'none'
      triggerOn: "mousemove|click",
      alwaysShowContent: !1,
      displayMode: "single",
      renderMode: "auto",
      // whether restraint content inside viewRect.
      // If renderMode: 'richText', default true.
      // If renderMode: 'html', defaut false (for backward compat).
      confine: null,
      showDelay: 0,
      hideDelay: 100,
      // Animation transition time, unit is second
      transitionDuration: 0.4,
      enterable: !1,
      backgroundColor: "#fff",
      // box shadow
      shadowBlur: 10,
      shadowColor: "rgba(0, 0, 0, .2)",
      shadowOffsetX: 1,
      shadowOffsetY: 2,
      // tooltip border radius, unit is px, default is 4
      borderRadius: 4,
      // tooltip border width, unit is px, default is 0 (no border)
      borderWidth: 1,
      // Tooltip inside padding, default is 5 for all direction
      // Array is allowed to set up, right, bottom, left, same with css
      // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.
      padding: null,
      // Extra css text
      extraCssText: "",
      // axis indicator, trigger by axis
      axisPointer: {
        // default is line
        // legal values: 'line' | 'shadow' | 'cross'
        type: "line",
        // Valid when type is line, appoint tooltip line locate on which line. Optional
        // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'
        // default is 'auto', chose the axis which type is category.
        // for multiply y axis, cartesian coord chose x axis, polar chose angle axis
        axis: "auto",
        animation: "auto",
        animationDurationUpdate: 200,
        animationEasingUpdate: "exponentialOut",
        crossStyle: {
          color: "#999",
          width: 1,
          type: "dashed",
          // TODO formatter
          textStyle: {}
        }
        // lineStyle and shadowStyle should not be specified here,
        // otherwise it will always override those styles on option.axisPointer.
      },
      textStyle: {
        color: "#666",
        fontSize: 14
      }
    }, t;
  }(at)
);
function Hj(e) {
  var t = e.get("confine");
  return t != null ? !!t : e.get("renderMode") === "richText";
}
function Gj(e) {
  if (st.domSupported) {
    for (var t = document.documentElement.style, r = 0, n = e.length; r < n; r++)
      if (e[r] in t)
        return e[r];
  }
}
var Wj = Gj(["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"]), E0e = Gj(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]);
function Uj(e, t) {
  if (!e)
    return t;
  t = DC(t, !0);
  var r = e.indexOf(t);
  return e = r === -1 ? t : "-" + e.slice(0, r) + "-" + t, e.toLowerCase();
}
function D0e(e, t) {
  var r = e.currentStyle || document.defaultView && document.defaultView.getComputedStyle(e);
  return r ? r[t] : null;
}
var N0e = Uj(E0e, "transition"), nA = Uj(Wj, "transform"), I0e = "position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;" + (st.transform3dSupported ? "will-change:transform;" : "");
function L0e(e) {
  return e = e === "left" ? "right" : e === "right" ? "left" : e === "top" ? "bottom" : "top", e;
}
function R0e(e, t, r) {
  if (!ge(r) || r === "inside")
    return "";
  var n = e.get("backgroundColor"), i = e.get("borderWidth");
  t = Vl(t);
  var a = L0e(r), o = Math.max(Math.round(i) * 1.5, 6), s = "", l = nA + ":", u;
  rt(["left", "right"], a) > -1 ? (s += "top:50%", l += "translateY(-50%) rotate(" + (u = a === "left" ? -225 : -45) + "deg)") : (s += "left:50%", l += "translateX(-50%) rotate(" + (u = a === "top" ? 225 : 45) + "deg)");
  var c = u * Math.PI / 180, f = o + i, d = f * Math.abs(Math.cos(c)) + f * Math.abs(Math.sin(c)), h = Math.round(((d - Math.SQRT2 * i) / 2 + Math.SQRT2 * i - (d - f) / 2) * 100) / 100;
  s += ";" + a + ":-" + h + "px";
  var p = t + " solid " + i + "px;", v = ["position:absolute;width:" + o + "px;height:" + o + "px;z-index:-1;", s + ";" + l + ";", "border-bottom:" + p, "border-right:" + p, "background-color:" + n + ";"];
  return '<div style="' + v.join("") + '"></div>';
}
function P0e(e, t) {
  var r = "cubic-bezier(0.23,1,0.32,1)", n = " " + e / 2 + "s " + r, i = "opacity" + n + ",visibility" + n;
  return t || (n = " " + e + "s " + r, i += st.transformSupported ? "," + nA + n : ",left" + n + ",top" + n), N0e + ":" + i;
}
function bL(e, t, r) {
  var n = e.toFixed(0) + "px", i = t.toFixed(0) + "px";
  if (!st.transformSupported)
    return r ? "top:" + i + ";left:" + n + ";" : [["top", i], ["left", n]];
  var a = st.transform3dSupported, o = "translate" + (a ? "3d" : "") + "(" + n + "," + i + (a ? ",0" : "") + ")";
  return r ? "top:0;left:0;" + nA + ":" + o + ";" : [["top", 0], ["left", 0], [Wj, o]];
}
function k0e(e) {
  var t = [], r = e.get("fontSize"), n = e.getTextColor();
  n && t.push("color:" + n), t.push("font:" + e.getFont());
  var i = Ge(e.get("lineHeight"), Math.round(r * 3 / 2));
  r && t.push("line-height:" + i + "px");
  var a = e.get("textShadowColor"), o = e.get("textShadowBlur") || 0, s = e.get("textShadowOffsetX") || 0, l = e.get("textShadowOffsetY") || 0;
  return a && o && t.push("text-shadow:" + s + "px " + l + "px " + o + "px " + a), j(["decoration", "align"], function(u) {
    var c = e.get(u);
    c && t.push("text-" + u + ":" + c);
  }), t.join(";");
}
function O0e(e, t, r) {
  var n = [], i = e.get("transitionDuration"), a = e.get("backgroundColor"), o = e.get("shadowBlur"), s = e.get("shadowColor"), l = e.get("shadowOffsetX"), u = e.get("shadowOffsetY"), c = e.getModel("textStyle"), f = t8(e, "html"), d = l + "px " + u + "px " + o + "px " + s;
  return n.push("box-shadow:" + d), t && i && n.push(P0e(i, r)), a && n.push("background-color:" + a), j(["width", "color", "radius"], function(h) {
    var p = "border-" + h, v = DC(p), g = e.get(v);
    g != null && n.push(p + ":" + g + (h === "color" ? "" : "px"));
  }), n.push(k0e(c)), f != null && n.push("padding:" + Xl(f).join("px ") + "px"), n.join(";") + ";";
}
function wL(e, t, r, n, i) {
  var a = t && t.painter;
  if (r) {
    var o = a && a.getViewportRoot();
    o && zee(e, o, r, n, i);
  } else {
    e[0] = n, e[1] = i;
    var s = a && a.getViewportRootOffset();
    s && (e[0] += s.offsetLeft, e[1] += s.offsetTop);
  }
  e[2] = e[0] / t.getWidth(), e[3] = e[1] / t.getHeight();
}
var z0e = (
  /** @class */
  function() {
    function e(t, r) {
      if (this._show = !1, this._styleCoord = [0, 0, 0, 0], this._enterable = !0, this._alwaysShowContent = !1, this._firstShow = !0, this._longHide = !0, st.wxa)
        return null;
      var n = document.createElement("div");
      n.domBelongToZr = !0, this.el = n;
      var i = this._zr = t.getZr(), a = r.appendTo, o = a && (ge(a) ? document.querySelector(a) : is(a) ? a : Ee(a) && a(t.getDom()));
      wL(this._styleCoord, i, o, t.getWidth() / 2, t.getHeight() / 2), (o || t.getDom()).appendChild(n), this._api = t, this._container = o;
      var s = this;
      n.onmouseenter = function() {
        s._enterable && (clearTimeout(s._hideTimeout), s._show = !0), s._inContent = !0;
      }, n.onmousemove = function(l) {
        if (l = l || window.event, !s._enterable) {
          var u = i.handler, c = i.painter.getViewportRoot();
          Fn(c, l, !0), u.dispatch("mousemove", l);
        }
      }, n.onmouseleave = function() {
        s._inContent = !1, s._enterable && s._show && s.hideLater(s._hideDelay);
      };
    }
    return e.prototype.update = function(t) {
      if (!this._container) {
        var r = this._api.getDom(), n = D0e(r, "position"), i = r.style;
        i.position !== "absolute" && n !== "absolute" && (i.position = "relative");
      }
      var a = t.get("alwaysShowContent");
      a && this._moveIfResized(), this._alwaysShowContent = a, this.el.className = t.get("className") || "";
    }, e.prototype.show = function(t, r) {
      clearTimeout(this._hideTimeout), clearTimeout(this._longHideTimeout);
      var n = this.el, i = n.style, a = this._styleCoord;
      n.innerHTML ? i.cssText = I0e + O0e(t, !this._firstShow, this._longHide) + bL(a[0], a[1], !0) + ("border-color:" + Vl(r) + ";") + (t.get("extraCssText") || "") + (";pointer-events:" + (this._enterable ? "auto" : "none")) : i.display = "none", this._show = !0, this._firstShow = !1, this._longHide = !1;
    }, e.prototype.setContent = function(t, r, n, i, a) {
      var o = this.el;
      if (t == null) {
        o.innerHTML = "";
        return;
      }
      var s = "";
      if (ge(a) && n.get("trigger") === "item" && !Hj(n) && (s = R0e(n, i, a)), ge(t))
        o.innerHTML = t + s;
      else if (t) {
        o.innerHTML = "", le(t) || (t = [t]);
        for (var l = 0; l < t.length; l++)
          is(t[l]) && t[l].parentNode !== o && o.appendChild(t[l]);
        if (s && o.childNodes.length) {
          var u = document.createElement("div");
          u.innerHTML = s, o.appendChild(u);
        }
      }
    }, e.prototype.setEnterable = function(t) {
      this._enterable = t;
    }, e.prototype.getSize = function() {
      var t = this.el;
      return t ? [t.offsetWidth, t.offsetHeight] : [0, 0];
    }, e.prototype.moveTo = function(t, r) {
      if (this.el) {
        var n = this._styleCoord;
        if (wL(n, this._zr, this._container, t, r), n[0] != null && n[1] != null) {
          var i = this.el.style, a = bL(n[0], n[1]);
          j(a, function(o) {
            i[o[0]] = o[1];
          });
        }
      }
    }, e.prototype._moveIfResized = function() {
      var t = this._styleCoord[2], r = this._styleCoord[3];
      this.moveTo(t * this._zr.getWidth(), r * this._zr.getHeight());
    }, e.prototype.hide = function() {
      var t = this, r = this.el.style;
      r.visibility = "hidden", r.opacity = "0", st.transform3dSupported && (r.willChange = ""), this._show = !1, this._longHideTimeout = setTimeout(function() {
        return t._longHide = !0;
      }, 500);
    }, e.prototype.hideLater = function(t) {
      this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent && (t ? (this._hideDelay = t, this._show = !1, this._hideTimeout = setTimeout(xe(this.hide, this), t)) : this.hide());
    }, e.prototype.isShow = function() {
      return this._show;
    }, e.prototype.dispose = function() {
      clearTimeout(this._hideTimeout), clearTimeout(this._longHideTimeout);
      var t = this.el.parentNode;
      t && t.removeChild(this.el), this.el = this._container = null;
    }, e;
  }()
), j0e = (
  /** @class */
  function() {
    function e(t) {
      this._show = !1, this._styleCoord = [0, 0, 0, 0], this._alwaysShowContent = !1, this._enterable = !0, this._zr = t.getZr(), SL(this._styleCoord, this._zr, t.getWidth() / 2, t.getHeight() / 2);
    }
    return e.prototype.update = function(t) {
      var r = t.get("alwaysShowContent");
      r && this._moveIfResized(), this._alwaysShowContent = r;
    }, e.prototype.show = function() {
      this._hideTimeout && clearTimeout(this._hideTimeout), this.el.show(), this._show = !0;
    }, e.prototype.setContent = function(t, r, n, i, a) {
      var o = this;
      Ne(t) && Et(process.env.NODE_ENV !== "production" ? "Passing DOM nodes as content is not supported in richText tooltip!" : ""), this.el && this._zr.remove(this.el);
      var s = n.getModel("textStyle");
      this.el = new pt({
        style: {
          rich: r.richTextStyles,
          text: t,
          lineHeight: 22,
          borderWidth: 1,
          borderColor: i,
          textShadowColor: s.get("textShadowColor"),
          fill: n.get(["textStyle", "color"]),
          padding: t8(n, "richText"),
          verticalAlign: "top",
          align: "left"
        },
        z: n.get("z")
      }), j(["backgroundColor", "borderRadius", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"], function(u) {
        o.el.style[u] = n.get(u);
      }), j(["textShadowBlur", "textShadowOffsetX", "textShadowOffsetY"], function(u) {
        o.el.style[u] = s.get(u) || 0;
      }), this._zr.add(this.el);
      var l = this;
      this.el.on("mouseover", function() {
        l._enterable && (clearTimeout(l._hideTimeout), l._show = !0), l._inContent = !0;
      }), this.el.on("mouseout", function() {
        l._enterable && l._show && l.hideLater(l._hideDelay), l._inContent = !1;
      });
    }, e.prototype.setEnterable = function(t) {
      this._enterable = t;
    }, e.prototype.getSize = function() {
      var t = this.el, r = this.el.getBoundingRect(), n = _L(t.style);
      return [r.width + n.left + n.right, r.height + n.top + n.bottom];
    }, e.prototype.moveTo = function(t, r) {
      var n = this.el;
      if (n) {
        var i = this._styleCoord;
        SL(i, this._zr, t, r), t = i[0], r = i[1];
        var a = n.style, o = So(a.borderWidth || 0), s = _L(a);
        n.x = t + o + s.left, n.y = r + o + s.top, n.markRedraw();
      }
    }, e.prototype._moveIfResized = function() {
      var t = this._styleCoord[2], r = this._styleCoord[3];
      this.moveTo(t * this._zr.getWidth(), r * this._zr.getHeight());
    }, e.prototype.hide = function() {
      this.el && this.el.hide(), this._show = !1;
    }, e.prototype.hideLater = function(t) {
      this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent && (t ? (this._hideDelay = t, this._show = !1, this._hideTimeout = setTimeout(xe(this.hide, this), t)) : this.hide());
    }, e.prototype.isShow = function() {
      return this._show;
    }, e.prototype.dispose = function() {
      this._zr.remove(this.el);
    }, e;
  }()
);
function So(e) {
  return Math.max(0, e);
}
function _L(e) {
  var t = So(e.shadowBlur || 0), r = So(e.shadowOffsetX || 0), n = So(e.shadowOffsetY || 0);
  return {
    left: So(t - r),
    right: So(t + r),
    top: So(t - n),
    bottom: So(t + n)
  };
}
function SL(e, t, r, n) {
  e[0] = r, e[1] = n, e[2] = e[0] / t.getWidth(), e[3] = e[1] / t.getHeight();
}
var V0e = new vt({
  shape: {
    x: -1,
    y: -1,
    width: 2,
    height: 2
  }
}), B0e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n) {
      if (!(st.node || !n.getDom())) {
        var i = r.getComponent("tooltip"), a = this._renderMode = xre(i.get("renderMode"));
        this._tooltipContent = a === "richText" ? new j0e(n) : new z0e(n, {
          appendTo: i.get("appendToBody", !0) ? "body" : i.get("appendTo", !0)
        });
      }
    }, t.prototype.render = function(r, n, i) {
      if (!(st.node || !i.getDom())) {
        this.group.removeAll(), this._tooltipModel = r, this._ecModel = n, this._api = i;
        var a = this._tooltipContent;
        a.update(r), a.setEnterable(r.get("enterable")), this._initGlobalListener(), this._keepShow(), this._renderMode !== "richText" && r.get("transitionDuration") ? gf(this, "_updatePosition", 50, "fixRate") : bh(this, "_updatePosition");
      }
    }, t.prototype._initGlobalListener = function() {
      var r = this._tooltipModel, n = r.get("triggerOn");
      Nj("itemTooltip", this._api, xe(function(i, a, o) {
        n !== "none" && (n.indexOf(i) >= 0 ? this._tryShow(a, o) : i === "leave" && this._hide(o));
      }, this));
    }, t.prototype._keepShow = function() {
      var r = this._tooltipModel, n = this._ecModel, i = this._api, a = r.get("triggerOn");
      if (this._lastX != null && this._lastY != null && a !== "none" && a !== "click") {
        var o = this;
        clearTimeout(this._refreshUpdateTimeout), this._refreshUpdateTimeout = setTimeout(function() {
          !i.isDisposed() && o.manuallyShowTip(r, n, i, {
            x: o._lastX,
            y: o._lastY,
            dataByCoordSys: o._lastDataByCoordSys
          });
        });
      }
    }, t.prototype.manuallyShowTip = function(r, n, i, a) {
      if (!(a.from === this.uid || st.node || !i.getDom())) {
        var o = CL(a, i);
        this._ticket = "";
        var s = a.dataByCoordSys, l = G0e(a, n, i);
        if (l) {
          var u = l.el.getBoundingRect().clone();
          u.applyTransform(l.el.transform), this._tryShow({
            offsetX: u.x + u.width / 2,
            offsetY: u.y + u.height / 2,
            target: l.el,
            position: a.position,
            // When manully trigger, the mouse is not on the el, so we'd better to
            // position tooltip on the bottom of the el and display arrow is possible.
            positionDefault: "bottom"
          }, o);
        } else if (a.tooltip && a.x != null && a.y != null) {
          var c = V0e;
          c.x = a.x, c.y = a.y, c.update(), He(c).tooltipConfig = {
            name: null,
            option: a.tooltip
          }, this._tryShow({
            offsetX: a.x,
            offsetY: a.y,
            target: c
          }, o);
        } else if (s)
          this._tryShow({
            offsetX: a.x,
            offsetY: a.y,
            position: a.position,
            dataByCoordSys: s,
            tooltipOption: a.tooltipOption
          }, o);
        else if (a.seriesIndex != null) {
          if (this._manuallyAxisShowTip(r, n, i, a))
            return;
          var f = Ij(a, n), d = f.point[0], h = f.point[1];
          d != null && h != null && this._tryShow({
            offsetX: d,
            offsetY: h,
            target: f.el,
            position: a.position,
            // When manully trigger, the mouse is not on the el, so we'd better to
            // position tooltip on the bottom of the el and display arrow is possible.
            positionDefault: "bottom"
          }, o);
        } else a.x != null && a.y != null && (i.dispatchAction({
          type: "updateAxisPointer",
          x: a.x,
          y: a.y
        }), this._tryShow({
          offsetX: a.x,
          offsetY: a.y,
          position: a.position,
          target: i.getZr().findHover(a.x, a.y).target
        }, o));
      }
    }, t.prototype.manuallyHideTip = function(r, n, i, a) {
      var o = this._tooltipContent;
      this._tooltipModel && o.hideLater(this._tooltipModel.get("hideDelay")), this._lastX = this._lastY = this._lastDataByCoordSys = null, a.from !== this.uid && this._hide(CL(a, i));
    }, t.prototype._manuallyAxisShowTip = function(r, n, i, a) {
      var o = a.seriesIndex, s = a.dataIndex, l = n.getComponent("axisPointer").coordSysAxesInfo;
      if (!(o == null || s == null || l == null)) {
        var u = n.getSeriesByIndex(o);
        if (u) {
          var c = u.getData(), f = td([c.getItemModel(s), u, (u.coordinateSystem || {}).model], this._tooltipModel);
          if (f.get("trigger") === "axis")
            return i.dispatchAction({
              type: "updateAxisPointer",
              seriesIndex: o,
              dataIndex: s,
              position: a.position
            }), !0;
        }
      }
    }, t.prototype._tryShow = function(r, n) {
      var i = r.target, a = this._tooltipModel;
      if (a) {
        this._lastX = r.offsetX, this._lastY = r.offsetY;
        var o = r.dataByCoordSys;
        if (o && o.length)
          this._showAxisTooltip(o, r);
        else if (i) {
          var s = He(i);
          if (s.ssrType === "legend")
            return;
          this._lastDataByCoordSys = null;
          var l, u;
          pl(i, function(c) {
            if (He(c).dataIndex != null)
              return l = c, !0;
            if (He(c).tooltipConfig != null)
              return u = c, !0;
          }, !0), l ? this._showSeriesItemTooltip(r, l, n) : u ? this._showComponentItemTooltip(r, u, n) : this._hide(n);
        } else
          this._lastDataByCoordSys = null, this._hide(n);
      }
    }, t.prototype._showOrMove = function(r, n) {
      var i = r.get("showDelay");
      n = xe(n, this), clearTimeout(this._showTimout), i > 0 ? this._showTimout = setTimeout(n, i) : n();
    }, t.prototype._showAxisTooltip = function(r, n) {
      var i = this._ecModel, a = this._tooltipModel, o = [n.offsetX, n.offsetY], s = td([n.tooltipOption], a), l = this._renderMode, u = [], c = Tr("section", {
        blocks: [],
        noHeader: !0
      }), f = [], d = new rx();
      j(r, function(y) {
        j(y.dataByAxis, function(b) {
          var w = i.getComponent(b.axisDim + "Axis", b.axisIndex), _ = b.value;
          if (!(!w || _ == null)) {
            var S = Mj(_, w.axis, i, b.seriesDataIndices, b.valueLabelOpt), C = Tr("section", {
              header: S,
              noHeader: !Xn(S),
              sortBlocks: !0,
              blocks: []
            });
            c.blocks.push(C), j(b.seriesDataIndices, function(A) {
              var M = i.getSeriesByIndex(A.seriesIndex), D = A.dataIndexInside, N = M.getDataParams(D);
              if (!(N.dataIndex < 0)) {
                N.axisDim = b.axisDim, N.axisIndex = b.axisIndex, N.axisType = b.axisType, N.axisId = b.axisId, N.axisValue = rT(w.axis, {
                  value: _
                }), N.axisValueLabel = S, N.marker = d.makeTooltipMarker("item", Vl(N.color), l);
                var R = lN(M.formatTooltip(D, !0, null)), O = R.frag;
                if (O) {
                  var E = td([M], a).get("valueFormatter");
                  C.blocks.push(E ? ae({
                    valueFormatter: E
                  }, O) : O);
                }
                R.text && f.push(R.text), u.push(N);
              }
            });
          }
        });
      }), c.blocks.reverse(), f.reverse();
      var h = n.position, p = s.get("order"), v = pN(c, d, l, p, i.get("useUTC"), s.get("textStyle"));
      v && f.unshift(v);
      var g = l === "richText" ? `

` : "<br/>", m = f.join(g);
      this._showOrMove(s, function() {
        this._updateContentNotChangedOnAxis(r, u) ? this._updatePosition(s, h, o[0], o[1], this._tooltipContent, u) : this._showTooltipContent(s, m, u, Math.random() + "", o[0], o[1], h, null, d);
      });
    }, t.prototype._showSeriesItemTooltip = function(r, n, i) {
      var a = this._ecModel, o = He(n), s = o.seriesIndex, l = a.getSeriesByIndex(s), u = o.dataModel || l, c = o.dataIndex, f = o.dataType, d = u.getData(f), h = this._renderMode, p = r.positionDefault, v = td([d.getItemModel(c), u, l && (l.coordinateSystem || {}).model], this._tooltipModel, p ? {
        position: p
      } : null), g = v.get("trigger");
      if (!(g != null && g !== "item")) {
        var m = u.getDataParams(c, f), y = new rx();
        m.marker = y.makeTooltipMarker("item", Vl(m.color), h);
        var b = lN(u.formatTooltip(c, !1, f)), w = v.get("order"), _ = v.get("valueFormatter"), S = b.frag, C = S ? pN(_ ? ae({
          valueFormatter: _
        }, S) : S, y, h, w, a.get("useUTC"), v.get("textStyle")) : b.text, A = "item_" + u.name + "_" + c;
        this._showOrMove(v, function() {
          this._showTooltipContent(v, C, m, A, r.offsetX, r.offsetY, r.position, r.target, y);
        }), i({
          type: "showTip",
          dataIndexInside: c,
          dataIndex: d.getRawIndex(c),
          seriesIndex: s,
          from: this.uid
        });
      }
    }, t.prototype._showComponentItemTooltip = function(r, n, i) {
      var a = this._renderMode === "html", o = He(n), s = o.tooltipConfig, l = s.option || {}, u = l.encodeHTMLContent;
      if (ge(l)) {
        var c = l;
        l = {
          content: c,
          // Fixed formatter
          formatter: c
        }, u = !0;
      }
      u && a && l.content && (l = ze(l), l.content = Zr(l.content));
      var f = [l], d = this._ecModel.getComponent(o.componentMainType, o.componentIndex);
      d && f.push(d), f.push({
        formatter: l.content
      });
      var h = r.positionDefault, p = td(f, this._tooltipModel, h ? {
        position: h
      } : null), v = p.get("content"), g = Math.random() + "", m = new rx();
      this._showOrMove(p, function() {
        var y = ze(p.get("formatterParams") || {});
        this._showTooltipContent(p, v, y, g, r.offsetX, r.offsetY, r.position, n, m);
      }), i({
        type: "showTip",
        from: this.uid
      });
    }, t.prototype._showTooltipContent = function(r, n, i, a, o, s, l, u, c) {
      if (this._ticket = "", !(!r.get("showContent") || !r.get("show"))) {
        var f = this._tooltipContent;
        f.setEnterable(r.get("enterable"));
        var d = r.get("formatter");
        l = l || r.get("position");
        var h = n, p = this._getNearestPoint([o, s], i, r.get("trigger"), r.get("borderColor")), v = p.color;
        if (d)
          if (ge(d)) {
            var g = r.ecModel.get("useUTC"), m = le(i) ? i[0] : i, y = m && m.axisType && m.axisType.indexOf("time") >= 0;
            h = d, y && (h = op(m.axisValue, h, g)), h = NC(h, i, !0);
          } else if (Ee(d)) {
            var b = xe(function(w, _) {
              w === this._ticket && (f.setContent(_, c, r, v, l), this._updatePosition(r, l, o, s, f, i, u));
            }, this);
            this._ticket = a, h = d(i, a, b);
          } else
            h = d;
        f.setContent(h, c, r, v, l), f.show(r, v), this._updatePosition(r, l, o, s, f, i, u);
      }
    }, t.prototype._getNearestPoint = function(r, n, i, a) {
      if (i === "axis" || le(n))
        return {
          color: a || (this._renderMode === "html" ? "#fff" : "none")
        };
      if (!le(n))
        return {
          color: a || n.color || n.borderColor
        };
    }, t.prototype._updatePosition = function(r, n, i, a, o, s, l) {
      var u = this._api.getWidth(), c = this._api.getHeight();
      n = n || r.get("position");
      var f = o.getSize(), d = r.get("align"), h = r.get("verticalAlign"), p = l && l.getBoundingRect().clone();
      if (l && p.applyTransform(l.transform), Ee(n) && (n = n([i, a], s, o.el, p, {
        viewSize: [u, c],
        contentSize: f.slice()
      })), le(n))
        i = pe(n[0], u), a = pe(n[1], c);
      else if (Ne(n)) {
        var v = n;
        v.width = f[0], v.height = f[1];
        var g = vr(v, {
          width: u,
          height: c
        });
        i = g.x, a = g.y, d = null, h = null;
      } else if (ge(n) && l) {
        var m = H0e(n, p, f, r.get("borderWidth"));
        i = m[0], a = m[1];
      } else {
        var m = F0e(i, a, o, u, c, d ? null : 20, h ? null : 20);
        i = m[0], a = m[1];
      }
      if (d && (i -= TL(d) ? f[0] / 2 : d === "right" ? f[0] : 0), h && (a -= TL(h) ? f[1] / 2 : h === "bottom" ? f[1] : 0), Hj(r)) {
        var m = $0e(i, a, o, u, c);
        i = m[0], a = m[1];
      }
      o.moveTo(i, a);
    }, t.prototype._updateContentNotChangedOnAxis = function(r, n) {
      var i = this._lastDataByCoordSys, a = this._cbParamsList, o = !!i && i.length === r.length;
      return o && j(i, function(s, l) {
        var u = s.dataByAxis || [], c = r[l] || {}, f = c.dataByAxis || [];
        o = o && u.length === f.length, o && j(u, function(d, h) {
          var p = f[h] || {}, v = d.seriesDataIndices || [], g = p.seriesDataIndices || [];
          o = o && d.value === p.value && d.axisType === p.axisType && d.axisId === p.axisId && v.length === g.length, o && j(v, function(m, y) {
            var b = g[y];
            o = o && m.seriesIndex === b.seriesIndex && m.dataIndex === b.dataIndex;
          }), a && j(d.seriesDataIndices, function(m) {
            var y = m.seriesIndex, b = n[y], w = a[y];
            b && w && w.data !== b.data && (o = !1);
          });
        });
      }), this._lastDataByCoordSys = r, this._cbParamsList = n, !!o;
    }, t.prototype._hide = function(r) {
      this._lastDataByCoordSys = null, r({
        type: "hideTip",
        from: this.uid
      });
    }, t.prototype.dispose = function(r, n) {
      st.node || !n.getDom() || (bh(this, "_updatePosition"), this._tooltipContent.dispose(), c_("itemTooltip", n));
    }, t.type = "tooltip", t;
  }($t)
);
function td(e, t, r) {
  var n = t.ecModel, i;
  r ? (i = new Tt(r, n, n), i = new Tt(t.option, i, n)) : i = t;
  for (var a = e.length - 1; a >= 0; a--) {
    var o = e[a];
    o && (o instanceof Tt && (o = o.get("tooltip", !0)), ge(o) && (o = {
      formatter: o
    }), o && (i = new Tt(o, i, n)));
  }
  return i;
}
function CL(e, t) {
  return e.dispatchAction || xe(t.dispatchAction, t);
}
function F0e(e, t, r, n, i, a, o) {
  var s = r.getSize(), l = s[0], u = s[1];
  return a != null && (e + l + a + 2 > n ? e -= l + a : e += a), o != null && (t + u + o > i ? t -= u + o : t += o), [e, t];
}
function $0e(e, t, r, n, i) {
  var a = r.getSize(), o = a[0], s = a[1];
  return e = Math.min(e + o, n) - o, t = Math.min(t + s, i) - s, e = Math.max(e, 0), t = Math.max(t, 0), [e, t];
}
function H0e(e, t, r, n) {
  var i = r[0], a = r[1], o = Math.ceil(Math.SQRT2 * n) + 8, s = 0, l = 0, u = t.width, c = t.height;
  switch (e) {
    case "inside":
      s = t.x + u / 2 - i / 2, l = t.y + c / 2 - a / 2;
      break;
    case "top":
      s = t.x + u / 2 - i / 2, l = t.y - a - o;
      break;
    case "bottom":
      s = t.x + u / 2 - i / 2, l = t.y + c + o;
      break;
    case "left":
      s = t.x - i - o, l = t.y + c / 2 - a / 2;
      break;
    case "right":
      s = t.x + u + o, l = t.y + c / 2 - a / 2;
  }
  return [s, l];
}
function TL(e) {
  return e === "center" || e === "middle";
}
function G0e(e, t, r) {
  var n = oC(e).queryOptionMap, i = n.keys()[0];
  if (!(!i || i === "series")) {
    var a = ep(t, i, n.get(i), {
      useDefault: !1,
      enableAll: !1,
      enableNone: !1
    }), o = a.models[0];
    if (o) {
      var s = r.getViewOfComponentModel(o), l;
      if (s.group.traverse(function(u) {
        var c = He(u).tooltipConfig;
        if (c && c.name === e.name)
          return l = u, !0;
      }), l)
        return {
          componentMainType: i,
          componentIndex: o.componentIndex,
          el: l
        };
    }
  }
}
function W0e(e) {
  ot(mp), e.registerComponentModel(M0e), e.registerComponentView(B0e), e.registerAction({
    type: "showTip",
    event: "showTip",
    update: "tooltip:manuallyShowTip"
  }, rr), e.registerAction({
    type: "hideTip",
    event: "hideTip",
    update: "tooltip:manuallyHideTip"
  }, rr);
}
var U0e = ["rect", "polygon", "keep", "clear"];
function Y0e(e, t) {
  var r = Ot(e ? e.brush : []);
  if (r.length) {
    var n = [];
    j(r, function(l) {
      var u = l.hasOwnProperty("toolbox") ? l.toolbox : [];
      u instanceof Array && (n = n.concat(u));
    });
    var i = e && e.toolbox;
    le(i) && (i = i[0]), i || (i = {
      feature: {}
    }, e.toolbox = [i]);
    var a = i.feature || (i.feature = {}), o = a.brush || (a.brush = {}), s = o.type || (o.type = []);
    s.push.apply(s, n), Z0e(s), t && !s.length && s.push.apply(s, U0e);
  }
}
function Z0e(e) {
  var t = {};
  j(e, function(r) {
    t[r] = 1;
  }), e.length = 0, j(t, function(r, n) {
    e.push(n);
  });
}
var AL = j;
function ML(e) {
  if (e) {
    for (var t in e)
      if (e.hasOwnProperty(t))
        return !0;
  }
}
function g_(e, t, r) {
  var n = {};
  return AL(t, function(a) {
    var o = n[a] = i();
    AL(e[a], function(s, l) {
      if (Sr.isValidType(l)) {
        var u = {
          type: l,
          visual: s
        };
        r && r(u, a), o[l] = new Sr(u), l === "opacity" && (u = ze(u), u.type = "colorAlpha", o.__hidden.__alphaForOpacity = new Sr(u));
      }
    });
  }), n;
  function i() {
    var a = function() {
    };
    a.prototype.__hidden = a.prototype;
    var o = new a();
    return o;
  }
}
function Yj(e, t, r) {
  var n;
  j(r, function(i) {
    t.hasOwnProperty(i) && ML(t[i]) && (n = !0);
  }), n && j(r, function(i) {
    t.hasOwnProperty(i) && ML(t[i]) ? e[i] = ze(t[i]) : delete e[i];
  });
}
function X0e(e, t, r, n, i, a) {
  var o = {};
  j(e, function(f) {
    var d = Sr.prepareVisualTypes(t[f]);
    o[f] = d;
  });
  var s;
  function l(f) {
    return BC(r, s, f);
  }
  function u(f, d) {
    f8(r, s, f, d);
  }
  r.each(c);
  function c(f, d) {
    s = f;
    var h = r.getRawDataItem(s);
    if (!(h && h.visualMap === !1))
      for (var p = n.call(i, f), v = t[p], g = o[p], m = 0, y = g.length; m < y; m++) {
        var b = g[m];
        v[b] && v[b].applyVisual(f, l, u);
      }
  }
}
function K0e(e, t, r, n) {
  var i = {};
  return j(e, function(a) {
    var o = Sr.prepareVisualTypes(t[a]);
    i[a] = o;
  }), {
    progress: function(o, s) {
      var l;
      n != null && (l = s.getDimensionIndex(n));
      function u(_) {
        return BC(s, f, _);
      }
      function c(_, S) {
        f8(s, f, _, S);
      }
      for (var f, d = s.getStore(); (f = o.next()) != null; ) {
        var h = s.getRawDataItem(f);
        if (!(h && h.visualMap === !1))
          for (var p = n != null ? d.get(l, f) : f, v = r(p), g = t[v], m = i[v], y = 0, b = m.length; y < b; y++) {
            var w = m[y];
            g[w] && g[w].applyVisual(p, u, c);
          }
      }
    }
  };
}
function q0e(e) {
  var t = e.brushType, r = {
    point: function(n) {
      return EL[t].point(n, r, e);
    },
    rect: function(n) {
      return EL[t].rect(n, r, e);
    }
  };
  return r;
}
var EL = {
  lineX: DL(0),
  lineY: DL(1),
  rect: {
    point: function(e, t, r) {
      return e && r.boundingRect.contain(e[0], e[1]);
    },
    rect: function(e, t, r) {
      return e && r.boundingRect.intersect(e);
    }
  },
  polygon: {
    point: function(e, t, r) {
      return e && r.boundingRect.contain(e[0], e[1]) && el(r.range, e[0], e[1]);
    },
    rect: function(e, t, r) {
      var n = r.range;
      if (!e || n.length <= 1)
        return !1;
      var i = e.x, a = e.y, o = e.width, s = e.height, l = n[0];
      if (el(n, i, a) || el(n, i + o, a) || el(n, i, a + s) || el(n, i + o, a + s) || tt.create(e).contain(l[0], l[1]) || xd(i, a, i + o, a, n) || xd(i, a, i, a + s, n) || xd(i + o, a, i + o, a + s, n) || xd(i, a + s, i + o, a + s, n))
        return !0;
    }
  }
};
function DL(e) {
  var t = ["x", "y"], r = ["width", "height"];
  return {
    point: function(n, i, a) {
      if (n) {
        var o = a.range, s = n[e];
        return rd(s, o);
      }
    },
    rect: function(n, i, a) {
      if (n) {
        var o = a.range, s = [n[t[e]], n[t[e]] + n[r[e]]];
        return s[1] < s[0] && s.reverse(), rd(s[0], o) || rd(s[1], o) || rd(o[0], s) || rd(o[1], s);
      }
    }
  };
}
function rd(e, t) {
  return t[0] <= e && e <= t[1];
}
var NL = ["inBrush", "outOfBrush"], bb = "__ecBrushSelect", m_ = "__ecInBrushSelectEvent";
function Zj(e) {
  e.eachComponent({
    mainType: "brush"
  }, function(t) {
    var r = t.brushTargetManager = new tA(t.option, e);
    r.setInputRanges(t.areas, e);
  });
}
function J0e(e, t, r) {
  var n = [], i, a;
  e.eachComponent({
    mainType: "brush"
  }, function(o) {
    r && r.type === "takeGlobalCursor" && o.setBrushOption(r.key === "brush" ? r.brushOption : {
      brushType: !1
    });
  }), Zj(e), e.eachComponent({
    mainType: "brush"
  }, function(o, s) {
    var l = {
      brushId: o.id,
      brushIndex: s,
      brushName: o.name,
      areas: ze(o.areas),
      selected: []
    };
    n.push(l);
    var u = o.option, c = u.brushLink, f = [], d = [], h = [], p = !1;
    s || (i = u.throttleType, a = u.throttleDelay);
    var v = ue(o.areas, function(_) {
      var S = r1e[_.brushType], C = Ie({
        boundingRect: S ? S(_) : void 0
      }, _);
      return C.selectors = q0e(C), C;
    }), g = g_(o.option, NL, function(_) {
      _.mappingMethod = "fixed";
    });
    le(c) && j(c, function(_) {
      f[_] = 1;
    });
    function m(_) {
      return c === "all" || !!f[_];
    }
    function y(_) {
      return !!_.length;
    }
    e.eachSeries(function(_, S) {
      var C = h[S] = [];
      _.subType === "parallel" ? b(_, S) : w(_, S, C);
    });
    function b(_, S) {
      var C = _.coordinateSystem;
      p = p || C.hasAxisBrushed(), m(S) && C.eachActiveState(_.getData(), function(A, M) {
        A === "active" && (d[M] = 1);
      });
    }
    function w(_, S, C) {
      if (!(!_.brushSelector || t1e(o, S)) && (j(v, function(M) {
        o.brushTargetManager.controlSeries(M, _, e) && C.push(M), p = p || y(C);
      }), m(S) && y(C))) {
        var A = _.getData();
        A.each(function(M) {
          IL(_, C, A, M) && (d[M] = 1);
        });
      }
    }
    e.eachSeries(function(_, S) {
      var C = {
        seriesId: _.id,
        seriesIndex: S,
        seriesName: _.name,
        dataIndex: []
      };
      l.selected.push(C);
      var A = h[S], M = _.getData(), D = m(S) ? function(N) {
        return d[N] ? (C.dataIndex.push(M.getRawIndex(N)), "inBrush") : "outOfBrush";
      } : function(N) {
        return IL(_, A, M, N) ? (C.dataIndex.push(M.getRawIndex(N)), "inBrush") : "outOfBrush";
      };
      (m(S) ? p : y(A)) && X0e(NL, g, M, D);
    });
  }), Q0e(t, i, a, n, r);
}
function Q0e(e, t, r, n, i) {
  if (i) {
    var a = e.getZr();
    if (!a[m_]) {
      a[bb] || (a[bb] = e1e);
      var o = gf(a, bb, r, t);
      o(e, n);
    }
  }
}
function e1e(e, t) {
  if (!e.isDisposed()) {
    var r = e.getZr();
    r[m_] = !0, e.dispatchAction({
      type: "brushSelect",
      batch: t
    }), r[m_] = !1;
  }
}
function IL(e, t, r, n) {
  for (var i = 0, a = t.length; i < a; i++) {
    var o = t[i];
    if (e.brushSelector(n, r, o.selectors, o))
      return !0;
  }
}
function t1e(e, t) {
  var r = e.option.seriesIndex;
  return r != null && r !== "all" && (le(r) ? rt(r, t) < 0 : t !== r);
}
var r1e = {
  rect: function(e) {
    return LL(e.range);
  },
  polygon: function(e) {
    for (var t, r = e.range, n = 0, i = r.length; n < i; n++) {
      t = t || [[1 / 0, -1 / 0], [1 / 0, -1 / 0]];
      var a = r[n];
      a[0] < t[0][0] && (t[0][0] = a[0]), a[0] > t[0][1] && (t[0][1] = a[0]), a[1] < t[1][0] && (t[1][0] = a[1]), a[1] > t[1][1] && (t[1][1] = a[1]);
    }
    return t && LL(t);
  }
};
function LL(e) {
  return new tt(e[0][0], e[1][0], e[0][1] - e[0][0], e[1][1] - e[1][0]);
}
var n1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n) {
      this.ecModel = r, this.api = n, this.model, (this._brushController = new ET(n.getZr())).on("brush", xe(this._onBrush, this)).mount();
    }, t.prototype.render = function(r, n, i, a) {
      this.model = r, this._updateController(r, n, i, a);
    }, t.prototype.updateTransform = function(r, n, i, a) {
      Zj(n), this._updateController(r, n, i, a);
    }, t.prototype.updateVisual = function(r, n, i, a) {
      this.updateTransform(r, n, i, a);
    }, t.prototype.updateView = function(r, n, i, a) {
      this._updateController(r, n, i, a);
    }, t.prototype._updateController = function(r, n, i, a) {
      (!a || a.$from !== r.id) && this._brushController.setPanels(r.brushTargetManager.makePanelOpts(i)).enableBrush(r.brushOption).updateCovers(r.areas.slice());
    }, t.prototype.dispose = function() {
      this._brushController.dispose();
    }, t.prototype._onBrush = function(r) {
      var n = this.model.id, i = this.model.brushTargetManager.setOutputRanges(r.areas, this.ecModel);
      (!r.isEnd || r.removeOnClick) && this.api.dispatchAction({
        type: "brush",
        brushId: n,
        areas: ze(i),
        $from: n
      }), r.isEnd && this.api.dispatchAction({
        type: "brushEnd",
        brushId: n,
        areas: ze(i),
        $from: n
      });
    }, t.type = "brush", t;
  }($t)
), i1e = "#ddd", a1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.areas = [], r.brushOption = {}, r;
    }
    return t.prototype.optionUpdated = function(r, n) {
      var i = this.option;
      !n && Yj(i, r, ["inBrush", "outOfBrush"]);
      var a = i.inBrush = i.inBrush || {};
      i.outOfBrush = i.outOfBrush || {
        color: i1e
      }, a.hasOwnProperty("liftZ") || (a.liftZ = 5);
    }, t.prototype.setAreas = function(r) {
      process.env.NODE_ENV !== "production" && (Le(le(r)), j(r, function(n) {
        Le(n.brushType, "Illegal areas");
      })), r && (this.areas = ue(r, function(n) {
        return RL(this.option, n);
      }, this));
    }, t.prototype.setBrushOption = function(r) {
      this.brushOption = RL(this.option, r), this.brushType = this.brushOption.brushType;
    }, t.type = "brush", t.dependencies = ["geo", "grid", "xAxis", "yAxis", "parallel", "series"], t.defaultOption = {
      seriesIndex: "all",
      brushType: "rect",
      brushMode: "single",
      transformable: !0,
      brushStyle: {
        borderWidth: 1,
        color: "rgba(210,219,238,0.3)",
        borderColor: "#D2DBEE"
      },
      throttleType: "fixRate",
      throttleDelay: 0,
      removeOnClick: !0,
      z: 1e4
    }, t;
  }(at)
);
function RL(e, t) {
  return Xe({
    brushType: e.brushType,
    brushMode: e.brushMode,
    transformable: e.transformable,
    brushStyle: new Tt(e.brushStyle).getItemStyle(),
    removeOnClick: e.removeOnClick,
    z: e.z
  }, t, !0);
}
var o1e = ["rect", "polygon", "lineX", "lineY", "keep", "clear"], s1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function(r, n, i) {
      var a, o, s;
      n.eachComponent({
        mainType: "brush"
      }, function(l) {
        a = l.brushType, o = l.brushOption.brushMode || "single", s = s || !!l.areas.length;
      }), this._brushType = a, this._brushMode = o, j(r.get("type", !0), function(l) {
        r.setIconStatus(l, (l === "keep" ? o === "multiple" : l === "clear" ? s : l === a) ? "emphasis" : "normal");
      });
    }, t.prototype.updateView = function(r, n, i) {
      this.render(r, n, i);
    }, t.prototype.getIcons = function() {
      var r = this.model, n = r.get("icon", !0), i = {};
      return j(r.get("type", !0), function(a) {
        n[a] && (i[a] = n[a]);
      }), i;
    }, t.prototype.onclick = function(r, n, i) {
      var a = this._brushType, o = this._brushMode;
      i === "clear" ? (n.dispatchAction({
        type: "axisAreaSelect",
        intervals: []
      }), n.dispatchAction({
        type: "brush",
        command: "clear",
        // Clear all areas of all brush components.
        areas: []
      })) : n.dispatchAction({
        type: "takeGlobalCursor",
        key: "brush",
        brushOption: {
          brushType: i === "keep" ? a : a === i ? !1 : i,
          brushMode: i === "keep" ? o === "multiple" ? "single" : "multiple" : o
        }
      });
    }, t.getDefaultOption = function(r) {
      var n = {
        show: !0,
        type: o1e.slice(),
        icon: {
          /* eslint-disable */
          rect: "M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",
          polygon: "M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",
          lineX: "M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",
          lineY: "M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",
          keep: "M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",
          clear: "M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"
          // jshint ignore:line
          /* eslint-enable */
        },
        // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`
        title: r.getLocaleModel().get(["toolbox", "brush", "title"])
      };
      return n;
    }, t;
  }(Un)
);
function l1e(e) {
  e.registerComponentView(n1e), e.registerComponentModel(a1e), e.registerPreprocessor(Y0e), e.registerVisual(e.PRIORITY.VISUAL.BRUSH, J0e), e.registerAction({
    type: "brush",
    event: "brush",
    update: "updateVisual"
  }, function(t, r) {
    r.eachComponent({
      mainType: "brush",
      query: t
    }, function(n) {
      n.setAreas(t.areas);
    });
  }), e.registerAction({
    type: "brushSelect",
    event: "brushSelected",
    update: "none"
  }, rr), e.registerAction({
    type: "brushEnd",
    event: "brushEnd",
    update: "none"
  }, rr), qu("brush", s1e);
}
var u1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.layoutMode = {
        type: "box",
        ignoreSize: !0
      }, r;
    }
    return t.type = "title", t.defaultOption = {
      // zlevel: 0,
      z: 6,
      show: !0,
      text: "",
      target: "blank",
      subtext: "",
      subtarget: "blank",
      left: 0,
      top: 0,
      backgroundColor: "rgba(0,0,0,0)",
      borderColor: "#ccc",
      borderWidth: 0,
      padding: 5,
      itemGap: 10,
      textStyle: {
        fontSize: 18,
        fontWeight: "bold",
        color: "#464646"
      },
      subtextStyle: {
        fontSize: 12,
        color: "#6E7079"
      }
    }, t;
  }(at)
), c1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.render = function(r, n, i) {
      if (this.group.removeAll(), !!r.get("show")) {
        var a = this.group, o = r.getModel("textStyle"), s = r.getModel("subtextStyle"), l = r.get("textAlign"), u = Ge(r.get("textBaseline"), r.get("textVerticalAlign")), c = new pt({
          style: Vt(o, {
            text: r.get("text"),
            fill: o.getTextColor()
          }, {
            disableBox: !0
          }),
          z2: 10
        }), f = c.getBoundingRect(), d = r.get("subtext"), h = new pt({
          style: Vt(s, {
            text: d,
            fill: s.getTextColor(),
            y: f.height + r.get("itemGap"),
            verticalAlign: "top"
          }, {
            disableBox: !0
          }),
          z2: 10
        }), p = r.get("link"), v = r.get("sublink"), g = r.get("triggerEvent", !0);
        c.silent = !p && !g, h.silent = !v && !g, p && c.on("click", function() {
          cm(p, "_" + r.get("target"));
        }), v && h.on("click", function() {
          cm(v, "_" + r.get("subtarget"));
        }), He(c).eventData = He(h).eventData = g ? {
          componentType: "title",
          componentIndex: r.componentIndex
        } : null, a.add(c), d && a.add(h);
        var m = a.getBoundingRect(), y = r.getBoxLayoutParams();
        y.width = m.width, y.height = m.height;
        var b = vr(y, {
          width: i.getWidth(),
          height: i.getHeight()
        }, r.get("padding"));
        l || (l = r.get("left") || r.get("right"), l === "middle" && (l = "center"), l === "right" ? b.x += b.width : l === "center" && (b.x += b.width / 2)), u || (u = r.get("top") || r.get("bottom"), u === "center" && (u = "middle"), u === "bottom" ? b.y += b.height : u === "middle" && (b.y += b.height / 2), u = u || "top"), a.x = b.x, a.y = b.y, a.markRedraw();
        var w = {
          align: l,
          verticalAlign: u
        };
        c.setStyle(w), h.setStyle(w), m = a.getBoundingRect();
        var _ = b.margin, S = r.getItemStyle(["color", "opacity"]);
        S.fill = r.get("backgroundColor");
        var C = new vt({
          shape: {
            x: m.x - _[3],
            y: m.y - _[0],
            width: m.width + _[1] + _[3],
            height: m.height + _[0] + _[2],
            r: r.get("borderRadius")
          },
          style: S,
          subPixelOptimize: !0,
          silent: !0
        });
        a.add(C);
      }
    }, t.type = "title", t;
  }($t)
);
function f1e(e) {
  e.registerComponentModel(u1e), e.registerComponentView(c1e);
}
var PL = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.layoutMode = "box", r;
    }
    return t.prototype.init = function(r, n, i) {
      this.mergeDefaultAndTheme(r, i), this._initData();
    }, t.prototype.mergeOption = function(r) {
      e.prototype.mergeOption.apply(this, arguments), this._initData();
    }, t.prototype.setCurrentIndex = function(r) {
      r == null && (r = this.option.currentIndex);
      var n = this._data.count();
      this.option.loop ? r = (r % n + n) % n : (r >= n && (r = n - 1), r < 0 && (r = 0)), this.option.currentIndex = r;
    }, t.prototype.getCurrentIndex = function() {
      return this.option.currentIndex;
    }, t.prototype.isIndexMax = function() {
      return this.getCurrentIndex() >= this._data.count() - 1;
    }, t.prototype.setPlayState = function(r) {
      this.option.autoPlay = !!r;
    }, t.prototype.getPlayState = function() {
      return !!this.option.autoPlay;
    }, t.prototype._initData = function() {
      var r = this.option, n = r.data || [], i = r.axisType, a = this._names = [], o;
      i === "category" ? (o = [], j(n, function(u, c) {
        var f = yr(nf(u), ""), d;
        Ne(u) ? (d = ze(u), d.value = c) : d = c, o.push(d), a.push(f);
      })) : o = n;
      var s = {
        category: "ordinal",
        time: "time",
        value: "number"
      }[i] || "number", l = this._data = new Xr([{
        name: "value",
        type: s
      }], this);
      l.initData(o, a);
    }, t.prototype.getData = function() {
      return this._data;
    }, t.prototype.getCategories = function() {
      if (this.get("axisType") === "category")
        return this._names.slice();
    }, t.type = "timeline", t.defaultOption = {
      // zlevel: 0,                  // 一级层叠
      z: 4,
      show: !0,
      axisType: "time",
      realtime: !0,
      left: "20%",
      top: null,
      right: "20%",
      bottom: 0,
      width: null,
      height: 40,
      padding: 5,
      controlPosition: "left",
      autoPlay: !1,
      rewind: !1,
      loop: !0,
      playInterval: 2e3,
      currentIndex: 0,
      itemStyle: {},
      label: {
        color: "#000"
      },
      data: []
    }, t;
  }(at)
), Xj = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "timeline.slider", t.defaultOption = ms(PL.defaultOption, {
      backgroundColor: "rgba(0,0,0,0)",
      borderColor: "#ccc",
      borderWidth: 0,
      orient: "horizontal",
      inverse: !1,
      tooltip: {
        trigger: "item"
        // data item may also have tootip attr.
      },
      symbol: "circle",
      symbolSize: 12,
      lineStyle: {
        show: !0,
        width: 2,
        color: "#DAE1F5"
      },
      label: {
        position: "auto",
        // When using number, label position is not
        // restricted by viewRect.
        // positive: right/bottom, negative: left/top
        show: !0,
        interval: "auto",
        rotate: 0,
        // formatter: null,
        // 其余属性默认使用全局文本样式，详见TEXTSTYLE
        color: "#A4B1D7"
      },
      itemStyle: {
        color: "#A4B1D7",
        borderWidth: 1
      },
      checkpointStyle: {
        symbol: "circle",
        symbolSize: 15,
        color: "#316bf3",
        borderColor: "#fff",
        borderWidth: 2,
        shadowBlur: 2,
        shadowOffsetX: 1,
        shadowOffsetY: 1,
        shadowColor: "rgba(0, 0, 0, 0.3)",
        // borderColor: 'rgba(194,53,49, 0.5)',
        animation: !0,
        animationDuration: 300,
        animationEasing: "quinticInOut"
      },
      controlStyle: {
        show: !0,
        showPlayBtn: !0,
        showPrevBtn: !0,
        showNextBtn: !0,
        itemSize: 24,
        itemGap: 12,
        position: "left",
        playIcon: "path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",
        stopIcon: "path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",
        // eslint-disable-next-line max-len
        nextIcon: "M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",
        // eslint-disable-next-line max-len
        prevIcon: "M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",
        prevBtnSize: 18,
        nextBtnSize: 18,
        color: "#A4B1D7",
        borderColor: "#A4B1D7",
        borderWidth: 1
      },
      emphasis: {
        label: {
          show: !0,
          // 其余属性默认使用全局文本样式，详见TEXTSTYLE
          color: "#6f778d"
        },
        itemStyle: {
          color: "#316BF3"
        },
        controlStyle: {
          color: "#316BF3",
          borderColor: "#316BF3",
          borderWidth: 2
        }
      },
      progress: {
        lineStyle: {
          color: "#316BF3"
        },
        itemStyle: {
          color: "#316BF3"
        },
        label: {
          color: "#6f778d"
        }
      },
      data: []
    }), t;
  }(PL)
);
ir(Xj, Jy.prototype);
var d1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "timeline", t;
  }($t)
), h1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t(r, n, i, a) {
      var o = e.call(this, r, n, i) || this;
      return o.type = a || "value", o;
    }
    return t.prototype.getLabelModel = function() {
      return this.model.getModel("label");
    }, t.prototype.isHorizontal = function() {
      return this.model.get("orient") === "horizontal";
    }, t;
  }(ui)
), wb = Math.PI, kL = yt(), p1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function(r, n) {
      this.api = n;
    }, t.prototype.render = function(r, n, i) {
      if (this.model = r, this.api = i, this.ecModel = n, this.group.removeAll(), r.get("show", !0)) {
        var a = this._layout(r, i), o = this._createGroup("_mainGroup"), s = this._createGroup("_labelGroup"), l = this._axis = this._createAxis(a, r);
        r.formatTooltip = function(u) {
          var c = l.scale.getLabel({
            value: u
          });
          return Tr("nameValue", {
            noName: !0,
            value: c
          });
        }, j(["AxisLine", "AxisTick", "Control", "CurrentPointer"], function(u) {
          this["_render" + u](a, o, l, r);
        }, this), this._renderAxisLabel(a, s, l, r), this._position(a, r);
      }
      this._doPlayStop(), this._updateTicksStatus();
    }, t.prototype.remove = function() {
      this._clearTimer(), this.group.removeAll();
    }, t.prototype.dispose = function() {
      this._clearTimer();
    }, t.prototype._layout = function(r, n) {
      var i = r.get(["label", "position"]), a = r.get("orient"), o = g1e(r, n), s;
      i == null || i === "auto" ? s = a === "horizontal" ? o.y + o.height / 2 < n.getHeight() / 2 ? "-" : "+" : o.x + o.width / 2 < n.getWidth() / 2 ? "+" : "-" : ge(i) ? s = {
        horizontal: {
          top: "-",
          bottom: "+"
        },
        vertical: {
          left: "-",
          right: "+"
        }
      }[a][i] : s = i;
      var l = {
        horizontal: "center",
        vertical: s >= 0 || s === "+" ? "left" : "right"
      }, u = {
        horizontal: s >= 0 || s === "+" ? "top" : "bottom",
        vertical: "middle"
      }, c = {
        horizontal: 0,
        vertical: wb / 2
      }, f = a === "vertical" ? o.height : o.width, d = r.getModel("controlStyle"), h = d.get("show", !0), p = h ? d.get("itemSize") : 0, v = h ? d.get("itemGap") : 0, g = p + v, m = r.get(["label", "rotate"]) || 0;
      m = m * wb / 180;
      var y, b, w, _ = d.get("position", !0), S = h && d.get("showPlayBtn", !0), C = h && d.get("showPrevBtn", !0), A = h && d.get("showNextBtn", !0), M = 0, D = f;
      _ === "left" || _ === "bottom" ? (S && (y = [0, 0], M += g), C && (b = [M, 0], M += g), A && (w = [D - p, 0], D -= g)) : (S && (y = [D - p, 0], D -= g), C && (b = [0, 0], M += g), A && (w = [D - p, 0], D -= g));
      var N = [M, D];
      return r.get("inverse") && N.reverse(), {
        viewRect: o,
        mainLength: f,
        orient: a,
        rotation: c[a],
        labelRotation: m,
        labelPosOpt: s,
        labelAlign: r.get(["label", "align"]) || l[a],
        labelBaseline: r.get(["label", "verticalAlign"]) || r.get(["label", "baseline"]) || u[a],
        // Based on mainGroup.
        playPosition: y,
        prevBtnPosition: b,
        nextBtnPosition: w,
        axisExtent: N,
        controlSize: p,
        controlGap: v
      };
    }, t.prototype._position = function(r, n) {
      var i = this._mainGroup, a = this._labelGroup, o = r.viewRect;
      if (r.orient === "vertical") {
        var s = yn(), l = o.x, u = o.y + o.height;
        Ni(s, s, [-l, -u]), vs(s, s, -wb / 2), Ni(s, s, [l, u]), o = o.clone(), o.applyTransform(s);
      }
      var c = y(o), f = y(i.getBoundingRect()), d = y(a.getBoundingRect()), h = [i.x, i.y], p = [a.x, a.y];
      p[0] = h[0] = c[0][0];
      var v = r.labelPosOpt;
      if (v == null || ge(v)) {
        var g = v === "+" ? 0 : 1;
        b(h, f, c, 1, g), b(p, d, c, 1, 1 - g);
      } else {
        var g = v >= 0 ? 0 : 1;
        b(h, f, c, 1, g), p[1] = h[1] + v;
      }
      i.setPosition(h), a.setPosition(p), i.rotation = a.rotation = r.rotation, m(i), m(a);
      function m(w) {
        w.originX = c[0][0] - w.x, w.originY = c[1][0] - w.y;
      }
      function y(w) {
        return [[w.x, w.x + w.width], [w.y, w.y + w.height]];
      }
      function b(w, _, S, C, A) {
        w[C] += S[C][A] - _[C][A];
      }
    }, t.prototype._createAxis = function(r, n) {
      var i = n.getData(), a = n.get("axisType"), o = v1e(n, a);
      o.getTicks = function() {
        return i.mapArray(["value"], function(u) {
          return {
            value: u
          };
        });
      };
      var s = i.getDataExtent("value");
      o.setExtent(s[0], s[1]), o.calcNiceTicks();
      var l = new h1e("value", o, r.axisExtent, a);
      return l.model = n, l;
    }, t.prototype._createGroup = function(r) {
      var n = this[r] = new Fe();
      return this.group.add(n), n;
    }, t.prototype._renderAxisLine = function(r, n, i, a) {
      var o = i.getExtent();
      if (a.get(["lineStyle", "show"])) {
        var s = new xr({
          shape: {
            x1: o[0],
            y1: 0,
            x2: o[1],
            y2: 0
          },
          style: ae({
            lineCap: "round"
          }, a.getModel("lineStyle").getLineStyle()),
          silent: !0,
          z2: 1
        });
        n.add(s);
        var l = this._progressLine = new xr({
          shape: {
            x1: o[0],
            x2: this._currentPointer ? this._currentPointer.x : o[0],
            y1: 0,
            y2: 0
          },
          style: Ie({
            lineCap: "round",
            lineWidth: s.style.lineWidth
          }, a.getModel(["progress", "lineStyle"]).getLineStyle()),
          silent: !0,
          z2: 1
        });
        n.add(l);
      }
    }, t.prototype._renderAxisTick = function(r, n, i, a) {
      var o = this, s = a.getData(), l = i.scale.getTicks();
      this._tickSymbols = [], j(l, function(u) {
        var c = i.dataToCoord(u.value), f = s.getItemModel(u.value), d = f.getModel("itemStyle"), h = f.getModel(["emphasis", "itemStyle"]), p = f.getModel(["progress", "itemStyle"]), v = {
          x: c,
          y: 0,
          onclick: xe(o._changeTimeline, o, u.value)
        }, g = OL(f, d, n, v);
        g.ensureState("emphasis").style = h.getItemStyle(), g.ensureState("progress").style = p.getItemStyle(), Xo(g);
        var m = He(g);
        f.get("tooltip") ? (m.dataIndex = u.value, m.dataModel = a) : m.dataIndex = m.dataModel = null, o._tickSymbols.push(g);
      });
    }, t.prototype._renderAxisLabel = function(r, n, i, a) {
      var o = this, s = i.getLabelModel();
      if (s.get("show")) {
        var l = a.getData(), u = i.getViewLabels();
        this._tickLabels = [], j(u, function(c) {
          var f = c.tickValue, d = l.getItemModel(f), h = d.getModel("label"), p = d.getModel(["emphasis", "label"]), v = d.getModel(["progress", "label"]), g = i.dataToCoord(c.tickValue), m = new pt({
            x: g,
            y: 0,
            rotation: r.labelRotation - r.rotation,
            onclick: xe(o._changeTimeline, o, f),
            silent: !1,
            style: Vt(h, {
              text: c.formattedLabel,
              align: r.labelAlign,
              verticalAlign: r.labelBaseline
            })
          });
          m.ensureState("emphasis").style = Vt(p), m.ensureState("progress").style = Vt(v), n.add(m), Xo(m), kL(m).dataIndex = f, o._tickLabels.push(m);
        });
      }
    }, t.prototype._renderControl = function(r, n, i, a) {
      var o = r.controlSize, s = r.rotation, l = a.getModel("controlStyle").getItemStyle(), u = a.getModel(["emphasis", "controlStyle"]).getItemStyle(), c = a.getPlayState(), f = a.get("inverse", !0);
      d(r.nextBtnPosition, "next", xe(this._changeTimeline, this, f ? "-" : "+")), d(r.prevBtnPosition, "prev", xe(this._changeTimeline, this, f ? "+" : "-")), d(r.playPosition, c ? "stop" : "play", xe(this._handlePlayClick, this, !c), !0);
      function d(h, p, v, g) {
        if (h) {
          var m = Ii(Ge(a.get(["controlStyle", p + "BtnSize"]), o), o), y = [0, -m / 2, m, m], b = m1e(a, p + "Icon", y, {
            x: h[0],
            y: h[1],
            originX: o / 2,
            originY: 0,
            rotation: g ? -s : 0,
            rectHover: !0,
            style: l,
            onclick: v
          });
          b.ensureState("emphasis").style = u, n.add(b), Xo(b);
        }
      }
    }, t.prototype._renderCurrentPointer = function(r, n, i, a) {
      var o = a.getData(), s = a.getCurrentIndex(), l = o.getItemModel(s).getModel("checkpointStyle"), u = this, c = {
        onCreate: function(f) {
          f.draggable = !0, f.drift = xe(u._handlePointerDrag, u), f.ondragend = xe(u._handlePointerDragend, u), zL(f, u._progressLine, s, i, a, !0);
        },
        onUpdate: function(f) {
          zL(f, u._progressLine, s, i, a);
        }
      };
      this._currentPointer = OL(l, l, this._mainGroup, {}, this._currentPointer, c);
    }, t.prototype._handlePlayClick = function(r) {
      this._clearTimer(), this.api.dispatchAction({
        type: "timelinePlayChange",
        playState: r,
        from: this.uid
      });
    }, t.prototype._handlePointerDrag = function(r, n, i) {
      this._clearTimer(), this._pointerChangeTimeline([i.offsetX, i.offsetY]);
    }, t.prototype._handlePointerDragend = function(r) {
      this._pointerChangeTimeline([r.offsetX, r.offsetY], !0);
    }, t.prototype._pointerChangeTimeline = function(r, n) {
      var i = this._toAxisCoord(r)[0], a = this._axis, o = An(a.getExtent().slice());
      i > o[1] && (i = o[1]), i < o[0] && (i = o[0]), this._currentPointer.x = i, this._currentPointer.markRedraw();
      var s = this._progressLine;
      s && (s.shape.x2 = i, s.dirty());
      var l = this._findNearestTick(i), u = this.model;
      (n || l !== u.getCurrentIndex() && u.get("realtime")) && this._changeTimeline(l);
    }, t.prototype._doPlayStop = function() {
      var r = this;
      this._clearTimer(), this.model.getPlayState() && (this._timer = setTimeout(function() {
        var n = r.model;
        r._changeTimeline(n.getCurrentIndex() + (n.get("rewind", !0) ? -1 : 1));
      }, this.model.get("playInterval")));
    }, t.prototype._toAxisCoord = function(r) {
      var n = this._mainGroup.getLocalTransform();
      return Ai(r, n, !0);
    }, t.prototype._findNearestTick = function(r) {
      var n = this.model.getData(), i = 1 / 0, a, o = this._axis;
      return n.each(["value"], function(s, l) {
        var u = o.dataToCoord(s), c = Math.abs(u - r);
        c < i && (i = c, a = l);
      }), a;
    }, t.prototype._clearTimer = function() {
      this._timer && (clearTimeout(this._timer), this._timer = null);
    }, t.prototype._changeTimeline = function(r) {
      var n = this.model.getCurrentIndex();
      r === "+" ? r = n + 1 : r === "-" && (r = n - 1), this.api.dispatchAction({
        type: "timelineChange",
        currentIndex: r,
        from: this.uid
      });
    }, t.prototype._updateTicksStatus = function() {
      var r = this.model.getCurrentIndex(), n = this._tickSymbols, i = this._tickLabels;
      if (n)
        for (var a = 0; a < n.length; a++)
          n && n[a] && n[a].toggleState("progress", a < r);
      if (i)
        for (var a = 0; a < i.length; a++)
          i && i[a] && i[a].toggleState("progress", kL(i[a]).dataIndex <= r);
    }, t.type = "timeline.slider", t;
  }(d1e)
);
function v1e(e, t) {
  if (t = t || e.get("type"), t)
    switch (t) {
      case "category":
        return new o0({
          ordinalMeta: e.getCategories(),
          extent: [1 / 0, -1 / 0]
        });
      case "time":
        return new eT({
          locale: e.ecModel.getLocaleModel(),
          useUTC: e.ecModel.get("useUTC")
        });
      default:
        return new eo();
    }
}
function g1e(e, t) {
  return vr(e.getBoxLayoutParams(), {
    width: t.getWidth(),
    height: t.getHeight()
  }, e.get("padding"));
}
function m1e(e, t, r, n) {
  var i = n.style, a = cf(e.get(["controlStyle", t]), n || {}, new tt(r[0], r[1], r[2], r[3]));
  return i && a.setStyle(i), a;
}
function OL(e, t, r, n, i, a) {
  var o = t.get("color");
  if (i)
    i.setColor(o), r.add(i), a && a.onUpdate(i);
  else {
    var s = e.get("symbol");
    i = fr(s, -1, -1, 2, 2, o), i.setStyle("strokeNoScale", !0), r.add(i), a && a.onCreate(i);
  }
  var l = t.getItemStyle(["color"]);
  i.setStyle(l), n = Xe({
    rectHover: !0,
    z2: 100
  }, n, !0);
  var u = mf(e.get("symbolSize"));
  n.scaleX = u[0] / 2, n.scaleY = u[1] / 2;
  var c = ql(e.get("symbolOffset"), u);
  c && (n.x = (n.x || 0) + c[0], n.y = (n.y || 0) + c[1]);
  var f = e.get("symbolRotate");
  return n.rotation = (f || 0) * Math.PI / 180 || 0, i.attr(n), i.updateTransform(), i;
}
function zL(e, t, r, n, i, a) {
  if (!e.dragging) {
    var o = i.getModel("checkpointStyle"), s = n.dataToCoord(i.getData().get("value", r));
    if (a || !o.get("animation", !0))
      e.attr({
        x: s,
        y: 0
      }), t && t.attr({
        shape: {
          x2: s
        }
      });
    else {
      var l = {
        duration: o.get("animationDuration", !0),
        easing: o.get("animationEasing", !0)
      };
      e.stopAnimation(null, !0), e.animateTo({
        x: s,
        y: 0
      }, l), t && t.animateTo({
        shape: {
          x2: s
        }
      }, l);
    }
  }
}
function y1e(e) {
  e.registerAction({
    type: "timelineChange",
    event: "timelineChanged",
    update: "prepareAndUpdate"
  }, function(t, r, n) {
    var i = r.getComponent("timeline");
    return i && t.currentIndex != null && (i.setCurrentIndex(t.currentIndex), !i.get("loop", !0) && i.isIndexMax() && i.getPlayState() && (i.setPlayState(!1), n.dispatchAction({
      type: "timelinePlayChange",
      playState: !1,
      from: t.from
    }))), r.resetOption("timeline", {
      replaceMerge: i.get("replaceMerge", !0)
    }), Ie({
      currentIndex: i.option.currentIndex
    }, t);
  }), e.registerAction({
    type: "timelinePlayChange",
    event: "timelinePlayChanged",
    update: "update"
  }, function(t, r) {
    var n = r.getComponent("timeline");
    n && t.playState != null && n.setPlayState(t.playState);
  });
}
function x1e(e) {
  var t = e && e.timeline;
  le(t) || (t = t ? [t] : []), j(t, function(r) {
    r && b1e(r);
  });
}
function b1e(e) {
  var t = e.type, r = {
    number: "value",
    time: "time"
  };
  if (r[t] && (e.axisType = r[t], delete e.type), jL(e), nl(e, "controlPosition")) {
    var n = e.controlStyle || (e.controlStyle = {});
    nl(n, "position") || (n.position = e.controlPosition), n.position === "none" && !nl(n, "show") && (n.show = !1, delete n.position), delete e.controlPosition;
  }
  j(e.data || [], function(i) {
    Ne(i) && !le(i) && (!nl(i, "value") && nl(i, "name") && (i.value = i.name), jL(i));
  });
}
function jL(e) {
  var t = e.itemStyle || (e.itemStyle = {}), r = t.emphasis || (t.emphasis = {}), n = e.label || e.label || {}, i = n.normal || (n.normal = {}), a = {
    normal: 1,
    emphasis: 1
  };
  j(n, function(o, s) {
    !a[s] && !nl(i, s) && (i[s] = o);
  }), r.label && !nl(n, "emphasis") && (n.emphasis = r.label, delete r.label);
}
function nl(e, t) {
  return e.hasOwnProperty(t);
}
function w1e(e) {
  e.registerComponentModel(Xj), e.registerComponentView(p1e), e.registerSubTypeDefaulter("timeline", function() {
    return "slider";
  }), y1e(e), e.registerPreprocessor(x1e);
}
function iA(e, t) {
  if (!e)
    return !1;
  for (var r = le(e) ? e : [e], n = 0; n < r.length; n++)
    if (r[n] && r[n][t])
      return !0;
  return !1;
}
function Ov(e) {
  kl(e, "label", ["show"]);
}
var zv = yt(), ro = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.createdBySelf = !1, r;
    }
    return t.prototype.init = function(r, n, i) {
      if (process.env.NODE_ENV !== "production" && this.type === "marker")
        throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");
      this.mergeDefaultAndTheme(r, i), this._mergeOption(r, i, !1, !0);
    }, t.prototype.isAnimationEnabled = function() {
      if (st.node)
        return !1;
      var r = this.__hostSeries;
      return this.getShallow("animation") && r && r.isAnimationEnabled();
    }, t.prototype.mergeOption = function(r, n) {
      this._mergeOption(r, n, !1, !1);
    }, t.prototype._mergeOption = function(r, n, i, a) {
      var o = this.mainType;
      i || n.eachSeries(function(s) {
        var l = s.get(this.mainType, !0), u = zv(s)[o];
        if (!l || !l.data) {
          zv(s)[o] = null;
          return;
        }
        u ? u._mergeOption(l, n, !0) : (a && Ov(l), j(l.data, function(c) {
          c instanceof Array ? (Ov(c[0]), Ov(c[1])) : Ov(c);
        }), u = this.createMarkerModelFromSeries(l, this, n), ae(u, {
          mainType: this.mainType,
          // Use the same series index and name
          seriesIndex: s.seriesIndex,
          name: s.name,
          createdBySelf: !0
        }), u.__hostSeries = s), zv(s)[o] = u;
      }, this);
    }, t.prototype.formatTooltip = function(r, n, i) {
      var a = this.getData(), o = this.getRawValue(r), s = a.getName(r);
      return Tr("section", {
        header: this.name,
        blocks: [Tr("nameValue", {
          name: s,
          value: o,
          noName: !s,
          noValue: o == null
        })]
      });
    }, t.prototype.getData = function() {
      return this._data;
    }, t.prototype.setData = function(r) {
      this._data = r;
    }, t.prototype.getDataParams = function(r, n) {
      var i = Jy.prototype.getDataParams.call(this, r, n), a = this.__hostSeries;
      return a && (i.seriesId = a.id, i.seriesName = a.name, i.seriesType = a.subType), i;
    }, t.getMarkerModelFromSeries = function(r, n) {
      return zv(r)[n];
    }, t.type = "marker", t.dependencies = ["series", "grid", "polar", "geo"], t;
  }(at)
);
ir(ro, Jy.prototype);
var _1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.createMarkerModelFromSeries = function(r, n, i) {
      return new t(r, n, i);
    }, t.type = "markPoint", t.defaultOption = {
      // zlevel: 0,
      z: 5,
      symbol: "pin",
      symbolSize: 50,
      // symbolRotate: 0,
      // symbolOffset: [0, 0]
      tooltip: {
        trigger: "item"
      },
      label: {
        show: !0,
        position: "inside"
      },
      itemStyle: {
        borderWidth: 2
      },
      emphasis: {
        label: {
          show: !0
        }
      }
    }, t;
  }(ro)
);
function y_(e) {
  return !(isNaN(parseFloat(e.x)) && isNaN(parseFloat(e.y)));
}
function S1e(e) {
  return !isNaN(parseFloat(e.x)) && !isNaN(parseFloat(e.y));
}
function jv(e, t, r, n, i, a) {
  var o = [], s = Qa(
    t,
    n
    /* , otherDataDim */
  ), l = s ? t.getCalculationInfo("stackResultDimension") : n, u = aA(t, l, e), c = t.indicesOfNearest(l, u)[0];
  o[i] = t.get(r, c), o[a] = t.get(l, c);
  var f = t.get(n, c), d = bi(t.get(n, c));
  return d = Math.min(d, 20), d >= 0 && (o[a] = +o[a].toFixed(d)), [o, f];
}
var _b = {
  min: We(jv, "min"),
  max: We(jv, "max"),
  average: We(jv, "average"),
  median: We(jv, "median")
};
function Ph(e, t) {
  if (t) {
    var r = e.getData(), n = e.coordinateSystem, i = n && n.dimensions;
    if (!S1e(t) && !le(t.coord) && le(i)) {
      var a = Kj(t, r, n, e);
      if (t = ze(t), t.type && _b[t.type] && a.baseAxis && a.valueAxis) {
        var o = rt(i, a.baseAxis.dim), s = rt(i, a.valueAxis.dim), l = _b[t.type](r, a.baseDataDim, a.valueDataDim, o, s);
        t.coord = l[0], t.value = l[1];
      } else
        t.coord = [t.xAxis != null ? t.xAxis : t.radiusAxis, t.yAxis != null ? t.yAxis : t.angleAxis];
    }
    if (t.coord == null || !le(i))
      t.coord = [];
    else
      for (var u = t.coord, c = 0; c < 2; c++)
        _b[u[c]] && (u[c] = aA(r, r.mapDimension(i[c]), u[c]));
    return t;
  }
}
function Kj(e, t, r, n) {
  var i = {};
  return e.valueIndex != null || e.valueDim != null ? (i.valueDataDim = e.valueIndex != null ? t.getDimension(e.valueIndex) : e.valueDim, i.valueAxis = r.getAxis(C1e(n, i.valueDataDim)), i.baseAxis = r.getOtherAxis(i.valueAxis), i.baseDataDim = t.mapDimension(i.baseAxis.dim)) : (i.baseAxis = n.getBaseAxis(), i.valueAxis = r.getOtherAxis(i.baseAxis), i.baseDataDim = t.mapDimension(i.baseAxis.dim), i.valueDataDim = t.mapDimension(i.valueAxis.dim)), i;
}
function C1e(e, t) {
  var r = e.getData().getDimensionInfo(t);
  return r && r.coordDim;
}
function kh(e, t) {
  return e && e.containData && t.coord && !y_(t) ? e.containData(t.coord) : !0;
}
function T1e(e, t, r) {
  return e && e.containZone && t.coord && r.coord && !y_(t) && !y_(r) ? e.containZone(t.coord, r.coord) : !0;
}
function qj(e, t) {
  return e ? function(r, n, i, a) {
    var o = a < 2 ? r.coord && r.coord[a] : r.value;
    return qo(o, t[a]);
  } : function(r, n, i, a) {
    return qo(r.value, t[a]);
  };
}
function aA(e, t, r) {
  if (r === "average") {
    var n = 0, i = 0;
    return e.each(t, function(a, o) {
      isNaN(a) || (n += a, i++);
    }), n / i;
  } else return r === "median" ? e.getMedian(t) : e.getDataExtent(t)[r === "max" ? 1 : 0];
}
var Sb = yt(), oA = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.init = function() {
      this.markerGroupMap = Ce();
    }, t.prototype.render = function(r, n, i) {
      var a = this, o = this.markerGroupMap;
      o.each(function(s) {
        Sb(s).keep = !1;
      }), n.eachSeries(function(s) {
        var l = ro.getMarkerModelFromSeries(s, a.type);
        l && a.renderSeries(s, l, n, i);
      }), o.each(function(s) {
        !Sb(s).keep && a.group.remove(s.group);
      });
    }, t.prototype.markKeep = function(r) {
      Sb(r).keep = !0;
    }, t.prototype.toggleBlurSeries = function(r, n) {
      var i = this;
      j(r, function(a) {
        var o = ro.getMarkerModelFromSeries(a, i.type);
        if (o) {
          var s = o.getData();
          s.eachItemGraphicEl(function(l) {
            l && (n ? H9(l) : hC(l));
          });
        }
      });
    }, t.type = "marker", t;
  }($t)
);
function VL(e, t, r) {
  var n = t.coordinateSystem;
  e.each(function(i) {
    var a = e.getItemModel(i), o, s = pe(a.get("x"), r.getWidth()), l = pe(a.get("y"), r.getHeight());
    if (!isNaN(s) && !isNaN(l))
      o = [s, l];
    else if (t.getMarkerPosition)
      o = t.getMarkerPosition(e.getValues(e.dimensions, i));
    else if (n) {
      var u = e.get(n.dimensions[0], i), c = e.get(n.dimensions[1], i);
      o = n.dataToPoint([u, c]);
    }
    isNaN(s) || (o[0] = s), isNaN(l) || (o[1] = l), e.setItemLayout(i, o);
  });
}
var A1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.updateTransform = function(r, n, i) {
      n.eachSeries(function(a) {
        var o = ro.getMarkerModelFromSeries(a, "markPoint");
        o && (VL(o.getData(), a, i), this.markerGroupMap.get(a.id).updateLayout());
      }, this);
    }, t.prototype.renderSeries = function(r, n, i, a) {
      var o = r.coordinateSystem, s = r.id, l = r.getData(), u = this.markerGroupMap, c = u.get(s) || u.set(s, new cp()), f = M1e(o, r, n);
      n.setData(f), VL(n.getData(), r, a), f.each(function(d) {
        var h = f.getItemModel(d), p = h.getShallow("symbol"), v = h.getShallow("symbolSize"), g = h.getShallow("symbolRotate"), m = h.getShallow("symbolOffset"), y = h.getShallow("symbolKeepAspect");
        if (Ee(p) || Ee(v) || Ee(g) || Ee(m)) {
          var b = n.getRawValue(d), w = n.getDataParams(d);
          Ee(p) && (p = p(b, w)), Ee(v) && (v = v(b, w)), Ee(g) && (g = g(b, w)), Ee(m) && (m = m(b, w));
        }
        var _ = h.getModel("itemStyle").getItemStyle(), S = sp(l, "color");
        _.fill || (_.fill = S), f.setItemVisual(d, {
          symbol: p,
          symbolSize: v,
          symbolRotate: g,
          symbolOffset: m,
          symbolKeepAspect: y,
          style: _
        });
      }), c.updateData(f), this.group.add(c.group), f.eachItemGraphicEl(function(d) {
        d.traverse(function(h) {
          He(h).dataModel = n;
        });
      }), this.markKeep(c), c.group.silent = n.get("silent") || r.get("silent");
    }, t.type = "markPoint", t;
  }(oA)
);
function M1e(e, t, r) {
  var n;
  e ? n = ue(e && e.dimensions, function(s) {
    var l = t.getData().getDimensionInfo(t.getData().mapDimension(s)) || {};
    return ae(ae({}, l), {
      name: s,
      // DON'T use ordinalMeta to parse and collect ordinal.
      ordinalMeta: null
    });
  }) : n = [{
    name: "value",
    type: "float"
  }];
  var i = new Xr(n, r), a = ue(r.get("data"), We(Ph, t));
  e && (a = Ct(a, We(kh, e)));
  var o = qj(!!e, n);
  return i.initData(a, null, o), i;
}
function E1e(e) {
  e.registerComponentModel(_1e), e.registerComponentView(A1e), e.registerPreprocessor(function(t) {
    iA(t.series, "markPoint") && (t.markPoint = t.markPoint || {});
  });
}
var D1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.createMarkerModelFromSeries = function(r, n, i) {
      return new t(r, n, i);
    }, t.type = "markLine", t.defaultOption = {
      // zlevel: 0,
      z: 5,
      symbol: ["circle", "arrow"],
      symbolSize: [8, 16],
      // symbolRotate: 0,
      symbolOffset: 0,
      precision: 2,
      tooltip: {
        trigger: "item"
      },
      label: {
        show: !0,
        position: "end",
        distance: 5
      },
      lineStyle: {
        type: "dashed"
      },
      emphasis: {
        label: {
          show: !0
        },
        lineStyle: {
          width: 3
        }
      },
      animationEasing: "linear"
    }, t;
  }(ro)
), Vv = yt(), N1e = function(e, t, r, n) {
  var i = e.getData(), a;
  if (le(n))
    a = n;
  else {
    var o = n.type;
    if (o === "min" || o === "max" || o === "average" || o === "median" || n.xAxis != null || n.yAxis != null) {
      var s = void 0, l = void 0;
      if (n.yAxis != null || n.xAxis != null)
        s = t.getAxis(n.yAxis != null ? "y" : "x"), l = ur(n.yAxis, n.xAxis);
      else {
        var u = Kj(n, i, t, e);
        s = u.valueAxis;
        var c = JC(i, u.valueDataDim);
        l = aA(i, c, o);
      }
      var f = s.dim === "x" ? 0 : 1, d = 1 - f, h = ze(n), p = {
        coord: []
      };
      h.type = null, h.coord = [], h.coord[d] = -1 / 0, p.coord[d] = 1 / 0;
      var v = r.get("precision");
      v >= 0 && bt(l) && (l = +l.toFixed(Math.min(v, 20))), h.coord[f] = p.coord[f] = l, a = [h, p, {
        type: o,
        valueIndex: n.valueIndex,
        // Force to use the value of calculated value.
        value: l
      }];
    } else
      process.env.NODE_ENV !== "production" && Kn("Invalid markLine data."), a = [];
  }
  var g = [Ph(e, a[0]), Ph(e, a[1]), ae({}, a[2])];
  return g[2].type = g[2].type || null, Xe(g[2], g[0]), Xe(g[2], g[1]), g;
};
function Fm(e) {
  return !isNaN(e) && !isFinite(e);
}
function BL(e, t, r, n) {
  var i = 1 - e, a = n.dimensions[e];
  return Fm(t[i]) && Fm(r[i]) && t[e] === r[e] && n.getAxis(a).containData(t[e]);
}
function I1e(e, t) {
  if (e.type === "cartesian2d") {
    var r = t[0].coord, n = t[1].coord;
    if (r && n && (BL(1, r, n, e) || BL(0, r, n, e)))
      return !0;
  }
  return kh(e, t[0]) && kh(e, t[1]);
}
function Cb(e, t, r, n, i) {
  var a = n.coordinateSystem, o = e.getItemModel(t), s, l = pe(o.get("x"), i.getWidth()), u = pe(o.get("y"), i.getHeight());
  if (!isNaN(l) && !isNaN(u))
    s = [l, u];
  else {
    if (n.getMarkerPosition)
      s = n.getMarkerPosition(e.getValues(e.dimensions, t));
    else {
      var c = a.dimensions, f = e.get(c[0], t), d = e.get(c[1], t);
      s = a.dataToPoint([f, d]);
    }
    if (Jl(a, "cartesian2d")) {
      var h = a.getAxis("x"), p = a.getAxis("y"), c = a.dimensions;
      Fm(e.get(c[0], t)) ? s[0] = h.toGlobalCoord(h.getExtent()[r ? 0 : 1]) : Fm(e.get(c[1], t)) && (s[1] = p.toGlobalCoord(p.getExtent()[r ? 0 : 1]));
    }
    isNaN(l) || (s[0] = l), isNaN(u) || (s[1] = u);
  }
  e.setItemLayout(t, s);
}
var L1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.updateTransform = function(r, n, i) {
      n.eachSeries(function(a) {
        var o = ro.getMarkerModelFromSeries(a, "markLine");
        if (o) {
          var s = o.getData(), l = Vv(o).from, u = Vv(o).to;
          l.each(function(c) {
            Cb(l, c, !0, a, i), Cb(u, c, !1, a, i);
          }), s.each(function(c) {
            s.setItemLayout(c, [l.getItemLayout(c), u.getItemLayout(c)]);
          }), this.markerGroupMap.get(a.id).updateLayout();
        }
      }, this);
    }, t.prototype.renderSeries = function(r, n, i, a) {
      var o = r.coordinateSystem, s = r.id, l = r.getData(), u = this.markerGroupMap, c = u.get(s) || u.set(s, new MT());
      this.group.add(c.group);
      var f = R1e(o, r, n), d = f.from, h = f.to, p = f.line;
      Vv(n).from = d, Vv(n).to = h, n.setData(p);
      var v = n.get("symbol"), g = n.get("symbolSize"), m = n.get("symbolRotate"), y = n.get("symbolOffset");
      le(v) || (v = [v, v]), le(g) || (g = [g, g]), le(m) || (m = [m, m]), le(y) || (y = [y, y]), f.from.each(function(w) {
        b(d, w, !0), b(h, w, !1);
      }), p.each(function(w) {
        var _ = p.getItemModel(w).getModel("lineStyle").getLineStyle();
        p.setItemLayout(w, [d.getItemLayout(w), h.getItemLayout(w)]), _.stroke == null && (_.stroke = d.getItemVisual(w, "style").fill), p.setItemVisual(w, {
          fromSymbolKeepAspect: d.getItemVisual(w, "symbolKeepAspect"),
          fromSymbolOffset: d.getItemVisual(w, "symbolOffset"),
          fromSymbolRotate: d.getItemVisual(w, "symbolRotate"),
          fromSymbolSize: d.getItemVisual(w, "symbolSize"),
          fromSymbol: d.getItemVisual(w, "symbol"),
          toSymbolKeepAspect: h.getItemVisual(w, "symbolKeepAspect"),
          toSymbolOffset: h.getItemVisual(w, "symbolOffset"),
          toSymbolRotate: h.getItemVisual(w, "symbolRotate"),
          toSymbolSize: h.getItemVisual(w, "symbolSize"),
          toSymbol: h.getItemVisual(w, "symbol"),
          style: _
        });
      }), c.updateData(p), f.line.eachItemGraphicEl(function(w) {
        He(w).dataModel = n, w.traverse(function(_) {
          He(_).dataModel = n;
        });
      });
      function b(w, _, S) {
        var C = w.getItemModel(_);
        Cb(w, _, S, r, a);
        var A = C.getModel("itemStyle").getItemStyle();
        A.fill == null && (A.fill = sp(l, "color")), w.setItemVisual(_, {
          symbolKeepAspect: C.get("symbolKeepAspect"),
          // `0` should be considered as a valid value, so use `retrieve2` instead of `||`
          symbolOffset: Ge(C.get("symbolOffset", !0), y[S ? 0 : 1]),
          symbolRotate: Ge(C.get("symbolRotate", !0), m[S ? 0 : 1]),
          // TODO: when 2d array is supported, it should ignore parent
          symbolSize: Ge(C.get("symbolSize"), g[S ? 0 : 1]),
          symbol: Ge(C.get("symbol", !0), v[S ? 0 : 1]),
          style: A
        });
      }
      this.markKeep(c), c.group.silent = n.get("silent") || r.get("silent");
    }, t.type = "markLine", t;
  }(oA)
);
function R1e(e, t, r) {
  var n;
  e ? n = ue(e && e.dimensions, function(u) {
    var c = t.getData().getDimensionInfo(t.getData().mapDimension(u)) || {};
    return ae(ae({}, c), {
      name: u,
      // DON'T use ordinalMeta to parse and collect ordinal.
      ordinalMeta: null
    });
  }) : n = [{
    name: "value",
    type: "float"
  }];
  var i = new Xr(n, r), a = new Xr(n, r), o = new Xr([], r), s = ue(r.get("data"), We(N1e, t, e, r));
  e && (s = Ct(s, We(I1e, e)));
  var l = qj(!!e, n);
  return i.initData(ue(s, function(u) {
    return u[0];
  }), null, l), a.initData(ue(s, function(u) {
    return u[1];
  }), null, l), o.initData(ue(s, function(u) {
    return u[2];
  })), o.hasItemOption = !0, {
    from: i,
    to: a,
    line: o
  };
}
function P1e(e) {
  e.registerComponentModel(D1e), e.registerComponentView(L1e), e.registerPreprocessor(function(t) {
    iA(t.series, "markLine") && (t.markLine = t.markLine || {});
  });
}
var k1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.createMarkerModelFromSeries = function(r, n, i) {
      return new t(r, n, i);
    }, t.type = "markArea", t.defaultOption = {
      // zlevel: 0,
      // PENDING
      z: 1,
      tooltip: {
        trigger: "item"
      },
      // markArea should fixed on the coordinate system
      animation: !1,
      label: {
        show: !0,
        position: "top"
      },
      itemStyle: {
        // color and borderColor default to use color from series
        // color: 'auto'
        // borderColor: 'auto'
        borderWidth: 0
      },
      emphasis: {
        label: {
          show: !0,
          position: "top"
        }
      }
    }, t;
  }(ro)
), Bv = yt(), O1e = function(e, t, r, n) {
  var i = n[0], a = n[1];
  if (!(!i || !a)) {
    var o = Ph(e, i), s = Ph(e, a), l = o.coord, u = s.coord;
    l[0] = ur(l[0], -1 / 0), l[1] = ur(l[1], -1 / 0), u[0] = ur(u[0], 1 / 0), u[1] = ur(u[1], 1 / 0);
    var c = Ay([{}, o, s]);
    return c.coord = [o.coord, s.coord], c.x0 = o.x, c.y0 = o.y, c.x1 = s.x, c.y1 = s.y, c;
  }
};
function $m(e) {
  return !isNaN(e) && !isFinite(e);
}
function FL(e, t, r, n) {
  var i = 1 - e;
  return $m(t[i]) && $m(r[i]);
}
function z1e(e, t) {
  var r = t.coord[0], n = t.coord[1], i = {
    coord: r,
    x: t.x0,
    y: t.y0
  }, a = {
    coord: n,
    x: t.x1,
    y: t.y1
  };
  return Jl(e, "cartesian2d") ? r && n && (FL(1, r, n) || FL(0, r, n)) ? !0 : T1e(e, i, a) : kh(e, i) || kh(e, a);
}
function $L(e, t, r, n, i) {
  var a = n.coordinateSystem, o = e.getItemModel(t), s, l = pe(o.get(r[0]), i.getWidth()), u = pe(o.get(r[1]), i.getHeight());
  if (!isNaN(l) && !isNaN(u))
    s = [l, u];
  else {
    if (n.getMarkerPosition) {
      var c = e.getValues(["x0", "y0"], t), f = e.getValues(["x1", "y1"], t), d = a.clampData(c), h = a.clampData(f), p = [];
      r[0] === "x0" ? p[0] = d[0] > h[0] ? f[0] : c[0] : p[0] = d[0] > h[0] ? c[0] : f[0], r[1] === "y0" ? p[1] = d[1] > h[1] ? f[1] : c[1] : p[1] = d[1] > h[1] ? c[1] : f[1], s = n.getMarkerPosition(p, r, !0);
    } else {
      var v = e.get(r[0], t), g = e.get(r[1], t), m = [v, g];
      a.clampData && a.clampData(m, m), s = a.dataToPoint(m, !0);
    }
    if (Jl(a, "cartesian2d")) {
      var y = a.getAxis("x"), b = a.getAxis("y"), v = e.get(r[0], t), g = e.get(r[1], t);
      $m(v) ? s[0] = y.toGlobalCoord(y.getExtent()[r[0] === "x0" ? 0 : 1]) : $m(g) && (s[1] = b.toGlobalCoord(b.getExtent()[r[1] === "y0" ? 0 : 1]));
    }
    isNaN(l) || (s[0] = l), isNaN(u) || (s[1] = u);
  }
  return s;
}
var HL = [["x0", "y0"], ["x1", "y0"], ["x1", "y1"], ["x0", "y1"]], j1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.updateTransform = function(r, n, i) {
      n.eachSeries(function(a) {
        var o = ro.getMarkerModelFromSeries(a, "markArea");
        if (o) {
          var s = o.getData();
          s.each(function(l) {
            var u = ue(HL, function(f) {
              return $L(s, l, f, a, i);
            });
            s.setItemLayout(l, u);
            var c = s.getItemGraphicEl(l);
            c.setShape("points", u);
          });
        }
      }, this);
    }, t.prototype.renderSeries = function(r, n, i, a) {
      var o = r.coordinateSystem, s = r.id, l = r.getData(), u = this.markerGroupMap, c = u.get(s) || u.set(s, {
        group: new Fe()
      });
      this.group.add(c.group), this.markKeep(c);
      var f = V1e(o, r, n);
      n.setData(f), f.each(function(d) {
        var h = ue(HL, function(A) {
          return $L(f, d, A, r, a);
        }), p = o.getAxis("x").scale, v = o.getAxis("y").scale, g = p.getExtent(), m = v.getExtent(), y = [p.parse(f.get("x0", d)), p.parse(f.get("x1", d))], b = [v.parse(f.get("y0", d)), v.parse(f.get("y1", d))];
        An(y), An(b);
        var w = !(g[0] > y[1] || g[1] < y[0] || m[0] > b[1] || m[1] < b[0]), _ = !w;
        f.setItemLayout(d, {
          points: h,
          allClipped: _
        });
        var S = f.getItemModel(d).getModel("itemStyle").getItemStyle(), C = sp(l, "color");
        S.fill || (S.fill = C, ge(S.fill) && (S.fill = dh(S.fill, 0.4))), S.stroke || (S.stroke = C), f.setItemVisual(d, "style", S);
      }), f.diff(Bv(c).data).add(function(d) {
        var h = f.getItemLayout(d);
        if (!h.allClipped) {
          var p = new Jr({
            shape: {
              points: h.points
            }
          });
          f.setItemGraphicEl(d, p), c.group.add(p);
        }
      }).update(function(d, h) {
        var p = Bv(c).data.getItemGraphicEl(h), v = f.getItemLayout(d);
        v.allClipped ? p && c.group.remove(p) : (p ? _t(p, {
          shape: {
            points: v.points
          }
        }, n, d) : p = new Jr({
          shape: {
            points: v.points
          }
        }), f.setItemGraphicEl(d, p), c.group.add(p));
      }).remove(function(d) {
        var h = Bv(c).data.getItemGraphicEl(d);
        c.group.remove(h);
      }).execute(), f.eachItemGraphicEl(function(d, h) {
        var p = f.getItemModel(h), v = f.getItemVisual(h, "style");
        d.useStyle(f.getItemVisual(h, "style")), Br(d, Cr(p), {
          labelFetcher: n,
          labelDataIndex: h,
          defaultText: f.getName(h) || "",
          inheritColor: ge(v.fill) ? dh(v.fill, 1) : "#000"
        }), Vr(d, p), Jt(d, null, null, p.get(["emphasis", "disabled"])), He(d).dataModel = n;
      }), Bv(c).data = f, c.group.silent = n.get("silent") || r.get("silent");
    }, t.type = "markArea", t;
  }(oA)
);
function V1e(e, t, r) {
  var n, i, a = ["x0", "y0", "x1", "y1"];
  if (e) {
    var o = ue(e && e.dimensions, function(u) {
      var c = t.getData(), f = c.getDimensionInfo(c.mapDimension(u)) || {};
      return ae(ae({}, f), {
        name: u,
        // DON'T use ordinalMeta to parse and collect ordinal.
        ordinalMeta: null
      });
    });
    i = ue(a, function(u, c) {
      return {
        name: u,
        type: o[c % 2].type
      };
    }), n = new Xr(i, r);
  } else
    i = [{
      name: "value",
      type: "float"
    }], n = new Xr(i, r);
  var s = ue(r.get("data"), We(O1e, t, e, r));
  e && (s = Ct(s, We(z1e, e)));
  var l = e ? function(u, c, f, d) {
    var h = u.coord[Math.floor(d / 2)][d % 2];
    return qo(h, i[d]);
  } : function(u, c, f, d) {
    return qo(u.value, i[d]);
  };
  return n.initData(s, null, l), n.hasItemOption = !0, n;
}
function B1e(e) {
  e.registerComponentModel(k1e), e.registerComponentView(j1e), e.registerPreprocessor(function(t) {
    iA(t.series, "markArea") && (t.markArea = t.markArea || {});
  });
}
var F1e = function(e, t) {
  if (t === "all")
    return {
      type: "all",
      title: e.getLocaleModel().get(["legend", "selector", "all"])
    };
  if (t === "inverse")
    return {
      type: "inverse",
      title: e.getLocaleModel().get(["legend", "selector", "inverse"])
    };
}, x_ = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.layoutMode = {
        type: "box",
        // legend.width/height are maxWidth/maxHeight actually,
        // whereas real width/height is calculated by its content.
        // (Setting {left: 10, right: 10} does not make sense).
        // So consider the case:
        // `setOption({legend: {left: 10});`
        // then `setOption({legend: {right: 10});`
        // The previous `left` should be cleared by setting `ignoreSize`.
        ignoreSize: !0
      }, r;
    }
    return t.prototype.init = function(r, n, i) {
      this.mergeDefaultAndTheme(r, i), r.selected = r.selected || {}, this._updateSelector(r);
    }, t.prototype.mergeOption = function(r, n) {
      e.prototype.mergeOption.call(this, r, n), this._updateSelector(r);
    }, t.prototype._updateSelector = function(r) {
      var n = r.selector, i = this.ecModel;
      n === !0 && (n = r.selector = ["all", "inverse"]), le(n) && j(n, function(a, o) {
        ge(a) && (a = {
          type: a
        }), n[o] = Xe(a, F1e(i, a.type));
      });
    }, t.prototype.optionUpdated = function() {
      this._updateData(this.ecModel);
      var r = this._data;
      if (r[0] && this.get("selectedMode") === "single") {
        for (var n = !1, i = 0; i < r.length; i++) {
          var a = r[i].get("name");
          if (this.isSelected(a)) {
            this.select(a), n = !0;
            break;
          }
        }
        !n && this.select(r[0].get("name"));
      }
    }, t.prototype._updateData = function(r) {
      var n = [], i = [];
      r.eachRawSeries(function(l) {
        var u = l.name;
        i.push(u);
        var c;
        if (l.legendVisualProvider) {
          var f = l.legendVisualProvider, d = f.getAllNames();
          r.isSeriesFiltered(l) || (i = i.concat(d)), d.length ? n = n.concat(d) : c = !0;
        } else
          c = !0;
        c && aC(l) && n.push(l.name);
      }), this._availableNames = i;
      var a = this.get("data") || n, o = Ce(), s = ue(a, function(l) {
        return (ge(l) || bt(l)) && (l = {
          name: l
        }), o.get(l.name) ? null : (o.set(l.name, !0), new Tt(l, this, this.ecModel));
      }, this);
      this._data = Ct(s, function(l) {
        return !!l;
      });
    }, t.prototype.getData = function() {
      return this._data;
    }, t.prototype.select = function(r) {
      var n = this.option.selected, i = this.get("selectedMode");
      if (i === "single") {
        var a = this._data;
        j(a, function(o) {
          n[o.get("name")] = !1;
        });
      }
      n[r] = !0;
    }, t.prototype.unSelect = function(r) {
      this.get("selectedMode") !== "single" && (this.option.selected[r] = !1);
    }, t.prototype.toggleSelected = function(r) {
      var n = this.option.selected;
      n.hasOwnProperty(r) || (n[r] = !0), this[n[r] ? "unSelect" : "select"](r);
    }, t.prototype.allSelect = function() {
      var r = this._data, n = this.option.selected;
      j(r, function(i) {
        n[i.get("name", !0)] = !0;
      });
    }, t.prototype.inverseSelect = function() {
      var r = this._data, n = this.option.selected;
      j(r, function(i) {
        var a = i.get("name", !0);
        n.hasOwnProperty(a) || (n[a] = !0), n[a] = !n[a];
      });
    }, t.prototype.isSelected = function(r) {
      var n = this.option.selected;
      return !(n.hasOwnProperty(r) && !n[r]) && rt(this._availableNames, r) >= 0;
    }, t.prototype.getOrient = function() {
      return this.get("orient") === "vertical" ? {
        index: 1,
        name: "vertical"
      } : {
        index: 0,
        name: "horizontal"
      };
    }, t.type = "legend.plain", t.dependencies = ["series"], t.defaultOption = {
      // zlevel: 0,
      z: 4,
      show: !0,
      orient: "horizontal",
      left: "center",
      // right: 'center',
      top: 0,
      // bottom: null,
      align: "auto",
      backgroundColor: "rgba(0,0,0,0)",
      borderColor: "#ccc",
      borderRadius: 0,
      borderWidth: 0,
      padding: 5,
      itemGap: 10,
      itemWidth: 25,
      itemHeight: 14,
      symbolRotate: "inherit",
      symbolKeepAspect: !0,
      inactiveColor: "#ccc",
      inactiveBorderColor: "#ccc",
      inactiveBorderWidth: "auto",
      itemStyle: {
        color: "inherit",
        opacity: "inherit",
        borderColor: "inherit",
        borderWidth: "auto",
        borderCap: "inherit",
        borderJoin: "inherit",
        borderDashOffset: "inherit",
        borderMiterLimit: "inherit"
      },
      lineStyle: {
        width: "auto",
        color: "inherit",
        inactiveColor: "#ccc",
        inactiveWidth: 2,
        opacity: "inherit",
        type: "inherit",
        cap: "inherit",
        join: "inherit",
        dashOffset: "inherit",
        miterLimit: "inherit"
      },
      textStyle: {
        color: "#333"
      },
      selectedMode: !0,
      selector: !1,
      selectorLabel: {
        show: !0,
        borderRadius: 10,
        padding: [3, 5, 3, 5],
        fontSize: 12,
        fontFamily: "sans-serif",
        color: "#666",
        borderWidth: 1,
        borderColor: "#666"
      },
      emphasis: {
        selectorLabel: {
          show: !0,
          color: "#eee",
          backgroundColor: "#666"
        }
      },
      selectorPosition: "auto",
      selectorItemGap: 7,
      selectorButtonGap: 10,
      tooltip: {
        show: !1
      }
    }, t;
  }(at)
), ku = We, b_ = j, Fv = Fe, Jj = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.newlineDisabled = !1, r;
    }
    return t.prototype.init = function() {
      this.group.add(this._contentGroup = new Fv()), this.group.add(this._selectorGroup = new Fv()), this._isFirstRender = !0;
    }, t.prototype.getContentGroup = function() {
      return this._contentGroup;
    }, t.prototype.getSelectorGroup = function() {
      return this._selectorGroup;
    }, t.prototype.render = function(r, n, i) {
      var a = this._isFirstRender;
      if (this._isFirstRender = !1, this.resetInner(), !!r.get("show", !0)) {
        var o = r.get("align"), s = r.get("orient");
        (!o || o === "auto") && (o = r.get("left") === "right" && s === "vertical" ? "right" : "left");
        var l = r.get("selector", !0), u = r.get("selectorPosition", !0);
        l && (!u || u === "auto") && (u = s === "horizontal" ? "end" : "start"), this.renderInner(o, r, n, i, l, s, u);
        var c = r.getBoxLayoutParams(), f = {
          width: i.getWidth(),
          height: i.getHeight()
        }, d = r.get("padding"), h = vr(c, f, d), p = this.layoutInner(r, o, h, a, l, u), v = vr(Ie({
          width: p.width,
          height: p.height
        }, c), f, d);
        this.group.x = v.x - p.x, this.group.y = v.y - p.y, this.group.markRedraw(), this.group.add(this._backgroundEl = Bj(p, r));
      }
    }, t.prototype.resetInner = function() {
      this.getContentGroup().removeAll(), this._backgroundEl && this.group.remove(this._backgroundEl), this.getSelectorGroup().removeAll();
    }, t.prototype.renderInner = function(r, n, i, a, o, s, l) {
      var u = this.getContentGroup(), c = Ce(), f = n.get("selectedMode"), d = [];
      i.eachRawSeries(function(h) {
        !h.get("legendHoverLink") && d.push(h.id);
      }), b_(n.getData(), function(h, p) {
        var v = h.get("name");
        if (!this.newlineDisabled && (v === "" || v === `
`)) {
          var g = new Fv();
          g.newline = !0, u.add(g);
          return;
        }
        var m = i.getSeriesByName(v)[0];
        if (!c.get(v)) {
          if (m) {
            var y = m.getData(), b = y.getVisual("legendLineStyle") || {}, w = y.getVisual("legendIcon"), _ = y.getVisual("style"), S = this._createItem(m, v, p, h, n, r, b, _, w, f, a);
            S.on("click", ku(GL, v, null, a, d)).on("mouseover", ku(w_, m.name, null, a, d)).on("mouseout", ku(__, m.name, null, a, d)), i.ssr && S.eachChild(function(C) {
              var A = He(C);
              A.seriesIndex = m.seriesIndex, A.dataIndex = p, A.ssrType = "legend";
            }), c.set(v, !0);
          } else
            i.eachRawSeries(function(C) {
              if (!c.get(v) && C.legendVisualProvider) {
                var A = C.legendVisualProvider;
                if (!A.containName(v))
                  return;
                var M = A.indexOfName(v), D = A.getItemVisual(M, "style"), N = A.getItemVisual(M, "legendIcon"), R = on(D.fill);
                R && R[3] === 0 && (R[3] = 0.2, D = ae(ae({}, D), {
                  fill: Ti(R, "rgba")
                }));
                var O = this._createItem(C, v, p, h, n, r, {}, D, N, f, a);
                O.on("click", ku(GL, null, v, a, d)).on("mouseover", ku(w_, null, v, a, d)).on("mouseout", ku(__, null, v, a, d)), i.ssr && O.eachChild(function(E) {
                  var L = He(E);
                  L.seriesIndex = C.seriesIndex, L.dataIndex = p, L.ssrType = "legend";
                }), c.set(v, !0);
              }
            }, this);
          process.env.NODE_ENV !== "production" && (c.get(v) || console.warn(v + " series not exists. Legend data should be same with series name or data name."));
        }
      }, this), o && this._createSelector(o, n, a, s, l);
    }, t.prototype._createSelector = function(r, n, i, a, o) {
      var s = this.getSelectorGroup();
      b_(r, function(u) {
        var c = u.type, f = new pt({
          style: {
            x: 0,
            y: 0,
            align: "center",
            verticalAlign: "middle"
          },
          onclick: function() {
            i.dispatchAction({
              type: c === "all" ? "legendAllSelect" : "legendInverseSelect",
              legendId: n.id
            });
          }
        });
        s.add(f);
        var d = n.getModel("selectorLabel"), h = n.getModel(["emphasis", "selectorLabel"]);
        Br(f, {
          normal: d,
          emphasis: h
        }, {
          defaultText: u.title
        }), Xo(f);
      });
    }, t.prototype._createItem = function(r, n, i, a, o, s, l, u, c, f, d) {
      var h = r.visualDrawType, p = o.get("itemWidth"), v = o.get("itemHeight"), g = o.isSelected(n), m = a.get("symbolRotate"), y = a.get("symbolKeepAspect"), b = a.get("icon");
      c = b || c || "roundRect";
      var w = $1e(c, a, l, u, h, g, d), _ = new Fv(), S = a.getModel("textStyle");
      if (Ee(r.getLegendIcon) && (!b || b === "inherit"))
        _.add(r.getLegendIcon({
          itemWidth: p,
          itemHeight: v,
          icon: c,
          iconRotate: m,
          itemStyle: w.itemStyle,
          lineStyle: w.lineStyle,
          symbolKeepAspect: y
        }));
      else {
        var C = b === "inherit" && r.getData().getVisual("symbol") ? m === "inherit" ? r.getData().getVisual("symbolRotate") : m : 0;
        _.add(H1e({
          itemWidth: p,
          itemHeight: v,
          icon: c,
          iconRotate: C,
          itemStyle: w.itemStyle,
          symbolKeepAspect: y
        }));
      }
      var A = s === "left" ? p + 5 : -5, M = s, D = o.get("formatter"), N = n;
      ge(D) && D ? N = D.replace("{name}", n ?? "") : Ee(D) && (N = D(n));
      var R = g ? S.getTextColor() : a.get("inactiveColor");
      _.add(new pt({
        style: Vt(S, {
          text: N,
          x: A,
          y: v / 2,
          fill: R,
          align: M,
          verticalAlign: "middle"
        }, {
          inheritColor: R
        })
      }));
      var O = new vt({
        shape: _.getBoundingRect(),
        style: {
          // Cannot use 'invisible' because SVG SSR will miss the node
          fill: "transparent"
        }
      }), E = a.getModel("tooltip");
      return E.get("show") && Yl({
        el: O,
        componentModel: o,
        itemName: n,
        itemTooltipOption: E.option
      }), _.add(O), _.eachChild(function(L) {
        L.silent = !0;
      }), O.silent = !f, this.getContentGroup().add(_), Xo(_), _.__legendDataIndex = i, _;
    }, t.prototype.layoutInner = function(r, n, i, a, o, s) {
      var l = this.getContentGroup(), u = this.getSelectorGroup();
      Al(r.get("orient"), l, r.get("itemGap"), i.width, i.height);
      var c = l.getBoundingRect(), f = [-c.x, -c.y];
      if (u.markRedraw(), l.markRedraw(), o) {
        Al(
          // Buttons in selectorGroup always layout horizontally
          "horizontal",
          u,
          r.get("selectorItemGap", !0)
        );
        var d = u.getBoundingRect(), h = [-d.x, -d.y], p = r.get("selectorButtonGap", !0), v = r.getOrient().index, g = v === 0 ? "width" : "height", m = v === 0 ? "height" : "width", y = v === 0 ? "y" : "x";
        s === "end" ? h[v] += c[g] + p : f[v] += d[g] + p, h[1 - v] += c[m] / 2 - d[m] / 2, u.x = h[0], u.y = h[1], l.x = f[0], l.y = f[1];
        var b = {
          x: 0,
          y: 0
        };
        return b[g] = c[g] + p + d[g], b[m] = Math.max(c[m], d[m]), b[y] = Math.min(0, d[y] + h[1 - v]), b;
      } else
        return l.x = f[0], l.y = f[1], this.group.getBoundingRect();
    }, t.prototype.remove = function() {
      this.getContentGroup().removeAll(), this._isFirstRender = !0;
    }, t.type = "legend.plain", t;
  }($t)
);
function $1e(e, t, r, n, i, a, o) {
  function s(g, m) {
    g.lineWidth === "auto" && (g.lineWidth = m.lineWidth > 0 ? 2 : 0), b_(g, function(y, b) {
      g[b] === "inherit" && (g[b] = m[b]);
    });
  }
  var l = t.getModel("itemStyle"), u = l.getItemStyle(), c = e.lastIndexOf("empty", 0) === 0 ? "fill" : "stroke", f = l.getShallow("decal");
  u.decal = !f || f === "inherit" ? n.decal : Oc(f, o), u.fill === "inherit" && (u.fill = n[i]), u.stroke === "inherit" && (u.stroke = n[c]), u.opacity === "inherit" && (u.opacity = (i === "fill" ? n : r).opacity), s(u, n);
  var d = t.getModel("lineStyle"), h = d.getLineStyle();
  if (s(h, r), u.fill === "auto" && (u.fill = n.fill), u.stroke === "auto" && (u.stroke = n.fill), h.stroke === "auto" && (h.stroke = n.fill), !a) {
    var p = t.get("inactiveBorderWidth"), v = u[c];
    u.lineWidth = p === "auto" ? n.lineWidth > 0 && v ? 2 : 0 : u.lineWidth, u.fill = t.get("inactiveColor"), u.stroke = t.get("inactiveBorderColor"), h.stroke = d.get("inactiveColor"), h.lineWidth = d.get("inactiveWidth");
  }
  return {
    itemStyle: u,
    lineStyle: h
  };
}
function H1e(e) {
  var t = e.icon || "roundRect", r = fr(t, 0, 0, e.itemWidth, e.itemHeight, e.itemStyle.fill, e.symbolKeepAspect);
  return r.setStyle(e.itemStyle), r.rotation = (e.iconRotate || 0) * Math.PI / 180, r.setOrigin([e.itemWidth / 2, e.itemHeight / 2]), t.indexOf("empty") > -1 && (r.style.stroke = r.style.fill, r.style.fill = "#fff", r.style.lineWidth = 2), r;
}
function GL(e, t, r, n) {
  __(e, t, r, n), r.dispatchAction({
    type: "legendToggleSelect",
    name: e ?? t
  }), w_(e, t, r, n);
}
function Qj(e) {
  for (var t = e.getZr().storage.getDisplayList(), r, n = 0, i = t.length; n < i && !(r = t[n].states.emphasis); )
    n++;
  return r && r.hoverLayer;
}
function w_(e, t, r, n) {
  Qj(r) || r.dispatchAction({
    type: "highlight",
    seriesName: e,
    name: t,
    excludeSeriesId: n
  });
}
function __(e, t, r, n) {
  Qj(r) || r.dispatchAction({
    type: "downplay",
    seriesName: e,
    name: t,
    excludeSeriesId: n
  });
}
function G1e(e) {
  var t = e.findComponents({
    mainType: "legend"
  });
  t && t.length && e.filterSeries(function(r) {
    for (var n = 0; n < t.length; n++)
      if (!t[n].isSelected(r.name))
        return !1;
    return !0;
  });
}
function nd(e, t, r) {
  var n = e === "allSelect" || e === "inverseSelect", i = {}, a = [];
  r.eachComponent({
    mainType: "legend",
    query: t
  }, function(s) {
    n ? s[e]() : s[e](t.name), WL(s, i), a.push(s.componentIndex);
  });
  var o = {};
  return r.eachComponent("legend", function(s) {
    j(i, function(l, u) {
      s[l ? "select" : "unSelect"](u);
    }), WL(s, o);
  }), n ? {
    selected: o,
    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect
    legendIndex: a
  } : {
    name: t.name,
    selected: o
  };
}
function WL(e, t) {
  var r = t || {};
  return j(e.getData(), function(n) {
    var i = n.get("name");
    if (!(i === `
` || i === "")) {
      var a = e.isSelected(i);
      be(r, i) ? r[i] = r[i] && a : r[i] = a;
    }
  }), r;
}
function W1e(e) {
  e.registerAction("legendToggleSelect", "legendselectchanged", We(nd, "toggleSelected")), e.registerAction("legendAllSelect", "legendselectall", We(nd, "allSelect")), e.registerAction("legendInverseSelect", "legendinverseselect", We(nd, "inverseSelect")), e.registerAction("legendSelect", "legendselected", We(nd, "select")), e.registerAction("legendUnSelect", "legendunselected", We(nd, "unSelect"));
}
function eV(e) {
  e.registerComponentModel(x_), e.registerComponentView(Jj), e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER, G1e), e.registerSubTypeDefaulter("legend", function() {
    return "plain";
  }), W1e(e);
}
var U1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.setScrollDataIndex = function(r) {
      this.option.scrollDataIndex = r;
    }, t.prototype.init = function(r, n, i) {
      var a = hf(r);
      e.prototype.init.call(this, r, n, i), UL(this, r, a);
    }, t.prototype.mergeOption = function(r, n) {
      e.prototype.mergeOption.call(this, r, n), UL(this, this.option, r);
    }, t.type = "legend.scroll", t.defaultOption = ms(x_.defaultOption, {
      scrollDataIndex: 0,
      pageButtonItemGap: 5,
      pageButtonGap: null,
      pageButtonPosition: "end",
      pageFormatter: "{current}/{total}",
      pageIcons: {
        horizontal: ["M0,0L12,-10L12,10z", "M0,0L-12,-10L-12,10z"],
        vertical: ["M0,0L20,0L10,-20z", "M0,0L20,0L10,20z"]
      },
      pageIconColor: "#2f4554",
      pageIconInactiveColor: "#aaa",
      pageIconSize: 15,
      pageTextStyle: {
        color: "#333"
      },
      animationDurationUpdate: 800
    }), t;
  }(x_)
);
function UL(e, t, r) {
  var n = e.getOrient(), i = [1, 1];
  i[n.index] = 0, us(t, r, {
    type: "box",
    ignoreSize: !!i
  });
}
var YL = Fe, Tb = ["width", "height"], Ab = ["x", "y"], Y1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.newlineDisabled = !0, r._currentIndex = 0, r;
    }
    return t.prototype.init = function() {
      e.prototype.init.call(this), this.group.add(this._containerGroup = new YL()), this._containerGroup.add(this.getContentGroup()), this.group.add(this._controllerGroup = new YL());
    }, t.prototype.resetInner = function() {
      e.prototype.resetInner.call(this), this._controllerGroup.removeAll(), this._containerGroup.removeClipPath(), this._containerGroup.__rectSize = null;
    }, t.prototype.renderInner = function(r, n, i, a, o, s, l) {
      var u = this;
      e.prototype.renderInner.call(this, r, n, i, a, o, s, l);
      var c = this._controllerGroup, f = n.get("pageIconSize", !0), d = le(f) ? f : [f, f];
      p("pagePrev", 0);
      var h = n.getModel("pageTextStyle");
      c.add(new pt({
        name: "pageText",
        style: {
          // Placeholder to calculate a proper layout.
          text: "xx/xx",
          fill: h.getTextColor(),
          font: h.getFont(),
          verticalAlign: "middle",
          align: "center"
        },
        silent: !0
      })), p("pageNext", 1);
      function p(v, g) {
        var m = v + "DataIndex", y = cf(n.get("pageIcons", !0)[n.getOrient().name][g], {
          // Buttons will be created in each render, so we do not need
          // to worry about avoiding using legendModel kept in scope.
          onclick: xe(u._pageGo, u, m, n, a)
        }, {
          x: -d[0] / 2,
          y: -d[1] / 2,
          width: d[0],
          height: d[1]
        });
        y.name = v, c.add(y);
      }
    }, t.prototype.layoutInner = function(r, n, i, a, o, s) {
      var l = this.getSelectorGroup(), u = r.getOrient().index, c = Tb[u], f = Ab[u], d = Tb[1 - u], h = Ab[1 - u];
      o && Al(
        // Buttons in selectorGroup always layout horizontally
        "horizontal",
        l,
        r.get("selectorItemGap", !0)
      );
      var p = r.get("selectorButtonGap", !0), v = l.getBoundingRect(), g = [-v.x, -v.y], m = ze(i);
      o && (m[c] = i[c] - v[c] - p);
      var y = this._layoutContentAndController(r, a, m, u, c, d, h, f);
      if (o) {
        if (s === "end")
          g[u] += y[c] + p;
        else {
          var b = v[c] + p;
          g[u] -= b, y[f] -= b;
        }
        y[c] += v[c] + p, g[1 - u] += y[h] + y[d] / 2 - v[d] / 2, y[d] = Math.max(y[d], v[d]), y[h] = Math.min(y[h], v[h] + g[1 - u]), l.x = g[0], l.y = g[1], l.markRedraw();
      }
      return y;
    }, t.prototype._layoutContentAndController = function(r, n, i, a, o, s, l, u) {
      var c = this.getContentGroup(), f = this._containerGroup, d = this._controllerGroup;
      Al(r.get("orient"), c, r.get("itemGap"), a ? i.width : null, a ? null : i.height), Al(
        // Buttons in controller are layout always horizontally.
        "horizontal",
        d,
        r.get("pageButtonItemGap", !0)
      );
      var h = c.getBoundingRect(), p = d.getBoundingRect(), v = this._showController = h[o] > i[o], g = [-h.x, -h.y];
      n || (g[a] = c[u]);
      var m = [0, 0], y = [-p.x, -p.y], b = Ge(r.get("pageButtonGap", !0), r.get("itemGap", !0));
      if (v) {
        var w = r.get("pageButtonPosition", !0);
        w === "end" ? y[a] += i[o] - p[o] : m[a] += p[o] + b;
      }
      y[1 - a] += h[s] / 2 - p[s] / 2, c.setPosition(g), f.setPosition(m), d.setPosition(y);
      var _ = {
        x: 0,
        y: 0
      };
      if (_[o] = v ? i[o] : h[o], _[s] = Math.max(h[s], p[s]), _[l] = Math.min(0, p[l] + y[1 - a]), f.__rectSize = i[o], v) {
        var S = {
          x: 0,
          y: 0
        };
        S[o] = Math.max(i[o] - p[o] - b, 0), S[s] = _[s], f.setClipPath(new vt({
          shape: S
        })), f.__rectSize = S[o];
      } else
        d.eachChild(function(A) {
          A.attr({
            invisible: !0,
            silent: !0
          });
        });
      var C = this._getPageInfo(r);
      return C.pageIndex != null && _t(
        c,
        {
          x: C.contentPosition[0],
          y: C.contentPosition[1]
        },
        // When switch from "show controller" to "not show controller", view should be
        // updated immediately without animation, otherwise causes weird effect.
        v ? r : null
      ), this._updatePageInfoView(r, C), _;
    }, t.prototype._pageGo = function(r, n, i) {
      var a = this._getPageInfo(n)[r];
      a != null && i.dispatchAction({
        type: "legendScroll",
        scrollDataIndex: a,
        legendId: n.id
      });
    }, t.prototype._updatePageInfoView = function(r, n) {
      var i = this._controllerGroup;
      j(["pagePrev", "pageNext"], function(c) {
        var f = c + "DataIndex", d = n[f] != null, h = i.childOfName(c);
        h && (h.setStyle("fill", d ? r.get("pageIconColor", !0) : r.get("pageIconInactiveColor", !0)), h.cursor = d ? "pointer" : "default");
      });
      var a = i.childOfName("pageText"), o = r.get("pageFormatter"), s = n.pageIndex, l = s != null ? s + 1 : 0, u = n.pageCount;
      a && o && a.setStyle("text", ge(o) ? o.replace("{current}", l == null ? "" : l + "").replace("{total}", u == null ? "" : u + "") : o({
        current: l,
        total: u
      }));
    }, t.prototype._getPageInfo = function(r) {
      var n = r.get("scrollDataIndex", !0), i = this.getContentGroup(), a = this._containerGroup.__rectSize, o = r.getOrient().index, s = Tb[o], l = Ab[o], u = this._findTargetItemIndex(n), c = i.children(), f = c[u], d = c.length, h = d ? 1 : 0, p = {
        contentPosition: [i.x, i.y],
        pageCount: h,
        pageIndex: h - 1,
        pagePrevDataIndex: null,
        pageNextDataIndex: null
      };
      if (!f)
        return p;
      var v = w(f);
      p.contentPosition[o] = -v.s;
      for (var g = u + 1, m = v, y = v, b = null; g <= d; ++g)
        b = w(c[g]), // Half of the last item is out of the window.
        (!b && y.e > m.s + a || b && !_(b, m.s)) && (y.i > m.i ? m = y : m = b, m && (p.pageNextDataIndex == null && (p.pageNextDataIndex = m.i), ++p.pageCount)), y = b;
      for (var g = u - 1, m = v, y = v, b = null; g >= -1; --g)
        b = w(c[g]), // If the the end item does not intersect with the window started
        // from the current item, a page can be settled.
        (!b || !_(y, b.s)) && m.i < y.i && (y = m, p.pagePrevDataIndex == null && (p.pagePrevDataIndex = m.i), ++p.pageCount, ++p.pageIndex), m = b;
      return p;
      function w(S) {
        if (S) {
          var C = S.getBoundingRect(), A = C[l] + S[l];
          return {
            s: A,
            e: A + C[s],
            i: S.__legendDataIndex
          };
        }
      }
      function _(S, C) {
        return S.e >= C && S.s <= C + a;
      }
    }, t.prototype._findTargetItemIndex = function(r) {
      if (!this._showController)
        return 0;
      var n, i = this.getContentGroup(), a;
      return i.eachChild(function(o, s) {
        var l = o.__legendDataIndex;
        a == null && l != null && (a = s), l === r && (n = s);
      }), n ?? a;
    }, t.type = "legend.scroll", t;
  }(Jj)
);
function Z1e(e) {
  e.registerAction("legendScroll", "legendscroll", function(t, r) {
    var n = t.scrollDataIndex;
    n != null && r.eachComponent({
      mainType: "legend",
      subType: "scroll",
      query: t
    }, function(i) {
      i.setScrollDataIndex(n);
    });
  });
}
function X1e(e) {
  ot(eV), e.registerComponentModel(U1e), e.registerComponentView(Y1e), Z1e(e);
}
function K1e(e) {
  ot(eV), ot(X1e);
}
var q1e = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "dataZoom.inside", t.defaultOption = ms(Rh.defaultOption, {
      disabled: !1,
      zoomLock: !1,
      zoomOnMouseWheel: !0,
      moveOnMouseMove: !0,
      moveOnMouseWheel: !1,
      preventDefaultMouseMove: !0
    }), t;
  }(Rh)
), sA = yt();
function J1e(e, t, r) {
  sA(e).coordSysRecordMap.each(function(n) {
    var i = n.dataZoomInfoMap.get(t.uid);
    i && (i.getRange = r);
  });
}
function Q1e(e, t) {
  for (var r = sA(e).coordSysRecordMap, n = r.keys(), i = 0; i < n.length; i++) {
    var a = n[i], o = r.get(a), s = o.dataZoomInfoMap;
    if (s) {
      var l = t.uid, u = s.get(l);
      u && (s.removeKey(l), s.keys().length || tV(r, o));
    }
  }
}
function tV(e, t) {
  if (t) {
    e.removeKey(t.model.uid);
    var r = t.controller;
    r && r.dispose();
  }
}
function exe(e, t) {
  var r = {
    model: t,
    containsPoint: We(rxe, t),
    dispatchAction: We(txe, e),
    dataZoomInfoMap: null,
    controller: null
  }, n = r.controller = new vp(e.getZr());
  return j(["pan", "zoom", "scrollMove"], function(i) {
    n.on(i, function(a) {
      var o = [];
      r.dataZoomInfoMap.each(function(s) {
        if (a.isAvailableBehavior(s.model.option)) {
          var l = (s.getRange || {})[i], u = l && l(s.dzReferCoordSysInfo, r.model.mainType, r.controller, a);
          !s.model.get("disabled", !0) && u && o.push({
            dataZoomId: s.model.id,
            start: u[0],
            end: u[1]
          });
        }
      }), o.length && r.dispatchAction(o);
    });
  }), r;
}
function txe(e, t) {
  e.isDisposed() || e.dispatchAction({
    type: "dataZoom",
    animation: {
      easing: "cubicOut",
      duration: 100
    },
    batch: t
  });
}
function rxe(e, t, r, n) {
  return e.coordinateSystem.containPoint([r, n]);
}
function nxe(e) {
  var t, r = "type_", n = {
    type_true: 2,
    type_move: 1,
    type_false: 0,
    type_undefined: -1
  }, i = !0;
  return e.each(function(a) {
    var o = a.model, s = o.get("disabled", !0) ? !1 : o.get("zoomLock", !0) ? "move" : !0;
    n[r + s] > n[r + t] && (t = s), i = i && o.get("preventDefaultMouseMove", !0);
  }), {
    controlType: t,
    opt: {
      // RoamController will enable all of these functionalities,
      // and the final behavior is determined by its event listener
      // provided by each inside zoom.
      zoomOnMouseWheel: !0,
      moveOnMouseMove: !0,
      moveOnMouseWheel: !0,
      preventDefaultMouseMove: !!i
    }
  };
}
function ixe(e) {
  e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER, function(t, r) {
    var n = sA(r), i = n.coordSysRecordMap || (n.coordSysRecordMap = Ce());
    i.each(function(a) {
      a.dataZoomInfoMap = null;
    }), t.eachComponent({
      mainType: "dataZoom",
      subType: "inside"
    }, function(a) {
      var o = zj(a);
      j(o.infoList, function(s) {
        var l = s.model.uid, u = i.get(l) || i.set(l, exe(r, s.model)), c = u.dataZoomInfoMap || (u.dataZoomInfoMap = Ce());
        c.set(a.uid, {
          dzReferCoordSysInfo: s,
          model: a,
          getRange: null
        });
      });
    }), i.each(function(a) {
      var o = a.controller, s, l = a.dataZoomInfoMap;
      if (l) {
        var u = l.keys()[0];
        u != null && (s = l.get(u));
      }
      if (!s) {
        tV(i, a);
        return;
      }
      var c = nxe(l);
      o.enable(c.controlType, c.opt), o.setPointerChecker(a.containsPoint), gf(a, "dispatchAction", s.model.get("throttle", !0), "fixRate");
    });
  });
}
var axe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "dataZoom.inside", r;
    }
    return t.prototype.render = function(r, n, i) {
      if (e.prototype.render.apply(this, arguments), r.noTarget()) {
        this._clear();
        return;
      }
      this.range = r.getPercentRange(), J1e(i, r, {
        pan: xe(Mb.pan, this),
        zoom: xe(Mb.zoom, this),
        scrollMove: xe(Mb.scrollMove, this)
      });
    }, t.prototype.dispose = function() {
      this._clear(), e.prototype.dispose.apply(this, arguments);
    }, t.prototype._clear = function() {
      Q1e(this.api, this.dataZoomModel), this.range = null;
    }, t.type = "dataZoom.inside", t;
  }(JT)
), Mb = {
  zoom: function(e, t, r, n) {
    var i = this.range, a = i.slice(), o = e.axisModels[0];
    if (o) {
      var s = Eb[t](null, [n.originX, n.originY], o, r, e), l = (s.signal > 0 ? s.pixelStart + s.pixelLength - s.pixel : s.pixel - s.pixelStart) / s.pixelLength * (a[1] - a[0]) + a[0], u = Math.max(1 / n.scale, 0);
      a[0] = (a[0] - l) * u + l, a[1] = (a[1] - l) * u + l;
      var c = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();
      if (eu(0, a, [0, 100], 0, c.minSpan, c.maxSpan), this.range = a, i[0] !== a[0] || i[1] !== a[1])
        return a;
    }
  },
  pan: ZL(function(e, t, r, n, i, a) {
    var o = Eb[n]([a.oldX, a.oldY], [a.newX, a.newY], t, i, r);
    return o.signal * (e[1] - e[0]) * o.pixel / o.pixelLength;
  }),
  scrollMove: ZL(function(e, t, r, n, i, a) {
    var o = Eb[n]([0, 0], [a.scrollDelta, a.scrollDelta], t, i, r);
    return o.signal * (e[1] - e[0]) * a.scrollDelta;
  })
};
function ZL(e) {
  return function(t, r, n, i) {
    var a = this.range, o = a.slice(), s = t.axisModels[0];
    if (s) {
      var l = e(o, s, t, r, n, i);
      if (eu(l, o, [0, 100], "all"), this.range = o, a[0] !== o[0] || a[1] !== o[1])
        return o;
    }
  };
}
var Eb = {
  grid: function(e, t, r, n, i) {
    var a = r.axis, o = {}, s = i.model.coordinateSystem.getRect();
    return e = e || [0, 0], a.dim === "x" ? (o.pixel = t[0] - e[0], o.pixelLength = s.width, o.pixelStart = s.x, o.signal = a.inverse ? 1 : -1) : (o.pixel = t[1] - e[1], o.pixelLength = s.height, o.pixelStart = s.y, o.signal = a.inverse ? -1 : 1), o;
  },
  polar: function(e, t, r, n, i) {
    var a = r.axis, o = {}, s = i.model.coordinateSystem, l = s.getRadiusAxis().getExtent(), u = s.getAngleAxis().getExtent();
    return e = e ? s.pointToCoord(e) : [0, 0], t = s.pointToCoord(t), r.mainType === "radiusAxis" ? (o.pixel = t[0] - e[0], o.pixelLength = l[1] - l[0], o.pixelStart = l[0], o.signal = a.inverse ? 1 : -1) : (o.pixel = t[1] - e[1], o.pixelLength = u[1] - u[0], o.pixelStart = u[0], o.signal = a.inverse ? -1 : 1), o;
  },
  singleAxis: function(e, t, r, n, i) {
    var a = r.axis, o = i.model.coordinateSystem.getRect(), s = {};
    return e = e || [0, 0], a.orient === "horizontal" ? (s.pixel = t[0] - e[0], s.pixelLength = o.width, s.pixelStart = o.x, s.signal = a.inverse ? 1 : -1) : (s.pixel = t[1] - e[1], s.pixelLength = o.height, s.pixelStart = o.y, s.signal = a.inverse ? -1 : 1), s;
  }
};
function rV(e) {
  QT(e), e.registerComponentModel(q1e), e.registerComponentView(axe), ixe(e);
}
var oxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.type = "dataZoom.slider", t.layoutMode = "box", t.defaultOption = ms(Rh.defaultOption, {
      show: !0,
      // deault value can only be drived in view stage.
      right: "ph",
      top: "ph",
      width: "ph",
      height: "ph",
      left: null,
      bottom: null,
      borderColor: "#d2dbee",
      borderRadius: 3,
      backgroundColor: "rgba(47,69,84,0)",
      // dataBackgroundColor: '#ddd',
      dataBackground: {
        lineStyle: {
          color: "#d2dbee",
          width: 0.5
        },
        areaStyle: {
          color: "#d2dbee",
          opacity: 0.2
        }
      },
      selectedDataBackground: {
        lineStyle: {
          color: "#8fb0f7",
          width: 0.5
        },
        areaStyle: {
          color: "#8fb0f7",
          opacity: 0.2
        }
      },
      // Color of selected window.
      fillerColor: "rgba(135,175,274,0.2)",
      handleIcon: "path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",
      // Percent of the slider height
      handleSize: "100%",
      handleStyle: {
        color: "#fff",
        borderColor: "#ACB8D1"
      },
      moveHandleSize: 7,
      moveHandleIcon: "path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",
      moveHandleStyle: {
        color: "#D2DBEE",
        opacity: 0.7
      },
      showDetail: !0,
      showDataShadow: "auto",
      realtime: !0,
      zoomLock: !1,
      textStyle: {
        color: "#6E7079"
      },
      brushSelect: !0,
      brushStyle: {
        color: "rgba(135,175,274,0.15)"
      },
      emphasis: {
        handleLabel: {
          show: !0
        },
        handleStyle: {
          borderColor: "#8FB0F7"
        },
        moveHandleStyle: {
          color: "#8FB0F7"
        }
      }
    }), t;
  }(Rh)
), id = vt, XL = 7, sxe = 1, Db = 30, lxe = 7, ad = "horizontal", KL = "vertical", uxe = 5, cxe = ["line", "bar", "candlestick", "scatter"], fxe = {
  easing: "cubicOut",
  duration: 100,
  delay: 0
}, dxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._displayables = {}, r;
    }
    return t.prototype.init = function(r, n) {
      this.api = n, this._onBrush = xe(this._onBrush, this), this._onBrushEnd = xe(this._onBrushEnd, this);
    }, t.prototype.render = function(r, n, i, a) {
      if (e.prototype.render.apply(this, arguments), gf(this, "_dispatchZoomAction", r.get("throttle"), "fixRate"), this._orient = r.getOrient(), r.get("show") === !1) {
        this.group.removeAll();
        return;
      }
      if (r.noTarget()) {
        this._clear(), this.group.removeAll();
        return;
      }
      (!a || a.type !== "dataZoom" || a.from !== this.uid) && this._buildView(), this._updateView();
    }, t.prototype.dispose = function() {
      this._clear(), e.prototype.dispose.apply(this, arguments);
    }, t.prototype._clear = function() {
      bh(this, "_dispatchZoomAction");
      var r = this.api.getZr();
      r.off("mousemove", this._onBrush), r.off("mouseup", this._onBrushEnd);
    }, t.prototype._buildView = function() {
      var r = this.group;
      r.removeAll(), this._brushing = !1, this._displayables.brushRect = null, this._resetLocation(), this._resetInterval();
      var n = this._displayables.sliderGroup = new Fe();
      this._renderBackground(), this._renderHandle(), this._renderDataShadow(), r.add(n), this._positionGroup();
    }, t.prototype._resetLocation = function() {
      var r = this.dataZoomModel, n = this.api, i = r.get("brushSelect"), a = i ? lxe : 0, o = this._findCoordRect(), s = {
        width: n.getWidth(),
        height: n.getHeight()
      }, l = this._orient === ad ? {
        // Why using 'right', because right should be used in vertical,
        // and it is better to be consistent for dealing with position param merge.
        right: s.width - o.x - o.width,
        top: s.height - Db - XL - a,
        width: o.width,
        height: Db
      } : {
        right: XL,
        top: o.y,
        width: Db,
        height: o.height
      }, u = hf(r.option);
      j(["right", "top", "width", "height"], function(f) {
        u[f] === "ph" && (u[f] = l[f]);
      });
      var c = vr(u, s);
      this._location = {
        x: c.x,
        y: c.y
      }, this._size = [c.width, c.height], this._orient === KL && this._size.reverse();
    }, t.prototype._positionGroup = function() {
      var r = this.group, n = this._location, i = this._orient, a = this.dataZoomModel.getFirstTargetAxisModel(), o = a && a.get("inverse"), s = this._displayables.sliderGroup, l = (this._dataShadowInfo || {}).otherAxisInverse;
      s.attr(i === ad && !o ? {
        scaleY: l ? 1 : -1,
        scaleX: 1
      } : i === ad && o ? {
        scaleY: l ? 1 : -1,
        scaleX: -1
      } : i === KL && !o ? {
        scaleY: l ? -1 : 1,
        scaleX: 1,
        rotation: Math.PI / 2
      } : {
        scaleY: l ? -1 : 1,
        scaleX: -1,
        rotation: Math.PI / 2
      });
      var u = r.getBoundingRect([s]);
      r.x = n.x - u.x, r.y = n.y - u.y, r.markRedraw();
    }, t.prototype._getViewExtent = function() {
      return [0, this._size[0]];
    }, t.prototype._renderBackground = function() {
      var r = this.dataZoomModel, n = this._size, i = this._displayables.sliderGroup, a = r.get("brushSelect");
      i.add(new id({
        silent: !0,
        shape: {
          x: 0,
          y: 0,
          width: n[0],
          height: n[1]
        },
        style: {
          fill: r.get("backgroundColor")
        },
        z2: -40
      }));
      var o = new id({
        shape: {
          x: 0,
          y: 0,
          width: n[0],
          height: n[1]
        },
        style: {
          fill: "transparent"
        },
        z2: 0,
        onclick: xe(this._onClickPanel, this)
      }), s = this.api.getZr();
      a ? (o.on("mousedown", this._onBrushStart, this), o.cursor = "crosshair", s.on("mousemove", this._onBrush), s.on("mouseup", this._onBrushEnd)) : (s.off("mousemove", this._onBrush), s.off("mouseup", this._onBrushEnd)), i.add(o);
    }, t.prototype._renderDataShadow = function() {
      var r = this._dataShadowInfo = this._prepareDataShadowInfo();
      if (this._displayables.dataShadowSegs = [], !r)
        return;
      var n = this._size, i = this._shadowSize || [], a = r.series, o = a.getRawData(), s = a.getShadowDim && a.getShadowDim(), l = s && o.getDimensionInfo(s) ? a.getShadowDim() : r.otherDim;
      if (l == null)
        return;
      var u = this._shadowPolygonPts, c = this._shadowPolylinePts;
      if (o !== this._shadowData || l !== this._shadowDim || n[0] !== i[0] || n[1] !== i[1]) {
        var f = o.getDataExtent(l), d = (f[1] - f[0]) * 0.3;
        f = [f[0] - d, f[1] + d];
        var h = [0, n[1]], p = [0, n[0]], v = [[n[0], 0], [0, 0]], g = [], m = p[1] / (o.count() - 1), y = 0, b = Math.round(o.count() / n[0]), w;
        o.each([l], function(M, D) {
          if (b > 0 && D % b) {
            y += m;
            return;
          }
          var N = M == null || isNaN(M) || M === "", R = N ? 0 : Mt(M, f, h, !0);
          N && !w && D ? (v.push([v[v.length - 1][0], 0]), g.push([g[g.length - 1][0], 0])) : !N && w && (v.push([y, 0]), g.push([y, 0])), v.push([y, R]), g.push([y, R]), y += m, w = N;
        }), u = this._shadowPolygonPts = v, c = this._shadowPolylinePts = g;
      }
      this._shadowData = o, this._shadowDim = l, this._shadowSize = [n[0], n[1]];
      var _ = this.dataZoomModel;
      function S(M) {
        var D = _.getModel(M ? "selectedDataBackground" : "dataBackground"), N = new Fe(), R = new Jr({
          shape: {
            points: u
          },
          segmentIgnoreThreshold: 1,
          style: D.getModel("areaStyle").getAreaStyle(),
          silent: !0,
          z2: -20
        }), O = new en({
          shape: {
            points: c
          },
          segmentIgnoreThreshold: 1,
          style: D.getModel("lineStyle").getLineStyle(),
          silent: !0,
          z2: -19
        });
        return N.add(R), N.add(O), N;
      }
      for (var C = 0; C < 3; C++) {
        var A = S(C === 1);
        this._displayables.sliderGroup.add(A), this._displayables.dataShadowSegs.push(A);
      }
    }, t.prototype._prepareDataShadowInfo = function() {
      var r = this.dataZoomModel, n = r.get("showDataShadow");
      if (n !== !1) {
        var i, a = this.ecModel;
        return r.eachTargetAxis(function(o, s) {
          var l = r.getAxisProxy(o, s).getTargetSeriesModels();
          j(l, function(u) {
            if (!i && !(n !== !0 && rt(cxe, u.get("type")) < 0)) {
              var c = a.getComponent(Ho(o), s).axis, f = hxe(o), d, h = u.coordinateSystem;
              f != null && h.getOtherAxis && (d = h.getOtherAxis(c).inverse), f = u.getData().mapDimension(f), i = {
                thisAxis: c,
                series: u,
                thisDim: o,
                otherDim: f,
                otherAxisInverse: d
              };
            }
          }, this);
        }, this), i;
      }
    }, t.prototype._renderHandle = function() {
      var r = this.group, n = this._displayables, i = n.handles = [null, null], a = n.handleLabels = [null, null], o = this._displayables.sliderGroup, s = this._size, l = this.dataZoomModel, u = this.api, c = l.get("borderRadius") || 0, f = l.get("brushSelect"), d = n.filler = new id({
        silent: f,
        style: {
          fill: l.get("fillerColor")
        },
        textConfig: {
          position: "inside"
        }
      });
      o.add(d), o.add(new id({
        silent: !0,
        subPixelOptimize: !0,
        shape: {
          x: 0,
          y: 0,
          width: s[0],
          height: s[1],
          r: c
        },
        style: {
          // deprecated option
          stroke: l.get("dataBackgroundColor") || l.get("borderColor"),
          lineWidth: sxe,
          fill: "rgba(0,0,0,0)"
        }
      })), j([0, 1], function(b) {
        var w = l.get("handleIcon");
        !pm[w] && w.indexOf("path://") < 0 && w.indexOf("image://") < 0 && (w = "path://" + w, process.env.NODE_ENV !== "production" && ti("handleIcon now needs 'path://' prefix when using a path string"));
        var _ = fr(w, -1, 0, 2, 2, null, !0);
        _.attr({
          cursor: qL(this._orient),
          draggable: !0,
          drift: xe(this._onDragMove, this, b),
          ondragend: xe(this._onDragEnd, this),
          onmouseover: xe(this._showDataInfo, this, !0),
          onmouseout: xe(this._showDataInfo, this, !1),
          z2: 5
        });
        var S = _.getBoundingRect(), C = l.get("handleSize");
        this._handleHeight = pe(C, this._size[1]), this._handleWidth = S.width / S.height * this._handleHeight, _.setStyle(l.getModel("handleStyle").getItemStyle()), _.style.strokeNoScale = !0, _.rectHover = !0, _.ensureState("emphasis").style = l.getModel(["emphasis", "handleStyle"]).getItemStyle(), Xo(_);
        var A = l.get("handleColor");
        A != null && (_.style.fill = A), o.add(i[b] = _);
        var M = l.getModel("textStyle"), D = l.get("handleLabel") || {}, N = D.show || !1;
        r.add(a[b] = new pt({
          silent: !0,
          invisible: !N,
          style: Vt(M, {
            x: 0,
            y: 0,
            text: "",
            verticalAlign: "middle",
            align: "center",
            fill: M.getTextColor(),
            font: M.getFont()
          }),
          z2: 10
        }));
      }, this);
      var h = d;
      if (f) {
        var p = pe(l.get("moveHandleSize"), s[1]), v = n.moveHandle = new vt({
          style: l.getModel("moveHandleStyle").getItemStyle(),
          silent: !0,
          shape: {
            r: [0, 0, 2, 2],
            y: s[1] - 0.5,
            height: p
          }
        }), g = p * 0.8, m = n.moveHandleIcon = fr(l.get("moveHandleIcon"), -g / 2, -g / 2, g, g, "#fff", !0);
        m.silent = !0, m.y = s[1] + p / 2 - 0.5, v.ensureState("emphasis").style = l.getModel(["emphasis", "moveHandleStyle"]).getItemStyle();
        var y = Math.min(s[1] / 2, Math.max(p, 10));
        h = n.moveZone = new vt({
          invisible: !0,
          shape: {
            y: s[1] - y,
            height: p + y
          }
        }), h.on("mouseover", function() {
          u.enterEmphasis(v);
        }).on("mouseout", function() {
          u.leaveEmphasis(v);
        }), o.add(v), o.add(m), o.add(h);
      }
      h.attr({
        draggable: !0,
        cursor: qL(this._orient),
        drift: xe(this._onDragMove, this, "all"),
        ondragstart: xe(this._showDataInfo, this, !0),
        ondragend: xe(this._onDragEnd, this),
        onmouseover: xe(this._showDataInfo, this, !0),
        onmouseout: xe(this._showDataInfo, this, !1)
      });
    }, t.prototype._resetInterval = function() {
      var r = this._range = this.dataZoomModel.getPercentRange(), n = this._getViewExtent();
      this._handleEnds = [Mt(r[0], [0, 100], n, !0), Mt(r[1], [0, 100], n, !0)];
    }, t.prototype._updateInterval = function(r, n) {
      var i = this.dataZoomModel, a = this._handleEnds, o = this._getViewExtent(), s = i.findRepresentativeAxisProxy().getMinMaxSpan(), l = [0, 100];
      eu(n, a, o, i.get("zoomLock") ? "all" : r, s.minSpan != null ? Mt(s.minSpan, l, o, !0) : null, s.maxSpan != null ? Mt(s.maxSpan, l, o, !0) : null);
      var u = this._range, c = this._range = An([Mt(a[0], o, l, !0), Mt(a[1], o, l, !0)]);
      return !u || u[0] !== c[0] || u[1] !== c[1];
    }, t.prototype._updateView = function(r) {
      var n = this._displayables, i = this._handleEnds, a = An(i.slice()), o = this._size;
      j([0, 1], function(h) {
        var p = n.handles[h], v = this._handleHeight;
        p.attr({
          scaleX: v / 2,
          scaleY: v / 2,
          // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.
          // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.
          x: i[h] + (h ? -1 : 1),
          y: o[1] / 2 - v / 2
        });
      }, this), n.filler.setShape({
        x: a[0],
        y: 0,
        width: a[1] - a[0],
        height: o[1]
      });
      var s = {
        x: a[0],
        width: a[1] - a[0]
      };
      n.moveHandle && (n.moveHandle.setShape(s), n.moveZone.setShape(s), n.moveZone.getBoundingRect(), n.moveHandleIcon && n.moveHandleIcon.attr("x", s.x + s.width / 2));
      for (var l = n.dataShadowSegs, u = [0, a[0], a[1], o[0]], c = 0; c < l.length; c++) {
        var f = l[c], d = f.getClipPath();
        d || (d = new vt(), f.setClipPath(d)), d.setShape({
          x: u[c],
          y: 0,
          width: u[c + 1] - u[c],
          height: o[1]
        });
      }
      this._updateDataInfo(r);
    }, t.prototype._updateDataInfo = function(r) {
      var n = this.dataZoomModel, i = this._displayables, a = i.handleLabels, o = this._orient, s = ["", ""];
      if (n.get("showDetail")) {
        var l = n.findRepresentativeAxisProxy();
        if (l) {
          var u = l.getAxisModel().axis, c = this._range, f = r ? l.calculateDataWindow({
            start: c[0],
            end: c[1]
          }).valueWindow : l.getDataValueWindow();
          s = [this._formatLabel(f[0], u), this._formatLabel(f[1], u)];
        }
      }
      var d = An(this._handleEnds.slice());
      h.call(this, 0), h.call(this, 1);
      function h(p) {
        var v = Ko(i.handles[p].parent, this.group), g = Gy(p === 0 ? "right" : "left", v), m = this._handleWidth / 2 + uxe, y = Ai([d[p] + (p === 0 ? -m : m), this._size[1] / 2], v);
        a[p].setStyle({
          x: y[0],
          y: y[1],
          verticalAlign: o === ad ? "middle" : g,
          align: o === ad ? g : "center",
          text: s[p]
        });
      }
    }, t.prototype._formatLabel = function(r, n) {
      var i = this.dataZoomModel, a = i.get("labelFormatter"), o = i.get("labelPrecision");
      (o == null || o === "auto") && (o = n.getPixelPrecision());
      var s = r == null || isNaN(r) ? "" : n.type === "category" || n.type === "time" ? n.scale.getLabel({
        value: Math.round(r)
      }) : r.toFixed(Math.min(o, 20));
      return Ee(a) ? a(r, s) : ge(a) ? a.replace("{value}", s) : s;
    }, t.prototype._showDataInfo = function(r) {
      var n = this.dataZoomModel.get("handleLabel") || {}, i = n.show || !1, a = this.dataZoomModel.getModel(["emphasis", "handleLabel"]), o = a.get("show") || !1, s = r || this._dragging ? o : i, l = this._displayables, u = l.handleLabels;
      u[0].attr("invisible", !s), u[1].attr("invisible", !s), l.moveHandle && this.api[s ? "enterEmphasis" : "leaveEmphasis"](l.moveHandle, 1);
    }, t.prototype._onDragMove = function(r, n, i, a) {
      this._dragging = !0, Xa(a.event);
      var o = this._displayables.sliderGroup.getLocalTransform(), s = Ai([n, i], o, !0), l = this._updateInterval(r, s[0]), u = this.dataZoomModel.get("realtime");
      this._updateView(!u), l && u && this._dispatchZoomAction(!0);
    }, t.prototype._onDragEnd = function() {
      this._dragging = !1, this._showDataInfo(!1);
      var r = this.dataZoomModel.get("realtime");
      !r && this._dispatchZoomAction(!1);
    }, t.prototype._onClickPanel = function(r) {
      var n = this._size, i = this._displayables.sliderGroup.transformCoordToLocal(r.offsetX, r.offsetY);
      if (!(i[0] < 0 || i[0] > n[0] || i[1] < 0 || i[1] > n[1])) {
        var a = this._handleEnds, o = (a[0] + a[1]) / 2, s = this._updateInterval("all", i[0] - o);
        this._updateView(), s && this._dispatchZoomAction(!1);
      }
    }, t.prototype._onBrushStart = function(r) {
      var n = r.offsetX, i = r.offsetY;
      this._brushStart = new et(n, i), this._brushing = !0, this._brushStartTime = +/* @__PURE__ */ new Date();
    }, t.prototype._onBrushEnd = function(r) {
      if (this._brushing) {
        var n = this._displayables.brushRect;
        if (this._brushing = !1, !!n) {
          n.attr("ignore", !0);
          var i = n.shape, a = +/* @__PURE__ */ new Date();
          if (!(a - this._brushStartTime < 200 && Math.abs(i.width) < 5)) {
            var o = this._getViewExtent(), s = [0, 100];
            this._range = An([Mt(i.x, o, s, !0), Mt(i.x + i.width, o, s, !0)]), this._handleEnds = [i.x, i.x + i.width], this._updateView(), this._dispatchZoomAction(!1);
          }
        }
      }
    }, t.prototype._onBrush = function(r) {
      this._brushing && (Xa(r.event), this._updateBrushRect(r.offsetX, r.offsetY));
    }, t.prototype._updateBrushRect = function(r, n) {
      var i = this._displayables, a = this.dataZoomModel, o = i.brushRect;
      o || (o = i.brushRect = new id({
        silent: !0,
        style: a.getModel("brushStyle").getItemStyle()
      }), i.sliderGroup.add(o)), o.attr("ignore", !1);
      var s = this._brushStart, l = this._displayables.sliderGroup, u = l.transformCoordToLocal(r, n), c = l.transformCoordToLocal(s.x, s.y), f = this._size;
      u[0] = Math.max(Math.min(f[0], u[0]), 0), o.setShape({
        x: c[0],
        y: 0,
        width: u[0] - c[0],
        height: f[1]
      });
    }, t.prototype._dispatchZoomAction = function(r) {
      var n = this._range;
      this.api.dispatchAction({
        type: "dataZoom",
        from: this.uid,
        dataZoomId: this.dataZoomModel.id,
        animation: r ? fxe : null,
        start: n[0],
        end: n[1]
      });
    }, t.prototype._findCoordRect = function() {
      var r, n = zj(this.dataZoomModel).infoList;
      if (!r && n.length) {
        var i = n[0].model.coordinateSystem;
        r = i.getRect && i.getRect();
      }
      if (!r) {
        var a = this.api.getWidth(), o = this.api.getHeight();
        r = {
          x: a * 0.2,
          y: o * 0.2,
          width: a * 0.6,
          height: o * 0.6
        };
      }
      return r;
    }, t.type = "dataZoom.slider", t;
  }(JT)
);
function hxe(e) {
  var t = {
    x: "y",
    y: "x",
    radius: "angle",
    angle: "radius"
  };
  return t[e];
}
function qL(e) {
  return e === "vertical" ? "ns-resize" : "ew-resize";
}
function nV(e) {
  e.registerComponentModel(oxe), e.registerComponentView(dxe), QT(e);
}
function pxe(e) {
  ot(rV), ot(nV);
}
var iV = {
  /**
   * @public
   */
  get: function(e, t, r) {
    var n = ze((vxe[e] || {})[t]);
    return r && le(n) ? n[n.length - 1] : n;
  }
}, vxe = {
  color: {
    active: ["#006edd", "#e0ffff"],
    inactive: ["rgba(0,0,0,0)"]
  },
  colorHue: {
    active: [0, 360],
    inactive: [0, 0]
  },
  colorSaturation: {
    active: [0.3, 1],
    inactive: [0, 0]
  },
  colorLightness: {
    active: [0.9, 0.5],
    inactive: [0, 0]
  },
  colorAlpha: {
    active: [0.3, 1],
    inactive: [0, 0]
  },
  opacity: {
    active: [0.3, 1],
    inactive: [0, 0]
  },
  symbol: {
    active: ["circle", "roundRect", "diamond"],
    inactive: ["none"]
  },
  symbolSize: {
    active: [10, 50],
    inactive: [0, 0]
  }
}, JL = Sr.mapVisual, gxe = Sr.eachVisual, mxe = le, QL = j, yxe = An, xxe = Mt, Hm = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.stateList = ["inRange", "outOfRange"], r.replacableOptionKeys = ["inRange", "outOfRange", "target", "controller", "color"], r.layoutMode = {
        type: "box",
        ignoreSize: !0
      }, r.dataBound = [-1 / 0, 1 / 0], r.targetVisuals = {}, r.controllerVisuals = {}, r;
    }
    return t.prototype.init = function(r, n, i) {
      this.mergeDefaultAndTheme(r, i);
    }, t.prototype.optionUpdated = function(r, n) {
      var i = this.option;
      !n && Yj(i, r, this.replacableOptionKeys), this.textStyleModel = this.getModel("textStyle"), this.resetItemSize(), this.completeVisualOption();
    }, t.prototype.resetVisual = function(r) {
      var n = this.stateList;
      r = xe(r, this), this.controllerVisuals = g_(this.option.controller, n, r), this.targetVisuals = g_(this.option.target, n, r);
    }, t.prototype.getItemSymbol = function() {
      return null;
    }, t.prototype.getTargetSeriesIndices = function() {
      var r = this.option.seriesIndex, n = [];
      return r == null || r === "all" ? this.ecModel.eachSeries(function(i, a) {
        n.push(a);
      }) : n = Ot(r), n;
    }, t.prototype.eachTargetSeries = function(r, n) {
      j(this.getTargetSeriesIndices(), function(i) {
        var a = this.ecModel.getSeriesByIndex(i);
        a && r.call(n, a);
      }, this);
    }, t.prototype.isTargetSeries = function(r) {
      var n = !1;
      return this.eachTargetSeries(function(i) {
        i === r && (n = !0);
      }), n;
    }, t.prototype.formatValueText = function(r, n, i) {
      var a = this.option, o = a.precision, s = this.dataBound, l = a.formatter, u;
      i = i || ["<", ">"], le(r) && (r = r.slice(), u = !0);
      var c = n ? r : u ? [f(r[0]), f(r[1])] : f(r);
      if (ge(l))
        return l.replace("{value}", u ? c[0] : c).replace("{value2}", u ? c[1] : c);
      if (Ee(l))
        return u ? l(r[0], r[1]) : l(r);
      if (u)
        return r[0] === s[0] ? i[0] + " " + c[1] : r[1] === s[1] ? i[1] + " " + c[0] : c[0] + " - " + c[1];
      return c;
      function f(d) {
        return d === s[0] ? "min" : d === s[1] ? "max" : (+d).toFixed(Math.min(o, 20));
      }
    }, t.prototype.resetExtent = function() {
      var r = this.option, n = yxe([r.min, r.max]);
      this._dataExtent = n;
    }, t.prototype.getDataDimensionIndex = function(r) {
      var n = this.option.dimension;
      if (n != null)
        return r.getDimensionIndex(n);
      for (var i = r.dimensions, a = i.length - 1; a >= 0; a--) {
        var o = i[a], s = r.getDimensionInfo(o);
        if (!s.isCalculationCoord)
          return s.storeDimIndex;
      }
    }, t.prototype.getExtent = function() {
      return this._dataExtent.slice();
    }, t.prototype.completeVisualOption = function() {
      var r = this.ecModel, n = this.option, i = {
        inRange: n.inRange,
        outOfRange: n.outOfRange
      }, a = n.target || (n.target = {}), o = n.controller || (n.controller = {});
      Xe(a, i), Xe(o, i);
      var s = this.isCategory();
      l.call(this, a), l.call(this, o), u.call(this, a, "inRange", "outOfRange"), c.call(this, o);
      function l(f) {
        mxe(n.color) && !f.inRange && (f.inRange = {
          color: n.color.slice().reverse()
        }), f.inRange = f.inRange || {
          color: r.get("gradientColor")
        };
      }
      function u(f, d, h) {
        var p = f[d], v = f[h];
        p && !v && (v = f[h] = {}, QL(p, function(g, m) {
          if (Sr.isValidType(m)) {
            var y = iV.get(m, "inactive", s);
            y != null && (v[m] = y, m === "color" && !v.hasOwnProperty("opacity") && !v.hasOwnProperty("colorAlpha") && (v.opacity = [0, 0]));
          }
        }));
      }
      function c(f) {
        var d = (f.inRange || {}).symbol || (f.outOfRange || {}).symbol, h = (f.inRange || {}).symbolSize || (f.outOfRange || {}).symbolSize, p = this.get("inactiveColor"), v = this.getItemSymbol(), g = v || "roundRect";
        QL(this.stateList, function(m) {
          var y = this.itemSize, b = f[m];
          b || (b = f[m] = {
            color: s ? p : [p]
          }), b.symbol == null && (b.symbol = d && ze(d) || (s ? g : [g])), b.symbolSize == null && (b.symbolSize = h && ze(h) || (s ? y[0] : [y[0], y[0]])), b.symbol = JL(b.symbol, function(S) {
            return S === "none" ? g : S;
          });
          var w = b.symbolSize;
          if (w != null) {
            var _ = -1 / 0;
            gxe(w, function(S) {
              S > _ && (_ = S);
            }), b.symbolSize = JL(w, function(S) {
              return xxe(S, [0, _], [0, y[0]], !0);
            });
          }
        }, this);
      }
    }, t.prototype.resetItemSize = function() {
      this.itemSize = [parseFloat(this.get("itemWidth")), parseFloat(this.get("itemHeight"))];
    }, t.prototype.isCategory = function() {
      return !!this.option.categories;
    }, t.prototype.setSelected = function(r) {
    }, t.prototype.getSelected = function() {
      return null;
    }, t.prototype.getValueState = function(r) {
      return null;
    }, t.prototype.getVisualMeta = function(r) {
      return null;
    }, t.type = "visualMap", t.dependencies = ["series"], t.defaultOption = {
      show: !0,
      // zlevel: 0,
      z: 4,
      seriesIndex: "all",
      min: 0,
      max: 200,
      left: 0,
      right: null,
      top: null,
      bottom: 0,
      itemWidth: null,
      itemHeight: null,
      inverse: !1,
      orient: "vertical",
      backgroundColor: "rgba(0,0,0,0)",
      borderColor: "#ccc",
      contentColor: "#5793f3",
      inactiveColor: "#aaa",
      borderWidth: 0,
      padding: 5,
      // 接受数组分别设定上右下左边距，同css
      textGap: 10,
      precision: 0,
      textStyle: {
        color: "#333"
        // 值域文字颜色
      }
    }, t;
  }(at)
), e4 = [20, 140], bxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.optionUpdated = function(r, n) {
      e.prototype.optionUpdated.apply(this, arguments), this.resetExtent(), this.resetVisual(function(i) {
        i.mappingMethod = "linear", i.dataExtent = this.getExtent();
      }), this._resetRange();
    }, t.prototype.resetItemSize = function() {
      e.prototype.resetItemSize.apply(this, arguments);
      var r = this.itemSize;
      (r[0] == null || isNaN(r[0])) && (r[0] = e4[0]), (r[1] == null || isNaN(r[1])) && (r[1] = e4[1]);
    }, t.prototype._resetRange = function() {
      var r = this.getExtent(), n = this.option.range;
      !n || n.auto ? (r.auto = 1, this.option.range = r) : le(n) && (n[0] > n[1] && n.reverse(), n[0] = Math.max(n[0], r[0]), n[1] = Math.min(n[1], r[1]));
    }, t.prototype.completeVisualOption = function() {
      e.prototype.completeVisualOption.apply(this, arguments), j(this.stateList, function(r) {
        var n = this.option.controller[r].symbolSize;
        n && n[0] !== n[1] && (n[0] = n[1] / 3);
      }, this);
    }, t.prototype.setSelected = function(r) {
      this.option.range = r.slice(), this._resetRange();
    }, t.prototype.getSelected = function() {
      var r = this.getExtent(), n = An((this.get("range") || []).slice());
      return n[0] > r[1] && (n[0] = r[1]), n[1] > r[1] && (n[1] = r[1]), n[0] < r[0] && (n[0] = r[0]), n[1] < r[0] && (n[1] = r[0]), n;
    }, t.prototype.getValueState = function(r) {
      var n = this.option.range, i = this.getExtent();
      return (n[0] <= i[0] || n[0] <= r) && (n[1] >= i[1] || r <= n[1]) ? "inRange" : "outOfRange";
    }, t.prototype.findTargetDataIndices = function(r) {
      var n = [];
      return this.eachTargetSeries(function(i) {
        var a = [], o = i.getData();
        o.each(this.getDataDimensionIndex(o), function(s, l) {
          r[0] <= s && s <= r[1] && a.push(l);
        }, this), n.push({
          seriesId: i.id,
          dataIndex: a
        });
      }, this), n;
    }, t.prototype.getVisualMeta = function(r) {
      var n = t4(this, "outOfRange", this.getExtent()), i = t4(this, "inRange", this.option.range.slice()), a = [];
      function o(h, p) {
        a.push({
          value: h,
          color: r(h, p)
        });
      }
      for (var s = 0, l = 0, u = i.length, c = n.length; l < c && (!i.length || n[l] <= i[0]); l++)
        n[l] < i[s] && o(n[l], "outOfRange");
      for (var f = 1; s < u; s++, f = 0)
        f && a.length && o(i[s], "outOfRange"), o(i[s], "inRange");
      for (var f = 1; l < c; l++)
        (!i.length || i[i.length - 1] < n[l]) && (f && (a.length && o(a[a.length - 1].value, "outOfRange"), f = 0), o(n[l], "outOfRange"));
      var d = a.length;
      return {
        stops: a,
        outerColors: [d ? a[0].color : "transparent", d ? a[d - 1].color : "transparent"]
      };
    }, t.type = "visualMap.continuous", t.defaultOption = ms(Hm.defaultOption, {
      align: "auto",
      calculable: !1,
      hoverLink: !0,
      realtime: !0,
      handleIcon: "path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",
      handleSize: "120%",
      handleStyle: {
        borderColor: "#fff",
        borderWidth: 1
      },
      indicatorIcon: "circle",
      indicatorSize: "50%",
      indicatorStyle: {
        borderColor: "#fff",
        borderWidth: 2,
        shadowBlur: 2,
        shadowOffsetX: 1,
        shadowOffsetY: 1,
        shadowColor: "rgba(0,0,0,0.2)"
      }
      // emphasis: {
      //     handleStyle: {
      //         shadowBlur: 3,
      //         shadowOffsetX: 1,
      //         shadowOffsetY: 1,
      //         shadowColor: 'rgba(0,0,0,0.2)'
      //     }
      // }
    }), t;
  }(Hm)
);
function t4(e, t, r) {
  if (r[0] === r[1])
    return r.slice();
  for (var n = 200, i = (r[1] - r[0]) / n, a = r[0], o = [], s = 0; s <= n && a < r[1]; s++)
    o.push(a), a += i;
  return o.push(r[1]), o;
}
var aV = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r.autoPositionValues = {
        left: 1,
        right: 1,
        top: 1,
        bottom: 1
      }, r;
    }
    return t.prototype.init = function(r, n) {
      this.ecModel = r, this.api = n;
    }, t.prototype.render = function(r, n, i, a) {
      if (this.visualMapModel = r, r.get("show") === !1) {
        this.group.removeAll();
        return;
      }
      this.doRender(r, n, i, a);
    }, t.prototype.renderBackground = function(r) {
      var n = this.visualMapModel, i = Xl(n.get("padding") || 0), a = r.getBoundingRect();
      r.add(new vt({
        z2: -1,
        silent: !0,
        shape: {
          x: a.x - i[3],
          y: a.y - i[0],
          width: a.width + i[3] + i[1],
          height: a.height + i[0] + i[2]
        },
        style: {
          fill: n.get("backgroundColor"),
          stroke: n.get("borderColor"),
          lineWidth: n.get("borderWidth")
        }
      }));
    }, t.prototype.getControllerVisual = function(r, n, i) {
      i = i || {};
      var a = i.forceState, o = this.visualMapModel, s = {};
      if (n === "color") {
        var l = o.get("contentColor");
        s.color = l;
      }
      function u(h) {
        return s[h];
      }
      function c(h, p) {
        s[h] = p;
      }
      var f = o.controllerVisuals[a || o.getValueState(r)], d = Sr.prepareVisualTypes(f);
      return j(d, function(h) {
        var p = f[h];
        i.convertOpacityToAlpha && h === "opacity" && (h = "colorAlpha", p = f.__alphaForOpacity), Sr.dependsOn(h, n) && p && p.applyVisual(r, u, c);
      }), s[n];
    }, t.prototype.positionGroup = function(r) {
      var n = this.visualMapModel, i = this.api;
      Ky(r, n.getBoxLayoutParams(), {
        width: i.getWidth(),
        height: i.getHeight()
      });
    }, t.prototype.doRender = function(r, n, i, a) {
    }, t.type = "visualMap", t;
  }($t)
), r4 = [["left", "right", "width"], ["top", "bottom", "height"]];
function oV(e, t, r) {
  var n = e.option, i = n.align;
  if (i != null && i !== "auto")
    return i;
  for (var a = {
    width: t.getWidth(),
    height: t.getHeight()
  }, o = n.orient === "horizontal" ? 1 : 0, s = r4[o], l = [0, null, 10], u = {}, c = 0; c < 3; c++)
    u[r4[1 - o][c]] = l[c], u[s[c]] = c === 2 ? r[0] : n[s[c]];
  var f = [["x", "width", 3], ["y", "height", 0]][o], d = vr(u, a, n.padding);
  return s[(d.margin[f[2]] || 0) + d[f[0]] + d[f[1]] * 0.5 < a[f[1]] * 0.5 ? 0 : 1];
}
function Tg(e, t) {
  return j(e || [], function(r) {
    r.dataIndex != null && (r.dataIndexInside = r.dataIndex, r.dataIndex = null), r.highlightKey = "visualMap" + (t ? t.componentIndex : "");
  }), e;
}
var $i = Mt, wxe = j, n4 = Math.min, Nb = Math.max, _xe = 12, Sxe = 6, Cxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._shapes = {}, r._dataInterval = [], r._handleEnds = [], r._hoverLinkDataIndices = [], r;
    }
    return t.prototype.init = function(r, n) {
      e.prototype.init.call(this, r, n), this._hoverLinkFromSeriesMouseOver = xe(this._hoverLinkFromSeriesMouseOver, this), this._hideIndicator = xe(this._hideIndicator, this);
    }, t.prototype.doRender = function(r, n, i, a) {
      (!a || a.type !== "selectDataRange" || a.from !== this.uid) && this._buildView();
    }, t.prototype._buildView = function() {
      this.group.removeAll();
      var r = this.visualMapModel, n = this.group;
      this._orient = r.get("orient"), this._useHandle = r.get("calculable"), this._resetInterval(), this._renderBar(n);
      var i = r.get("text");
      this._renderEndsText(n, i, 0), this._renderEndsText(n, i, 1), this._updateView(!0), this.renderBackground(n), this._updateView(), this._enableHoverLinkToSeries(), this._enableHoverLinkFromSeries(), this.positionGroup(n);
    }, t.prototype._renderEndsText = function(r, n, i) {
      if (n) {
        var a = n[1 - i];
        a = a != null ? a + "" : "";
        var o = this.visualMapModel, s = o.get("textGap"), l = o.itemSize, u = this._shapes.mainGroup, c = this._applyTransform([l[0] / 2, i === 0 ? -s : l[1] + s], u), f = this._applyTransform(i === 0 ? "bottom" : "top", u), d = this._orient, h = this.visualMapModel.textStyleModel;
        this.group.add(new pt({
          style: Vt(h, {
            x: c[0],
            y: c[1],
            verticalAlign: d === "horizontal" ? "middle" : f,
            align: d === "horizontal" ? f : "center",
            text: a
          })
        }));
      }
    }, t.prototype._renderBar = function(r) {
      var n = this.visualMapModel, i = this._shapes, a = n.itemSize, o = this._orient, s = this._useHandle, l = oV(n, this.api, a), u = i.mainGroup = this._createBarGroup(l), c = new Fe();
      u.add(c), c.add(i.outOfRange = i4()), c.add(i.inRange = i4(null, s ? o4(this._orient) : null, xe(this._dragHandle, this, "all", !1), xe(this._dragHandle, this, "all", !0))), c.setClipPath(new vt({
        shape: {
          x: 0,
          y: 0,
          width: a[0],
          height: a[1],
          r: 3
        }
      }));
      var f = n.textStyleModel.getTextRect("国"), d = Nb(f.width, f.height);
      s && (i.handleThumbs = [], i.handleLabels = [], i.handleLabelPoints = [], this._createHandle(n, u, 0, a, d, o), this._createHandle(n, u, 1, a, d, o)), this._createIndicator(n, u, a, d, o), r.add(u);
    }, t.prototype._createHandle = function(r, n, i, a, o, s) {
      var l = xe(this._dragHandle, this, i, !1), u = xe(this._dragHandle, this, i, !0), c = Ii(r.get("handleSize"), a[0]), f = fr(r.get("handleIcon"), -c / 2, -c / 2, c, c, null, !0), d = o4(this._orient);
      f.attr({
        cursor: d,
        draggable: !0,
        drift: l,
        ondragend: u,
        onmousemove: function(m) {
          Xa(m.event);
        }
      }), f.x = a[0] / 2, f.useStyle(r.getModel("handleStyle").getItemStyle()), f.setStyle({
        strokeNoScale: !0,
        strokeFirst: !0
      }), f.style.lineWidth *= 2, f.ensureState("emphasis").style = r.getModel(["emphasis", "handleStyle"]).getItemStyle(), dl(f, !0), n.add(f);
      var h = this.visualMapModel.textStyleModel, p = new pt({
        cursor: d,
        draggable: !0,
        drift: l,
        onmousemove: function(m) {
          Xa(m.event);
        },
        ondragend: u,
        style: Vt(h, {
          x: 0,
          y: 0,
          text: ""
        })
      });
      p.ensureState("blur").style = {
        opacity: 0.1
      }, p.stateTransition = {
        duration: 200
      }, this.group.add(p);
      var v = [c, 0], g = this._shapes;
      g.handleThumbs[i] = f, g.handleLabelPoints[i] = v, g.handleLabels[i] = p;
    }, t.prototype._createIndicator = function(r, n, i, a, o) {
      var s = Ii(r.get("indicatorSize"), i[0]), l = fr(r.get("indicatorIcon"), -s / 2, -s / 2, s, s, null, !0);
      l.attr({
        cursor: "move",
        invisible: !0,
        silent: !0,
        x: i[0] / 2
      });
      var u = r.getModel("indicatorStyle").getItemStyle();
      if (l instanceof Ar) {
        var c = l.style;
        l.useStyle(ae({
          // TODO other properties like x, y ?
          image: c.image,
          x: c.x,
          y: c.y,
          width: c.width,
          height: c.height
        }, u));
      } else
        l.useStyle(u);
      n.add(l);
      var f = this.visualMapModel.textStyleModel, d = new pt({
        silent: !0,
        invisible: !0,
        style: Vt(f, {
          x: 0,
          y: 0,
          text: ""
        })
      });
      this.group.add(d);
      var h = [(o === "horizontal" ? a / 2 : Sxe) + i[0] / 2, 0], p = this._shapes;
      p.indicator = l, p.indicatorLabel = d, p.indicatorLabelPoint = h, this._firstShowIndicator = !0;
    }, t.prototype._dragHandle = function(r, n, i, a) {
      if (this._useHandle) {
        if (this._dragging = !n, !n) {
          var o = this._applyTransform([i, a], this._shapes.mainGroup, !0);
          this._updateInterval(r, o[1]), this._hideIndicator(), this._updateView();
        }
        n === !this.visualMapModel.get("realtime") && this.api.dispatchAction({
          type: "selectDataRange",
          from: this.uid,
          visualMapId: this.visualMapModel.id,
          selected: this._dataInterval.slice()
        }), n ? !this._hovering && this._clearHoverLinkToSeries() : a4(this.visualMapModel) && this._doHoverLinkToSeries(this._handleEnds[r], !1);
      }
    }, t.prototype._resetInterval = function() {
      var r = this.visualMapModel, n = this._dataInterval = r.getSelected(), i = r.getExtent(), a = [0, r.itemSize[1]];
      this._handleEnds = [$i(n[0], i, a, !0), $i(n[1], i, a, !0)];
    }, t.prototype._updateInterval = function(r, n) {
      n = n || 0;
      var i = this.visualMapModel, a = this._handleEnds, o = [0, i.itemSize[1]];
      eu(
        n,
        a,
        o,
        r,
        // cross is forbidden
        0
      );
      var s = i.getExtent();
      this._dataInterval = [$i(a[0], o, s, !0), $i(a[1], o, s, !0)];
    }, t.prototype._updateView = function(r) {
      var n = this.visualMapModel, i = n.getExtent(), a = this._shapes, o = [0, n.itemSize[1]], s = r ? o : this._handleEnds, l = this._createBarVisual(this._dataInterval, i, s, "inRange"), u = this._createBarVisual(i, i, o, "outOfRange");
      a.inRange.setStyle({
        fill: l.barColor
        // opacity: visualInRange.opacity
      }).setShape("points", l.barPoints), a.outOfRange.setStyle({
        fill: u.barColor
        // opacity: visualOutOfRange.opacity
      }).setShape("points", u.barPoints), this._updateHandle(s, l);
    }, t.prototype._createBarVisual = function(r, n, i, a) {
      var o = {
        forceState: a,
        convertOpacityToAlpha: !0
      }, s = this._makeColorGradient(r, o), l = [this.getControllerVisual(r[0], "symbolSize", o), this.getControllerVisual(r[1], "symbolSize", o)], u = this._createBarPoints(i, l);
      return {
        barColor: new lf(0, 0, 0, 1, s),
        barPoints: u,
        handlesColor: [s[0].color, s[s.length - 1].color]
      };
    }, t.prototype._makeColorGradient = function(r, n) {
      var i = 100, a = [], o = (r[1] - r[0]) / i;
      a.push({
        color: this.getControllerVisual(r[0], "color", n),
        offset: 0
      });
      for (var s = 1; s < i; s++) {
        var l = r[0] + o * s;
        if (l > r[1])
          break;
        a.push({
          color: this.getControllerVisual(l, "color", n),
          offset: s / i
        });
      }
      return a.push({
        color: this.getControllerVisual(r[1], "color", n),
        offset: 1
      }), a;
    }, t.prototype._createBarPoints = function(r, n) {
      var i = this.visualMapModel.itemSize;
      return [[i[0] - n[0], r[0]], [i[0], r[0]], [i[0], r[1]], [i[0] - n[1], r[1]]];
    }, t.prototype._createBarGroup = function(r) {
      var n = this._orient, i = this.visualMapModel.get("inverse");
      return new Fe(n === "horizontal" && !i ? {
        scaleX: r === "bottom" ? 1 : -1,
        rotation: Math.PI / 2
      } : n === "horizontal" && i ? {
        scaleX: r === "bottom" ? -1 : 1,
        rotation: -Math.PI / 2
      } : n === "vertical" && !i ? {
        scaleX: r === "left" ? 1 : -1,
        scaleY: -1
      } : {
        scaleX: r === "left" ? 1 : -1
      });
    }, t.prototype._updateHandle = function(r, n) {
      if (this._useHandle) {
        var i = this._shapes, a = this.visualMapModel, o = i.handleThumbs, s = i.handleLabels, l = a.itemSize, u = a.getExtent(), c = this._applyTransform("left", i.mainGroup);
        wxe([0, 1], function(f) {
          var d = o[f];
          d.setStyle("fill", n.handlesColor[f]), d.y = r[f];
          var h = $i(r[f], [0, l[1]], u, !0), p = this.getControllerVisual(h, "symbolSize");
          d.scaleX = d.scaleY = p / l[0], d.x = l[0] - p / 2;
          var v = Ai(i.handleLabelPoints[f], Ko(d, this.group));
          if (this._orient === "horizontal") {
            var g = c === "left" || c === "top" ? (l[0] - p) / 2 : (l[0] - p) / -2;
            v[1] += g;
          }
          s[f].setStyle({
            x: v[0],
            y: v[1],
            text: a.formatValueText(this._dataInterval[f]),
            verticalAlign: "middle",
            align: this._orient === "vertical" ? this._applyTransform("left", i.mainGroup) : "center"
          });
        }, this);
      }
    }, t.prototype._showIndicator = function(r, n, i, a) {
      var o = this.visualMapModel, s = o.getExtent(), l = o.itemSize, u = [0, l[1]], c = this._shapes, f = c.indicator;
      if (f) {
        f.attr("invisible", !1);
        var d = {
          convertOpacityToAlpha: !0
        }, h = this.getControllerVisual(r, "color", d), p = this.getControllerVisual(r, "symbolSize"), v = $i(r, s, u, !0), g = l[0] - p / 2, m = {
          x: f.x,
          y: f.y
        };
        f.y = v, f.x = g;
        var y = Ai(c.indicatorLabelPoint, Ko(f, this.group)), b = c.indicatorLabel;
        b.attr("invisible", !1);
        var w = this._applyTransform("left", c.mainGroup), _ = this._orient, S = _ === "horizontal";
        b.setStyle({
          text: (i || "") + o.formatValueText(n),
          verticalAlign: S ? w : "middle",
          align: S ? "center" : w
        });
        var C = {
          x: g,
          y: v,
          style: {
            fill: h
          }
        }, A = {
          style: {
            x: y[0],
            y: y[1]
          }
        };
        if (o.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {
          var M = {
            duration: 100,
            easing: "cubicInOut",
            additive: !0
          };
          f.x = m.x, f.y = m.y, f.animateTo(C, M), b.animateTo(A, M);
        } else
          f.attr(C), b.attr(A);
        this._firstShowIndicator = !1;
        var D = this._shapes.handleLabels;
        if (D)
          for (var N = 0; N < D.length; N++)
            this.api.enterBlur(D[N]);
      }
    }, t.prototype._enableHoverLinkToSeries = function() {
      var r = this;
      this._shapes.mainGroup.on("mousemove", function(n) {
        if (r._hovering = !0, !r._dragging) {
          var i = r.visualMapModel.itemSize, a = r._applyTransform([n.offsetX, n.offsetY], r._shapes.mainGroup, !0, !0);
          a[1] = n4(Nb(0, a[1]), i[1]), r._doHoverLinkToSeries(a[1], 0 <= a[0] && a[0] <= i[0]);
        }
      }).on("mouseout", function() {
        r._hovering = !1, !r._dragging && r._clearHoverLinkToSeries();
      });
    }, t.prototype._enableHoverLinkFromSeries = function() {
      var r = this.api.getZr();
      this.visualMapModel.option.hoverLink ? (r.on("mouseover", this._hoverLinkFromSeriesMouseOver, this), r.on("mouseout", this._hideIndicator, this)) : this._clearHoverLinkFromSeries();
    }, t.prototype._doHoverLinkToSeries = function(r, n) {
      var i = this.visualMapModel, a = i.itemSize;
      if (i.option.hoverLink) {
        var o = [0, a[1]], s = i.getExtent();
        r = n4(Nb(o[0], r), o[1]);
        var l = Txe(i, s, o), u = [r - l, r + l], c = $i(r, o, s, !0), f = [$i(u[0], o, s, !0), $i(u[1], o, s, !0)];
        u[0] < o[0] && (f[0] = -1 / 0), u[1] > o[1] && (f[1] = 1 / 0), n && (f[0] === -1 / 0 ? this._showIndicator(c, f[1], "< ", l) : f[1] === 1 / 0 ? this._showIndicator(c, f[0], "> ", l) : this._showIndicator(c, c, "≈ ", l));
        var d = this._hoverLinkDataIndices, h = [];
        (n || a4(i)) && (h = this._hoverLinkDataIndices = i.findTargetDataIndices(f));
        var p = vre(d, h);
        this._dispatchHighDown("downplay", Tg(p[0], i)), this._dispatchHighDown("highlight", Tg(p[1], i));
      }
    }, t.prototype._hoverLinkFromSeriesMouseOver = function(r) {
      var n;
      if (pl(r.target, function(l) {
        var u = He(l);
        if (u.dataIndex != null)
          return n = u, !0;
      }, !0), !!n) {
        var i = this.ecModel.getSeriesByIndex(n.seriesIndex), a = this.visualMapModel;
        if (a.isTargetSeries(i)) {
          var o = i.getData(n.dataType), s = o.getStore().get(a.getDataDimensionIndex(o), n.dataIndex);
          isNaN(s) || this._showIndicator(s, s);
        }
      }
    }, t.prototype._hideIndicator = function() {
      var r = this._shapes;
      r.indicator && r.indicator.attr("invisible", !0), r.indicatorLabel && r.indicatorLabel.attr("invisible", !0);
      var n = this._shapes.handleLabels;
      if (n)
        for (var i = 0; i < n.length; i++)
          this.api.leaveBlur(n[i]);
    }, t.prototype._clearHoverLinkToSeries = function() {
      this._hideIndicator();
      var r = this._hoverLinkDataIndices;
      this._dispatchHighDown("downplay", Tg(r, this.visualMapModel)), r.length = 0;
    }, t.prototype._clearHoverLinkFromSeries = function() {
      this._hideIndicator();
      var r = this.api.getZr();
      r.off("mouseover", this._hoverLinkFromSeriesMouseOver), r.off("mouseout", this._hideIndicator);
    }, t.prototype._applyTransform = function(r, n, i, a) {
      var o = Ko(n, a ? null : this.group);
      return le(r) ? Ai(r, o, i) : Gy(r, o, i);
    }, t.prototype._dispatchHighDown = function(r, n) {
      n && n.length && this.api.dispatchAction({
        type: r,
        batch: n
      });
    }, t.prototype.dispose = function() {
      this._clearHoverLinkFromSeries(), this._clearHoverLinkToSeries();
    }, t.type = "visualMap.continuous", t;
  }(aV)
);
function i4(e, t, r, n) {
  return new Jr({
    shape: {
      points: e
    },
    draggable: !!r,
    cursor: t,
    drift: r,
    onmousemove: function(i) {
      Xa(i.event);
    },
    ondragend: n
  });
}
function Txe(e, t, r) {
  var n = _xe / 2, i = e.get("hoverLinkDataSize");
  return i && (n = $i(i, t, r, !0) / 2), n;
}
function a4(e) {
  var t = e.get("hoverLinkOnHandle");
  return !!(t ?? e.get("realtime"));
}
function o4(e) {
  return e === "vertical" ? "ns-resize" : "ew-resize";
}
var Axe = {
  type: "selectDataRange",
  event: "dataRangeSelected",
  // FIXME use updateView appears wrong
  update: "update"
}, Mxe = function(e, t) {
  t.eachComponent({
    mainType: "visualMap",
    query: e
  }, function(r) {
    r.setSelected(e.selected);
  });
}, Exe = [
  {
    createOnAllSeries: !0,
    reset: function(e, t) {
      var r = [];
      return t.eachComponent("visualMap", function(n) {
        var i = e.pipelineContext;
        !n.isTargetSeries(e) || i && i.large || r.push(K0e(n.stateList, n.targetVisuals, xe(n.getValueState, n), n.getDataDimensionIndex(e.getData())));
      }), r;
    }
  },
  // Only support color.
  {
    createOnAllSeries: !0,
    reset: function(e, t) {
      var r = e.getData(), n = [];
      t.eachComponent("visualMap", function(i) {
        if (i.isTargetSeries(e)) {
          var a = i.getVisualMeta(xe(Dxe, null, e, i)) || {
            stops: [],
            outerColors: []
          }, o = i.getDataDimensionIndex(r);
          o >= 0 && (a.dimension = o, n.push(a));
        }
      }), e.getData().setVisual("visualMeta", n);
    }
  }
];
function Dxe(e, t, r, n) {
  for (var i = t.targetVisuals[n], a = Sr.prepareVisualTypes(i), o = {
    color: sp(e.getData(), "color")
    // default color.
  }, s = 0, l = a.length; s < l; s++) {
    var u = a[s], c = i[u === "opacity" ? "__alphaForOpacity" : u];
    c && c.applyVisual(r, f, d);
  }
  return o.color;
  function f(h) {
    return o[h];
  }
  function d(h, p) {
    o[h] = p;
  }
}
var s4 = j;
function Nxe(e) {
  var t = e && e.visualMap;
  le(t) || (t = t ? [t] : []), s4(t, function(r) {
    if (r) {
      Ou(r, "splitList") && !Ou(r, "pieces") && (r.pieces = r.splitList, delete r.splitList);
      var n = r.pieces;
      n && le(n) && s4(n, function(i) {
        Ne(i) && (Ou(i, "start") && !Ou(i, "min") && (i.min = i.start), Ou(i, "end") && !Ou(i, "max") && (i.max = i.end));
      });
    }
  });
}
function Ou(e, t) {
  return e && e.hasOwnProperty && e.hasOwnProperty(t);
}
var l4 = !1;
function sV(e) {
  l4 || (l4 = !0, e.registerSubTypeDefaulter("visualMap", function(t) {
    return !t.categories && (!(t.pieces ? t.pieces.length > 0 : t.splitNumber > 0) || t.calculable) ? "continuous" : "piecewise";
  }), e.registerAction(Axe, Mxe), j(Exe, function(t) {
    e.registerVisual(e.PRIORITY.VISUAL.COMPONENT, t);
  }), e.registerPreprocessor(Nxe));
}
function lV(e) {
  e.registerComponentModel(bxe), e.registerComponentView(Cxe), sV(e);
}
var Ixe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r._pieceList = [], r;
    }
    return t.prototype.optionUpdated = function(r, n) {
      e.prototype.optionUpdated.apply(this, arguments), this.resetExtent();
      var i = this._mode = this._determineMode();
      this._pieceList = [], Lxe[this._mode].call(this, this._pieceList), this._resetSelected(r, n);
      var a = this.option.categories;
      this.resetVisual(function(o, s) {
        i === "categories" ? (o.mappingMethod = "category", o.categories = ze(a)) : (o.dataExtent = this.getExtent(), o.mappingMethod = "piecewise", o.pieceList = ue(this._pieceList, function(l) {
          return l = ze(l), s !== "inRange" && (l.visual = null), l;
        }));
      });
    }, t.prototype.completeVisualOption = function() {
      var r = this.option, n = {}, i = Sr.listVisualTypes(), a = this.isCategory();
      j(r.pieces, function(s) {
        j(i, function(l) {
          s.hasOwnProperty(l) && (n[l] = 1);
        });
      }), j(n, function(s, l) {
        var u = !1;
        j(this.stateList, function(c) {
          u = u || o(r, c, l) || o(r.target, c, l);
        }, this), !u && j(this.stateList, function(c) {
          (r[c] || (r[c] = {}))[l] = iV.get(l, c === "inRange" ? "active" : "inactive", a);
        });
      }, this);
      function o(s, l, u) {
        return s && s[l] && s[l].hasOwnProperty(u);
      }
      e.prototype.completeVisualOption.apply(this, arguments);
    }, t.prototype._resetSelected = function(r, n) {
      var i = this.option, a = this._pieceList, o = (n ? i : r).selected || {};
      if (i.selected = o, j(a, function(l, u) {
        var c = this.getSelectedMapKey(l);
        o.hasOwnProperty(c) || (o[c] = !0);
      }, this), i.selectedMode === "single") {
        var s = !1;
        j(a, function(l, u) {
          var c = this.getSelectedMapKey(l);
          o[c] && (s ? o[c] = !1 : s = !0);
        }, this);
      }
    }, t.prototype.getItemSymbol = function() {
      return this.get("itemSymbol");
    }, t.prototype.getSelectedMapKey = function(r) {
      return this._mode === "categories" ? r.value + "" : r.index + "";
    }, t.prototype.getPieceList = function() {
      return this._pieceList;
    }, t.prototype._determineMode = function() {
      var r = this.option;
      return r.pieces && r.pieces.length > 0 ? "pieces" : this.option.categories ? "categories" : "splitNumber";
    }, t.prototype.setSelected = function(r) {
      this.option.selected = ze(r);
    }, t.prototype.getValueState = function(r) {
      var n = Sr.findPieceIndex(r, this._pieceList);
      return n != null && this.option.selected[this.getSelectedMapKey(this._pieceList[n])] ? "inRange" : "outOfRange";
    }, t.prototype.findTargetDataIndices = function(r) {
      var n = [], i = this._pieceList;
      return this.eachTargetSeries(function(a) {
        var o = [], s = a.getData();
        s.each(this.getDataDimensionIndex(s), function(l, u) {
          var c = Sr.findPieceIndex(l, i);
          c === r && o.push(u);
        }, this), n.push({
          seriesId: a.id,
          dataIndex: o
        });
      }, this), n;
    }, t.prototype.getRepresentValue = function(r) {
      var n;
      if (this.isCategory())
        n = r.value;
      else if (r.value != null)
        n = r.value;
      else {
        var i = r.interval || [];
        n = i[0] === -1 / 0 && i[1] === 1 / 0 ? 0 : (i[0] + i[1]) / 2;
      }
      return n;
    }, t.prototype.getVisualMeta = function(r) {
      if (this.isCategory())
        return;
      var n = [], i = ["", ""], a = this;
      function o(c, f) {
        var d = a.getRepresentValue({
          interval: c
        });
        f || (f = a.getValueState(d));
        var h = r(d, f);
        c[0] === -1 / 0 ? i[0] = h : c[1] === 1 / 0 ? i[1] = h : n.push({
          value: c[0],
          color: h
        }, {
          value: c[1],
          color: h
        });
      }
      var s = this._pieceList.slice();
      if (!s.length)
        s.push({
          interval: [-1 / 0, 1 / 0]
        });
      else {
        var l = s[0].interval[0];
        l !== -1 / 0 && s.unshift({
          interval: [-1 / 0, l]
        }), l = s[s.length - 1].interval[1], l !== 1 / 0 && s.push({
          interval: [l, 1 / 0]
        });
      }
      var u = -1 / 0;
      return j(s, function(c) {
        var f = c.interval;
        f && (f[0] > u && o([u, f[0]], "outOfRange"), o(f.slice()), u = f[1]);
      }, this), {
        stops: n,
        outerColors: i
      };
    }, t.type = "visualMap.piecewise", t.defaultOption = ms(Hm.defaultOption, {
      selected: null,
      minOpen: !1,
      maxOpen: !1,
      align: "auto",
      itemWidth: 20,
      itemHeight: 14,
      itemSymbol: "roundRect",
      pieces: null,
      categories: null,
      splitNumber: 5,
      selectedMode: "multiple",
      itemGap: 10,
      hoverLink: !0
      // Enable hover highlight.
    }), t;
  }(Hm)
), Lxe = {
  splitNumber: function(e) {
    var t = this.option, r = Math.min(t.precision, 20), n = this.getExtent(), i = t.splitNumber;
    i = Math.max(parseInt(i, 10), 1), t.splitNumber = i;
    for (var a = (n[1] - n[0]) / i; +a.toFixed(r) !== a && r < 5; )
      r++;
    t.precision = r, a = +a.toFixed(r), t.minOpen && e.push({
      interval: [-1 / 0, n[0]],
      close: [0, 0]
    });
    for (var o = 0, s = n[0]; o < i; s += a, o++) {
      var l = o === i - 1 ? n[1] : s + a;
      e.push({
        interval: [s, l],
        close: [1, 1]
      });
    }
    t.maxOpen && e.push({
      interval: [n[1], 1 / 0],
      close: [0, 0]
    }), aw(e), j(e, function(u, c) {
      u.index = c, u.text = this.formatValueText(u.interval);
    }, this);
  },
  categories: function(e) {
    var t = this.option;
    j(t.categories, function(r) {
      e.push({
        text: this.formatValueText(r, !0),
        value: r
      });
    }, this), u4(t, e);
  },
  pieces: function(e) {
    var t = this.option;
    j(t.pieces, function(r, n) {
      Ne(r) || (r = {
        value: r
      });
      var i = {
        text: "",
        index: n
      };
      if (r.label != null && (i.text = r.label), r.hasOwnProperty("value")) {
        var a = i.value = r.value;
        i.interval = [a, a], i.close = [1, 1];
      } else {
        for (var o = i.interval = [], s = i.close = [0, 0], l = [1, 0, 1], u = [-1 / 0, 1 / 0], c = [], f = 0; f < 2; f++) {
          for (var d = [["gte", "gt", "min"], ["lte", "lt", "max"]][f], h = 0; h < 3 && o[f] == null; h++)
            o[f] = r[d[h]], s[f] = l[h], c[f] = h === 2;
          o[f] == null && (o[f] = u[f]);
        }
        c[0] && o[1] === 1 / 0 && (s[0] = 0), c[1] && o[0] === -1 / 0 && (s[1] = 0), process.env.NODE_ENV !== "production" && o[0] > o[1] && console.warn("Piece " + n + "is illegal: " + o + " lower bound should not greater then uppper bound."), o[0] === o[1] && s[0] && s[1] && (i.value = o[0]);
      }
      i.visual = Sr.retrieveVisuals(r), e.push(i);
    }, this), u4(t, e), aw(e), j(e, function(r) {
      var n = r.close, i = [["<", "≤"][n[1]], [">", "≥"][n[0]]];
      r.text = r.text || this.formatValueText(r.value != null ? r.value : r.interval, !1, i);
    }, this);
  }
};
function u4(e, t) {
  var r = e.inverse;
  (e.orient === "vertical" ? !r : r) && t.reverse();
}
var Rxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = t.type, r;
    }
    return t.prototype.doRender = function() {
      var r = this.group;
      r.removeAll();
      var n = this.visualMapModel, i = n.get("textGap"), a = n.textStyleModel, o = a.getFont(), s = a.getTextColor(), l = this._getItemAlign(), u = n.itemSize, c = this._getViewData(), f = c.endsText, d = ur(n.get("showLabel", !0), !f), h = !n.get("selectedMode");
      f && this._renderEndsText(r, f[0], u, d, l), j(c.viewPieceList, function(p) {
        var v = p.piece, g = new Fe();
        g.onclick = xe(this._onItemClick, this, v), this._enableHoverLink(g, p.indexInModelPieceList);
        var m = n.getRepresentValue(v);
        if (this._createItemSymbol(g, m, [0, 0, u[0], u[1]], h), d) {
          var y = this.visualMapModel.getValueState(m);
          g.add(new pt({
            style: {
              x: l === "right" ? -i : u[0] + i,
              y: u[1] / 2,
              text: v.text,
              verticalAlign: "middle",
              align: l,
              font: o,
              fill: s,
              opacity: y === "outOfRange" ? 0.5 : 1
            },
            silent: h
          }));
        }
        r.add(g);
      }, this), f && this._renderEndsText(r, f[1], u, d, l), Al(n.get("orient"), r, n.get("itemGap")), this.renderBackground(r), this.positionGroup(r);
    }, t.prototype._enableHoverLink = function(r, n) {
      var i = this;
      r.on("mouseover", function() {
        return a("highlight");
      }).on("mouseout", function() {
        return a("downplay");
      });
      var a = function(o) {
        var s = i.visualMapModel;
        s.option.hoverLink && i.api.dispatchAction({
          type: o,
          batch: Tg(s.findTargetDataIndices(n), s)
        });
      };
    }, t.prototype._getItemAlign = function() {
      var r = this.visualMapModel, n = r.option;
      if (n.orient === "vertical")
        return oV(r, this.api, r.itemSize);
      var i = n.align;
      return (!i || i === "auto") && (i = "left"), i;
    }, t.prototype._renderEndsText = function(r, n, i, a, o) {
      if (n) {
        var s = new Fe(), l = this.visualMapModel.textStyleModel;
        s.add(new pt({
          style: Vt(l, {
            x: a ? o === "right" ? i[0] : 0 : i[0] / 2,
            y: i[1] / 2,
            verticalAlign: "middle",
            align: a ? o : "center",
            text: n
          })
        })), r.add(s);
      }
    }, t.prototype._getViewData = function() {
      var r = this.visualMapModel, n = ue(r.getPieceList(), function(s, l) {
        return {
          piece: s,
          indexInModelPieceList: l
        };
      }), i = r.get("text"), a = r.get("orient"), o = r.get("inverse");
      return (a === "horizontal" ? o : !o) ? n.reverse() : i && (i = i.slice().reverse()), {
        viewPieceList: n,
        endsText: i
      };
    }, t.prototype._createItemSymbol = function(r, n, i, a) {
      var o = fr(
        // symbol will be string
        this.getControllerVisual(n, "symbol"),
        i[0],
        i[1],
        i[2],
        i[3],
        // color will be string
        this.getControllerVisual(n, "color")
      );
      o.silent = a, r.add(o);
    }, t.prototype._onItemClick = function(r) {
      var n = this.visualMapModel, i = n.option, a = i.selectedMode;
      if (a) {
        var o = ze(i.selected), s = n.getSelectedMapKey(r);
        a === "single" || a === !0 ? (o[s] = !0, j(o, function(l, u) {
          o[u] = u === s;
        })) : o[s] = !o[s], this.api.dispatchAction({
          type: "selectDataRange",
          from: this.uid,
          visualMapId: this.visualMapModel.id,
          selected: o
        });
      }
    }, t.type = "visualMap.piecewise", t;
  }(aV)
);
function uV(e) {
  e.registerComponentModel(Ixe), e.registerComponentView(Rxe), sV(e);
}
function Pxe(e) {
  ot(lV), ot(uV);
}
var kxe = {
  label: {
    enabled: !0
  },
  decal: {
    show: !1
  }
}, c4 = yt(), Oxe = {};
function zxe(e, t) {
  var r = e.getModel("aria");
  if (!r.get("enabled"))
    return;
  var n = ze(kxe);
  Xe(n.label, e.getLocaleModel().get("aria"), !1), Xe(r.option, n, !1), i(), a();
  function i() {
    var u = r.getModel("decal"), c = u.get("show");
    if (c) {
      var f = Ce();
      e.eachSeries(function(d) {
        if (!d.isColorBySeries()) {
          var h = f.get(d.type);
          h || (h = {}, f.set(d.type, h)), c4(d).scope = h;
        }
      }), e.eachRawSeries(function(d) {
        if (e.isSeriesFiltered(d))
          return;
        if (Ee(d.enableAriaDecal)) {
          d.enableAriaDecal();
          return;
        }
        var h = d.getData();
        if (d.isColorBySeries()) {
          var y = _w(d.ecModel, d.name, Oxe, e.getSeriesCount()), b = h.getVisual("decal");
          h.setVisual("decal", w(b, y));
        } else {
          var p = d.getRawData(), v = {}, g = c4(d).scope;
          h.each(function(_) {
            var S = h.getRawIndex(_);
            v[S] = _;
          });
          var m = p.count();
          p.each(function(_) {
            var S = v[_], C = p.getName(_) || _ + "", A = _w(d.ecModel, C, g, m), M = h.getItemVisual(S, "decal");
            h.setItemVisual(S, "decal", w(M, A));
          });
        }
        function w(_, S) {
          var C = _ ? ae(ae({}, S), _) : S;
          return C.dirty = !0, C;
        }
      });
    }
  }
  function a() {
    var u = t.getZr().dom;
    if (u) {
      var c = e.getLocaleModel().get("aria"), f = r.getModel("label");
      if (f.option = Ie(f.option, c), !!f.get("enabled")) {
        if (u.setAttribute("role", "img"), f.get("description")) {
          u.setAttribute("aria-label", f.get("description"));
          return;
        }
        var d = e.getSeriesCount(), h = f.get(["data", "maxCount"]) || 10, p = f.get(["series", "maxCount"]) || 10, v = Math.min(d, p), g;
        if (!(d < 1)) {
          var m = s();
          if (m) {
            var y = f.get(["general", "withTitle"]);
            g = o(y, {
              title: m
            });
          } else
            g = f.get(["general", "withoutTitle"]);
          var b = [], w = d > 1 ? f.get(["series", "multiple", "prefix"]) : f.get(["series", "single", "prefix"]);
          g += o(w, {
            seriesCount: d
          }), e.eachSeries(function(A, M) {
            if (M < v) {
              var D = void 0, N = A.get("name"), R = N ? "withName" : "withoutName";
              D = d > 1 ? f.get(["series", "multiple", R]) : f.get(["series", "single", R]), D = o(D, {
                seriesId: A.seriesIndex,
                seriesName: A.get("name"),
                seriesType: l(A.subType)
              });
              var O = A.getData();
              if (O.count() > h) {
                var E = f.get(["data", "partialData"]);
                D += o(E, {
                  displayCnt: h
                });
              } else
                D += f.get(["data", "allData"]);
              for (var L = f.get(["data", "separator", "middle"]), I = f.get(["data", "separator", "end"]), P = f.get(["data", "excludeDimensionId"]), k = [], z = 0; z < O.count(); z++)
                if (z < h) {
                  var V = O.getName(z), B = P ? Ct(O.getValues(z), function(H, G) {
                    return rt(P, G) === -1;
                  }) : O.getValues(z), F = f.get(["data", V ? "withName" : "withoutName"]);
                  k.push(o(F, {
                    name: V,
                    value: B.join(L)
                  }));
                }
              D += k.join(L) + I, b.push(D);
            }
          });
          var _ = f.getModel(["series", "multiple", "separator"]), S = _.get("middle"), C = _.get("end");
          g += b.join(S) + C, u.setAttribute("aria-label", g);
        }
      }
    }
  }
  function o(u, c) {
    if (!ge(u))
      return u;
    var f = u;
    return j(c, function(d, h) {
      f = f.replace(new RegExp("\\{\\s*" + h + "\\s*\\}", "g"), d);
    }), f;
  }
  function s() {
    var u = e.get("title");
    return u && u.length && (u = u[0]), u && u.text;
  }
  function l(u) {
    var c = e.getLocaleModel().get(["series", "typeNames"]);
    return c[u] || c.chart;
  }
}
function jxe(e) {
  if (!(!e || !e.aria)) {
    var t = e.aria;
    t.show != null && (t.enabled = t.show), t.label = t.label || {}, j(["description", "general", "series", "data"], function(r) {
      t[r] != null && (t.label[r] = t[r]);
    });
  }
}
function Vxe(e) {
  e.registerPreprocessor(jxe), e.registerVisual(e.PRIORITY.VISUAL.ARIA, zxe);
}
var f4 = {
  value: "eq",
  // PENDING: not good for literal semantic?
  "<": "lt",
  "<=": "lte",
  ">": "gt",
  ">=": "gte",
  "=": "eq",
  "!=": "ne",
  "<>": "ne"
  // Might be misleading for sake of the difference between '==' and '===',
  // so don't support them.
  // '==': 'eq',
  // '===': 'seq',
  // '!==': 'sne'
  // PENDING: Whether support some common alias "ge", "le", "neq"?
  // ge: 'gte',
  // le: 'lte',
  // neq: 'ne',
}, Bxe = (
  /** @class */
  function() {
    function e(t) {
      var r = this._condVal = ge(t) ? new RegExp(t) : ZS(t) ? t : null;
      if (r == null) {
        var n = "";
        process.env.NODE_ENV !== "production" && (n = ln("Illegal regexp", t, "in")), Et(n);
      }
    }
    return e.prototype.evaluate = function(t) {
      var r = typeof t;
      return ge(r) ? this._condVal.test(t) : bt(r) ? this._condVal.test(t + "") : !1;
    }, e;
  }()
), Fxe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.evaluate = function() {
      return this.value;
    }, e;
  }()
), $xe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.evaluate = function() {
      for (var t = this.children, r = 0; r < t.length; r++)
        if (!t[r].evaluate())
          return !1;
      return !0;
    }, e;
  }()
), Hxe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.evaluate = function() {
      for (var t = this.children, r = 0; r < t.length; r++)
        if (t[r].evaluate())
          return !0;
      return !1;
    }, e;
  }()
), Gxe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.evaluate = function() {
      return !this.child.evaluate();
    }, e;
  }()
), Wxe = (
  /** @class */
  function() {
    function e() {
    }
    return e.prototype.evaluate = function() {
      for (var t = !!this.valueParser, r = this.getValue, n = r(this.valueGetterParam), i = t ? this.valueParser(n) : null, a = 0; a < this.subCondList.length; a++)
        if (!this.subCondList[a].evaluate(t ? i : n))
          return !1;
      return !0;
    }, e;
  }()
);
function lA(e, t) {
  if (e === !0 || e === !1) {
    var r = new Fxe();
    return r.value = e, r;
  }
  var n = "";
  return cV(e) || (process.env.NODE_ENV !== "production" && (n = ln("Illegal config. Expect a plain object but actually", e)), Et(n)), e.and ? d4("and", e, t) : e.or ? d4("or", e, t) : e.not ? Uxe(e, t) : Yxe(e, t);
}
function d4(e, t, r) {
  var n = t[e], i = "";
  process.env.NODE_ENV !== "production" && (i = ln('"and"/"or" condition should only be `' + e + ": [...]` and must not be empty array.", "Illegal condition:", t)), le(n) || Et(i), n.length || Et(i);
  var a = e === "and" ? new $xe() : new Hxe();
  return a.children = ue(n, function(o) {
    return lA(o, r);
  }), a.children.length || Et(i), a;
}
function Uxe(e, t) {
  var r = e.not, n = "";
  process.env.NODE_ENV !== "production" && (n = ln('"not" condition should only be `not: {}`.', "Illegal condition:", e)), cV(r) || Et(n);
  var i = new Gxe();
  return i.child = lA(r, t), i.child || Et(n), i;
}
function Yxe(e, t) {
  for (var r = "", n = t.prepareGetValue(e), i = [], a = ut(e), o = e.parser, s = o ? $6(o) : null, l = 0; l < a.length; l++) {
    var u = a[l];
    if (!(u === "parser" || t.valueGetterAttrMap.get(u))) {
      var c = be(f4, u) ? f4[u] : u, f = e[u], d = s ? s(f) : f, h = yae(c, d) || c === "reg" && new Bxe(d);
      h || (process.env.NODE_ENV !== "production" && (r = ln('Illegal relational operation: "' + u + '" in condition:', e)), Et(r)), i.push(h);
    }
  }
  i.length || (process.env.NODE_ENV !== "production" && (r = ln("Relational condition must have at least one operator.", "Illegal condition:", e)), Et(r));
  var p = new Wxe();
  return p.valueGetterParam = n, p.valueParser = s, p.getValue = t.getValue, p.subCondList = i, p;
}
function cV(e) {
  return Ne(e) && !zr(e);
}
var Zxe = (
  /** @class */
  function() {
    function e(t, r) {
      this._cond = lA(t, r);
    }
    return e.prototype.evaluate = function() {
      return this._cond.evaluate();
    }, e;
  }()
);
function Xxe(e, t) {
  return new Zxe(e, t);
}
var Kxe = {
  type: "echarts:filter",
  // PENDING: enhance to filter by index rather than create new data
  transform: function(e) {
    for (var t = e.upstream, r, n = Xxe(e.config, {
      valueGetterAttrMap: Ce({
        dimension: !0
      }),
      prepareGetValue: function(s) {
        var l = "", u = s.dimension;
        be(s, "dimension") || (process.env.NODE_ENV !== "production" && (l = ln('Relation condition must has prop "dimension" specified.', "Illegal condition:", s)), Et(l));
        var c = t.getDimensionInfo(u);
        return c || (process.env.NODE_ENV !== "production" && (l = ln("Can not find dimension info via: " + u + `.
`, "Existing dimensions: ", t.cloneAllDimensionInfo(), `.
`, "Illegal condition:", s, `.
`)), Et(l)), {
          dimIdx: c.index
        };
      },
      getValue: function(s) {
        return t.retrieveValueFromItem(r, s.dimIdx);
      }
    }), i = [], a = 0, o = t.count(); a < o; a++)
      r = t.getRawDataItem(a), n.evaluate() && i.push(r);
    return {
      data: i
    };
  }
}, S_ = "";
process.env.NODE_ENV !== "production" && (S_ = ["Valid config is like:", '{ dimension: "age", order: "asc" }', 'or [{ dimension: "age", order: "asc"], { dimension: "date", order: "desc" }]'].join(" "));
var qxe = {
  type: "echarts:sort",
  transform: function(e) {
    var t = e.upstream, r = e.config, n = "", i = Ot(r);
    i.length || (process.env.NODE_ENV !== "production" && (n = "Empty `config` in sort transform."), Et(n));
    var a = [];
    j(i, function(c) {
      var f = c.dimension, d = c.order, h = c.parser, p = c.incomparable;
      if (f == null && (process.env.NODE_ENV !== "production" && (n = 'Sort transform config must has "dimension" specified.' + S_), Et(n)), d !== "asc" && d !== "desc" && (process.env.NODE_ENV !== "production" && (n = 'Sort transform config must has "order" specified.' + S_), Et(n)), p && p !== "min" && p !== "max") {
        var v = "";
        process.env.NODE_ENV !== "production" && (v = 'incomparable must be "min" or "max" rather than "' + p + '".'), Et(v);
      }
      if (d !== "asc" && d !== "desc") {
        var g = "";
        process.env.NODE_ENV !== "production" && (g = 'order must be "asc" or "desc" rather than "' + d + '".'), Et(g);
      }
      var m = t.getDimensionInfo(f);
      m || (process.env.NODE_ENV !== "production" && (n = ln("Can not find dimension info via: " + f + `.
`, "Existing dimensions: ", t.cloneAllDimensionInfo(), `.
`, "Illegal config:", c, `.
`)), Et(n));
      var y = h ? $6(h) : null;
      h && !y && (process.env.NODE_ENV !== "production" && (n = ln("Invalid parser name " + h + `.
`, "Illegal config:", c, `.
`)), Et(n)), a.push({
        dimIdx: m.index,
        parser: y,
        comparator: new G6(d, p)
      });
    });
    var o = t.sourceFormat;
    o !== Qr && o !== li && (process.env.NODE_ENV !== "production" && (n = 'sourceFormat "' + o + '" is not supported yet'), Et(n));
    for (var s = [], l = 0, u = t.count(); l < u; l++)
      s.push(t.getRawDataItem(l));
    return s.sort(function(c, f) {
      for (var d = 0; d < a.length; d++) {
        var h = a[d], p = t.retrieveValueFromItem(c, h.dimIdx), v = t.retrieveValueFromItem(f, h.dimIdx);
        h.parser && (p = h.parser(p), v = h.parser(v));
        var g = h.comparator.evaluate(p, v);
        if (g !== 0)
          return g;
      }
      return 0;
    }), {
      data: s
    };
  }
};
function Jxe(e) {
  e.registerTransform(Kxe), e.registerTransform(qxe);
}
var Qxe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "dataset", r;
    }
    return t.prototype.init = function(r, n, i) {
      e.prototype.init.call(this, r, n, i), this._sourceManager = new Z6(this), dN(this);
    }, t.prototype.mergeOption = function(r, n) {
      e.prototype.mergeOption.call(this, r, n), dN(this);
    }, t.prototype.optionUpdated = function() {
      this._sourceManager.dirty();
    }, t.prototype.getSourceManager = function() {
      return this._sourceManager;
    }, t.type = "dataset", t.defaultOption = {
      seriesLayoutBy: ia
    }, t;
  }(at)
), ebe = (
  /** @class */
  function(e) {
    ee(t, e);
    function t() {
      var r = e !== null && e.apply(this, arguments) || this;
      return r.type = "dataset", r;
    }
    return t.type = "dataset", t;
  }($t)
);
function tbe(e) {
  e.registerComponentModel(Qxe), e.registerComponentView(ebe);
}
var Bi = ca.CMD;
function ic(e, t) {
  return Math.abs(e - t) < 1e-5;
}
function C_(e) {
  var t = e.data, r = e.len(), n = [], i, a = 0, o = 0, s = 0, l = 0;
  function u(O, E) {
    i && i.length > 2 && n.push(i), i = [O, E];
  }
  function c(O, E, L, I) {
    ic(O, L) && ic(E, I) || i.push(O, E, L, I, L, I);
  }
  function f(O, E, L, I, P, k) {
    var z = Math.abs(E - O), V = Math.tan(z / 4) * 4 / 3, B = E < O ? -1 : 1, F = Math.cos(O), H = Math.sin(O), G = Math.cos(E), W = Math.sin(E), X = F * P + L, q = H * k + I, J = G * P + L, U = W * k + I, $ = P * V * B, Y = k * V * B;
    i.push(X - $ * H, q + Y * F, J + $ * W, U - Y * G, J, U);
  }
  for (var d, h, p, v, g = 0; g < r; ) {
    var m = t[g++], y = g === 1;
    switch (y && (a = t[g], o = t[g + 1], s = a, l = o, (m === Bi.L || m === Bi.C || m === Bi.Q) && (i = [s, l])), m) {
      case Bi.M:
        a = s = t[g++], o = l = t[g++], u(s, l);
        break;
      case Bi.L:
        d = t[g++], h = t[g++], c(a, o, d, h), a = d, o = h;
        break;
      case Bi.C:
        i.push(t[g++], t[g++], t[g++], t[g++], a = t[g++], o = t[g++]);
        break;
      case Bi.Q:
        d = t[g++], h = t[g++], p = t[g++], v = t[g++], i.push(a + 2 / 3 * (d - a), o + 2 / 3 * (h - o), p + 2 / 3 * (d - p), v + 2 / 3 * (h - v), p, v), a = p, o = v;
        break;
      case Bi.A:
        var b = t[g++], w = t[g++], _ = t[g++], S = t[g++], C = t[g++], A = t[g++] + C;
        g += 1;
        var M = !t[g++];
        d = Math.cos(C) * _ + b, h = Math.sin(C) * S + w, y ? (s = d, l = h, u(s, l)) : c(a, o, d, h), a = Math.cos(A) * _ + b, o = Math.sin(A) * S + w;
        for (var D = (M ? -1 : 1) * Math.PI / 2, N = C; M ? N > A : N < A; N += D) {
          var R = M ? Math.max(N + D, A) : Math.min(N + D, A);
          f(N, R, b, w, _, S);
        }
        break;
      case Bi.R:
        s = a = t[g++], l = o = t[g++], d = s + t[g++], h = l + t[g++], u(d, l), c(d, l, d, h), c(d, h, s, h), c(s, h, s, l), c(s, l, d, l);
        break;
      case Bi.Z:
        i && c(a, o, s, l), a = s, o = l;
        break;
    }
  }
  return i && i.length > 2 && n.push(i), n;
}
function T_(e, t, r, n, i, a, o, s, l, u) {
  if (ic(e, r) && ic(t, n) && ic(i, o) && ic(a, s)) {
    l.push(o, s);
    return;
  }
  var c = 2 / u, f = c * c, d = o - e, h = s - t, p = Math.sqrt(d * d + h * h);
  d /= p, h /= p;
  var v = r - e, g = n - t, m = i - o, y = a - s, b = v * v + g * g, w = m * m + y * y;
  if (b < f && w < f) {
    l.push(o, s);
    return;
  }
  var _ = d * v + h * g, S = -d * m - h * y, C = b - _ * _, A = w - S * S;
  if (C < f && _ >= 0 && A < f && S >= 0) {
    l.push(o, s);
    return;
  }
  var M = [], D = [];
  os(e, r, i, o, 0.5, M), os(t, n, a, s, 0.5, D), T_(M[0], D[0], M[1], D[1], M[2], D[2], M[3], D[3], l, u), T_(M[4], D[4], M[5], D[5], M[6], D[6], M[7], D[7], l, u);
}
function rbe(e, t) {
  var r = C_(e), n = [];
  t = t || 1;
  for (var i = 0; i < r.length; i++) {
    var a = r[i], o = [], s = a[0], l = a[1];
    o.push(s, l);
    for (var u = 2; u < a.length; ) {
      var c = a[u++], f = a[u++], d = a[u++], h = a[u++], p = a[u++], v = a[u++];
      T_(s, l, c, f, d, h, p, v, o, t), s = p, l = v;
    }
    n.push(o);
  }
  return n;
}
function fV(e, t, r) {
  var n = e[t], i = e[1 - t], a = Math.abs(n / i), o = Math.ceil(Math.sqrt(a * r)), s = Math.floor(r / o);
  s === 0 && (s = 1, o = r);
  for (var l = [], u = 0; u < o; u++)
    l.push(s);
  var c = o * s, f = r - c;
  if (f > 0)
    for (var u = 0; u < f; u++)
      l[u % o] += 1;
  return l;
}
function h4(e, t, r) {
  for (var n = e.r0, i = e.r, a = e.startAngle, o = e.endAngle, s = Math.abs(o - a), l = s * i, u = i - n, c = l > Math.abs(u), f = fV([l, u], c ? 0 : 1, t), d = (c ? s : u) / f.length, h = 0; h < f.length; h++)
    for (var p = (c ? u : s) / f[h], v = 0; v < f[h]; v++) {
      var g = {};
      c ? (g.startAngle = a + d * h, g.endAngle = a + d * (h + 1), g.r0 = n + p * v, g.r = n + p * (v + 1)) : (g.startAngle = a + p * v, g.endAngle = a + p * (v + 1), g.r0 = n + d * h, g.r = n + d * (h + 1)), g.clockwise = e.clockwise, g.cx = e.cx, g.cy = e.cy, r.push(g);
    }
}
function nbe(e, t, r) {
  for (var n = e.width, i = e.height, a = n > i, o = fV([n, i], a ? 0 : 1, t), s = a ? "width" : "height", l = a ? "height" : "width", u = a ? "x" : "y", c = a ? "y" : "x", f = e[s] / o.length, d = 0; d < o.length; d++)
    for (var h = e[l] / o[d], p = 0; p < o[d]; p++) {
      var v = {};
      v[u] = d * f, v[c] = p * h, v[s] = f, v[l] = h, v.x += e.x, v.y += e.y, r.push(v);
    }
}
function p4(e, t, r, n) {
  return e * n - r * t;
}
function ibe(e, t, r, n, i, a, o, s) {
  var l = r - e, u = n - t, c = o - i, f = s - a, d = p4(c, f, l, u);
  if (Math.abs(d) < 1e-6)
    return null;
  var h = e - i, p = t - a, v = p4(h, p, c, f) / d;
  return v < 0 || v > 1 ? null : new et(v * l + e, v * u + t);
}
function abe(e, t, r) {
  var n = new et();
  et.sub(n, r, t), n.normalize();
  var i = new et();
  et.sub(i, e, t);
  var a = i.dot(n);
  return a;
}
function zu(e, t) {
  var r = e[e.length - 1];
  r && r[0] === t[0] && r[1] === t[1] || e.push(t);
}
function obe(e, t, r) {
  for (var n = e.length, i = [], a = 0; a < n; a++) {
    var o = e[a], s = e[(a + 1) % n], l = ibe(o[0], o[1], s[0], s[1], t.x, t.y, r.x, r.y);
    l && i.push({
      projPt: abe(l, t, r),
      pt: l,
      idx: a
    });
  }
  if (i.length < 2)
    return [{ points: e }, { points: e }];
  i.sort(function(g, m) {
    return g.projPt - m.projPt;
  });
  var u = i[0], c = i[i.length - 1];
  if (c.idx < u.idx) {
    var f = u;
    u = c, c = f;
  }
  for (var d = [u.pt.x, u.pt.y], h = [c.pt.x, c.pt.y], p = [d], v = [h], a = u.idx + 1; a <= c.idx; a++)
    zu(p, e[a].slice());
  zu(p, h), zu(p, d);
  for (var a = c.idx + 1; a <= u.idx + n; a++)
    zu(v, e[a % n].slice());
  return zu(v, d), zu(v, h), [{
    points: p
  }, {
    points: v
  }];
}
function v4(e) {
  var t = e.points, r = [], n = [];
  Vy(t, r, n);
  var i = new tt(r[0], r[1], n[0] - r[0], n[1] - r[1]), a = i.width, o = i.height, s = i.x, l = i.y, u = new et(), c = new et();
  return a > o ? (u.x = c.x = s + a / 2, u.y = l, c.y = l + o) : (u.y = c.y = l + o / 2, u.x = s, c.x = s + a), obe(t, u, c);
}
function Gm(e, t, r, n) {
  if (r === 1)
    n.push(t);
  else {
    var i = Math.floor(r / 2), a = e(t);
    Gm(e, a[0], i, n), Gm(e, a[1], r - i, n);
  }
  return n;
}
function sbe(e, t) {
  for (var r = [], n = 0; n < t; n++)
    r.push(vC(e));
  return r;
}
function lbe(e, t) {
  t.setStyle(e.style), t.z = e.z, t.z2 = e.z2, t.zlevel = e.zlevel;
}
function ube(e) {
  for (var t = [], r = 0; r < e.length; )
    t.push([e[r++], e[r++]]);
  return t;
}
function cbe(e, t) {
  var r = [], n = e.shape, i;
  switch (e.type) {
    case "rect":
      nbe(n, t, r), i = vt;
      break;
    case "sector":
      h4(n, t, r), i = qr;
      break;
    case "circle":
      h4({
        r0: 0,
        r: n.r,
        startAngle: 0,
        endAngle: Math.PI * 2,
        cx: n.cx,
        cy: n.cy
      }, t, r), i = qr;
      break;
    default:
      var a = e.getComputedTransform(), o = a ? Math.sqrt(Math.max(a[0] * a[0] + a[1] * a[1], a[2] * a[2] + a[3] * a[3])) : 1, s = ue(rbe(e.getUpdatedPathProxy(), o), function(m) {
        return ube(m);
      }), l = s.length;
      if (l === 0)
        Gm(v4, {
          points: s[0]
        }, t, r);
      else if (l === t)
        for (var u = 0; u < l; u++)
          r.push({
            points: s[u]
          });
      else {
        var c = 0, f = ue(s, function(m) {
          var y = [], b = [];
          Vy(m, y, b);
          var w = (b[1] - y[1]) * (b[0] - y[0]);
          return c += w, { poly: m, area: w };
        });
        f.sort(function(m, y) {
          return y.area - m.area;
        });
        for (var d = t, u = 0; u < l; u++) {
          var h = f[u];
          if (d <= 0)
            break;
          var p = u === l - 1 ? d : Math.ceil(h.area / c * t);
          p < 0 || (Gm(v4, {
            points: h.poly
          }, p, r), d -= p);
        }
      }
      i = Jr;
      break;
  }
  if (!i)
    return sbe(e, t);
  for (var v = [], u = 0; u < r.length; u++) {
    var g = new i();
    g.setShape(r[u]), lbe(e, g), v.push(g);
  }
  return v;
}
function fbe(e, t) {
  var r = e.length, n = t.length;
  if (r === n)
    return [e, t];
  for (var i = [], a = [], o = r < n ? e : t, s = Math.min(r, n), l = Math.abs(n - r) / 6, u = (s - 2) / 6, c = Math.ceil(l / u) + 1, f = [o[0], o[1]], d = l, h = 2; h < s; ) {
    var p = o[h - 2], v = o[h - 1], g = o[h++], m = o[h++], y = o[h++], b = o[h++], w = o[h++], _ = o[h++];
    if (d <= 0) {
      f.push(g, m, y, b, w, _);
      continue;
    }
    for (var S = Math.min(d, c - 1) + 1, C = 1; C <= S; C++) {
      var A = C / S;
      os(p, g, y, w, A, i), os(v, m, b, _, A, a), p = i[3], v = a[3], f.push(i[1], a[1], i[2], a[2], p, v), g = i[5], m = a[5], y = i[6], b = a[6];
    }
    d -= S - 1;
  }
  return o === e ? [f, t] : [e, f];
}
function g4(e, t) {
  for (var r = e.length, n = e[r - 2], i = e[r - 1], a = [], o = 0; o < t.length; )
    a[o++] = n, a[o++] = i;
  return a;
}
function dbe(e, t) {
  for (var r, n, i, a = [], o = [], s = 0; s < Math.max(e.length, t.length); s++) {
    var l = e[s], u = t[s], c = void 0, f = void 0;
    l ? u ? (r = fbe(l, u), c = r[0], f = r[1], n = c, i = f) : (f = g4(i || l, l), c = l) : (c = g4(n || u, u), f = u), a.push(c), o.push(f);
  }
  return [a, o];
}
function m4(e) {
  for (var t = 0, r = 0, n = 0, i = e.length, a = 0, o = i - 2; a < i; o = a, a += 2) {
    var s = e[o], l = e[o + 1], u = e[a], c = e[a + 1], f = s * c - u * l;
    t += f, r += (s + u) * f, n += (l + c) * f;
  }
  return t === 0 ? [e[0] || 0, e[1] || 0] : [r / t / 3, n / t / 3, t];
}
function hbe(e, t, r, n) {
  for (var i = (e.length - 2) / 6, a = 1 / 0, o = 0, s = e.length, l = s - 2, u = 0; u < i; u++) {
    for (var c = u * 6, f = 0, d = 0; d < s; d += 2) {
      var h = d === 0 ? c : (c + d - 2) % l + 2, p = e[h] - r[0], v = e[h + 1] - r[1], g = t[d] - n[0], m = t[d + 1] - n[1], y = g - p, b = m - v;
      f += y * y + b * b;
    }
    f < a && (a = f, o = u);
  }
  return o;
}
function pbe(e) {
  for (var t = [], r = e.length, n = 0; n < r; n += 2)
    t[n] = e[r - n - 2], t[n + 1] = e[r - n - 1];
  return t;
}
function vbe(e, t, r, n) {
  for (var i = [], a, o = 0; o < e.length; o++) {
    var s = e[o], l = t[o], u = m4(s), c = m4(l);
    a == null && (a = u[2] < 0 != c[2] < 0);
    var f = [], d = [], h = 0, p = 1 / 0, v = [], g = s.length;
    a && (s = pbe(s));
    for (var m = hbe(s, l, u, c) * 6, y = g - 2, b = 0; b < y; b += 2) {
      var w = (m + b) % y + 2;
      f[b + 2] = s[w] - u[0], f[b + 3] = s[w + 1] - u[1];
    }
    f[0] = s[m] - u[0], f[1] = s[m + 1] - u[1];
    for (var _ = n / r, S = -n / 2; S <= n / 2; S += _) {
      for (var C = Math.sin(S), A = Math.cos(S), M = 0, b = 0; b < s.length; b += 2) {
        var D = f[b], N = f[b + 1], R = l[b] - c[0], O = l[b + 1] - c[1], E = R * A - O * C, L = R * C + O * A;
        v[b] = E, v[b + 1] = L;
        var I = E - D, P = L - N;
        M += I * I + P * P;
      }
      if (M < p) {
        p = M, h = S;
        for (var k = 0; k < v.length; k++)
          d[k] = v[k];
      }
    }
    i.push({
      from: f,
      to: d,
      fromCp: u,
      toCp: c,
      rotation: -h
    });
  }
  return i;
}
function Wm(e) {
  return e.__isCombineMorphing;
}
var dV = "__mOriginal_";
function Um(e, t, r) {
  var n = dV + t, i = e[n] || e[t];
  e[n] || (e[n] = e[t]);
  var a = r.replace, o = r.after, s = r.before;
  e[t] = function() {
    var l = arguments, u;
    return s && s.apply(this, l), a ? u = a.apply(this, l) : u = i.apply(this, l), o && o.apply(this, l), u;
  };
}
function Yd(e, t) {
  var r = dV + t;
  e[r] && (e[t] = e[r], e[r] = null);
}
function y4(e, t) {
  for (var r = 0; r < e.length; r++)
    for (var n = e[r], i = 0; i < n.length; ) {
      var a = n[i], o = n[i + 1];
      n[i++] = t[0] * a + t[2] * o + t[4], n[i++] = t[1] * a + t[3] * o + t[5];
    }
}
function hV(e, t) {
  var r = e.getUpdatedPathProxy(), n = t.getUpdatedPathProxy(), i = dbe(C_(r), C_(n)), a = i[0], o = i[1], s = e.getComputedTransform(), l = t.getComputedTransform();
  function u() {
    this.transform = null;
  }
  s && y4(a, s), l && y4(o, l), Um(t, "updateTransform", { replace: u }), t.transform = null;
  var c = vbe(a, o, 10, Math.PI), f = [];
  Um(t, "buildPath", { replace: function(d) {
    for (var h = t.__morphT, p = 1 - h, v = [], g = 0; g < c.length; g++) {
      var m = c[g], y = m.from, b = m.to, w = m.rotation * h, _ = m.fromCp, S = m.toCp, C = Math.sin(w), A = Math.cos(w);
      Rd(v, _, S, h);
      for (var M = 0; M < y.length; M += 2) {
        var D = y[M], N = y[M + 1], R = b[M], O = b[M + 1], E = D * p + R * h, L = N * p + O * h;
        f[M] = E * A - L * C + v[0], f[M + 1] = E * C + L * A + v[1];
      }
      var I = f[0], P = f[1];
      d.moveTo(I, P);
      for (var M = 2; M < y.length; ) {
        var R = f[M++], O = f[M++], k = f[M++], z = f[M++], V = f[M++], B = f[M++];
        I === R && P === O && k === V && z === B ? d.lineTo(V, B) : d.bezierCurveTo(R, O, k, z, V, B), I = V, P = B;
      }
    }
  } });
}
function uA(e, t, r) {
  if (!e || !t)
    return t;
  var n = r.done, i = r.during;
  hV(e, t), t.__morphT = 0;
  function a() {
    Yd(t, "buildPath"), Yd(t, "updateTransform"), t.__morphT = -1, t.createPathProxy(), t.dirtyShape();
  }
  return t.animateTo({
    __morphT: 1
  }, Ie({
    during: function(o) {
      t.dirtyShape(), i && i(o);
    },
    done: function() {
      a(), n && n();
    }
  }, r)), t;
}
function gbe(e, t, r, n, i, a) {
  var o = 16;
  e = i === r ? 0 : Math.round(32767 * (e - r) / (i - r)), t = a === n ? 0 : Math.round(32767 * (t - n) / (a - n));
  for (var s = 0, l, u = (1 << o) / 2; u > 0; u /= 2) {
    var c = 0, f = 0;
    (e & u) > 0 && (c = 1), (t & u) > 0 && (f = 1), s += u * u * (3 * c ^ f), f === 0 && (c === 1 && (e = u - 1 - e, t = u - 1 - t), l = e, e = t, t = l);
  }
  return s;
}
function Ym(e) {
  var t = 1 / 0, r = 1 / 0, n = -1 / 0, i = -1 / 0, a = ue(e, function(s) {
    var l = s.getBoundingRect(), u = s.getComputedTransform(), c = l.x + l.width / 2 + (u ? u[4] : 0), f = l.y + l.height / 2 + (u ? u[5] : 0);
    return t = Math.min(c, t), r = Math.min(f, r), n = Math.max(c, n), i = Math.max(f, i), [c, f];
  }), o = ue(a, function(s, l) {
    return {
      cp: s,
      z: gbe(s[0], s[1], t, r, n, i),
      path: e[l]
    };
  });
  return o.sort(function(s, l) {
    return s.z - l.z;
  }).map(function(s) {
    return s.path;
  });
}
function pV(e) {
  return cbe(e.path, e.count);
}
function A_() {
  return {
    fromIndividuals: [],
    toIndividuals: [],
    count: 0
  };
}
function mbe(e, t, r) {
  var n = [];
  function i(_) {
    for (var S = 0; S < _.length; S++) {
      var C = _[S];
      Wm(C) ? i(C.childrenRef()) : C instanceof lt && n.push(C);
    }
  }
  i(e);
  var a = n.length;
  if (!a)
    return A_();
  var o = r.dividePath || pV, s = o({
    path: t,
    count: a
  });
  if (s.length !== a)
    return console.error("Invalid morphing: unmatched splitted path"), A_();
  n = Ym(n), s = Ym(s);
  for (var l = r.done, u = r.during, c = r.individualDelay, f = new Va(), d = 0; d < a; d++) {
    var h = n[d], p = s[d];
    p.parent = t, p.copyTransform(f), c || hV(h, p);
  }
  t.__isCombineMorphing = !0, t.childrenRef = function() {
    return s;
  };
  function v(_) {
    for (var S = 0; S < s.length; S++)
      s[S].addSelfToZr(_);
  }
  Um(t, "addSelfToZr", {
    after: function(_) {
      v(_);
    }
  }), Um(t, "removeSelfFromZr", {
    after: function(_) {
      for (var S = 0; S < s.length; S++)
        s[S].removeSelfFromZr(_);
    }
  });
  function g() {
    t.__isCombineMorphing = !1, t.__morphT = -1, t.childrenRef = null, Yd(t, "addSelfToZr"), Yd(t, "removeSelfFromZr");
  }
  var m = s.length;
  if (c)
    for (var y = m, b = function() {
      y--, y === 0 && (g(), l && l());
    }, d = 0; d < m; d++) {
      var w = c ? Ie({
        delay: (r.delay || 0) + c(d, m, n[d], s[d]),
        done: b
      }, r) : r;
      uA(n[d], s[d], w);
    }
  else
    t.__morphT = 0, t.animateTo({
      __morphT: 1
    }, Ie({
      during: function(_) {
        for (var S = 0; S < m; S++) {
          var C = s[S];
          C.__morphT = t.__morphT, C.dirtyShape();
        }
        u && u(_);
      },
      done: function() {
        g();
        for (var _ = 0; _ < e.length; _++)
          Yd(e[_], "updateTransform");
        l && l();
      }
    }, r));
  return t.__zr && v(t.__zr), {
    fromIndividuals: n,
    toIndividuals: s,
    count: m
  };
}
function ybe(e, t, r) {
  var n = t.length, i = [], a = r.dividePath || pV;
  function o(h) {
    for (var p = 0; p < h.length; p++) {
      var v = h[p];
      Wm(v) ? o(v.childrenRef()) : v instanceof lt && i.push(v);
    }
  }
  if (Wm(e)) {
    o(e.childrenRef());
    var s = i.length;
    if (s < n)
      for (var l = 0, u = s; u < n; u++)
        i.push(vC(i[l++ % s]));
    i.length = n;
  } else {
    i = a({ path: e, count: n });
    for (var c = e.getComputedTransform(), u = 0; u < i.length; u++)
      i[u].setLocalTransform(c);
    if (i.length !== n)
      return console.error("Invalid morphing: unmatched splitted path"), A_();
  }
  i = Ym(i), t = Ym(t);
  for (var f = r.individualDelay, u = 0; u < n; u++) {
    var d = f ? Ie({
      delay: (r.delay || 0) + f(u, n, i[u], t[u])
    }, r) : r;
    uA(i[u], t[u], d);
  }
  return {
    fromIndividuals: i,
    toIndividuals: t,
    count: t.length
  };
}
function x4(e) {
  return le(e[0]);
}
function b4(e, t) {
  for (var r = [], n = e.length, i = 0; i < n; i++)
    r.push({
      one: e[i],
      many: []
    });
  for (var i = 0; i < t.length; i++) {
    var a = t[i].length, o = void 0;
    for (o = 0; o < a; o++)
      r[o % n].many.push(t[i][o]);
  }
  for (var s = 0, i = n - 1; i >= 0; i--)
    if (!r[i].many.length) {
      var l = r[s].many;
      if (l.length <= 1)
        if (s)
          s = 0;
        else
          return r;
      var a = l.length, u = Math.ceil(a / 2);
      r[i].many = l.slice(u, a), r[s].many = l.slice(0, u), s++;
    }
  return r;
}
var xbe = {
  clone: function(e) {
    for (var t = [], r = 1 - Math.pow(1 - e.path.style.opacity, 1 / e.count), n = 0; n < e.count; n++) {
      var i = vC(e.path);
      i.setStyle("opacity", r), t.push(i);
    }
    return t;
  },
  // Use the default divider
  split: null
};
function Ib(e, t, r, n, i, a) {
  if (!e.length || !t.length)
    return;
  var o = uf("update", n, i);
  if (!(o && o.duration > 0))
    return;
  var s = n.getModel("universalTransition").get("delay"), l = Object.assign({
    // Need to setToFinal so the further calculation based on the style can be correct.
    // Like emphasis color.
    setToFinal: !0
  }, o), u, c;
  x4(e) && (u = e, c = t), x4(t) && (u = t, c = e);
  function f(m, y, b, w, _) {
    var S = m.many, C = m.one;
    if (S.length === 1 && !_) {
      var A = y ? S[0] : C, M = y ? C : S[0];
      if (Wm(A))
        f({
          many: [A],
          one: M
        }, !0, b, w, !0);
      else {
        var D = s ? Ie({
          delay: s(b, w)
        }, l) : l;
        uA(A, M, D), a(A, M, A, M, D);
      }
    } else
      for (var N = Ie({
        dividePath: xbe[r],
        individualDelay: s && function(P, k, z, V) {
          return s(P + b, w);
        }
      }, l), R = y ? mbe(S, C, N) : ybe(C, S, N), O = R.fromIndividuals, E = R.toIndividuals, L = O.length, I = 0; I < L; I++) {
        var D = s ? Ie({
          delay: s(I, L)
        }, l) : l;
        a(O[I], E[I], y ? S[I] : m.one, y ? m.one : S[I], D);
      }
  }
  for (var d = u ? u === e : e.length > t.length, h = u ? b4(c, u) : b4(d ? t : e, [d ? e : t]), p = 0, v = 0; v < h.length; v++)
    p += h[v].many.length;
  for (var g = 0, v = 0; v < h.length; v++)
    f(h[v], d, g, p), g += h[v].many.length;
}
function Js(e) {
  if (!e)
    return [];
  if (le(e)) {
    for (var t = [], r = 0; r < e.length; r++)
      t.push(Js(e[r]));
    return t;
  }
  var n = [];
  return e.traverse(function(i) {
    i instanceof lt && !i.disableMorphing && !i.invisible && !i.ignore && n.push(i);
  }), n;
}
var vV = 1e4, bbe = 0, w4 = 1, _4 = 2, wbe = yt();
function _be(e, t) {
  for (var r = e.dimensions, n = 0; n < r.length; n++) {
    var i = e.getDimensionInfo(r[n]);
    if (i && i.otherDims[t] === 0)
      return r[n];
  }
}
function Sbe(e, t, r) {
  var n = e.getDimensionInfo(r), i = n && n.ordinalMeta;
  if (n) {
    var a = e.get(n.name, t);
    return i && i.categories[a] || a + "";
  }
}
function S4(e, t, r, n) {
  var i = n ? "itemChildGroupId" : "itemGroupId", a = _be(e, i);
  if (a) {
    var o = Sbe(e, t, a);
    return o;
  }
  var s = e.getRawDataItem(t), l = n ? "childGroupId" : "groupId";
  if (s && s[l])
    return s[l] + "";
  if (!n)
    return r || e.getId(t);
}
function C4(e) {
  var t = [];
  return j(e, function(r) {
    var n = r.data, i = r.dataGroupId;
    if (n.count() > vV) {
      process.env.NODE_ENV !== "production" && qt("Universal transition is disabled on large data > 10k.");
      return;
    }
    for (var a = n.getIndices(), o = 0; o < a.length; o++)
      t.push({
        data: n,
        groupId: S4(n, o, i, !1),
        childGroupId: S4(n, o, i, !0),
        divide: r.divide,
        dataIndex: o
      });
  }), t;
}
function Lb(e, t, r) {
  e.traverse(function(n) {
    n instanceof lt && Wt(n, {
      style: {
        opacity: 0
      }
    }, t, {
      dataIndex: r,
      isFrom: !0
    });
  });
}
function Rb(e) {
  if (e.parent) {
    var t = e.getComputedTransform();
    e.setLocalTransform(t), e.parent.remove(e);
  }
}
function ju(e) {
  e.stopAnimation(), e.isGroup && e.traverse(function(t) {
    t.stopAnimation();
  });
}
function Cbe(e, t, r) {
  var n = uf("update", r, t);
  n && e.traverse(function(i) {
    if (i instanceof ri) {
      var a = eie(i);
      a && i.animateFrom({
        style: a
      }, n);
    }
  });
}
function Tbe(e, t) {
  var r = e.length;
  if (r !== t.length)
    return !1;
  for (var n = 0; n < r; n++) {
    var i = e[n], a = t[n];
    if (i.data.getId(i.dataIndex) !== a.data.getId(a.dataIndex))
      return !1;
  }
  return !0;
}
function gV(e, t, r) {
  var n = C4(e), i = C4(t);
  function a(b, w, _, S, C) {
    (_ || b) && w.animateFrom({
      style: _ && _ !== b ? ae(ae({}, _.style), b.style) : b.style
    }, C);
  }
  var o = !1, s = bbe, l = Ce(), u = Ce();
  n.forEach(function(b) {
    b.groupId && l.set(b.groupId, !0), b.childGroupId && u.set(b.childGroupId, !0);
  });
  for (var c = 0; c < i.length; c++) {
    var f = i[c].groupId;
    if (u.get(f)) {
      s = w4;
      break;
    }
    var d = i[c].childGroupId;
    if (d && l.get(d)) {
      s = _4;
      break;
    }
  }
  function h(b, w) {
    return function(_) {
      var S = _.data, C = _.dataIndex;
      return w ? S.getId(C) : b ? s === w4 ? _.childGroupId : _.groupId : s === _4 ? _.childGroupId : _.groupId;
    };
  }
  var p = Tbe(n, i), v = {};
  if (!p)
    for (var c = 0; c < i.length; c++) {
      var g = i[c], m = g.data.getItemGraphicEl(g.dataIndex);
      m && (v[m.id] = !0);
    }
  function y(b, w) {
    var _ = n[w], S = i[b], C = S.data.hostModel, A = _.data.getItemGraphicEl(_.dataIndex), M = S.data.getItemGraphicEl(S.dataIndex);
    if (A === M) {
      M && Cbe(M, S.dataIndex, C);
      return;
    }
    // We can't use the elements that already being morphed
    A && v[A.id] || M && (ju(M), A ? (ju(A), Rb(A), o = !0, Ib(Js(A), Js(M), S.divide, C, b, a)) : Lb(M, C, b));
  }
  new Ja(n, i, h(!0, p), h(!1, p), null, "multiple").update(y).updateManyToOne(function(b, w) {
    var _ = i[b], S = _.data, C = S.hostModel, A = S.getItemGraphicEl(_.dataIndex), M = Ct(ue(w, function(D) {
      return n[D].data.getItemGraphicEl(n[D].dataIndex);
    }), function(D) {
      return D && D !== A && !v[D.id];
    });
    A && (ju(A), M.length ? (j(M, function(D) {
      ju(D), Rb(D);
    }), o = !0, Ib(Js(M), Js(A), _.divide, C, b, a)) : Lb(A, C, _.dataIndex));
  }).updateOneToMany(function(b, w) {
    var _ = n[w], S = _.data.getItemGraphicEl(_.dataIndex);
    if (!(S && v[S.id])) {
      var C = Ct(ue(b, function(M) {
        return i[M].data.getItemGraphicEl(i[M].dataIndex);
      }), function(M) {
        return M && M !== S;
      }), A = i[b[0]].data.hostModel;
      C.length && (j(C, function(M) {
        return ju(M);
      }), S ? (ju(S), Rb(S), o = !0, Ib(
        Js(S),
        Js(C),
        _.divide,
        // Use divide on old.
        A,
        b[0],
        a
      )) : j(C, function(M) {
        return Lb(M, A, b[0]);
      }));
    }
  }).updateManyToMany(function(b, w) {
    new Ja(w, b, function(_) {
      return n[_].data.getId(n[_].dataIndex);
    }, function(_) {
      return i[_].data.getId(i[_].dataIndex);
    }).update(function(_, S) {
      y(b[_], w[S]);
    }).execute();
  }).execute(), o && j(t, function(b) {
    var w = b.data, _ = w.hostModel, S = _ && r.getViewOfSeriesModel(_), C = uf("update", _, 0);
    S && _.isAnimationEnabled() && C && C.duration > 0 && S.group.traverse(function(A) {
      A instanceof lt && !A.animators.length && A.animateFrom({
        style: {
          opacity: 0
        }
      }, C);
    });
  });
}
function T4(e) {
  var t = e.getModel("universalTransition").get("seriesKey");
  return t || e.id;
}
function A4(e) {
  return le(e) ? e.sort().join(",") : e;
}
function Lo(e) {
  if (e.hostModel)
    return e.hostModel.getModel("universalTransition").get("divideShape");
}
function Abe(e, t) {
  var r = Ce(), n = Ce(), i = Ce();
  j(e.oldSeries, function(o, s) {
    var l = e.oldDataGroupIds[s], u = e.oldData[s], c = T4(o), f = A4(c);
    n.set(f, {
      dataGroupId: l,
      data: u
    }), le(c) && j(c, function(d) {
      i.set(d, {
        key: f,
        dataGroupId: l,
        data: u
      });
    });
  });
  function a(o) {
    r.get(o) && qt("Duplicated seriesKey in universalTransition " + o);
  }
  return j(t.updatedSeries, function(o) {
    if (o.isUniversalTransitionEnabled() && o.isAnimationEnabled()) {
      var s = o.get("dataGroupId"), l = o.getData(), u = T4(o), c = A4(u), f = n.get(c);
      if (f)
        process.env.NODE_ENV !== "production" && a(c), r.set(c, {
          oldSeries: [{
            dataGroupId: f.dataGroupId,
            divide: Lo(f.data),
            data: f.data
          }],
          newSeries: [{
            dataGroupId: s,
            divide: Lo(l),
            data: l
          }]
        });
      else if (le(u)) {
        process.env.NODE_ENV !== "production" && a(c);
        var d = [];
        j(u, function(v) {
          var g = n.get(v);
          g.data && d.push({
            dataGroupId: g.dataGroupId,
            divide: Lo(g.data),
            data: g.data
          });
        }), d.length && r.set(c, {
          oldSeries: d,
          newSeries: [{
            dataGroupId: s,
            data: l,
            divide: Lo(l)
          }]
        });
      } else {
        var h = i.get(u);
        if (h) {
          var p = r.get(h.key);
          p || (p = {
            oldSeries: [{
              dataGroupId: h.dataGroupId,
              data: h.data,
              divide: Lo(h.data)
            }],
            newSeries: []
          }, r.set(h.key, p)), p.newSeries.push({
            dataGroupId: s,
            data: l,
            divide: Lo(l)
          });
        }
      }
    }
  }), r;
}
function M4(e, t) {
  for (var r = 0; r < e.length; r++) {
    var n = t.seriesIndex != null && t.seriesIndex === e[r].seriesIndex || t.seriesId != null && t.seriesId === e[r].id;
    if (n)
      return r;
  }
}
function Mbe(e, t, r, n) {
  var i = [], a = [];
  j(Ot(e.from), function(o) {
    var s = M4(t.oldSeries, o);
    s >= 0 && i.push({
      dataGroupId: t.oldDataGroupIds[s],
      data: t.oldData[s],
      // TODO can specify divideShape in transition.
      divide: Lo(t.oldData[s]),
      groupIdDim: o.dimension
    });
  }), j(Ot(e.to), function(o) {
    var s = M4(r.updatedSeries, o);
    if (s >= 0) {
      var l = r.updatedSeries[s].getData();
      a.push({
        dataGroupId: t.oldDataGroupIds[s],
        data: l,
        divide: Lo(l),
        groupIdDim: o.dimension
      });
    }
  }), i.length > 0 && a.length > 0 && gV(i, a, n);
}
function Ebe(e) {
  e.registerUpdateLifecycle("series:beforeupdate", function(t, r, n) {
    j(Ot(n.seriesTransition), function(i) {
      j(Ot(i.to), function(a) {
        for (var o = n.updatedSeries, s = 0; s < o.length; s++)
          (a.seriesIndex != null && a.seriesIndex === o[s].seriesIndex || a.seriesId != null && a.seriesId === o[s].id) && (o[s][yg] = !0);
      });
    });
  }), e.registerUpdateLifecycle("series:transition", function(t, r, n) {
    var i = wbe(r);
    if (i.oldSeries && n.updatedSeries && n.optionChanged) {
      var a = n.seriesTransition;
      if (a)
        j(Ot(a), function(h) {
          Mbe(h, i, n, r);
        });
      else {
        var o = Abe(i, n);
        j(o.keys(), function(h) {
          var p = o.get(h);
          gV(p.oldSeries, p.newSeries, r);
        });
      }
      j(n.updatedSeries, function(h) {
        h[yg] && (h[yg] = !1);
      });
    }
    for (var s = t.getSeries(), l = i.oldSeries = [], u = i.oldDataGroupIds = [], c = i.oldData = [], f = 0; f < s.length; f++) {
      var d = s[f].getData();
      d.count() < vV && (l.push(s[f]), u.push(s[f].get("dataGroupId")), c.push(d));
    }
  });
}
ot([Vue]);
ot([Pue]);
ot([ace, bce, Nce, ufe, bfe, ode, Pde, mhe, Vhe, Whe, epe, Zpe, xve, Nve, Uve, Kve, oge, hge, Cge, Nge, Bge, _me]);
ot(Fme);
ot(hye);
ot(hz);
ot(Aye);
ot(Jz);
ot(Nye);
ot(Vye);
ot(A0e);
ot(W0e);
ot(mp);
ot(l1e);
ot(f1e);
ot(w1e);
ot(E1e);
ot(P1e);
ot(B1e);
ot(K1e);
ot(pxe);
ot(rV);
ot(nV);
ot(Pxe);
ot(lV);
ot(uV);
ot(Vxe);
ot(Jxe);
ot(tbe);
ot(Ebe);
ot(eue);
const Dbe = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Axis: ui,
  ChartView: It,
  ComponentModel: at,
  ComponentView: $t,
  List: Xr,
  Model: Tt,
  PRIORITY: _8,
  SeriesModel: zt,
  color: gte,
  connect: lse,
  dataTool: vse,
  dependencies: Goe,
  disConnect: use,
  disconnect: N8,
  dispose: cse,
  env: st,
  extendChartView: Fle,
  extendComponentModel: jle,
  extendComponentView: Vle,
  extendSeriesModel: Ble,
  format: Mle,
  getCoordinateSystemDimensions: dse,
  getInstanceByDom: UC,
  getInstanceById: fse,
  getMap: pse,
  graphic: Ale,
  helper: yle,
  init: sse,
  innerDrawElementOnCanvas: $C,
  matrix: Zee,
  number: Cle,
  parseGeoJSON: zw,
  parseGeoJson: zw,
  registerAction: Pi,
  registerCoordinateSystem: R8,
  registerLayout: P8,
  registerLoading: qC,
  registerLocale: CC,
  registerMap: k8,
  registerPostInit: I8,
  registerPostUpdate: L8,
  registerPreprocessor: ZC,
  registerProcessor: XC,
  registerTheme: YC,
  registerTransform: O8,
  registerUpdateLifecycle: r0,
  registerVisual: ys,
  setCanvasCreator: hse,
  setPlatformAPI: Lk,
  throttle: e0,
  time: Tle,
  use: ot,
  util: Ele,
  vector: Pee,
  version: Hoe,
  zrUtil: Mee,
  zrender: qte
}, Symbol.toStringTag, { value: "Module" }));
var Nl = {}, Qo = {}, mV = {};
(function(e) {
  Object.defineProperty(e, "__esModule", {
    value: !0
  }), e.default = void 0;
  var t = 1, r = function() {
    return "".concat(t++);
  };
  e.default = r;
})(mV);
var v0 = {}, g0 = {}, cA = {};
(function(e) {
  Object.defineProperty(e, "__esModule", {
    value: !0
  }), e.default = void 0;
  var t = function(n) {
    var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 60, a = null;
    return function() {
      for (var o = this, s = arguments.length, l = new Array(s), u = 0; u < s; u++)
        l[u] = arguments[u];
      clearTimeout(a), a = setTimeout(function() {
        n.apply(o, l);
      }, i);
    };
  };
  e.default = t;
})(cA);
var aa = {};
Object.defineProperty(aa, "__esModule", {
  value: !0
});
aa.SizeSensorId = aa.SensorTabIndex = aa.SensorClassName = void 0;
var Nbe = "size-sensor-id";
aa.SizeSensorId = Nbe;
var Ibe = "size-sensor-object";
aa.SensorClassName = Ibe;
var Lbe = "-1";
aa.SensorTabIndex = Lbe;
Object.defineProperty(g0, "__esModule", {
  value: !0
});
g0.createSensor = void 0;
var Rbe = Pbe(cA), Pb = aa;
function Pbe(e) {
  return e && e.__esModule ? e : { default: e };
}
var kbe = function(t, r) {
  var n = void 0, i = [], a = function() {
    getComputedStyle(t).position === "static" && (t.style.position = "relative");
    var f = document.createElement("object");
    return f.onload = function() {
      f.contentDocument.defaultView.addEventListener("resize", o), o();
    }, f.style.display = "block", f.style.position = "absolute", f.style.top = "0", f.style.left = "0", f.style.height = "100%", f.style.width = "100%", f.style.overflow = "hidden", f.style.pointerEvents = "none", f.style.zIndex = "-1", f.style.opacity = "0", f.setAttribute("class", Pb.SensorClassName), f.setAttribute("tabindex", Pb.SensorTabIndex), f.type = "text/html", t.appendChild(f), f.data = "about:blank", f;
  }, o = (0, Rbe.default)(function() {
    i.forEach(function(c) {
      c(t);
    });
  }), s = function(f) {
    n || (n = a()), i.indexOf(f) === -1 && i.push(f);
  }, l = function() {
    n && n.parentNode && (n.contentDocument && n.contentDocument.defaultView.removeEventListener("resize", o), n.parentNode.removeChild(n), t.removeAttribute(Pb.SizeSensorId), n = void 0, i = [], r && r());
  }, u = function(f) {
    var d = i.indexOf(f);
    d !== -1 && i.splice(d, 1), i.length === 0 && n && l();
  };
  return {
    element: t,
    bind: s,
    destroy: l,
    unbind: u
  };
};
g0.createSensor = kbe;
var m0 = {};
Object.defineProperty(m0, "__esModule", {
  value: !0
});
m0.createSensor = void 0;
var Obe = aa, zbe = jbe(cA);
function jbe(e) {
  return e && e.__esModule ? e : { default: e };
}
var Vbe = function(t, r) {
  var n = void 0, i = [], a = (0, zbe.default)(function() {
    i.forEach(function(c) {
      c(t);
    });
  }), o = function() {
    var f = new ResizeObserver(a);
    return f.observe(t), a(), f;
  }, s = function(f) {
    n || (n = o()), i.indexOf(f) === -1 && i.push(f);
  }, l = function() {
    n.disconnect(), i = [], n = void 0, t.removeAttribute(Obe.SizeSensorId), r && r();
  }, u = function(f) {
    var d = i.indexOf(f);
    d !== -1 && i.splice(d, 1), i.length === 0 && n && l();
  };
  return {
    element: t,
    bind: s,
    destroy: l,
    unbind: u
  };
};
m0.createSensor = Vbe;
Object.defineProperty(v0, "__esModule", {
  value: !0
});
v0.createSensor = void 0;
var Bbe = g0, Fbe = m0, $be = typeof ResizeObserver < "u" ? Fbe.createSensor : Bbe.createSensor;
v0.createSensor = $be;
Object.defineProperty(Qo, "__esModule", {
  value: !0
});
Qo.removeSensor = Qo.getSensor = Qo.Sensors = void 0;
var Hbe = Wbe(mV), Gbe = v0, M_ = aa;
function Wbe(e) {
  return e && e.__esModule ? e : { default: e };
}
var xc = {};
Qo.Sensors = xc;
function yV(e) {
  e && xc[e] && delete xc[e];
}
var Ube = function(t) {
  var r = t.getAttribute(M_.SizeSensorId);
  if (r && xc[r])
    return xc[r];
  var n = (0, Hbe.default)();
  t.setAttribute(M_.SizeSensorId, n);
  var i = (0, Gbe.createSensor)(t, function() {
    return yV(n);
  });
  return xc[n] = i, i;
};
Qo.getSensor = Ube;
var Ybe = function(t) {
  var r = t.element.getAttribute(M_.SizeSensorId);
  t.destroy(), yV(r);
};
Qo.removeSensor = Ybe;
Object.defineProperty(Nl, "__esModule", {
  value: !0
});
Nl.ver = bV = Nl.clear = xV = Nl.bind = void 0;
var E_ = Qo, Zbe = function(t, r) {
  var n = (0, E_.getSensor)(t);
  return n.bind(r), function() {
    n.unbind(r);
  };
}, xV = Nl.bind = Zbe, Xbe = function(t) {
  var r = (0, E_.getSensor)(t);
  (0, E_.removeSensor)(r);
}, bV = Nl.clear = Xbe, Kbe = "1.0.2";
Nl.ver = Kbe;
function E4(e, t) {
  var r = {};
  return t.forEach(function(n) {
    r[n] = e[n];
  }), r;
}
function kb(e) {
  return typeof e == "function";
}
function D4(e) {
  return typeof e == "string";
}
var qbe = function e(t, r) {
  if (t === r) return !0;
  if (t && r && typeof t == "object" && typeof r == "object") {
    if (t.constructor !== r.constructor) return !1;
    var n, i, a;
    if (Array.isArray(t)) {
      if (n = t.length, n != r.length) return !1;
      for (i = n; i-- !== 0; )
        if (!e(t[i], r[i])) return !1;
      return !0;
    }
    if (t.constructor === RegExp) return t.source === r.source && t.flags === r.flags;
    if (t.valueOf !== Object.prototype.valueOf) return t.valueOf() === r.valueOf();
    if (t.toString !== Object.prototype.toString) return t.toString() === r.toString();
    if (a = Object.keys(t), n = a.length, n !== Object.keys(r).length) return !1;
    for (i = n; i-- !== 0; )
      if (!Object.prototype.hasOwnProperty.call(r, a[i])) return !1;
    for (i = n; i-- !== 0; ) {
      var o = a[i];
      if (!e(t[o], r[o])) return !1;
    }
    return !0;
  }
  return t !== t && r !== r;
};
const Vu = /* @__PURE__ */ lP(qbe);
var Jbe = (
  /** @class */
  function(e) {
    Dk(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.echarts = r.echarts, n.ele = null, n.isInitialResize = !0, n;
    }
    return t.prototype.componentDidMount = function() {
      this.renderNewEcharts();
    }, t.prototype.componentDidUpdate = function(r) {
      var n = this.props.shouldSetOption;
      if (!(kb(n) && !n(r, this.props))) {
        if (!Vu(r.theme, this.props.theme) || !Vu(r.opts, this.props.opts)) {
          this.dispose(), this.renderNewEcharts();
          return;
        }
        var i = this.getEchartsInstance();
        Vu(r.onEvents, this.props.onEvents) || (this.offEvents(i, r.onEvents), this.bindEvents(i, this.props.onEvents));
        var a = ["option", "notMerge", "replaceMerge", "lazyUpdate", "showLoading", "loadingOption"];
        Vu(E4(this.props, a), E4(r, a)) || this.updateEChartsOption(), (!Vu(r.style, this.props.style) || !Vu(r.className, this.props.className)) && this.resize();
      }
    }, t.prototype.componentWillUnmount = function() {
      this.dispose();
    }, t.prototype.initEchartsInstance = function() {
      return SE(this, void 0, void 0, function() {
        var r = this;
        return CE(this, function(n) {
          return [2, new Promise(function(i) {
            r.echarts.init(r.ele, r.props.theme, r.props.opts);
            var a = r.getEchartsInstance();
            a.on("finished", function() {
              var o = r.ele.clientWidth, s = r.ele.clientHeight;
              r.echarts.dispose(r.ele);
              var l = wr({ width: o, height: s }, r.props.opts);
              i(r.echarts.init(r.ele, r.props.theme, l));
            });
          })];
        });
      });
    }, t.prototype.getEchartsInstance = function() {
      return this.echarts.getInstanceByDom(this.ele);
    }, t.prototype.dispose = function() {
      if (this.ele) {
        try {
          bV(this.ele);
        } catch (r) {
          console.warn(r);
        }
        this.echarts.dispose(this.ele);
      }
    }, t.prototype.renderNewEcharts = function() {
      return SE(this, void 0, void 0, function() {
        var r, n, i, a, o, s, l = this;
        return CE(this, function(u) {
          switch (u.label) {
            case 0:
              return r = this.props, n = r.onEvents, i = r.onChartReady, a = r.autoResize, o = a === void 0 ? !0 : a, [4, this.initEchartsInstance()];
            case 1:
              return u.sent(), s = this.updateEChartsOption(), this.bindEvents(s, n || {}), kb(i) && i(s), this.ele && o && xV(this.ele, function() {
                l.resize();
              }), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.bindEvents = function(r, n) {
      function i(o, s) {
        D4(o) && kb(s) && r.on(o, function(l) {
          s(l, r);
        });
      }
      for (var a in n)
        Object.prototype.hasOwnProperty.call(n, a) && i(a, n[a]);
    }, t.prototype.offEvents = function(r, n) {
      if (n)
        for (var i in n)
          D4(i) && r.off(i, n[i]);
    }, t.prototype.updateEChartsOption = function() {
      var r = this.props, n = r.option, i = r.notMerge, a = i === void 0 ? !1 : i, o = r.replaceMerge, s = o === void 0 ? null : o, l = r.lazyUpdate, u = l === void 0 ? !1 : l, c = r.showLoading, f = r.loadingOption, d = f === void 0 ? null : f, h = this.getEchartsInstance();
      return h.setOption(n, { notMerge: a, replaceMerge: s, lazyUpdate: u }), c ? h.showLoading(d) : h.hideLoading(), h;
    }, t.prototype.resize = function() {
      var r = this.getEchartsInstance();
      if (!this.isInitialResize)
        try {
          r.resize({
            width: "auto",
            height: "auto"
          });
        } catch (n) {
          console.warn(n);
        }
      this.isInitialResize = !1;
    }, t.prototype.render = function() {
      var r = this, n = this.props, i = n.style, a = n.className, o = a === void 0 ? "" : a;
      n.echarts, n.option, n.theme, n.notMerge, n.replaceMerge, n.lazyUpdate, n.showLoading, n.loadingOption, n.opts, n.onChartReady, n.onEvents, n.shouldSetOption, n.autoResize;
      var s = Cy(n, ["style", "className", "echarts", "option", "theme", "notMerge", "replaceMerge", "lazyUpdate", "showLoading", "loadingOption", "opts", "onChartReady", "onEvents", "shouldSetOption", "autoResize"]), l = wr({ height: 300 }, i);
      return se.createElement("div", wr({ ref: function(u) {
        r.ele = u;
      }, style: l, className: "echarts-for-react ".concat(o) }, s));
    }, t;
  }(mG)
), Qbe = (
  /** @class */
  function(e) {
    Dk(t, e);
    function t(r) {
      var n = e.call(this, r) || this;
      return n.echarts = Dbe, n;
    }
    return t;
  }(Jbe)
);
const Ob = (e, t) => {
  var i, a;
  const r = (i = e.meta) == null ? void 0 : i.target;
  if (r != null && r.instanceId && r.instanceId !== t)
    return !1;
  const n = (a = e.payload) == null ? void 0 : a.instanceId;
  return !(n && n !== t);
}, zb = (e) => {
  const t = e.current;
  if (!t || typeof t.getEchartsInstance != "function")
    return null;
  try {
    return t.getEchartsInstance();
  } catch {
    return null;
  }
}, e2e = (e) => {
  const { instanceId: t, chartRef: r } = e;
  al(
    "AI.CHART.SET_RANGE",
    (n) => {
      if (!Ob(n, t)) return;
      const { from: i, to: a } = n.payload || {};
      if (typeof i != "number" && typeof a != "number") return;
      const o = zb(r);
      if (!o) return;
      const s = { type: "dataZoom" };
      typeof i == "number" && (s.start = i), typeof a == "number" && (s.end = a), o.dispatchAction(s);
    },
    [t, r]
  ), al(
    "AI.CHART.TOGGLE_SERIES",
    (n) => {
      if (!Ob(n, t)) return;
      const { seriesKey: i, visible: a } = n.payload || {};
      if (!i || typeof a != "boolean") return;
      const o = zb(r);
      o && o.dispatchAction({
        type: a ? "legendSelect" : "legendUnSelect",
        name: i
      });
    },
    [t, r]
  ), al(
    "AI.CHART.HIGHLIGHT_POINTS",
    (n) => {
      if (!Ob(n, t)) return;
      const { ids: i } = n.payload || {};
      if (!Array.isArray(i) || i.length === 0) return;
      const a = zb(r);
      a && i.forEach((o) => {
        a.dispatchAction({
          type: "highlight",
          name: String(o)
        });
      });
    },
    [t, r]
  );
}, Xt = ({
  option: e,
  height: t = 320,
  className: r,
  instanceId: n,
  notMerge: i = !0,
  lazyUpdate: a = !0,
  extraEvents: o,
  onChartReadyInstance: s
}) => {
  const l = qc(), u = T.useRef(null);
  u.current || (u.current = Jc());
  const c = n ?? u.current, f = {
    width: "100%",
    height: typeof t == "number" ? `${t}px` : t
  }, d = T.useRef(null);
  e2e({
    instanceId: c,
    chartRef: d
  });
  const h = T.useCallback(
    (y) => {
      l(
        "CHART.INIT",
        { instanceId: c },
        { meta: { component: "EChart", instanceId: c } }
      ), s == null || s(y);
    },
    [l, c, s]
  ), p = T.useCallback(
    (y) => {
      const b = y && Array.isArray(y.batch) && y.batch[0] || y || {}, w = {
        instanceId: c,
        eventName: "dataZoom"
      };
      typeof b.start == "number" && (w.start = b.start), typeof b.end == "number" && (w.end = b.end), b.startValue != null && (w.startValue = b.startValue), b.endValue != null && (w.endValue = b.endValue), l(
        "CHART.RANGE_CHANGE",
        w,
        { meta: { component: "EChart", instanceId: c } }
      );
    },
    [l, c]
  ), v = T.useCallback(
    (y) => {
      const { name: b, selected: w } = y || {};
      l(
        "CHART.SERIES_TOGGLE",
        {
          instanceId: c,
          seriesName: b,
          visible: w ? w[b] : void 0,
          selected: w
        },
        { meta: { component: "EChart", instanceId: c } }
      );
    },
    [l, c]
  ), g = T.useCallback(
    (y) => {
      const b = {
        component: "EChart",
        action: "point_click",
        instanceId: c,
        seriesName: y == null ? void 0 : y.seriesName,
        dataIndex: y == null ? void 0 : y.dataIndex,
        value: y == null ? void 0 : y.value,
        name: y == null ? void 0 : y.name
      };
      l(Il.UI_CLICK, b, {
        meta: { component: "EChart", instanceId: c }
      }), l(
        "CHART.POINT_SELECT",
        {
          instanceId: c,
          seriesName: y == null ? void 0 : y.seriesName,
          dataIndex: y == null ? void 0 : y.dataIndex,
          value: y == null ? void 0 : y.value,
          name: y == null ? void 0 : y.name
        },
        { meta: { component: "EChart", instanceId: c } }
      );
    },
    [l, c]
  ), m = T.useMemo(() => {
    const y = {
      dataZoom: p,
      legendselectchanged: v,
      click: g
    };
    if (!o) return y;
    const b = { ...o };
    return Object.keys(y).forEach((w) => {
      const _ = y[w], S = o[w];
      S ? b[w] = (C) => {
        _(C), S(C);
      } : b[w] = _;
    }), b;
  }, [o, g, p, v]);
  return /* @__PURE__ */ x.jsx(
    Qbe,
    {
      ref: d,
      option: e,
      style: f,
      className: me(fe("w-full", r)),
      notMerge: i,
      lazyUpdate: a,
      onChartReady: h,
      onEvents: m
    }
  );
};
Xt.displayName = "EChartsBase";
const t2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: { trigger: "axis" },
      legend: { show: e.series.length > 1 },
      grid: { left: 40, right: 16, top: 40, bottom: 32 },
      xAxis: {
        type: "category",
        boundaryGap: !1,
        data: e.xLabels
      },
      yAxis: {
        type: "value",
        splitLine: { lineStyle: { type: "dashed" } }
      },
      series: e.series.map((a) => ({
        name: a.name,
        type: "line",
        smooth: !0,
        areaStyle: {},
        stack: e.stacked ? "total" : void 0,
        emphasis: { focus: "series" },
        data: a.data
      }))
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
t2e.displayName = "AreaChart";
const r2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: { trigger: "axis" },
      legend: { show: e.series.length > 1 },
      grid: { left: 40, right: 16, top: 40, bottom: 32 },
      xAxis: {
        type: "category",
        boundaryGap: !1,
        data: e.xLabels
      },
      yAxis: {
        type: "value",
        splitLine: { lineStyle: { type: "dashed" } }
      },
      series: e.series.map((a) => ({
        name: a.name,
        type: "line",
        smooth: e.smooth ?? !0,
        stack: e.stacked ? "total" : void 0,
        emphasis: { focus: "series" },
        data: a.data
      }))
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
r2e.displayName = "LineChart";
const n2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.orientation !== "horizontal", o = a ? { type: "category", data: e.xLabels } : { type: "value" }, s = a ? { type: "value" } : { type: "category", data: e.xLabels };
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis", axisPointer: { type: "shadow" } },
        legend: { show: e.series.length > 1 },
        grid: { left: 40, right: 16, top: 40, bottom: 32 },
        xAxis: o,
        yAxis: s,
        series: e.series.map((l) => ({
          name: l.name,
          type: "bar",
          stack: e.stacked ? "total" : void 0,
          emphasis: { focus: "series" },
          data: l.data
        }))
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
n2e.displayName = "BarChart";
const i2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = `${e.innerRadiusPercent ?? 50}%`;
      return {
        title: e.title ? { text: e.title, left: "center", top: 8, textStyle: { fontSize: 14 } } : void 0,
        tooltip: { trigger: "item", formatter: "{b}: {c} ({d}%)" },
        legend: { orient: "vertical", left: "left", top: "middle" },
        series: [
          {
            name: e.title,
            type: "pie",
            radius: [a, "70%"],
            avoidLabelOverlap: !1,
            itemStyle: {
              borderRadius: 8,
              borderColor: "#fff",
              borderWidth: 2
            },
            label: { show: !1, position: "center" },
            emphasis: {
              label: {
                show: !0,
                fontSize: 14,
                fontWeight: "bold"
              }
            },
            labelLine: { show: !1 },
            data: e.data
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
i2e.displayName = "DonutChart";
const a2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title, left: "center", top: 8 } : void 0,
      tooltip: { trigger: "item", formatter: "{b}: {c} ({d}%)" },
      legend: { orient: "vertical", left: "left", top: "middle" },
      series: [
        {
          name: e.title,
          type: "pie",
          radius: "70%",
          center: ["50%", "55%"],
          avoidLabelOverlap: !0,
          label: { show: !0, formatter: `{b}
{d}%` },
          labelLine: { show: !0 },
          data: e.data
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
a2e.displayName = "PieChart";
const o2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.orientation !== "horizontal", o = a ? { type: "category", data: e.xLabels } : { type: "value" }, s = a ? { type: "value" } : { type: "category", data: e.xLabels };
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis", axisPointer: { type: "shadow" } },
        legend: { show: e.series.length > 1 },
        grid: { left: 40, right: 16, top: 40, bottom: 32 },
        xAxis: o,
        yAxis: s,
        series: e.series.map((l) => ({
          name: l.name,
          type: "bar",
          stack: "total",
          emphasis: { focus: "series" },
          data: l.data
        }))
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
o2e.displayName = "StackedChart";
const s2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: {
        trigger: "item",
        formatter: (a) => {
          const [o, s] = a.value;
          return `${a.seriesName || ""}<br/>X: ${o}<br/>Y: ${s}`;
        }
      },
      xAxis: { type: "value", name: e.xAxisLabel },
      yAxis: { type: "value", name: e.yAxisLabel },
      series: e.series.map((a) => ({
        name: a.name,
        type: "scatter",
        data: a.data.map((o) => [o.x, o.y]),
        emphasis: { focus: "series" }
      }))
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
s2e.displayName = "ScatterChart";
const l2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = [
        ...e.barSeries.map((o) => ({
          name: o.name,
          type: "bar",
          yAxisIndex: 0,
          emphasis: { focus: "series" },
          data: o.data
        })),
        ...e.lineSeries.map((o) => ({
          name: o.name,
          type: "line",
          yAxisIndex: 1,
          smooth: !0,
          showSymbol: !1,
          emphasis: { focus: "series" },
          data: o.data
        }))
      ];
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis" },
        legend: { show: !0 },
        grid: { left: 48, right: 48, top: 40, bottom: 32 },
        xAxis: {
          type: "category",
          data: e.xLabels
        },
        yAxis: [
          {
            type: "value",
            name: e.leftAxisLabel,
            splitLine: { lineStyle: { type: "dashed" } }
          },
          {
            type: "value",
            name: e.rightAxisLabel,
            splitLine: { show: !1 }
          }
        ],
        series: a
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
l2e.displayName = "ComboChart";
const u2e = (e) => (e.yAxes && e.yAxes.length > 0 ? e.yAxes : [{ position: "left" }]).map((r, n) => {
  const i = r.position ?? (n % 2 === 0 ? "left" : "right");
  return {
    type: "value",
    name: r.label,
    position: i,
    min: r.min,
    max: r.max,
    splitLine: n === 0 ? { lineStyle: { type: "dashed" } } : { show: !1 }
  };
}), c2e = (e) => {
  const t = e.yAxisIndex ?? 0, r = { focus: "series" };
  return e.type === "bar" ? {
    name: e.name,
    type: "bar",
    yAxisIndex: t,
    stack: e.stack,
    emphasis: r,
    data: e.data
  } : e.type === "scatter" ? {
    name: e.name,
    type: "scatter",
    yAxisIndex: t,
    emphasis: r,
    data: e.data
  } : {
    name: e.name,
    type: "line",
    yAxisIndex: t,
    smooth: e.smooth ?? !0,
    showSymbol: !1,
    stack: e.stack,
    areaStyle: e.area ? {} : void 0,
    emphasis: r,
    data: e.data
  };
}, f2e = ({
  config: e,
  height: t,
  className: r,
  instanceId: n,
  notMerge: i,
  lazyUpdate: a,
  extraEvents: o,
  onChartReadyInstance: s
}) => {
  const l = T.useMemo(
    () => {
      const u = u2e(e), c = e.series.map(c2e);
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis" },
        legend: { show: e.series.length > 1 },
        grid: { left: 48, right: 48, top: 40, bottom: 32 },
        xAxis: {
          type: "category",
          data: e.xLabels
        },
        yAxis: u,
        series: c
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(
    Xt,
    {
      option: l,
      height: t,
      className: r,
      instanceId: n,
      notMerge: i,
      lazyUpdate: a,
      extraEvents: o,
      onChartReadyInstance: s
    }
  );
};
f2e.displayName = "GenericComboChart";
const d2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: { trigger: "item", formatter: "{b}: {c} ({d}%)" },
      legend: { show: !0 },
      series: [
        {
          name: e.title,
          type: "funnel",
          left: "10%",
          top: 40,
          bottom: 20,
          width: "80%",
          min: 0,
          maxSize: "100%",
          sort: "descending",
          gap: 2,
          label: { show: !0, formatter: "{b}: {c}" },
          labelLine: { length: 10, lineStyle: { width: 1, type: "solid" } },
          itemStyle: { borderColor: "#fff", borderWidth: 1 },
          data: e.data
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
d2e.displayName = "FunnelChart";
const h2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      var d;
      const { xLabels: a, yLabels: o, values: s } = e, l = [];
      let u = Number.POSITIVE_INFINITY, c = Number.NEGATIVE_INFINITY;
      for (let h = 0; h < o.length; h += 1)
        for (let p = 0; p < a.length; p += 1) {
          const v = ((d = s[h]) == null ? void 0 : d[p]) ?? 0;
          l.push([p, h, v]), v < u && (u = v), v > c && (c = v);
        }
      return (!Number.isFinite(u) || !Number.isFinite(c)) && (u = 0, c = 1), {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { position: "top" },
        grid: { height: "70%", top: 40 },
        xAxis: {
          type: "category",
          data: a,
          splitArea: { show: !0 }
        },
        yAxis: {
          type: "category",
          data: o,
          splitArea: { show: !0 }
        },
        visualMap: {
          min: u,
          max: c,
          calculable: !0,
          orient: "vertical",
          left: "right",
          top: "middle"
        },
        series: [
          {
            name: e.title,
            type: "heatmap",
            data: l,
            label: { show: !1 },
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowColor: "rgba(0, 0, 0, 0.5)"
              }
            }
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
h2e.displayName = "HeatmapChart";
const p2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.data.map((c) => c.label), o = [], s = [];
      let l = 0;
      return e.data.forEach((c) => {
        const f = c.value;
        f >= 0 ? (o.push(l), s.push(f), l += f) : (o.push(l + f), s.push(-f), l += f);
      }), {
        title: e.title ? { text: e.title } : void 0,
        tooltip: {
          trigger: "axis",
          axisPointer: { type: "shadow" },
          formatter: (c) => {
            const f = Array.isArray(c) ? c[1] : c;
            return `${f.name}: ${e.data[f.dataIndex].value}`;
          }
        },
        grid: { left: 40, right: 16, top: 40, bottom: 32 },
        xAxis: {
          type: "category",
          splitLine: { show: !1 },
          data: a
        },
        yAxis: {
          type: "value"
        },
        series: [
          {
            name: "assist",
            type: "bar",
            stack: "total",
            itemStyle: {
              borderColor: "transparent",
              color: "transparent"
            },
            emphasis: {
              itemStyle: {
                borderColor: "transparent",
                color: "transparent"
              }
            },
            data: o
          },
          {
            name: "value",
            type: "bar",
            stack: "total",
            data: s
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
p2e.displayName = "WaterfallChart";
const v2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      var l;
      const a = e.series.map((u) => ({
        name: u.name,
        type: "boxplot",
        data: u.data
      })), o = e.outliers && e.outliers.length > 0 ? [
        {
          name: "Outlier",
          type: "scatter",
          data: e.outliers
        }
      ] : [], s = [...a, ...o];
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "item" },
        legend: { show: e.series.length > 1 || (((l = e.outliers) == null ? void 0 : l.length) ?? 0) > 0 },
        grid: { left: 40, right: 16, top: 40, bottom: 32 },
        xAxis: {
          type: "category",
          data: e.xLabels,
          boundaryGap: !0,
          splitArea: { show: !1 },
          splitLine: { show: !1 }
        },
        yAxis: {
          type: "value",
          splitLine: { lineStyle: { type: "dashed" } }
        },
        series: s
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
v2e.displayName = "BoxplotChart";
const g2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: {},
      legend: { show: e.series.length > 1 },
      radar: {
        indicator: e.indicators
      },
      series: [
        {
          type: "radar",
          data: e.series.map((a) => ({ value: a.values, name: a.name }))
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
g2e.displayName = "RadarChart";
const m2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: {
        trigger: "item",
        formatter: (a) => {
          const [o, s, l] = a.value;
          return `${a.seriesName || ""}<br/>X: ${o}<br/>Y: ${s}<br/>Size: ${l}`;
        }
      },
      xAxis: { type: "value", name: e.xAxisLabel },
      yAxis: { type: "value", name: e.yAxisLabel },
      series: e.series.map((a) => ({
        name: a.name,
        type: "scatter",
        data: a.data.map((o) => [o.x, o.y, o.size]),
        symbolSize: (o) => o[2],
        emphasis: { focus: "series" }
      }))
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
m2e.displayName = "BubbleChart";
const y2e = ({ config: e, height: t = 260, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title, left: "center", top: 8 } : void 0,
      series: [
        {
          type: "gauge",
          min: e.min ?? 0,
          max: e.max ?? 100,
          progress: { show: !0, width: 10 },
          axisLine: { lineStyle: { width: 10 } },
          axisTick: { show: !1 },
          splitLine: { show: !1 },
          axisLabel: { show: !1 },
          anchor: { show: !0, showAbove: !0, size: 12 },
          pointer: { show: !0 },
          detail: {
            valueAnimation: !0,
            formatter: (a) => `${a}${e.unit ? ` ${e.unit}` : ""}`,
            fontSize: 14
          },
          data: [{ value: e.value }]
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
y2e.displayName = "RadialGauge";
const x2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: { trigger: "item", triggerOn: "mousemove" },
      series: [
        {
          type: "sankey",
          data: e.nodes,
          links: e.links,
          emphasis: { focus: "adjacency" },
          lineStyle: { color: "gradient", curveness: 0.5 }
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
x2e.displayName = "SankeyDiagram";
const b2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: {
        formatter: (a) => {
          const o = a.value;
          return `${a.treePathInfo && Array.isArray(a.treePathInfo) ? a.treePathInfo.slice(1).map((l) => l.name).join(" / ") : a.name}<br/>${o}`;
        }
      },
      series: [
        {
          type: "treemap",
          data: e.data,
          roam: !1,
          leafDepth: 2,
          upperLabel: { show: !0, height: 22 },
          label: {
            show: !0,
            position: "inside",
            formatter: (a) => {
              const o = typeof a.value == "number" ? a.value : void 0;
              return o != null ? `${a.name}
${o}` : a.name;
            }
          },
          itemStyle: {
            borderColor: "#ffffff",
            borderWidth: 1,
            gapWidth: 2
          },
          colorMappingBy: "value"
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
b2e.displayName = "TreeMap";
const w2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.data.map(
        (l) => typeof l.time == "string" || typeof l.time == "number" ? l.time : l.time.toISOString()
      ), o = e.data.map((l) => l.value);
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis" },
        xAxis: { type: "category", data: a },
        yAxis: { type: "value" },
        series: [
          {
            type: "line",
            smooth: !0,
            data: o
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
w2e.displayName = "Timeline";
const _2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.year ?? (e.data[0] ? new Date(e.data[0].date).getFullYear() : (/* @__PURE__ */ new Date()).getFullYear()), o = e.data.map((l) => [l.date, l.value]);
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { position: "top" },
        visualMap: {
          min: 0,
          max: Math.max(...e.data.map((l) => l.value), 1),
          calculable: !0,
          orient: "horizontal",
          left: "center",
          top: 20
        },
        calendar: {
          range: a,
          top: 60,
          left: 30,
          right: 30,
          cellSize: ["auto", 18]
        },
        series: [
          {
            type: "heatmap",
            coordinateSystem: "calendar",
            data: o
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
_2e.displayName = "CalendarView";
const S2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      var s;
      const a = [];
      for (let l = 0; l < e.cohorts.length; l += 1)
        for (let u = 0; u < e.periods.length; u += 1) {
          const c = ((s = e.values[l]) == null ? void 0 : s[u]) ?? 0;
          a.push([u, l, c]);
        }
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { position: "top" },
        grid: { height: "70%", top: 40 },
        xAxis: { type: "category", data: e.periods },
        yAxis: { type: "category", data: e.cohorts },
        visualMap: {
          min: 0,
          max: 100,
          calculable: !0,
          orient: "vertical",
          left: "right",
          top: "middle"
        },
        series: [
          {
            type: "heatmap",
            data: a,
            label: { show: !1 }
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
S2e.displayName = "CohortAnalysis";
const C2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = e.items.map((u) => u.name), o = e.items.map((u) => u.value), s = e.items.map((u) => u.target ?? null);
      return {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis" },
        grid: { left: 80, right: 40, top: 40, bottom: 40 },
        xAxis: { type: "value" },
        yAxis: { type: "category", data: a },
        series: [
          {
            name: "Value",
            type: "bar",
            data: o
          },
          {
            name: "Target",
            type: "scatter",
            data: s,
            symbol: "diamond",
            symbolSize: 10
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
C2e.displayName = "MetricComparison";
const T2e = ({ config: e, height: t, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => {
      const a = [...e.data].sort((d, h) => h.value - d.value), o = a.map((d) => d.category), s = a.map((d) => d.value), l = s.reduce((d, h) => d + h, 0) || 1, u = [];
      let c = 0;
      return s.forEach((d) => {
        c += d, u.push(c / l * 100);
      }), {
        title: e.title ? { text: e.title } : void 0,
        tooltip: { trigger: "axis" },
        xAxis: { type: "category", data: o },
        yAxis: [
          { type: "value", name: "Value" },
          { type: "value", name: "Cumulative %", min: 0, max: 100 }
        ],
        series: [
          {
            name: "Value",
            type: "bar",
            data: s
          },
          {
            name: "Cumulative %",
            type: "line",
            yAxisIndex: 1,
            data: u
          }
        ]
      };
    },
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
T2e.displayName = "ParetoChart";
const A2e = ({ config: e }) => {
  const t = T.useMemo(
    () => e.columns.map((n) => ({
      key: n.key,
      label: n.label,
      align: n.align
    })),
    [e.columns]
  ), r = T.useCallback((n, i) => {
    var a, o;
    return ((o = (a = n.id) == null ? void 0 : a.toString) == null ? void 0 : o.call(a)) ?? `${i}`;
  }, []);
  return /* @__PURE__ */ x.jsxs("div", { className: "space-y-3", children: [
    e.title && /* @__PURE__ */ x.jsx("h3", { className: "text-sm font-semibold text-text-primary", children: e.title }),
    /* @__PURE__ */ x.jsx(
      oW,
      {
        columns: t,
        data: e.rows,
        rowKey: r,
        size: "sm",
        striped: !0
      }
    )
  ] });
};
A2e.displayName = "TableAnalytics";
const M2e = ({ config: e, height: t = 400, className: r, instanceId: n }) => {
  const i = T.useMemo(
    () => ({
      title: e.title ? { text: e.title } : void 0,
      tooltip: { trigger: "item" },
      visualMap: {
        min: 0,
        max: Math.max(...e.data.map((a) => a.value), 1),
        left: "left",
        top: "bottom",
        text: ["High", "Low"],
        calculable: !0
      },
      series: [
        {
          type: "map",
          map: e.mapName,
          roam: !0,
          label: { show: !1 },
          data: e.data
        }
      ]
    }),
    [e]
  );
  return /* @__PURE__ */ x.jsx(Xt, { option: i, height: t, className: r, instanceId: n });
};
M2e.displayName = "GeographicMap";
const E2e = (e, t) => {
  if (t <= 0) return e.map(() => null);
  const r = new Array(e.length).fill(null);
  let n = 0;
  for (let i = 0; i < e.length; i += 1)
    n += e[i], i >= t && (n -= e[i - t]), i >= t - 1 && (r[i] = n / t);
  return r;
}, Ag = (e, t) => {
  if (t <= 0) return e.map(() => null);
  const r = new Array(e.length).fill(null), n = 2 / (t + 1);
  let i = null;
  for (let a = 0; a < e.length; a += 1) {
    const o = e[a];
    i == null ? i = o : i = o * n + i * (1 - n), a >= t - 1 && (r[a] = i);
  }
  return r;
}, D2e = (e, t) => {
  const r = t > 0 ? t : 14, n = new Array(e.length).fill(null);
  if (e.length < r + 1) return n;
  let i = 0, a = 0;
  for (let u = 1; u <= r; u += 1) {
    const c = e[u] - e[u - 1];
    c >= 0 ? i += c : a += -c;
  }
  let o = i / r, s = a / r;
  const l = s === 0 ? Number.POSITIVE_INFINITY : o / s;
  n[r] = 100 - 100 / (1 + l);
  for (let u = r + 1; u < e.length; u += 1) {
    const c = e[u] - e[u - 1], f = c > 0 ? c : 0, d = c < 0 ? -c : 0;
    o = (o * (r - 1) + f) / r, s = (s * (r - 1) + d) / r;
    const h = s === 0 ? Number.POSITIVE_INFINITY : o / s;
    n[u] = 100 - 100 / (1 + h);
  }
  return n;
}, N2e = (e, t, r, n) => {
  const i = Ag(e, t), a = Ag(e, r), o = e.map((f, d) => {
    const h = i[d], p = a[d];
    return h == null || p == null ? null : h - p;
  }), s = o.map((f) => f ?? 0), u = Ag(s, n).map((f, d) => o[d] == null ? null : f), c = e.map((f, d) => {
    const h = o[d], p = u[d];
    return h == null || p == null ? null : (h - p) * 2;
  });
  return { dif: o, dea: u, hist: c };
}, N4 = (e) => {
  if (e instanceof Date) return e.toISOString();
  if (typeof e == "number") {
    const t = e < 1e12 ? e * 1e3 : e;
    return new Date(t).toISOString();
  }
  return e;
}, wV = (e, t) => {
  if (t == null) return e;
  if (Array.isArray(t) || typeof t != "object" || e == null || typeof e != "object" || Array.isArray(e)) return t;
  const r = { ...e };
  return Object.keys(t).forEach((n) => {
    r[n] = wV(e[n], t[n]);
  }), r;
}, I2e = (e, t) => t ? typeof t == "function" ? t(e) : wV(e, t) : e, L2e = (e) => e.type === "MA" || e.type === "EMA", R2e = (e) => e.type === "RSI" || e.type === "MACD", P2e = (e) => {
  const t = e.candles ?? [], r = e.showVolume !== !1, n = e.upColor ?? "#16a34a", i = e.downColor ?? "#dc2626", a = t.map((P) => N4(P.time)), o = t.map((P) => [P.open, P.close, P.low, P.high]), s = t.map((P) => P.close), l = t.map((P) => P.volume ?? 0), u = e.indicators ?? [], c = u.filter(L2e), f = u.filter(R2e), d = 1 + (r ? 1 : 0) + f.length, h = 6, p = r ? 2 : 0, v = f.length > 0 ? 2 : 0, g = h + p + v * f.length;
  let m = 6;
  const y = 2, b = [], w = [], _ = [], S = (P, k) => {
    const z = b.length;
    return b.push({ left: 56, right: 16, top: `${m}%`, height: `${P}%` }), w.push({
      type: "category",
      gridIndex: z,
      data: a,
      axisLabel: { show: !!(k != null && k.bottomAxis) },
      axisTick: { show: !1 },
      axisLine: { lineStyle: { color: "#D0D5DD" } }
    }), _.push({
      type: "value",
      gridIndex: z,
      scale: !0,
      splitLine: { lineStyle: { type: "dashed", color: "#EAECF0" } }
    }), m += P + y, z;
  }, C = [], A = Math.max(35, Math.round(h / g * 100) - y * (d - 1));
  if (C.push(A), r) {
    const P = Math.max(12, Math.round(p / g * 100));
    C.push(P);
  }
  for (let P = 0; P < f.length; P += 1) {
    const k = Math.max(14, Math.round(v / g * 100));
    C.push(k);
  }
  if (C.reduce((P, k) => P + k, 0) + y * (C.length - 1) + m > 98) {
    const P = (98 - (y * (C.length - 1) + 6)) / C.reduce((k, z) => k + z, 0);
    for (let k = 0; k < C.length; k += 1) C[k] = Math.max(10, Math.floor(C[k] * P));
  }
  const D = S(C[0], { bottomAxis: d === 1 });
  let N = null;
  if (r) {
    const P = f.length === 0;
    N = S(C[1], { bottomAxis: P }), _[N] = {
      ..._[N],
      splitNumber: 2
    };
  }
  const R = [], O = 1 + (r ? 1 : 0);
  for (let P = 0; P < f.length; P += 1) {
    const k = P === f.length - 1, z = S(C[O + P], { bottomAxis: k });
    R.push(z);
  }
  const E = w.map((P, k) => k), L = [];
  return L.push({
    name: "Price",
    type: "candlestick",
    xAxisIndex: D,
    yAxisIndex: D,
    data: o,
    itemStyle: {
      color: n,
      color0: i,
      borderColor: n,
      borderColor0: i
    }
  }), c.forEach((P) => {
    const k = P.period, z = P.type === "MA" ? E2e(s, k) : Ag(s, k);
    L.push({
      name: P.name ?? `${P.type}${k}`,
      type: "line",
      xAxisIndex: D,
      yAxisIndex: D,
      data: z,
      showSymbol: !1,
      smooth: !0,
      lineStyle: { width: 1.2, color: P.color },
      emphasis: { focus: "series" }
    });
  }), r && N != null && L.push({
    name: "Volume",
    type: "bar",
    xAxisIndex: N,
    yAxisIndex: N,
    data: l,
    itemStyle: {
      color: (P) => {
        const k = (P == null ? void 0 : P.dataIndex) ?? 0, z = t[k];
        return z ? z.close >= z.open ? n : i : "#94a3b8";
      }
    }
  }), f.forEach((P, k) => {
    const z = R[k];
    if (P.type === "RSI") {
      const V = P.period ?? 14, B = D2e(s, V);
      _[z] = {
        ..._[z],
        min: 0,
        max: 100,
        splitNumber: 2
      }, L.push({
        name: P.name ?? `RSI${V}`,
        type: "line",
        xAxisIndex: z,
        yAxisIndex: z,
        data: B,
        showSymbol: !1,
        smooth: !0,
        lineStyle: { width: 1.2, color: P.color ?? "#7c3aed" }
      });
    }
    if (P.type === "MACD") {
      const V = P.fast ?? 12, B = P.slow ?? 26, F = P.signal ?? 9, { dif: H, dea: G, hist: W } = N2e(s, V, B, F), X = P.colors ?? {};
      L.push({
        name: P.name ?? "MACD",
        type: "bar",
        xAxisIndex: z,
        yAxisIndex: z,
        data: W,
        itemStyle: {
          color: (q) => {
            const J = q == null ? void 0 : q.value;
            return typeof J != "number" ? "#94a3b8" : J >= 0 ? X.macdUp ?? n : X.macdDown ?? i;
          }
        }
      }), L.push({
        name: "DIF",
        type: "line",
        xAxisIndex: z,
        yAxisIndex: z,
        data: H,
        showSymbol: !1,
        smooth: !0,
        lineStyle: { width: 1.1, color: X.dif ?? "#2563eb" }
      }), L.push({
        name: "DEA",
        type: "line",
        xAxisIndex: z,
        yAxisIndex: z,
        data: G,
        showSymbol: !1,
        smooth: !0,
        lineStyle: { width: 1.1, color: X.dea ?? "#f59e0b" }
      });
    }
  }), {
    title: e.title ? { text: e.title } : void 0,
    grid: b,
    xAxis: w,
    yAxis: _,
    legend: {
      show: !0,
      top: 8,
      left: 12
    },
    tooltip: {
      trigger: "axis",
      axisPointer: { type: "cross" },
      formatter: (P) => {
        const k = Array.isArray(P) ? P : [P], z = k.find((H) => (H == null ? void 0 : H.seriesType) === "candlestick"), V = z == null ? void 0 : z.dataIndex, B = typeof V == "number" ? t[V] : void 0, F = [];
        return B && (F.push(`${N4(B.time)}`), F.push(`O: ${B.open}  H: ${B.high}  L: ${B.low}  C: ${B.close}`), B.volume != null && F.push(`V: ${B.volume}`)), k.filter((H) => (H == null ? void 0 : H.seriesType) !== "candlestick").forEach((H) => {
          const G = H == null ? void 0 : H.seriesName, W = H == null ? void 0 : H.value;
          G && (W == null || W === "" || F.push(`${G}: ${typeof W == "number" ? W.toFixed(4) : W}`));
        }), F.join("<br/>");
      }
    },
    axisPointer: {
      link: [{ xAxisIndex: E }]
    },
    dataZoom: [
      {
        type: "inside",
        xAxisIndex: E,
        start: 70,
        end: 100
      },
      {
        type: "slider",
        xAxisIndex: E,
        height: 20,
        bottom: 2,
        start: 70,
        end: 100
      }
    ],
    series: L
  };
}, k2e = ({
  config: e,
  optionOverrides: t,
  height: r,
  className: n,
  instanceId: i,
  notMerge: a,
  lazyUpdate: o,
  extraEvents: s,
  onChartReadyInstance: l
}) => {
  const u = T.useMemo(() => P2e(e), [e]), c = T.useMemo(
    () => I2e(u, t),
    [u, t]
  );
  return /* @__PURE__ */ x.jsx(
    Xt,
    {
      option: c,
      height: r,
      className: n,
      instanceId: i,
      notMerge: a,
      lazyUpdate: o,
      extraEvents: s,
      onChartReadyInstance: l
    }
  );
};
k2e.displayName = "FinancialChart";
const jb = (e) => typeof e == "number" && Number.isFinite(e), O2e = (e, t) => {
  const r = (e ?? []).filter(jb);
  if (r.length === 0) return [];
  const n = jb(t == null ? void 0 : t.min) ? t.min : Math.min(...r), i = jb(t == null ? void 0 : t.max) ? t.max : Math.max(...r), a = t == null ? void 0 : t.binSize, o = t == null ? void 0 : t.binCount, s = typeof a == "number" && a > 0 ? Math.max(1, Math.ceil((i - n) / a)) : Math.max(1, o ?? Math.ceil(Math.sqrt(r.length))), l = typeof a == "number" && a > 0 ? a : s === 1 ? 1 : (i - n) / s, u = t != null && t.labelFormatter ? t.labelFormatter : (f, d) => {
    const h = Number.isFinite(f) ? f : 0, p = Number.isFinite(d) ? d : 0;
    return `${h.toFixed(2)} - ${p.toFixed(2)}`;
  }, c = [];
  for (let f = 0; f < s; f += 1) {
    const d = n + f * l, h = f === s - 1 ? i : n + (f + 1) * l;
    c.push({ start: d, end: h, count: 0, label: u(d, h, f) });
  }
  for (const f of r) {
    const d = s === 1 ? 0 : Math.min(s - 1, Math.max(0, Math.floor((f - n) / l)));
    c[d].count += 1;
  }
  return c;
}, z2e = (e, t) => ({
  title: t == null ? void 0 : t.title,
  xLabels: e.map((r) => r.label),
  series: [{ name: (t == null ? void 0 : t.seriesName) ?? "Count", data: e.map((r) => r.count) }],
  orientation: "vertical",
  stacked: !1
}), Q3e = (e, t) => {
  const r = O2e(e, t);
  return z2e(r, { title: t == null ? void 0 : t.title, seriesName: t == null ? void 0 : t.seriesName });
}, y0 = T.forwardRef(
  ({ className: e, variant: t = "default", size: r = "md", onClose: n, disabled: i, children: a, ...o }, s) => {
    const l = {
      default: "bg-slate-100 text-slate-700 border border-transparent",
      primary: "bg-primary-50 text-primary-700 border border-primary-100",
      success: "bg-green-50 text-green-700 border border-green-100",
      warning: "bg-yellow-50 text-yellow-700 border border-yellow-100",
      danger: "bg-red-50 text-red-700 border border-red-100",
      info: "bg-blue-50 text-blue-700 border border-blue-100",
      outline: "bg-transparent text-slate-600 border border-slate-300"
    }, u = {
      sm: "px-2 py-0.5 text-xs gap-1",
      md: "px-2.5 py-1 text-sm gap-1.5",
      lg: "px-3 py-1.5 text-base gap-2"
    };
    return /* @__PURE__ */ x.jsxs(
      "span",
      {
        ref: s,
        className: me(
          fe(
            "inline-flex items-center rounded-md font-medium transition-colors",
            i && "opacity-50 pointer-events-none",
            l[t],
            u[r],
            e
          )
        ),
        ...o,
        children: [
          a,
          n && !i && /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              onClick: (c) => {
                c.stopPropagation(), n(c);
              },
              className: "rounded-full p-0.5 hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-offset-1",
              children: /* @__PURE__ */ x.jsx(ef, { className: "h-3 w-3" })
            }
          )
        ]
      }
    );
  }
);
y0.displayName = "Tag";
const _V = T.forwardRef(
  ({
    value: e,
    onSearch: t,
    debounceMs: r = 1e3,
    initialValue: n = "",
    onKeyDown: i,
    ...a
  }, o) => {
    const [s, l] = T.useState(e ?? n);
    T.useEffect(() => {
      e !== void 0 && e !== s && l(e);
    }, [e]), T.useEffect(() => {
      if (!t || r <= 0) return;
      const f = window.setTimeout(() => {
        t(s);
      }, r);
      return () => window.clearTimeout(f);
    }, [s, r, t]);
    const u = (f) => {
      f.key === "Enter" && t && t(s), i == null || i(f);
    }, c = (f) => {
      l(f.target.value);
    };
    return /* @__PURE__ */ x.jsx(
      mr,
      {
        ref: o,
        value: s,
        onChange: c,
        onKeyDown: u,
        ...a
      }
    );
  }
);
_V.displayName = "SearchInput";
const j2e = T.forwardRef(
  ({
    className: e,
    searchPlaceholder: t = "Search...",
    searchValue: r,
    onSearchChange: n,
    selectedCount: i = 0,
    onClearSelection: a,
    filters: o,
    actions: s,
    filterOptions: l,
    filterValue: u,
    onFilterChange: c,
    filterPlaceholder: f = "All statuses",
    columnVisibilityItems: d,
    onColumnVisibilityChange: h,
    noBackground: p,
    ...v
  }, g) => {
    const m = T.useRef(null), y = i > 0, b = Array.isArray(d) && d.length > 0 && !!h, w = typeof n == "function" || typeof r < "u", _ = Array.isArray(l) && l.length > 0 && typeof c == "function", S = u ?? "", C = _ ? l.find((I) => I.value === S) ?? l[0] : void 0, A = (C == null ? void 0 : C.label) ?? f, [M, D] = T.useState(!1), [N, R] = T.useState(!1), [O, E] = T.useState(!1), L = T.useRef(null);
    return T.useEffect(() => {
      M && L.current && L.current.focus();
    }, [M]), T.useEffect(() => {
      const I = (P) => {
        m.current && (m.current.contains(P.target) || (D(!1), R(!1), E(!1)));
      };
      return document.addEventListener("mousedown", I), () => document.removeEventListener("mousedown", I);
    }, []), /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: (I) => {
          m.current = I, typeof g == "function" ? g(I) : g && (g.current = I);
        },
        className: me(
          fe(
            "flex flex-col gap-3 text-sm sm:flex-row sm:items-center sm:justify-between",
            !p && "rounded-2xl bg-surface px-4 py-3 shadow-sm",
            p && "bg-transparent px-0 py-0 shadow-none rounded-none",
            e
          )
        ),
        ...v,
        children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex flex-1 flex-col gap-2 sm:flex-row sm:items-center", children: [
            /* @__PURE__ */ x.jsx("div", { className: "flex flex-1 items-center gap-2", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
              w && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
                /* @__PURE__ */ x.jsx(
                  Nr,
                  {
                    icon: IP,
                    size: "sm",
                    "aria-label": "Toggle search",
                    onClick: () => D((I) => !I)
                  }
                ),
                M && /* @__PURE__ */ x.jsx("div", { className: "min-w-[200px]", children: /* @__PURE__ */ x.jsx(
                  _V,
                  {
                    ref: L,
                    value: r,
                    onSearch: (I) => n == null ? void 0 : n(I),
                    placeholder: t,
                    fullWidth: !1,
                    className: "h-9 w-56"
                  }
                ) })
              ] }),
              _ ? /* @__PURE__ */ x.jsxs("div", { className: "relative", children: [
                /* @__PURE__ */ x.jsx(
                  Nr,
                  {
                    icon: Pg,
                    size: "sm",
                    "aria-label": "Toggle filters",
                    onClick: () => R((I) => !I)
                  }
                ),
                N && /* @__PURE__ */ x.jsx(
                  oh,
                  {
                    label: A,
                    options: l,
                    value: S,
                    onChange: (I) => {
                      c == null || c(I || void 0), R(!1);
                    }
                  }
                )
              ] }) : o && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
                /* @__PURE__ */ x.jsx(
                  Nr,
                  {
                    icon: Pg,
                    size: "sm",
                    onClick: () => R((I) => !I)
                  }
                ),
                N && /* @__PURE__ */ x.jsx("div", { className: "min-w-[160px]", children: o })
              ] })
            ] }) }),
            y && /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 text-xs text-text-secondary", children: [
              /* @__PURE__ */ x.jsxs(y0, { variant: "default", children: [
                i,
                " selected"
              ] }),
              a && /* @__PURE__ */ x.jsx(
                "button",
                {
                  type: "button",
                  onClick: a,
                  className: "text-primary-600 hover:underline",
                  children: "Clear"
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            b && /* @__PURE__ */ x.jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ x.jsx(
                Nr,
                {
                  icon: WW,
                  size: "sm",
                  "aria-label": "Toggle columns",
                  onClick: () => E((I) => !I)
                }
              ),
              O && /* @__PURE__ */ x.jsx(
                oh,
                {
                  label: "Columns",
                  options: d.map((I) => ({
                    label: I.label,
                    value: I.id,
                    disabled: I.disabled
                  })),
                  renderOption: (I) => {
                    const P = d.find((k) => k.id === I.value);
                    return P ? /* @__PURE__ */ x.jsxs("label", { className: "flex w-full cursor-pointer items-center gap-2 px-4 py-1.5 text-sm text-text-secondary", children: [
                      /* @__PURE__ */ x.jsx(
                        Zc,
                        {
                          checked: P.visible,
                          disabled: P.disabled,
                          onChange: (k) => h == null ? void 0 : h(P.id, k.target.checked)
                        }
                      ),
                      /* @__PURE__ */ x.jsx("span", { children: P.label })
                    ] }) : null;
                  }
                }
              )
            ] }),
            s,
            !s && /* @__PURE__ */ x.jsx(Nr, { icon: DP, size: "sm" })
          ] })
        ]
      }
    );
  }
);
j2e.displayName = "TableToolbar";
const V2e = T.forwardRef(
  ({ className: e, filters: t, onRemoveFilter: r, onClearAll: n, showClearAll: i = !0, noBackground: a, ...o }, s) => !t || t.length === 0 ? null : /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: s,
      className: me(
        fe(
          "flex flex-wrap items-center gap-2 text-xs text-text-secondary",
          !a && "rounded-2xl bg-surface px-4 py-2",
          a && "bg-transparent px-0 py-0 rounded-none",
          e
        )
      ),
      ...o,
      children: [
        /* @__PURE__ */ x.jsx("span", { className: "mr-1 font-medium text-text-muted", children: "Active filters:" }),
        t.map((l) => /* @__PURE__ */ x.jsxs(
          y0,
          {
            size: "sm",
            variant: "outline",
            onClose: l.removable === !1 ? void 0 : () => r == null ? void 0 : r(l.id),
            children: [
              l.label,
              l.value ? `: ${l.value}` : ""
            ]
          },
          l.id
        )),
        i && n && /* @__PURE__ */ x.jsx(
          "button",
          {
            type: "button",
            onClick: () => n == null ? void 0 : n(),
            className: "ml-2 text-[11px] font-medium text-primary-600 hover:underline",
            children: "Clear all"
          }
        )
      ]
    }
  )
);
V2e.displayName = "ActiveFilters";
const $c = T.forwardRef(
  ({ label: e, startIcon: t, endIcon: r, onDelete: n, children: i, className: a, variant: o = "outline", size: s = "sm", disabled: l, ...u }, c) => {
    const f = {
      // Chip trung tính
      default: "bg-slate-100 text-slate-700 hover:bg-slate-200 hover:text-slate-800",
      // Active filter: nền xanh nhạt, text đồng điệu và đậm hơn nền
      primary: "bg-primary-100 text-primary-700 hover:bg-primary-150 hover:text-primary-800",
      // Trạng thái success / warning / danger / info: hover sáng hơn một tone, text đậm hơn nền
      success: "bg-green-50 text-green-700 hover:bg-green-100 hover:text-green-800",
      warning: "bg-yellow-50 text-yellow-700 hover:bg-yellow-100 hover:text-yellow-800",
      danger: "bg-red-50 text-red-700 hover:bg-red-100 hover:text-red-800",
      info: "bg-blue-50 text-blue-700 hover:bg-blue-100 hover:text-blue-800",
      // Inactive filter hoặc chip "ghost": nền trong suốt, text xám; hover nền xám rất nhẹ và text đậm hơn một chút
      outline: "bg-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-700"
    }, d = {
      sm: "px-3 py-1 text-xs gap-1",
      md: "px-3.5 py-1.5 text-sm gap-1.5",
      lg: "px-4 py-2 text-base gap-2"
    }, h = (p) => p ? T.isValidElement(p) ? T.cloneElement(p, {
      className: me(p.props.className, "text-current")
    }) : p : null;
    return /* @__PURE__ */ x.jsxs(
      "span",
      {
        ref: c,
        className: me(
          fe(
            "inline-flex items-center rounded-full font-medium transition-colors cursor-pointer select-none",
            l && "opacity-50 pointer-events-none",
            f[o],
            d[s],
            a
          )
        ),
        ...u,
        children: [
          t && /* @__PURE__ */ x.jsx("span", { className: "mr-1 flex items-center", children: h(t) }),
          e ?? i,
          r && /* @__PURE__ */ x.jsx("span", { className: "ml-1 flex items-center", children: h(r) }),
          n && !l && /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              onClick: (p) => {
                p.stopPropagation(), n(p);
              },
              className: "ml-1 rounded-full p-0.5 hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-offset-1",
              children: /* @__PURE__ */ x.jsx(ef, { className: "h-3 w-3" })
            }
          )
        ]
      }
    );
  }
);
$c.displayName = "Chip";
const I4 = {
  buttonLabel: "Bộ lọc",
  searchPlaceholder: "Lọc theo...",
  emptyLabel: "Không tìm thấy trường phù hợp",
  appliedFiltersLabel: "bộ lọc đang áp dụng",
  clearAllLabel: "Xoá tất cả",
  yesLabel: "Có",
  noLabel: "Không",
  rangeFromPlaceholder: "Từ",
  rangeToPlaceholder: "Đến",
  rangeGtePrefix: ">=",
  rangeLtePrefix: "<=",
  rangeSeparator: " - ",
  operators: {
    from: "Ngày bắt đầu",
    to: "Ngày kết thúc",
    between: "Trong khoảng",
    empty: "Trống",
    notEmpty: "Không trống",
    eq: "Là",
    neq: "Không phải là",
    gt: "Lớn hơn",
    gte: "Lớn hơn hoặc bằng",
    lt: "Nhỏ hơn",
    lte: "Nhỏ hơn hoặc bằng",
    contains: "Chứa",
    notContains: "Không chứa",
    startsWith: "Bắt đầu bằng",
    endsWith: "Kết thúc bằng",
    is: "Là",
    isNot: "Không phải là",
    in: "Bao gồm",
    notIn: "Không bao gồm"
  }
}, B2e = {
  filter: { active: "primary", inactive: "outline" },
  sort: { active: "info", inactive: "outline" }
}, SV = T.forwardRef(
  ({
    className: e,
    fields: t,
    filters: r,
    onFiltersChange: n,
    i18n: i,
    chipVariants: a,
    getChipVariant: o,
    addButtonChipVariant: s,
    renderFieldEditor: l,
    formatValue: u,
    ...c
  }, f) => {
    const d = T.useRef(null), [h, p] = T.useState(null), [v, g] = T.useState(!1), m = T.useMemo(() => ({
      ...I4,
      ...i ?? {},
      operators: {
        ...I4.operators,
        ...(i == null ? void 0 : i.operators) ?? {}
      }
    }), [i]), y = ($) => ($.type ?? "").toLowerCase(), b = ($) => $.meta ?? {}, w = T.useCallback(
      ($) => {
        const Y = b($);
        return (Y.chipGroup ?? Y.group) === "sort" ? "sort" : "filter";
      },
      []
    ), _ = ($) => typeof $ == "string" && $.trim().length > 0, S = ($) => $ === "empty" || $ === "not_empty" ? "none" : $ === "between" ? "range" : $ === "in" || $ === "not_in" ? "multi" : "single", C = ($) => {
      const Y = b($), Z = Y.operators, K = Y.defaultOperator, ie = Array.isArray(Z) ? Z.map((Q) => {
        if (!Q || typeof Q != "object") return null;
        const ce = Q, te = ce.id, oe = ce.label, de = ce.valueType;
        return !_(te) || !_(oe) ? null : de !== void 0 && de !== "none" && de !== "single" && de !== "multi" && de !== "range" ? { id: te, label: oe, valueType: S(te) } : {
          id: te,
          label: oe,
          valueType: de ?? S(te)
        };
      }).filter(Boolean) : void 0;
      return {
        operators: ie != null && ie.length ? ie : void 0,
        defaultOperator: _(K) ? K : void 0
      };
    }, A = T.useCallback(
      ($, Y) => {
        var Z, K;
        if ((Z = $.options) != null && Z.length) {
          if (Array.isArray(Y))
            return Y.filter((ce) => typeof ce == "string").map((ce) => {
              var te, oe;
              return ((oe = (te = $.options) == null ? void 0 : te.find((de) => de.value === ce)) == null ? void 0 : oe.label) ?? ce;
            }).filter(Boolean).join(", ");
          if (typeof Y == "string")
            return (K = $.options.find((ie) => ie.value === Y)) == null ? void 0 : K.label;
        }
      },
      []
    ), M = T.useCallback(
      ({ field: $, filter: Y, onChange: Z }) => {
        const K = y($), ie = Y.value;
        if (K === "number")
          return /* @__PURE__ */ x.jsx(
            mr,
            {
              type: "number",
              value: ie == null ? "" : String(ie),
              onChange: (Q) => {
                const ce = Q.target.value;
                if (!ce) {
                  Z(void 0);
                  return;
                }
                const te = Number(ce);
                Z(Number.isNaN(te) ? void 0 : te);
              }
            }
          );
        if (K === "date")
          return /* @__PURE__ */ x.jsx(
            La,
            {
              value: typeof ie == "string" ? ie : "",
              onValueChange: (Q) => Z(Q || void 0)
            }
          );
        if (K === "datetime")
          return /* @__PURE__ */ x.jsx(
            Ra,
            {
              value: typeof ie == "string" ? ie : "",
              onValueChange: (Q) => Z(Q || void 0)
            }
          );
        if (K === "number_range") {
          const Q = ie ?? {};
          return /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
            /* @__PURE__ */ x.jsx(
              mr,
              {
                type: "number",
                placeholder: m.rangeFromPlaceholder,
                value: Q.min === void 0 || Q.min === null ? "" : String(Q.min),
                onChange: (ce) => {
                  const te = ce.target.value, oe = te ? Number(te) : void 0;
                  Z({ ...Q, min: oe });
                }
              }
            ),
            /* @__PURE__ */ x.jsx(
              mr,
              {
                type: "number",
                placeholder: m.rangeToPlaceholder,
                value: Q.max === void 0 || Q.max === null ? "" : String(Q.max),
                onChange: (ce) => {
                  const te = ce.target.value, oe = te ? Number(te) : void 0;
                  Z({ ...Q, max: oe });
                }
              }
            )
          ] });
        }
        return /* @__PURE__ */ x.jsx(
          mr,
          {
            value: ie == null ? "" : String(ie),
            onChange: (Q) => Z(Q.target.value)
          }
        );
      },
      []
    ), D = l ?? M, N = T.useCallback(
      ($) => {
        const Y = o == null ? void 0 : o($);
        if (Y) return Y;
        const Z = a == null ? void 0 : a[$.group], K = B2e[$.group];
        return $.hasValue ? (Z == null ? void 0 : Z.active) ?? K.active ?? "primary" : (Z == null ? void 0 : Z.inactive) ?? K.inactive ?? "outline";
      },
      [a, o]
    ), R = ($) => y($).includes("multi") ? !0 : ($.meta ?? {}).multiple === !0, O = ($) => {
      var K;
      const Y = y($), Z = !!((K = $.options) != null && K.length);
      return Y === "date" || Y === "datetime" ? [
        { id: "from", label: m.operators.from, valueType: "single" },
        { id: "to", label: m.operators.to, valueType: "single" },
        { id: "between", label: m.operators.between, valueType: "range" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ] : Y === "number" || Y === "number_range" ? [
        { id: "eq", label: m.operators.eq, valueType: "single" },
        { id: "neq", label: m.operators.neq, valueType: "single" },
        { id: "gt", label: m.operators.gt, valueType: "single" },
        { id: "gte", label: m.operators.gte, valueType: "single" },
        { id: "lt", label: m.operators.lt, valueType: "single" },
        { id: "lte", label: m.operators.lte, valueType: "single" },
        { id: "between", label: m.operators.between, valueType: "range" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ] : Y === "boolean" ? [
        { id: "is", label: m.operators.is, valueType: "single" },
        { id: "is_not", label: m.operators.isNot, valueType: "single" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ] : Z ? R($) ? [
        { id: "in", label: m.operators.in, valueType: "multi" },
        { id: "not_in", label: m.operators.notIn, valueType: "multi" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ] : [
        { id: "eq", label: m.operators.eq, valueType: "single" },
        { id: "neq", label: m.operators.neq, valueType: "single" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ] : [
        { id: "contains", label: m.operators.contains, valueType: "single" },
        { id: "not_contains", label: m.operators.notContains, valueType: "single" },
        { id: "starts_with", label: m.operators.startsWith, valueType: "single" },
        { id: "ends_with", label: m.operators.endsWith, valueType: "single" },
        { id: "eq", label: m.operators.eq, valueType: "single" },
        { id: "neq", label: m.operators.neq, valueType: "single" },
        { id: "empty", label: m.operators.empty, valueType: "none" },
        { id: "not_empty", label: m.operators.notEmpty, valueType: "none" }
      ];
    }, E = ($) => {
      var ie;
      const Y = C($), Z = Y.operators ?? O($), K = Y.defaultOperator ?? ((ie = Z[0]) == null ? void 0 : ie.id);
      return { operators: Z, defaultOperator: K };
    }, L = ($, Y) => {
      const { operators: Z, defaultOperator: K } = E($), ie = Y.operator;
      return ie && Z.some((Q) => Q.id === ie) ? ie : K;
    }, I = ($, Y) => {
      if (!Y) return;
      const { operators: Z } = E($);
      return Z.find((ie) => ie.id === Y);
    }, P = ($, Y, Z) => {
      var te;
      const K = I($, Y), ie = (K == null ? void 0 : K.valueType) ?? S(Y), Q = y($), ce = !!((te = $.options) != null && te.length);
      if (ie !== "none")
        return ie === "multi" ? Array.isArray(Z) && Z.every((oe) => typeof oe == "string") ? Z : typeof Z == "string" && Z ? [Z] : void 0 : ie === "range" ? Z && typeof Z == "object" ? Z : Q === "date" || Q === "datetime" ? { start: void 0, end: void 0 } : { min: void 0, max: void 0 } : Q === "number" ? typeof Z == "number" ? Z : void 0 : Q === "boolean" ? typeof Z == "boolean" ? Z : void 0 : typeof Z == "string" && Z ? Z : void 0;
    }, k = ($) => {
      var te;
      const { field: Y, operatorId: Z, value: K } = $;
      if (K == null) return "";
      const ie = y(Y), Q = I(Y, Z), ce = (Q == null ? void 0 : Q.valueType) ?? (Z ? S(Z) : "single");
      if (ce === "multi" && Array.isArray(K))
        return A(Y, K) ?? K.join(", ");
      if (ce === "range" && K && typeof K == "object") {
        if (ie === "date" || ie === "datetime") {
          const Ke = K, it = typeof Ke.start == "string" ? Ke.start : "", Dt = typeof Ke.end == "string" ? Ke.end : "";
          return !it && !Dt ? "" : it && Dt ? `${it}${m.rangeSeparator}${Dt}` : it ? `${m.rangeGtePrefix} ${it}` : `${m.rangeLtePrefix} ${Dt}`;
        }
        const oe = K, de = typeof oe.min == "number" && !Number.isNaN(oe.min) ? oe.min : void 0, Pe = typeof oe.max == "number" && !Number.isNaN(oe.max) ? oe.max : void 0;
        return de === void 0 && Pe === void 0 ? "" : de !== void 0 && Pe !== void 0 ? `${de}${m.rangeSeparator}${Pe}` : de !== void 0 ? `${m.rangeGtePrefix} ${de}` : `${m.rangeLtePrefix} ${Pe}`;
      }
      return (te = Y.options) != null && te.length ? A(Y, K) ?? String(K) : typeof K == "boolean" ? K ? m.yesLabel : m.noLabel : String(K);
    }, z = ($) => ($.meta ?? {}).preferCustomEditor === !0, V = ($) => {
      const { operators: Y } = E($.field), Z = Y.map((K) => ({ label: K.label, value: K.id }));
      return /* @__PURE__ */ x.jsx("div", { onMouseDown: (K) => K.stopPropagation(), onClick: (K) => K.stopPropagation(), children: /* @__PURE__ */ x.jsx(
        cy,
        {
          options: Z,
          value: $.operatorId,
          onValueChange: (K) => G($.filter.fieldId, K),
          fullWidth: !1,
          compact: !0,
          variant: "ghost",
          className: "min-w-[110px]"
        }
      ) });
    }, B = ($) => {
      var ce;
      if (z($.field))
        return D({
          field: $.field,
          filter: $.filter,
          onChange: $.onChange
        });
      const Y = y($.field), Z = I($.field, $.operatorId), K = (Z == null ? void 0 : Z.valueType) ?? ($.operatorId ? S($.operatorId) : "single");
      if (K === "none") return null;
      const ie = !!((ce = $.field.options) != null && ce.length);
      if (Y === "boolean") {
        const te = typeof $.filter.value == "boolean" ? $.filter.value : void 0;
        return /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
          /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              className: me(
                fe(
                  "rounded-lg px-3 py-2 text-left text-xs hover:bg-slate-100",
                  te === !0 && "bg-primary-50 font-medium"
                )
              ),
              onClick: () => $.onChange(!0),
              children: m.yesLabel
            }
          ),
          /* @__PURE__ */ x.jsx(
            "button",
            {
              type: "button",
              className: me(
                fe(
                  "rounded-lg px-3 py-2 text-left text-xs hover:bg-slate-100",
                  te === !1 && "bg-primary-50 font-medium"
                )
              ),
              onClick: () => $.onChange(!1),
              children: m.noLabel
            }
          )
        ] });
      }
      if (ie) {
        const te = $.field.options ?? [];
        if (K === "multi") {
          const de = Array.isArray($.filter.value) && $.filter.value.every((Pe) => typeof Pe == "string") ? $.filter.value : [];
          return /* @__PURE__ */ x.jsx("div", { className: "max-h-64 overflow-auto", children: te.map((Pe) => {
            const Ke = de.includes(Pe.value);
            return /* @__PURE__ */ x.jsxs(
              "button",
              {
                type: "button",
                className: me(
                  fe(
                    "flex w-full items-center justify-between gap-2 rounded-lg px-3 py-1.5 text-left text-text-secondary",
                    "hover:bg-slate-100",
                    Ke && "bg-primary-50 font-medium"
                  )
                ),
                onClick: () => {
                  const it = Ke ? de.filter((Dt) => Dt !== Pe.value) : [...de, Pe.value];
                  $.onChange(it.length ? it : void 0);
                },
                children: [
                  /* @__PURE__ */ x.jsx("span", { className: "truncate", children: Pe.label }),
                  /* @__PURE__ */ x.jsx("span", { className: fe("text-[11px]", Ke ? "opacity-100" : "opacity-0"), children: "✓" })
                ]
              },
              Pe.value
            );
          }) });
        }
        const oe = typeof $.filter.value == "string" ? $.filter.value : "";
        return /* @__PURE__ */ x.jsx("div", { className: "max-h-64 overflow-auto", children: te.map((de) => {
          const Pe = de.value === oe;
          return /* @__PURE__ */ x.jsxs(
            "button",
            {
              type: "button",
              className: me(
                fe(
                  "flex w-full items-center justify-between gap-2 rounded-lg px-3 py-1.5 text-left text-text-secondary",
                  "hover:bg-slate-100",
                  Pe && "bg-primary-50 font-medium"
                )
              ),
              onClick: () => {
                $.onChange(de.value), p(null);
              },
              children: [
                /* @__PURE__ */ x.jsx("span", { className: "truncate", children: de.label }),
                /* @__PURE__ */ x.jsx("span", { className: fe("text-[11px]", Pe ? "opacity-100" : "opacity-0"), children: "✓" })
              ]
            },
            de.value
          );
        }) });
      }
      if (Y === "date") {
        if (K === "range") {
          const te = $.filter.value ?? {};
          return /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-1 gap-2 sm:grid-cols-2", children: [
            /* @__PURE__ */ x.jsx(
              La,
              {
                value: typeof te.start == "string" ? te.start : "",
                inline: !0,
                onValueChange: (oe) => $.onChange({ ...te, start: oe || void 0 })
              }
            ),
            /* @__PURE__ */ x.jsx(
              La,
              {
                value: typeof te.end == "string" ? te.end : "",
                inline: !0,
                onValueChange: (oe) => $.onChange({ ...te, end: oe || void 0 })
              }
            )
          ] });
        }
        return /* @__PURE__ */ x.jsx(
          La,
          {
            value: typeof $.filter.value == "string" ? $.filter.value : "",
            inline: !0,
            onValueChange: (te) => $.onChange(te || void 0)
          }
        );
      }
      if (Y === "datetime") {
        if (K === "range") {
          const te = $.filter.value ?? {};
          return /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-1 gap-2 sm:grid-cols-2", children: [
            /* @__PURE__ */ x.jsx(
              Ra,
              {
                value: typeof te.start == "string" ? te.start : "",
                inline: !0,
                onValueChange: (oe) => $.onChange({ ...te, start: oe || void 0 })
              }
            ),
            /* @__PURE__ */ x.jsx(
              Ra,
              {
                value: typeof te.end == "string" ? te.end : "",
                inline: !0,
                onValueChange: (oe) => $.onChange({ ...te, end: oe || void 0 })
              }
            )
          ] });
        }
        return /* @__PURE__ */ x.jsx(
          Ra,
          {
            value: typeof $.filter.value == "string" ? $.filter.value : "",
            inline: !0,
            onValueChange: (te) => $.onChange(te || void 0)
          }
        );
      }
      if (Y === "number" && K !== "range") {
        const te = $.filter.value;
        return /* @__PURE__ */ x.jsx(
          mr,
          {
            type: "number",
            value: te == null ? "" : String(te),
            onChange: (oe) => {
              const de = oe.target.value;
              if (!de) {
                $.onChange(void 0);
                return;
              }
              const Pe = Number(de);
              $.onChange(Number.isNaN(Pe) ? void 0 : Pe);
            }
          }
        );
      }
      if (K === "range") {
        const te = $.filter.value ?? {};
        return /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
          /* @__PURE__ */ x.jsx(
            mr,
            {
              type: "number",
              placeholder: m.rangeFromPlaceholder,
              value: te.min === void 0 || te.min === null ? "" : String(te.min),
              onChange: (oe) => {
                const de = oe.target.value, Pe = de ? Number(de) : void 0;
                $.onChange({ ...te, min: Pe });
              }
            }
          ),
          /* @__PURE__ */ x.jsx(
            mr,
            {
              type: "number",
              placeholder: m.rangeToPlaceholder,
              value: te.max === void 0 || te.max === null ? "" : String(te.max),
              onChange: (oe) => {
                const de = oe.target.value, Pe = de ? Number(de) : void 0;
                $.onChange({ ...te, max: Pe });
              }
            }
          )
        ] });
      }
      const Q = $.filter.value;
      return /* @__PURE__ */ x.jsx(
        mr,
        {
          value: Q == null ? "" : String(Q),
          onChange: (te) => $.onChange(te.target.value)
        }
      );
    }, F = ($) => {
      if (!r.find((Z) => Z.fieldId === $)) {
        const Z = t.find((Q) => Q.id === $), K = Z ? E(Z).defaultOperator : void 0, ie = { fieldId: $, operator: K };
        n([...r, ie]);
      }
      p($);
    }, H = ($, Y) => {
      const Z = r.map((K) => K.fieldId === $ ? { ...K, value: Y } : K);
      n(Z);
    }, G = ($, Y) => {
      const Z = t.find((ie) => ie.id === $), K = r.map((ie) => {
        if (ie.fieldId !== $) return ie;
        if (!Z) return { ...ie, operator: Y };
        const Q = P(Z, Y, ie.value);
        return { ...ie, operator: Y, value: Q };
      });
      n(K);
    }, W = ($) => {
      const Y = r.find((ie) => ie.fieldId === $), Z = t.find((ie) => ie.id === $);
      if (!Y || !Z) return;
      const K = L(Z, Y);
      Y.operator !== K && K && G($, K);
    }, X = ($) => {
      const Y = r.filter((Z) => Z.fieldId !== $);
      n(Y), h === $ && p(null);
    }, q = () => {
      if (!r.length) return;
      const $ = r.filter((Y) => {
        const Z = t.find((K) => K.id === Y.fieldId);
        return Z ? w(Z) === "sort" : !1;
      });
      $.length !== r.length && (n($), p(null));
    };
    T.useEffect(() => {
      const $ = (Y) => {
        d.current && (d.current.contains(Y.target) || (p(null), g(!1)));
      };
      return document.addEventListener("mousedown", $), () => document.removeEventListener("mousedown", $);
    }, []);
    const J = t.filter(($) => w($) === "filter"), U = r.map(($) => {
      const Y = t.find((de) => de.id === $.fieldId);
      if (!Y) return null;
      const Z = $.value, K = L(Y, $), ie = I(Y, K), Q = ie == null ? void 0 : ie.label, ce = (ie == null ? void 0 : ie.valueType) ?? (K ? S(K) : "single"), te = Z == null ? "" : u ? u(Y, Z) : k({ field: Y, operatorId: K, value: Z }), oe = Q && ce === "none" ? Q : Q && te ? `${Q} ${te}` : Q || te;
      return {
        id: $.fieldId,
        group: w(Y),
        label: Y.label,
        valueLabel: oe,
        field: Y,
        filter: $
      };
    }).filter(Boolean);
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: ($) => {
          d.current = $, typeof f == "function" ? f($) : f && (f.current = $);
        },
        className: me(
          fe("flex flex-wrap items-center gap-2 text-xs text-text-secondary", e)
        ),
        ...c,
        children: [
          U.map(($) => {
            const Y = h === $.id, Z = !!$.valueLabel, K = L($.field, $.filter), ie = I($.field, K), Q = (ie == null ? void 0 : ie.valueType) ?? (K ? S(K) : "single");
            return /* @__PURE__ */ x.jsxs("div", { className: "relative inline-block", children: [
              /* @__PURE__ */ x.jsx(
                $c,
                {
                  size: "sm",
                  variant: N({
                    group: $.group,
                    field: $.field,
                    filter: $.filter,
                    hasValue: Z
                  }),
                  label: $.valueLabel ? `${$.label}: ${$.valueLabel}` : $.label,
                  startIcon: $.field.icon ? /* @__PURE__ */ x.jsx(bl, { icon: $.field.icon, size: "sm", variant: "muted" }) : void 0,
                  onClick: () => {
                    W($.id), p((ce) => ce === $.id ? null : $.id);
                  },
                  onDelete: () => X($.id)
                }
              ),
              Y && /* @__PURE__ */ x.jsx(
                oh,
                {
                  label: $.label,
                  options: [{ value: $.id }],
                  value: $.id,
                  headerRight: V({
                    field: $.field,
                    filter: $.filter,
                    operatorId: K ?? ""
                  }),
                  renderOption: () => /* @__PURE__ */ x.jsx("div", { className: "px-2 py-2 text-xs text-text-secondary space-y-2", children: Q !== "none" && /* @__PURE__ */ x.jsx("div", { children: B({
                    field: $.field,
                    filter: $.filter,
                    operatorId: K ?? "",
                    onChange: (ce) => H($.id, ce)
                  }) }) }),
                  side: "bottom",
                  align: "start",
                  sideOffset: 4
                }
              )
            ] }, $.id);
          }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ x.jsxs("div", { className: "relative inline-block", children: [
              /* @__PURE__ */ x.jsx(
                $c,
                {
                  label: m.buttonLabel,
                  startIcon: /* @__PURE__ */ x.jsx(bl, { icon: Qc, size: "sm" }),
                  className: "inline-flex items-center gap-1",
                  variant: s,
                  onClick: () => g(($) => !$)
                }
              ),
              v && /* @__PURE__ */ x.jsx(
                oh,
                {
                  label: m.buttonLabel,
                  options: J.map(($) => ({
                    label: $.label,
                    value: $.id
                  })),
                  value: h ?? "",
                  side: "bottom",
                  align: "start",
                  sideOffset: 4,
                  renderOption: ($, Y) => {
                    const Z = J.find((ie) => ie.id === $.value);
                    if (!Z) return null;
                    const K = r.some((ie) => ie.fieldId === Z.id);
                    return /* @__PURE__ */ x.jsxs(
                      "button",
                      {
                        type: "button",
                        className: me(
                          "flex w-full items-center gap-2 px-3 py-1.5 text-left text-text-secondary",
                          !$.disabled && (Y.selected || K ? "cursor-pointer bg-primary-50 hover:bg-primary-100 font-medium" : "cursor-pointer hover:bg-slate-100"),
                          $.disabled && "cursor-not-allowed text-text-muted"
                        ),
                        onClick: () => {
                          F(Z.id), g(!1);
                        },
                        children: [
                          Z.icon && /* @__PURE__ */ x.jsx(bl, { icon: Z.icon, size: "sm" }),
                          /* @__PURE__ */ x.jsx("span", { children: Z.label })
                        ]
                      }
                    );
                  }
                }
              )
            ] }),
            r.some(($) => {
              const Y = t.find((Z) => Z.id === $.fieldId);
              return Y ? w(Y) === "filter" : !0;
            }) && /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 text-[11px] text-text-muted", children: [
              /* @__PURE__ */ x.jsxs("span", { children: [
                r.filter(($) => {
                  const Y = t.find((Z) => Z.id === $.fieldId);
                  return Y ? w(Y) === "filter" : !0;
                }).length,
                " ",
                m.appliedFiltersLabel
              ] }),
              /* @__PURE__ */ x.jsx(
                "button",
                {
                  type: "button",
                  onClick: q,
                  className: "font-medium text-primary-600 hover:underline",
                  children: m.clearAllLabel
                }
              )
            ] })
          ] })
        ]
      }
    );
  }
);
SV.displayName = "TableFilterToolbar";
var ye = /* @__PURE__ */ ((e) => (e.SingleLineText = "SingleLineText", e.LongText = "LongText", e.Number = "Number", e.Decimal = "Decimal", e.Percent = "Percent", e.Currency = "Currency", e.Date = "Date", e.DateTime = "DateTime", e.Time = "Time", e.Email = "Email", e.PhoneNumber = "PhoneNumber", e.URL = "URL", e.Checkbox = "Checkbox", e.MultiSelect = "MultiSelect", e.SingleSelect = "SingleSelect", e.Attachment = "Attachment", e.Rating = "Rating", e.Formula = "Formula", e.Rollup = "Rollup", e.Lookup = "Lookup", e.LinkToAnotherRecord = "LinkToAnotherRecord", e.LinkToAnotherRecordShowing = "LinkToAnotherRecord.Showing", e.Duration = "Duration", e.Barcode = "Barcode", e.QRCode = "QRCode", e.GeoData = "GeoData", e.JSON = "JSON", e.Collaborator = "Collaborator", e.Year = "Year", e.AI = "AI", e))(ye || {}), Ca = /* @__PURE__ */ ((e) => (e.UP = "up", e.DOWN = "down", e.LEFT = "left", e.RIGHT = "right", e))(Ca || {});
const Wi = 32, L4 = {
  1: 32,
  // Small
  2: 40,
  // Medium
  4: 64,
  // Large
  6: 96
  // Extra Large
}, mi = 48, eLe = 150, CV = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif', TV = 13, F2e = {
  NORMAL: "normal"
}, Rr = {
  BORDER: "#e5e7eb",
  // gray-200
  BORDER_DARK: "#d1d5db",
  // gray-300
  HEADER_BG: "#f9fafb",
  // gray-50
  HEADER_TEXT: "#374151",
  // gray-700
  CELL_BG: "#ffffff",
  CELL_BG_HOVER: "#f3f4f6",
  // gray-100
  CELL_BG_SELECTED: "#dbeafe",
  // blue-100
  CELL_BG_EDITING: "#ffffff",
  TEXT: "#111827",
  // gray-900
  TEXT_DISABLED: "#9ca3af",
  // gray-400
  PLACEHOLDER: "#9ca3af",
  // gray-400
  ERROR: "#ef4444",
  // red-500
  WARNING: "#f59e0b",
  // amber-500
  SUCCESS: "#10b981",
  // emerald-500
  GROUP_HEADER_BG: "#f3f4f6",
  // gray-100
  GROUP_HEADER_BORDER: "#e5e7eb",
  // gray-200
  NEW_ROW_INDICATOR: "#3b82f6"
  // blue-500
}, tLe = {
  PRIMARY: "#3b82f6",
  // blue-500
  PRIMARY_LIGHT: "rgba(59, 130, 246, 0.1)",
  BORDER: "#3b82f6"
}, $2e = 100, R4 = 16, rLe = {
  default: 200
}, nLe = {}, D_ = /* @__PURE__ */ new Map();
function iLe() {
  D_.clear();
}
function aLe(e) {
  const t = e.getContext("2d", { alpha: !1 });
  if (!t) throw new Error("Failed to get 2D context");
  return t.font = `${TV}px ${CV}`, t.textBaseline = "middle", t;
}
function yl(e, t, r) {
  if (!e) return 0;
  const n = `${e}_${t.font}_${r || "auto"}`, i = D_.get(n);
  if (i !== void 0) return i;
  let a = t.measureText(e).width;
  if (r && a > r) {
    const s = t.measureText("...").width;
    let l = e;
    for (; l.length > 0 && a > r; )
      l = l.slice(0, -1), a = t.measureText(l).width + s;
  }
  return D_.set(n, a), a;
}
function P4(e, t) {
  const {
    text: r,
    x: n,
    y: i,
    maxWidth: a,
    color: o = Rr.TEXT,
    fontSize: s = TV,
    fontWeight: l = F2e.NORMAL,
    underline: u = !1,
    strikethrough: c = !1
  } = t;
  e.save(), e.font = `${l} ${s}px ${CV}`, e.fillStyle = o;
  let f = r, d = !1;
  if (a && yl(r, e, a) > a && (f = H2e(e, r, a), d = !0), e.fillText(f, n, i), u) {
    const h = yl(f, e), p = 1;
    e.strokeStyle = o, e.lineWidth = p, e.beginPath(), e.moveTo(n, i + s / 2 + 2), e.lineTo(n + h, i + s / 2 + 2), e.stroke();
  }
  if (c) {
    const h = yl(f, e);
    e.strokeStyle = o, e.lineWidth = 1, e.beginPath(), e.moveTo(n, i), e.lineTo(n + h, i), e.stroke();
  }
  return e.restore(), {
    text: f,
    width: yl(f, e),
    isTruncated: d
  };
}
function H2e(e, t, r, n = "...") {
  if (yl(t, e) <= r) return t;
  const i = yl(n, e);
  let a = t;
  for (; a.length > 0; )
    if (a = a.slice(0, -1), yl(a, e) + i <= r)
      return a + n;
  return n;
}
function Bu(e, t) {
  const {
    x: r,
    y: n,
    width: i,
    height: a,
    fillStyle: o,
    borderColor: s = Rr.BORDER,
    borderWidth: l = 1,
    radius: u = 0
  } = t;
  e.save(), u > 0 ? (e.beginPath(), e.roundRect(r, n, i, a, u)) : (e.beginPath(), e.rect(r, n, i, a)), o && (e.fillStyle = o, e.fill()), l > 0 && (e.strokeStyle = s, e.lineWidth = l, e.stroke()), e.restore();
}
function Vb(e, t, r, n, i, a) {
  if (t < i) return null;
  const o = Math.floor((t - i) / n);
  let s = a;
  for (let l = 0; l < r.length; l++) {
    const u = r[l].width || 200;
    if (e >= s && e < s + u)
      return { rowIndex: o, colIndex: l };
    s += u;
  }
  return null;
}
function G2e(e, t) {
  if (t == null) return "";
  switch (e.uidt) {
    case ye.Checkbox:
      return t ? "✓" : "";
    case ye.Date:
    case ye.DateTime:
    case ye.Time:
      return t instanceof Date ? t.toLocaleString() : String(t);
    case ye.MultiSelect:
    case ye.SingleSelect:
      return Array.isArray(t) ? t.map((r) => typeof r == "object" ? r.title : r).join(", ") : typeof t == "object" ? t.title || "" : String(t);
    case ye.Attachment:
      return Array.isArray(t) ? `${t.length} files` : String(t);
    case ye.Rating:
      return "⭐".repeat(t || 0);
    case ye.Percent:
      return `${t}%`;
    case ye.Currency:
      return new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD"
      }).format(t);
    case ye.Collaborator:
      return Array.isArray(t) ? t.map((r) => typeof r == "object" ? r.display_name || r.email : r).join(", ") : typeof t == "object" ? t.display_name || t.email || "" : String(t);
    case ye.LinkToAnotherRecord:
      return Array.isArray(t) ? t.map((r) => typeof r == "object" ? r.title || r.id : r).join(", ") : typeof t == "object" ? t.title || String((t == null ? void 0 : t.id) || "") : String(t);
    default:
      return String(t);
  }
}
function k4(e) {
  return !e.system && !e.readonly && e.uidt !== ye.Formula;
}
function oLe(e) {
  return [
    ye.Formula,
    ye.Rollup,
    ye.Lookup,
    ye.LinkToAnotherRecordShowing
  ].includes(e.uidt);
}
function sLe(e) {
  switch (e.uidt) {
    case ye.Checkbox:
      return !1;
    case ye.Number:
    case ye.Decimal:
    case ye.Percent:
    case ye.Currency:
    case ye.Rating:
    case ye.Year:
      return 0;
    case ye.MultiSelect:
    case ye.Attachment:
    case ye.LinkToAnotherRecord:
    case ye.Collaborator:
      return [];
    case ye.SingleSelect:
      return null;
    case ye.Date:
    case ye.DateTime:
    case ye.Time:
      return /* @__PURE__ */ new Date();
    default:
      return "";
  }
}
function lLe(e) {
  return e.rowMeta.isNew ? "⭐" : e.rowMeta.isDirty ? "●" : e.rowMeta.commentCount ? "💬" : "";
}
function W2e(e, t) {
  let r = null;
  return function(...i) {
    const a = () => {
      r = null, e(...i);
    };
    r && clearTimeout(r), r = setTimeout(a, t);
  };
}
function O4(e, t) {
  let r;
  return function(...i) {
    r || (e(...i), r = !0, setTimeout(() => r = !1, t));
  };
}
function uLe(e) {
  return {
    [ye.SingleLineText]: 200,
    [ye.LongText]: 300,
    [ye.Number]: 120,
    [ye.Decimal]: 120,
    [ye.Percent]: 120,
    [ye.Currency]: 140,
    [ye.Date]: 150,
    [ye.DateTime]: 180,
    [ye.Time]: 120,
    [ye.Email]: 200,
    [ye.PhoneNumber]: 150,
    [ye.URL]: 250,
    [ye.Checkbox]: 80,
    [ye.MultiSelect]: 200,
    [ye.SingleSelect]: 180,
    [ye.Attachment]: 200,
    [ye.Rating]: 150,
    [ye.Formula]: 150,
    [ye.Rollup]: 150,
    [ye.Lookup]: 150,
    [ye.LinkToAnotherRecord]: 200,
    [ye.Duration]: 120,
    [ye.Barcode]: 150,
    [ye.QRCode]: 150,
    [ye.GeoData]: 200,
    [ye.JSON]: 250,
    [ye.Collaborator]: 200,
    [ye.Year]: 100,
    [ye.AI]: 200,
    [ye.LinkToAnotherRecordShowing]: 200
  }[e] || 200;
}
function cLe(e) {
  return {
    [ye.SingleLineText]: "📝",
    [ye.LongText]: "📄",
    [ye.Number]: "🔢",
    [ye.Decimal]: "🔢",
    [ye.Percent]: "💯",
    [ye.Currency]: "💰",
    [ye.Date]: "📅",
    [ye.DateTime]: "📅",
    [ye.Time]: "⏰",
    [ye.Email]: "📧",
    [ye.PhoneNumber]: "📱",
    [ye.URL]: "🔗",
    [ye.Checkbox]: "☑️",
    [ye.MultiSelect]: "🏷️",
    [ye.SingleSelect]: "🏷️",
    [ye.Attachment]: "📎",
    [ye.Rating]: "⭐",
    [ye.Formula]: "🧮",
    [ye.Rollup]: "📊",
    [ye.Lookup]: "🔍",
    [ye.LinkToAnotherRecord]: "🔗",
    [ye.Duration]: "⏱️",
    [ye.Barcode]: "📊",
    [ye.QRCode]: "📱",
    [ye.GeoData]: "📍",
    [ye.JSON]: "📋",
    [ye.Collaborator]: "👤",
    [ye.Year]: "📆",
    [ye.AI]: "🤖",
    [ye.LinkToAnotherRecordShowing]: "🔗"
  }[e] || "📄";
}
function U2e(e) {
  const {
    meta: t,
    data: r,
    totalRows: n,
    loadData: i,
    updateOrSaveRow: a,
    deleteRow: o,
    addEmptyRow: s,
    expandForm: l,
    rowHeightEnum: u = 1,
    readOnly: c = !1
  } = e, f = Ve(null), d = Ve(null), h = Ve(null), p = Ve(null), [v, g] = Ze({
    width: 0,
    height: 0
  }), [m, y] = Ze({
    left: 0,
    top: 0
  }), [b, w] = Ze(null), [_, S] = Ze(null), [C, A] = Ze(null), [M, D] = Ze(null), [N] = Ze(!1), [R] = Ze(null), [O, E] = Ze(!1), [L] = Ze(!1), I = Gt(() => t.columns.filter((Q) => !Q.hidden), [t.columns]), P = Gt(() => L4[u] || L4[1], [u]), k = Gt(() => {
    let Q = mi;
    return I.forEach((ce) => {
      Q += ce.width || 200;
    }), Q;
  }, [I]), z = Gt(() => Wi + n * P, [n, P]), V = Gt(() => {
    const Q = Math.floor(m.top / P), ce = Math.min(
      n - 1,
      Math.ceil((m.top + v.height) / P)
    );
    let te = 0, oe = 0, de = mi;
    for (let Pe = 0; Pe < I.length; Pe++) {
      const Ke = I[Pe].width || 200;
      de + Ke >= m.left && te === 0 && (te = Pe), de <= m.left + v.width && (oe = Pe), de += Ke;
    }
    return { startRowIndex: Q, endRowIndex: ce, startColIndex: te, endColIndex: oe };
  }, [m, v, P, n, I]), B = Te(
    O4((Q) => {
      if (!f.current) return;
      const ce = f.current.getBoundingClientRect(), te = Q.clientX - ce.left, oe = Q.clientY - ce.top, de = Vb(
        te,
        oe,
        I,
        P,
        Wi,
        mi
      );
      w(de || null);
    }, R4),
    [N, R, I, P]
  ), F = Te(() => {
    w(null);
  }, []), H = Te((Q) => {
    if (!f.current) return;
    const ce = f.current.getBoundingClientRect(), te = Q.clientX - ce.left, oe = Q.clientY - ce.top, de = Vb(
      te,
      oe,
      I,
      P,
      Wi,
      mi
    );
    de && (S(de), A({
      startRowIndex: de.rowIndex,
      endRowIndex: de.rowIndex,
      startColIndex: de.colIndex,
      endColIndex: de.colIndex
    }));
  }, [I, P]), G = Te((Q) => {
    if (!f.current || c) return;
    const ce = f.current.getBoundingClientRect(), te = Q.clientX - ce.left, oe = Q.clientY - ce.top, de = Vb(
      te,
      oe,
      I,
      P,
      Wi,
      mi
    );
    if (de) {
      const Pe = I[de.colIndex];
      if (k4(Pe)) {
        const Ke = Array.from(r.values())[de.rowIndex];
        if (Ke) {
          const it = Ke.row[Pe.id];
          D({ rowIndex: de.rowIndex, colIndex: de.colIndex, value: it });
        }
      }
    }
  }, [I, P, r, c]), W = Te(
    W2e((Q) => {
      const ce = Q.target;
      y({
        left: ce.scrollLeft,
        top: ce.scrollTop
      }), ce.scrollTop + ce.clientHeight >= ce.scrollHeight - $2e;
    }, R4),
    [L]
  ), X = Te((Q) => {
    if (_)
      switch (Q.key) {
        case "ArrowUp":
          Q.preventDefault(), q(Ca.UP);
          break;
        case "ArrowDown":
          Q.preventDefault(), q(Ca.DOWN);
          break;
        case "ArrowLeft":
          Q.preventDefault(), q(Ca.LEFT);
          break;
        case "ArrowRight":
          Q.preventDefault(), q(Ca.RIGHT);
          break;
        case "Enter":
          Q.preventDefault(), M ? U() : J();
          break;
        case "Escape":
          Q.preventDefault(), $();
          break;
        case "Delete":
        case "Backspace":
          !M && !c && (Q.preventDefault(), Y());
          break;
      }
  }, [_, M, c]), q = Te((Q) => {
    if (!_) return;
    let { rowIndex: ce, colIndex: te } = _;
    switch (Q) {
      case Ca.UP:
        ce = Math.max(0, ce - 1);
        break;
      case Ca.DOWN:
        ce = Math.min(n - 1, ce + 1);
        break;
      case Ca.LEFT:
        te = Math.max(0, te - 1);
        break;
      case Ca.RIGHT:
        te = Math.min(I.length - 1, te + 1);
        break;
    }
    S({ rowIndex: ce, colIndex: te }), A({
      startRowIndex: ce,
      endRowIndex: ce,
      startColIndex: te,
      endColIndex: te
    });
  }, [_, n, I.length]), J = Te(() => {
    if (!_ || c) return;
    const Q = I[_.colIndex];
    if (!k4(Q)) return;
    const ce = Array.from(r.values())[_.rowIndex];
    if (ce) {
      const te = ce.row[Q.id];
      D({ rowIndex: _.rowIndex, colIndex: _.colIndex, value: te });
    }
  }, [_, I, r, c]), U = Te(async () => {
    if (!M) return;
    const Q = Array.from(r.values())[M.rowIndex], ce = I[M.colIndex];
    if (Q && ce)
      try {
        await a(Q, ce.id), D(null);
      } catch (te) {
        console.error("Failed to save cell:", te);
      }
  }, [M, r, I, a]), $ = Te(() => {
    D(null);
  }, []), Y = Te(() => {
  }, []), Z = Te(() => {
    s == null || s();
  }, [s]), K = Te(async (Q) => {
    o && await o(Q);
  }, [o]), ie = Te((Q) => {
    l == null || l(Q);
  }, [l]);
  return Oe(() => {
    const Q = O4(() => {
      d.current && g({
        width: d.current.clientWidth,
        height: d.current.clientHeight
      });
    }, 100);
    return Q(), window.addEventListener("resize", Q), () => window.removeEventListener("resize", Q);
  }, []), Oe(() => (window.addEventListener("keydown", X), () => window.removeEventListener("keydown", X)), [X]), Oe(() => {
    (async () => {
      E(!0);
      try {
        await i();
      } finally {
        E(!1);
      }
    })();
  }, [i]), {
    // Refs
    canvasRef: f,
    containerRef: d,
    offscreenCanvasRef: h,
    ctxRef: p,
    // State
    dimensions: v,
    scrollPosition: m,
    hoveredCell: b,
    selectedCell: _,
    selectedRange: C,
    editingCell: M,
    isDragging: N,
    isLoading: O,
    isLoadingMore: L,
    // Computed
    columns: I,
    rowHeight: P,
    gridWidth: k,
    gridHeight: z,
    visibleRange: V,
    // Handlers
    handleMouseMove: B,
    handleMouseLeave: F,
    handleClick: H,
    handleDoubleClick: G,
    handleScroll: W,
    handleAddRow: Z,
    handleDeleteRow: K,
    handleExpandForm: ie,
    startEditingCell: J,
    saveEditingCell: U,
    cancelEditingCell: $,
    // Navigation
    navigateCell: q
  };
}
const Y2e = T.forwardRef(
  (e, t) => {
    const {
      className: r,
      style: n,
      disableSkeleton: i = !1
    } = e, {
      canvasRef: a,
      containerRef: o,
      dimensions: s,
      hoveredCell: l,
      selectedCell: u,
      editingCell: c,
      isLoading: f,
      columns: d,
      rowHeight: h,
      gridWidth: p,
      gridHeight: v,
      visibleRange: g,
      handleMouseMove: m,
      handleMouseLeave: y,
      handleClick: b,
      handleDoubleClick: w,
      handleScroll: _
    } = U2e(e), S = T.useCallback(() => {
      const N = a.current, R = N == null ? void 0 : N.getContext("2d");
      if (!N || !R) return;
      R.fillStyle = Rr.CELL_BG, R.fillRect(0, 0, N.width, N.height);
      const { startRowIndex: O, endRowIndex: E, startColIndex: L, endColIndex: I } = g;
      C(R, L, I);
      for (let P = O; P <= E; P++)
        A(R, P, L, I);
      u && M(R, u.rowIndex, u.colIndex), l && l !== u && D(R, l.rowIndex, l.colIndex);
    }, [g, u, l, d]), C = T.useCallback(
      (N, R, O) => {
        let E = mi;
        Bu(N, {
          x: 0,
          y: 0,
          width: mi,
          height: Wi,
          fillStyle: Rr.HEADER_BG,
          borderColor: Rr.BORDER
        });
        for (let L = R; L <= O; L++) {
          const I = d[L];
          if (!I) continue;
          const P = I.width || 200;
          Bu(N, {
            x: E,
            y: 0,
            width: P,
            height: Wi,
            fillStyle: Rr.HEADER_BG,
            borderColor: Rr.BORDER
          }), P4(N, {
            text: I.title,
            x: E + 8,
            y: Wi / 2,
            maxWidth: P - 16,
            color: Rr.HEADER_TEXT,
            fontSize: 12,
            fontWeight: "bold"
          }), E += P;
        }
      },
      [d]
    ), A = T.useCallback(
      (N, R, O, E) => {
        const L = Wi + R * h;
        Bu(N, {
          x: 0,
          y: L,
          width: mi,
          height: h,
          fillStyle: Rr.CELL_BG,
          borderColor: Rr.BORDER
        });
        let I = mi;
        for (let P = O; P <= E; P++) {
          const k = d[P];
          if (!k) continue;
          const z = k.width || 200, V = (u == null ? void 0 : u.rowIndex) === R && (u == null ? void 0 : u.colIndex) === P, B = (l == null ? void 0 : l.rowIndex) === R && (l == null ? void 0 : l.colIndex) === P;
          let F = Rr.CELL_BG;
          V ? F = Rr.CELL_BG_SELECTED : B && (F = Rr.CELL_BG_HOVER), Bu(N, {
            x: I,
            y: L,
            width: z,
            height: h,
            fillStyle: F,
            borderColor: Rr.BORDER
          });
          const H = e.data.get(R);
          if (H) {
            const G = H.row[k.id], W = G2e(k, G);
            W && P4(N, {
              text: W,
              x: I + 8,
              y: L + h / 2,
              maxWidth: z - 16,
              color: Rr.TEXT
            });
          }
          I += z;
        }
      },
      [d, h, u, l, e.data]
    ), M = T.useCallback(
      (N, R, O) => {
        const E = d[O], L = (E == null ? void 0 : E.width) || 200, I = mi + O * L, P = Wi + R * h;
        Bu(N, {
          x: I,
          y: P,
          width: L,
          height: h,
          borderColor: Rr.BORDER,
          borderWidth: 2
        });
      },
      [d, h]
    ), D = T.useCallback(
      (N, R, O) => {
        const E = d[O], L = (E == null ? void 0 : E.width) || 200, I = mi + O * L, P = Wi + R * h;
        Bu(N, {
          x: I,
          y: P,
          width: L,
          height: h,
          borderColor: Rr.BORDER_DARK,
          borderWidth: 1
        });
      },
      [d, h]
    );
    return T.useLayoutEffect(() => {
      S();
    }, [S]), T.useLayoutEffect(() => {
      const N = a.current;
      if (N && s.width > 0 && s.height > 0) {
        const R = window.devicePixelRatio || 1;
        N.width = s.width * R, N.height = s.height * R, N.style.width = `${s.width}px`, N.style.height = `${s.height}px`;
        const O = N.getContext("2d");
        O && O.scale(R, R);
      }
    }, [s]), /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: t,
        className: me(
          fe(
            "relative overflow-hidden bg-white border border-gray-200 rounded-lg",
            r
          )
        ),
        style: {
          width: "100%",
          height: "600px",
          ...n
        },
        children: [
          /* @__PURE__ */ x.jsxs(
            "div",
            {
              ref: o,
              className: "absolute inset-0 overflow-auto",
              onScroll: _,
              style: {
                width: "100%",
                height: "100%"
              },
              children: [
                /* @__PURE__ */ x.jsx(
                  "canvas",
                  {
                    ref: a,
                    className: "block cursor-cell",
                    style: {
                      width: `${p}px`,
                      height: `${v}px`
                    },
                    onMouseMove: m,
                    onMouseLeave: y,
                    onClick: b,
                    onDoubleClick: w
                  }
                ),
                f && !i && /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-white/50 backdrop-blur-sm", children: /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col items-center gap-2", children: [
                  /* @__PURE__ */ x.jsx("div", { className: "h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent" }),
                  /* @__PURE__ */ x.jsx("p", { className: "text-sm text-gray-600", children: "Loading data..." })
                ] }) })
              ]
            }
          ),
          c && /* @__PURE__ */ x.jsx(
            "div",
            {
              style: {
                position: "absolute",
                left: 0,
                top: 0,
                pointerEvents: "none"
              }
            }
          )
        ]
      }
    );
  }
);
Y2e.displayName = "CanvasGrid";
const Zm = "id", AV = "status", z4 = (e, t, r, n, i) => {
  const a = t ?? e.defaultMappings ?? {}, o = a.idField || Zm, s = a.columnKey || AV, l = {}, u = (h) => {
    const p = h[o] ?? h[Zm];
    return typeof p == "string" || typeof p == "number" ? String(p) : JSON.stringify(p);
  }, c = /* @__PURE__ */ new Set();
  r.forEach((h) => {
    const p = u(h), v = { id: p, data: h };
    l[p] = v;
    const g = h[s];
    g != null && c.add(String(g));
  });
  let f;
  if (n && n.length > 0)
    f = [...n].sort((h, p) => (h.order ?? 0) - (p.order ?? 0));
  else {
    const h = e.fields.find((v) => v.name === s), p = h == null ? void 0 : h.enumValues;
    p && p.length > 0 ? f = p.map((v, g) => ({
      id: v,
      value: v,
      label: h != null && h.label ? `${h.label}: ${v}` : v,
      order: g,
      visible: !0
    })) : f = Array.from(c).map((g, m) => ({
      id: g,
      value: g,
      label: g,
      order: m,
      visible: !0
    }));
  }
  const d = f.map((h) => {
    const v = r.filter((y) => String(y[s]) === h.value).map((y) => u(y)), g = i && i > 0 ? i : void 0, m = g ? v.slice(0, g) : v;
    return {
      key: h.value,
      config: h,
      itemIds: m,
      totalCount: v.length,
      hasMore: g ? v.length > g : !1,
      loadingMore: !1
    };
  });
  return {
    state: {
      itemsById: l,
      columns: d
    },
    columnKeyField: s,
    idField: o,
    columnConfigs: f
  };
}, Z2e = (e) => {
  const { schema: t, mappings: r, items: n, columns: i, pageSize: a } = e, [{ state: o, columnKeyField: s, idField: l, columnConfigs: u }, c] = T.useState(
    () => z4(t, r, n, i, a)
  );
  T.useEffect(() => {
    c(z4(t, r, n, i, a));
  }, [t, r, n, i, a]);
  const f = T.useCallback(
    (y) => o.itemsById[y],
    [o.itemsById]
  ), d = T.useCallback(
    (y) => {
      c((b) => {
        const w = y(b.state);
        return {
          ...b,
          state: w
        };
      });
    },
    []
  ), h = T.useCallback(
    (y, b, w, _) => {
      d((S) => {
        if (b.columnKey === w.columnKey) {
          const L = S.columns.findIndex((B) => B.key === b.columnKey);
          if (L === -1) return S;
          const I = S.columns[L], P = I.itemIds.indexOf(y);
          if (P === -1) return S;
          const k = [...I.itemIds];
          k.splice(P, 1);
          const z = Math.max(0, Math.min(_, k.length));
          k.splice(z, 0, y);
          const V = [...S.columns];
          return V[L] = {
            ...I,
            itemIds: k
          }, {
            ...S,
            columns: V
          };
        }
        const C = S.columns.findIndex((L) => L.key === b.columnKey), A = S.columns.findIndex((L) => L.key === w.columnKey);
        if (C === -1 || A === -1) return S;
        const M = S.columns[C], D = S.columns[A];
        if (!M.itemIds.includes(y)) return S;
        const N = M.itemIds.filter((L) => L !== y), R = [...D.itemIds], O = Math.max(0, Math.min(_, R.length));
        R.splice(O, 0, y);
        const E = [...S.columns];
        return E[C] = {
          ...M,
          itemIds: N,
          totalCount: Math.max(0, M.totalCount - 1)
        }, E[A] = {
          ...D,
          itemIds: R,
          totalCount: D.totalCount + 1
        }, {
          ...S,
          columns: E
        };
      });
    },
    [d]
  ), p = T.useCallback(
    (y, b) => {
      d((w) => {
        const _ = w.itemsById[y];
        if (!_) return w;
        const S = {
          id: y,
          data: {
            ..._.data,
            ...b
          }
        };
        return {
          ...w,
          itemsById: {
            ...w.itemsById,
            [y]: S
          }
        };
      });
    },
    [d]
  ), v = T.useCallback(
    (y) => {
      const b = r ?? t.defaultMappings ?? {}, w = b.idField || Zm, _ = y[w] ?? y[Zm], S = typeof _ == "string" || typeof _ == "number" ? String(_) : JSON.stringify(_), C = b.columnKey || AV, A = y[C], M = A != null ? String(A) : "";
      d((D) => {
        const N = {
          id: S,
          data: y
        }, R = {
          ...D.itemsById,
          [S]: N
        }, O = D.columns.findIndex((I) => I.key === M);
        if (O === -1)
          return {
            ...D,
            itemsById: R
          };
        const E = D.columns[O], L = [...D.columns];
        return L[O] = {
          ...E,
          itemIds: [S, ...E.itemIds],
          totalCount: E.totalCount + 1
        }, {
          ...D,
          itemsById: R,
          columns: L
        };
      });
    },
    [r, t, d]
  ), g = T.useCallback(
    (y) => {
      d((b) => {
        if (!b.itemsById[y]) return b;
        const w = { ...b.itemsById };
        delete w[y];
        const _ = b.columns.map((S) => {
          if (!S.itemIds.includes(y)) return S;
          const C = S.itemIds.filter((A) => A !== y);
          return {
            ...S,
            itemIds: C,
            totalCount: Math.max(0, S.totalCount - 1)
          };
        });
        return {
          ...b,
          itemsById: w,
          columns: _
        };
      });
    },
    [d]
  ), m = T.useCallback((y) => {
    c((b) => ({
      ...b,
      state: y
    }));
  }, []);
  return {
    state: o,
    columnKeyField: s,
    idField: l,
    columnConfigs: u,
    getItemById: f,
    moveItemLocal: h,
    updateItemLocal: p,
    addItemLocal: v,
    removeItemLocal: g,
    replaceState: m
  };
}, $v = (e, t) => {
  var i, a;
  const r = (i = e.meta) == null ? void 0 : i.target;
  if (r != null && r.instanceId && r.instanceId !== t)
    return !1;
  const n = (a = e.payload) == null ? void 0 : a.instanceId;
  return !(n && n !== t);
}, X2e = (e) => {
  const { instanceId: t, moveItemLocal: r, updateItemLocal: n, addItemLocal: i, removeItemLocal: a } = e;
  al(
    "AI.KANBAN.MOVE_CARD",
    (o) => {
      if (!$v(o, t)) return;
      const { cardId: s, fromColumnId: l, toColumnId: u, toIndex: c } = o.payload || {};
      if (!s || !u || typeof c != "number") return;
      r(s, { columnKey: l || u }, { columnKey: u }, c);
    },
    [t, r]
  ), al(
    "AI.KANBAN.UPDATE_CARD",
    (o) => {
      if (!$v(o, t)) return;
      const { cardId: s, patch: l } = o.payload || {};
      !s || !l || n(s, l);
    },
    [t, n]
  ), al(
    "AI.KANBAN.CREATE_CARD",
    (o) => {
      if (!$v(o, t) || !i) return;
      const { data: s } = o.payload || {};
      s && i(s);
    },
    [t, i]
  ), al(
    "AI.KANBAN.DELETE_CARD",
    (o) => {
      if (!$v(o, t) || !a) return;
      const { cardId: s } = o.payload || {};
      s && a(s);
    },
    [t, a]
  );
}, K2e = (e, t) => {
  var r;
  return (r = e == null ? void 0 : e.fieldPermissions) == null ? void 0 : r[t];
}, q2e = (e, t, r, n) => {
  const i = e.toLowerCase();
  if (i === "text" || i === "richtext")
    return /* @__PURE__ */ x.jsx(Lg, { name: t, disabled: n });
  if (i === "number")
    return /* @__PURE__ */ x.jsx(mr, { type: "number", name: t, disabled: n });
  if (i === "boolean")
    return /* @__PURE__ */ x.jsx(Zc, { name: t, disabled: n });
  if (i === "enum" && (r != null && r.enumValues) && r.enumValues.length > 0) {
    const a = r.enumValues.map((o) => ({ label: o, value: o }));
    return /* @__PURE__ */ x.jsx(cy, { name: t, options: a, disabled: n });
  }
  return i === "date" ? /* @__PURE__ */ x.jsx(La, { name: t, disabled: n }) : i === "datetime" ? /* @__PURE__ */ x.jsx(Ra, { name: t, disabled: n }) : /* @__PURE__ */ x.jsx(mr, { name: t, disabled: n });
}, J2e = ({ field: e, children: t, onFieldClick: r }) => {
  const {
    attributes: n,
    listeners: i,
    setNodeRef: a,
    transform: o,
    transition: s,
    isDragging: l
  } = hS({ id: e.name }), u = {
    transform: pS.Transform.toString(o),
    transition: s,
    opacity: l ? 0.5 : 1,
    position: "relative",
    zIndex: l ? 10 : 1
  };
  return /* @__PURE__ */ x.jsxs("div", { ref: a, style: u, className: "group relative", children: [
    /* @__PURE__ */ x.jsx(
      "div",
      {
        className: "absolute -left-5 top-8 flex h-6 w-6 cursor-grab items-center justify-center opacity-0 transition-opacity group-hover:opacity-100 active:cursor-grabbing",
        ...n,
        ...i,
        children: /* @__PURE__ */ x.jsx(pP, { size: 14, className: "text-slate-400" })
      }
    ),
    /* @__PURE__ */ x.jsx("div", { className: "relative", children: /* @__PURE__ */ x.jsx(
      cP,
      {
        name: e.name,
        label: /* @__PURE__ */ x.jsx(
          "span",
          {
            onClick: (c) => {
              c.preventDefault(), r == null || r(e);
            },
            className: "cursor-pointer hover:text-primary hover:underline decoration-dashed underline-offset-4 flex items-center gap-1",
            title: "Nhấn để cấu hình thuộc tính",
            children: e.label ?? e.name
          }
        ),
        required: e.isRequired,
        children: t
      }
    ) })
  ] });
}, Q2e = ({
  schema: e,
  mappings: t,
  permissions: r,
  mode: n,
  initialValues: i,
  onSubmit: a,
  onCancel: o,
  onAddProperty: s,
  onFieldClick: l,
  onReorder: u
}) => {
  const c = oS(
    Cc(dS, { activationConstraint: { distance: 5 } }),
    Cc(fS, { coordinateGetter: cS })
  ), f = async (h) => {
    await a(h);
  }, d = (h) => {
    const { active: p, over: v } = h;
    if (p.id !== (v == null ? void 0 : v.id)) {
      const g = e.fields.findIndex((y) => y.name === p.id), m = e.fields.findIndex((y) => y.name === (v == null ? void 0 : v.id));
      g !== -1 && m !== -1 && (u == null || u(g, m));
    }
  };
  return /* @__PURE__ */ x.jsxs(
    uP,
    {
      options: { defaultValues: i },
      onSubmit: f,
      className: "flex flex-col h-full",
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex-1 overflow-y-auto p-2 pl-6", children: [
          " ",
          /* @__PURE__ */ x.jsx(
            sS,
            {
              sensors: c,
              collisionDetection: hP,
              onDragEnd: d,
              children: /* @__PURE__ */ x.jsx(
                lS,
                {
                  items: e.fields.map((h) => h.name),
                  strategy: uS,
                  children: /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-4", children: e.fields.map((h) => {
                    const p = K2e(r, h.name);
                    if (p === "hidden") return null;
                    const v = p === "readonly";
                    return /* @__PURE__ */ x.jsx(
                      J2e,
                      {
                        field: h,
                        onFieldClick: l,
                        children: q2e(h.type, h.name, { enumValues: h.enumValues }, v)
                      },
                      h.name
                    );
                  }) })
                }
              )
            }
          ),
          s && /* @__PURE__ */ x.jsx("div", { className: "mt-4", children: /* @__PURE__ */ x.jsxs(
            xt,
            {
              type: "button",
              variant: "ghost",
              className: "justify-start px-0 text-text-secondary hover:text-primary",
              onClick: s,
              children: [
                /* @__PURE__ */ x.jsx(Qc, { size: 16, className: "mr-2" }),
                "Thêm thuộc tính"
              ]
            }
          ) })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex justify-end gap-2 pt-4 border-t border-slate-100 mt-4 px-2", children: [
          o && /* @__PURE__ */ x.jsx(xt, { type: "button", variant: "secondary", onClick: o, children: "Hủy" }),
          /* @__PURE__ */ x.jsx(wG, { variant: "primary", children: n === "create" ? "Tạo task" : "Lưu thay đổi" })
        ] })
      ]
    }
  );
};
Q2e.displayName = "TaskForm";
const MV = T.forwardRef(
  ({
    className: e,
    onFilterClick: t,
    onSortClick: r,
    onSettingsClick: n,
    onSearch: i,
    filterActive: a,
    sortActive: o,
    settingsActive: s,
    extraActions: l,
    ...u
  }, c) => /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: c,
      className: me(
        fe("mb-3 flex flex-wrap items-center justify-between gap-3", e)
      ),
      ...u,
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
          i && /* @__PURE__ */ x.jsxs("div", { className: "relative w-64", children: [
            /* @__PURE__ */ x.jsx(IP, { className: "absolute left-2.5 top-1/2 -translate-y-1/2 text-text-muted", size: 14 }),
            /* @__PURE__ */ x.jsx(
              mr,
              {
                placeholder: "Tìm kiếm...",
                className: "h-9 pl-8 text-sm",
                onChange: (f) => i(f.target.value)
              }
            )
          ] }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-1 border-l border-slate-200 pl-2", children: [
            t && /* @__PURE__ */ x.jsx(
              xt,
              {
                size: "sm",
                variant: "ghost",
                onClick: t,
                className: fe("h-8 w-8 px-0 text-text-secondary"),
                "aria-label": "Lọc",
                children: /* @__PURE__ */ x.jsx(Pg, { size: 16 })
              }
            ),
            r && /* @__PURE__ */ x.jsxs(
              xt,
              {
                size: "sm",
                variant: o ? "primary" : "ghost",
                onClick: r,
                className: fe(o ? "" : "text-text-secondary"),
                children: [
                  /* @__PURE__ */ x.jsx(MP, { size: 14, className: "mr-1.5" }),
                  "Sắp xếp"
                ]
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
          l,
          n && /* @__PURE__ */ x.jsx(
            xt,
            {
              size: "sm",
              variant: s ? "primary" : "ghost",
              onClick: n,
              className: fe("h-8 w-8 px-0", s ? "" : "text-text-secondary"),
              "aria-label": "Cài đặt",
              children: /* @__PURE__ */ x.jsx(bS, { size: 16 })
            }
          )
        ] })
      ]
    }
  )
);
MV.displayName = "ViewToolbar";
const ewe = ({ items: e, open: t, onClose: r }) => {
  const [n, i] = T.useState([
    { title: "Xem cài đặt", items: e }
  ]);
  T.useEffect(() => {
    if (!t) {
      const c = setTimeout(() => {
        i([{ title: "Xem cài đặt", items: e }]);
      }, 300);
      return () => clearTimeout(c);
    }
  }, [t, e]);
  const a = n[n.length - 1], o = (c) => {
    c.children && c.type !== "group" ? i((f) => [...f, { title: c.label, items: c.children }]) : c.onClick && c.onClick();
  }, s = () => {
    i((c) => c.length <= 1 ? c : c.slice(0, c.length - 1));
  }, l = (c) => {
    var f;
    return c.type === "group" ? /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-1 py-2 first:pt-0", children: [
      /* @__PURE__ */ x.jsx("div", { className: "px-3 py-1 text-xs font-medium uppercase text-text-muted", children: c.label }),
      (f = c.children) == null ? void 0 : f.map((d) => l(d))
    ] }, c.id) : /* @__PURE__ */ x.jsxs(
      "button",
      {
        onClick: () => o(c),
        className: me(
          fe(
            "flex w-full items-center justify-between gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
            "hover:bg-slate-50 active:bg-slate-100"
          )
        ),
        children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3", children: [
            c.icon && /* @__PURE__ */ x.jsx("span", { className: "text-text-secondary", children: c.icon }),
            /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium text-text-primary", children: c.label }),
              c.description && /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-secondary", children: c.description })
            ] })
          ] }),
          c.children && /* @__PURE__ */ x.jsx(vS, { size: 16, className: "text-text-muted" })
        ]
      },
      c.id
    );
  }, u = /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    n.length > 1 && /* @__PURE__ */ x.jsx(
      xt,
      {
        size: "sm",
        variant: "ghost",
        className: "-ml-2 h-8 w-8 px-0",
        onClick: s,
        "aria-label": "Back",
        children: /* @__PURE__ */ x.jsx(hy, { size: 16 })
      }
    ),
    /* @__PURE__ */ x.jsx("span", { children: a.title })
  ] });
  return /* @__PURE__ */ x.jsx(
    tf,
    {
      open: t,
      onClose: r,
      title: u,
      size: "sm",
      className: "flex flex-col",
      children: /* @__PURE__ */ x.jsx("div", { className: "flex-1", children: /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-1", children: a.items.map((c) => l(c)) }) })
    }
  );
}, j4 = [
  { type: "string", label: "Văn bản", icon: /* @__PURE__ */ x.jsx(PP, { size: 16 }), description: "Tên, tiêu đề, ghi chú ngắn" },
  { type: "number", label: "Số", icon: /* @__PURE__ */ x.jsx(uU, { size: 16 }), description: "Số lượng, điểm số, giá trị" },
  { type: "date", label: "Ngày", icon: /* @__PURE__ */ x.jsx(gG, { size: 16 }), description: "Ngày hết hạn, ngày bắt đầu" },
  { type: "enum", label: "Danh sách chọn", icon: /* @__PURE__ */ x.jsx(xS, { size: 16 }), description: "Trạng thái, ưu tiên, loại" },
  { type: "boolean", label: "Check box", icon: /* @__PURE__ */ x.jsx(ZU, { size: 16 }), description: "Đúng/Sai, Hoàn thành" },
  { type: "text", label: "Văn bản dài", icon: /* @__PURE__ */ x.jsx(qU, { size: 16 }), description: "Mô tả chi tiết" },
  { type: "user", label: "Người dùng", icon: /* @__PURE__ */ x.jsx(aY, { size: 16 }), description: "Người được giao, người tạo" }
], twe = ({ open: e, onClose: t, onAdd: r, editField: n, onUpdate: i }) => {
  const [a, o] = T.useState("list"), [s, l] = T.useState(null), [u, c] = T.useState(""), [f, d] = T.useState([]), [h, p] = T.useState("");
  T.useEffect(() => {
    if (e && n) {
      const _ = j4.find((S) => S.type === n.type) ?? null;
      l(_), o("config"), c(n.label), d(n.enumValues ?? []), p("");
      return;
    }
    e || setTimeout(() => {
      o("list"), l(null), c(""), d([]), p("");
    }, 300);
  }, [e, n]);
  const v = (_) => {
    if (l(_), o("config"), !n) {
      c(""), d([]);
      return;
    }
    _.type !== "enum" && d([]);
  }, g = () => {
    o("list"), l(null);
  }, m = () => {
    h.trim() && (d([...f, h.trim()]), p(""));
  }, y = (_) => {
    d(f.filter((S, C) => C !== _));
  }, b = () => {
    if (!u.trim() || !s) return;
    const _ = {
      name: (n == null ? void 0 : n.name) ?? u.trim().toLowerCase().replace(/\s+/g, "_"),
      label: u.trim(),
      type: s.type,
      enumValues: s.type === "enum" ? f : void 0
    };
    n && i ? i(_) : r(_), t();
  }, w = /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    a === "config" && /* @__PURE__ */ x.jsx(
      xt,
      {
        size: "sm",
        variant: "ghost",
        className: "-ml-2 h-8 w-8 px-0",
        onClick: g,
        "aria-label": "Back",
        children: /* @__PURE__ */ x.jsx(hy, { size: 16 })
      }
    ),
    /* @__PURE__ */ x.jsx("span", { children: a === "list" ? "Thêm thuộc tính" : n ? `Chỉnh sửa ${s == null ? void 0 : s.label}` : `Cấu hình ${s == null ? void 0 : s.label}` })
  ] });
  return /* @__PURE__ */ x.jsx(
    tf,
    {
      open: e,
      onClose: t,
      title: w,
      size: "sm",
      className: "flex flex-col z-[60]",
      children: /* @__PURE__ */ x.jsx("div", { className: "flex-1 overflow-y-auto", children: a === "list" ? /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-1", children: j4.map((_) => /* @__PURE__ */ x.jsx(
        "button",
        {
          onClick: () => v(_),
          className: me(
            fe(
              "flex w-full items-center justify-between gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
              "hover:bg-slate-50 active:bg-slate-100"
            )
          ),
          children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ x.jsx("span", { className: "text-text-secondary", children: _.icon }),
            /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col", children: [
              /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium text-text-primary", children: _.label }),
              /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-secondary", children: _.description })
            ] })
          ] })
        },
        _.type
      )) }) : /* @__PURE__ */ x.jsxs("div", { className: "space-y-4 p-1", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "space-y-1.5", children: [
          /* @__PURE__ */ x.jsx("label", { className: "text-sm font-medium text-text-secondary", children: "Tên thuộc tính" }),
          /* @__PURE__ */ x.jsx(
            mr,
            {
              value: u,
              onChange: (_) => c(_.target.value),
              placeholder: "Ví dụ: Độ ưu tiên, Khách hàng...",
              autoFocus: !0
            }
          )
        ] }),
        (s == null ? void 0 : s.type) === "enum" && /* @__PURE__ */ x.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ x.jsx("label", { className: "text-sm font-medium text-text-secondary", children: "Tùy chọn" }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex gap-2", children: [
            /* @__PURE__ */ x.jsx(
              mr,
              {
                value: h,
                onChange: (_) => p(_.target.value),
                placeholder: "Nhập tên tùy chọn...",
                onKeyDown: (_) => _.key === "Enter" && m()
              }
            ),
            /* @__PURE__ */ x.jsx(xt, { size: "sm", variant: "secondary", onClick: m, children: /* @__PURE__ */ x.jsx(Qc, { size: 16 }) })
          ] }),
          f.length > 0 && /* @__PURE__ */ x.jsx("div", { className: "flex flex-wrap gap-2 pt-2", children: f.map((_, S) => /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1 text-xs", children: [
            /* @__PURE__ */ x.jsx("span", { children: _ }),
            /* @__PURE__ */ x.jsx(
              "button",
              {
                onClick: () => y(S),
                className: "text-slate-400 hover:text-slate-600",
                children: /* @__PURE__ */ x.jsx(ef, { size: 12 })
              }
            )
          ] }, S)) })
        ] }),
        /* @__PURE__ */ x.jsx("div", { className: "pt-4", children: /* @__PURE__ */ x.jsx(
          xt,
          {
            variant: "primary",
            className: "w-full",
            onClick: b,
            disabled: !u.trim(),
            children: n ? "Lưu thay đổi" : "Tạo thuộc tính"
          }
        ) })
      ] }) })
    }
  );
}, rwe = ({
  open: e,
  field: t,
  onClose: r,
  onRename: n,
  onDelete: i,
  onDuplicate: a,
  onEditType: o
}) => {
  const [s, l] = T.useState(""), [u, c] = T.useState(!1);
  T.useEffect(() => {
    e && t && (l(t.label), c(!1));
  }, [e, t]);
  const f = () => {
    t && s.trim() && (n(t.name, s.trim()), c(!1));
  };
  if (!t) return null;
  const d = /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    /* @__PURE__ */ x.jsx(
      xt,
      {
        size: "sm",
        variant: "ghost",
        className: "-ml-2 h-8 w-8 px-0",
        onClick: r,
        "aria-label": "Back",
        children: /* @__PURE__ */ x.jsx(hy, { size: 16 })
      }
    ),
    /* @__PURE__ */ x.jsx("span", { children: "Cấu hình thuộc tính" })
  ] });
  return /* @__PURE__ */ x.jsx(
    tf,
    {
      open: e,
      onClose: r,
      title: d,
      size: "sm",
      className: "z-[70]",
      children: /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-4 p-1", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "rounded-lg bg-slate-50 p-3", children: [
          /* @__PURE__ */ x.jsx("div", { className: "text-xs font-medium text-text-secondary uppercase mb-2", children: "Thuộc tính đang chọn" }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 font-medium text-text-primary", children: [
            /* @__PURE__ */ x.jsx("span", { className: "flex h-6 w-6 items-center justify-center rounded bg-slate-200", children: /* @__PURE__ */ x.jsx(PP, { size: 14 }) }),
            t.label
          ] }),
          /* @__PURE__ */ x.jsxs("div", { className: "text-xs text-text-muted mt-1 ml-8", children: [
            "Type: ",
            t.type
          ] })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col gap-1", children: [
          u ? /* @__PURE__ */ x.jsxs("div", { className: "p-2 border border-blue-200 rounded-lg bg-blue-50", children: [
            /* @__PURE__ */ x.jsx("div", { className: "text-xs font-medium text-blue-600 mb-1.5", children: "Tên hiển thị mới" }),
            /* @__PURE__ */ x.jsxs("div", { className: "flex gap-2", children: [
              /* @__PURE__ */ x.jsx(
                mr,
                {
                  value: s,
                  onChange: (h) => l(h.target.value),
                  autoFocus: !0,
                  className: "h-8 text-sm",
                  onKeyDown: (h) => h.key === "Enter" && f()
                }
              ),
              /* @__PURE__ */ x.jsx(xt, { size: "sm", variant: "primary", onClick: f, children: "Lưu" })
            ] })
          ] }) : /* @__PURE__ */ x.jsxs(
            "button",
            {
              onClick: () => c(!0),
              className: me(
                fe(
                  "flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
                  "hover:bg-slate-50 active:bg-slate-100 text-text-primary"
                )
              ),
              children: [
                /* @__PURE__ */ x.jsx(NU, { size: 16, className: "text-text-secondary" }),
                /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium", children: "Đổi tên" })
              ]
            }
          ),
          /* @__PURE__ */ x.jsxs(
            "button",
            {
              onClick: () => {
                o(t.name), r();
              },
              className: me(
                fe(
                  "flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
                  "hover:bg-slate-50 active:bg-slate-100 text-text-primary"
                )
              ),
              children: [
                /* @__PURE__ */ x.jsx(bS, { size: 16, className: "text-text-secondary" }),
                /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium", children: "Chỉnh sửa thuộc tính" })
              ]
            }
          ),
          /* @__PURE__ */ x.jsxs(
            "button",
            {
              onClick: () => {
                a(t.name), r();
              },
              className: me(
                fe(
                  "flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
                  "hover:bg-slate-50 active:bg-slate-100 text-text-primary"
                )
              ),
              children: [
                /* @__PURE__ */ x.jsx(EP, { size: 16, className: "text-text-secondary" }),
                /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium", children: "Tạo bản sao" })
              ]
            }
          ),
          /* @__PURE__ */ x.jsx("div", { className: "my-1 border-t border-slate-100" }),
          /* @__PURE__ */ x.jsxs(
            "button",
            {
              onClick: () => {
                i(t.name), r();
              },
              className: me(
                fe(
                  "flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors",
                  "hover:bg-red-50 active:bg-red-100 text-red-600"
                )
              ),
              children: [
                /* @__PURE__ */ x.jsx(RP, { size: 16 }),
                /* @__PURE__ */ x.jsx("span", { className: "text-sm font-medium", children: "Xóa thuộc tính" })
              ]
            }
          )
        ] })
      ] })
    }
  );
};
function nwe(e) {
  if (!e) return "";
  const t = e.trim().split(/\s+/);
  return t.length === 1 ? t[0].substring(0, 2).toUpperCase() : (t[0][0] + t[t.length - 1][0]).toUpperCase();
}
const Wa = T.forwardRef(
  ({ className: e, src: t, alt: r, initials: n, size: i = "md", status: a, shape: o = "circle", ...s }, l) => {
    const [u, c] = T.useState(!1), f = {
      sm: "h-8 w-8 text-xs",
      md: "h-10 w-10 text-sm",
      lg: "h-12 w-12 text-base",
      xl: "h-16 w-16 text-lg"
    }, d = {
      circle: "rounded-full",
      square: "rounded-lg"
    }, h = {
      online: "bg-green-500",
      offline: "bg-slate-400",
      busy: "bg-red-500",
      away: "bg-yellow-500"
    }, p = t && !u, v = n || nwe(r) || "?";
    return /* @__PURE__ */ x.jsxs("div", { className: "relative inline-block", children: [
      /* @__PURE__ */ x.jsx(
        "div",
        {
          ref: l,
          className: me(
            fe(
              "relative flex items-center justify-center overflow-hidden bg-slate-100 text-slate-600 font-medium uppercase",
              f[i],
              d[o],
              e
            )
          ),
          ...s,
          children: p ? /* @__PURE__ */ x.jsx(
            "img",
            {
              src: t,
              alt: r,
              className: "h-full w-full object-cover",
              onError: () => c(!0)
            }
          ) : /* @__PURE__ */ x.jsx("span", { children: v })
        }
      ),
      a && /* @__PURE__ */ x.jsx(
        "span",
        {
          className: fe(
            "absolute bottom-0 right-0 block rounded-full ring-2 ring-white",
            h[a],
            i === "sm" ? "h-2 w-2" : "h-3 w-3"
          )
        }
      )
    ] });
  }
);
Wa.displayName = "Avatar";
const iwe = T.forwardRef(
  ({ children: e, className: t, max: r, ...n }, i) => {
    const a = T.Children.toArray(e), o = a.length, s = r ? Math.min(r, o) : o, l = a.slice(0, s), u = o - s;
    return /* @__PURE__ */ x.jsxs(
      "div",
      {
        ref: i,
        className: me(fe("flex -space-x-3 overflow-hidden p-1", t)),
        ...n,
        children: [
          l,
          u > 0 && /* @__PURE__ */ x.jsxs(
            "div",
            {
              className: fe(
                "relative flex h-10 w-10 items-center justify-center rounded-full border-2 border-white bg-slate-100 text-xs font-medium text-slate-600 hover:bg-slate-200"
              ),
              children: [
                "+",
                u
              ]
            }
          )
        ]
      }
    );
  }
);
iwe.displayName = "AvatarGroup";
const awe = (e, t) => {
  const r = e.fields.find((n) => n.name === t);
  return (r == null ? void 0 : r.label) || t;
}, od = (e, t) => {
  var r;
  return (r = e.data) == null ? void 0 : r[t];
}, owe = (e, t, r) => {
  var i;
  if (r == null) return null;
  const n = e.fields.find((a) => a.name === t);
  if (!n) return String(r);
  if (n.type === "date" || n.type === "datetime") {
    const a = typeof r == "string" || typeof r == "number" ? new Date(r) : r;
    return Number.isNaN((i = a == null ? void 0 : a.getTime) == null ? void 0 : i.call(a)) ? String(r) : a.toLocaleDateString();
  }
  return n.type === "boolean" ? r ? "Yes" : "No" : (n.type === "enum", String(r));
}, x0 = ({
  item: e,
  schema: t,
  mappings: r,
  onClick: n,
  renderCard: i,
  visibleFields: a
}) => {
  const o = r ?? t.defaultMappings ?? {}, s = o.cardTitle, l = o.cardSubtitle, u = a ?? o.cardMeta ?? [], c = o.cardAvatar, f = o.cardTags, d = (s && od(e, s)) ?? e.data.title ?? e.data.name ?? e.id, h = l ? od(e, l) : void 0, p = () => {
    if (!c) return null;
    const m = od(e, c);
    if (!m) return null;
    if (typeof m == "string")
      return /* @__PURE__ */ x.jsx(Wa, { src: m, alt: String(d), size: "sm" });
    if (typeof m == "object" && m) {
      const y = m.avatar || m.avatarUrl, b = m.name || m.email;
      if (y || b)
        return /* @__PURE__ */ x.jsx(Wa, { src: y, alt: b, size: "sm" });
    }
    return null;
  }, v = () => {
    if (!f) return null;
    const m = od(e, Array.isArray(f) ? f[0] : f);
    if (!m) return null;
    const y = Array.isArray(m) ? m : [m];
    return y.length === 0 ? null : /* @__PURE__ */ x.jsx("div", { className: "flex flex-wrap gap-1", children: y.map((b, w) => /* @__PURE__ */ x.jsx(y0, { size: "sm", variant: "outline", children: String(b) }, `${e.id}-tag-${w}`)) });
  }, g = () => /* @__PURE__ */ x.jsxs(
    vP,
    {
      padding: "sm",
      compact: !0,
      className: "flex w-full cursor-pointer flex-col gap-2 rounded-2xl bg-surface-alt hover:bg-primary-50",
      onClick: n,
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-start gap-2", children: [
          p() && /* @__PURE__ */ x.jsx("div", { className: "mt-0.5 flex-shrink-0", children: p() }),
          /* @__PURE__ */ x.jsxs("div", { className: "flex min-w-0 flex-1 flex-col gap-1", children: [
            /* @__PURE__ */ x.jsx("div", { className: "flex items-start justify-between gap-2", children: /* @__PURE__ */ x.jsx("p", { className: "truncate text-sm font-medium text-text-primary", children: String(d) }) }),
            h && /* @__PURE__ */ x.jsx("p", { className: "truncate text-xs text-text-secondary", children: String(h) })
          ] })
        ] }),
        u.length > 0 && /* @__PURE__ */ x.jsx("div", { className: "mt-1 flex flex-col gap-1 text-[11px] text-text-muted", children: u.map((m) => {
          const y = od(e, m);
          return y == null || y === "" ? null : /* @__PURE__ */ x.jsxs("div", { className: "flex items-start justify-between gap-2", children: [
            /* @__PURE__ */ x.jsxs("span", { className: "shrink-0 font-medium text-text-secondary", children: [
              awe(t, m),
              ":"
            ] }),
            /* @__PURE__ */ x.jsx("span", { className: "truncate text-right", children: owe(t, m, y) })
          ] }, m);
        }) }),
        v()
      ]
    }
  );
  return i ? i(e.data, g) : g();
};
x0.displayName = "KanbanCard";
const EV = ({
  item: e,
  schema: t,
  mappings: r,
  renderCard: n,
  onCardClick: i,
  visibleFields: a
}) => {
  const { attributes: o, listeners: s, setNodeRef: l, transform: u, transition: c, isDragging: f } = hS({
    id: e.id
  }), d = {
    transform: pS.Transform.toString(u),
    transition: c,
    opacity: f ? 0.3 : void 0
  };
  return /* @__PURE__ */ x.jsx("div", { ref: l, style: d, ...o, ...s, children: /* @__PURE__ */ x.jsx(
    x0,
    {
      item: e,
      schema: t,
      mappings: r,
      renderCard: n,
      onClick: i ? () => i(e) : void 0,
      visibleFields: a
    }
  ) });
};
EV.displayName = "SortableKanbanCard";
const DV = ({
  columnKey: e,
  title: t,
  items: r,
  schema: n,
  mappings: i,
  onAddClick: a,
  onCardClick: o,
  renderCard: s,
  virtualized: l,
  virtualRowHeight: u = 96,
  virtualOverscan: c = 8,
  visibleFields: f
}) => {
  const d = T.useRef(null), { setNodeRef: h } = sW({
    id: e,
    data: {
      type: "Column",
      columnKey: e
    }
  }), p = Kd({
    count: l ? r.length : 0,
    getScrollElement: () => d.current,
    estimateSize: () => u,
    overscan: c
  }), v = l ? p.getVirtualItems() : [], g = l ? p.getTotalSize() : 0, m = l && v.length > 0 ? v[0].start : 0, y = l && v.length > 0 ? g - v[v.length - 1].end : 0;
  return /* @__PURE__ */ x.jsxs(
    "div",
    {
      ref: h,
      className: "flex h-full min-w-[280px] max-w-xs flex-1 flex-col rounded-2xl bg-surface p-3",
      role: "list",
      "aria-label": t,
      "data-column-key": e,
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "mb-2 flex items-center justify-between gap-2", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-baseline gap-2", children: [
            /* @__PURE__ */ x.jsx("h3", { className: "text-xs font-semibold uppercase tracking-wide text-text-secondary", children: t }),
            /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-muted", children: r.length })
          ] }),
          a && /* @__PURE__ */ x.jsx(
            xt,
            {
              size: "sm",
              variant: "ghost",
              onClick: a,
              "aria-label": `Add item to ${t}`,
              children: "+"
            }
          )
        ] }),
        /* @__PURE__ */ x.jsx("div", { className: "flex-1", children: /* @__PURE__ */ x.jsxs($h, { ref: d, direction: "vertical", autoHide: !0, className: "max-h-[70vh] space-y-2 pr-1", children: [
          r.length === 0 && /* @__PURE__ */ x.jsx("div", { className: "rounded-xl bg-surface-alt px-3 py-4 text-center text-xs text-text-muted", children: "No items" }),
          l ? /* @__PURE__ */ x.jsxs("div", { style: { height: g }, className: "relative w-full", children: [
            m > 0 && /* @__PURE__ */ x.jsx("div", { style: { height: m }, "aria-hidden": !0 }),
            v.map((b) => {
              const w = r[b.index];
              return /* @__PURE__ */ x.jsx(
                "div",
                {
                  "data-index": b.index,
                  style: {
                    position: "absolute",
                    top: b.start,
                    left: 0,
                    right: 0
                  },
                  children: /* @__PURE__ */ x.jsx(
                    x0,
                    {
                      item: w,
                      schema: n,
                      mappings: i,
                      renderCard: s,
                      onClick: o ? () => o(w) : void 0,
                      visibleFields: f
                    }
                  )
                },
                w.id
              );
            }),
            y > 0 && /* @__PURE__ */ x.jsx("div", { style: { height: y }, "aria-hidden": !0 })
          ] }) : /* @__PURE__ */ x.jsx(lS, { items: r.map((b) => b.id), strategy: uS, children: /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-2", children: r.map((b) => /* @__PURE__ */ x.jsx(
            EV,
            {
              item: b,
              schema: n,
              mappings: i,
              renderCard: s,
              onCardClick: o,
              visibleFields: f
            },
            b.id
          )) }) })
        ] }) })
      ]
    }
  );
};
DV.displayName = "KanbanColumn";
const fA = T.forwardRef(
  ({ className: e, type: t, error: r, fullWidth: n = !0, onChange: i, onBlur: a, ...o }, s) => {
    const l = qc(), u = (c) => {
      l(
        Il.UI_CHANGE,
        { value: c.target.value },
        {
          meta: { component: "TitleInput", type: t },
          flags: { sensitive: t === "password" || t === "email" }
        }
      ), i == null || i(c);
    };
    return /* @__PURE__ */ x.jsx(
      "input",
      {
        ref: s,
        type: t,
        className: me(
          fe(
            "w-full bg-transparent text-2xl font-semibold text-text-primary outline-none placeholder:text-text-muted",
            "focus-visible:outline-none",
            "transition-all duration-200",
            r && "ring-2 ring-red-500 focus-visible:ring-red-500",
            n ? "w-full" : "w-auto",
            e
          )
        ),
        onChange: u,
        onBlur: a,
        ...o
      }
    );
  }
);
fA.displayName = "TitleInput";
var swe = /(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/, lwe = fP.create({
  name: "image",
  addOptions() {
    return {
      inline: !1,
      allowBase64: !1,
      HTMLAttributes: {},
      resize: !1
    };
  },
  inline() {
    return this.options.inline;
  },
  group() {
    return this.options.inline ? "inline" : "block";
  },
  draggable: !0,
  addAttributes() {
    return {
      src: {
        default: null
      },
      alt: {
        default: null
      },
      title: {
        default: null
      },
      width: {
        default: null
      },
      height: {
        default: null
      }
    };
  },
  parseHTML() {
    return [
      {
        tag: this.options.allowBase64 ? "img[src]" : 'img[src]:not([src^="data:"])'
      }
    ];
  },
  renderHTML({ HTMLAttributes: e }) {
    return ["img", Kc(this.options.HTMLAttributes, e)];
  },
  parseMarkdown: (e, t) => t.createNode("image", {
    src: e.href,
    title: e.title,
    alt: e.text
  }),
  renderMarkdown: (e) => {
    var t, r, n, i, a, o;
    const s = (r = (t = e.attrs) == null ? void 0 : t.src) != null ? r : "", l = (i = (n = e.attrs) == null ? void 0 : n.alt) != null ? i : "", u = (o = (a = e.attrs) == null ? void 0 : a.title) != null ? o : "";
    return u ? `![${l}](${s} "${u}")` : `![${l}](${s})`;
  },
  addNodeView() {
    if (!this.options.resize || !this.options.resize.enabled || typeof document > "u")
      return null;
    const { directions: e, minWidth: t, minHeight: r, alwaysPreserveAspectRatio: n } = this.options.resize;
    return ({ node: i, getPos: a, HTMLAttributes: o, editor: s }) => {
      const l = document.createElement("img");
      Object.entries(o).forEach(([f, d]) => {
        if (d != null)
          switch (f) {
            case "width":
            case "height":
              break;
            default:
              l.setAttribute(f, d);
              break;
          }
      }), l.src = o.src;
      const u = new SG({
        element: l,
        editor: s,
        node: i,
        getPos: a,
        onResize: (f, d) => {
          l.style.width = `${f}px`, l.style.height = `${d}px`;
        },
        onCommit: (f, d) => {
          const h = a();
          h !== void 0 && this.editor.chain().setNodeSelection(h).updateAttributes(this.name, {
            width: f,
            height: d
          }).run();
        },
        onUpdate: (f, d, h) => f.type === i.type,
        options: {
          directions: e,
          min: {
            width: t,
            height: r
          },
          preserveAspectRatio: n === !0
        }
      }), c = u.dom;
      return c.style.visibility = "hidden", c.style.pointerEvents = "none", l.onload = () => {
        c.style.visibility = "", c.style.pointerEvents = "";
      }, u;
    };
  },
  addCommands() {
    return {
      setImage: (e) => ({ commands: t }) => t.insertContent({
        type: this.name,
        attrs: e
      })
    };
  },
  addInputRules() {
    return [
      _G({
        find: swe,
        type: this.type,
        getAttributes: (e) => {
          const [, , t, r, n] = e;
          return { src: r, alt: t, title: n };
        }
      })
    ];
  }
}), uwe = dP.create({
  name: "textAlign",
  addOptions() {
    return {
      types: [],
      alignments: ["left", "center", "right", "justify"],
      defaultAlignment: null
    };
  },
  addGlobalAttributes() {
    return [
      {
        types: this.options.types,
        attributes: {
          textAlign: {
            default: this.options.defaultAlignment,
            parseHTML: (e) => {
              const t = e.style.textAlign;
              return this.options.alignments.includes(t) ? t : this.options.defaultAlignment;
            },
            renderHTML: (e) => e.textAlign ? { style: `text-align: ${e.textAlign}` } : {}
          }
        }
      }
    ];
  },
  addCommands() {
    return {
      setTextAlign: (e) => ({ commands: t }) => this.options.alignments.includes(e) ? this.options.types.map((r) => t.updateAttributes(r, { textAlign: e })).some((r) => r) : !1,
      unsetTextAlign: () => ({ commands: e }) => this.options.types.map((t) => e.resetAttributes(t, "textAlign")).some((t) => t),
      toggleTextAlign: (e) => ({ editor: t, commands: r }) => this.options.alignments.includes(e) ? t.isActive({ textAlign: e }) ? r.unsetTextAlign() : r.setTextAlign(e) : !1
    };
  },
  addKeyboardShortcuts() {
    return {
      "Mod-Shift-l": () => this.editor.commands.setTextAlign("left"),
      "Mod-Shift-e": () => this.editor.commands.setTextAlign("center"),
      "Mod-Shift-r": () => this.editor.commands.setTextAlign("right"),
      "Mod-Shift-j": () => this.editor.commands.setTextAlign("justify")
    };
  }
}), cwe = (e) => dr({
  find: /--$/,
  replace: e ?? "—"
}), fwe = (e) => dr({
  find: /\.\.\.$/,
  replace: e ?? "…"
}), dwe = (e) => dr({
  find: /(?:^|[\s{[(<'"\u2018\u201C])(")$/,
  replace: e ?? "“"
}), hwe = (e) => dr({
  find: /"$/,
  replace: e ?? "”"
}), pwe = (e) => dr({
  find: /(?:^|[\s{[(<'"\u2018\u201C])(')$/,
  replace: e ?? "‘"
}), vwe = (e) => dr({
  find: /'$/,
  replace: e ?? "’"
}), gwe = (e) => dr({
  find: /<-$/,
  replace: e ?? "←"
}), mwe = (e) => dr({
  find: /->$/,
  replace: e ?? "→"
}), ywe = (e) => dr({
  find: /\(c\)$/,
  replace: e ?? "©"
}), xwe = (e) => dr({
  find: /\(tm\)$/,
  replace: e ?? "™"
}), bwe = (e) => dr({
  find: /\(sm\)$/,
  replace: e ?? "℠"
}), wwe = (e) => dr({
  find: /\(r\)$/,
  replace: e ?? "®"
}), _we = (e) => dr({
  find: /(?:^|\s)(1\/2)\s$/,
  replace: e ?? "½"
}), Swe = (e) => dr({
  find: /\+\/-$/,
  replace: e ?? "±"
}), Cwe = (e) => dr({
  find: /!=$/,
  replace: e ?? "≠"
}), Twe = (e) => dr({
  find: /<<$/,
  replace: e ?? "«"
}), Awe = (e) => dr({
  find: />>$/,
  replace: e ?? "»"
}), Mwe = (e) => dr({
  find: /\d+\s?([*x])\s?\d+$/,
  replace: e ?? "×"
}), Ewe = (e) => dr({
  find: /\^2$/,
  replace: e ?? "²"
}), Dwe = (e) => dr({
  find: /\^3$/,
  replace: e ?? "³"
}), Nwe = (e) => dr({
  find: /(?:^|\s)(1\/4)\s$/,
  replace: e ?? "¼"
}), Iwe = (e) => dr({
  find: /(?:^|\s)(3\/4)\s$/,
  replace: e ?? "¾"
}), Lwe = dP.create({
  name: "typography",
  addOptions() {
    return {
      closeDoubleQuote: "”",
      closeSingleQuote: "’",
      copyright: "©",
      ellipsis: "…",
      emDash: "—",
      laquo: "«",
      leftArrow: "←",
      multiplication: "×",
      notEqual: "≠",
      oneHalf: "½",
      oneQuarter: "¼",
      openDoubleQuote: "“",
      openSingleQuote: "‘",
      plusMinus: "±",
      raquo: "»",
      registeredTrademark: "®",
      rightArrow: "→",
      servicemark: "℠",
      superscriptThree: "³",
      superscriptTwo: "²",
      threeQuarters: "¾",
      trademark: "™"
    };
  },
  addInputRules() {
    const e = [];
    return this.options.emDash !== !1 && e.push(cwe(this.options.emDash)), this.options.ellipsis !== !1 && e.push(fwe(this.options.ellipsis)), this.options.openDoubleQuote !== !1 && e.push(dwe(this.options.openDoubleQuote)), this.options.closeDoubleQuote !== !1 && e.push(hwe(this.options.closeDoubleQuote)), this.options.openSingleQuote !== !1 && e.push(pwe(this.options.openSingleQuote)), this.options.closeSingleQuote !== !1 && e.push(vwe(this.options.closeSingleQuote)), this.options.leftArrow !== !1 && e.push(gwe(this.options.leftArrow)), this.options.rightArrow !== !1 && e.push(mwe(this.options.rightArrow)), this.options.copyright !== !1 && e.push(ywe(this.options.copyright)), this.options.trademark !== !1 && e.push(xwe(this.options.trademark)), this.options.servicemark !== !1 && e.push(bwe(this.options.servicemark)), this.options.registeredTrademark !== !1 && e.push(wwe(this.options.registeredTrademark)), this.options.oneHalf !== !1 && e.push(_we(this.options.oneHalf)), this.options.plusMinus !== !1 && e.push(Swe(this.options.plusMinus)), this.options.notEqual !== !1 && e.push(Cwe(this.options.notEqual)), this.options.laquo !== !1 && e.push(Twe(this.options.laquo)), this.options.raquo !== !1 && e.push(Awe(this.options.raquo)), this.options.multiplication !== !1 && e.push(Mwe(this.options.multiplication)), this.options.superscriptTwo !== !1 && e.push(Ewe(this.options.superscriptTwo)), this.options.superscriptThree !== !1 && e.push(Dwe(this.options.superscriptThree)), this.options.oneQuarter !== !1 && e.push(Nwe(this.options.oneQuarter)), this.options.threeQuarters !== !1 && e.push(Iwe(this.options.threeQuarters)), e;
  }
}), Rwe = /(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/, Pwe = /(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g, kwe = rS.create({
  name: "highlight",
  addOptions() {
    return {
      multicolor: !1,
      HTMLAttributes: {}
    };
  },
  addAttributes() {
    return this.options.multicolor ? {
      color: {
        default: null,
        parseHTML: (e) => e.getAttribute("data-color") || e.style.backgroundColor,
        renderHTML: (e) => e.color ? {
          "data-color": e.color,
          style: `background-color: ${e.color}; color: inherit`
        } : {}
      }
    } : {};
  },
  parseHTML() {
    return [
      {
        tag: "mark"
      }
    ];
  },
  renderHTML({ HTMLAttributes: e }) {
    return ["mark", Kc(this.options.HTMLAttributes, e), 0];
  },
  renderMarkdown: (e, t) => `==${t.renderChildren(e)}==`,
  parseMarkdown: (e, t) => t.applyMark("highlight", t.parseInline(e.tokens || [])),
  markdownTokenizer: {
    name: "highlight",
    level: "inline",
    start: (e) => e.indexOf("=="),
    tokenize(e, t, r) {
      const i = /^(==)([^=]+)(==)/.exec(e);
      if (i) {
        const a = i[2].trim(), o = r.inlineTokens(a);
        return {
          type: "highlight",
          raw: i[0],
          text: a,
          tokens: o
        };
      }
    }
  },
  addCommands() {
    return {
      setHighlight: (e) => ({ commands: t }) => t.setMark(this.name, e),
      toggleHighlight: (e) => ({ commands: t }) => t.toggleMark(this.name, e),
      unsetHighlight: () => ({ commands: e }) => e.unsetMark(this.name)
    };
  },
  addKeyboardShortcuts() {
    return {
      "Mod-Shift-h": () => this.editor.commands.toggleHighlight()
    };
  },
  addInputRules() {
    return [
      TG({
        find: Rwe,
        type: this.type
      })
    ];
  },
  addPasteRules() {
    return [
      CG({
        find: Pwe,
        type: this.type
      })
    ];
  }
}), Owe = rS.create({
  name: "subscript",
  addOptions() {
    return {
      HTMLAttributes: {}
    };
  },
  parseHTML() {
    return [
      {
        tag: "sub"
      },
      {
        style: "vertical-align",
        getAttrs(e) {
          return e !== "sub" ? !1 : null;
        }
      }
    ];
  },
  renderHTML({ HTMLAttributes: e }) {
    return ["sub", Kc(this.options.HTMLAttributes, e), 0];
  },
  addCommands() {
    return {
      setSubscript: () => ({ commands: e }) => e.setMark(this.name),
      toggleSubscript: () => ({ commands: e }) => e.toggleMark(this.name),
      unsetSubscript: () => ({ commands: e }) => e.unsetMark(this.name)
    };
  },
  addKeyboardShortcuts() {
    return {
      "Mod-,": () => this.editor.commands.toggleSubscript()
    };
  }
}), zwe = rS.create({
  name: "superscript",
  addOptions() {
    return {
      HTMLAttributes: {}
    };
  },
  parseHTML() {
    return [
      {
        tag: "sup"
      },
      {
        style: "vertical-align",
        getAttrs(e) {
          return e !== "super" ? !1 : null;
        }
      }
    ];
  },
  renderHTML({ HTMLAttributes: e }) {
    return ["sup", Kc(this.options.HTMLAttributes, e), 0];
  },
  addCommands() {
    return {
      setSuperscript: () => ({ commands: e }) => e.setMark(this.name),
      toggleSuperscript: () => ({ commands: e }) => e.toggleMark(this.name),
      unsetSuperscript: () => ({ commands: e }) => e.unsetMark(this.name)
    };
  },
  addKeyboardShortcuts() {
    return {
      "Mod-.": () => this.editor.commands.toggleSuperscript()
    };
  }
});
function b0() {
  return typeof window < "u";
}
function _f(e) {
  return dA(e) ? (e.nodeName || "").toLowerCase() : "#document";
}
function xn(e) {
  var t;
  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function ga(e) {
  var t;
  return (t = (dA(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;
}
function dA(e) {
  return b0() ? e instanceof Node || e instanceof xn(e).Node : !1;
}
function Zt(e) {
  return b0() ? e instanceof Element || e instanceof xn(e).Element : !1;
}
function Ln(e) {
  return b0() ? e instanceof HTMLElement || e instanceof xn(e).HTMLElement : !1;
}
function N_(e) {
  return !b0() || typeof ShadowRoot > "u" ? !1 : e instanceof ShadowRoot || e instanceof xn(e).ShadowRoot;
}
const jwe = /* @__PURE__ */ new Set(["inline", "contents"]);
function yp(e) {
  const {
    overflow: t,
    overflowX: r,
    overflowY: n,
    display: i
  } = ni(e);
  return /auto|scroll|overlay|hidden|clip/.test(t + n + r) && !jwe.has(i);
}
const Vwe = /* @__PURE__ */ new Set(["table", "td", "th"]);
function Bwe(e) {
  return Vwe.has(_f(e));
}
const Fwe = [":popover-open", ":modal"];
function w0(e) {
  return Fwe.some((t) => {
    try {
      return e.matches(t);
    } catch {
      return !1;
    }
  });
}
const $we = ["transform", "translate", "scale", "rotate", "perspective"], Hwe = ["transform", "translate", "scale", "rotate", "perspective", "filter"], Gwe = ["paint", "layout", "strict", "content"];
function hA(e) {
  const t = _0(), r = Zt(e) ? ni(e) : e;
  return $we.some((n) => r[n] ? r[n] !== "none" : !1) || (r.containerType ? r.containerType !== "normal" : !1) || !t && (r.backdropFilter ? r.backdropFilter !== "none" : !1) || !t && (r.filter ? r.filter !== "none" : !1) || Hwe.some((n) => (r.willChange || "").includes(n)) || Gwe.some((n) => (r.contain || "").includes(n));
}
function Wwe(e) {
  let t = no(e);
  for (; Ln(t) && !Ua(t); ) {
    if (hA(t))
      return t;
    if (w0(t))
      return null;
    t = no(t);
  }
  return null;
}
function _0() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
const Uwe = /* @__PURE__ */ new Set(["html", "body", "#document"]);
function Ua(e) {
  return Uwe.has(_f(e));
}
function ni(e) {
  return xn(e).getComputedStyle(e);
}
function S0(e) {
  return Zt(e) ? {
    scrollLeft: e.scrollLeft,
    scrollTop: e.scrollTop
  } : {
    scrollLeft: e.scrollX,
    scrollTop: e.scrollY
  };
}
function no(e) {
  if (_f(e) === "html")
    return e;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    e.assignedSlot || // DOM Element detected.
    e.parentNode || // ShadowRoot detected.
    N_(e) && e.host || // Fallback.
    ga(e)
  );
  return N_(t) ? t.host : t;
}
function NV(e) {
  const t = no(e);
  return Ua(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : Ln(t) && yp(t) ? t : NV(t);
}
function es(e, t, r) {
  var n;
  t === void 0 && (t = []), r === void 0 && (r = !0);
  const i = NV(e), a = i === ((n = e.ownerDocument) == null ? void 0 : n.body), o = xn(i);
  if (a) {
    const s = I_(o);
    return t.concat(o, o.visualViewport || [], yp(i) ? i : [], s && r ? es(s) : []);
  }
  return t.concat(i, es(i, [], r));
}
function I_(e) {
  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;
}
const Ywe = ["top", "right", "bottom", "left"], ds = Math.min, Sn = Math.max, Xm = Math.round, Hv = Math.floor, oa = (e) => ({
  x: e,
  y: e
}), Zwe = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, Xwe = {
  start: "end",
  end: "start"
};
function L_(e, t, r) {
  return Sn(e, ds(t, r));
}
function io(e, t) {
  return typeof e == "function" ? e(t) : e;
}
function ao(e) {
  return e.split("-")[0];
}
function Sf(e) {
  return e.split("-")[1];
}
function pA(e) {
  return e === "x" ? "y" : "x";
}
function vA(e) {
  return e === "y" ? "height" : "width";
}
const Kwe = /* @__PURE__ */ new Set(["top", "bottom"]);
function Qi(e) {
  return Kwe.has(ao(e)) ? "y" : "x";
}
function gA(e) {
  return pA(Qi(e));
}
function qwe(e, t, r) {
  r === void 0 && (r = !1);
  const n = Sf(e), i = gA(e), a = vA(i);
  let o = i === "x" ? n === (r ? "end" : "start") ? "right" : "left" : n === "start" ? "bottom" : "top";
  return t.reference[a] > t.floating[a] && (o = Km(o)), [o, Km(o)];
}
function Jwe(e) {
  const t = Km(e);
  return [R_(e), t, R_(t)];
}
function R_(e) {
  return e.replace(/start|end/g, (t) => Xwe[t]);
}
const V4 = ["left", "right"], B4 = ["right", "left"], Qwe = ["top", "bottom"], e_e = ["bottom", "top"];
function t_e(e, t, r) {
  switch (e) {
    case "top":
    case "bottom":
      return r ? t ? B4 : V4 : t ? V4 : B4;
    case "left":
    case "right":
      return t ? Qwe : e_e;
    default:
      return [];
  }
}
function r_e(e, t, r, n) {
  const i = Sf(e);
  let a = t_e(ao(e), r === "start", n);
  return i && (a = a.map((o) => o + "-" + i), t && (a = a.concat(a.map(R_)))), a;
}
function Km(e) {
  return e.replace(/left|right|bottom|top/g, (t) => Zwe[t]);
}
function n_e(e) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...e
  };
}
function IV(e) {
  return typeof e != "number" ? n_e(e) : {
    top: e,
    right: e,
    bottom: e,
    left: e
  };
}
function qm(e) {
  const {
    x: t,
    y: r,
    width: n,
    height: i
  } = e;
  return {
    width: n,
    height: i,
    top: r,
    left: t,
    right: t + n,
    bottom: r + i,
    x: t,
    y: r
  };
}
/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var i_e = ["input:not([inert])", "select:not([inert])", "textarea:not([inert])", "a[href]:not([inert])", "button:not([inert])", "[tabindex]:not(slot):not([inert])", "audio[controls]:not([inert])", "video[controls]:not([inert])", '[contenteditable]:not([contenteditable="false"]):not([inert])', "details>summary:first-of-type:not([inert])", "details:not([inert])"], P_ = /* @__PURE__ */ i_e.join(","), LV = typeof Element > "u", Oh = LV ? function() {
} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector, Jm = !LV && Element.prototype.getRootNode ? function(e) {
  var t;
  return e == null || (t = e.getRootNode) === null || t === void 0 ? void 0 : t.call(e);
} : function(e) {
  return e == null ? void 0 : e.ownerDocument;
}, zh = function(t, r) {
  var n;
  r === void 0 && (r = !0);
  var i = t == null || (n = t.getAttribute) === null || n === void 0 ? void 0 : n.call(t, "inert"), a = i === "" || i === "true", o = a || r && t && zh(t.parentNode);
  return o;
}, a_e = function(t) {
  var r, n = t == null || (r = t.getAttribute) === null || r === void 0 ? void 0 : r.call(t, "contenteditable");
  return n === "" || n === "true";
}, o_e = function(t, r, n) {
  if (zh(t))
    return [];
  var i = Array.prototype.slice.apply(t.querySelectorAll(P_));
  return r && Oh.call(t, P_) && i.unshift(t), i = i.filter(n), i;
}, k_ = function(t, r, n) {
  for (var i = [], a = Array.from(t); a.length; ) {
    var o = a.shift();
    if (!zh(o, !1))
      if (o.tagName === "SLOT") {
        var s = o.assignedElements(), l = s.length ? s : o.children, u = k_(l, !0, n);
        n.flatten ? i.push.apply(i, u) : i.push({
          scopeParent: o,
          candidates: u
        });
      } else {
        var c = Oh.call(o, P_);
        c && n.filter(o) && (r || !t.includes(o)) && i.push(o);
        var f = o.shadowRoot || // check for an undisclosed shadow
        typeof n.getShadowRoot == "function" && n.getShadowRoot(o), d = !zh(f, !1) && (!n.shadowRootFilter || n.shadowRootFilter(o));
        if (f && d) {
          var h = k_(f === !0 ? o.children : f.children, !0, n);
          n.flatten ? i.push.apply(i, h) : i.push({
            scopeParent: o,
            candidates: h
          });
        } else
          a.unshift.apply(a, o.children);
      }
  }
  return i;
}, RV = function(t) {
  return !isNaN(parseInt(t.getAttribute("tabindex"), 10));
}, PV = function(t) {
  if (!t)
    throw new Error("No node provided");
  return t.tabIndex < 0 && (/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName) || a_e(t)) && !RV(t) ? 0 : t.tabIndex;
}, s_e = function(t, r) {
  var n = PV(t);
  return n < 0 && r && !RV(t) ? 0 : n;
}, l_e = function(t, r) {
  return t.tabIndex === r.tabIndex ? t.documentOrder - r.documentOrder : t.tabIndex - r.tabIndex;
}, kV = function(t) {
  return t.tagName === "INPUT";
}, u_e = function(t) {
  return kV(t) && t.type === "hidden";
}, c_e = function(t) {
  var r = t.tagName === "DETAILS" && Array.prototype.slice.apply(t.children).some(function(n) {
    return n.tagName === "SUMMARY";
  });
  return r;
}, f_e = function(t, r) {
  for (var n = 0; n < t.length; n++)
    if (t[n].checked && t[n].form === r)
      return t[n];
}, d_e = function(t) {
  if (!t.name)
    return !0;
  var r = t.form || Jm(t), n = function(s) {
    return r.querySelectorAll('input[type="radio"][name="' + s + '"]');
  }, i;
  if (typeof window < "u" && typeof window.CSS < "u" && typeof window.CSS.escape == "function")
    i = n(window.CSS.escape(t.name));
  else
    try {
      i = n(t.name);
    } catch (o) {
      return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s", o.message), !1;
    }
  var a = f_e(i, t.form);
  return !a || a === t;
}, h_e = function(t) {
  return kV(t) && t.type === "radio";
}, p_e = function(t) {
  return h_e(t) && !d_e(t);
}, v_e = function(t) {
  var r, n = t && Jm(t), i = (r = n) === null || r === void 0 ? void 0 : r.host, a = !1;
  if (n && n !== t) {
    var o, s, l;
    for (a = !!((o = i) !== null && o !== void 0 && (s = o.ownerDocument) !== null && s !== void 0 && s.contains(i) || t != null && (l = t.ownerDocument) !== null && l !== void 0 && l.contains(t)); !a && i; ) {
      var u, c, f;
      n = Jm(i), i = (u = n) === null || u === void 0 ? void 0 : u.host, a = !!((c = i) !== null && c !== void 0 && (f = c.ownerDocument) !== null && f !== void 0 && f.contains(i));
    }
  }
  return a;
}, F4 = function(t) {
  var r = t.getBoundingClientRect(), n = r.width, i = r.height;
  return n === 0 && i === 0;
}, g_e = function(t, r) {
  var n = r.displayCheck, i = r.getShadowRoot;
  if (n === "full-native" && "checkVisibility" in t) {
    var a = t.checkVisibility({
      // Checking opacity might be desirable for some use cases, but natively,
      // opacity zero elements _are_ focusable and tabbable.
      checkOpacity: !1,
      opacityProperty: !1,
      contentVisibilityAuto: !0,
      visibilityProperty: !0,
      // This is an alias for `visibilityProperty`. Contemporary browsers
      // support both. However, this alias has wider browser support (Chrome
      // >= 105 and Firefox >= 106, vs. Chrome >= 121 and Firefox >= 122), so
      // we include it anyway.
      checkVisibilityCSS: !0
    });
    return !a;
  }
  if (getComputedStyle(t).visibility === "hidden")
    return !0;
  var o = Oh.call(t, "details>summary:first-of-type"), s = o ? t.parentElement : t;
  if (Oh.call(s, "details:not([open]) *"))
    return !0;
  if (!n || n === "full" || // full-native can run this branch when it falls through in case
  // Element#checkVisibility is unsupported
  n === "full-native" || n === "legacy-full") {
    if (typeof i == "function") {
      for (var l = t; t; ) {
        var u = t.parentElement, c = Jm(t);
        if (u && !u.shadowRoot && i(u) === !0)
          return F4(t);
        t.assignedSlot ? t = t.assignedSlot : !u && c !== t.ownerDocument ? t = c.host : t = u;
      }
      t = l;
    }
    if (v_e(t))
      return !t.getClientRects().length;
    if (n !== "legacy-full")
      return !0;
  } else if (n === "non-zero-area")
    return F4(t);
  return !1;
}, m_e = function(t) {
  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))
    for (var r = t.parentElement; r; ) {
      if (r.tagName === "FIELDSET" && r.disabled) {
        for (var n = 0; n < r.children.length; n++) {
          var i = r.children.item(n);
          if (i.tagName === "LEGEND")
            return Oh.call(r, "fieldset[disabled] *") ? !0 : !i.contains(t);
        }
        return !0;
      }
      r = r.parentElement;
    }
  return !1;
}, y_e = function(t, r) {
  return !(r.disabled || // we must do an inert look up to filter out any elements inside an inert ancestor
  //  because we're limited in the type of selectors we can use in JSDom (see related
  //  note related to `candidateSelectors`)
  zh(r) || u_e(r) || g_e(r, t) || // For a details element with a summary, the summary element gets the focus
  c_e(r) || m_e(r));
}, $4 = function(t, r) {
  return !(p_e(r) || PV(r) < 0 || !y_e(t, r));
}, x_e = function(t) {
  var r = parseInt(t.getAttribute("tabindex"), 10);
  return !!(isNaN(r) || r >= 0);
}, OV = function(t) {
  var r = [], n = [];
  return t.forEach(function(i, a) {
    var o = !!i.scopeParent, s = o ? i.scopeParent : i, l = s_e(s, o), u = o ? OV(i.candidates) : s;
    l === 0 ? o ? r.push.apply(r, u) : r.push(s) : n.push({
      documentOrder: a,
      tabIndex: l,
      item: i,
      isScope: o,
      content: u
    });
  }), n.sort(l_e).reduce(function(i, a) {
    return a.isScope ? i.push.apply(i, a.content) : i.push(a.content), i;
  }, []).concat(r);
}, zV = function(t, r) {
  r = r || {};
  var n;
  return r.getShadowRoot ? n = k_([t], r.includeContainer, {
    filter: $4.bind(null, r),
    flatten: !1,
    getShadowRoot: r.getShadowRoot,
    shadowRootFilter: x_e
  }) : n = o_e(t, r.includeContainer, $4.bind(null, r)), OV(n);
};
function b_e() {
  const e = navigator.userAgentData;
  return e != null && e.platform ? e.platform : navigator.platform;
}
function w_e() {
  const e = navigator.userAgentData;
  return e && Array.isArray(e.brands) ? e.brands.map((t) => {
    let {
      brand: r,
      version: n
    } = t;
    return r + "/" + n;
  }).join(" ") : navigator.userAgent;
}
function jV() {
  return /apple/i.test(navigator.vendor);
}
function __e() {
  return b_e().toLowerCase().startsWith("mac") && !navigator.maxTouchPoints;
}
function S_e() {
  return w_e().includes("jsdom/");
}
const H4 = "data-floating-ui-focusable", C_e = "input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";
function O_(e) {
  let t = e.activeElement;
  for (; ((r = t) == null || (r = r.shadowRoot) == null ? void 0 : r.activeElement) != null; ) {
    var r;
    t = t.shadowRoot.activeElement;
  }
  return t;
}
function Hc(e, t) {
  if (!e || !t)
    return !1;
  const r = t.getRootNode == null ? void 0 : t.getRootNode();
  if (e.contains(t))
    return !0;
  if (r && N_(r)) {
    let n = t;
    for (; n; ) {
      if (e === n)
        return !0;
      n = n.parentNode || n.host;
    }
  }
  return !1;
}
function Ju(e) {
  return "composedPath" in e ? e.composedPath()[0] : e.target;
}
function Bb(e, t) {
  if (t == null)
    return !1;
  if ("composedPath" in e)
    return e.composedPath().includes(t);
  const r = e;
  return r.target != null && t.contains(r.target);
}
function T_e(e) {
  return e.matches("html,body");
}
function ea(e) {
  return (e == null ? void 0 : e.ownerDocument) || document;
}
function A_e(e) {
  return Ln(e) && e.matches(C_e);
}
function M_e(e) {
  if (!e || S_e()) return !0;
  try {
    return e.matches(":focus-visible");
  } catch {
    return !0;
  }
}
function E_e(e) {
  return e ? e.hasAttribute(H4) ? e : e.querySelector("[" + H4 + "]") || e : null;
}
function Mg(e, t, r) {
  return r === void 0 && (r = !0), e.filter((i) => {
    var a;
    return i.parentId === t && (!r || ((a = i.context) == null ? void 0 : a.open));
  }).flatMap((i) => [i, ...Mg(e, i.id, r)]);
}
function D_e(e) {
  return "nativeEvent" in e;
}
function z_(e, t) {
  const r = ["mouse", "pen"];
  return r.push("", void 0), r.includes(e);
}
var N_e = typeof document < "u", I_e = function() {
}, Mi = N_e ? Hh : I_e;
const L_e = {
  ...T
};
function Gv(e) {
  const t = T.useRef(e);
  return Mi(() => {
    t.current = e;
  }), t;
}
const R_e = L_e.useInsertionEffect, P_e = R_e || ((e) => e());
function Xi(e) {
  const t = T.useRef(() => {
    if (process.env.NODE_ENV !== "production")
      throw new Error("Cannot call an event handler while rendering.");
  });
  return P_e(() => {
    t.current = e;
  }), T.useCallback(function() {
    for (var r = arguments.length, n = new Array(r), i = 0; i < r; i++)
      n[i] = arguments[i];
    return t.current == null ? void 0 : t.current(...n);
  }, []);
}
const VV = () => ({
  getShadowRoot: !0,
  displayCheck: (
    // JSDOM does not support the `tabbable` library. To solve this we can
    // check if `ResizeObserver` is a real function (not polyfilled), which
    // determines if the current environment is JSDOM-like.
    typeof ResizeObserver == "function" && ResizeObserver.toString().includes("[native code]") ? "full" : "none"
  )
});
function BV(e, t) {
  const r = zV(e, VV()), n = r.length;
  if (n === 0) return;
  const i = O_(ea(e)), a = r.indexOf(i), o = a === -1 ? t === 1 ? 0 : n - 1 : a + t;
  return r[o];
}
function k_e(e) {
  return BV(ea(e).body, 1) || e;
}
function O_e(e) {
  return BV(ea(e).body, -1) || e;
}
function Fb(e, t) {
  const r = t || e.currentTarget, n = e.relatedTarget;
  return !n || !Hc(r, n);
}
function z_e(e) {
  zV(e, VV()).forEach((r) => {
    r.dataset.tabindex = r.getAttribute("tabindex") || "", r.setAttribute("tabindex", "-1");
  });
}
function G4(e) {
  e.querySelectorAll("[data-tabindex]").forEach((r) => {
    const n = r.dataset.tabindex;
    delete r.dataset.tabindex, n ? r.setAttribute("tabindex", n) : r.removeAttribute("tabindex");
  });
}
function W4(e, t, r) {
  let {
    reference: n,
    floating: i
  } = e;
  const a = Qi(t), o = gA(t), s = vA(o), l = ao(t), u = a === "y", c = n.x + n.width / 2 - i.width / 2, f = n.y + n.height / 2 - i.height / 2, d = n[s] / 2 - i[s] / 2;
  let h;
  switch (l) {
    case "top":
      h = {
        x: c,
        y: n.y - i.height
      };
      break;
    case "bottom":
      h = {
        x: c,
        y: n.y + n.height
      };
      break;
    case "right":
      h = {
        x: n.x + n.width,
        y: f
      };
      break;
    case "left":
      h = {
        x: n.x - i.width,
        y: f
      };
      break;
    default:
      h = {
        x: n.x,
        y: n.y
      };
  }
  switch (Sf(t)) {
    case "start":
      h[o] -= d * (r && u ? -1 : 1);
      break;
    case "end":
      h[o] += d * (r && u ? -1 : 1);
      break;
  }
  return h;
}
const j_e = async (e, t, r) => {
  const {
    placement: n = "bottom",
    strategy: i = "absolute",
    middleware: a = [],
    platform: o
  } = r, s = a.filter(Boolean), l = await (o.isRTL == null ? void 0 : o.isRTL(t));
  let u = await o.getElementRects({
    reference: e,
    floating: t,
    strategy: i
  }), {
    x: c,
    y: f
  } = W4(u, n, l), d = n, h = {}, p = 0;
  for (let v = 0; v < s.length; v++) {
    const {
      name: g,
      fn: m
    } = s[v], {
      x: y,
      y: b,
      data: w,
      reset: _
    } = await m({
      x: c,
      y: f,
      initialPlacement: n,
      placement: d,
      strategy: i,
      middlewareData: h,
      rects: u,
      platform: o,
      elements: {
        reference: e,
        floating: t
      }
    });
    c = y ?? c, f = b ?? f, h = {
      ...h,
      [g]: {
        ...h[g],
        ...w
      }
    }, _ && p <= 50 && (p++, typeof _ == "object" && (_.placement && (d = _.placement), _.rects && (u = _.rects === !0 ? await o.getElementRects({
      reference: e,
      floating: t,
      strategy: i
    }) : _.rects), {
      x: c,
      y: f
    } = W4(u, d, l)), v = -1);
  }
  return {
    x: c,
    y: f,
    placement: d,
    strategy: i,
    middlewareData: h
  };
};
async function jh(e, t) {
  var r;
  t === void 0 && (t = {});
  const {
    x: n,
    y: i,
    platform: a,
    rects: o,
    elements: s,
    strategy: l
  } = e, {
    boundary: u = "clippingAncestors",
    rootBoundary: c = "viewport",
    elementContext: f = "floating",
    altBoundary: d = !1,
    padding: h = 0
  } = io(t, e), p = IV(h), g = s[d ? f === "floating" ? "reference" : "floating" : f], m = qm(await a.getClippingRect({
    element: (r = await (a.isElement == null ? void 0 : a.isElement(g))) == null || r ? g : g.contextElement || await (a.getDocumentElement == null ? void 0 : a.getDocumentElement(s.floating)),
    boundary: u,
    rootBoundary: c,
    strategy: l
  })), y = f === "floating" ? {
    x: n,
    y: i,
    width: o.floating.width,
    height: o.floating.height
  } : o.reference, b = await (a.getOffsetParent == null ? void 0 : a.getOffsetParent(s.floating)), w = await (a.isElement == null ? void 0 : a.isElement(b)) ? await (a.getScale == null ? void 0 : a.getScale(b)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, _ = qm(a.convertOffsetParentRelativeRectToViewportRelativeRect ? await a.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: s,
    rect: y,
    offsetParent: b,
    strategy: l
  }) : y);
  return {
    top: (m.top - _.top + p.top) / w.y,
    bottom: (_.bottom - m.bottom + p.bottom) / w.y,
    left: (m.left - _.left + p.left) / w.x,
    right: (_.right - m.right + p.right) / w.x
  };
}
const V_e = (e) => ({
  name: "arrow",
  options: e,
  async fn(t) {
    const {
      x: r,
      y: n,
      placement: i,
      rects: a,
      platform: o,
      elements: s,
      middlewareData: l
    } = t, {
      element: u,
      padding: c = 0
    } = io(e, t) || {};
    if (u == null)
      return {};
    const f = IV(c), d = {
      x: r,
      y: n
    }, h = gA(i), p = vA(h), v = await o.getDimensions(u), g = h === "y", m = g ? "top" : "left", y = g ? "bottom" : "right", b = g ? "clientHeight" : "clientWidth", w = a.reference[p] + a.reference[h] - d[h] - a.floating[p], _ = d[h] - a.reference[h], S = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(u));
    let C = S ? S[b] : 0;
    (!C || !await (o.isElement == null ? void 0 : o.isElement(S))) && (C = s.floating[b] || a.floating[p]);
    const A = w / 2 - _ / 2, M = C / 2 - v[p] / 2 - 1, D = ds(f[m], M), N = ds(f[y], M), R = D, O = C - v[p] - N, E = C / 2 - v[p] / 2 + A, L = L_(R, E, O), I = !l.arrow && Sf(i) != null && E !== L && a.reference[p] / 2 - (E < R ? D : N) - v[p] / 2 < 0, P = I ? E < R ? E - R : E - O : 0;
    return {
      [h]: d[h] + P,
      data: {
        [h]: L,
        centerOffset: E - L - P,
        ...I && {
          alignmentOffset: P
        }
      },
      reset: I
    };
  }
}), B_e = function(e) {
  return e === void 0 && (e = {}), {
    name: "flip",
    options: e,
    async fn(t) {
      var r, n;
      const {
        placement: i,
        middlewareData: a,
        rects: o,
        initialPlacement: s,
        platform: l,
        elements: u
      } = t, {
        mainAxis: c = !0,
        crossAxis: f = !0,
        fallbackPlacements: d,
        fallbackStrategy: h = "bestFit",
        fallbackAxisSideDirection: p = "none",
        flipAlignment: v = !0,
        ...g
      } = io(e, t);
      if ((r = a.arrow) != null && r.alignmentOffset)
        return {};
      const m = ao(i), y = Qi(s), b = ao(s) === s, w = await (l.isRTL == null ? void 0 : l.isRTL(u.floating)), _ = d || (b || !v ? [Km(s)] : Jwe(s)), S = p !== "none";
      !d && S && _.push(...r_e(s, v, p, w));
      const C = [s, ..._], A = await jh(t, g), M = [];
      let D = ((n = a.flip) == null ? void 0 : n.overflows) || [];
      if (c && M.push(A[m]), f) {
        const E = qwe(i, o, w);
        M.push(A[E[0]], A[E[1]]);
      }
      if (D = [...D, {
        placement: i,
        overflows: M
      }], !M.every((E) => E <= 0)) {
        var N, R;
        const E = (((N = a.flip) == null ? void 0 : N.index) || 0) + 1, L = C[E];
        if (L && (!(f === "alignment" ? y !== Qi(L) : !1) || // We leave the current main axis only if every placement on that axis
        // overflows the main axis.
        D.every((k) => Qi(k.placement) === y ? k.overflows[0] > 0 : !0)))
          return {
            data: {
              index: E,
              overflows: D
            },
            reset: {
              placement: L
            }
          };
        let I = (R = D.filter((P) => P.overflows[0] <= 0).sort((P, k) => P.overflows[1] - k.overflows[1])[0]) == null ? void 0 : R.placement;
        if (!I)
          switch (h) {
            case "bestFit": {
              var O;
              const P = (O = D.filter((k) => {
                if (S) {
                  const z = Qi(k.placement);
                  return z === y || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  z === "y";
                }
                return !0;
              }).map((k) => [k.placement, k.overflows.filter((z) => z > 0).reduce((z, V) => z + V, 0)]).sort((k, z) => k[1] - z[1])[0]) == null ? void 0 : O[0];
              P && (I = P);
              break;
            }
            case "initialPlacement":
              I = s;
              break;
          }
        if (i !== I)
          return {
            reset: {
              placement: I
            }
          };
      }
      return {};
    }
  };
};
function U4(e, t) {
  return {
    top: e.top - t.height,
    right: e.right - t.width,
    bottom: e.bottom - t.height,
    left: e.left - t.width
  };
}
function Y4(e) {
  return Ywe.some((t) => e[t] >= 0);
}
const F_e = function(e) {
  return e === void 0 && (e = {}), {
    name: "hide",
    options: e,
    async fn(t) {
      const {
        rects: r
      } = t, {
        strategy: n = "referenceHidden",
        ...i
      } = io(e, t);
      switch (n) {
        case "referenceHidden": {
          const a = await jh(t, {
            ...i,
            elementContext: "reference"
          }), o = U4(a, r.reference);
          return {
            data: {
              referenceHiddenOffsets: o,
              referenceHidden: Y4(o)
            }
          };
        }
        case "escaped": {
          const a = await jh(t, {
            ...i,
            altBoundary: !0
          }), o = U4(a, r.floating);
          return {
            data: {
              escapedOffsets: o,
              escaped: Y4(o)
            }
          };
        }
        default:
          return {};
      }
    }
  };
}, FV = /* @__PURE__ */ new Set(["left", "top"]);
async function $_e(e, t) {
  const {
    placement: r,
    platform: n,
    elements: i
  } = e, a = await (n.isRTL == null ? void 0 : n.isRTL(i.floating)), o = ao(r), s = Sf(r), l = Qi(r) === "y", u = FV.has(o) ? -1 : 1, c = a && l ? -1 : 1, f = io(t, e);
  let {
    mainAxis: d,
    crossAxis: h,
    alignmentAxis: p
  } = typeof f == "number" ? {
    mainAxis: f,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: f.mainAxis || 0,
    crossAxis: f.crossAxis || 0,
    alignmentAxis: f.alignmentAxis
  };
  return s && typeof p == "number" && (h = s === "end" ? p * -1 : p), l ? {
    x: h * c,
    y: d * u
  } : {
    x: d * u,
    y: h * c
  };
}
const H_e = function(e) {
  return e === void 0 && (e = 0), {
    name: "offset",
    options: e,
    async fn(t) {
      var r, n;
      const {
        x: i,
        y: a,
        placement: o,
        middlewareData: s
      } = t, l = await $_e(t, e);
      return o === ((r = s.offset) == null ? void 0 : r.placement) && (n = s.arrow) != null && n.alignmentOffset ? {} : {
        x: i + l.x,
        y: a + l.y,
        data: {
          ...l,
          placement: o
        }
      };
    }
  };
}, G_e = function(e) {
  return e === void 0 && (e = {}), {
    name: "shift",
    options: e,
    async fn(t) {
      const {
        x: r,
        y: n,
        placement: i
      } = t, {
        mainAxis: a = !0,
        crossAxis: o = !1,
        limiter: s = {
          fn: (g) => {
            let {
              x: m,
              y
            } = g;
            return {
              x: m,
              y
            };
          }
        },
        ...l
      } = io(e, t), u = {
        x: r,
        y: n
      }, c = await jh(t, l), f = Qi(ao(i)), d = pA(f);
      let h = u[d], p = u[f];
      if (a) {
        const g = d === "y" ? "top" : "left", m = d === "y" ? "bottom" : "right", y = h + c[g], b = h - c[m];
        h = L_(y, h, b);
      }
      if (o) {
        const g = f === "y" ? "top" : "left", m = f === "y" ? "bottom" : "right", y = p + c[g], b = p - c[m];
        p = L_(y, p, b);
      }
      const v = s.fn({
        ...t,
        [d]: h,
        [f]: p
      });
      return {
        ...v,
        data: {
          x: v.x - r,
          y: v.y - n,
          enabled: {
            [d]: a,
            [f]: o
          }
        }
      };
    }
  };
}, W_e = function(e) {
  return e === void 0 && (e = {}), {
    options: e,
    fn(t) {
      const {
        x: r,
        y: n,
        placement: i,
        rects: a,
        middlewareData: o
      } = t, {
        offset: s = 0,
        mainAxis: l = !0,
        crossAxis: u = !0
      } = io(e, t), c = {
        x: r,
        y: n
      }, f = Qi(i), d = pA(f);
      let h = c[d], p = c[f];
      const v = io(s, t), g = typeof v == "number" ? {
        mainAxis: v,
        crossAxis: 0
      } : {
        mainAxis: 0,
        crossAxis: 0,
        ...v
      };
      if (l) {
        const b = d === "y" ? "height" : "width", w = a.reference[d] - a.floating[b] + g.mainAxis, _ = a.reference[d] + a.reference[b] - g.mainAxis;
        h < w ? h = w : h > _ && (h = _);
      }
      if (u) {
        var m, y;
        const b = d === "y" ? "width" : "height", w = FV.has(ao(i)), _ = a.reference[f] - a.floating[b] + (w && ((m = o.offset) == null ? void 0 : m[f]) || 0) + (w ? 0 : g.crossAxis), S = a.reference[f] + a.reference[b] + (w ? 0 : ((y = o.offset) == null ? void 0 : y[f]) || 0) - (w ? g.crossAxis : 0);
        p < _ ? p = _ : p > S && (p = S);
      }
      return {
        [d]: h,
        [f]: p
      };
    }
  };
}, U_e = function(e) {
  return e === void 0 && (e = {}), {
    name: "size",
    options: e,
    async fn(t) {
      var r, n;
      const {
        placement: i,
        rects: a,
        platform: o,
        elements: s
      } = t, {
        apply: l = () => {
        },
        ...u
      } = io(e, t), c = await jh(t, u), f = ao(i), d = Sf(i), h = Qi(i) === "y", {
        width: p,
        height: v
      } = a.floating;
      let g, m;
      f === "top" || f === "bottom" ? (g = f, m = d === (await (o.isRTL == null ? void 0 : o.isRTL(s.floating)) ? "start" : "end") ? "left" : "right") : (m = f, g = d === "end" ? "top" : "bottom");
      const y = v - c.top - c.bottom, b = p - c.left - c.right, w = ds(v - c[g], y), _ = ds(p - c[m], b), S = !t.middlewareData.shift;
      let C = w, A = _;
      if ((r = t.middlewareData.shift) != null && r.enabled.x && (A = b), (n = t.middlewareData.shift) != null && n.enabled.y && (C = y), S && !d) {
        const D = Sn(c.left, 0), N = Sn(c.right, 0), R = Sn(c.top, 0), O = Sn(c.bottom, 0);
        h ? A = p - 2 * (D !== 0 || N !== 0 ? D + N : Sn(c.left, c.right)) : C = v - 2 * (R !== 0 || O !== 0 ? R + O : Sn(c.top, c.bottom));
      }
      await l({
        ...t,
        availableWidth: A,
        availableHeight: C
      });
      const M = await o.getDimensions(s.floating);
      return p !== M.width || v !== M.height ? {
        reset: {
          rects: !0
        }
      } : {};
    }
  };
};
function $V(e) {
  const t = ni(e);
  let r = parseFloat(t.width) || 0, n = parseFloat(t.height) || 0;
  const i = Ln(e), a = i ? e.offsetWidth : r, o = i ? e.offsetHeight : n, s = Xm(r) !== a || Xm(n) !== o;
  return s && (r = a, n = o), {
    width: r,
    height: n,
    $: s
  };
}
function mA(e) {
  return Zt(e) ? e : e.contextElement;
}
function bc(e) {
  const t = mA(e);
  if (!Ln(t))
    return oa(1);
  const r = t.getBoundingClientRect(), {
    width: n,
    height: i,
    $: a
  } = $V(t);
  let o = (a ? Xm(r.width) : r.width) / n, s = (a ? Xm(r.height) : r.height) / i;
  return (!o || !Number.isFinite(o)) && (o = 1), (!s || !Number.isFinite(s)) && (s = 1), {
    x: o,
    y: s
  };
}
const Y_e = /* @__PURE__ */ oa(0);
function HV(e) {
  const t = xn(e);
  return !_0() || !t.visualViewport ? Y_e : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
function Z_e(e, t, r) {
  return t === void 0 && (t = !1), !r || t && r !== xn(e) ? !1 : t;
}
function Hl(e, t, r, n) {
  t === void 0 && (t = !1), r === void 0 && (r = !1);
  const i = e.getBoundingClientRect(), a = mA(e);
  let o = oa(1);
  t && (n ? Zt(n) && (o = bc(n)) : o = bc(e));
  const s = Z_e(a, r, n) ? HV(a) : oa(0);
  let l = (i.left + s.x) / o.x, u = (i.top + s.y) / o.y, c = i.width / o.x, f = i.height / o.y;
  if (a) {
    const d = xn(a), h = n && Zt(n) ? xn(n) : n;
    let p = d, v = I_(p);
    for (; v && n && h !== p; ) {
      const g = bc(v), m = v.getBoundingClientRect(), y = ni(v), b = m.left + (v.clientLeft + parseFloat(y.paddingLeft)) * g.x, w = m.top + (v.clientTop + parseFloat(y.paddingTop)) * g.y;
      l *= g.x, u *= g.y, c *= g.x, f *= g.y, l += b, u += w, p = xn(v), v = I_(p);
    }
  }
  return qm({
    width: c,
    height: f,
    x: l,
    y: u
  });
}
function C0(e, t) {
  const r = S0(e).scrollLeft;
  return t ? t.left + r : Hl(ga(e)).left + r;
}
function GV(e, t) {
  const r = e.getBoundingClientRect(), n = r.left + t.scrollLeft - C0(e, r), i = r.top + t.scrollTop;
  return {
    x: n,
    y: i
  };
}
function X_e(e) {
  let {
    elements: t,
    rect: r,
    offsetParent: n,
    strategy: i
  } = e;
  const a = i === "fixed", o = ga(n), s = t ? w0(t.floating) : !1;
  if (n === o || s && a)
    return r;
  let l = {
    scrollLeft: 0,
    scrollTop: 0
  }, u = oa(1);
  const c = oa(0), f = Ln(n);
  if ((f || !f && !a) && ((_f(n) !== "body" || yp(o)) && (l = S0(n)), Ln(n))) {
    const h = Hl(n);
    u = bc(n), c.x = h.x + n.clientLeft, c.y = h.y + n.clientTop;
  }
  const d = o && !f && !a ? GV(o, l) : oa(0);
  return {
    width: r.width * u.x,
    height: r.height * u.y,
    x: r.x * u.x - l.scrollLeft * u.x + c.x + d.x,
    y: r.y * u.y - l.scrollTop * u.y + c.y + d.y
  };
}
function K_e(e) {
  return Array.from(e.getClientRects());
}
function q_e(e) {
  const t = ga(e), r = S0(e), n = e.ownerDocument.body, i = Sn(t.scrollWidth, t.clientWidth, n.scrollWidth, n.clientWidth), a = Sn(t.scrollHeight, t.clientHeight, n.scrollHeight, n.clientHeight);
  let o = -r.scrollLeft + C0(e);
  const s = -r.scrollTop;
  return ni(n).direction === "rtl" && (o += Sn(t.clientWidth, n.clientWidth) - i), {
    width: i,
    height: a,
    x: o,
    y: s
  };
}
const Z4 = 25;
function J_e(e, t) {
  const r = xn(e), n = ga(e), i = r.visualViewport;
  let a = n.clientWidth, o = n.clientHeight, s = 0, l = 0;
  if (i) {
    a = i.width, o = i.height;
    const c = _0();
    (!c || c && t === "fixed") && (s = i.offsetLeft, l = i.offsetTop);
  }
  const u = C0(n);
  if (u <= 0) {
    const c = n.ownerDocument, f = c.body, d = getComputedStyle(f), h = c.compatMode === "CSS1Compat" && parseFloat(d.marginLeft) + parseFloat(d.marginRight) || 0, p = Math.abs(n.clientWidth - f.clientWidth - h);
    p <= Z4 && (a -= p);
  } else u <= Z4 && (a += u);
  return {
    width: a,
    height: o,
    x: s,
    y: l
  };
}
const Q_e = /* @__PURE__ */ new Set(["absolute", "fixed"]);
function eSe(e, t) {
  const r = Hl(e, !0, t === "fixed"), n = r.top + e.clientTop, i = r.left + e.clientLeft, a = Ln(e) ? bc(e) : oa(1), o = e.clientWidth * a.x, s = e.clientHeight * a.y, l = i * a.x, u = n * a.y;
  return {
    width: o,
    height: s,
    x: l,
    y: u
  };
}
function X4(e, t, r) {
  let n;
  if (t === "viewport")
    n = J_e(e, r);
  else if (t === "document")
    n = q_e(ga(e));
  else if (Zt(t))
    n = eSe(t, r);
  else {
    const i = HV(e);
    n = {
      x: t.x - i.x,
      y: t.y - i.y,
      width: t.width,
      height: t.height
    };
  }
  return qm(n);
}
function WV(e, t) {
  const r = no(e);
  return r === t || !Zt(r) || Ua(r) ? !1 : ni(r).position === "fixed" || WV(r, t);
}
function tSe(e, t) {
  const r = t.get(e);
  if (r)
    return r;
  let n = es(e, [], !1).filter((s) => Zt(s) && _f(s) !== "body"), i = null;
  const a = ni(e).position === "fixed";
  let o = a ? no(e) : e;
  for (; Zt(o) && !Ua(o); ) {
    const s = ni(o), l = hA(o);
    !l && s.position === "fixed" && (i = null), (a ? !l && !i : !l && s.position === "static" && !!i && Q_e.has(i.position) || yp(o) && !l && WV(e, o)) ? n = n.filter((c) => c !== o) : i = s, o = no(o);
  }
  return t.set(e, n), n;
}
function rSe(e) {
  let {
    element: t,
    boundary: r,
    rootBoundary: n,
    strategy: i
  } = e;
  const o = [...r === "clippingAncestors" ? w0(t) ? [] : tSe(t, this._c) : [].concat(r), n], s = o[0], l = o.reduce((u, c) => {
    const f = X4(t, c, i);
    return u.top = Sn(f.top, u.top), u.right = ds(f.right, u.right), u.bottom = ds(f.bottom, u.bottom), u.left = Sn(f.left, u.left), u;
  }, X4(t, s, i));
  return {
    width: l.right - l.left,
    height: l.bottom - l.top,
    x: l.left,
    y: l.top
  };
}
function nSe(e) {
  const {
    width: t,
    height: r
  } = $V(e);
  return {
    width: t,
    height: r
  };
}
function iSe(e, t, r) {
  const n = Ln(t), i = ga(t), a = r === "fixed", o = Hl(e, !0, a, t);
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = oa(0);
  function u() {
    l.x = C0(i);
  }
  if (n || !n && !a)
    if ((_f(t) !== "body" || yp(i)) && (s = S0(t)), n) {
      const h = Hl(t, !0, a, t);
      l.x = h.x + t.clientLeft, l.y = h.y + t.clientTop;
    } else i && u();
  a && !n && i && u();
  const c = i && !n && !a ? GV(i, s) : oa(0), f = o.left + s.scrollLeft - l.x - c.x, d = o.top + s.scrollTop - l.y - c.y;
  return {
    x: f,
    y: d,
    width: o.width,
    height: o.height
  };
}
function $b(e) {
  return ni(e).position === "static";
}
function K4(e, t) {
  if (!Ln(e) || ni(e).position === "fixed")
    return null;
  if (t)
    return t(e);
  let r = e.offsetParent;
  return ga(e) === r && (r = r.ownerDocument.body), r;
}
function UV(e, t) {
  const r = xn(e);
  if (w0(e))
    return r;
  if (!Ln(e)) {
    let i = no(e);
    for (; i && !Ua(i); ) {
      if (Zt(i) && !$b(i))
        return i;
      i = no(i);
    }
    return r;
  }
  let n = K4(e, t);
  for (; n && Bwe(n) && $b(n); )
    n = K4(n, t);
  return n && Ua(n) && $b(n) && !hA(n) ? r : n || Wwe(e) || r;
}
const aSe = async function(e) {
  const t = this.getOffsetParent || UV, r = this.getDimensions, n = await r(e.floating);
  return {
    reference: iSe(e.reference, await t(e.floating), e.strategy),
    floating: {
      x: 0,
      y: 0,
      width: n.width,
      height: n.height
    }
  };
};
function oSe(e) {
  return ni(e).direction === "rtl";
}
const sSe = {
  convertOffsetParentRelativeRectToViewportRelativeRect: X_e,
  getDocumentElement: ga,
  getClippingRect: rSe,
  getOffsetParent: UV,
  getElementRects: aSe,
  getClientRects: K_e,
  getDimensions: nSe,
  getScale: bc,
  isElement: Zt,
  isRTL: oSe
};
function YV(e, t) {
  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;
}
function lSe(e, t) {
  let r = null, n;
  const i = ga(e);
  function a() {
    var s;
    clearTimeout(n), (s = r) == null || s.disconnect(), r = null;
  }
  function o(s, l) {
    s === void 0 && (s = !1), l === void 0 && (l = 1), a();
    const u = e.getBoundingClientRect(), {
      left: c,
      top: f,
      width: d,
      height: h
    } = u;
    if (s || t(), !d || !h)
      return;
    const p = Hv(f), v = Hv(i.clientWidth - (c + d)), g = Hv(i.clientHeight - (f + h)), m = Hv(c), b = {
      rootMargin: -p + "px " + -v + "px " + -g + "px " + -m + "px",
      threshold: Sn(0, ds(1, l)) || 1
    };
    let w = !0;
    function _(S) {
      const C = S[0].intersectionRatio;
      if (C !== l) {
        if (!w)
          return o();
        C ? o(!1, C) : n = setTimeout(() => {
          o(!1, 1e-7);
        }, 1e3);
      }
      C === 1 && !YV(u, e.getBoundingClientRect()) && o(), w = !1;
    }
    try {
      r = new IntersectionObserver(_, {
        ...b,
        // Handle <iframe>s
        root: i.ownerDocument
      });
    } catch {
      r = new IntersectionObserver(_, b);
    }
    r.observe(e);
  }
  return o(!0), a;
}
function yA(e, t, r, n) {
  n === void 0 && (n = {});
  const {
    ancestorScroll: i = !0,
    ancestorResize: a = !0,
    elementResize: o = typeof ResizeObserver == "function",
    layoutShift: s = typeof IntersectionObserver == "function",
    animationFrame: l = !1
  } = n, u = mA(e), c = i || a ? [...u ? es(u) : [], ...es(t)] : [];
  c.forEach((m) => {
    i && m.addEventListener("scroll", r, {
      passive: !0
    }), a && m.addEventListener("resize", r);
  });
  const f = u && s ? lSe(u, r) : null;
  let d = -1, h = null;
  o && (h = new ResizeObserver((m) => {
    let [y] = m;
    y && y.target === u && h && (h.unobserve(t), cancelAnimationFrame(d), d = requestAnimationFrame(() => {
      var b;
      (b = h) == null || b.observe(t);
    })), r();
  }), u && !l && h.observe(u), h.observe(t));
  let p, v = l ? Hl(e) : null;
  l && g();
  function g() {
    const m = Hl(e);
    v && !YV(v, m) && r(), v = m, p = requestAnimationFrame(g);
  }
  return r(), () => {
    var m;
    c.forEach((y) => {
      i && y.removeEventListener("scroll", r), a && y.removeEventListener("resize", r);
    }), f == null || f(), (m = h) == null || m.disconnect(), h = null, l && cancelAnimationFrame(p);
  };
}
const uSe = H_e, cSe = G_e, fSe = B_e, dSe = U_e, hSe = F_e, q4 = V_e, pSe = W_e, vSe = (e, t, r) => {
  const n = /* @__PURE__ */ new Map(), i = {
    platform: sSe,
    ...r
  }, a = {
    ...i.platform,
    _c: n
  };
  return j_e(e, t, {
    ...i,
    platform: a
  });
};
var gSe = typeof document < "u", mSe = function() {
}, Eg = gSe ? Hh : mSe;
function Qm(e, t) {
  if (e === t)
    return !0;
  if (typeof e != typeof t)
    return !1;
  if (typeof e == "function" && e.toString() === t.toString())
    return !0;
  let r, n, i;
  if (e && t && typeof e == "object") {
    if (Array.isArray(e)) {
      if (r = e.length, r !== t.length) return !1;
      for (n = r; n-- !== 0; )
        if (!Qm(e[n], t[n]))
          return !1;
      return !0;
    }
    if (i = Object.keys(e), r = i.length, r !== Object.keys(t).length)
      return !1;
    for (n = r; n-- !== 0; )
      if (!{}.hasOwnProperty.call(t, i[n]))
        return !1;
    for (n = r; n-- !== 0; ) {
      const a = i[n];
      if (!(a === "_owner" && e.$$typeof) && !Qm(e[a], t[a]))
        return !1;
    }
    return !0;
  }
  return e !== e && t !== t;
}
function ZV(e) {
  return typeof window > "u" ? 1 : (e.ownerDocument.defaultView || window).devicePixelRatio || 1;
}
function J4(e, t) {
  const r = ZV(e);
  return Math.round(t * r) / r;
}
function Hb(e) {
  const t = T.useRef(e);
  return Eg(() => {
    t.current = e;
  }), t;
}
function xA(e) {
  e === void 0 && (e = {});
  const {
    placement: t = "bottom",
    strategy: r = "absolute",
    middleware: n = [],
    platform: i,
    elements: {
      reference: a,
      floating: o
    } = {},
    transform: s = !0,
    whileElementsMounted: l,
    open: u
  } = e, [c, f] = T.useState({
    x: 0,
    y: 0,
    strategy: r,
    placement: t,
    middlewareData: {},
    isPositioned: !1
  }), [d, h] = T.useState(n);
  Qm(d, n) || h(n);
  const [p, v] = T.useState(null), [g, m] = T.useState(null), y = T.useCallback((k) => {
    k !== S.current && (S.current = k, v(k));
  }, []), b = T.useCallback((k) => {
    k !== C.current && (C.current = k, m(k));
  }, []), w = a || p, _ = o || g, S = T.useRef(null), C = T.useRef(null), A = T.useRef(c), M = l != null, D = Hb(l), N = Hb(i), R = Hb(u), O = T.useCallback(() => {
    if (!S.current || !C.current)
      return;
    const k = {
      placement: t,
      strategy: r,
      middleware: d
    };
    N.current && (k.platform = N.current), vSe(S.current, C.current, k).then((z) => {
      const V = {
        ...z,
        // The floating element's position may be recomputed while it's closed
        // but still mounted (such as when transitioning out). To ensure
        // `isPositioned` will be `false` initially on the next open, avoid
        // setting it to `true` when `open === false` (must be specified).
        isPositioned: R.current !== !1
      };
      E.current && !Qm(A.current, V) && (A.current = V, dy.flushSync(() => {
        f(V);
      }));
    });
  }, [d, t, r, N, R]);
  Eg(() => {
    u === !1 && A.current.isPositioned && (A.current.isPositioned = !1, f((k) => ({
      ...k,
      isPositioned: !1
    })));
  }, [u]);
  const E = T.useRef(!1);
  Eg(() => (E.current = !0, () => {
    E.current = !1;
  }), []), Eg(() => {
    if (w && (S.current = w), _ && (C.current = _), w && _) {
      if (D.current)
        return D.current(w, _, O);
      O();
    }
  }, [w, _, O, D, M]);
  const L = T.useMemo(() => ({
    reference: S,
    floating: C,
    setReference: y,
    setFloating: b
  }), [y, b]), I = T.useMemo(() => ({
    reference: w,
    floating: _
  }), [w, _]), P = T.useMemo(() => {
    const k = {
      position: r,
      left: 0,
      top: 0
    };
    if (!I.floating)
      return k;
    const z = J4(I.floating, c.x), V = J4(I.floating, c.y);
    return s ? {
      ...k,
      transform: "translate(" + z + "px, " + V + "px)",
      ...ZV(I.floating) >= 1.5 && {
        willChange: "transform"
      }
    } : {
      position: r,
      left: z,
      top: V
    };
  }, [r, s, I.floating, c.x, c.y]);
  return T.useMemo(() => ({
    ...c,
    update: O,
    refs: L,
    elements: I,
    floatingStyles: P
  }), [c, O, L, I, P]);
}
const ySe = (e) => {
  function t(r) {
    return {}.hasOwnProperty.call(r, "current");
  }
  return {
    name: "arrow",
    options: e,
    fn(r) {
      const {
        element: n,
        padding: i
      } = typeof e == "function" ? e(r) : e;
      return n && t(n) ? n.current != null ? q4({
        element: n.current,
        padding: i
      }).fn(r) : {} : n ? q4({
        element: n,
        padding: i
      }).fn(r) : {};
    }
  };
}, bA = (e, t) => ({
  ...uSe(e),
  options: [e, t]
}), wA = (e, t) => ({
  ...cSe(e),
  options: [e, t]
}), XV = (e, t) => ({
  ...pSe(e),
  options: [e, t]
}), _A = (e, t) => ({
  ...fSe(e),
  options: [e, t]
}), KV = (e, t) => ({
  ...dSe(e),
  options: [e, t]
}), qV = (e, t) => ({
  ...hSe(e),
  options: [e, t]
}), JV = (e, t) => ({
  ...ySe(e),
  options: [e, t]
});
function QV(e) {
  const t = T.useRef(void 0), r = T.useCallback((n) => {
    const i = e.map((a) => {
      if (a != null) {
        if (typeof a == "function") {
          const o = a, s = o(n);
          return typeof s == "function" ? s : () => {
            o(null);
          };
        }
        return a.current = n, () => {
          a.current = null;
        };
      }
    });
    return () => {
      i.forEach((a) => a == null ? void 0 : a());
    };
  }, e);
  return T.useMemo(() => e.every((n) => n == null) ? null : (n) => {
    t.current && (t.current(), t.current = void 0), n != null && (t.current = r(n));
  }, e);
}
const xSe = "data-floating-ui-focusable", Q4 = "active", eR = "selected", bSe = {
  ...T
};
let tR = !1, wSe = 0;
const rR = () => (
  // Ensure the id is unique with multiple independent versions of Floating UI
  // on <React 18
  "floating-ui-" + Math.random().toString(36).slice(2, 6) + wSe++
);
function _Se() {
  const [e, t] = T.useState(() => tR ? rR() : void 0);
  return Mi(() => {
    e == null && t(rR());
  }, []), T.useEffect(() => {
    tR = !0;
  }, []), e;
}
const SSe = bSe.useId, SA = SSe || _Se;
let j_;
process.env.NODE_ENV !== "production" && (j_ = /* @__PURE__ */ new Set());
function CSe() {
  for (var e, t = arguments.length, r = new Array(t), n = 0; n < t; n++)
    r[n] = arguments[n];
  const i = "Floating UI: " + r.join(" ");
  if (!((e = j_) != null && e.has(i))) {
    var a;
    (a = j_) == null || a.add(i), console.error(i);
  }
}
function TSe() {
  const e = /* @__PURE__ */ new Map();
  return {
    emit(t, r) {
      var n;
      (n = e.get(t)) == null || n.forEach((i) => i(r));
    },
    on(t, r) {
      e.has(t) || e.set(t, /* @__PURE__ */ new Set()), e.get(t).add(r);
    },
    off(t, r) {
      var n;
      (n = e.get(t)) == null || n.delete(r);
    }
  };
}
const ASe = /* @__PURE__ */ T.createContext(null), MSe = /* @__PURE__ */ T.createContext(null), CA = () => {
  var e;
  return ((e = T.useContext(ASe)) == null ? void 0 : e.id) || null;
}, TA = () => T.useContext(MSe);
function xp(e) {
  return "data-floating-ui-" + e;
}
function Bn(e) {
  e.current !== -1 && (clearTimeout(e.current), e.current = -1);
}
const nR = /* @__PURE__ */ xp("safe-polygon");
function Gb(e, t, r) {
  if (r && !z_(r))
    return 0;
  if (typeof e == "number")
    return e;
  if (typeof e == "function") {
    const n = e();
    return typeof n == "number" ? n : n == null ? void 0 : n[t];
  }
  return e == null ? void 0 : e[t];
}
function Wb(e) {
  return typeof e == "function" ? e() : e;
}
function ESe(e, t) {
  t === void 0 && (t = {});
  const {
    open: r,
    onOpenChange: n,
    dataRef: i,
    events: a,
    elements: o
  } = e, {
    enabled: s = !0,
    delay: l = 0,
    handleClose: u = null,
    mouseOnly: c = !1,
    restMs: f = 0,
    move: d = !0
  } = t, h = TA(), p = CA(), v = Gv(u), g = Gv(l), m = Gv(r), y = Gv(f), b = T.useRef(), w = T.useRef(-1), _ = T.useRef(), S = T.useRef(-1), C = T.useRef(!0), A = T.useRef(!1), M = T.useRef(() => {
  }), D = T.useRef(!1), N = Xi(() => {
    var P;
    const k = (P = i.current.openEvent) == null ? void 0 : P.type;
    return (k == null ? void 0 : k.includes("mouse")) && k !== "mousedown";
  });
  T.useEffect(() => {
    if (!s) return;
    function P(k) {
      let {
        open: z
      } = k;
      z || (Bn(w), Bn(S), C.current = !0, D.current = !1);
    }
    return a.on("openchange", P), () => {
      a.off("openchange", P);
    };
  }, [s, a]), T.useEffect(() => {
    if (!s || !v.current || !r) return;
    function P(z) {
      N() && n(!1, z, "hover");
    }
    const k = ea(o.floating).documentElement;
    return k.addEventListener("mouseleave", P), () => {
      k.removeEventListener("mouseleave", P);
    };
  }, [o.floating, r, n, s, v, N]);
  const R = T.useCallback(function(P, k, z) {
    k === void 0 && (k = !0), z === void 0 && (z = "hover");
    const V = Gb(g.current, "close", b.current);
    V && !_.current ? (Bn(w), w.current = window.setTimeout(() => n(!1, P, z), V)) : k && (Bn(w), n(!1, P, z));
  }, [g, n]), O = Xi(() => {
    M.current(), _.current = void 0;
  }), E = Xi(() => {
    if (A.current) {
      const P = ea(o.floating).body;
      P.style.pointerEvents = "", P.removeAttribute(nR), A.current = !1;
    }
  }), L = Xi(() => i.current.openEvent ? ["click", "mousedown"].includes(i.current.openEvent.type) : !1);
  T.useEffect(() => {
    if (!s) return;
    function P(F) {
      if (Bn(w), C.current = !1, c && !z_(b.current) || Wb(y.current) > 0 && !Gb(g.current, "open"))
        return;
      const H = Gb(g.current, "open", b.current);
      H ? w.current = window.setTimeout(() => {
        m.current || n(!0, F, "hover");
      }, H) : r || n(!0, F, "hover");
    }
    function k(F) {
      if (L()) {
        E();
        return;
      }
      M.current();
      const H = ea(o.floating);
      if (Bn(S), D.current = !1, v.current && i.current.floatingContext) {
        r || Bn(w), _.current = v.current({
          ...i.current.floatingContext,
          tree: h,
          x: F.clientX,
          y: F.clientY,
          onClose() {
            E(), O(), L() || R(F, !0, "safe-polygon");
          }
        });
        const W = _.current;
        H.addEventListener("mousemove", W), M.current = () => {
          H.removeEventListener("mousemove", W);
        };
        return;
      }
      (b.current === "touch" ? !Hc(o.floating, F.relatedTarget) : !0) && R(F);
    }
    function z(F) {
      L() || i.current.floatingContext && (v.current == null || v.current({
        ...i.current.floatingContext,
        tree: h,
        x: F.clientX,
        y: F.clientY,
        onClose() {
          E(), O(), L() || R(F);
        }
      })(F));
    }
    function V() {
      Bn(w);
    }
    function B(F) {
      L() || R(F, !1);
    }
    if (Zt(o.domReference)) {
      const F = o.domReference, H = o.floating;
      return r && F.addEventListener("mouseleave", z), d && F.addEventListener("mousemove", P, {
        once: !0
      }), F.addEventListener("mouseenter", P), F.addEventListener("mouseleave", k), H && (H.addEventListener("mouseleave", z), H.addEventListener("mouseenter", V), H.addEventListener("mouseleave", B)), () => {
        r && F.removeEventListener("mouseleave", z), d && F.removeEventListener("mousemove", P), F.removeEventListener("mouseenter", P), F.removeEventListener("mouseleave", k), H && (H.removeEventListener("mouseleave", z), H.removeEventListener("mouseenter", V), H.removeEventListener("mouseleave", B));
      };
    }
  }, [o, s, e, c, d, R, O, E, n, r, m, h, g, v, i, L, y]), Mi(() => {
    var P;
    if (s && r && (P = v.current) != null && (P = P.__options) != null && P.blockPointerEvents && N()) {
      A.current = !0;
      const z = o.floating;
      if (Zt(o.domReference) && z) {
        var k;
        const V = ea(o.floating).body;
        V.setAttribute(nR, "");
        const B = o.domReference, F = h == null || (k = h.nodesRef.current.find((H) => H.id === p)) == null || (k = k.context) == null ? void 0 : k.elements.floating;
        return F && (F.style.pointerEvents = ""), V.style.pointerEvents = "none", B.style.pointerEvents = "auto", z.style.pointerEvents = "auto", () => {
          V.style.pointerEvents = "", B.style.pointerEvents = "", z.style.pointerEvents = "";
        };
      }
    }
  }, [s, r, p, o, h, v, N]), Mi(() => {
    r || (b.current = void 0, D.current = !1, O(), E());
  }, [r, O, E]), T.useEffect(() => () => {
    O(), Bn(w), Bn(S), E();
  }, [s, o.domReference, O, E]);
  const I = T.useMemo(() => {
    function P(k) {
      b.current = k.pointerType;
    }
    return {
      onPointerDown: P,
      onPointerEnter: P,
      onMouseMove(k) {
        const {
          nativeEvent: z
        } = k;
        function V() {
          !C.current && !m.current && n(!0, z, "hover");
        }
        c && !z_(b.current) || r || Wb(y.current) === 0 || D.current && k.movementX ** 2 + k.movementY ** 2 < 2 || (Bn(S), b.current === "touch" ? V() : (D.current = !0, S.current = window.setTimeout(V, Wb(y.current))));
      }
    };
  }, [c, n, r, m, y]);
  return T.useMemo(() => s ? {
    reference: I
  } : {}, [s, I]);
}
const iR = () => {
}, DSe = /* @__PURE__ */ T.createContext({
  delay: 0,
  initialDelay: 0,
  timeoutMs: 0,
  currentId: null,
  setCurrentId: iR,
  setState: iR,
  isInstantPhase: !1
});
function NSe(e) {
  const {
    children: t,
    delay: r,
    timeoutMs: n = 0
  } = e, [i, a] = T.useReducer((l, u) => ({
    ...l,
    ...u
  }), {
    delay: r,
    timeoutMs: n,
    initialDelay: r,
    currentId: null,
    isInstantPhase: !1
  }), o = T.useRef(null), s = T.useCallback((l) => {
    a({
      currentId: l
    });
  }, []);
  return Mi(() => {
    i.currentId ? o.current === null ? o.current = i.currentId : i.isInstantPhase || a({
      isInstantPhase: !0
    }) : (i.isInstantPhase && a({
      isInstantPhase: !1
    }), o.current = null);
  }, [i.currentId, i.isInstantPhase]), /* @__PURE__ */ x.jsx(DSe.Provider, {
    value: T.useMemo(() => ({
      ...i,
      setState: a,
      setCurrentId: s
    }), [i, s]),
    children: t
  });
}
const eB = {
  border: 0,
  clip: "rect(0 0 0 0)",
  height: "1px",
  margin: "-1px",
  overflow: "hidden",
  padding: 0,
  position: "fixed",
  whiteSpace: "nowrap",
  width: "1px",
  top: 0,
  left: 0
}, aR = /* @__PURE__ */ T.forwardRef(function(t, r) {
  const [n, i] = T.useState();
  Mi(() => {
    jV() && i("button");
  }, []);
  const a = {
    ref: r,
    tabIndex: 0,
    // Role is only for VoiceOver
    role: n,
    "aria-hidden": n ? void 0 : !0,
    [xp("focus-guard")]: "",
    style: eB
  };
  return /* @__PURE__ */ x.jsx("span", {
    ...t,
    ...a
  });
}), tB = /* @__PURE__ */ T.createContext(null), oR = /* @__PURE__ */ xp("portal");
function ISe(e) {
  e === void 0 && (e = {});
  const {
    id: t,
    root: r
  } = e, n = SA(), i = RSe(), [a, o] = T.useState(null), s = T.useRef(null);
  return Mi(() => () => {
    a == null || a.remove(), queueMicrotask(() => {
      s.current = null;
    });
  }, [a]), Mi(() => {
    if (!n || s.current) return;
    const l = t ? document.getElementById(t) : null;
    if (!l) return;
    const u = document.createElement("div");
    u.id = n, u.setAttribute(oR, ""), l.appendChild(u), s.current = u, o(u);
  }, [t, n]), Mi(() => {
    if (r === null || !n || s.current) return;
    let l = r || (i == null ? void 0 : i.portalNode);
    l && !dA(l) && (l = l.current), l = l || document.body;
    let u = null;
    t && (u = document.createElement("div"), u.id = t, l.appendChild(u));
    const c = document.createElement("div");
    c.id = n, c.setAttribute(oR, ""), l = u || l, l.appendChild(c), s.current = c, o(c);
  }, [t, r, n, i]), a;
}
function LSe(e) {
  const {
    children: t,
    id: r,
    root: n,
    preserveTabOrder: i = !0
  } = e, a = ISe({
    id: r,
    root: n
  }), [o, s] = T.useState(null), l = T.useRef(null), u = T.useRef(null), c = T.useRef(null), f = T.useRef(null), d = o == null ? void 0 : o.modal, h = o == null ? void 0 : o.open, p = (
    // The FocusManager and therefore floating element are currently open/
    // rendered.
    !!o && // Guards are only for non-modal focus management.
    !o.modal && // Don't render if unmount is transitioning.
    o.open && i && !!(n || a)
  );
  return T.useEffect(() => {
    if (!a || !i || d)
      return;
    function v(g) {
      a && Fb(g) && (g.type === "focusin" ? G4 : z_e)(a);
    }
    return a.addEventListener("focusin", v, !0), a.addEventListener("focusout", v, !0), () => {
      a.removeEventListener("focusin", v, !0), a.removeEventListener("focusout", v, !0);
    };
  }, [a, i, d]), T.useEffect(() => {
    a && (h || G4(a));
  }, [h, a]), /* @__PURE__ */ x.jsxs(tB.Provider, {
    value: T.useMemo(() => ({
      preserveTabOrder: i,
      beforeOutsideRef: l,
      afterOutsideRef: u,
      beforeInsideRef: c,
      afterInsideRef: f,
      portalNode: a,
      setFocusManagerState: s
    }), [i, a]),
    children: [p && a && /* @__PURE__ */ x.jsx(aR, {
      "data-type": "outside",
      ref: l,
      onFocus: (v) => {
        if (Fb(v, a)) {
          var g;
          (g = c.current) == null || g.focus();
        } else {
          const m = o ? o.domReference : null, y = O_e(m);
          y == null || y.focus();
        }
      }
    }), p && a && /* @__PURE__ */ x.jsx("span", {
      "aria-owns": a.id,
      style: eB
    }), a && /* @__PURE__ */ dy.createPortal(t, a), p && a && /* @__PURE__ */ x.jsx(aR, {
      "data-type": "outside",
      ref: u,
      onFocus: (v) => {
        if (Fb(v, a)) {
          var g;
          (g = f.current) == null || g.focus();
        } else {
          const m = o ? o.domReference : null, y = k_e(m);
          y == null || y.focus(), o != null && o.closeOnFocusOut && (o == null || o.onOpenChange(!1, v.nativeEvent, "focus-out"));
        }
      }
    })]
  });
}
const RSe = () => T.useContext(tB), PSe = {
  pointerdown: "onPointerDown",
  mousedown: "onMouseDown",
  click: "onClick"
}, kSe = {
  pointerdown: "onPointerDownCapture",
  mousedown: "onMouseDownCapture",
  click: "onClickCapture"
}, sR = (e) => {
  var t, r;
  return {
    escapeKey: typeof e == "boolean" ? e : (t = e == null ? void 0 : e.escapeKey) != null ? t : !1,
    outsidePress: typeof e == "boolean" ? e : (r = e == null ? void 0 : e.outsidePress) != null ? r : !0
  };
};
function OSe(e, t) {
  t === void 0 && (t = {});
  const {
    open: r,
    onOpenChange: n,
    elements: i,
    dataRef: a
  } = e, {
    enabled: o = !0,
    escapeKey: s = !0,
    outsidePress: l = !0,
    outsidePressEvent: u = "pointerdown",
    referencePress: c = !1,
    referencePressEvent: f = "pointerdown",
    ancestorScroll: d = !1,
    bubbles: h,
    capture: p
  } = t, v = TA(), g = Xi(typeof l == "function" ? l : () => !1), m = typeof l == "function" ? g : l, y = T.useRef(!1), {
    escapeKey: b,
    outsidePress: w
  } = sR(h), {
    escapeKey: _,
    outsidePress: S
  } = sR(p), C = T.useRef(!1), A = Xi((E) => {
    var L;
    if (!r || !o || !s || E.key !== "Escape" || C.current)
      return;
    const I = (L = a.current.floatingContext) == null ? void 0 : L.nodeId, P = v ? Mg(v.nodesRef.current, I) : [];
    if (!b && (E.stopPropagation(), P.length > 0)) {
      let k = !0;
      if (P.forEach((z) => {
        var V;
        if ((V = z.context) != null && V.open && !z.context.dataRef.current.__escapeKeyBubbles) {
          k = !1;
          return;
        }
      }), !k)
        return;
    }
    n(!1, D_e(E) ? E.nativeEvent : E, "escape-key");
  }), M = Xi((E) => {
    var L;
    const I = () => {
      var P;
      A(E), (P = Ju(E)) == null || P.removeEventListener("keydown", I);
    };
    (L = Ju(E)) == null || L.addEventListener("keydown", I);
  }), D = Xi((E) => {
    var L;
    const I = a.current.insideReactTree;
    a.current.insideReactTree = !1;
    const P = y.current;
    if (y.current = !1, u === "click" && P || I || typeof m == "function" && !m(E))
      return;
    const k = Ju(E), z = "[" + xp("inert") + "]", V = ea(i.floating).querySelectorAll(z);
    let B = Zt(k) ? k : null;
    for (; B && !Ua(B); ) {
      const W = no(B);
      if (Ua(W) || !Zt(W))
        break;
      B = W;
    }
    if (V.length && Zt(k) && !T_e(k) && // Clicked on a direct ancestor (e.g. FloatingOverlay).
    !Hc(k, i.floating) && // If the target root element contains none of the markers, then the
    // element was injected after the floating element rendered.
    Array.from(V).every((W) => !Hc(B, W)))
      return;
    if (Ln(k) && O) {
      const W = Ua(k), X = ni(k), q = /auto|scroll/, J = W || q.test(X.overflowX), U = W || q.test(X.overflowY), $ = J && k.clientWidth > 0 && k.scrollWidth > k.clientWidth, Y = U && k.clientHeight > 0 && k.scrollHeight > k.clientHeight, Z = X.direction === "rtl", K = Y && (Z ? E.offsetX <= k.offsetWidth - k.clientWidth : E.offsetX > k.clientWidth), ie = $ && E.offsetY > k.clientHeight;
      if (K || ie)
        return;
    }
    const F = (L = a.current.floatingContext) == null ? void 0 : L.nodeId, H = v && Mg(v.nodesRef.current, F).some((W) => {
      var X;
      return Bb(E, (X = W.context) == null ? void 0 : X.elements.floating);
    });
    if (Bb(E, i.floating) || Bb(E, i.domReference) || H)
      return;
    const G = v ? Mg(v.nodesRef.current, F) : [];
    if (G.length > 0) {
      let W = !0;
      if (G.forEach((X) => {
        var q;
        if ((q = X.context) != null && q.open && !X.context.dataRef.current.__outsidePressBubbles) {
          W = !1;
          return;
        }
      }), !W)
        return;
    }
    n(!1, E, "outside-press");
  }), N = Xi((E) => {
    var L;
    const I = () => {
      var P;
      D(E), (P = Ju(E)) == null || P.removeEventListener(u, I);
    };
    (L = Ju(E)) == null || L.addEventListener(u, I);
  });
  T.useEffect(() => {
    if (!r || !o)
      return;
    a.current.__escapeKeyBubbles = b, a.current.__outsidePressBubbles = w;
    let E = -1;
    function L(V) {
      n(!1, V, "ancestor-scroll");
    }
    function I() {
      window.clearTimeout(E), C.current = !0;
    }
    function P() {
      E = window.setTimeout(
        () => {
          C.current = !1;
        },
        // 0ms or 1ms don't work in Safari. 5ms appears to consistently work.
        // Only apply to WebKit for the test to remain 0ms.
        _0() ? 5 : 0
      );
    }
    const k = ea(i.floating);
    s && (k.addEventListener("keydown", _ ? M : A, _), k.addEventListener("compositionstart", I), k.addEventListener("compositionend", P)), m && k.addEventListener(u, S ? N : D, S);
    let z = [];
    return d && (Zt(i.domReference) && (z = es(i.domReference)), Zt(i.floating) && (z = z.concat(es(i.floating))), !Zt(i.reference) && i.reference && i.reference.contextElement && (z = z.concat(es(i.reference.contextElement)))), z = z.filter((V) => {
      var B;
      return V !== ((B = k.defaultView) == null ? void 0 : B.visualViewport);
    }), z.forEach((V) => {
      V.addEventListener("scroll", L, {
        passive: !0
      });
    }), () => {
      s && (k.removeEventListener("keydown", _ ? M : A, _), k.removeEventListener("compositionstart", I), k.removeEventListener("compositionend", P)), m && k.removeEventListener(u, S ? N : D, S), z.forEach((V) => {
        V.removeEventListener("scroll", L);
      }), window.clearTimeout(E);
    };
  }, [a, i, s, m, u, r, n, d, o, b, w, A, _, M, D, S, N]), T.useEffect(() => {
    a.current.insideReactTree = !1;
  }, [a, m, u]);
  const R = T.useMemo(() => ({
    onKeyDown: A,
    ...c && {
      [PSe[f]]: (E) => {
        n(!1, E.nativeEvent, "reference-press");
      },
      ...f !== "click" && {
        onClick(E) {
          n(!1, E.nativeEvent, "reference-press");
        }
      }
    }
  }), [A, n, c, f]), O = T.useMemo(() => ({
    onKeyDown: A,
    onMouseDown() {
      y.current = !0;
    },
    onMouseUp() {
      y.current = !0;
    },
    [kSe[u]]: () => {
      a.current.insideReactTree = !0;
    }
  }), [A, u, a]);
  return T.useMemo(() => o ? {
    reference: R,
    floating: O
  } : {}, [o, R, O]);
}
function zSe(e) {
  const {
    open: t = !1,
    onOpenChange: r,
    elements: n
  } = e, i = SA(), a = T.useRef({}), [o] = T.useState(() => TSe()), s = CA() != null;
  if (process.env.NODE_ENV !== "production") {
    const h = n.reference;
    h && !Zt(h) && CSe("Cannot pass a virtual element to the `elements.reference` option,", "as it must be a real DOM element. Use `refs.setPositionReference()`", "instead.");
  }
  const [l, u] = T.useState(n.reference), c = Xi((h, p, v) => {
    a.current.openEvent = h ? p : void 0, o.emit("openchange", {
      open: h,
      event: p,
      reason: v,
      nested: s
    }), r == null || r(h, p, v);
  }), f = T.useMemo(() => ({
    setPositionReference: u
  }), []), d = T.useMemo(() => ({
    reference: l || n.reference || null,
    floating: n.floating || null,
    domReference: n.reference
  }), [l, n.reference, n.floating]);
  return T.useMemo(() => ({
    dataRef: a,
    open: t,
    onOpenChange: c,
    elements: d,
    events: o,
    floatingId: i,
    refs: f
  }), [t, c, d, o, i, f]);
}
function jSe(e) {
  e === void 0 && (e = {});
  const {
    nodeId: t
  } = e, r = zSe({
    ...e,
    elements: {
      reference: null,
      floating: null,
      ...e.elements
    }
  }), n = e.rootContext || r, i = n.elements, [a, o] = T.useState(null), [s, l] = T.useState(null), c = (i == null ? void 0 : i.domReference) || a, f = T.useRef(null), d = TA();
  Mi(() => {
    c && (f.current = c);
  }, [c]);
  const h = xA({
    ...e,
    elements: {
      ...i,
      ...s && {
        reference: s
      }
    }
  }), p = T.useCallback((b) => {
    const w = Zt(b) ? {
      getBoundingClientRect: () => b.getBoundingClientRect(),
      getClientRects: () => b.getClientRects(),
      contextElement: b
    } : b;
    l(w), h.refs.setReference(w);
  }, [h.refs]), v = T.useCallback((b) => {
    (Zt(b) || b === null) && (f.current = b, o(b)), (Zt(h.refs.reference.current) || h.refs.reference.current === null || // Don't allow setting virtual elements using the old technique back to
    // `null` to support `positionReference` + an unstable `reference`
    // callback ref.
    b !== null && !Zt(b)) && h.refs.setReference(b);
  }, [h.refs]), g = T.useMemo(() => ({
    ...h.refs,
    setReference: v,
    setPositionReference: p,
    domReference: f
  }), [h.refs, v, p]), m = T.useMemo(() => ({
    ...h.elements,
    domReference: c
  }), [h.elements, c]), y = T.useMemo(() => ({
    ...h,
    ...n,
    refs: g,
    elements: m,
    nodeId: t
  }), [h, g, m, t, n]);
  return Mi(() => {
    n.dataRef.current.floatingContext = y;
    const b = d == null ? void 0 : d.nodesRef.current.find((w) => w.id === t);
    b && (b.context = y);
  }), T.useMemo(() => ({
    ...h,
    context: y,
    refs: g,
    elements: m
  }), [h, g, m, y]);
}
function Ub() {
  return __e() && jV();
}
function VSe(e, t) {
  t === void 0 && (t = {});
  const {
    open: r,
    onOpenChange: n,
    events: i,
    dataRef: a,
    elements: o
  } = e, {
    enabled: s = !0,
    visibleOnly: l = !0
  } = t, u = T.useRef(!1), c = T.useRef(-1), f = T.useRef(!0);
  T.useEffect(() => {
    if (!s) return;
    const h = xn(o.domReference);
    function p() {
      !r && Ln(o.domReference) && o.domReference === O_(ea(o.domReference)) && (u.current = !0);
    }
    function v() {
      f.current = !0;
    }
    function g() {
      f.current = !1;
    }
    return h.addEventListener("blur", p), Ub() && (h.addEventListener("keydown", v, !0), h.addEventListener("pointerdown", g, !0)), () => {
      h.removeEventListener("blur", p), Ub() && (h.removeEventListener("keydown", v, !0), h.removeEventListener("pointerdown", g, !0));
    };
  }, [o.domReference, r, s]), T.useEffect(() => {
    if (!s) return;
    function h(p) {
      let {
        reason: v
      } = p;
      (v === "reference-press" || v === "escape-key") && (u.current = !0);
    }
    return i.on("openchange", h), () => {
      i.off("openchange", h);
    };
  }, [i, s]), T.useEffect(() => () => {
    Bn(c);
  }, []);
  const d = T.useMemo(() => ({
    onMouseLeave() {
      u.current = !1;
    },
    onFocus(h) {
      if (u.current) return;
      const p = Ju(h.nativeEvent);
      if (l && Zt(p)) {
        if (Ub() && !h.relatedTarget) {
          if (!f.current && !A_e(p))
            return;
        } else if (!M_e(p))
          return;
      }
      n(!0, h.nativeEvent, "focus");
    },
    onBlur(h) {
      u.current = !1;
      const p = h.relatedTarget, v = h.nativeEvent, g = Zt(p) && p.hasAttribute(xp("focus-guard")) && p.getAttribute("data-type") === "outside";
      c.current = window.setTimeout(() => {
        var m;
        const y = O_(o.domReference ? o.domReference.ownerDocument : document);
        !p && y === o.domReference || Hc((m = a.current.floatingContext) == null ? void 0 : m.refs.floating.current, y) || Hc(o.domReference, y) || g || n(!1, v, "focus");
      });
    }
  }), [a, o.domReference, n, l]);
  return T.useMemo(() => s ? {
    reference: d
  } : {}, [s, d]);
}
function Yb(e, t, r) {
  const n = /* @__PURE__ */ new Map(), i = r === "item";
  let a = e;
  if (i && e) {
    const {
      [Q4]: o,
      [eR]: s,
      ...l
    } = e;
    a = l;
  }
  return {
    ...r === "floating" && {
      tabIndex: -1,
      [xSe]: ""
    },
    ...a,
    ...t.map((o) => {
      const s = o ? o[r] : null;
      return typeof s == "function" ? e ? s(e) : null : s;
    }).concat(e).reduce((o, s) => (s && Object.entries(s).forEach((l) => {
      let [u, c] = l;
      if (!(i && [Q4, eR].includes(u)))
        if (u.indexOf("on") === 0) {
          if (n.has(u) || n.set(u, []), typeof c == "function") {
            var f;
            (f = n.get(u)) == null || f.push(c), o[u] = function() {
              for (var d, h = arguments.length, p = new Array(h), v = 0; v < h; v++)
                p[v] = arguments[v];
              return (d = n.get(u)) == null ? void 0 : d.map((g) => g(...p)).find((g) => g !== void 0);
            };
          }
        } else
          o[u] = c;
    }), o), {})
  };
}
function BSe(e) {
  e === void 0 && (e = []);
  const t = e.map((s) => s == null ? void 0 : s.reference), r = e.map((s) => s == null ? void 0 : s.floating), n = e.map((s) => s == null ? void 0 : s.item), i = T.useCallback(
    (s) => Yb(s, e, "reference"),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    t
  ), a = T.useCallback(
    (s) => Yb(s, e, "floating"),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    r
  ), o = T.useCallback(
    (s) => Yb(s, e, "item"),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    n
  );
  return T.useMemo(() => ({
    getReferenceProps: i,
    getFloatingProps: a,
    getItemProps: o
  }), [i, a, o]);
}
const FSe = /* @__PURE__ */ new Map([["select", "listbox"], ["combobox", "listbox"], ["label", !1]]);
function $Se(e, t) {
  var r, n;
  t === void 0 && (t = {});
  const {
    open: i,
    elements: a,
    floatingId: o
  } = e, {
    enabled: s = !0,
    role: l = "dialog"
  } = t, u = SA(), c = ((r = a.domReference) == null ? void 0 : r.id) || u, f = T.useMemo(() => {
    var y;
    return ((y = E_e(a.floating)) == null ? void 0 : y.id) || o;
  }, [a.floating, o]), d = (n = FSe.get(l)) != null ? n : l, p = CA() != null, v = T.useMemo(() => d === "tooltip" || l === "label" ? {
    ["aria-" + (l === "label" ? "labelledby" : "describedby")]: i ? f : void 0
  } : {
    "aria-expanded": i ? "true" : "false",
    "aria-haspopup": d === "alertdialog" ? "dialog" : d,
    "aria-controls": i ? f : void 0,
    ...d === "listbox" && {
      role: "combobox"
    },
    ...d === "menu" && {
      id: c
    },
    ...d === "menu" && p && {
      role: "menuitem"
    },
    ...l === "select" && {
      "aria-autocomplete": "none"
    },
    ...l === "combobox" && {
      "aria-autocomplete": "list"
    }
  }, [d, f, p, i, c, l]), g = T.useMemo(() => {
    const y = {
      id: f,
      ...d && {
        role: d
      }
    };
    return d === "tooltip" || l === "label" ? y : {
      ...y,
      ...d === "menu" && {
        "aria-labelledby": c
      }
    };
  }, [d, f, c, l]), m = T.useCallback((y) => {
    let {
      active: b,
      selected: w
    } = y;
    const _ = {
      role: "option",
      ...b && {
        id: f + "-fui-option"
      }
    };
    switch (l) {
      case "select":
      case "combobox":
        return {
          ..._,
          "aria-selected": w
        };
    }
    return {};
  }, [f, l]);
  return T.useMemo(() => s ? {
    reference: v,
    floating: g,
    item: m
  } : {}, [s, v, g, m]);
}
function HSe({
  initialOpen: e = !1,
  placement: t = "top",
  open: r,
  onOpenChange: n,
  delay: i = 600,
  closeDelay: a = 0
} = {}) {
  const [o, s] = Ze(e), l = r ?? o, u = n ?? s, c = jSe({
    placement: t,
    open: l,
    onOpenChange: u,
    whileElementsMounted: yA,
    middleware: [
      bA(4),
      _A({
        crossAxis: t.includes("-"),
        fallbackAxisSideDirection: "start",
        padding: 4
      }),
      wA({ padding: 4 })
    ]
  }), f = c.context, d = ESe(f, {
    mouseOnly: !0,
    move: !1,
    restMs: i,
    enabled: r == null,
    delay: {
      close: a
    }
  }), h = VSe(f, {
    enabled: r == null
  }), p = OSe(f), v = $Se(f, { role: "tooltip" }), g = BSe([d, h, p, v]);
  return Gt(
    () => ({
      open: l,
      setOpen: u,
      ...g,
      ...c
    }),
    [l, u, g, c]
  );
}
const V_ = Xc(null);
function rB() {
  const e = oo(V_);
  if (e == null)
    throw new Error("Tooltip components must be wrapped in <TooltipProvider />");
  return e;
}
function nB({ children: e, ...t }) {
  const r = HSe(t);
  return t.useDelayGroup ? /* @__PURE__ */ x.jsx(
    NSe,
    {
      delay: { open: t.delay ?? 0, close: t.closeDelay ?? 0 },
      timeoutMs: t.timeout,
      children: /* @__PURE__ */ x.jsx(V_.Provider, { value: r, children: e })
    }
  ) : /* @__PURE__ */ x.jsx(V_.Provider, { value: r, children: e });
}
const iB = Nt(
  function({ children: t, asChild: r = !1, ...n }, i) {
    const a = rB(), o = pM(t) ? parseInt(yG, 10) >= 19 ? (
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      t.props.ref
    ) : (
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      t.ref
    ) : void 0, s = QV([a.refs.setReference, i, o]);
    if (r && pM(t)) {
      const l = {
        "data-tooltip-state": a.open ? "open" : "closed"
      };
      return xG(
        t,
        a.getReferenceProps({
          ref: s,
          ...n,
          ...typeof t.props == "object" ? t.props : {},
          ...l
        })
      );
    }
    return /* @__PURE__ */ x.jsx(
      "button",
      {
        ref: s,
        "data-tooltip-state": a.open ? "open" : "closed",
        ...a.getReferenceProps(n),
        children: t
      }
    );
  }
), aB = Nt(
  function({ style: t, children: r, portal: n = !0, portalProps: i = {}, ...a }, o) {
    const s = rB(), l = QV([s.refs.setFloating, o]);
    if (!s.open) return null;
    const u = /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: l,
        style: {
          ...s.floatingStyles,
          ...t
        },
        ...s.getFloatingProps(a),
        className: "tiptap-tooltip",
        children: r
      }
    );
    return n ? /* @__PURE__ */ x.jsx(LSe, { ...i, children: u }) : u;
  }
);
nB.displayName = "Tooltip";
iB.displayName = "TooltipTrigger";
aB.displayName = "TooltipContent";
let B_, F_;
if (typeof WeakMap < "u") {
  let e = /* @__PURE__ */ new WeakMap();
  B_ = (t) => e.get(t), F_ = (t, r) => (e.set(t, r), r);
} else {
  const e = [];
  let r = 0;
  B_ = (n) => {
    for (let i = 0; i < e.length; i += 2) if (e[i] == n) return e[i + 1];
  }, F_ = (n, i) => (r == 10 && (r = 0), e[r++] = n, e[r++] = i);
}
var Na = class {
  constructor(e, t, r, n) {
    this.width = e, this.height = t, this.map = r, this.problems = n;
  }
  findCell(e) {
    for (let t = 0; t < this.map.length; t++) {
      const r = this.map[t];
      if (r != e) continue;
      const n = t % this.width, i = t / this.width | 0;
      let a = n + 1, o = i + 1;
      for (let s = 1; a < this.width && this.map[t + s] == r; s++) a++;
      for (let s = 1; o < this.height && this.map[t + this.width * s] == r; s++) o++;
      return {
        left: n,
        top: i,
        right: a,
        bottom: o
      };
    }
    throw new RangeError(`No cell with offset ${e} found`);
  }
  colCount(e) {
    for (let t = 0; t < this.map.length; t++) if (this.map[t] == e) return t % this.width;
    throw new RangeError(`No cell with offset ${e} found`);
  }
  nextCell(e, t, r) {
    const { left: n, right: i, top: a, bottom: o } = this.findCell(e);
    return t == "horiz" ? (r < 0 ? n == 0 : i == this.width) ? null : this.map[a * this.width + (r < 0 ? n - 1 : i)] : (r < 0 ? a == 0 : o == this.height) ? null : this.map[n + this.width * (r < 0 ? a - 1 : o)];
  }
  rectBetween(e, t) {
    const { left: r, right: n, top: i, bottom: a } = this.findCell(e), { left: o, right: s, top: l, bottom: u } = this.findCell(t);
    return {
      left: Math.min(r, o),
      top: Math.min(i, l),
      right: Math.max(n, s),
      bottom: Math.max(a, u)
    };
  }
  cellsInRect(e) {
    const t = [], r = {};
    for (let n = e.top; n < e.bottom; n++) for (let i = e.left; i < e.right; i++) {
      const a = n * this.width + i, o = this.map[a];
      r[o] || (r[o] = !0, !(i == e.left && i && this.map[a - 1] == o || n == e.top && n && this.map[a - this.width] == o) && t.push(o));
    }
    return t;
  }
  positionAt(e, t, r) {
    for (let n = 0, i = 0; ; n++) {
      const a = i + r.child(n).nodeSize;
      if (n == e) {
        let o = t + e * this.width;
        const s = (e + 1) * this.width;
        for (; o < s && this.map[o] < i; ) o++;
        return o == s ? a - 1 : this.map[o];
      }
      i = a;
    }
  }
  static get(e) {
    return B_(e) || F_(e, GSe(e));
  }
};
function GSe(e) {
  if (e.type.spec.tableRole != "table") throw new RangeError("Not a table node: " + e.type.name);
  const t = WSe(e), r = e.childCount, n = [];
  let i = 0, a = null;
  const o = [];
  for (let u = 0, c = t * r; u < c; u++) n[u] = 0;
  for (let u = 0, c = 0; u < r; u++) {
    const f = e.child(u);
    c++;
    for (let p = 0; ; p++) {
      for (; i < n.length && n[i] != 0; ) i++;
      if (p == f.childCount) break;
      const v = f.child(p), { colspan: g, rowspan: m, colwidth: y } = v.attrs;
      for (let b = 0; b < m; b++) {
        if (b + u >= r) {
          (a || (a = [])).push({
            type: "overlong_rowspan",
            pos: c,
            n: m - b
          });
          break;
        }
        const w = i + b * t;
        for (let _ = 0; _ < g; _++) {
          n[w + _] == 0 ? n[w + _] = c : (a || (a = [])).push({
            type: "collision",
            row: u,
            pos: c,
            n: g - _
          });
          const S = y && y[_];
          if (S) {
            const C = (w + _) % t * 2, A = o[C];
            A == null || A != S && o[C + 1] == 1 ? (o[C] = S, o[C + 1] = 1) : A == S && o[C + 1]++;
          }
        }
      }
      i += g, c += v.nodeSize;
    }
    const d = (u + 1) * t;
    let h = 0;
    for (; i < d; ) n[i++] == 0 && h++;
    h && (a || (a = [])).push({
      type: "missing",
      row: u,
      n: h
    }), c++;
  }
  (t === 0 || r === 0) && (a || (a = [])).push({ type: "zero_sized" });
  const s = new Na(t, r, n, a);
  let l = !1;
  for (let u = 0; !l && u < o.length; u += 2) o[u] != null && o[u + 1] < r && (l = !0);
  return l && USe(s, o, e), s;
}
function WSe(e) {
  let t = -1, r = !1;
  for (let n = 0; n < e.childCount; n++) {
    const i = e.child(n);
    let a = 0;
    if (r) for (let o = 0; o < n; o++) {
      const s = e.child(o);
      for (let l = 0; l < s.childCount; l++) {
        const u = s.child(l);
        o + u.attrs.rowspan > n && (a += u.attrs.colspan);
      }
    }
    for (let o = 0; o < i.childCount; o++) {
      const s = i.child(o);
      a += s.attrs.colspan, s.attrs.rowspan > 1 && (r = !0);
    }
    t == -1 ? t = a : t != a && (t = Math.max(t, a));
  }
  return t;
}
function USe(e, t, r) {
  e.problems || (e.problems = []);
  const n = {};
  for (let i = 0; i < e.map.length; i++) {
    const a = e.map[i];
    if (n[a]) continue;
    n[a] = !0;
    const o = r.nodeAt(a);
    if (!o) throw new RangeError(`No cell with offset ${a} found`);
    let s = null;
    const l = o.attrs;
    for (let u = 0; u < l.colspan; u++) {
      const c = t[(i + u) % e.width * 2];
      c != null && (!l.colwidth || l.colwidth[u] != c) && ((s || (s = YSe(l)))[u] = c);
    }
    s && e.problems.unshift({
      type: "colwidth mismatch",
      pos: a,
      colwidth: s
    });
  }
}
function YSe(e) {
  if (e.colwidth) return e.colwidth.slice();
  const t = [];
  for (let r = 0; r < e.colspan; r++) t.push(0);
  return t;
}
function AA(e) {
  let t = e.cached.tableNodeTypes;
  if (!t) {
    t = e.cached.tableNodeTypes = {};
    for (const r in e.nodes) {
      const n = e.nodes[r], i = n.spec.tableRole;
      i && (t[i] = n);
    }
  }
  return t;
}
new nS("selectingCells");
function ZSe(e) {
  for (let t = e.depth - 1; t > 0; t--) if (e.node(t).type.spec.tableRole == "row") return e.node(0).resolve(e.before(t + 1));
  return null;
}
function oB(e) {
  const t = e.selection.$head;
  for (let r = t.depth; r > 0; r--) if (t.node(r).type.spec.tableRole == "row") return !0;
  return !1;
}
function XSe(e) {
  const t = e.selection;
  if ("$anchorCell" in t && t.$anchorCell) return t.$anchorCell.pos > t.$headCell.pos ? t.$anchorCell : t.$headCell;
  if ("node" in t && t.node && t.node.type.spec.tableRole == "cell") return t.$anchor;
  const r = ZSe(t.$head) || KSe(t.$head);
  if (r) return r;
  throw new RangeError(`No cell found around position ${t.head}`);
}
function KSe(e) {
  for (let t = e.nodeAfter, r = e.pos; t; t = t.firstChild, r++) {
    const n = t.type.spec.tableRole;
    if (n == "cell" || n == "header_cell") return e.doc.resolve(r);
  }
  for (let t = e.nodeBefore, r = e.pos; t; t = t.lastChild, r--) {
    const n = t.type.spec.tableRole;
    if (n == "cell" || n == "header_cell") return e.doc.resolve(r - t.nodeSize);
  }
}
function lR(e) {
  return e.parent.type.spec.tableRole == "row" && !!e.nodeAfter;
}
function sB(e, t) {
  return e.depth == t.depth && e.pos >= t.start(-1) && e.pos <= t.end(-1);
}
function lB(e, t, r) {
  const n = e.node(-1), i = Na.get(n), a = e.start(-1), o = i.nextCell(e.pos - a, t, r);
  return o == null ? null : e.node(0).resolve(a + o);
}
function uR(e, t, r = 1) {
  const n = {
    ...e,
    colspan: e.colspan - r
  };
  return n.colwidth && (n.colwidth = n.colwidth.slice(), n.colwidth.splice(t, r), n.colwidth.some((i) => i > 0) || (n.colwidth = null)), n;
}
var Ya = class Ta extends Ui {
  constructor(t, r = t) {
    const n = t.node(-1), i = Na.get(n), a = t.start(-1), o = i.rectBetween(t.pos - a, r.pos - a), s = t.node(0), l = i.cellsInRect(o).filter((c) => c != r.pos - a);
    l.unshift(r.pos - a);
    const u = l.map((c) => {
      const f = n.nodeAt(c);
      if (!f) throw new RangeError(`No cell with offset ${c} found`);
      const d = a + c + 1;
      return new MG(s.resolve(d), s.resolve(d + f.content.size));
    });
    super(u[0].$from, u[0].$to, u), this.$anchorCell = t, this.$headCell = r;
  }
  map(t, r) {
    const n = t.resolve(r.map(this.$anchorCell.pos)), i = t.resolve(r.map(this.$headCell.pos));
    if (lR(n) && lR(i) && sB(n, i)) {
      const a = this.$anchorCell.node(-1) != n.node(-1);
      return a && this.isRowSelection() ? Ta.rowSelection(n, i) : a && this.isColSelection() ? Ta.colSelection(n, i) : new Ta(n, i);
    }
    return Qn.between(n, i);
  }
  content() {
    const t = this.$anchorCell.node(-1), r = Na.get(t), n = this.$anchorCell.start(-1), i = r.rectBetween(this.$anchorCell.pos - n, this.$headCell.pos - n), a = {}, o = [];
    for (let l = i.top; l < i.bottom; l++) {
      const u = [];
      for (let c = l * r.width + i.left, f = i.left; f < i.right; f++, c++) {
        const d = r.map[c];
        if (a[d]) continue;
        a[d] = !0;
        const h = r.findCell(d);
        let p = t.nodeAt(d);
        if (!p) throw new RangeError(`No cell with offset ${d} found`);
        const v = i.left - h.left, g = h.right - i.right;
        if (v > 0 || g > 0) {
          let m = p.attrs;
          if (v > 0 && (m = uR(m, 0, v)), g > 0 && (m = uR(m, m.colspan - g, g)), h.left < i.left) {
            if (p = p.type.createAndFill(m), !p) throw new RangeError(`Could not create cell with attrs ${JSON.stringify(m)}`);
          } else p = p.type.create(m, p.content);
        }
        if (h.top < i.top || h.bottom > i.bottom) {
          const m = {
            ...p.attrs,
            rowspan: Math.min(h.bottom, i.bottom) - Math.max(h.top, i.top)
          };
          h.top < i.top ? p = p.type.createAndFill(m) : p = p.type.create(m, p.content);
        }
        u.push(p);
      }
      o.push(t.child(l).copy(G0.from(u)));
    }
    const s = this.isColSelection() && this.isRowSelection() ? t : o;
    return new ld(G0.from(s), 1, 1);
  }
  replace(t, r = ld.empty) {
    const n = t.steps.length, i = this.ranges;
    for (let o = 0; o < i.length; o++) {
      const { $from: s, $to: l } = i[o], u = t.mapping.slice(n);
      t.replace(u.map(s.pos), u.map(l.pos), o ? ld.empty : r);
    }
    const a = Ui.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)), -1);
    a && t.setSelection(a);
  }
  replaceWith(t, r) {
    this.replace(t, new ld(G0.from(r), 0, 0));
  }
  forEachCell(t) {
    const r = this.$anchorCell.node(-1), n = Na.get(r), i = this.$anchorCell.start(-1), a = n.cellsInRect(n.rectBetween(this.$anchorCell.pos - i, this.$headCell.pos - i));
    for (let o = 0; o < a.length; o++) t(r.nodeAt(a[o]), i + a[o]);
  }
  isColSelection() {
    const t = this.$anchorCell.index(-1), r = this.$headCell.index(-1);
    if (Math.min(t, r) > 0) return !1;
    const n = t + this.$anchorCell.nodeAfter.attrs.rowspan, i = r + this.$headCell.nodeAfter.attrs.rowspan;
    return Math.max(n, i) == this.$headCell.node(-1).childCount;
  }
  static colSelection(t, r = t) {
    const n = t.node(-1), i = Na.get(n), a = t.start(-1), o = i.findCell(t.pos - a), s = i.findCell(r.pos - a), l = t.node(0);
    return o.top <= s.top ? (o.top > 0 && (t = l.resolve(a + i.map[o.left])), s.bottom < i.height && (r = l.resolve(a + i.map[i.width * (i.height - 1) + s.right - 1]))) : (s.top > 0 && (r = l.resolve(a + i.map[s.left])), o.bottom < i.height && (t = l.resolve(a + i.map[i.width * (i.height - 1) + o.right - 1]))), new Ta(t, r);
  }
  isRowSelection() {
    const t = this.$anchorCell.node(-1), r = Na.get(t), n = this.$anchorCell.start(-1), i = r.colCount(this.$anchorCell.pos - n), a = r.colCount(this.$headCell.pos - n);
    if (Math.min(i, a) > 0) return !1;
    const o = i + this.$anchorCell.nodeAfter.attrs.colspan, s = a + this.$headCell.nodeAfter.attrs.colspan;
    return Math.max(o, s) == r.width;
  }
  eq(t) {
    return t instanceof Ta && t.$anchorCell.pos == this.$anchorCell.pos && t.$headCell.pos == this.$headCell.pos;
  }
  static rowSelection(t, r = t) {
    const n = t.node(-1), i = Na.get(n), a = t.start(-1), o = i.findCell(t.pos - a), s = i.findCell(r.pos - a), l = t.node(0);
    return o.left <= s.left ? (o.left > 0 && (t = l.resolve(a + i.map[o.top * i.width])), s.right < i.width && (r = l.resolve(a + i.map[i.width * (s.top + 1) - 1]))) : (s.left > 0 && (r = l.resolve(a + i.map[s.top * i.width])), o.right < i.width && (t = l.resolve(a + i.map[i.width * (o.top + 1) - 1]))), new Ta(t, r);
  }
  toJSON() {
    return {
      type: "cell",
      anchor: this.$anchorCell.pos,
      head: this.$headCell.pos
    };
  }
  static fromJSON(t, r) {
    return new Ta(t.resolve(r.anchor), t.resolve(r.head));
  }
  static create(t, r, n = r) {
    return new Ta(t.resolve(r), t.resolve(n));
  }
  getBookmark() {
    return new qSe(this.$anchorCell.pos, this.$headCell.pos);
  }
};
Ya.prototype.visible = !1;
Ui.jsonID("cell", Ya);
var qSe = class uB {
  constructor(t, r) {
    this.anchor = t, this.head = r;
  }
  map(t) {
    return new uB(t.map(this.anchor), t.map(this.head));
  }
  resolve(t) {
    const r = t.resolve(this.anchor), n = t.resolve(this.head);
    return r.parent.type.spec.tableRole == "row" && n.parent.type.spec.tableRole == "row" && r.index() < r.parent.childCount && n.index() < n.parent.childCount && sB(r, n) ? new Ya(r, n) : Ui.near(n, 1);
  }
};
new nS("fix-tables");
function cB(e) {
  const t = e.selection, r = XSe(e), n = r.node(-1), i = r.start(-1), a = Na.get(n);
  return {
    ...t instanceof Ya ? a.rectBetween(t.$anchorCell.pos - i, t.$headCell.pos - i) : a.findCell(r.pos - i),
    tableStart: i,
    map: a,
    table: n
  };
}
function JSe(e) {
  return function(t, r) {
    if (!oB(t)) return !1;
    if (r) {
      const n = AA(t.schema), i = cB(t), a = t.tr, o = i.map.cellsInRect(e == "column" ? {
        left: i.left,
        top: 0,
        right: i.right,
        bottom: i.map.height
      } : e == "row" ? {
        left: 0,
        top: i.top,
        right: i.map.width,
        bottom: i.bottom
      } : i), s = o.map((l) => i.table.nodeAt(l));
      for (let l = 0; l < o.length; l++) s[l].type == n.header_cell && a.setNodeMarkup(i.tableStart + o[l], n.cell, s[l].attrs);
      if (a.steps.length === 0) for (let l = 0; l < o.length; l++) a.setNodeMarkup(i.tableStart + o[l], n.header_cell, s[l].attrs);
      r(a);
    }
    return !0;
  };
}
function cR(e, t, r) {
  const n = t.map.cellsInRect({
    left: 0,
    top: 0,
    right: e == "row" ? t.map.width : 1,
    bottom: e == "column" ? t.map.height : 1
  });
  for (let i = 0; i < n.length; i++) {
    const a = t.table.nodeAt(n[i]);
    if (a && a.type !== r.header_cell) return !1;
  }
  return !0;
}
function MA(e, t) {
  return t = t || { useDeprecatedLogic: !1 }, t.useDeprecatedLogic ? JSe(e) : function(r, n) {
    if (!oB(r)) return !1;
    if (n) {
      const i = AA(r.schema), a = cB(r), o = r.tr, s = cR("row", a, i), l = cR("column", a, i), u = (e === "column" ? s : e === "row" && l) ? 1 : 0, c = e == "column" ? {
        left: 0,
        top: u,
        right: 1,
        bottom: a.map.height
      } : e == "row" ? {
        left: u,
        top: 0,
        right: a.map.width,
        bottom: 1
      } : a, f = e == "column" ? l ? i.cell : i.header_cell : e == "row" ? s ? i.cell : i.header_cell : i.cell;
      a.map.cellsInRect(c).forEach((d) => {
        const h = d + a.tableStart, p = o.doc.nodeAt(h);
        p && o.setNodeMarkup(h, f, p.attrs);
      }), n(o);
    }
    return !0;
  };
}
MA("row", { useDeprecatedLogic: !0 });
MA("column", { useDeprecatedLogic: !0 });
MA("cell", { useDeprecatedLogic: !0 });
function Wv(e, t) {
  const r = e.selection;
  if (!(r instanceof Ya)) return !1;
  if (t) {
    const n = e.tr, i = AA(e.schema).cell.createAndFill().content;
    r.forEachCell((a, o) => {
      a.content.eq(i) || n.replace(n.mapping.map(o + 1), n.mapping.map(o + a.nodeSize - 1), new ld(i, 0, 0));
    }), n.docChanged && t(n);
  }
  return !0;
}
AG({
  ArrowLeft: Uv("horiz", -1),
  ArrowRight: Uv("horiz", 1),
  ArrowUp: Uv("vert", -1),
  ArrowDown: Uv("vert", 1),
  "Shift-ArrowLeft": Yv("horiz", -1),
  "Shift-ArrowRight": Yv("horiz", 1),
  "Shift-ArrowUp": Yv("vert", -1),
  "Shift-ArrowDown": Yv("vert", 1),
  Backspace: Wv,
  "Mod-Backspace": Wv,
  Delete: Wv,
  "Mod-Delete": Wv
});
function Dg(e, t, r) {
  return r.eq(e.selection) ? !1 : (t && t(e.tr.setSelection(r).scrollIntoView()), !0);
}
function Uv(e, t) {
  return (r, n, i) => {
    if (!i) return !1;
    const a = r.selection;
    if (a instanceof Ya) return Dg(r, n, Ui.near(a.$headCell, t));
    if (e != "horiz" && !a.empty) return !1;
    const o = fB(i, e, t);
    if (o == null) return !1;
    if (e == "horiz") return Dg(r, n, Ui.near(r.doc.resolve(a.head + t), t));
    {
      const s = r.doc.resolve(o), l = lB(s, e, t);
      let u;
      return l ? u = Ui.near(l, 1) : t < 0 ? u = Ui.near(r.doc.resolve(s.before(-1)), -1) : u = Ui.near(r.doc.resolve(s.after(-1)), 1), Dg(r, n, u);
    }
  };
}
function Yv(e, t) {
  return (r, n, i) => {
    if (!i) return !1;
    const a = r.selection;
    let o;
    if (a instanceof Ya) o = a;
    else {
      const l = fB(i, e, t);
      if (l == null) return !1;
      o = new Ya(r.doc.resolve(l));
    }
    const s = lB(o.$headCell, e, t);
    return s ? Dg(r, n, new Ya(o.$anchorCell, s)) : !1;
  };
}
function fB(e, t, r) {
  if (!(e.state.selection instanceof Qn)) return null;
  const { $head: n } = e.state.selection;
  for (let i = n.depth - 1; i >= 0; i--) {
    const a = n.node(i);
    if ((r < 0 ? n.index(i) : n.indexAfter(i)) != (r < 0 ? 0 : a.childCount)) return null;
    if (a.type.spec.tableRole == "cell" || a.type.spec.tableRole == "header_cell") {
      const o = n.before(i), s = t == "vert" ? r > 0 ? "down" : "up" : r > 0 ? "right" : "left";
      return e.endOfTextblock(s) ? o : null;
    }
  }
  return null;
}
new nS("tableColumnResizing");
const $_ = 5 * 1024 * 1024, QSe = {
  mod: "⌘",
  command: "⌘",
  meta: "⌘",
  ctrl: "⌃",
  control: "⌃",
  alt: "⌥",
  option: "⌥",
  shift: "⇧",
  backspace: "Del",
  delete: "⌦",
  enter: "⏎",
  escape: "⎋",
  capslock: "⇪"
};
function Fr(...e) {
  return e.filter(Boolean).join(" ");
}
function eCe() {
  return typeof navigator < "u" && navigator.platform.toLowerCase().includes("mac");
}
const tCe = (e, t, r = !0) => {
  if (t) {
    const n = e.toLowerCase();
    return QSe[n] || (r ? e.toUpperCase() : e);
  }
  return r ? e.charAt(0).toUpperCase() + e.slice(1) : e;
}, ma = (e) => {
  const { shortcutKeys: t, delimiter: r = "+", capitalize: n = !0 } = e;
  return t ? t.split(r).map((i) => i.trim()).map((i) => tCe(i, eCe(), n)) : [];
}, bp = (e, t) => t != null && t.schema ? t.schema.spec.marks.get(e) !== void 0 : !1, lo = (e, t) => t != null && t.schema ? t.schema.spec.nodes.get(e) !== void 0 : !1;
function rCe(e) {
  const { state: t, view: r } = e, { doc: n, selection: i } = t, a = Ui.findFrom(i.$to, 1, !0);
  if (a)
    return r.dispatch(t.tr.setSelection(a).scrollIntoView()), !0;
  const o = t.schema.nodes.paragraph;
  if (!o)
    return console.warn("No paragraph node type found in schema."), !1;
  const s = n.content.size, l = o.create();
  let u = t.tr.insert(s, l);
  const c = u.doc.resolve(s + 1);
  return u = u.setSelection(Qn.near(c)).scrollIntoView(), r.dispatch(u), !0;
}
function Cf(e) {
  return typeof e == "number" && e >= 0;
}
function Tf(e, t) {
  if (!e) return !1;
  const r = Array.isArray(t) ? t : [t], n = r.some(
    (i) => e.extensionManager.extensions.some((a) => a.name === i)
  );
  return n || console.warn(
    `None of the extensions [${r.join(", ")}] were found in the editor schema. Ensure they are included in the editor configuration.`
  ), n;
}
function nCe(e, t) {
  try {
    const r = e.state.doc.nodeAt(t);
    return r || (console.warn(`No node found at position ${t}`), null);
  } catch (r) {
    return console.error(`Error getting node at position ${t}:`, r), null;
  }
}
function T0(e) {
  var o;
  const { editor: t, node: r, nodePos: n } = e;
  if (!t || !((o = t.state) != null && o.doc)) return null;
  const i = r != null, a = Cf(n);
  if (!i && !a)
    return null;
  if (i) {
    let s = -1, l = null;
    if (t.state.doc.descendants((u, c) => u === r ? (s = c, l = u, !1) : !0), s !== -1 && l !== null)
      return { pos: s, node: l };
  }
  if (a) {
    const s = nCe(t, n);
    if (s)
      return { pos: n, node: s };
  }
  return null;
}
function uo(e, t = [], r = !1) {
  if (!e || !e.state.selection) return !1;
  const { selection: n } = e.state;
  if (n.empty) return !1;
  if (n instanceof sa) {
    const i = n.node;
    return i ? t.includes(i.type.name) : !1;
  }
  if (r) {
    const { $from: i } = n;
    for (let a = i.depth; a > 0; a--) {
      const o = i.node(a);
      if (t.includes(o.type.name))
        return !0;
    }
  }
  return !1;
}
function A0(e, t = []) {
  var a, o;
  if (!e || t.length === 0) return !1;
  const { state: r } = e, { selection: n } = r, i = new Set(t);
  if (n instanceof sa) {
    const s = (o = (a = n.node) == null ? void 0 : a.type) == null ? void 0 : o.name;
    return !!s && i.has(s);
  }
  if (n instanceof Qn || n instanceof EG) {
    let s = !0;
    return r.doc.nodesBetween(n.from, n.to, (l) => l.isTextblock && !i.has(l.type.name) ? (s = !1, !1) : s), s;
  }
  return !1;
}
const iCe = async (e, t, r) => {
  if (!e)
    throw new Error("No file provided");
  if (e.size > $_)
    throw new Error(
      `File size exceeds maximum allowed (${$_ / (1024 * 1024)}MB)`
    );
  for (let n = 0; n <= 100; n += 10) {
    if (r != null && r.aborted)
      throw new Error("Upload cancelled");
    await new Promise((i) => setTimeout(i, 500)), t == null || t({ progress: n });
  }
  return "/images/tiptap-ui-placeholder-image.jpg";
}, aCe = (
  // eslint-disable-next-line no-control-regex
  /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g
);
function oCe(e, t) {
  const r = [
    "http",
    "https",
    "ftp",
    "ftps",
    "mailto",
    "tel",
    "callto",
    "sms",
    "cid",
    "xmpp"
  ];
  return !e || e.replace(aCe, "").match(
    new RegExp(
      // eslint-disable-next-line no-useless-escape
      `^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,
      "i"
    )
  );
}
function sCe(e, t, r) {
  try {
    const n = new URL(e, t);
    if (oCe(n.href, r))
      return n.href;
  } catch {
  }
  return "#";
}
const lCe = ({
  shortcuts: e
}) => e.length === 0 ? null : /* @__PURE__ */ x.jsx("div", { children: e.map((t, r) => /* @__PURE__ */ x.jsxs(bG, { children: [
  r > 0 && /* @__PURE__ */ x.jsx("kbd", { children: "+" }),
  /* @__PURE__ */ x.jsx("kbd", { children: t })
] }, r)) }), cr = Nt(
  ({
    className: e,
    children: t,
    tooltip: r,
    showTooltip: n = !0,
    shortcutKeys: i,
    "aria-label": a,
    ...o
  }, s) => {
    const l = Gt(
      () => ma({ shortcutKeys: i }),
      [i]
    );
    return !r || !n ? /* @__PURE__ */ x.jsx(
      "button",
      {
        className: Fr("tiptap-button", e),
        ref: s,
        "aria-label": a,
        ...o,
        children: t
      }
    ) : /* @__PURE__ */ x.jsxs(nB, { delay: 200, children: [
      /* @__PURE__ */ x.jsx(
        iB,
        {
          className: Fr("tiptap-button", e),
          ref: s,
          "aria-label": a,
          ...o,
          children: t
        }
      ),
      /* @__PURE__ */ x.jsxs(aB, { children: [
        r,
        /* @__PURE__ */ x.jsx(lCe, { shortcuts: l })
      ] })
    ] });
  }
);
cr.displayName = "Button";
const Gl = Nt(({ className: e, children: t, orientation: r = "vertical", ...n }, i) => /* @__PURE__ */ x.jsx(
  "div",
  {
    ref: i,
    className: Fr("tiptap-button-group", e),
    "data-orientation": r,
    role: "group",
    ...n,
    children: t
  }
));
Gl.displayName = "ButtonGroup";
function fR({
  orientation: e = "horizontal",
  size: t,
  style: r = {},
  ...n
}) {
  const i = {
    ...r,
    ...e === "horizontal" && !t && { flex: 1 },
    ...t && {
      width: e === "vertical" ? "1px" : t,
      height: e === "horizontal" ? "1px" : t
    }
  };
  return /* @__PURE__ */ x.jsx("div", { ...n, style: i });
}
const M0 = Nt(
  ({ decorative: e, orientation: t = "vertical", className: r, ...n }, i) => {
    const o = e ? { role: "none" } : { "aria-orientation": t === "vertical" ? t : void 0, role: "separator" };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        className: Fr("tiptap-separator", r),
        "data-orientation": t,
        ...o,
        ...n,
        ref: i
      }
    );
  }
);
M0.displayName = "Separator";
function dB({
  editor: e,
  containerRef: t,
  query: r,
  items: n,
  onSelect: i,
  onClose: a,
  orientation: o = "vertical",
  autoSelectFirstItem: s = !0
}) {
  const [l, u] = Ze(
    s ? 0 : -1
  );
  return Oe(() => {
    const c = (d) => {
      if (!n.length) return !1;
      const h = () => u((v) => v === -1 ? 0 : (v + 1) % n.length), p = () => u((v) => v === -1 ? n.length - 1 : (v - 1 + n.length) % n.length);
      switch (d.key) {
        case "ArrowUp":
          return o === "horizontal" ? !1 : (d.preventDefault(), p(), !0);
        case "ArrowDown":
          return o === "horizontal" ? !1 : (d.preventDefault(), h(), !0);
        case "ArrowLeft":
          return o === "vertical" ? !1 : (d.preventDefault(), p(), !0);
        case "ArrowRight":
          return o === "vertical" ? !1 : (d.preventDefault(), h(), !0);
        case "Tab":
          return d.preventDefault(), d.shiftKey ? p() : h(), !0;
        case "Home":
          return d.preventDefault(), u(0), !0;
        case "End":
          return d.preventDefault(), u(n.length - 1), !0;
        case "Enter":
          return d.isComposing ? !1 : (d.preventDefault(), l !== -1 && n[l] && (i == null || i(n[l])), !0);
        case "Escape":
          return d.preventDefault(), a == null || a(), !0;
        default:
          return !1;
      }
    };
    let f = null;
    if (e ? f = e.view.dom : t != null && t.current && (f = t.current), f)
      return f.addEventListener("keydown", c, !0), () => {
        f == null || f.removeEventListener(
          "keydown",
          c,
          !0
        );
      };
  }, [
    e,
    t,
    n,
    l,
    i,
    a,
    o
  ]), Oe(() => {
    r && u(s ? 0 : -1);
  }, [r, s]), {
    selectedIndex: n.length ? l : void 0,
    setSelectedIndex: u
  };
}
const dR = (e, t) => {
  typeof e == "function" ? e(t) : e && typeof e == "object" && "current" in e && (e.current = t);
}, uCe = (e, t) => {
  const r = Ve(null);
  return Te(
    (n) => {
      e && "current" in e && (e.current = n), r.current && dR(r.current, null), r.current = t, t && dR(t, n);
    },
    [e, t]
  );
}, cCe = (e) => {
  const [t, r] = Ze([]), n = Te(() => e.current ? Array.from(
    e.current.querySelectorAll(
      'button:not([disabled]), [role="button"]:not([disabled]), [tabindex="0"]:not([disabled])'
    )
  ) : [], [e]);
  Oe(() => {
    const a = e.current;
    if (!a) return;
    const o = () => r(n());
    o();
    const s = new MutationObserver(o);
    return s.observe(a, { childList: !0, subtree: !0 }), () => s.disconnect();
  }, [n, e]);
  const { selectedIndex: i } = dB({
    containerRef: e,
    items: t,
    orientation: "horizontal",
    onSelect: (a) => a.click(),
    autoSelectFirstItem: !1
  });
  Oe(() => {
    const a = e.current;
    if (!a) return;
    const o = (l) => {
      const u = l.target;
      a.contains(u) && u.setAttribute("data-focus-visible", "true");
    }, s = (l) => {
      const u = l.target;
      a.contains(u) && u.removeAttribute("data-focus-visible");
    };
    return a.addEventListener("focus", o, !0), a.addEventListener("blur", s, !0), () => {
      a.removeEventListener("focus", o, !0), a.removeEventListener("blur", s, !0);
    };
  }, [e]), Oe(() => {
    i !== void 0 && t[i] && t[i].focus();
  }, [i, t]);
}, hB = Nt(
  ({ children: e, className: t, variant: r = "fixed", ...n }, i) => {
    const a = Ve(null), o = uCe(a, i);
    return cCe(a), /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: o,
        role: "toolbar",
        "aria-label": "toolbar",
        "data-variant": r,
        className: Fr("tiptap-toolbar", t),
        ...n,
        children: e
      }
    );
  }
);
hB.displayName = "Toolbar";
const Ea = Nt(
  ({ children: e, className: t, ...r }, n) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: n,
      role: "group",
      className: Fr("tiptap-toolbar-group", t),
      ...r,
      children: e
    }
  )
);
Ea.displayName = "ToolbarGroup";
const Ro = Nt(
  ({ ...e }, t) => /* @__PURE__ */ x.jsx(M0, { ref: t, orientation: "vertical", decorative: !0, ...e })
);
Ro.displayName = "ToolbarSeparator";
const pB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z",
        fill: "currentColor"
      }
    )
  }
));
pB.displayName = "CloseIcon";
function fCe(e) {
  const [t, r] = Ze([]), n = async (s) => {
    var f, d, h;
    if (s.size > e.maxSize) {
      const p = new Error(
        `File size exceeds maximum allowed (${e.maxSize / 1024 / 1024}MB)`
      );
      return (f = e.onError) == null || f.call(e, p), null;
    }
    const l = new AbortController(), u = crypto.randomUUID(), c = {
      id: u,
      file: s,
      progress: 0,
      status: "uploading",
      abortController: l
    };
    r((p) => [...p, c]);
    try {
      if (!e.upload)
        throw new Error("Upload function is not defined");
      const p = await e.upload(
        s,
        (v) => {
          r(
            (g) => g.map(
              (m) => m.id === u ? { ...m, progress: v.progress } : m
            )
          );
        },
        l.signal
      );
      if (!p) throw new Error("Upload failed: No URL returned");
      return l.signal.aborted ? null : (r(
        (v) => v.map(
          (g) => g.id === u ? { ...g, status: "success", url: p, progress: 100 } : g
        )
      ), (d = e.onSuccess) == null || d.call(e, p), p);
    } catch (p) {
      return l.signal.aborted || (r(
        (v) => v.map(
          (g) => g.id === u ? { ...g, status: "error", progress: 0 } : g
        )
      ), (h = e.onError) == null || h.call(
        e,
        p instanceof Error ? p : new Error("Upload failed")
      )), null;
    }
  };
  return {
    fileItems: t,
    uploadFiles: async (s) => {
      var c, f;
      if (!s || s.length === 0)
        return (c = e.onError) == null || c.call(e, new Error("No files to upload")), [];
      if (e.limit && s.length > e.limit)
        return (f = e.onError) == null || f.call(
          e,
          new Error(
            `Maximum ${e.limit} file${e.limit === 1 ? "" : "s"} allowed`
          )
        ), [];
      const l = s.map((d) => n(d));
      return (await Promise.all(l)).filter((d) => d !== null);
    },
    removeFileItem: (s) => {
      r((l) => {
        const u = l.find((c) => c.id === s);
        return u != null && u.abortController && u.abortController.abort(), u != null && u.url && URL.revokeObjectURL(u.url), l.filter((c) => c.id !== s);
      });
    },
    clearAllFiles: () => {
      t.forEach((s) => {
        s.abortController && s.abortController.abort(), s.url && URL.revokeObjectURL(s.url);
      }), r([]);
    }
  };
}
const vB = () => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    viewBox: "0 0 24 24",
    className: "tiptap-image-upload-icon",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M11.1953 4.41771C10.3478 4.08499 9.43578 3.94949 8.5282 4.02147C7.62062 4.09345 6.74133 4.37102 5.95691 4.83316C5.1725 5.2953 4.50354 5.92989 4.00071 6.68886C3.49788 7.44783 3.17436 8.31128 3.05465 9.2138C2.93495 10.1163 3.0222 11.0343 3.3098 11.8981C3.5974 12.7619 4.07781 13.5489 4.71463 14.1995C5.10094 14.5942 5.09414 15.2274 4.69945 15.6137C4.30476 16 3.67163 15.9932 3.28532 15.5985C2.43622 14.731 1.79568 13.6816 1.41221 12.5299C1.02875 11.3781 0.91241 10.1542 1.07201 8.95084C1.23162 7.74748 1.66298 6.59621 2.33343 5.58425C3.00387 4.57229 3.89581 3.72617 4.9417 3.10998C5.98758 2.4938 7.15998 2.1237 8.37008 2.02773C9.58018 1.93176 10.7963 2.11243 11.9262 2.55605C13.0561 2.99968 14.0703 3.69462 14.8919 4.58825C15.5423 5.29573 16.0585 6.11304 16.4177 7.00002H17.4999C18.6799 6.99991 19.8288 7.37933 20.7766 8.08222C21.7245 8.78515 22.4212 9.7743 22.7637 10.9036C23.1062 12.0328 23.0765 13.2423 22.6788 14.3534C22.2812 15.4644 21.5367 16.4181 20.5554 17.0736C20.0962 17.3803 19.4752 17.2567 19.1684 16.7975C18.8617 16.3382 18.9853 15.7172 19.4445 15.4105C20.069 14.9934 20.5427 14.3865 20.7958 13.6794C21.0488 12.9724 21.0678 12.2027 20.8498 11.4841C20.6318 10.7655 20.1885 10.136 19.5853 9.6887C18.9821 9.24138 18.251 8.99993 17.5001 9.00002H15.71C15.2679 9.00002 14.8783 8.70973 14.7518 8.28611C14.4913 7.41374 14.0357 6.61208 13.4195 5.94186C12.8034 5.27164 12.0427 4.75043 11.1953 4.41771Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M11 14.4142V21C11 21.5523 11.4477 22 12 22C12.5523 22 13 21.5523 13 21V14.4142L15.2929 16.7071C15.6834 17.0976 16.3166 17.0976 16.7071 16.7071C17.0976 16.3166 17.0976 15.6834 16.7071 15.2929L12.7078 11.2936C12.7054 11.2912 12.703 11.2888 12.7005 11.2864C12.5208 11.1099 12.2746 11.0008 12.003 11L12 11L11.997 11C11.8625 11.0004 11.7343 11.0273 11.6172 11.0759C11.502 11.1236 11.3938 11.1937 11.2995 11.2864C11.297 11.2888 11.2946 11.2912 11.2922 11.2936L7.29289 15.2929C6.90237 15.6834 6.90237 16.3166 7.29289 16.7071C7.68342 17.0976 8.31658 17.0976 8.70711 16.7071L11 14.4142Z",
          fill: "currentColor"
        }
      )
    ]
  }
), dCe = () => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "43",
    height: "57",
    viewBox: "0 0 43 57",
    fill: "currentColor",
    className: "tiptap-image-upload-dropzone-rect-primary",
    xmlns: "http://www.w3.org/2000/svg",
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M0.75 10.75C0.75 5.64137 4.89137 1.5 10 1.5H32.3431C33.2051 1.5 34.0317 1.84241 34.6412 2.4519L40.2981 8.10876C40.9076 8.71825 41.25 9.5449 41.25 10.4069V46.75C41.25 51.8586 37.1086 56 32 56H10C4.89137 56 0.75 51.8586 0.75 46.75V10.75Z",
        fill: "currentColor",
        fillOpacity: "0.11",
        stroke: "currentColor",
        strokeWidth: "1.5"
      }
    )
  }
), hCe = () => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "10",
    height: "10",
    className: "tiptap-image-upload-dropzone-rect-secondary",
    viewBox: "0 0 10 10",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M0 0.75H0.343146C1.40401 0.75 2.42143 1.17143 3.17157 1.92157L8.82843 7.57843C9.57857 8.32857 10 9.34599 10 10.4069V10.75H4C1.79086 10.75 0 8.95914 0 6.75V0.75Z",
        fill: "currentColor"
      }
    )
  }
), pCe = ({
  onFile: e,
  children: t
}) => {
  const [r, n] = Ze(!1), [i, a] = Ze(!1), o = (c) => {
    c.preventDefault(), c.stopPropagation(), a(!0);
  }, s = (c) => {
    c.preventDefault(), c.stopPropagation(), c.currentTarget.contains(c.relatedTarget) || (a(!1), n(!1));
  }, l = (c) => {
    c.preventDefault(), c.stopPropagation(), n(!0);
  }, u = (c) => {
    c.preventDefault(), c.stopPropagation(), a(!1), n(!1);
    const f = Array.from(c.dataTransfer.files);
    f.length > 0 && e(f);
  };
  return /* @__PURE__ */ x.jsx(
    "div",
    {
      className: `tiptap-image-upload-drag-area ${i ? "drag-active" : ""} ${r ? "drag-over" : ""}`,
      onDragEnter: o,
      onDragLeave: s,
      onDragOver: l,
      onDrop: u,
      children: t
    }
  );
}, vCe = ({
  fileItem: e,
  onRemove: t
}) => {
  const r = (n) => {
    if (n === 0) return "0 Bytes";
    const i = 1024, a = ["Bytes", "KB", "MB", "GB"], o = Math.floor(Math.log(n) / Math.log(i));
    return `${parseFloat((n / Math.pow(i, o)).toFixed(2))} ${a[o]}`;
  };
  return /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-preview", children: [
    e.status === "uploading" && /* @__PURE__ */ x.jsx(
      "div",
      {
        className: "tiptap-image-upload-progress",
        style: { width: `${e.progress}%` }
      }
    ),
    /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-preview-content", children: [
      /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-file-info", children: [
        /* @__PURE__ */ x.jsx("div", { className: "tiptap-image-upload-file-icon", children: /* @__PURE__ */ x.jsx(vB, {}) }),
        /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-details", children: [
          /* @__PURE__ */ x.jsx("span", { className: "tiptap-image-upload-text", children: e.file.name }),
          /* @__PURE__ */ x.jsx("span", { className: "tiptap-image-upload-subtext", children: r(e.file.size) })
        ] })
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-actions", children: [
        e.status === "uploading" && /* @__PURE__ */ x.jsxs("span", { className: "tiptap-image-upload-progress-text", children: [
          e.progress,
          "%"
        ] }),
        /* @__PURE__ */ x.jsx(
          cr,
          {
            type: "button",
            "data-style": "ghost",
            onClick: (n) => {
              n.stopPropagation(), t();
            },
            children: /* @__PURE__ */ x.jsx(pB, { className: "tiptap-button-icon" })
          }
        )
      ] })
    ] })
  ] });
}, gCe = ({
  maxSize: e,
  limit: t
}) => /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
  /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-dropzone", children: [
    /* @__PURE__ */ x.jsx(dCe, {}),
    /* @__PURE__ */ x.jsx(hCe, {}),
    /* @__PURE__ */ x.jsx("div", { className: "tiptap-image-upload-icon-container", children: /* @__PURE__ */ x.jsx(vB, {}) })
  ] }),
  /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-content", children: [
    /* @__PURE__ */ x.jsxs("span", { className: "tiptap-image-upload-text", children: [
      /* @__PURE__ */ x.jsx("em", { children: "Click to upload" }),
      " or drag and drop"
    ] }),
    /* @__PURE__ */ x.jsxs("span", { className: "tiptap-image-upload-subtext", children: [
      "Maximum ",
      t,
      " file",
      t === 1 ? "" : "s",
      ", ",
      e / 1024 / 1024,
      "MB each."
    ] })
  ] })
] }), mCe = (e) => {
  const { accept: t, limit: r, maxSize: n } = e.node.attrs, i = Ve(null), a = e.extension, o = {
    maxSize: n,
    limit: r,
    accept: t,
    upload: a.options.upload,
    onSuccess: a.options.onSuccess,
    onError: a.options.onError
  }, { fileItems: s, uploadFiles: l, removeFileItem: u, clearAllFiles: c } = fCe(o), f = async (v) => {
    const g = await l(v);
    if (g.length > 0) {
      const m = e.getPos();
      if (Cf(m)) {
        const y = g.map((b, w) => {
          var S;
          const _ = ((S = v[w]) == null ? void 0 : S.name.replace(/\.[^/.]+$/, "")) || "unknown";
          return {
            type: a.options.type,
            attrs: {
              ...a.options,
              src: b,
              alt: _,
              title: _
            }
          };
        });
        e.editor.chain().focus().deleteRange({ from: m, to: m + e.node.nodeSize }).insertContentAt(m, y).run(), rCe(e.editor);
      }
    }
  }, d = (v) => {
    var m, y;
    const g = v.target.files;
    if (!g || g.length === 0) {
      (y = (m = a.options).onError) == null || y.call(m, new Error("No file selected"));
      return;
    }
    f(Array.from(g));
  }, h = () => {
    i.current && s.length === 0 && (i.current.value = "", i.current.click());
  }, p = s.length > 0;
  return /* @__PURE__ */ x.jsxs(
    DG,
    {
      className: "tiptap-image-upload",
      tabIndex: 0,
      onClick: h,
      children: [
        !p && /* @__PURE__ */ x.jsx(pCe, { onFile: f, children: /* @__PURE__ */ x.jsx(gCe, { maxSize: n, limit: r }) }),
        p && /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-previews", children: [
          s.length > 1 && /* @__PURE__ */ x.jsxs("div", { className: "tiptap-image-upload-header", children: [
            /* @__PURE__ */ x.jsxs("span", { children: [
              "Uploading ",
              s.length,
              " files"
            ] }),
            /* @__PURE__ */ x.jsx(
              cr,
              {
                type: "button",
                "data-style": "ghost",
                onClick: (v) => {
                  v.stopPropagation(), c();
                },
                children: "Clear All"
              }
            )
          ] }),
          s.map((v) => /* @__PURE__ */ x.jsx(
            vCe,
            {
              fileItem: v,
              onRemove: () => u(v.id)
            },
            v.id
          ))
        ] }),
        /* @__PURE__ */ x.jsx(
          "input",
          {
            ref: i,
            name: "file",
            accept: t,
            type: "file",
            multiple: r > 1,
            onChange: d,
            onClick: (v) => v.stopPropagation()
          }
        )
      ]
    }
  );
}, yCe = fP.create({
  name: "imageUpload",
  group: "block",
  draggable: !0,
  selectable: !0,
  atom: !0,
  addOptions() {
    return {
      type: "image",
      accept: "image/*",
      limit: 1,
      maxSize: 0,
      upload: void 0,
      onError: void 0,
      onSuccess: void 0,
      HTMLAttributes: {}
    };
  },
  addAttributes() {
    return {
      accept: {
        default: this.options.accept
      },
      limit: {
        default: this.options.limit
      },
      maxSize: {
        default: this.options.maxSize
      }
    };
  },
  parseHTML() {
    return [{ tag: 'div[data-type="image-upload"]' }];
  },
  renderHTML({ HTMLAttributes: e }) {
    return [
      "div",
      Kc({ "data-type": "image-upload" }, e)
    ];
  },
  addNodeView() {
    return NG(mCe);
  },
  addCommands() {
    return {
      setImageUploadNode: (e) => ({ commands: t }) => t.insertContent({
        type: this.name,
        attrs: e
      })
    };
  },
  /**
   * Adds Enter key handler to trigger the upload component when it's selected.
   */
  addKeyboardShortcuts() {
    return {
      Enter: ({ editor: e }) => {
        const { selection: t } = e.state, { nodeAfter: r } = t.$from;
        if (r && r.type.name === "imageUpload" && e.isActive("imageUpload")) {
          const n = e.view.nodeDOM(t.$from.pos);
          if (n && n instanceof HTMLElement) {
            const i = n.firstChild;
            if (i && i instanceof HTMLElement)
              return i.click(), !0;
          }
        }
        return !1;
      }
    };
  }
}), xCe = IG.extend({
  renderHTML() {
    return [
      "div",
      Kc(this.options.HTMLAttributes, { "data-type": this.name }),
      ["hr"]
    ];
  }
}), EA = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M5.29289 8.29289C5.68342 7.90237 6.31658 7.90237 6.70711 8.29289L12 13.5858L17.2929 8.29289C17.6834 7.90237 18.3166 7.90237 18.7071 8.29289C19.0976 8.68342 19.0976 9.31658 18.7071 9.70711L12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L5.29289 9.70711C4.90237 9.31658 4.90237 8.68342 5.29289 8.29289Z",
        fill: "currentColor"
      }
    )
  }
));
EA.displayName = "ChevronDownIcon";
function Qt(e) {
  const { editor: t } = LG(), r = Gt(
    () => e || t,
    [e, t]
  );
  return RG({
    editor: r,
    selector(i) {
      return i.editor ? {
        editor: i.editor,
        editorState: i.editor.state,
        canCommand: i.editor.can
      } : {
        editor: null,
        editorState: void 0,
        canCommand: void 0
      };
    }
  }) || { editor: null };
}
const ya = Nt(
  ({
    variant: e,
    size: t = "default",
    appearance: r = "default",
    trimText: n = !1,
    className: i,
    children: a,
    ...o
  }, s) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: s,
      className: `tiptap-badge ${i || ""}`,
      "data-style": e,
      "data-size": t,
      "data-appearance": r,
      "data-text-trim": n ? "on" : "off",
      ...o,
      children: a
    }
  )
);
ya.displayName = "Badge";
function bCe({
  level: e,
  shortcutKeys: t = CB[e]
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: t }) });
}
const gB = Nt(
  ({
    editor: e,
    level: t,
    text: r,
    hideWhenUnavailable: n = !1,
    onToggled: i,
    showShortcut: a = !1,
    onClick: o,
    children: s,
    ...l
  }, u) => {
    const { editor: c } = Qt(e), {
      isVisible: f,
      canToggle: d,
      isActive: h,
      handleToggle: p,
      label: v,
      Icon: g,
      shortcutKeys: m
    } = _Ce({
      editor: c,
      level: t,
      hideWhenUnavailable: n,
      onToggled: i
    }), y = Te(
      (b) => {
        o == null || o(b), !b.defaultPrevented && p();
      },
      [p, o]
    );
    return f ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": h ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !d,
        "data-disabled": !d,
        "aria-label": v,
        "aria-pressed": h,
        tooltip: v,
        onClick: y,
        ...l,
        ref: u,
        children: s ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(g, { className: "tiptap-button-icon" }),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          a && /* @__PURE__ */ x.jsx(bCe, { level: t, shortcutKeys: m })
        ] })
      }
    ) : null;
  }
);
gB.displayName = "HeadingButton";
const mB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M21.0001 10C21.0001 9.63121 20.7971 9.29235 20.472 9.11833C20.1468 8.94431 19.7523 8.96338 19.4454 9.16795L16.4454 11.168C15.9859 11.4743 15.8617 12.0952 16.1681 12.5547C16.4744 13.0142 17.0953 13.1384 17.5548 12.8321L19.0001 11.8685V18C19.0001 18.5523 19.4478 19 20.0001 19C20.5524 19 21.0001 18.5523 21.0001 18V10Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
mB.displayName = "HeadingOneIcon";
const yB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M22.0001 12C22.0001 10.7611 21.1663 9.79297 20.0663 9.42632C18.9547 9.05578 17.6171 9.28724 16.4001 10.2C15.9582 10.5314 15.8687 11.1582 16.2001 11.6C16.5314 12.0418 17.1582 12.1314 17.6001 11.8C18.383 11.2128 19.0455 11.1942 19.4338 11.3237C19.8339 11.457 20.0001 11.7389 20.0001 12C20.0001 12.4839 19.8554 12.7379 19.6537 12.9481C19.4275 13.1837 19.1378 13.363 18.7055 13.6307C18.6313 13.6767 18.553 13.7252 18.4701 13.777C17.9572 14.0975 17.3128 14.5261 16.8163 15.2087C16.3007 15.9177 16.0001 16.8183 16.0001 18C16.0001 18.5523 16.4478 19 17.0001 19H21.0001C21.5523 19 22.0001 18.5523 22.0001 18C22.0001 17.4477 21.5523 17 21.0001 17H18.131C18.21 16.742 18.3176 16.5448 18.4338 16.385C18.6873 16.0364 19.0429 15.7775 19.5301 15.473C19.5898 15.4357 19.6536 15.3966 19.7205 15.3556C20.139 15.0992 20.6783 14.7687 21.0964 14.3332C21.6447 13.7621 22.0001 13.0161 22.0001 12Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
yB.displayName = "HeadingTwoIcon";
const xB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M19.4608 11.2169C19.1135 11.0531 18.5876 11.0204 18.0069 11.3619C17.5309 11.642 16.918 11.4831 16.638 11.007C16.358 10.531 16.5169 9.91809 16.9929 9.63807C18.1123 8.97962 19.3364 8.94691 20.314 9.40808C21.2839 9.86558 21.9999 10.818 21.9999 12C21.9999 12.7957 21.6838 13.5587 21.1212 14.1213C20.5586 14.6839 19.7956 15 18.9999 15C18.4476 15 17.9999 14.5523 17.9999 14C17.9999 13.4477 18.4476 13 18.9999 13C19.2651 13 19.5195 12.8947 19.707 12.7071C19.8946 12.5196 19.9999 12.2652 19.9999 12C19.9999 11.6821 19.8159 11.3844 19.4608 11.2169Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M18.0001 14C18.0001 13.4477 18.4478 13 19.0001 13C19.7957 13 20.5588 13.3161 21.1214 13.8787C21.684 14.4413 22.0001 15.2043 22.0001 16C22.0001 17.2853 21.2767 18.3971 20.1604 18.8994C19.0257 19.41 17.642 19.2315 16.4001 18.3C15.9582 17.9686 15.8687 17.3418 16.2001 16.9C16.5314 16.4582 17.1582 16.3686 17.6001 16.7C18.3581 17.2685 18.9744 17.24 19.3397 17.0756C19.7234 16.9029 20.0001 16.5147 20.0001 16C20.0001 15.7348 19.8947 15.4804 19.7072 15.2929C19.5196 15.1054 19.2653 15 19.0001 15C18.4478 15 18.0001 14.5523 18.0001 14Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
xB.displayName = "HeadingThreeIcon";
const bB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M4 5C4.55228 5 5 5.44772 5 6V11H11V6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V13H5V18C5 18.5523 4.55228 19 4 19C3.44772 19 3 18.5523 3 18V6C3 5.44772 3.44772 5 4 5Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M17 9C17.5523 9 18 9.44772 18 10V13H20V10C20 9.44772 20.4477 9 21 9C21.5523 9 22 9.44772 22 10V18C22 18.5523 21.5523 19 21 19C20.4477 19 20 18.5523 20 18V15H17C16.4477 15 16 14.5523 16 14V10C16 9.44772 16.4477 9 17 9Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
bB.displayName = "HeadingFourIcon";
const wB = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M16 10C16 9.44772 16.4477 9 17 9H21C21.5523 9 22 9.44772 22 10C22 10.5523 21.5523 11 21 11H18V12H18.3C20.2754 12 22 13.4739 22 15.5C22 17.5261 20.2754 19 18.3 19C17.6457 19 17.0925 18.8643 16.5528 18.5944C16.0588 18.3474 15.8586 17.7468 16.1055 17.2528C16.3525 16.7588 16.9532 16.5586 17.4472 16.8056C17.7074 16.9357 17.9542 17 18.3 17C19.3246 17 20 16.2739 20 15.5C20 14.7261 19.3246 14 18.3 14H17C16.4477 14 16 13.5523 16 13L16 12.9928V10Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
wB.displayName = "HeadingFiveIcon";
const _B = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M5 6C5 5.44772 4.55228 5 4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V13H11V18C11 18.5523 11.4477 19 12 19C12.5523 19 13 18.5523 13 18V6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V11H5V6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M20.7071 9.29289C21.0976 9.68342 21.0976 10.3166 20.7071 10.7071C19.8392 11.575 19.2179 12.2949 18.7889 13.0073C18.8587 13.0025 18.929 13 19 13C20.6569 13 22 14.3431 22 16C22 17.6569 20.6569 19 19 19C17.3431 19 16 17.6569 16 16C16 14.6007 16.2837 13.4368 16.8676 12.3419C17.4384 11.2717 18.2728 10.3129 19.2929 9.29289C19.6834 8.90237 20.3166 8.90237 20.7071 9.29289ZM19 17C18.4477 17 18 16.5523 18 16C18 15.4477 18.4477 15 19 15C19.5523 15 20 15.4477 20 16C20 16.5523 19.5523 17 19 17Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
_B.displayName = "HeadingSixIcon";
const SB = {
  1: mB,
  2: yB,
  3: xB,
  4: bB,
  5: wB,
  6: _B
}, CB = {
  1: "ctrl+alt+1",
  2: "ctrl+alt+2",
  3: "ctrl+alt+3",
  4: "ctrl+alt+4",
  5: "ctrl+alt+5",
  6: "ctrl+alt+6"
};
function Vh(e, t, r = !0) {
  return !e || !e.isEditable || !lo("heading", e) || uo(e, ["image"]) ? !1 : r ? A0(e, [
    "paragraph",
    "heading",
    "bulletList",
    "orderedList",
    "taskList",
    "blockquote",
    "codeBlock"
  ]) ? t ? e.can().setNode("heading", { level: t }) || e.can().clearNodes() : e.can().setNode("heading") || e.can().clearNodes() : !1 : t ? e.can().setNode("heading", { level: t }) : e.can().setNode("heading");
}
function DA(e, t) {
  return !e || !e.isEditable ? !1 : Array.isArray(t) ? t.some((r) => e.isActive("heading", { level: r })) : t ? e.isActive("heading", { level: t }) : e.isActive("heading");
}
function wCe(e, t) {
  var i, a, o;
  if (!e || !e.isEditable) return !1;
  const r = Array.isArray(t) ? t : [t], n = r.find((s) => Vh(e, s));
  if (!n) return !1;
  try {
    const s = e.view;
    let l = s.state, u = l.tr;
    if (l.selection.empty || l.selection instanceof Qn) {
      const p = (i = T0({
        editor: e,
        node: l.selection.$anchor.node(1)
      })) == null ? void 0 : i.pos;
      if (!Cf(p)) return !1;
      u = u.setSelection(sa.create(l.doc, p)), s.dispatch(u), l = s.state;
    }
    const c = l.selection;
    let f = e.chain().focus();
    if (c instanceof sa) {
      const p = (a = c.node.firstChild) == null ? void 0 : a.firstChild, v = (o = c.node.lastChild) == null ? void 0 : o.lastChild, g = p ? c.from + p.nodeSize : c.from + 1, m = v ? c.to - v.nodeSize : c.to - 1, y = l.doc.resolve(g), b = l.doc.resolve(m);
      f = f.setTextSelection(Qn.between(y, b)).clearNodes();
    }
    return (r.some(
      (p) => e.isActive("heading", { level: p })
    ) ? f.setNode("paragraph") : f.setNode("heading", { level: n })).run(), e.chain().focus().selectTextblockEnd().run(), !0;
  } catch {
    return !1;
  }
}
function TB(e) {
  const { editor: t, level: r, hideWhenUnavailable: n } = e;
  return !t || !t.isEditable || !lo("heading", t) ? !1 : n && !t.isActive("code") ? Array.isArray(r) ? r.some((i) => Vh(t, i)) : Vh(t, r) : !0;
}
function _Ce(e) {
  const {
    editor: t,
    level: r,
    hideWhenUnavailable: n = !1,
    onToggled: i
  } = e, { editor: a } = Qt(t), [o, s] = Ze(!0), l = Vh(a, r), u = DA(a, r);
  Oe(() => {
    if (!a) return;
    const f = () => {
      s(TB({ editor: a, level: r, hideWhenUnavailable: n }));
    };
    return f(), a.on("selectionUpdate", f), () => {
      a.off("selectionUpdate", f);
    };
  }, [a, r, n]);
  const c = Te(() => {
    if (!a) return !1;
    const f = wCe(a, r);
    return f && (i == null || i()), f;
  }, [a, r, i]);
  return {
    isVisible: o,
    isActive: u,
    handleToggle: c,
    canToggle: l,
    label: `Heading ${r}`,
    shortcutKeys: CB[r],
    Icon: SB[r]
  };
}
function ey(e, t, { checkForDefaultPrevented: r = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), r === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function hR(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function AB(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((i) => {
      const a = hR(i, t);
      return !r && typeof a == "function" && (r = !0), a;
    });
    if (r)
      return () => {
        for (let i = 0; i < n.length; i++) {
          const a = n[i];
          typeof a == "function" ? a() : hR(e[i], null);
        }
      };
  };
}
function SCe(e, t = []) {
  let r = [];
  function n(a, o) {
    const s = T.createContext(o), l = r.length;
    r = [...r, o];
    const u = (f) => {
      var m;
      const { scope: d, children: h, ...p } = f, v = ((m = d == null ? void 0 : d[e]) == null ? void 0 : m[l]) || s, g = T.useMemo(() => p, Object.values(p));
      return /* @__PURE__ */ x.jsx(v.Provider, { value: g, children: h });
    };
    u.displayName = a + "Provider";
    function c(f, d) {
      var v;
      const h = ((v = d == null ? void 0 : d[e]) == null ? void 0 : v[l]) || s, p = T.useContext(h);
      if (p) return p;
      if (o !== void 0) return o;
      throw new Error(`\`${f}\` must be used within \`${a}\``);
    }
    return [u, c];
  }
  const i = () => {
    const a = r.map((o) => T.createContext(o));
    return function(s) {
      const l = (s == null ? void 0 : s[e]) || a;
      return T.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: l } }),
        [s, l]
      );
    };
  };
  return i.scopeName = e, [n, CCe(i, ...t)];
}
function CCe(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const r = () => {
    const n = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(a) {
      const o = n.reduce((s, { useScope: l, scopeName: u }) => {
        const f = l(a)[`__scope${u}`];
        return { ...s, ...f };
      }, {});
      return T.useMemo(() => ({ [`__scope${t.scopeName}`]: o }), [o]);
    };
  };
  return r.scopeName = t.scopeName, r;
}
var MB = globalThis != null && globalThis.document ? T.useLayoutEffect : () => {
}, TCe = T[" useInsertionEffect ".trim().toString()] || MB;
function ACe({
  prop: e,
  defaultProp: t,
  onChange: r = () => {
  },
  caller: n
}) {
  const [i, a, o] = MCe({
    defaultProp: t,
    onChange: r
  }), s = e !== void 0, l = s ? e : i;
  {
    const c = T.useRef(e !== void 0);
    T.useEffect(() => {
      const f = c.current;
      f !== s && console.warn(
        `${n} is changing from ${f ? "controlled" : "uncontrolled"} to ${s ? "controlled" : "uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`
      ), c.current = s;
    }, [s, n]);
  }
  const u = T.useCallback(
    (c) => {
      var f;
      if (s) {
        const d = ECe(c) ? c(e) : c;
        d !== e && ((f = o.current) == null || f.call(o, d));
      } else
        a(c);
    },
    [s, e, a, o]
  );
  return [l, u];
}
function MCe({
  defaultProp: e,
  onChange: t
}) {
  const [r, n] = T.useState(e), i = T.useRef(r), a = T.useRef(t);
  return TCe(() => {
    a.current = t;
  }, [t]), T.useEffect(() => {
    var o;
    i.current !== r && ((o = a.current) == null || o.call(a, r), i.current = r);
  }, [r, i]), [r, n, a];
}
function ECe(e) {
  return typeof e == "function";
}
// @__NO_SIDE_EFFECTS__
function DCe(e) {
  const t = /* @__PURE__ */ NCe(e), r = T.forwardRef((n, i) => {
    const { children: a, ...o } = n, s = T.Children.toArray(a), l = s.find(LCe);
    if (l) {
      const u = l.props.children, c = s.map((f) => f === l ? T.Children.count(u) > 1 ? T.Children.only(null) : T.isValidElement(u) ? u.props.children : null : f);
      return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: T.isValidElement(u) ? T.cloneElement(u, void 0, c) : null });
    }
    return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: a });
  });
  return r.displayName = `${e}.Slot`, r;
}
// @__NO_SIDE_EFFECTS__
function NCe(e) {
  const t = T.forwardRef((r, n) => {
    const { children: i, ...a } = r;
    if (T.isValidElement(i)) {
      const o = PCe(i), s = RCe(a, i.props);
      return i.type !== T.Fragment && (s.ref = n ? AB(n, o) : o), T.cloneElement(i, s);
    }
    return T.Children.count(i) > 1 ? T.Children.only(null) : null;
  });
  return t.displayName = `${e}.SlotClone`, t;
}
var ICe = Symbol("radix.slottable");
function LCe(e) {
  return T.isValidElement(e) && typeof e.type == "function" && "__radixId" in e.type && e.type.__radixId === ICe;
}
function RCe(e, t) {
  const r = { ...t };
  for (const n in t) {
    const i = e[n], a = t[n];
    /^on[A-Z]/.test(n) ? i && a ? r[n] = (...s) => {
      const l = a(...s);
      return i(...s), l;
    } : i && (r[n] = i) : n === "style" ? r[n] = { ...i, ...a } : n === "className" && (r[n] = [i, a].filter(Boolean).join(" "));
  }
  return { ...e, ...r };
}
function PCe(e) {
  var n, i;
  let t = (n = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : n.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
var kCe = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "select",
  "span",
  "svg",
  "ul"
], OCe = kCe.reduce((e, t) => {
  const r = /* @__PURE__ */ DCe(`Primitive.${t}`), n = T.forwardRef((i, a) => {
    const { asChild: o, ...s } = i, l = o ? r : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ x.jsx(l, { ...s, ref: a });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function er(e, t, { checkForDefaultPrevented: r = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), r === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function NA(e, t = []) {
  let r = [];
  function n(a, o) {
    const s = T.createContext(o), l = r.length;
    r = [...r, o];
    const u = (f) => {
      var m;
      const { scope: d, children: h, ...p } = f, v = ((m = d == null ? void 0 : d[e]) == null ? void 0 : m[l]) || s, g = T.useMemo(() => p, Object.values(p));
      return /* @__PURE__ */ x.jsx(v.Provider, { value: g, children: h });
    };
    u.displayName = a + "Provider";
    function c(f, d) {
      var v;
      const h = ((v = d == null ? void 0 : d[e]) == null ? void 0 : v[l]) || s, p = T.useContext(h);
      if (p) return p;
      if (o !== void 0) return o;
      throw new Error(`\`${f}\` must be used within \`${a}\``);
    }
    return [u, c];
  }
  const i = () => {
    const a = r.map((o) => T.createContext(o));
    return function(s) {
      const l = (s == null ? void 0 : s[e]) || a;
      return T.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: l } }),
        [s, l]
      );
    };
  };
  return i.scopeName = e, [n, zCe(i, ...t)];
}
function zCe(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const r = () => {
    const n = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(a) {
      const o = n.reduce((s, { useScope: l, scopeName: u }) => {
        const f = l(a)[`__scope${u}`];
        return { ...s, ...f };
      }, {});
      return T.useMemo(() => ({ [`__scope${t.scopeName}`]: o }), [o]);
    };
  };
  return r.scopeName = t.scopeName, r;
}
function pR(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function IA(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((i) => {
      const a = pR(i, t);
      return !r && typeof a == "function" && (r = !0), a;
    });
    if (r)
      return () => {
        for (let i = 0; i < n.length; i++) {
          const a = n[i];
          typeof a == "function" ? a() : pR(e[i], null);
        }
      };
  };
}
function ii(...e) {
  return T.useCallback(IA(...e), e);
}
// @__NO_SIDE_EFFECTS__
function ty(e) {
  const t = /* @__PURE__ */ jCe(e), r = T.forwardRef((n, i) => {
    const { children: a, ...o } = n, s = T.Children.toArray(a), l = s.find(BCe);
    if (l) {
      const u = l.props.children, c = s.map((f) => f === l ? T.Children.count(u) > 1 ? T.Children.only(null) : T.isValidElement(u) ? u.props.children : null : f);
      return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: T.isValidElement(u) ? T.cloneElement(u, void 0, c) : null });
    }
    return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: a });
  });
  return r.displayName = `${e}.Slot`, r;
}
// @__NO_SIDE_EFFECTS__
function jCe(e) {
  const t = T.forwardRef((r, n) => {
    const { children: i, ...a } = r;
    if (T.isValidElement(i)) {
      const o = $Ce(i), s = FCe(a, i.props);
      return i.type !== T.Fragment && (s.ref = n ? IA(n, o) : o), T.cloneElement(i, s);
    }
    return T.Children.count(i) > 1 ? T.Children.only(null) : null;
  });
  return t.displayName = `${e}.SlotClone`, t;
}
var VCe = Symbol("radix.slottable");
function BCe(e) {
  return T.isValidElement(e) && typeof e.type == "function" && "__radixId" in e.type && e.type.__radixId === VCe;
}
function FCe(e, t) {
  const r = { ...t };
  for (const n in t) {
    const i = e[n], a = t[n];
    /^on[A-Z]/.test(n) ? i && a ? r[n] = (...s) => {
      const l = a(...s);
      return i(...s), l;
    } : i && (r[n] = i) : n === "style" ? r[n] = { ...i, ...a } : n === "className" && (r[n] = [i, a].filter(Boolean).join(" "));
  }
  return { ...e, ...r };
}
function $Ce(e) {
  var n, i;
  let t = (n = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : n.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
function HCe(e) {
  const t = e + "CollectionProvider", [r, n] = NA(t), [i, a] = r(
    t,
    { collectionRef: { current: null }, itemMap: /* @__PURE__ */ new Map() }
  ), o = (v) => {
    const { scope: g, children: m } = v, y = se.useRef(null), b = se.useRef(/* @__PURE__ */ new Map()).current;
    return /* @__PURE__ */ x.jsx(i, { scope: g, itemMap: b, collectionRef: y, children: m });
  };
  o.displayName = t;
  const s = e + "CollectionSlot", l = /* @__PURE__ */ ty(s), u = se.forwardRef(
    (v, g) => {
      const { scope: m, children: y } = v, b = a(s, m), w = ii(g, b.collectionRef);
      return /* @__PURE__ */ x.jsx(l, { ref: w, children: y });
    }
  );
  u.displayName = s;
  const c = e + "CollectionItemSlot", f = "data-radix-collection-item", d = /* @__PURE__ */ ty(c), h = se.forwardRef(
    (v, g) => {
      const { scope: m, children: y, ...b } = v, w = se.useRef(null), _ = ii(g, w), S = a(c, m);
      return se.useEffect(() => (S.itemMap.set(w, { ref: w, ...b }), () => void S.itemMap.delete(w))), /* @__PURE__ */ x.jsx(d, { [f]: "", ref: _, children: y });
    }
  );
  h.displayName = c;
  function p(v) {
    const g = a(e + "CollectionConsumer", v);
    return se.useCallback(() => {
      const y = g.collectionRef.current;
      if (!y) return [];
      const b = Array.from(y.querySelectorAll(`[${f}]`));
      return Array.from(g.itemMap.values()).sort(
        (S, C) => b.indexOf(S.ref.current) - b.indexOf(C.ref.current)
      );
    }, [g.collectionRef, g.itemMap]);
  }
  return [
    { Provider: o, Slot: u, ItemSlot: h },
    p,
    n
  ];
}
var GCe = T.createContext(void 0);
function WCe(e) {
  const t = T.useContext(GCe);
  return e || t || "ltr";
}
var UCe = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "select",
  "span",
  "svg",
  "ul"
], ci = UCe.reduce((e, t) => {
  const r = /* @__PURE__ */ ty(`Primitive.${t}`), n = T.forwardRef((i, a) => {
    const { asChild: o, ...s } = i, l = o ? r : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ x.jsx(l, { ...s, ref: a });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function EB(e, t) {
  e && dy.flushSync(() => e.dispatchEvent(t));
}
function hs(e) {
  const t = T.useRef(e);
  return T.useEffect(() => {
    t.current = e;
  }), T.useMemo(() => (...r) => {
    var n;
    return (n = t.current) == null ? void 0 : n.call(t, ...r);
  }, []);
}
function YCe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = hs(e);
  T.useEffect(() => {
    const n = (i) => {
      i.key === "Escape" && r(i);
    };
    return t.addEventListener("keydown", n, { capture: !0 }), () => t.removeEventListener("keydown", n, { capture: !0 });
  }, [r, t]);
}
var ZCe = "DismissableLayer", H_ = "dismissableLayer.update", XCe = "dismissableLayer.pointerDownOutside", KCe = "dismissableLayer.focusOutside", vR, DB = T.createContext({
  layers: /* @__PURE__ */ new Set(),
  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),
  branches: /* @__PURE__ */ new Set()
}), NB = T.forwardRef(
  (e, t) => {
    const {
      disableOutsidePointerEvents: r = !1,
      onEscapeKeyDown: n,
      onPointerDownOutside: i,
      onFocusOutside: a,
      onInteractOutside: o,
      onDismiss: s,
      ...l
    } = e, u = T.useContext(DB), [c, f] = T.useState(null), d = (c == null ? void 0 : c.ownerDocument) ?? (globalThis == null ? void 0 : globalThis.document), [, h] = T.useState({}), p = ii(t, (C) => f(C)), v = Array.from(u.layers), [g] = [...u.layersWithOutsidePointerEventsDisabled].slice(-1), m = v.indexOf(g), y = c ? v.indexOf(c) : -1, b = u.layersWithOutsidePointerEventsDisabled.size > 0, w = y >= m, _ = QCe((C) => {
      const A = C.target, M = [...u.branches].some((D) => D.contains(A));
      !w || M || (i == null || i(C), o == null || o(C), C.defaultPrevented || s == null || s());
    }, d), S = eTe((C) => {
      const A = C.target;
      [...u.branches].some((D) => D.contains(A)) || (a == null || a(C), o == null || o(C), C.defaultPrevented || s == null || s());
    }, d);
    return YCe((C) => {
      y === u.layers.size - 1 && (n == null || n(C), !C.defaultPrevented && s && (C.preventDefault(), s()));
    }, d), T.useEffect(() => {
      if (c)
        return r && (u.layersWithOutsidePointerEventsDisabled.size === 0 && (vR = d.body.style.pointerEvents, d.body.style.pointerEvents = "none"), u.layersWithOutsidePointerEventsDisabled.add(c)), u.layers.add(c), gR(), () => {
          r && u.layersWithOutsidePointerEventsDisabled.size === 1 && (d.body.style.pointerEvents = vR);
        };
    }, [c, d, r, u]), T.useEffect(() => () => {
      c && (u.layers.delete(c), u.layersWithOutsidePointerEventsDisabled.delete(c), gR());
    }, [c, u]), T.useEffect(() => {
      const C = () => h({});
      return document.addEventListener(H_, C), () => document.removeEventListener(H_, C);
    }, []), /* @__PURE__ */ x.jsx(
      ci.div,
      {
        ...l,
        ref: p,
        style: {
          pointerEvents: b ? w ? "auto" : "none" : void 0,
          ...e.style
        },
        onFocusCapture: er(e.onFocusCapture, S.onFocusCapture),
        onBlurCapture: er(e.onBlurCapture, S.onBlurCapture),
        onPointerDownCapture: er(
          e.onPointerDownCapture,
          _.onPointerDownCapture
        )
      }
    );
  }
);
NB.displayName = ZCe;
var qCe = "DismissableLayerBranch", JCe = T.forwardRef((e, t) => {
  const r = T.useContext(DB), n = T.useRef(null), i = ii(t, n);
  return T.useEffect(() => {
    const a = n.current;
    if (a)
      return r.branches.add(a), () => {
        r.branches.delete(a);
      };
  }, [r.branches]), /* @__PURE__ */ x.jsx(ci.div, { ...e, ref: i });
});
JCe.displayName = qCe;
function QCe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = hs(e), n = T.useRef(!1), i = T.useRef(() => {
  });
  return T.useEffect(() => {
    const a = (s) => {
      if (s.target && !n.current) {
        let l = function() {
          IB(
            XCe,
            r,
            u,
            { discrete: !0 }
          );
        };
        const u = { originalEvent: s };
        s.pointerType === "touch" ? (t.removeEventListener("click", i.current), i.current = l, t.addEventListener("click", i.current, { once: !0 })) : l();
      } else
        t.removeEventListener("click", i.current);
      n.current = !1;
    }, o = window.setTimeout(() => {
      t.addEventListener("pointerdown", a);
    }, 0);
    return () => {
      window.clearTimeout(o), t.removeEventListener("pointerdown", a), t.removeEventListener("click", i.current);
    };
  }, [t, r]), {
    // ensures we check React component tree (not just DOM tree)
    onPointerDownCapture: () => n.current = !0
  };
}
function eTe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = hs(e), n = T.useRef(!1);
  return T.useEffect(() => {
    const i = (a) => {
      a.target && !n.current && IB(KCe, r, { originalEvent: a }, {
        discrete: !1
      });
    };
    return t.addEventListener("focusin", i), () => t.removeEventListener("focusin", i);
  }, [t, r]), {
    onFocusCapture: () => n.current = !0,
    onBlurCapture: () => n.current = !1
  };
}
function gR() {
  const e = new CustomEvent(H_);
  document.dispatchEvent(e);
}
function IB(e, t, r, { discrete: n }) {
  const i = r.originalEvent.target, a = new CustomEvent(e, { bubbles: !1, cancelable: !0, detail: r });
  t && i.addEventListener(e, t, { once: !0 }), n ? EB(i, a) : i.dispatchEvent(a);
}
var Zb = 0;
function tTe() {
  T.useEffect(() => {
    const e = document.querySelectorAll("[data-radix-focus-guard]");
    return document.body.insertAdjacentElement("afterbegin", e[0] ?? mR()), document.body.insertAdjacentElement("beforeend", e[1] ?? mR()), Zb++, () => {
      Zb === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach((t) => t.remove()), Zb--;
    };
  }, []);
}
function mR() {
  const e = document.createElement("span");
  return e.setAttribute("data-radix-focus-guard", ""), e.tabIndex = 0, e.style.outline = "none", e.style.opacity = "0", e.style.position = "fixed", e.style.pointerEvents = "none", e;
}
var Xb = "focusScope.autoFocusOnMount", Kb = "focusScope.autoFocusOnUnmount", yR = { bubbles: !1, cancelable: !0 }, rTe = "FocusScope", LB = T.forwardRef((e, t) => {
  const {
    loop: r = !1,
    trapped: n = !1,
    onMountAutoFocus: i,
    onUnmountAutoFocus: a,
    ...o
  } = e, [s, l] = T.useState(null), u = hs(i), c = hs(a), f = T.useRef(null), d = ii(t, (v) => l(v)), h = T.useRef({
    paused: !1,
    pause() {
      this.paused = !0;
    },
    resume() {
      this.paused = !1;
    }
  }).current;
  T.useEffect(() => {
    if (n) {
      let v = function(b) {
        if (h.paused || !s) return;
        const w = b.target;
        s.contains(w) ? f.current = w : Co(f.current, { select: !0 });
      }, g = function(b) {
        if (h.paused || !s) return;
        const w = b.relatedTarget;
        w !== null && (s.contains(w) || Co(f.current, { select: !0 }));
      }, m = function(b) {
        if (document.activeElement === document.body)
          for (const _ of b)
            _.removedNodes.length > 0 && Co(s);
      };
      document.addEventListener("focusin", v), document.addEventListener("focusout", g);
      const y = new MutationObserver(m);
      return s && y.observe(s, { childList: !0, subtree: !0 }), () => {
        document.removeEventListener("focusin", v), document.removeEventListener("focusout", g), y.disconnect();
      };
    }
  }, [n, s, h.paused]), T.useEffect(() => {
    if (s) {
      bR.add(h);
      const v = document.activeElement;
      if (!s.contains(v)) {
        const m = new CustomEvent(Xb, yR);
        s.addEventListener(Xb, u), s.dispatchEvent(m), m.defaultPrevented || (nTe(lTe(RB(s)), { select: !0 }), document.activeElement === v && Co(s));
      }
      return () => {
        s.removeEventListener(Xb, u), setTimeout(() => {
          const m = new CustomEvent(Kb, yR);
          s.addEventListener(Kb, c), s.dispatchEvent(m), m.defaultPrevented || Co(v ?? document.body, { select: !0 }), s.removeEventListener(Kb, c), bR.remove(h);
        }, 0);
      };
    }
  }, [s, u, c, h]);
  const p = T.useCallback(
    (v) => {
      if (!r && !n || h.paused) return;
      const g = v.key === "Tab" && !v.altKey && !v.ctrlKey && !v.metaKey, m = document.activeElement;
      if (g && m) {
        const y = v.currentTarget, [b, w] = iTe(y);
        b && w ? !v.shiftKey && m === w ? (v.preventDefault(), r && Co(b, { select: !0 })) : v.shiftKey && m === b && (v.preventDefault(), r && Co(w, { select: !0 })) : m === y && v.preventDefault();
      }
    },
    [r, n, h.paused]
  );
  return /* @__PURE__ */ x.jsx(ci.div, { tabIndex: -1, ...o, ref: d, onKeyDown: p });
});
LB.displayName = rTe;
function nTe(e, { select: t = !1 } = {}) {
  const r = document.activeElement;
  for (const n of e)
    if (Co(n, { select: t }), document.activeElement !== r) return;
}
function iTe(e) {
  const t = RB(e), r = xR(t, e), n = xR(t.reverse(), e);
  return [r, n];
}
function RB(e) {
  const t = [], r = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (n) => {
      const i = n.tagName === "INPUT" && n.type === "hidden";
      return n.disabled || n.hidden || i ? NodeFilter.FILTER_SKIP : n.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  for (; r.nextNode(); ) t.push(r.currentNode);
  return t;
}
function xR(e, t) {
  for (const r of e)
    if (!aTe(r, { upTo: t })) return r;
}
function aTe(e, { upTo: t }) {
  if (getComputedStyle(e).visibility === "hidden") return !0;
  for (; e; ) {
    if (t !== void 0 && e === t) return !1;
    if (getComputedStyle(e).display === "none") return !0;
    e = e.parentElement;
  }
  return !1;
}
function oTe(e) {
  return e instanceof HTMLInputElement && "select" in e;
}
function Co(e, { select: t = !1 } = {}) {
  if (e && e.focus) {
    const r = document.activeElement;
    e.focus({ preventScroll: !0 }), e !== r && oTe(e) && t && e.select();
  }
}
var bR = sTe();
function sTe() {
  let e = [];
  return {
    add(t) {
      const r = e[0];
      t !== r && (r == null || r.pause()), e = wR(e, t), e.unshift(t);
    },
    remove(t) {
      var r;
      e = wR(e, t), (r = e[0]) == null || r.resume();
    }
  };
}
function wR(e, t) {
  const r = [...e], n = r.indexOf(t);
  return n !== -1 && r.splice(n, 1), r;
}
function lTe(e) {
  return e.filter((t) => t.tagName !== "A");
}
var ry = globalThis != null && globalThis.document ? T.useLayoutEffect : () => {
}, uTe = "Arrow", PB = T.forwardRef((e, t) => {
  const { children: r, width: n = 10, height: i = 5, ...a } = e;
  return /* @__PURE__ */ x.jsx(
    ci.svg,
    {
      ...a,
      ref: t,
      width: n,
      height: i,
      viewBox: "0 0 30 10",
      preserveAspectRatio: "none",
      children: e.asChild ? r : /* @__PURE__ */ x.jsx("polygon", { points: "0,0 30,0 15,10" })
    }
  );
});
PB.displayName = uTe;
var cTe = PB;
function fTe(e) {
  const [t, r] = T.useState(void 0);
  return ry(() => {
    if (e) {
      r({ width: e.offsetWidth, height: e.offsetHeight });
      const n = new ResizeObserver((i) => {
        if (!Array.isArray(i) || !i.length)
          return;
        const a = i[0];
        let o, s;
        if ("borderBoxSize" in a) {
          const l = a.borderBoxSize, u = Array.isArray(l) ? l[0] : l;
          o = u.inlineSize, s = u.blockSize;
        } else
          o = e.offsetWidth, s = e.offsetHeight;
        r({ width: o, height: s });
      });
      return n.observe(e, { box: "border-box" }), () => n.unobserve(e);
    } else
      r(void 0);
  }, [e]), t;
}
var LA = "Popper", [kB, OB] = NA(LA), [dTe, zB] = kB(LA), jB = (e) => {
  const { __scopePopper: t, children: r } = e, [n, i] = T.useState(null);
  return /* @__PURE__ */ x.jsx(dTe, { scope: t, anchor: n, onAnchorChange: i, children: r });
};
jB.displayName = LA;
var VB = "PopperAnchor", BB = T.forwardRef(
  (e, t) => {
    const { __scopePopper: r, virtualRef: n, ...i } = e, a = zB(VB, r), o = T.useRef(null), s = ii(t, o), l = T.useRef(null);
    return T.useEffect(() => {
      const u = l.current;
      l.current = (n == null ? void 0 : n.current) || o.current, u !== l.current && a.onAnchorChange(l.current);
    }), n ? null : /* @__PURE__ */ x.jsx(ci.div, { ...i, ref: s });
  }
);
BB.displayName = VB;
var RA = "PopperContent", [hTe, pTe] = kB(RA), FB = T.forwardRef(
  (e, t) => {
    var q, J, U, $, Y, Z;
    const {
      __scopePopper: r,
      side: n = "bottom",
      sideOffset: i = 0,
      align: a = "center",
      alignOffset: o = 0,
      arrowPadding: s = 0,
      avoidCollisions: l = !0,
      collisionBoundary: u = [],
      collisionPadding: c = 0,
      sticky: f = "partial",
      hideWhenDetached: d = !1,
      updatePositionStrategy: h = "optimized",
      onPlaced: p,
      ...v
    } = e, g = zB(RA, r), [m, y] = T.useState(null), b = ii(t, (K) => y(K)), [w, _] = T.useState(null), S = fTe(w), C = (S == null ? void 0 : S.width) ?? 0, A = (S == null ? void 0 : S.height) ?? 0, M = n + (a !== "center" ? "-" + a : ""), D = typeof c == "number" ? c : { top: 0, right: 0, bottom: 0, left: 0, ...c }, N = Array.isArray(u) ? u : [u], R = N.length > 0, O = {
      padding: D,
      boundary: N.filter(gTe),
      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries
      altBoundary: R
    }, { refs: E, floatingStyles: L, placement: I, isPositioned: P, middlewareData: k } = xA({
      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues
      strategy: "fixed",
      placement: M,
      whileElementsMounted: (...K) => yA(...K, {
        animationFrame: h === "always"
      }),
      elements: {
        reference: g.anchor
      },
      middleware: [
        bA({ mainAxis: i + A, alignmentAxis: o }),
        l && wA({
          mainAxis: !0,
          crossAxis: !1,
          limiter: f === "partial" ? XV() : void 0,
          ...O
        }),
        l && _A({ ...O }),
        KV({
          ...O,
          apply: ({ elements: K, rects: ie, availableWidth: Q, availableHeight: ce }) => {
            const { width: te, height: oe } = ie.reference, de = K.floating.style;
            de.setProperty("--radix-popper-available-width", `${Q}px`), de.setProperty("--radix-popper-available-height", `${ce}px`), de.setProperty("--radix-popper-anchor-width", `${te}px`), de.setProperty("--radix-popper-anchor-height", `${oe}px`);
          }
        }),
        w && JV({ element: w, padding: s }),
        mTe({ arrowWidth: C, arrowHeight: A }),
        d && qV({ strategy: "referenceHidden", ...O })
      ]
    }), [z, V] = GB(I), B = hs(p);
    ry(() => {
      P && (B == null || B());
    }, [P, B]);
    const F = (q = k.arrow) == null ? void 0 : q.x, H = (J = k.arrow) == null ? void 0 : J.y, G = ((U = k.arrow) == null ? void 0 : U.centerOffset) !== 0, [W, X] = T.useState();
    return ry(() => {
      m && X(window.getComputedStyle(m).zIndex);
    }, [m]), /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: E.setFloating,
        "data-radix-popper-content-wrapper": "",
        style: {
          ...L,
          transform: P ? L.transform : "translate(0, -200%)",
          // keep off the page when measuring
          minWidth: "max-content",
          zIndex: W,
          "--radix-popper-transform-origin": [
            ($ = k.transformOrigin) == null ? void 0 : $.x,
            (Y = k.transformOrigin) == null ? void 0 : Y.y
          ].join(" "),
          // hide the content if using the hide middleware and should be hidden
          // set visibility to hidden and disable pointer events so the UI behaves
          // as if the PopperContent isn't there at all
          ...((Z = k.hide) == null ? void 0 : Z.referenceHidden) && {
            visibility: "hidden",
            pointerEvents: "none"
          }
        },
        dir: e.dir,
        children: /* @__PURE__ */ x.jsx(
          hTe,
          {
            scope: r,
            placedSide: z,
            onArrowChange: _,
            arrowX: F,
            arrowY: H,
            shouldHideArrow: G,
            children: /* @__PURE__ */ x.jsx(
              ci.div,
              {
                "data-side": z,
                "data-align": V,
                ...v,
                ref: b,
                style: {
                  ...v.style,
                  // if the PopperContent hasn't been placed yet (not all measurements done)
                  // we prevent animations so that users's animation don't kick in too early referring wrong sides
                  animation: P ? void 0 : "none"
                }
              }
            )
          }
        )
      }
    );
  }
);
FB.displayName = RA;
var $B = "PopperArrow", vTe = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
}, HB = T.forwardRef(function(t, r) {
  const { __scopePopper: n, ...i } = t, a = pTe($B, n), o = vTe[a.placedSide];
  return (
    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)
    // doesn't report size as we'd expect on SVG elements.
    // it reports their bounding box which is effectively the largest path inside the SVG.
    /* @__PURE__ */ x.jsx(
      "span",
      {
        ref: a.onArrowChange,
        style: {
          position: "absolute",
          left: a.arrowX,
          top: a.arrowY,
          [o]: 0,
          transformOrigin: {
            top: "",
            right: "0 0",
            bottom: "center 0",
            left: "100% 0"
          }[a.placedSide],
          transform: {
            top: "translateY(100%)",
            right: "translateY(50%) rotate(90deg) translateX(-50%)",
            bottom: "rotate(180deg)",
            left: "translateY(50%) rotate(-90deg) translateX(50%)"
          }[a.placedSide],
          visibility: a.shouldHideArrow ? "hidden" : void 0
        },
        children: /* @__PURE__ */ x.jsx(
          cTe,
          {
            ...i,
            ref: r,
            style: {
              ...i.style,
              // ensures the element can be measured correctly (mostly for if SVG)
              display: "block"
            }
          }
        )
      }
    )
  );
});
HB.displayName = $B;
function gTe(e) {
  return e !== null;
}
var mTe = (e) => ({
  name: "transformOrigin",
  options: e,
  fn(t) {
    var g, m, y;
    const { placement: r, rects: n, middlewareData: i } = t, o = ((g = i.arrow) == null ? void 0 : g.centerOffset) !== 0, s = o ? 0 : e.arrowWidth, l = o ? 0 : e.arrowHeight, [u, c] = GB(r), f = { start: "0%", center: "50%", end: "100%" }[c], d = (((m = i.arrow) == null ? void 0 : m.x) ?? 0) + s / 2, h = (((y = i.arrow) == null ? void 0 : y.y) ?? 0) + l / 2;
    let p = "", v = "";
    return u === "bottom" ? (p = o ? f : `${d}px`, v = `${-l}px`) : u === "top" ? (p = o ? f : `${d}px`, v = `${n.floating.height + l}px`) : u === "right" ? (p = `${-l}px`, v = o ? f : `${h}px`) : u === "left" && (p = `${n.floating.width + l}px`, v = o ? f : `${h}px`), { data: { x: p, y: v } };
  }
});
function GB(e) {
  const [t, r = "center"] = e.split("-");
  return [t, r];
}
var yTe = jB, xTe = BB, bTe = FB, wTe = HB, _Te = "Portal", WB = T.forwardRef((e, t) => {
  var s;
  const { container: r, ...n } = e, [i, a] = T.useState(!1);
  ry(() => a(!0), []);
  const o = r || i && ((s = globalThis == null ? void 0 : globalThis.document) == null ? void 0 : s.body);
  return o ? gP.createPortal(/* @__PURE__ */ x.jsx(ci.div, { ...n, ref: t }), o) : null;
});
WB.displayName = _Te;
function _R(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function STe(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((i) => {
      const a = _R(i, t);
      return !r && typeof a == "function" && (r = !0), a;
    });
    if (r)
      return () => {
        for (let i = 0; i < n.length; i++) {
          const a = n[i];
          typeof a == "function" ? a() : _R(e[i], null);
        }
      };
  };
}
function CTe(...e) {
  return T.useCallback(STe(...e), e);
}
var SR = globalThis != null && globalThis.document ? T.useLayoutEffect : () => {
};
function TTe(e, t) {
  return T.useReducer((r, n) => t[r][n] ?? r, e);
}
var tu = (e) => {
  const { present: t, children: r } = e, n = ATe(t), i = typeof r == "function" ? r({ present: n.isPresent }) : T.Children.only(r), a = CTe(n.ref, MTe(i));
  return typeof r == "function" || n.isPresent ? T.cloneElement(i, { ref: a }) : null;
};
tu.displayName = "Presence";
function ATe(e) {
  const [t, r] = T.useState(), n = T.useRef(null), i = T.useRef(e), a = T.useRef("none"), o = e ? "mounted" : "unmounted", [s, l] = TTe(o, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return T.useEffect(() => {
    const u = Zv(n.current);
    a.current = s === "mounted" ? u : "none";
  }, [s]), SR(() => {
    const u = n.current, c = i.current;
    if (c !== e) {
      const d = a.current, h = Zv(u);
      e ? l("MOUNT") : h === "none" || (u == null ? void 0 : u.display) === "none" ? l("UNMOUNT") : l(c && d !== h ? "ANIMATION_OUT" : "UNMOUNT"), i.current = e;
    }
  }, [e, l]), SR(() => {
    if (t) {
      let u;
      const c = t.ownerDocument.defaultView ?? window, f = (h) => {
        const v = Zv(n.current).includes(CSS.escape(h.animationName));
        if (h.target === t && v && (l("ANIMATION_END"), !i.current)) {
          const g = t.style.animationFillMode;
          t.style.animationFillMode = "forwards", u = c.setTimeout(() => {
            t.style.animationFillMode === "forwards" && (t.style.animationFillMode = g);
          });
        }
      }, d = (h) => {
        h.target === t && (a.current = Zv(n.current));
      };
      return t.addEventListener("animationstart", d), t.addEventListener("animationcancel", f), t.addEventListener("animationend", f), () => {
        c.clearTimeout(u), t.removeEventListener("animationstart", d), t.removeEventListener("animationcancel", f), t.removeEventListener("animationend", f);
      };
    } else
      l("ANIMATION_END");
  }, [t, l]), {
    isPresent: ["mounted", "unmountSuspended"].includes(s),
    ref: T.useCallback((u) => {
      n.current = u ? getComputedStyle(u) : null, r(u);
    }, [])
  };
}
function Zv(e) {
  return (e == null ? void 0 : e.animationName) || "none";
}
function MTe(e) {
  var n, i;
  let t = (n = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : n.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
function wc(e, t, { checkForDefaultPrevented: r = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), r === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function UB(e, t = []) {
  let r = [];
  function n(a, o) {
    const s = T.createContext(o), l = r.length;
    r = [...r, o];
    const u = (f) => {
      var m;
      const { scope: d, children: h, ...p } = f, v = ((m = d == null ? void 0 : d[e]) == null ? void 0 : m[l]) || s, g = T.useMemo(() => p, Object.values(p));
      return /* @__PURE__ */ x.jsx(v.Provider, { value: g, children: h });
    };
    u.displayName = a + "Provider";
    function c(f, d) {
      var v;
      const h = ((v = d == null ? void 0 : d[e]) == null ? void 0 : v[l]) || s, p = T.useContext(h);
      if (p) return p;
      if (o !== void 0) return o;
      throw new Error(`\`${f}\` must be used within \`${a}\``);
    }
    return [u, c];
  }
  const i = () => {
    const a = r.map((o) => T.createContext(o));
    return function(s) {
      const l = (s == null ? void 0 : s[e]) || a;
      return T.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: l } }),
        [s, l]
      );
    };
  };
  return i.scopeName = e, [n, ETe(i, ...t)];
}
function ETe(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const r = () => {
    const n = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(a) {
      const o = n.reduce((s, { useScope: l, scopeName: u }) => {
        const f = l(a)[`__scope${u}`];
        return { ...s, ...f };
      }, {});
      return T.useMemo(() => ({ [`__scope${t.scopeName}`]: o }), [o]);
    };
  };
  return r.scopeName = t.scopeName, r;
}
function CR(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function YB(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((i) => {
      const a = CR(i, t);
      return !r && typeof a == "function" && (r = !0), a;
    });
    if (r)
      return () => {
        for (let i = 0; i < n.length; i++) {
          const a = n[i];
          typeof a == "function" ? a() : CR(e[i], null);
        }
      };
  };
}
function G_(...e) {
  return T.useCallback(YB(...e), e);
}
// @__NO_SIDE_EFFECTS__
function W_(e) {
  const t = /* @__PURE__ */ DTe(e), r = T.forwardRef((n, i) => {
    const { children: a, ...o } = n, s = T.Children.toArray(a), l = s.find(ITe);
    if (l) {
      const u = l.props.children, c = s.map((f) => f === l ? T.Children.count(u) > 1 ? T.Children.only(null) : T.isValidElement(u) ? u.props.children : null : f);
      return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: T.isValidElement(u) ? T.cloneElement(u, void 0, c) : null });
    }
    return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: a });
  });
  return r.displayName = `${e}.Slot`, r;
}
// @__NO_SIDE_EFFECTS__
function DTe(e) {
  const t = T.forwardRef((r, n) => {
    const { children: i, ...a } = r;
    if (T.isValidElement(i)) {
      const o = RTe(i), s = LTe(a, i.props);
      return i.type !== T.Fragment && (s.ref = n ? YB(n, o) : o), T.cloneElement(i, s);
    }
    return T.Children.count(i) > 1 ? T.Children.only(null) : null;
  });
  return t.displayName = `${e}.SlotClone`, t;
}
var NTe = Symbol("radix.slottable");
function ITe(e) {
  return T.isValidElement(e) && typeof e.type == "function" && "__radixId" in e.type && e.type.__radixId === NTe;
}
function LTe(e, t) {
  const r = { ...t };
  for (const n in t) {
    const i = e[n], a = t[n];
    /^on[A-Z]/.test(n) ? i && a ? r[n] = (...s) => {
      const l = a(...s);
      return i(...s), l;
    } : i && (r[n] = i) : n === "style" ? r[n] = { ...i, ...a } : n === "className" && (r[n] = [i, a].filter(Boolean).join(" "));
  }
  return { ...e, ...r };
}
function RTe(e) {
  var n, i;
  let t = (n = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : n.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
function PTe(e) {
  const t = e + "CollectionProvider", [r, n] = UB(t), [i, a] = r(
    t,
    { collectionRef: { current: null }, itemMap: /* @__PURE__ */ new Map() }
  ), o = (v) => {
    const { scope: g, children: m } = v, y = se.useRef(null), b = se.useRef(/* @__PURE__ */ new Map()).current;
    return /* @__PURE__ */ x.jsx(i, { scope: g, itemMap: b, collectionRef: y, children: m });
  };
  o.displayName = t;
  const s = e + "CollectionSlot", l = /* @__PURE__ */ W_(s), u = se.forwardRef(
    (v, g) => {
      const { scope: m, children: y } = v, b = a(s, m), w = G_(g, b.collectionRef);
      return /* @__PURE__ */ x.jsx(l, { ref: w, children: y });
    }
  );
  u.displayName = s;
  const c = e + "CollectionItemSlot", f = "data-radix-collection-item", d = /* @__PURE__ */ W_(c), h = se.forwardRef(
    (v, g) => {
      const { scope: m, children: y, ...b } = v, w = se.useRef(null), _ = G_(g, w), S = a(c, m);
      return se.useEffect(() => (S.itemMap.set(w, { ref: w, ...b }), () => void S.itemMap.delete(w))), /* @__PURE__ */ x.jsx(d, { [f]: "", ref: _, children: y });
    }
  );
  h.displayName = c;
  function p(v) {
    const g = a(e + "CollectionConsumer", v);
    return se.useCallback(() => {
      const y = g.collectionRef.current;
      if (!y) return [];
      const b = Array.from(y.querySelectorAll(`[${f}]`));
      return Array.from(g.itemMap.values()).sort(
        (S, C) => b.indexOf(S.ref.current) - b.indexOf(C.ref.current)
      );
    }, [g.collectionRef, g.itemMap]);
  }
  return [
    { Provider: o, Slot: u, ItemSlot: h },
    p,
    n
  ];
}
var ZB = globalThis != null && globalThis.document ? T.useLayoutEffect : () => {
}, kTe = T[" useId ".trim().toString()] || (() => {
}), OTe = 0;
function zTe(e) {
  const [t, r] = T.useState(kTe());
  return ZB(() => {
    r((n) => n ?? String(OTe++));
  }, [e]), t ? `radix-${t}` : "";
}
var jTe = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "select",
  "span",
  "svg",
  "ul"
], XB = jTe.reduce((e, t) => {
  const r = /* @__PURE__ */ W_(`Primitive.${t}`), n = T.forwardRef((i, a) => {
    const { asChild: o, ...s } = i, l = o ? r : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ x.jsx(l, { ...s, ref: a });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function VTe(e) {
  const t = T.useRef(e);
  return T.useEffect(() => {
    t.current = e;
  }), T.useMemo(() => (...r) => {
    var n;
    return (n = t.current) == null ? void 0 : n.call(t, ...r);
  }, []);
}
var BTe = T[" useInsertionEffect ".trim().toString()] || ZB;
function FTe({
  prop: e,
  defaultProp: t,
  onChange: r = () => {
  },
  caller: n
}) {
  const [i, a, o] = $Te({
    defaultProp: t,
    onChange: r
  }), s = e !== void 0, l = s ? e : i;
  {
    const c = T.useRef(e !== void 0);
    T.useEffect(() => {
      const f = c.current;
      f !== s && console.warn(
        `${n} is changing from ${f ? "controlled" : "uncontrolled"} to ${s ? "controlled" : "uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`
      ), c.current = s;
    }, [s, n]);
  }
  const u = T.useCallback(
    (c) => {
      var f;
      if (s) {
        const d = HTe(c) ? c(e) : c;
        d !== e && ((f = o.current) == null || f.call(o, d));
      } else
        a(c);
    },
    [s, e, a, o]
  );
  return [l, u];
}
function $Te({
  defaultProp: e,
  onChange: t
}) {
  const [r, n] = T.useState(e), i = T.useRef(r), a = T.useRef(t);
  return BTe(() => {
    a.current = t;
  }, [t]), T.useEffect(() => {
    var o;
    i.current !== r && ((o = a.current) == null || o.call(a, r), i.current = r);
  }, [r, i]), [r, n, a];
}
function HTe(e) {
  return typeof e == "function";
}
var GTe = T.createContext(void 0);
function WTe(e) {
  const t = T.useContext(GTe);
  return e || t || "ltr";
}
var qb = "rovingFocusGroup.onEntryFocus", UTe = { bubbles: !1, cancelable: !0 }, wp = "RovingFocusGroup", [U_, KB, YTe] = PTe(wp), [ZTe, qB] = UB(
  wp,
  [YTe]
), [XTe, KTe] = ZTe(wp), JB = T.forwardRef(
  (e, t) => /* @__PURE__ */ x.jsx(U_.Provider, { scope: e.__scopeRovingFocusGroup, children: /* @__PURE__ */ x.jsx(U_.Slot, { scope: e.__scopeRovingFocusGroup, children: /* @__PURE__ */ x.jsx(qTe, { ...e, ref: t }) }) })
);
JB.displayName = wp;
var qTe = T.forwardRef((e, t) => {
  const {
    __scopeRovingFocusGroup: r,
    orientation: n,
    loop: i = !1,
    dir: a,
    currentTabStopId: o,
    defaultCurrentTabStopId: s,
    onCurrentTabStopIdChange: l,
    onEntryFocus: u,
    preventScrollOnEntryFocus: c = !1,
    ...f
  } = e, d = T.useRef(null), h = G_(t, d), p = WTe(a), [v, g] = FTe({
    prop: o,
    defaultProp: s ?? null,
    onChange: l,
    caller: wp
  }), [m, y] = T.useState(!1), b = VTe(u), w = KB(r), _ = T.useRef(!1), [S, C] = T.useState(0);
  return T.useEffect(() => {
    const A = d.current;
    if (A)
      return A.addEventListener(qb, b), () => A.removeEventListener(qb, b);
  }, [b]), /* @__PURE__ */ x.jsx(
    XTe,
    {
      scope: r,
      orientation: n,
      dir: p,
      loop: i,
      currentTabStopId: v,
      onItemFocus: T.useCallback(
        (A) => g(A),
        [g]
      ),
      onItemShiftTab: T.useCallback(() => y(!0), []),
      onFocusableItemAdd: T.useCallback(
        () => C((A) => A + 1),
        []
      ),
      onFocusableItemRemove: T.useCallback(
        () => C((A) => A - 1),
        []
      ),
      children: /* @__PURE__ */ x.jsx(
        XB.div,
        {
          tabIndex: m || S === 0 ? -1 : 0,
          "data-orientation": n,
          ...f,
          ref: h,
          style: { outline: "none", ...e.style },
          onMouseDown: wc(e.onMouseDown, () => {
            _.current = !0;
          }),
          onFocus: wc(e.onFocus, (A) => {
            const M = !_.current;
            if (A.target === A.currentTarget && M && !m) {
              const D = new CustomEvent(qb, UTe);
              if (A.currentTarget.dispatchEvent(D), !D.defaultPrevented) {
                const N = w().filter((I) => I.focusable), R = N.find((I) => I.active), O = N.find((I) => I.id === v), L = [R, O, ...N].filter(
                  Boolean
                ).map((I) => I.ref.current);
                tF(L, c);
              }
            }
            _.current = !1;
          }),
          onBlur: wc(e.onBlur, () => y(!1))
        }
      )
    }
  );
}), QB = "RovingFocusGroupItem", eF = T.forwardRef(
  (e, t) => {
    const {
      __scopeRovingFocusGroup: r,
      focusable: n = !0,
      active: i = !1,
      tabStopId: a,
      children: o,
      ...s
    } = e, l = zTe(), u = a || l, c = KTe(QB, r), f = c.currentTabStopId === u, d = KB(r), { onFocusableItemAdd: h, onFocusableItemRemove: p, currentTabStopId: v } = c;
    return T.useEffect(() => {
      if (n)
        return h(), () => p();
    }, [n, h, p]), /* @__PURE__ */ x.jsx(
      U_.ItemSlot,
      {
        scope: r,
        id: u,
        focusable: n,
        active: i,
        children: /* @__PURE__ */ x.jsx(
          XB.span,
          {
            tabIndex: f ? 0 : -1,
            "data-orientation": c.orientation,
            ...s,
            ref: t,
            onMouseDown: wc(e.onMouseDown, (g) => {
              n ? c.onItemFocus(u) : g.preventDefault();
            }),
            onFocus: wc(e.onFocus, () => c.onItemFocus(u)),
            onKeyDown: wc(e.onKeyDown, (g) => {
              if (g.key === "Tab" && g.shiftKey) {
                c.onItemShiftTab();
                return;
              }
              if (g.target !== g.currentTarget) return;
              const m = eAe(g, c.orientation, c.dir);
              if (m !== void 0) {
                if (g.metaKey || g.ctrlKey || g.altKey || g.shiftKey) return;
                g.preventDefault();
                let b = d().filter((w) => w.focusable).map((w) => w.ref.current);
                if (m === "last") b.reverse();
                else if (m === "prev" || m === "next") {
                  m === "prev" && b.reverse();
                  const w = b.indexOf(g.currentTarget);
                  b = c.loop ? tAe(b, w + 1) : b.slice(w + 1);
                }
                setTimeout(() => tF(b));
              }
            }),
            children: typeof o == "function" ? o({ isCurrentTabStop: f, hasTabStop: v != null }) : o
          }
        )
      }
    );
  }
);
eF.displayName = QB;
var JTe = {
  ArrowLeft: "prev",
  ArrowUp: "prev",
  ArrowRight: "next",
  ArrowDown: "next",
  PageUp: "first",
  Home: "first",
  PageDown: "last",
  End: "last"
};
function QTe(e, t) {
  return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e;
}
function eAe(e, t, r) {
  const n = QTe(e.key, r);
  if (!(t === "vertical" && ["ArrowLeft", "ArrowRight"].includes(n)) && !(t === "horizontal" && ["ArrowUp", "ArrowDown"].includes(n)))
    return JTe[n];
}
function tF(e, t = !1) {
  const r = document.activeElement;
  for (const n of e)
    if (n === r || (n.focus({ preventScroll: t }), document.activeElement !== r)) return;
}
function tAe(e, t) {
  return e.map((r, n) => e[(t + n) % e.length]);
}
var rAe = JB, nAe = eF, iAe = function(e) {
  if (typeof document > "u")
    return null;
  var t = Array.isArray(e) ? e[0] : e;
  return t.ownerDocument.body;
}, Fu = /* @__PURE__ */ new WeakMap(), Xv = /* @__PURE__ */ new WeakMap(), Kv = {}, Jb = 0, rF = function(e) {
  return e && (e.host || rF(e.parentNode));
}, aAe = function(e, t) {
  return t.map(function(r) {
    if (e.contains(r))
      return r;
    var n = rF(r);
    return n && e.contains(n) ? n : (console.error("aria-hidden", r, "in not contained inside", e, ". Doing nothing"), null);
  }).filter(function(r) {
    return !!r;
  });
}, oAe = function(e, t, r, n) {
  var i = aAe(t, Array.isArray(e) ? e : [e]);
  Kv[r] || (Kv[r] = /* @__PURE__ */ new WeakMap());
  var a = Kv[r], o = [], s = /* @__PURE__ */ new Set(), l = new Set(i), u = function(f) {
    !f || s.has(f) || (s.add(f), u(f.parentNode));
  };
  i.forEach(u);
  var c = function(f) {
    !f || l.has(f) || Array.prototype.forEach.call(f.children, function(d) {
      if (s.has(d))
        c(d);
      else
        try {
          var h = d.getAttribute(n), p = h !== null && h !== "false", v = (Fu.get(d) || 0) + 1, g = (a.get(d) || 0) + 1;
          Fu.set(d, v), a.set(d, g), o.push(d), v === 1 && p && Xv.set(d, !0), g === 1 && d.setAttribute(r, "true"), p || d.setAttribute(n, "true");
        } catch (m) {
          console.error("aria-hidden: cannot operate on ", d, m);
        }
    });
  };
  return c(t), s.clear(), Jb++, function() {
    o.forEach(function(f) {
      var d = Fu.get(f) - 1, h = a.get(f) - 1;
      Fu.set(f, d), a.set(f, h), d || (Xv.has(f) || f.removeAttribute(n), Xv.delete(f)), h || f.removeAttribute(r);
    }), Jb--, Jb || (Fu = /* @__PURE__ */ new WeakMap(), Fu = /* @__PURE__ */ new WeakMap(), Xv = /* @__PURE__ */ new WeakMap(), Kv = {});
  };
}, nF = function(e, t, r) {
  r === void 0 && (r = "data-aria-hidden");
  var n = Array.from(Array.isArray(e) ? e : [e]), i = iAe(e);
  return i ? (n.push.apply(n, Array.from(i.querySelectorAll("[aria-live], script"))), oAe(n, i, r, "aria-hidden")) : function() {
    return null;
  };
}, Zd = "right-scroll-bar-position", Xd = "width-before-scroll-bar", sAe = "with-scroll-bars-hidden", lAe = "--removed-body-scroll-bar-size";
function Qb(e, t) {
  return typeof e == "function" ? e(t) : e && (e.current = t), e;
}
function uAe(e, t) {
  var r = Ze(function() {
    return {
      // value
      value: e,
      // last callback
      callback: t,
      // "memoized" public interface
      facade: {
        get current() {
          return r.value;
        },
        set current(n) {
          var i = r.value;
          i !== n && (r.value = n, r.callback(n, i));
        }
      }
    };
  })[0];
  return r.callback = t, r.facade;
}
var cAe = typeof window < "u" ? T.useLayoutEffect : T.useEffect, TR = /* @__PURE__ */ new WeakMap();
function iF(e, t) {
  var r = uAe(null, function(n) {
    return e.forEach(function(i) {
      return Qb(i, n);
    });
  });
  return cAe(function() {
    var n = TR.get(r);
    if (n) {
      var i = new Set(n), a = new Set(e), o = r.current;
      i.forEach(function(s) {
        a.has(s) || Qb(s, null);
      }), a.forEach(function(s) {
        i.has(s) || Qb(s, o);
      });
    }
    TR.set(r, e);
  }, [e]), r;
}
function fAe(e) {
  return e;
}
function dAe(e, t) {
  t === void 0 && (t = fAe);
  var r = [], n = !1, i = {
    read: function() {
      if (n)
        throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
      return r.length ? r[r.length - 1] : e;
    },
    useMedium: function(a) {
      var o = t(a, n);
      return r.push(o), function() {
        r = r.filter(function(s) {
          return s !== o;
        });
      };
    },
    assignSyncMedium: function(a) {
      for (n = !0; r.length; ) {
        var o = r;
        r = [], o.forEach(a);
      }
      r = {
        push: function(s) {
          return a(s);
        },
        filter: function() {
          return r;
        }
      };
    },
    assignMedium: function(a) {
      n = !0;
      var o = [];
      if (r.length) {
        var s = r;
        r = [], s.forEach(a), o = r;
      }
      var l = function() {
        var c = o;
        o = [], c.forEach(a);
      }, u = function() {
        return Promise.resolve().then(l);
      };
      u(), r = {
        push: function(c) {
          o.push(c), u();
        },
        filter: function(c) {
          return o = o.filter(c), r;
        }
      };
    }
  };
  return i;
}
function aF(e) {
  e === void 0 && (e = {});
  var t = dAe(null);
  return t.options = wr({ async: !0, ssr: !1 }, e), t;
}
var oF = function(e) {
  var t = e.sideCar, r = Cy(e, ["sideCar"]);
  if (!t)
    throw new Error("Sidecar: please provide `sideCar` property to import the right car");
  var n = t.read();
  if (!n)
    throw new Error("Sidecar medium not found");
  return T.createElement(n, wr({}, r));
};
oF.isSideCarExport = !0;
function sF(e, t) {
  return e.useMedium(t), oF;
}
var lF = aF(), e2 = function() {
}, E0 = T.forwardRef(function(e, t) {
  var r = T.useRef(null), n = T.useState({
    onScrollCapture: e2,
    onWheelCapture: e2,
    onTouchMoveCapture: e2
  }), i = n[0], a = n[1], o = e.forwardProps, s = e.children, l = e.className, u = e.removeScrollBar, c = e.enabled, f = e.shards, d = e.sideCar, h = e.noRelative, p = e.noIsolation, v = e.inert, g = e.allowPinchZoom, m = e.as, y = m === void 0 ? "div" : m, b = e.gapMode, w = Cy(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noRelative", "noIsolation", "inert", "allowPinchZoom", "as", "gapMode"]), _ = d, S = iF([r, t]), C = wr(wr({}, w), i);
  return T.createElement(
    T.Fragment,
    null,
    c && T.createElement(_, { sideCar: lF, removeScrollBar: u, shards: f, noRelative: h, noIsolation: p, inert: v, setCallbacks: a, allowPinchZoom: !!g, lockRef: r, gapMode: b }),
    o ? T.cloneElement(T.Children.only(s), wr(wr({}, C), { ref: S })) : T.createElement(y, wr({}, C, { className: l, ref: S }), s)
  );
});
E0.defaultProps = {
  enabled: !0,
  removeScrollBar: !0,
  inert: !1
};
E0.classNames = {
  fullWidth: Xd,
  zeroRight: Zd
};
var hAe = function() {
  if (typeof __webpack_nonce__ < "u")
    return __webpack_nonce__;
};
function pAe() {
  if (!document)
    return null;
  var e = document.createElement("style");
  e.type = "text/css";
  var t = hAe();
  return t && e.setAttribute("nonce", t), e;
}
function vAe(e, t) {
  e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t));
}
function gAe(e) {
  var t = document.head || document.getElementsByTagName("head")[0];
  t.appendChild(e);
}
var mAe = function() {
  var e = 0, t = null;
  return {
    add: function(r) {
      e == 0 && (t = pAe()) && (vAe(t, r), gAe(t)), e++;
    },
    remove: function() {
      e--, !e && t && (t.parentNode && t.parentNode.removeChild(t), t = null);
    }
  };
}, yAe = function() {
  var e = mAe();
  return function(t, r) {
    T.useEffect(function() {
      return e.add(t), function() {
        e.remove();
      };
    }, [t && r]);
  };
}, PA = function() {
  var e = yAe(), t = function(r) {
    var n = r.styles, i = r.dynamic;
    return e(n, i), null;
  };
  return t;
}, xAe = {
  left: 0,
  top: 0,
  right: 0,
  gap: 0
}, t2 = function(e) {
  return parseInt(e || "", 10) || 0;
}, bAe = function(e) {
  var t = window.getComputedStyle(document.body), r = t[e === "padding" ? "paddingLeft" : "marginLeft"], n = t[e === "padding" ? "paddingTop" : "marginTop"], i = t[e === "padding" ? "paddingRight" : "marginRight"];
  return [t2(r), t2(n), t2(i)];
}, wAe = function(e) {
  if (e === void 0 && (e = "margin"), typeof window > "u")
    return xAe;
  var t = bAe(e), r = document.documentElement.clientWidth, n = window.innerWidth;
  return {
    left: t[0],
    top: t[1],
    right: t[2],
    gap: Math.max(0, n - r + t[2] - t[0])
  };
}, _Ae = PA(), _c = "data-scroll-locked", SAe = function(e, t, r, n) {
  var i = e.left, a = e.top, o = e.right, s = e.gap;
  return r === void 0 && (r = "margin"), `
  .`.concat(sAe, ` {
   overflow: hidden `).concat(n, `;
   padding-right: `).concat(s, "px ").concat(n, `;
  }
  body[`).concat(_c, `] {
    overflow: hidden `).concat(n, `;
    overscroll-behavior: contain;
    `).concat([
    t && "position: relative ".concat(n, ";"),
    r === "margin" && `
    padding-left: `.concat(i, `px;
    padding-top: `).concat(a, `px;
    padding-right: `).concat(o, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s, "px ").concat(n, `;
    `),
    r === "padding" && "padding-right: ".concat(s, "px ").concat(n, ";")
  ].filter(Boolean).join(""), `
  }
  
  .`).concat(Zd, ` {
    right: `).concat(s, "px ").concat(n, `;
  }
  
  .`).concat(Xd, ` {
    margin-right: `).concat(s, "px ").concat(n, `;
  }
  
  .`).concat(Zd, " .").concat(Zd, ` {
    right: 0 `).concat(n, `;
  }
  
  .`).concat(Xd, " .").concat(Xd, ` {
    margin-right: 0 `).concat(n, `;
  }
  
  body[`).concat(_c, `] {
    `).concat(lAe, ": ").concat(s, `px;
  }
`);
}, AR = function() {
  var e = parseInt(document.body.getAttribute(_c) || "0", 10);
  return isFinite(e) ? e : 0;
}, CAe = function() {
  T.useEffect(function() {
    return document.body.setAttribute(_c, (AR() + 1).toString()), function() {
      var e = AR() - 1;
      e <= 0 ? document.body.removeAttribute(_c) : document.body.setAttribute(_c, e.toString());
    };
  }, []);
}, uF = function(e) {
  var t = e.noRelative, r = e.noImportant, n = e.gapMode, i = n === void 0 ? "margin" : n;
  CAe();
  var a = T.useMemo(function() {
    return wAe(i);
  }, [i]);
  return T.createElement(_Ae, { styles: SAe(a, !t, i, r ? "" : "!important") });
}, Y_ = !1;
if (typeof window < "u")
  try {
    var qv = Object.defineProperty({}, "passive", {
      get: function() {
        return Y_ = !0, !0;
      }
    });
    window.addEventListener("test", qv, qv), window.removeEventListener("test", qv, qv);
  } catch {
    Y_ = !1;
  }
var $u = Y_ ? { passive: !1 } : !1, TAe = function(e) {
  return e.tagName === "TEXTAREA";
}, cF = function(e, t) {
  if (!(e instanceof Element))
    return !1;
  var r = window.getComputedStyle(e);
  return (
    // not-not-scrollable
    r[t] !== "hidden" && // contains scroll inside self
    !(r.overflowY === r.overflowX && !TAe(e) && r[t] === "visible")
  );
}, AAe = function(e) {
  return cF(e, "overflowY");
}, MAe = function(e) {
  return cF(e, "overflowX");
}, MR = function(e, t) {
  var r = t.ownerDocument, n = t;
  do {
    typeof ShadowRoot < "u" && n instanceof ShadowRoot && (n = n.host);
    var i = fF(e, n);
    if (i) {
      var a = dF(e, n), o = a[1], s = a[2];
      if (o > s)
        return !0;
    }
    n = n.parentNode;
  } while (n && n !== r.body);
  return !1;
}, EAe = function(e) {
  var t = e.scrollTop, r = e.scrollHeight, n = e.clientHeight;
  return [
    t,
    r,
    n
  ];
}, DAe = function(e) {
  var t = e.scrollLeft, r = e.scrollWidth, n = e.clientWidth;
  return [
    t,
    r,
    n
  ];
}, fF = function(e, t) {
  return e === "v" ? AAe(t) : MAe(t);
}, dF = function(e, t) {
  return e === "v" ? EAe(t) : DAe(t);
}, NAe = function(e, t) {
  return e === "h" && t === "rtl" ? -1 : 1;
}, IAe = function(e, t, r, n, i) {
  var a = NAe(e, window.getComputedStyle(t).direction), o = a * n, s = r.target, l = t.contains(s), u = !1, c = o > 0, f = 0, d = 0;
  do {
    if (!s)
      break;
    var h = dF(e, s), p = h[0], v = h[1], g = h[2], m = v - g - a * p;
    (p || m) && fF(e, s) && (f += m, d += p);
    var y = s.parentNode;
    s = y && y.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? y.host : y;
  } while (
    // portaled content
    !l && s !== document.body || // self content
    l && (t.contains(s) || t === s)
  );
  return (c && Math.abs(f) < 1 || !c && Math.abs(d) < 1) && (u = !0), u;
}, Jv = function(e) {
  return "changedTouches" in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0];
}, ER = function(e) {
  return [e.deltaX, e.deltaY];
}, DR = function(e) {
  return e && "current" in e ? e.current : e;
}, LAe = function(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}, RAe = function(e) {
  return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`);
}, PAe = 0, Hu = [];
function kAe(e) {
  var t = T.useRef([]), r = T.useRef([0, 0]), n = T.useRef(), i = T.useState(PAe++)[0], a = T.useState(PA)[0], o = T.useRef(e);
  T.useEffect(function() {
    o.current = e;
  }, [e]), T.useEffect(function() {
    if (e.inert) {
      document.body.classList.add("block-interactivity-".concat(i));
      var v = Nk([e.lockRef.current], (e.shards || []).map(DR), !0).filter(Boolean);
      return v.forEach(function(g) {
        return g.classList.add("allow-interactivity-".concat(i));
      }), function() {
        document.body.classList.remove("block-interactivity-".concat(i)), v.forEach(function(g) {
          return g.classList.remove("allow-interactivity-".concat(i));
        });
      };
    }
  }, [e.inert, e.lockRef.current, e.shards]);
  var s = T.useCallback(function(v, g) {
    if ("touches" in v && v.touches.length === 2 || v.type === "wheel" && v.ctrlKey)
      return !o.current.allowPinchZoom;
    var m = Jv(v), y = r.current, b = "deltaX" in v ? v.deltaX : y[0] - m[0], w = "deltaY" in v ? v.deltaY : y[1] - m[1], _, S = v.target, C = Math.abs(b) > Math.abs(w) ? "h" : "v";
    if ("touches" in v && C === "h" && S.type === "range")
      return !1;
    var A = window.getSelection(), M = A && A.anchorNode, D = M ? M === S || M.contains(S) : !1;
    if (D)
      return !1;
    var N = MR(C, S);
    if (!N)
      return !0;
    if (N ? _ = C : (_ = C === "v" ? "h" : "v", N = MR(C, S)), !N)
      return !1;
    if (!n.current && "changedTouches" in v && (b || w) && (n.current = _), !_)
      return !0;
    var R = n.current || _;
    return IAe(R, g, v, R === "h" ? b : w);
  }, []), l = T.useCallback(function(v) {
    var g = v;
    if (!(!Hu.length || Hu[Hu.length - 1] !== a)) {
      var m = "deltaY" in g ? ER(g) : Jv(g), y = t.current.filter(function(_) {
        return _.name === g.type && (_.target === g.target || g.target === _.shadowParent) && LAe(_.delta, m);
      })[0];
      if (y && y.should) {
        g.cancelable && g.preventDefault();
        return;
      }
      if (!y) {
        var b = (o.current.shards || []).map(DR).filter(Boolean).filter(function(_) {
          return _.contains(g.target);
        }), w = b.length > 0 ? s(g, b[0]) : !o.current.noIsolation;
        w && g.cancelable && g.preventDefault();
      }
    }
  }, []), u = T.useCallback(function(v, g, m, y) {
    var b = { name: v, delta: g, target: m, should: y, shadowParent: OAe(m) };
    t.current.push(b), setTimeout(function() {
      t.current = t.current.filter(function(w) {
        return w !== b;
      });
    }, 1);
  }, []), c = T.useCallback(function(v) {
    r.current = Jv(v), n.current = void 0;
  }, []), f = T.useCallback(function(v) {
    u(v.type, ER(v), v.target, s(v, e.lockRef.current));
  }, []), d = T.useCallback(function(v) {
    u(v.type, Jv(v), v.target, s(v, e.lockRef.current));
  }, []);
  T.useEffect(function() {
    return Hu.push(a), e.setCallbacks({
      onScrollCapture: f,
      onWheelCapture: f,
      onTouchMoveCapture: d
    }), document.addEventListener("wheel", l, $u), document.addEventListener("touchmove", l, $u), document.addEventListener("touchstart", c, $u), function() {
      Hu = Hu.filter(function(v) {
        return v !== a;
      }), document.removeEventListener("wheel", l, $u), document.removeEventListener("touchmove", l, $u), document.removeEventListener("touchstart", c, $u);
    };
  }, []);
  var h = e.removeScrollBar, p = e.inert;
  return T.createElement(
    T.Fragment,
    null,
    p ? T.createElement(a, { styles: RAe(i) }) : null,
    h ? T.createElement(uF, { noRelative: e.noRelative, gapMode: e.gapMode }) : null
  );
}
function OAe(e) {
  for (var t = null; e !== null; )
    e instanceof ShadowRoot && (t = e.host, e = e.host), e = e.parentNode;
  return t;
}
const zAe = sF(lF, kAe);
var hF = T.forwardRef(function(e, t) {
  return T.createElement(E0, wr({}, e, { ref: t, sideCar: zAe }));
});
hF.classNames = E0.classNames;
var Z_ = ["Enter", " "], jAe = ["ArrowDown", "PageUp", "Home"], pF = ["ArrowUp", "PageDown", "End"], VAe = [...jAe, ...pF], BAe = {
  ltr: [...Z_, "ArrowRight"],
  rtl: [...Z_, "ArrowLeft"]
}, FAe = {
  ltr: ["ArrowLeft"],
  rtl: ["ArrowRight"]
}, _p = "Menu", [Bh, $Ae, HAe] = HCe(_p), [ru, vF] = NA(_p, [
  HAe,
  OB,
  qB
]), D0 = OB(), gF = qB(), [GAe, nu] = ru(_p), [WAe, Sp] = ru(_p), mF = (e) => {
  const { __scopeMenu: t, open: r = !1, children: n, dir: i, onOpenChange: a, modal: o = !0 } = e, s = D0(t), [l, u] = T.useState(null), c = T.useRef(!1), f = hs(a), d = WCe(i);
  return T.useEffect(() => {
    const h = () => {
      c.current = !0, document.addEventListener("pointerdown", p, { capture: !0, once: !0 }), document.addEventListener("pointermove", p, { capture: !0, once: !0 });
    }, p = () => c.current = !1;
    return document.addEventListener("keydown", h, { capture: !0 }), () => {
      document.removeEventListener("keydown", h, { capture: !0 }), document.removeEventListener("pointerdown", p, { capture: !0 }), document.removeEventListener("pointermove", p, { capture: !0 });
    };
  }, []), /* @__PURE__ */ x.jsx(yTe, { ...s, children: /* @__PURE__ */ x.jsx(
    GAe,
    {
      scope: t,
      open: r,
      onOpenChange: f,
      content: l,
      onContentChange: u,
      children: /* @__PURE__ */ x.jsx(
        WAe,
        {
          scope: t,
          onClose: T.useCallback(() => f(!1), [f]),
          isUsingKeyboardRef: c,
          dir: d,
          modal: o,
          children: n
        }
      )
    }
  ) });
};
mF.displayName = _p;
var UAe = "MenuAnchor", kA = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e, i = D0(r);
    return /* @__PURE__ */ x.jsx(xTe, { ...i, ...n, ref: t });
  }
);
kA.displayName = UAe;
var OA = "MenuPortal", [YAe, yF] = ru(OA, {
  forceMount: void 0
}), xF = (e) => {
  const { __scopeMenu: t, forceMount: r, children: n, container: i } = e, a = nu(OA, t);
  return /* @__PURE__ */ x.jsx(YAe, { scope: t, forceMount: r, children: /* @__PURE__ */ x.jsx(tu, { present: r || a.open, children: /* @__PURE__ */ x.jsx(WB, { asChild: !0, container: i, children: n }) }) });
};
xF.displayName = OA;
var Jn = "MenuContent", [ZAe, zA] = ru(Jn), bF = T.forwardRef(
  (e, t) => {
    const r = yF(Jn, e.__scopeMenu), { forceMount: n = r.forceMount, ...i } = e, a = nu(Jn, e.__scopeMenu), o = Sp(Jn, e.__scopeMenu);
    return /* @__PURE__ */ x.jsx(Bh.Provider, { scope: e.__scopeMenu, children: /* @__PURE__ */ x.jsx(tu, { present: n || a.open, children: /* @__PURE__ */ x.jsx(Bh.Slot, { scope: e.__scopeMenu, children: o.modal ? /* @__PURE__ */ x.jsx(XAe, { ...i, ref: t }) : /* @__PURE__ */ x.jsx(KAe, { ...i, ref: t }) }) }) });
  }
), XAe = T.forwardRef(
  (e, t) => {
    const r = nu(Jn, e.__scopeMenu), n = T.useRef(null), i = ii(t, n);
    return T.useEffect(() => {
      const a = n.current;
      if (a) return nF(a);
    }, []), /* @__PURE__ */ x.jsx(
      jA,
      {
        ...e,
        ref: i,
        trapFocus: r.open,
        disableOutsidePointerEvents: r.open,
        disableOutsideScroll: !0,
        onFocusOutside: er(
          e.onFocusOutside,
          (a) => a.preventDefault(),
          { checkForDefaultPrevented: !1 }
        ),
        onDismiss: () => r.onOpenChange(!1)
      }
    );
  }
), KAe = T.forwardRef((e, t) => {
  const r = nu(Jn, e.__scopeMenu);
  return /* @__PURE__ */ x.jsx(
    jA,
    {
      ...e,
      ref: t,
      trapFocus: !1,
      disableOutsidePointerEvents: !1,
      disableOutsideScroll: !1,
      onDismiss: () => r.onOpenChange(!1)
    }
  );
}), qAe = /* @__PURE__ */ ty("MenuContent.ScrollLock"), jA = T.forwardRef(
  (e, t) => {
    const {
      __scopeMenu: r,
      loop: n = !1,
      trapFocus: i,
      onOpenAutoFocus: a,
      onCloseAutoFocus: o,
      disableOutsidePointerEvents: s,
      onEntryFocus: l,
      onEscapeKeyDown: u,
      onPointerDownOutside: c,
      onFocusOutside: f,
      onInteractOutside: d,
      onDismiss: h,
      disableOutsideScroll: p,
      ...v
    } = e, g = nu(Jn, r), m = Sp(Jn, r), y = D0(r), b = gF(r), w = $Ae(r), [_, S] = T.useState(null), C = T.useRef(null), A = ii(t, C, g.onContentChange), M = T.useRef(0), D = T.useRef(""), N = T.useRef(0), R = T.useRef(null), O = T.useRef("right"), E = T.useRef(0), L = p ? hF : T.Fragment, I = p ? { as: qAe, allowPinchZoom: !0 } : void 0, P = (z) => {
      var q, J;
      const V = D.current + z, B = w().filter((U) => !U.disabled), F = document.activeElement, H = (q = B.find((U) => U.ref.current === F)) == null ? void 0 : q.textValue, G = B.map((U) => U.textValue), W = uMe(G, V, H), X = (J = B.find((U) => U.textValue === W)) == null ? void 0 : J.ref.current;
      (function U($) {
        D.current = $, window.clearTimeout(M.current), $ !== "" && (M.current = window.setTimeout(() => U(""), 1e3));
      })(V), X && setTimeout(() => X.focus());
    };
    T.useEffect(() => () => window.clearTimeout(M.current), []), tTe();
    const k = T.useCallback((z) => {
      var B, F;
      return O.current === ((B = R.current) == null ? void 0 : B.side) && fMe(z, (F = R.current) == null ? void 0 : F.area);
    }, []);
    return /* @__PURE__ */ x.jsx(
      ZAe,
      {
        scope: r,
        searchRef: D,
        onItemEnter: T.useCallback(
          (z) => {
            k(z) && z.preventDefault();
          },
          [k]
        ),
        onItemLeave: T.useCallback(
          (z) => {
            var V;
            k(z) || ((V = C.current) == null || V.focus(), S(null));
          },
          [k]
        ),
        onTriggerLeave: T.useCallback(
          (z) => {
            k(z) && z.preventDefault();
          },
          [k]
        ),
        pointerGraceTimerRef: N,
        onPointerGraceIntentChange: T.useCallback((z) => {
          R.current = z;
        }, []),
        children: /* @__PURE__ */ x.jsx(L, { ...I, children: /* @__PURE__ */ x.jsx(
          LB,
          {
            asChild: !0,
            trapped: i,
            onMountAutoFocus: er(a, (z) => {
              var V;
              z.preventDefault(), (V = C.current) == null || V.focus({ preventScroll: !0 });
            }),
            onUnmountAutoFocus: o,
            children: /* @__PURE__ */ x.jsx(
              NB,
              {
                asChild: !0,
                disableOutsidePointerEvents: s,
                onEscapeKeyDown: u,
                onPointerDownOutside: c,
                onFocusOutside: f,
                onInteractOutside: d,
                onDismiss: h,
                children: /* @__PURE__ */ x.jsx(
                  rAe,
                  {
                    asChild: !0,
                    ...b,
                    dir: m.dir,
                    orientation: "vertical",
                    loop: n,
                    currentTabStopId: _,
                    onCurrentTabStopIdChange: S,
                    onEntryFocus: er(l, (z) => {
                      m.isUsingKeyboardRef.current || z.preventDefault();
                    }),
                    preventScrollOnEntryFocus: !0,
                    children: /* @__PURE__ */ x.jsx(
                      bTe,
                      {
                        role: "menu",
                        "aria-orientation": "vertical",
                        "data-state": OF(g.open),
                        "data-radix-menu-content": "",
                        dir: m.dir,
                        ...y,
                        ...v,
                        ref: A,
                        style: { outline: "none", ...v.style },
                        onKeyDown: er(v.onKeyDown, (z) => {
                          const B = z.target.closest("[data-radix-menu-content]") === z.currentTarget, F = z.ctrlKey || z.altKey || z.metaKey, H = z.key.length === 1;
                          B && (z.key === "Tab" && z.preventDefault(), !F && H && P(z.key));
                          const G = C.current;
                          if (z.target !== G || !VAe.includes(z.key)) return;
                          z.preventDefault();
                          const X = w().filter((q) => !q.disabled).map((q) => q.ref.current);
                          pF.includes(z.key) && X.reverse(), sMe(X);
                        }),
                        onBlur: er(e.onBlur, (z) => {
                          z.currentTarget.contains(z.target) || (window.clearTimeout(M.current), D.current = "");
                        }),
                        onPointerMove: er(
                          e.onPointerMove,
                          Fh((z) => {
                            const V = z.target, B = E.current !== z.clientX;
                            if (z.currentTarget.contains(V) && B) {
                              const F = z.clientX > E.current ? "right" : "left";
                              O.current = F, E.current = z.clientX;
                            }
                          })
                        )
                      }
                    )
                  }
                )
              }
            )
          }
        ) })
      }
    );
  }
);
bF.displayName = Jn;
var JAe = "MenuGroup", VA = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ x.jsx(ci.div, { role: "group", ...n, ref: t });
  }
);
VA.displayName = JAe;
var QAe = "MenuLabel", wF = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ x.jsx(ci.div, { ...n, ref: t });
  }
);
wF.displayName = QAe;
var ny = "MenuItem", NR = "menu.itemSelect", N0 = T.forwardRef(
  (e, t) => {
    const { disabled: r = !1, onSelect: n, ...i } = e, a = T.useRef(null), o = Sp(ny, e.__scopeMenu), s = zA(ny, e.__scopeMenu), l = ii(t, a), u = T.useRef(!1), c = () => {
      const f = a.current;
      if (!r && f) {
        const d = new CustomEvent(NR, { bubbles: !0, cancelable: !0 });
        f.addEventListener(NR, (h) => n == null ? void 0 : n(h), { once: !0 }), EB(f, d), d.defaultPrevented ? u.current = !1 : o.onClose();
      }
    };
    return /* @__PURE__ */ x.jsx(
      _F,
      {
        ...i,
        ref: l,
        disabled: r,
        onClick: er(e.onClick, c),
        onPointerDown: (f) => {
          var d;
          (d = e.onPointerDown) == null || d.call(e, f), u.current = !0;
        },
        onPointerUp: er(e.onPointerUp, (f) => {
          var d;
          u.current || (d = f.currentTarget) == null || d.click();
        }),
        onKeyDown: er(e.onKeyDown, (f) => {
          const d = s.searchRef.current !== "";
          r || d && f.key === " " || Z_.includes(f.key) && (f.currentTarget.click(), f.preventDefault());
        })
      }
    );
  }
);
N0.displayName = ny;
var _F = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, disabled: n = !1, textValue: i, ...a } = e, o = zA(ny, r), s = gF(r), l = T.useRef(null), u = ii(t, l), [c, f] = T.useState(!1), [d, h] = T.useState("");
    return T.useEffect(() => {
      const p = l.current;
      p && h((p.textContent ?? "").trim());
    }, [a.children]), /* @__PURE__ */ x.jsx(
      Bh.ItemSlot,
      {
        scope: r,
        disabled: n,
        textValue: i ?? d,
        children: /* @__PURE__ */ x.jsx(nAe, { asChild: !0, ...s, focusable: !n, children: /* @__PURE__ */ x.jsx(
          ci.div,
          {
            role: "menuitem",
            "data-highlighted": c ? "" : void 0,
            "aria-disabled": n || void 0,
            "data-disabled": n ? "" : void 0,
            ...a,
            ref: u,
            onPointerMove: er(
              e.onPointerMove,
              Fh((p) => {
                n ? o.onItemLeave(p) : (o.onItemEnter(p), p.defaultPrevented || p.currentTarget.focus({ preventScroll: !0 }));
              })
            ),
            onPointerLeave: er(
              e.onPointerLeave,
              Fh((p) => o.onItemLeave(p))
            ),
            onFocus: er(e.onFocus, () => f(!0)),
            onBlur: er(e.onBlur, () => f(!1))
          }
        ) })
      }
    );
  }
), eMe = "MenuCheckboxItem", SF = T.forwardRef(
  (e, t) => {
    const { checked: r = !1, onCheckedChange: n, ...i } = e;
    return /* @__PURE__ */ x.jsx(EF, { scope: e.__scopeMenu, checked: r, children: /* @__PURE__ */ x.jsx(
      N0,
      {
        role: "menuitemcheckbox",
        "aria-checked": iy(r) ? "mixed" : r,
        ...i,
        ref: t,
        "data-state": FA(r),
        onSelect: er(
          i.onSelect,
          () => n == null ? void 0 : n(iy(r) ? !0 : !r),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
);
SF.displayName = eMe;
var CF = "MenuRadioGroup", [tMe, rMe] = ru(
  CF,
  { value: void 0, onValueChange: () => {
  } }
), TF = T.forwardRef(
  (e, t) => {
    const { value: r, onValueChange: n, ...i } = e, a = hs(n);
    return /* @__PURE__ */ x.jsx(tMe, { scope: e.__scopeMenu, value: r, onValueChange: a, children: /* @__PURE__ */ x.jsx(VA, { ...i, ref: t }) });
  }
);
TF.displayName = CF;
var AF = "MenuRadioItem", MF = T.forwardRef(
  (e, t) => {
    const { value: r, ...n } = e, i = rMe(AF, e.__scopeMenu), a = r === i.value;
    return /* @__PURE__ */ x.jsx(EF, { scope: e.__scopeMenu, checked: a, children: /* @__PURE__ */ x.jsx(
      N0,
      {
        role: "menuitemradio",
        "aria-checked": a,
        ...n,
        ref: t,
        "data-state": FA(a),
        onSelect: er(
          n.onSelect,
          () => {
            var o;
            return (o = i.onValueChange) == null ? void 0 : o.call(i, r);
          },
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
);
MF.displayName = AF;
var BA = "MenuItemIndicator", [EF, nMe] = ru(
  BA,
  { checked: !1 }
), DF = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, forceMount: n, ...i } = e, a = nMe(BA, r);
    return /* @__PURE__ */ x.jsx(
      tu,
      {
        present: n || iy(a.checked) || a.checked === !0,
        children: /* @__PURE__ */ x.jsx(
          ci.span,
          {
            ...i,
            ref: t,
            "data-state": FA(a.checked)
          }
        )
      }
    );
  }
);
DF.displayName = BA;
var iMe = "MenuSeparator", NF = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e;
    return /* @__PURE__ */ x.jsx(
      ci.div,
      {
        role: "separator",
        "aria-orientation": "horizontal",
        ...n,
        ref: t
      }
    );
  }
);
NF.displayName = iMe;
var aMe = "MenuArrow", IF = T.forwardRef(
  (e, t) => {
    const { __scopeMenu: r, ...n } = e, i = D0(r);
    return /* @__PURE__ */ x.jsx(wTe, { ...i, ...n, ref: t });
  }
);
IF.displayName = aMe;
var oMe = "MenuSub", [fLe, LF] = ru(oMe), Md = "MenuSubTrigger", RF = T.forwardRef(
  (e, t) => {
    const r = nu(Md, e.__scopeMenu), n = Sp(Md, e.__scopeMenu), i = LF(Md, e.__scopeMenu), a = zA(Md, e.__scopeMenu), o = T.useRef(null), { pointerGraceTimerRef: s, onPointerGraceIntentChange: l } = a, u = { __scopeMenu: e.__scopeMenu }, c = T.useCallback(() => {
      o.current && window.clearTimeout(o.current), o.current = null;
    }, []);
    return T.useEffect(() => c, [c]), T.useEffect(() => {
      const f = s.current;
      return () => {
        window.clearTimeout(f), l(null);
      };
    }, [s, l]), /* @__PURE__ */ x.jsx(kA, { asChild: !0, ...u, children: /* @__PURE__ */ x.jsx(
      _F,
      {
        id: i.triggerId,
        "aria-haspopup": "menu",
        "aria-expanded": r.open,
        "aria-controls": i.contentId,
        "data-state": OF(r.open),
        ...e,
        ref: IA(t, i.onTriggerChange),
        onClick: (f) => {
          var d;
          (d = e.onClick) == null || d.call(e, f), !(e.disabled || f.defaultPrevented) && (f.currentTarget.focus(), r.open || r.onOpenChange(!0));
        },
        onPointerMove: er(
          e.onPointerMove,
          Fh((f) => {
            a.onItemEnter(f), !f.defaultPrevented && !e.disabled && !r.open && !o.current && (a.onPointerGraceIntentChange(null), o.current = window.setTimeout(() => {
              r.onOpenChange(!0), c();
            }, 100));
          })
        ),
        onPointerLeave: er(
          e.onPointerLeave,
          Fh((f) => {
            var h, p;
            c();
            const d = (h = r.content) == null ? void 0 : h.getBoundingClientRect();
            if (d) {
              const v = (p = r.content) == null ? void 0 : p.dataset.side, g = v === "right", m = g ? -5 : 5, y = d[g ? "left" : "right"], b = d[g ? "right" : "left"];
              a.onPointerGraceIntentChange({
                area: [
                  // Apply a bleed on clientX to ensure that our exit point is
                  // consistently within polygon bounds
                  { x: f.clientX + m, y: f.clientY },
                  { x: y, y: d.top },
                  { x: b, y: d.top },
                  { x: b, y: d.bottom },
                  { x: y, y: d.bottom }
                ],
                side: v
              }), window.clearTimeout(s.current), s.current = window.setTimeout(
                () => a.onPointerGraceIntentChange(null),
                300
              );
            } else {
              if (a.onTriggerLeave(f), f.defaultPrevented) return;
              a.onPointerGraceIntentChange(null);
            }
          })
        ),
        onKeyDown: er(e.onKeyDown, (f) => {
          var h;
          const d = a.searchRef.current !== "";
          e.disabled || d && f.key === " " || BAe[n.dir].includes(f.key) && (r.onOpenChange(!0), (h = r.content) == null || h.focus(), f.preventDefault());
        })
      }
    ) });
  }
);
RF.displayName = Md;
var PF = "MenuSubContent", kF = T.forwardRef(
  (e, t) => {
    const r = yF(Jn, e.__scopeMenu), { forceMount: n = r.forceMount, ...i } = e, a = nu(Jn, e.__scopeMenu), o = Sp(Jn, e.__scopeMenu), s = LF(PF, e.__scopeMenu), l = T.useRef(null), u = ii(t, l);
    return /* @__PURE__ */ x.jsx(Bh.Provider, { scope: e.__scopeMenu, children: /* @__PURE__ */ x.jsx(tu, { present: n || a.open, children: /* @__PURE__ */ x.jsx(Bh.Slot, { scope: e.__scopeMenu, children: /* @__PURE__ */ x.jsx(
      jA,
      {
        id: s.contentId,
        "aria-labelledby": s.triggerId,
        ...i,
        ref: u,
        align: "start",
        side: o.dir === "rtl" ? "left" : "right",
        disableOutsidePointerEvents: !1,
        disableOutsideScroll: !1,
        trapFocus: !1,
        onOpenAutoFocus: (c) => {
          var f;
          o.isUsingKeyboardRef.current && ((f = l.current) == null || f.focus()), c.preventDefault();
        },
        onCloseAutoFocus: (c) => c.preventDefault(),
        onFocusOutside: er(e.onFocusOutside, (c) => {
          c.target !== s.trigger && a.onOpenChange(!1);
        }),
        onEscapeKeyDown: er(e.onEscapeKeyDown, (c) => {
          o.onClose(), c.preventDefault();
        }),
        onKeyDown: er(e.onKeyDown, (c) => {
          var h;
          const f = c.currentTarget.contains(c.target), d = FAe[o.dir].includes(c.key);
          f && d && (a.onOpenChange(!1), (h = s.trigger) == null || h.focus(), c.preventDefault());
        })
      }
    ) }) }) });
  }
);
kF.displayName = PF;
function OF(e) {
  return e ? "open" : "closed";
}
function iy(e) {
  return e === "indeterminate";
}
function FA(e) {
  return iy(e) ? "indeterminate" : e ? "checked" : "unchecked";
}
function sMe(e) {
  const t = document.activeElement;
  for (const r of e)
    if (r === t || (r.focus(), document.activeElement !== t)) return;
}
function lMe(e, t) {
  return e.map((r, n) => e[(t + n) % e.length]);
}
function uMe(e, t, r) {
  const i = t.length > 1 && Array.from(t).every((u) => u === t[0]) ? t[0] : t, a = r ? e.indexOf(r) : -1;
  let o = lMe(e, Math.max(a, 0));
  i.length === 1 && (o = o.filter((u) => u !== r));
  const l = o.find(
    (u) => u.toLowerCase().startsWith(i.toLowerCase())
  );
  return l !== r ? l : void 0;
}
function cMe(e, t) {
  const { x: r, y: n } = e;
  let i = !1;
  for (let a = 0, o = t.length - 1; a < t.length; o = a++) {
    const s = t[a], l = t[o], u = s.x, c = s.y, f = l.x, d = l.y;
    c > n != d > n && r < (f - u) * (n - c) / (d - c) + u && (i = !i);
  }
  return i;
}
function fMe(e, t) {
  if (!t) return !1;
  const r = { x: e.clientX, y: e.clientY };
  return cMe(r, t);
}
function Fh(e) {
  return (t) => t.pointerType === "mouse" ? e(t) : void 0;
}
var dMe = mF, hMe = kA, pMe = xF, vMe = bF, gMe = VA, mMe = wF, yMe = N0, xMe = SF, bMe = TF, wMe = MF, _Me = DF, SMe = NF, CMe = IF, TMe = RF, AMe = kF, MMe = T[" useId ".trim().toString()] || (() => {
}), EMe = 0;
function IR(e) {
  const [t, r] = T.useState(MMe());
  return MB(() => {
    r((n) => n ?? String(EMe++));
  }, [e]), e || (t ? `radix-${t}` : "");
}
var I0 = "DropdownMenu", [DMe] = SCe(
  I0,
  [vF]
), fn = vF(), [NMe, zF] = DMe(I0), jF = (e) => {
  const {
    __scopeDropdownMenu: t,
    children: r,
    dir: n,
    open: i,
    defaultOpen: a,
    onOpenChange: o,
    modal: s = !0
  } = e, l = fn(t), u = T.useRef(null), [c, f] = ACe({
    prop: i,
    defaultProp: a ?? !1,
    onChange: o,
    caller: I0
  });
  return /* @__PURE__ */ x.jsx(
    NMe,
    {
      scope: t,
      triggerId: IR(),
      triggerRef: u,
      contentId: IR(),
      open: c,
      onOpenChange: f,
      onOpenToggle: T.useCallback(() => f((d) => !d), [f]),
      modal: s,
      children: /* @__PURE__ */ x.jsx(dMe, { ...l, open: c, onOpenChange: f, dir: n, modal: s, children: r })
    }
  );
};
jF.displayName = I0;
var VF = "DropdownMenuTrigger", BF = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, disabled: n = !1, ...i } = e, a = zF(VF, r), o = fn(r);
    return /* @__PURE__ */ x.jsx(hMe, { asChild: !0, ...o, children: /* @__PURE__ */ x.jsx(
      OCe.button,
      {
        type: "button",
        id: a.triggerId,
        "aria-haspopup": "menu",
        "aria-expanded": a.open,
        "aria-controls": a.open ? a.contentId : void 0,
        "data-state": a.open ? "open" : "closed",
        "data-disabled": n ? "" : void 0,
        disabled: n,
        ...i,
        ref: AB(t, a.triggerRef),
        onPointerDown: ey(e.onPointerDown, (s) => {
          !n && s.button === 0 && s.ctrlKey === !1 && (a.onOpenToggle(), a.open || s.preventDefault());
        }),
        onKeyDown: ey(e.onKeyDown, (s) => {
          n || (["Enter", " "].includes(s.key) && a.onOpenToggle(), s.key === "ArrowDown" && a.onOpenChange(!0), ["Enter", " ", "ArrowDown"].includes(s.key) && s.preventDefault());
        })
      }
    ) });
  }
);
BF.displayName = VF;
var IMe = "DropdownMenuPortal", FF = (e) => {
  const { __scopeDropdownMenu: t, ...r } = e, n = fn(t);
  return /* @__PURE__ */ x.jsx(pMe, { ...n, ...r });
};
FF.displayName = IMe;
var $F = "DropdownMenuContent", HF = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, i = zF($F, r), a = fn(r), o = T.useRef(!1);
    return /* @__PURE__ */ x.jsx(
      vMe,
      {
        id: i.contentId,
        "aria-labelledby": i.triggerId,
        ...a,
        ...n,
        ref: t,
        onCloseAutoFocus: ey(e.onCloseAutoFocus, (s) => {
          var l;
          o.current || (l = i.triggerRef.current) == null || l.focus(), o.current = !1, s.preventDefault();
        }),
        onInteractOutside: ey(e.onInteractOutside, (s) => {
          const l = s.detail.originalEvent, u = l.button === 0 && l.ctrlKey === !0, c = l.button === 2 || u;
          (!i.modal || c) && (o.current = !0);
        }),
        style: {
          ...e.style,
          "--radix-dropdown-menu-content-transform-origin": "var(--radix-popper-transform-origin)",
          "--radix-dropdown-menu-content-available-width": "var(--radix-popper-available-width)",
          "--radix-dropdown-menu-content-available-height": "var(--radix-popper-available-height)",
          "--radix-dropdown-menu-trigger-width": "var(--radix-popper-anchor-width)",
          "--radix-dropdown-menu-trigger-height": "var(--radix-popper-anchor-height)"
        }
      }
    );
  }
);
HF.displayName = $F;
var LMe = "DropdownMenuGroup", RMe = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
    return /* @__PURE__ */ x.jsx(gMe, { ...i, ...n, ref: t });
  }
);
RMe.displayName = LMe;
var PMe = "DropdownMenuLabel", kMe = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
    return /* @__PURE__ */ x.jsx(mMe, { ...i, ...n, ref: t });
  }
);
kMe.displayName = PMe;
var OMe = "DropdownMenuItem", GF = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
    return /* @__PURE__ */ x.jsx(yMe, { ...i, ...n, ref: t });
  }
);
GF.displayName = OMe;
var zMe = "DropdownMenuCheckboxItem", jMe = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(xMe, { ...i, ...n, ref: t });
});
jMe.displayName = zMe;
var VMe = "DropdownMenuRadioGroup", BMe = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(bMe, { ...i, ...n, ref: t });
});
BMe.displayName = VMe;
var FMe = "DropdownMenuRadioItem", $Me = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(wMe, { ...i, ...n, ref: t });
});
$Me.displayName = FMe;
var HMe = "DropdownMenuItemIndicator", GMe = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(_Me, { ...i, ...n, ref: t });
});
GMe.displayName = HMe;
var WMe = "DropdownMenuSeparator", UMe = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(SMe, { ...i, ...n, ref: t });
});
UMe.displayName = WMe;
var YMe = "DropdownMenuArrow", ZMe = T.forwardRef(
  (e, t) => {
    const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
    return /* @__PURE__ */ x.jsx(CMe, { ...i, ...n, ref: t });
  }
);
ZMe.displayName = YMe;
var XMe = "DropdownMenuSubTrigger", KMe = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(TMe, { ...i, ...n, ref: t });
});
KMe.displayName = XMe;
var qMe = "DropdownMenuSubContent", WF = T.forwardRef((e, t) => {
  const { __scopeDropdownMenu: r, ...n } = e, i = fn(r);
  return /* @__PURE__ */ x.jsx(
    AMe,
    {
      ...i,
      ...n,
      ref: t,
      style: {
        ...e.style,
        "--radix-dropdown-menu-content-transform-origin": "var(--radix-popper-transform-origin)",
        "--radix-dropdown-menu-content-available-width": "var(--radix-popper-available-width)",
        "--radix-dropdown-menu-content-available-height": "var(--radix-popper-available-height)",
        "--radix-dropdown-menu-trigger-width": "var(--radix-popper-anchor-width)",
        "--radix-dropdown-menu-trigger-height": "var(--radix-popper-anchor-height)"
      }
    }
  );
});
WF.displayName = qMe;
var JMe = jF, UF = BF, QMe = FF, YF = HF, eEe = GF, ZF = WF;
function XF({
  ...e
}) {
  return /* @__PURE__ */ x.jsx(JMe, { modal: !1, ...e });
}
function KF({
  ...e
}) {
  return /* @__PURE__ */ x.jsx(QMe, { ...e });
}
const $A = Nt(({ ...e }, t) => /* @__PURE__ */ x.jsx(UF, { ref: t, ...e }));
$A.displayName = UF.displayName;
const qF = eEe, tEe = Nt(({ className: e, portal: t = !0, ...r }, n) => {
  const i = /* @__PURE__ */ x.jsx(
    ZF,
    {
      ref: n,
      className: Fr("tiptap-dropdown-menu", e),
      ...r
    }
  );
  return t ? /* @__PURE__ */ x.jsx(KF, { ...typeof t == "object" ? t : {}, children: i }) : i;
});
tEe.displayName = ZF.displayName;
const HA = Nt(({ className: e, sideOffset: t = 4, portal: r = !1, ...n }, i) => {
  const a = /* @__PURE__ */ x.jsx(
    YF,
    {
      ref: i,
      sideOffset: t,
      onCloseAutoFocus: (o) => o.preventDefault(),
      className: Fr("tiptap-dropdown-menu", e),
      ...n
    }
  );
  return r ? /* @__PURE__ */ x.jsx(KF, { ...typeof r == "object" ? r : {}, children: a }) : a;
});
HA.displayName = YF.displayName;
const Cp = Nt(
  ({ className: e, ...t }, r) => /* @__PURE__ */ x.jsx("div", { ref: r, className: Fr("tiptap-card", e), ...t })
);
Cp.displayName = "Card";
const rEe = Nt(
  ({ className: e, ...t }, r) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: r,
      className: Fr("tiptap-card-header", e),
      ...t
    }
  )
);
rEe.displayName = "CardHeader";
const Tp = Nt(
  ({ className: e, ...t }, r) => /* @__PURE__ */ x.jsx("div", { ref: r, className: Fr("tiptap-card-body", e), ...t })
);
Tp.displayName = "CardBody";
const GA = Nt(({ className: e, orientation: t = "vertical", ...r }, n) => /* @__PURE__ */ x.jsx(
  "div",
  {
    ref: n,
    "data-orientation": t,
    className: Fr("tiptap-card-item-group", e),
    ...r
  }
));
GA.displayName = "CardItemGroup";
const nEe = Nt(
  ({ className: e, ...t }, r) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: r,
      className: Fr("tiptap-card-group-label", e),
      ...t
    }
  )
);
nEe.displayName = "CardGroupLabel";
const iEe = Nt(
  ({ className: e, ...t }, r) => /* @__PURE__ */ x.jsx(
    "div",
    {
      ref: r,
      className: Fr("tiptap-card-footer", e),
      ...t
    }
  )
);
iEe.displayName = "CardFooter";
const JF = Nt(
  ({
    editor: e,
    levels: t = [1, 2, 3, 4, 5, 6],
    hideWhenUnavailable: r = !1,
    portal: n = !1,
    onOpenChange: i,
    ...a
  }, o) => {
    const { editor: s } = Qt(e), [l, u] = Ze(!1), { isVisible: c, isActive: f, canToggle: d, Icon: h } = oEe({
      editor: s,
      levels: t,
      hideWhenUnavailable: r
    }), p = Te(
      (v) => {
        !s || !d || (u(v), i == null || i(v));
      },
      [d, s, i]
    );
    return c ? /* @__PURE__ */ x.jsxs(XF, { modal: !0, open: l, onOpenChange: p, children: [
      /* @__PURE__ */ x.jsx($A, { asChild: !0, children: /* @__PURE__ */ x.jsxs(
        cr,
        {
          type: "button",
          "data-style": "ghost",
          "data-active-state": f ? "on" : "off",
          role: "button",
          tabIndex: -1,
          disabled: !d,
          "data-disabled": !d,
          "aria-label": "Format text as heading",
          "aria-pressed": f,
          tooltip: "Heading",
          ...a,
          ref: o,
          children: [
            /* @__PURE__ */ x.jsx(h, { className: "tiptap-button-icon" }),
            /* @__PURE__ */ x.jsx(EA, { className: "tiptap-button-dropdown-small" })
          ]
        }
      ) }),
      /* @__PURE__ */ x.jsx(HA, { align: "start", portal: n, children: /* @__PURE__ */ x.jsx(Cp, { children: /* @__PURE__ */ x.jsx(Tp, { children: /* @__PURE__ */ x.jsx(Gl, { children: t.map((v) => /* @__PURE__ */ x.jsx(qF, { asChild: !0, children: /* @__PURE__ */ x.jsx(
        gB,
        {
          editor: s,
          level: v,
          text: `Heading ${v}`,
          showTooltip: !1
        }
      ) }, `heading-${v}`)) }) }) }) })
    ] }) : null;
  }
);
JF.displayName = "HeadingDropdownMenu";
const QF = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M6 3C6.55228 3 7 3.44772 7 4V11H17V4C17 3.44772 17.4477 3 18 3C18.5523 3 19 3.44772 19 4V20C19 20.5523 18.5523 21 18 21C17.4477 21 17 20.5523 17 20V13H7V20C7 20.5523 6.55228 21 6 21C5.44772 21 5 20.5523 5 20V4C5 3.44772 5.44772 3 6 3Z",
        fill: "currentColor"
      }
    )
  }
));
QF.displayName = "HeadingIcon";
function aEe(e, t = [1, 2, 3, 4, 5, 6]) {
  if (!(!e || !e.isEditable))
    return t.find((r) => DA(e, r));
}
function oEe(e) {
  const {
    editor: t,
    levels: r = [1, 2, 3, 4, 5, 6],
    hideWhenUnavailable: n = !1
  } = e || {}, { editor: i } = Qt(t), [a, o] = Ze(!0), s = aEe(i, r), l = DA(i), u = Vh(i);
  return Oe(() => {
    if (!i) return;
    const c = () => {
      o(
        TB({ editor: i, hideWhenUnavailable: n, level: r })
      );
    };
    return c(), i.on("selectionUpdate", c), () => {
      i.off("selectionUpdate", c);
    };
  }, [i, n, r]), {
    isVisible: a,
    activeLevel: s,
    isActive: l,
    canToggle: u,
    levels: r,
    label: "Heading",
    Icon: s ? SB[s] : QF
  };
}
function sEe({
  shortcutKeys: e = X_
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: e }) });
}
const e$ = Nt(
  ({
    editor: e,
    text: t,
    hideWhenUnavailable: r = !1,
    onInserted: n,
    showShortcut: i = !1,
    onClick: a,
    icon: o,
    children: s,
    ...l
  }, u) => {
    const { editor: c } = Qt(e), {
      isVisible: f,
      canInsert: d,
      handleImage: h,
      label: p,
      isActive: v,
      shortcutKeys: g,
      Icon: m
    } = AEe({
      editor: c,
      hideWhenUnavailable: r,
      onInserted: n
    }), y = Te(
      (w) => {
        a == null || a(w), !w.defaultPrevented && h();
      },
      [h, a]
    );
    if (!f)
      return null;
    const b = o ?? m;
    return /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": v ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !d,
        "data-disabled": !d,
        "aria-label": p,
        "aria-pressed": v,
        tooltip: p,
        onClick: y,
        ...l,
        ref: u,
        children: s ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(b, { className: "tiptap-button-icon" }),
          t && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: t }),
          i && /* @__PURE__ */ x.jsx(sEe, { shortcutKeys: g })
        ] })
      }
    );
  }
);
e$.displayName = "ImageUploadButton";
const t$ = ["shift", "alt", "meta", "mod", "ctrl", "control"], lEe = {
  esc: "escape",
  return: "enter",
  left: "arrowleft",
  right: "arrowright",
  up: "arrowup",
  down: "arrowdown",
  ShiftLeft: "shift",
  ShiftRight: "shift",
  AltLeft: "alt",
  AltRight: "alt",
  MetaLeft: "meta",
  MetaRight: "meta",
  OSLeft: "meta",
  OSRight: "meta",
  ControlLeft: "ctrl",
  ControlRight: "ctrl"
};
function ts(e) {
  return (lEe[e.trim()] || e.trim()).toLowerCase().replace(/key|digit|numpad/, "");
}
function r$(e) {
  return t$.includes(e);
}
function r2(e, t = ",") {
  return e.toLowerCase().split(t);
}
function n2(e, t = "+", r = ">", n = !1, i) {
  let a = [], o = !1;
  e = e.trim(), e.includes(r) ? (o = !0, a = e.toLocaleLowerCase().split(r).map((u) => ts(u))) : a = e.toLocaleLowerCase().split(t).map((u) => ts(u));
  const s = {
    alt: a.includes("alt"),
    ctrl: a.includes("ctrl") || a.includes("control"),
    shift: a.includes("shift"),
    meta: a.includes("meta"),
    mod: a.includes("mod"),
    useKey: n
  }, l = a.filter((u) => !t$.includes(u));
  return {
    ...s,
    keys: l,
    description: i,
    isSequence: o,
    hotkey: e
  };
}
typeof document < "u" && (document.addEventListener("keydown", (e) => {
  e.code !== void 0 && n$([ts(e.code)]);
}), document.addEventListener("keyup", (e) => {
  e.code !== void 0 && i$([ts(e.code)]);
})), typeof window < "u" && (window.addEventListener("blur", () => {
  Fa.clear();
}), window.addEventListener("contextmenu", () => {
  setTimeout(() => {
    Fa.clear();
  }, 0);
}));
const Fa = /* @__PURE__ */ new Set();
function WA(e) {
  return Array.isArray(e);
}
function uEe(e, t = ",") {
  return (WA(e) ? e : e.split(t)).every((r) => Fa.has(r.trim().toLowerCase()));
}
function n$(e) {
  const t = Array.isArray(e) ? e : [e];
  Fa.has("meta") && Fa.forEach((r) => !r$(r) && Fa.delete(r.toLowerCase())), t.forEach((r) => Fa.add(r.toLowerCase()));
}
function i$(e) {
  const t = Array.isArray(e) ? e : [e];
  e === "meta" ? Fa.clear() : t.forEach((r) => Fa.delete(r.toLowerCase()));
}
function cEe(e, t, r) {
  (typeof r == "function" && r(e, t) || r === !0) && e.preventDefault();
}
function fEe(e, t, r) {
  return typeof r == "function" ? r(e, t) : r === !0 || r === void 0;
}
const dEe = [
  "input",
  "textarea",
  "select",
  "searchbox",
  "slider",
  "spinbutton",
  "menuitem",
  "menuitemcheckbox",
  "menuitemradio",
  "option",
  "radio",
  "textbox"
];
function hEe(e) {
  return a$(e, dEe);
}
function a$(e, t = !1) {
  const { target: r, composed: n } = e;
  let i, a;
  return pEe(r) && n ? (i = e.composedPath()[0] && e.composedPath()[0].tagName, a = e.composedPath()[0] && e.composedPath()[0].role) : (i = r && r.tagName, a = r && r.role), WA(t) ? !!(i && t && t.some((o) => o.toLowerCase() === i.toLowerCase() || o === a)) : !!(i && t && t);
}
function pEe(e) {
  return !!e.tagName && !e.tagName.startsWith("-") && e.tagName.includes("-");
}
function vEe(e, t) {
  return e.length === 0 && t ? (console.warn(
    'A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'
  ), !0) : t ? e.some((r) => t.includes(r)) || e.includes("*") : !0;
}
const gEe = (e, t, r = !1) => {
  const { alt: n, meta: i, mod: a, shift: o, ctrl: s, keys: l, useKey: u } = t, { code: c, key: f, ctrlKey: d, metaKey: h, shiftKey: p, altKey: v } = e, g = ts(c);
  if (u && (l == null ? void 0 : l.length) === 1 && l.includes(f))
    return !0;
  if (!(l != null && l.includes(g)) && !["ctrl", "control", "unknown", "meta", "alt", "shift", "os"].includes(g))
    return !1;
  if (!r) {
    if (n !== v && g !== "alt" || o !== p && g !== "shift")
      return !1;
    if (a) {
      if (!h && !d)
        return !1;
    } else if (i !== h && g !== "meta" && g !== "os" || s !== d && g !== "ctrl" && g !== "control")
      return !1;
  }
  return l && l.length === 1 && l.includes(g) ? !0 : l ? uEe(l) : !l;
}, mEe = Xc(void 0), yEe = () => oo(mEe);
function o$(e, t) {
  return e && t && typeof e == "object" && typeof t == "object" ? Object.keys(e).length === Object.keys(t).length && // @ts-expect-error TS7053
  Object.keys(e).reduce((r, n) => r && o$(e[n], t[n]), !0) : e === t;
}
const xEe = Xc({
  hotkeys: [],
  activeScopes: [],
  // This array has to be empty instead of containing '*' as default, to check if the provider is set or not
  toggleScope: () => {
  },
  enableScope: () => {
  },
  disableScope: () => {
  }
}), bEe = () => oo(xEe);
function wEe(e) {
  const t = Ve(void 0);
  return o$(t.current, e) || (t.current = e), t.current;
}
const LR = (e) => {
  e.stopPropagation(), e.preventDefault(), e.stopImmediatePropagation();
}, _Ee = typeof window < "u" ? Hh : Oe;
function s$(e, t, r, n) {
  const i = Ve(null), a = Ve(!1), o = Array.isArray(r) ? Array.isArray(n) ? void 0 : n : r, s = WA(e) ? e.join(o == null ? void 0 : o.delimiter) : e, l = Array.isArray(r) ? r : Array.isArray(n) ? n : void 0, u = Te(t, l ?? []), c = Ve(u);
  l ? c.current = u : c.current = t;
  const f = wEe(o), { activeScopes: d } = bEe(), h = yEe();
  return _Ee(() => {
    if ((f == null ? void 0 : f.enabled) === !1 || !vEe(d, f == null ? void 0 : f.scopes))
      return;
    let p = [], v;
    const g = (w, _ = !1) => {
      var S;
      if (!(hEe(w) && !a$(w, f == null ? void 0 : f.enableOnFormTags))) {
        if (i.current !== null) {
          const C = i.current.getRootNode();
          if ((C instanceof Document || C instanceof ShadowRoot) && C.activeElement !== i.current && !i.current.contains(C.activeElement)) {
            LR(w);
            return;
          }
        }
        (S = w.target) != null && S.isContentEditable && !(f != null && f.enableOnContentEditable) || r2(s, f == null ? void 0 : f.delimiter).forEach((C) => {
          var M, D, N, R;
          if (C.includes((f == null ? void 0 : f.splitKey) ?? "+") && C.includes((f == null ? void 0 : f.sequenceSplitKey) ?? ">")) {
            console.warn(
              `Hotkey ${C} contains both ${(f == null ? void 0 : f.splitKey) ?? "+"} and ${(f == null ? void 0 : f.sequenceSplitKey) ?? ">"} which is not supported.`
            );
            return;
          }
          const A = n2(
            C,
            f == null ? void 0 : f.splitKey,
            f == null ? void 0 : f.sequenceSplitKey,
            f == null ? void 0 : f.useKey,
            f == null ? void 0 : f.description
          );
          if (A.isSequence) {
            v = setTimeout(() => {
              p = [];
            }, (f == null ? void 0 : f.sequenceTimeoutMs) ?? 1e3);
            const O = A.useKey ? w.key : ts(w.code);
            if (r$(O.toLowerCase()))
              return;
            p.push(O);
            const E = (M = A.keys) == null ? void 0 : M[p.length - 1];
            if (O !== E) {
              p = [], v && clearTimeout(v);
              return;
            }
            p.length === ((D = A.keys) == null ? void 0 : D.length) && (c.current(w, A), v && clearTimeout(v), p = []);
          } else if (gEe(w, A, f == null ? void 0 : f.ignoreModifiers) || (N = A.keys) != null && N.includes("*")) {
            if ((R = f == null ? void 0 : f.ignoreEventWhen) != null && R.call(f, w) || _ && a.current)
              return;
            if (cEe(w, A, f == null ? void 0 : f.preventDefault), !fEe(w, A, f == null ? void 0 : f.enabled)) {
              LR(w);
              return;
            }
            c.current(w, A), _ || (a.current = !0);
          }
        });
      }
    }, m = (w) => {
      w.code !== void 0 && (n$(ts(w.code)), ((f == null ? void 0 : f.keydown) === void 0 && (f == null ? void 0 : f.keyup) !== !0 || f != null && f.keydown) && g(w));
    }, y = (w) => {
      w.code !== void 0 && (i$(ts(w.code)), a.current = !1, f != null && f.keyup && g(w, !0));
    }, b = i.current || (o == null ? void 0 : o.document) || document;
    return b.addEventListener("keyup", y, o == null ? void 0 : o.eventListenerOptions), b.addEventListener("keydown", m, o == null ? void 0 : o.eventListenerOptions), h && r2(s, f == null ? void 0 : f.delimiter).forEach(
      (w) => h.addHotkey(
        n2(
          w,
          f == null ? void 0 : f.splitKey,
          f == null ? void 0 : f.sequenceSplitKey,
          f == null ? void 0 : f.useKey,
          f == null ? void 0 : f.description
        )
      )
    ), () => {
      b.removeEventListener("keyup", y, o == null ? void 0 : o.eventListenerOptions), b.removeEventListener("keydown", m, o == null ? void 0 : o.eventListenerOptions), h && r2(s, f == null ? void 0 : f.delimiter).forEach(
        (w) => h.removeHotkey(
          n2(
            w,
            f == null ? void 0 : f.splitKey,
            f == null ? void 0 : f.sequenceSplitKey,
            f == null ? void 0 : f.useKey,
            f == null ? void 0 : f.description
          )
        )
      ), p = [], v && clearTimeout(v);
    };
  }, [s, f, d]), i;
}
const l$ = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M20 2C20 1.44772 19.5523 1 19 1C18.4477 1 18 1.44772 18 2V4H16C15.4477 4 15 4.44772 15 5C15 5.55228 15.4477 6 16 6H18V8C18 8.55228 18.4477 9 19 9C19.5523 9 20 8.55228 20 8V6H22C22.5523 6 23 5.55228 23 5C23 4.44772 22.5523 4 22 4H20V2ZM5 4C4.73478 4 4.48043 4.10536 4.29289 4.29289C4.10536 4.48043 4 4.73478 4 5V19C4 19.2652 4.10536 19.5196 4.29289 19.7071C4.48043 19.8946 4.73478 20 5 20H5.58579L14.379 11.2068C14.9416 10.6444 15.7045 10.3284 16.5 10.3284C17.2955 10.3284 18.0584 10.6444 18.621 11.2068L20 12.5858V12C20 11.4477 20.4477 11 21 11C21.5523 11 22 11.4477 22 12V14.998C22 14.9994 22 15.0007 22 15.002V19C22 19.7957 21.6839 20.5587 21.1213 21.1213C20.5587 21.6839 19.7957 22 19 22H6.00219C6.00073 22 5.99927 22 5.99781 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H12C12.5523 2 13 2.44772 13 3C13 3.55228 12.5523 4 12 4H5ZM8.41422 20H19C19.2652 20 19.5196 19.8946 19.7071 19.7071C19.8946 19.5196 20 19.2652 20 19V15.4142L17.207 12.6212C17.0195 12.4338 16.7651 12.3284 16.5 12.3284C16.2349 12.3284 15.9806 12.4337 15.7931 12.6211L8.41422 20ZM6.87868 6.87868C7.44129 6.31607 8.20435 6 9 6C9.79565 6 10.5587 6.31607 11.1213 6.87868C11.6839 7.44129 12 8.20435 12 9C12 9.79565 11.6839 10.5587 11.1213 11.1213C10.5587 11.6839 9.79565 12 9 12C8.20435 12 7.44129 11.6839 6.87868 11.1213C6.31607 10.5587 6 9.79565 6 9C6 8.20435 6.31607 7.44129 6.87868 6.87868ZM9 8C8.73478 8 8.48043 8.10536 8.29289 8.29289C8.10536 8.48043 8 8.73478 8 9C8 9.26522 8.10536 9.51957 8.29289 9.70711C8.48043 9.89464 8.73478 10 9 10C9.26522 10 9.51957 9.89464 9.70711 9.70711C9.89464 9.51957 10 9.26522 10 9C10 8.73478 9.89464 8.48043 9.70711 8.29289C9.51957 8.10536 9.26522 8 9 8Z",
        fill: "currentColor"
      }
    )
  }
));
l$.displayName = "ImagePlusIcon";
const X_ = "mod+shift+i";
function UA(e) {
  return !e || !e.isEditable || !Tf(e, "imageUpload") ? !1 : e.can().insertContent({ type: "imageUpload" });
}
function SEe(e) {
  return !e || !e.isEditable ? !1 : e.isActive("imageUpload");
}
function CEe(e) {
  if (!e || !e.isEditable || !UA(e)) return !1;
  try {
    return e.chain().focus().insertContent({
      type: "imageUpload"
    }).run();
  } catch {
    return !1;
  }
}
function TEe(e) {
  const { editor: t, hideWhenUnavailable: r } = e;
  return !t || !t.isEditable || !Tf(t, "imageUpload") ? !1 : r && !t.isActive("code") ? UA(t) : !0;
}
function AEe(e) {
  const {
    editor: t,
    hideWhenUnavailable: r = !1,
    onInserted: n
  } = e || {}, { editor: i } = Qt(t), a = Gh(), [o, s] = Ze(!0), l = UA(i), u = SEe(i);
  Oe(() => {
    if (!i) return;
    const f = () => {
      s(TEe({ editor: i, hideWhenUnavailable: r }));
    };
    return f(), i.on("selectionUpdate", f), () => {
      i.off("selectionUpdate", f);
    };
  }, [i, r]);
  const c = Te(() => {
    if (!i) return !1;
    const f = CEe(i);
    return f && (n == null || n()), f;
  }, [i, n]);
  return s$(
    X_,
    (f) => {
      f.preventDefault(), c();
    },
    {
      enabled: o && l,
      enableOnContentEditable: !a,
      enableOnFormTags: !0
    }
  ), {
    isVisible: o,
    isActive: u,
    handleImage: c,
    canInsert: l,
    label: "Add image",
    shortcutKeys: X_,
    Icon: l$
  };
}
function MEe({
  type: e,
  shortcutKeys: t = f$[e]
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: t }) });
}
const u$ = Nt(
  ({
    editor: e,
    type: t,
    text: r,
    hideWhenUnavailable: n = !1,
    onToggled: i,
    showShortcut: a = !1,
    onClick: o,
    children: s,
    ...l
  }, u) => {
    const { editor: c } = Qt(e), {
      isVisible: f,
      canToggle: d,
      isActive: h,
      handleToggle: p,
      label: v,
      shortcutKeys: g,
      Icon: m
    } = IEe({
      editor: c,
      type: t,
      hideWhenUnavailable: n,
      onToggled: i
    }), y = Te(
      (b) => {
        o == null || o(b), !b.defaultPrevented && p();
      },
      [p, o]
    );
    return f ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": h ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !d,
        "data-disabled": !d,
        "aria-label": v,
        "aria-pressed": h,
        tooltip: v,
        onClick: y,
        ...l,
        ref: u,
        children: s ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(m, { className: "tiptap-button-icon" }),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          a && /* @__PURE__ */ x.jsx(MEe, { type: t, shortcutKeys: g })
        ] })
      }
    ) : null;
  }
);
u$.displayName = "ListButton";
const L0 = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M7 6C7 5.44772 7.44772 5 8 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H8C7.44772 7 7 6.55228 7 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M7 12C7 11.4477 7.44772 11 8 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H8C7.44772 13 7 12.5523 7 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M7 18C7 17.4477 7.44772 17 8 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H8C7.44772 19 7 18.5523 7 18Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 5.44772 2.44772 5 3 5H3.01C3.56228 5 4.01 5.44772 4.01 6C4.01 6.55228 3.56228 7 3.01 7H3C2.44772 7 2 6.55228 2 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 12C2 11.4477 2.44772 11 3 11H3.01C3.56228 11 4.01 11.4477 4.01 12C4.01 12.5523 3.56228 13 3.01 13H3C2.44772 13 2 12.5523 2 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 18C2 17.4477 2.44772 17 3 17H3.01C3.56228 17 4.01 17.4477 4.01 18C4.01 18.5523 3.56228 19 3.01 19H3C2.44772 19 2 18.5523 2 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
L0.displayName = "ListIcon";
const YA = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M9 6C9 5.44772 9.44772 5 10 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H10C9.44772 7 9 6.55228 9 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M9 12C9 11.4477 9.44772 11 10 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H10C9.44772 13 9 12.5523 9 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M9 18C9 17.4477 9.44772 17 10 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H10C9.44772 19 9 18.5523 9 18Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M3 6C3 5.44772 3.44772 5 4 5H5C5.55228 5 6 5.44772 6 6V10C6 10.5523 5.55228 11 5 11C4.44772 11 4 10.5523 4 10V7C3.44772 7 3 6.55228 3 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M3 10C3 9.44772 3.44772 9 4 9H6C6.55228 9 7 9.44772 7 10C7 10.5523 6.55228 11 6 11H4C3.44772 11 3 10.5523 3 10Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M5.82219 13.0431C6.54543 13.4047 6.99997 14.1319 6.99997 15C6.99997 15.5763 6.71806 16.0426 6.48747 16.35C6.31395 16.5814 6.1052 16.8044 5.91309 17H5.99997C6.55226 17 6.99997 17.4477 6.99997 18C6.99997 18.5523 6.55226 19 5.99997 19H3.99997C3.44769 19 2.99997 18.5523 2.99997 18C2.99997 17.4237 3.28189 16.9575 3.51247 16.65C3.74323 16.3424 4.03626 16.0494 4.26965 15.8161C4.27745 15.8083 4.2852 15.8006 4.29287 15.7929C4.55594 15.5298 4.75095 15.3321 4.88748 15.15C4.96287 15.0495 4.99021 14.9922 4.99911 14.9714C4.99535 14.9112 4.9803 14.882 4.9739 14.8715C4.96613 14.8588 4.95382 14.845 4.92776 14.8319C4.87723 14.8067 4.71156 14.7623 4.44719 14.8944C3.95321 15.1414 3.35254 14.9412 3.10555 14.4472C2.85856 13.9533 3.05878 13.3526 3.55276 13.1056C4.28839 12.7378 5.12272 12.6934 5.82219 13.0431Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
YA.displayName = "ListOrderedIcon";
const ZA = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 4.89543 2.89543 4 4 4H8C9.10457 4 10 4.89543 10 6V10C10 11.1046 9.10457 12 8 12H4C2.89543 12 2 11.1046 2 10V6ZM8 6H4V10H8V6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M9.70711 14.2929C10.0976 14.6834 10.0976 15.3166 9.70711 15.7071L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071L2.29289 17.7071C1.90237 17.3166 1.90237 16.6834 2.29289 16.2929C2.68342 15.9024 3.31658 15.9024 3.70711 16.2929L5 17.5858L8.29289 14.2929C8.68342 13.9024 9.31658 13.9024 9.70711 14.2929Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12 6C12 5.44772 12.4477 5 13 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H13C12.4477 7 12 6.55228 12 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12 12C12 11.4477 12.4477 11 13 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H13C12.4477 13 12 12.5523 12 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12 18C12 17.4477 12.4477 17 13 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H13C12.4477 19 12 18.5523 12 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
ZA.displayName = "ListTodoIcon";
const c$ = {
  bulletList: L0,
  orderedList: YA,
  taskList: ZA
}, EEe = {
  bulletList: "Bullet List",
  orderedList: "Ordered List",
  taskList: "Task List"
}, f$ = {
  bulletList: "mod+shift+8",
  orderedList: "mod+shift+7",
  taskList: "mod+shift+9"
};
function R0(e, t, r = !0) {
  if (!e || !e.isEditable || !lo(t, e) || uo(e, ["image"]))
    return !1;
  if (!r)
    switch (t) {
      case "bulletList":
        return e.can().toggleBulletList();
      case "orderedList":
        return e.can().toggleOrderedList();
      case "taskList":
        return e.can().toggleList("taskList", "taskItem");
      default:
        return !1;
    }
  if (!A0(e, [
    "paragraph",
    "heading",
    "bulletList",
    "orderedList",
    "taskList",
    "blockquote",
    "codeBlock"
  ]))
    return !1;
  switch (t) {
    case "bulletList":
      return e.can().toggleBulletList() || e.can().clearNodes();
    case "orderedList":
      return e.can().toggleOrderedList() || e.can().clearNodes();
    case "taskList":
      return e.can().toggleList("taskList", "taskItem") || e.can().clearNodes();
    default:
      return !1;
  }
}
function XA(e, t) {
  if (!e || !e.isEditable) return !1;
  switch (t) {
    case "bulletList":
      return e.isActive("bulletList");
    case "orderedList":
      return e.isActive("orderedList");
    case "taskList":
      return e.isActive("taskList");
    default:
      return !1;
  }
}
function DEe(e, t) {
  var r, n, i;
  if (!e || !e.isEditable || !R0(e, t)) return !1;
  try {
    const a = e.view;
    let o = a.state, s = o.tr;
    if (o.selection.empty || o.selection instanceof Qn) {
      const c = (r = T0({
        editor: e,
        node: o.selection.$anchor.node(1)
      })) == null ? void 0 : r.pos;
      if (!Cf(c)) return !1;
      s = s.setSelection(sa.create(o.doc, c)), a.dispatch(s), o = a.state;
    }
    const l = o.selection;
    let u = e.chain().focus();
    if (l instanceof sa) {
      const c = (n = l.node.firstChild) == null ? void 0 : n.firstChild, f = (i = l.node.lastChild) == null ? void 0 : i.lastChild, d = c ? l.from + c.nodeSize : l.from + 1, h = f ? l.to - f.nodeSize : l.to - 1, p = o.doc.resolve(d), v = o.doc.resolve(h);
      u = u.setTextSelection(Qn.between(p, v)).clearNodes();
    }
    if (e.isActive(t))
      u.liftListItem("listItem").lift("bulletList").lift("orderedList").lift("taskList").run();
    else {
      const f = {
        bulletList: () => u.toggleBulletList(),
        orderedList: () => u.toggleOrderedList(),
        taskList: () => u.toggleList("taskList", "taskItem")
      }[t];
      if (!f) return !1;
      f().run();
    }
    return e.chain().focus().selectTextblockEnd().run(), !0;
  } catch {
    return !1;
  }
}
function NEe(e) {
  const { editor: t, type: r, hideWhenUnavailable: n } = e;
  return !t || !t.isEditable || !lo(r, t) ? !1 : n && !t.isActive("code") ? R0(t, r) : !0;
}
function IEe(e) {
  const {
    editor: t,
    type: r,
    hideWhenUnavailable: n = !1,
    onToggled: i
  } = e, { editor: a } = Qt(t), [o, s] = Ze(!0), l = R0(a, r), u = XA(a, r);
  Oe(() => {
    if (!a) return;
    const f = () => {
      s(NEe({ editor: a, type: r, hideWhenUnavailable: n }));
    };
    return f(), a.on("selectionUpdate", f), () => {
      a.off("selectionUpdate", f);
    };
  }, [a, r, n]);
  const c = Te(() => {
    if (!a) return !1;
    const f = DEe(a, r);
    return f && (i == null || i()), f;
  }, [a, r, i]);
  return {
    isVisible: o,
    isActive: u,
    handleToggle: c,
    canToggle: l,
    label: EEe[r],
    shortcutKeys: f$[r],
    Icon: c$[r]
  };
}
const LEe = [
  {
    label: "Bullet List",
    type: "bulletList",
    icon: L0
  },
  {
    label: "Ordered List",
    type: "orderedList",
    icon: YA
  },
  {
    label: "Task List",
    type: "taskList",
    icon: ZA
  }
];
function REe(e, t) {
  return !e || !e.isEditable ? !1 : t.some((r) => R0(e, r));
}
function PEe(e, t) {
  return !e || !e.isEditable ? !1 : t.some((r) => XA(e, r));
}
function kEe(e) {
  return LEe.filter(
    (t) => !t.type || e.includes(t.type)
  );
}
function OEe(e) {
  const { editor: t, hideWhenUnavailable: r, listInSchema: n, canToggleAny: i } = e;
  return !n || !t ? !1 : r && !t.isActive("code") ? i : !0;
}
function zEe(e, t) {
  if (!(!e || !e.isEditable))
    return t.find((r) => XA(e, r));
}
function jEe(e) {
  const {
    editor: t,
    types: r = ["bulletList", "orderedList", "taskList"],
    hideWhenUnavailable: n = !1
  } = e || {}, { editor: i } = Qt(t), [a, o] = Ze(!0), s = r.some((h) => lo(h, i)), l = Gt(() => kEe(r), [r]), u = REe(i, r), c = PEe(i, r), f = zEe(i, r), d = l.find((h) => h.type === f);
  return Oe(() => {
    if (!i) return;
    const h = () => {
      o(
        OEe({
          editor: i,
          hideWhenUnavailable: n,
          listInSchema: s,
          canToggleAny: u
        })
      );
    };
    return h(), i.on("selectionUpdate", h), () => {
      i.off("selectionUpdate", h);
    };
  }, [u, i, n, s, r]), {
    isVisible: a,
    activeType: f,
    isActive: c,
    canToggle: u,
    types: r,
    filteredLists: l,
    label: "List",
    Icon: d ? c$[d.type] : L0
  };
}
function VEe({
  editor: e,
  types: t = ["bulletList", "orderedList", "taskList"],
  hideWhenUnavailable: r = !1,
  onOpenChange: n,
  portal: i = !1,
  ...a
}) {
  const { editor: o } = Qt(e), [s, l] = Ze(!1), { filteredLists: u, canToggle: c, isActive: f, isVisible: d, Icon: h } = jEe({
    editor: o,
    types: t,
    hideWhenUnavailable: r
  }), p = Te(
    (v) => {
      l(v), n == null || n(v);
    },
    [n]
  );
  return d ? /* @__PURE__ */ x.jsxs(XF, { open: s, onOpenChange: p, children: [
    /* @__PURE__ */ x.jsx($A, { asChild: !0, children: /* @__PURE__ */ x.jsxs(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": f ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !c,
        "data-disabled": !c,
        "aria-label": "List options",
        tooltip: "List",
        ...a,
        children: [
          /* @__PURE__ */ x.jsx(h, { className: "tiptap-button-icon" }),
          /* @__PURE__ */ x.jsx(EA, { className: "tiptap-button-dropdown-small" })
        ]
      }
    ) }),
    /* @__PURE__ */ x.jsx(HA, { align: "start", portal: i, children: /* @__PURE__ */ x.jsx(Cp, { children: /* @__PURE__ */ x.jsx(Tp, { children: /* @__PURE__ */ x.jsx(Gl, { children: u.map((v) => /* @__PURE__ */ x.jsx(qF, { asChild: !0, children: /* @__PURE__ */ x.jsx(
      u$,
      {
        editor: o,
        type: v.type,
        text: v.label,
        showTooltip: !1
      }
    ) }, v.type)) }) }) }) })
  ] }) : null;
}
function BEe({
  shortcutKeys: e = p$
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: e }) });
}
const d$ = Nt(
  ({
    editor: e,
    text: t,
    hideWhenUnavailable: r = !1,
    onToggled: n,
    showShortcut: i = !1,
    onClick: a,
    children: o,
    ...s
  }, l) => {
    const { editor: u } = Qt(e), {
      isVisible: c,
      canToggle: f,
      isActive: d,
      handleToggle: h,
      label: p,
      shortcutKeys: v,
      Icon: g
    } = HEe({
      editor: u,
      hideWhenUnavailable: r,
      onToggled: n
    }), m = Te(
      (y) => {
        a == null || a(y), !y.defaultPrevented && h();
      },
      [h, a]
    );
    return c ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": d ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !f,
        "data-disabled": !f,
        "aria-label": p,
        "aria-pressed": d,
        tooltip: "Blockquote",
        onClick: m,
        ...s,
        ref: l,
        children: o ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(g, { className: "tiptap-button-icon" }),
          t && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: t }),
          i && /* @__PURE__ */ x.jsx(BEe, { shortcutKeys: v })
        ] })
      }
    ) : null;
  }
);
d$.displayName = "BlockquoteButton";
const h$ = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M8 6C8 5.44772 8.44772 5 9 5H16C16.5523 5 17 5.44772 17 6C17 6.55228 16.5523 7 16 7H9C8.44772 7 8 6.55228 8 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M4 3C4.55228 3 5 3.44772 5 4L5 20C5 20.5523 4.55229 21 4 21C3.44772 21 3 20.5523 3 20L3 4C3 3.44772 3.44772 3 4 3Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M8 12C8 11.4477 8.44772 11 9 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H9C8.44772 13 8 12.5523 8 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M8 18C8 17.4477 8.44772 17 9 17H16C16.5523 17 17 17.4477 17 18C17 18.5523 16.5523 19 16 19H9C8.44772 19 8 18.5523 8 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
h$.displayName = "BlockquoteIcon";
const p$ = "mod+shift+b";
function KA(e, t = !0) {
  return !e || !e.isEditable || !lo("blockquote", e) || uo(e, ["image"]) ? !1 : t ? A0(e, [
    "paragraph",
    "heading",
    "bulletList",
    "orderedList",
    "taskList",
    "blockquote",
    "codeBlock"
  ]) ? e.can().toggleWrap("blockquote") || e.can().clearNodes() : !1 : e.can().toggleWrap("blockquote");
}
function FEe(e) {
  var t, r, n;
  if (!e || !e.isEditable || !KA(e)) return !1;
  try {
    const i = e.view;
    let a = i.state, o = a.tr;
    if (a.selection.empty || a.selection instanceof Qn) {
      const c = (t = T0({
        editor: e,
        node: a.selection.$anchor.node(1)
      })) == null ? void 0 : t.pos;
      if (!Cf(c)) return !1;
      o = o.setSelection(sa.create(a.doc, c)), i.dispatch(o), a = i.state;
    }
    const s = a.selection;
    let l = e.chain().focus();
    if (s instanceof sa) {
      const c = (r = s.node.firstChild) == null ? void 0 : r.firstChild, f = (n = s.node.lastChild) == null ? void 0 : n.lastChild, d = c ? s.from + c.nodeSize : s.from + 1, h = f ? s.to - f.nodeSize : s.to - 1, p = a.doc.resolve(d), v = a.doc.resolve(h);
      l = l.setTextSelection(Qn.between(p, v)).clearNodes();
    }
    return (e.isActive("blockquote") ? l.lift("blockquote") : l.wrapIn("blockquote")).run(), e.chain().focus().selectTextblockEnd().run(), !0;
  } catch {
    return !1;
  }
}
function $Ee(e) {
  const { editor: t, hideWhenUnavailable: r } = e;
  return !t || !t.isEditable || !lo("blockquote", t) ? !1 : r && !t.isActive("code") ? KA(t) : !0;
}
function HEe(e) {
  const {
    editor: t,
    hideWhenUnavailable: r = !1,
    onToggled: n
  } = e || {}, { editor: i } = Qt(t), [a, o] = Ze(!0), s = KA(i), l = (i == null ? void 0 : i.isActive("blockquote")) || !1;
  Oe(() => {
    if (!i) return;
    const c = () => {
      o($Ee({ editor: i, hideWhenUnavailable: r }));
    };
    return c(), i.on("selectionUpdate", c), () => {
      i.off("selectionUpdate", c);
    };
  }, [i, r]);
  const u = Te(() => {
    if (!i) return !1;
    const c = FEe(i);
    return c && (n == null || n()), c;
  }, [i, n]);
  return {
    isVisible: a,
    isActive: l,
    handleToggle: u,
    canToggle: s,
    label: "Blockquote",
    shortcutKeys: p$,
    Icon: h$
  };
}
function GEe({
  shortcutKeys: e = m$
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: e }) });
}
const v$ = Nt(
  ({
    editor: e,
    text: t,
    hideWhenUnavailable: r = !1,
    onToggled: n,
    showShortcut: i = !1,
    onClick: a,
    children: o,
    ...s
  }, l) => {
    const { editor: u } = Qt(e), {
      isVisible: c,
      canToggle: f,
      isActive: d,
      handleToggle: h,
      label: p,
      shortcutKeys: v,
      Icon: g
    } = YEe({
      editor: u,
      hideWhenUnavailable: r,
      onToggled: n
    }), m = Te(
      (y) => {
        a == null || a(y), !y.defaultPrevented && h();
      },
      [h, a]
    );
    return c ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": d ? "on" : "off",
        role: "button",
        disabled: !f,
        "data-disabled": !f,
        tabIndex: -1,
        "aria-label": p,
        "aria-pressed": d,
        tooltip: "Code Block",
        onClick: m,
        ...s,
        ref: l,
        children: o ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(g, { className: "tiptap-button-icon" }),
          t && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: t }),
          i && /* @__PURE__ */ x.jsx(GEe, { shortcutKeys: v })
        ] })
      }
    ) : null;
  }
);
v$.displayName = "CodeBlockButton";
const g$ = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M6.70711 2.29289C7.09763 2.68342 7.09763 3.31658 6.70711 3.70711L4.41421 6L6.70711 8.29289C7.09763 8.68342 7.09763 9.31658 6.70711 9.70711C6.31658 10.0976 5.68342 10.0976 5.29289 9.70711L2.29289 6.70711C1.90237 6.31658 1.90237 5.68342 2.29289 5.29289L5.29289 2.29289C5.68342 1.90237 6.31658 1.90237 6.70711 2.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M10.2929 2.29289C10.6834 1.90237 11.3166 1.90237 11.7071 2.29289L14.7071 5.29289C15.0976 5.68342 15.0976 6.31658 14.7071 6.70711L11.7071 9.70711C11.3166 10.0976 10.6834 10.0976 10.2929 9.70711C9.90237 9.31658 9.90237 8.68342 10.2929 8.29289L12.5858 6L10.2929 3.70711C9.90237 3.31658 9.90237 2.68342 10.2929 2.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M17 4C17 3.44772 17.4477 3 18 3H19C20.6569 3 22 4.34315 22 6V18C22 19.6569 20.6569 21 19 21H5C3.34315 21 2 19.6569 2 18V12C2 11.4477 2.44772 11 3 11C3.55228 11 4 11.4477 4 12V18C4 18.5523 4.44772 19 5 19H19C19.5523 19 20 18.5523 20 18V6C20 5.44772 19.5523 5 19 5H18C17.4477 5 17 4.55228 17 4Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
g$.displayName = "CodeBlockIcon";
const m$ = "mod+alt+c";
function qA(e, t = !0) {
  return !e || !e.isEditable || !lo("codeBlock", e) || uo(e, ["image"]) ? !1 : t ? A0(e, [
    "paragraph",
    "heading",
    "bulletList",
    "orderedList",
    "taskList",
    "blockquote",
    "codeBlock"
  ]) ? e.can().toggleNode("codeBlock", "paragraph") || e.can().clearNodes() : !1 : e.can().toggleNode("codeBlock", "paragraph");
}
function WEe(e) {
  var t, r, n;
  if (!e || !e.isEditable || !qA(e)) return !1;
  try {
    const i = e.view;
    let a = i.state, o = a.tr;
    if (a.selection.empty || a.selection instanceof Qn) {
      const c = (t = T0({
        editor: e,
        node: a.selection.$anchor.node(1)
      })) == null ? void 0 : t.pos;
      if (!Cf(c)) return !1;
      o = o.setSelection(sa.create(a.doc, c)), i.dispatch(o), a = i.state;
    }
    const s = a.selection;
    let l = e.chain().focus();
    if (s instanceof sa) {
      const c = (r = s.node.firstChild) == null ? void 0 : r.firstChild, f = (n = s.node.lastChild) == null ? void 0 : n.lastChild, d = c ? s.from + c.nodeSize : s.from + 1, h = f ? s.to - f.nodeSize : s.to - 1, p = a.doc.resolve(d), v = a.doc.resolve(h);
      l = l.setTextSelection(Qn.between(p, v)).clearNodes();
    }
    return (e.isActive("codeBlock") ? l.setNode("paragraph") : l.toggleNode("codeBlock", "paragraph")).run(), e.chain().focus().selectTextblockEnd().run(), !0;
  } catch {
    return !1;
  }
}
function UEe(e) {
  const { editor: t, hideWhenUnavailable: r } = e;
  return !t || !t.isEditable || !lo("codeBlock", t) ? !1 : r && !t.isActive("code") ? qA(t) : !0;
}
function YEe(e) {
  const {
    editor: t,
    hideWhenUnavailable: r = !1,
    onToggled: n
  } = e || {}, { editor: i } = Qt(t), [a, o] = Ze(!0), s = qA(i), l = (i == null ? void 0 : i.isActive("codeBlock")) || !1;
  Oe(() => {
    if (!i) return;
    const c = () => {
      o(UEe({ editor: i, hideWhenUnavailable: r }));
    };
    return c(), i.on("selectionUpdate", c), () => {
      i.off("selectionUpdate", c);
    };
  }, [i, r]);
  const u = Te(() => {
    if (!i) return !1;
    const c = WEe(i);
    return c && (n == null || n()), c;
  }, [i, n]);
  return {
    isVisible: a,
    isActive: l,
    handleToggle: u,
    canToggle: s,
    label: "Code Block",
    shortcutKeys: m$,
    Icon: g$
  };
}
const y$ = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M4.43471 4.01458C4.34773 4.06032 4.26607 4.11977 4.19292 4.19292C4.11977 4.26607 4.06032 4.34773 4.01458 4.43471C2.14611 6.40628 1 9.0693 1 12C1 18.0751 5.92487 23 12 23C14.9306 23 17.5936 21.854 19.5651 19.9856C19.6522 19.9398 19.7339 19.8803 19.8071 19.8071C19.8803 19.7339 19.9398 19.6522 19.9856 19.5651C21.854 17.5936 23 14.9306 23 12C23 5.92487 18.0751 1 12 1C9.0693 1 6.40628 2.14611 4.43471 4.01458ZM6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM17.6177 19.0319C16.078 20.2635 14.125 21 12 21C7.02944 21 3 16.9706 3 12C3 9.87499 3.73647 7.92199 4.9681 6.38231L17.6177 19.0319Z",
        fill: "currentColor"
      }
    )
  }
));
y$.displayName = "BanIcon";
const P0 = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M14.7072 4.70711C15.0977 4.31658 15.0977 3.68342 14.7072 3.29289C14.3167 2.90237 13.6835 2.90237 13.293 3.29289L8.69294 7.89286L8.68594 7.9C8.13626 8.46079 7.82837 9.21474 7.82837 10C7.82837 10.2306 7.85491 10.4584 7.90631 10.6795L2.29289 16.2929C2.10536 16.4804 2 16.7348 2 17V20C2 20.5523 2.44772 21 3 21H12C12.2652 21 12.5196 20.8946 12.7071 20.7071L15.3205 18.0937C15.5416 18.1452 15.7695 18.1717 16.0001 18.1717C16.7853 18.1717 17.5393 17.8639 18.1001 17.3142L22.7072 12.7071C23.0977 12.3166 23.0977 11.6834 22.7072 11.2929C22.3167 10.9024 21.6835 10.9024 21.293 11.2929L16.6971 15.8887C16.5105 16.0702 16.2605 16.1717 16.0001 16.1717C15.7397 16.1717 15.4897 16.0702 15.303 15.8887L10.1113 10.697C9.92992 10.5104 9.82837 10.2604 9.82837 10C9.82837 9.73963 9.92992 9.48958 10.1113 9.30297L14.7072 4.70711ZM13.5858 17L9.00004 12.4142L4 17.4142V19H11.5858L13.5858 17Z",
        fill: "currentColor"
      }
    )
  }
));
P0.displayName = "HighlighterIcon";
function rs(e, t, { checkForDefaultPrevented: r = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), r === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function RR(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function x$(...e) {
  return (t) => {
    let r = !1;
    const n = e.map((i) => {
      const a = RR(i, t);
      return !r && typeof a == "function" && (r = !0), a;
    });
    if (r)
      return () => {
        for (let i = 0; i < n.length; i++) {
          const a = n[i];
          typeof a == "function" ? a() : RR(e[i], null);
        }
      };
  };
}
function iu(...e) {
  return T.useCallback(x$(...e), e);
}
function b$(e, t = []) {
  let r = [];
  function n(a, o) {
    const s = T.createContext(o), l = r.length;
    r = [...r, o];
    const u = (f) => {
      var m;
      const { scope: d, children: h, ...p } = f, v = ((m = d == null ? void 0 : d[e]) == null ? void 0 : m[l]) || s, g = T.useMemo(() => p, Object.values(p));
      return /* @__PURE__ */ x.jsx(v.Provider, { value: g, children: h });
    };
    u.displayName = a + "Provider";
    function c(f, d) {
      var v;
      const h = ((v = d == null ? void 0 : d[e]) == null ? void 0 : v[l]) || s, p = T.useContext(h);
      if (p) return p;
      if (o !== void 0) return o;
      throw new Error(`\`${f}\` must be used within \`${a}\``);
    }
    return [u, c];
  }
  const i = () => {
    const a = r.map((o) => T.createContext(o));
    return function(s) {
      const l = (s == null ? void 0 : s[e]) || a;
      return T.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: l } }),
        [s, l]
      );
    };
  };
  return i.scopeName = e, [n, ZEe(i, ...t)];
}
function ZEe(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const r = () => {
    const n = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(a) {
      const o = n.reduce((s, { useScope: l, scopeName: u }) => {
        const f = l(a)[`__scope${u}`];
        return { ...s, ...f };
      }, {});
      return T.useMemo(() => ({ [`__scope${t.scopeName}`]: o }), [o]);
    };
  };
  return r.scopeName = t.scopeName, r;
}
// @__NO_SIDE_EFFECTS__
function w$(e) {
  const t = /* @__PURE__ */ XEe(e), r = T.forwardRef((n, i) => {
    const { children: a, ...o } = n, s = T.Children.toArray(a), l = s.find(qEe);
    if (l) {
      const u = l.props.children, c = s.map((f) => f === l ? T.Children.count(u) > 1 ? T.Children.only(null) : T.isValidElement(u) ? u.props.children : null : f);
      return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: T.isValidElement(u) ? T.cloneElement(u, void 0, c) : null });
    }
    return /* @__PURE__ */ x.jsx(t, { ...o, ref: i, children: a });
  });
  return r.displayName = `${e}.Slot`, r;
}
// @__NO_SIDE_EFFECTS__
function XEe(e) {
  const t = T.forwardRef((r, n) => {
    const { children: i, ...a } = r;
    if (T.isValidElement(i)) {
      const o = QEe(i), s = JEe(a, i.props);
      return i.type !== T.Fragment && (s.ref = n ? x$(n, o) : o), T.cloneElement(i, s);
    }
    return T.Children.count(i) > 1 ? T.Children.only(null) : null;
  });
  return t.displayName = `${e}.SlotClone`, t;
}
var KEe = Symbol("radix.slottable");
function qEe(e) {
  return T.isValidElement(e) && typeof e.type == "function" && "__radixId" in e.type && e.type.__radixId === KEe;
}
function JEe(e, t) {
  const r = { ...t };
  for (const n in t) {
    const i = e[n], a = t[n];
    /^on[A-Z]/.test(n) ? i && a ? r[n] = (...s) => {
      const l = a(...s);
      return i(...s), l;
    } : i && (r[n] = i) : n === "style" ? r[n] = { ...i, ...a } : n === "className" && (r[n] = [i, a].filter(Boolean).join(" "));
  }
  return { ...e, ...r };
}
function QEe(e) {
  var n, i;
  let t = (n = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : n.get, r = t && "isReactWarning" in t && t.isReactWarning;
  return r ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, r = t && "isReactWarning" in t && t.isReactWarning, r ? e.props.ref : e.props.ref || e.ref);
}
var eDe = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "select",
  "span",
  "svg",
  "ul"
], co = eDe.reduce((e, t) => {
  const r = /* @__PURE__ */ w$(`Primitive.${t}`), n = T.forwardRef((i, a) => {
    const { asChild: o, ...s } = i, l = o ? r : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ x.jsx(l, { ...s, ref: a });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function tDe(e, t) {
  e && dy.flushSync(() => e.dispatchEvent(t));
}
function Gc(e) {
  const t = T.useRef(e);
  return T.useEffect(() => {
    t.current = e;
  }), T.useMemo(() => (...r) => {
    var n;
    return (n = t.current) == null ? void 0 : n.call(t, ...r);
  }, []);
}
function rDe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = Gc(e);
  T.useEffect(() => {
    const n = (i) => {
      i.key === "Escape" && r(i);
    };
    return t.addEventListener("keydown", n, { capture: !0 }), () => t.removeEventListener("keydown", n, { capture: !0 });
  }, [r, t]);
}
var nDe = "DismissableLayer", K_ = "dismissableLayer.update", iDe = "dismissableLayer.pointerDownOutside", aDe = "dismissableLayer.focusOutside", PR, _$ = T.createContext({
  layers: /* @__PURE__ */ new Set(),
  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),
  branches: /* @__PURE__ */ new Set()
}), S$ = T.forwardRef(
  (e, t) => {
    const {
      disableOutsidePointerEvents: r = !1,
      onEscapeKeyDown: n,
      onPointerDownOutside: i,
      onFocusOutside: a,
      onInteractOutside: o,
      onDismiss: s,
      ...l
    } = e, u = T.useContext(_$), [c, f] = T.useState(null), d = (c == null ? void 0 : c.ownerDocument) ?? (globalThis == null ? void 0 : globalThis.document), [, h] = T.useState({}), p = iu(t, (C) => f(C)), v = Array.from(u.layers), [g] = [...u.layersWithOutsidePointerEventsDisabled].slice(-1), m = v.indexOf(g), y = c ? v.indexOf(c) : -1, b = u.layersWithOutsidePointerEventsDisabled.size > 0, w = y >= m, _ = lDe((C) => {
      const A = C.target, M = [...u.branches].some((D) => D.contains(A));
      !w || M || (i == null || i(C), o == null || o(C), C.defaultPrevented || s == null || s());
    }, d), S = uDe((C) => {
      const A = C.target;
      [...u.branches].some((D) => D.contains(A)) || (a == null || a(C), o == null || o(C), C.defaultPrevented || s == null || s());
    }, d);
    return rDe((C) => {
      y === u.layers.size - 1 && (n == null || n(C), !C.defaultPrevented && s && (C.preventDefault(), s()));
    }, d), T.useEffect(() => {
      if (c)
        return r && (u.layersWithOutsidePointerEventsDisabled.size === 0 && (PR = d.body.style.pointerEvents, d.body.style.pointerEvents = "none"), u.layersWithOutsidePointerEventsDisabled.add(c)), u.layers.add(c), kR(), () => {
          r && u.layersWithOutsidePointerEventsDisabled.size === 1 && (d.body.style.pointerEvents = PR);
        };
    }, [c, d, r, u]), T.useEffect(() => () => {
      c && (u.layers.delete(c), u.layersWithOutsidePointerEventsDisabled.delete(c), kR());
    }, [c, u]), T.useEffect(() => {
      const C = () => h({});
      return document.addEventListener(K_, C), () => document.removeEventListener(K_, C);
    }, []), /* @__PURE__ */ x.jsx(
      co.div,
      {
        ...l,
        ref: p,
        style: {
          pointerEvents: b ? w ? "auto" : "none" : void 0,
          ...e.style
        },
        onFocusCapture: rs(e.onFocusCapture, S.onFocusCapture),
        onBlurCapture: rs(e.onBlurCapture, S.onBlurCapture),
        onPointerDownCapture: rs(
          e.onPointerDownCapture,
          _.onPointerDownCapture
        )
      }
    );
  }
);
S$.displayName = nDe;
var oDe = "DismissableLayerBranch", sDe = T.forwardRef((e, t) => {
  const r = T.useContext(_$), n = T.useRef(null), i = iu(t, n);
  return T.useEffect(() => {
    const a = n.current;
    if (a)
      return r.branches.add(a), () => {
        r.branches.delete(a);
      };
  }, [r.branches]), /* @__PURE__ */ x.jsx(co.div, { ...e, ref: i });
});
sDe.displayName = oDe;
function lDe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = Gc(e), n = T.useRef(!1), i = T.useRef(() => {
  });
  return T.useEffect(() => {
    const a = (s) => {
      if (s.target && !n.current) {
        let l = function() {
          C$(
            iDe,
            r,
            u,
            { discrete: !0 }
          );
        };
        const u = { originalEvent: s };
        s.pointerType === "touch" ? (t.removeEventListener("click", i.current), i.current = l, t.addEventListener("click", i.current, { once: !0 })) : l();
      } else
        t.removeEventListener("click", i.current);
      n.current = !1;
    }, o = window.setTimeout(() => {
      t.addEventListener("pointerdown", a);
    }, 0);
    return () => {
      window.clearTimeout(o), t.removeEventListener("pointerdown", a), t.removeEventListener("click", i.current);
    };
  }, [t, r]), {
    // ensures we check React component tree (not just DOM tree)
    onPointerDownCapture: () => n.current = !0
  };
}
function uDe(e, t = globalThis == null ? void 0 : globalThis.document) {
  const r = Gc(e), n = T.useRef(!1);
  return T.useEffect(() => {
    const i = (a) => {
      a.target && !n.current && C$(aDe, r, { originalEvent: a }, {
        discrete: !1
      });
    };
    return t.addEventListener("focusin", i), () => t.removeEventListener("focusin", i);
  }, [t, r]), {
    onFocusCapture: () => n.current = !0,
    onBlurCapture: () => n.current = !1
  };
}
function kR() {
  const e = new CustomEvent(K_);
  document.dispatchEvent(e);
}
function C$(e, t, r, { discrete: n }) {
  const i = r.originalEvent.target, a = new CustomEvent(e, { bubbles: !1, cancelable: !0, detail: r });
  t && i.addEventListener(e, t, { once: !0 }), n ? tDe(i, a) : i.dispatchEvent(a);
}
var i2 = 0;
function cDe() {
  T.useEffect(() => {
    const e = document.querySelectorAll("[data-radix-focus-guard]");
    return document.body.insertAdjacentElement("afterbegin", e[0] ?? OR()), document.body.insertAdjacentElement("beforeend", e[1] ?? OR()), i2++, () => {
      i2 === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach((t) => t.remove()), i2--;
    };
  }, []);
}
function OR() {
  const e = document.createElement("span");
  return e.setAttribute("data-radix-focus-guard", ""), e.tabIndex = 0, e.style.outline = "none", e.style.opacity = "0", e.style.position = "fixed", e.style.pointerEvents = "none", e;
}
var a2 = "focusScope.autoFocusOnMount", o2 = "focusScope.autoFocusOnUnmount", zR = { bubbles: !1, cancelable: !0 }, fDe = "FocusScope", T$ = T.forwardRef((e, t) => {
  const {
    loop: r = !1,
    trapped: n = !1,
    onMountAutoFocus: i,
    onUnmountAutoFocus: a,
    ...o
  } = e, [s, l] = T.useState(null), u = Gc(i), c = Gc(a), f = T.useRef(null), d = iu(t, (v) => l(v)), h = T.useRef({
    paused: !1,
    pause() {
      this.paused = !0;
    },
    resume() {
      this.paused = !1;
    }
  }).current;
  T.useEffect(() => {
    if (n) {
      let v = function(b) {
        if (h.paused || !s) return;
        const w = b.target;
        s.contains(w) ? f.current = w : To(f.current, { select: !0 });
      }, g = function(b) {
        if (h.paused || !s) return;
        const w = b.relatedTarget;
        w !== null && (s.contains(w) || To(f.current, { select: !0 }));
      }, m = function(b) {
        if (document.activeElement === document.body)
          for (const _ of b)
            _.removedNodes.length > 0 && To(s);
      };
      document.addEventListener("focusin", v), document.addEventListener("focusout", g);
      const y = new MutationObserver(m);
      return s && y.observe(s, { childList: !0, subtree: !0 }), () => {
        document.removeEventListener("focusin", v), document.removeEventListener("focusout", g), y.disconnect();
      };
    }
  }, [n, s, h.paused]), T.useEffect(() => {
    if (s) {
      VR.add(h);
      const v = document.activeElement;
      if (!s.contains(v)) {
        const m = new CustomEvent(a2, zR);
        s.addEventListener(a2, u), s.dispatchEvent(m), m.defaultPrevented || (dDe(mDe(A$(s)), { select: !0 }), document.activeElement === v && To(s));
      }
      return () => {
        s.removeEventListener(a2, u), setTimeout(() => {
          const m = new CustomEvent(o2, zR);
          s.addEventListener(o2, c), s.dispatchEvent(m), m.defaultPrevented || To(v ?? document.body, { select: !0 }), s.removeEventListener(o2, c), VR.remove(h);
        }, 0);
      };
    }
  }, [s, u, c, h]);
  const p = T.useCallback(
    (v) => {
      if (!r && !n || h.paused) return;
      const g = v.key === "Tab" && !v.altKey && !v.ctrlKey && !v.metaKey, m = document.activeElement;
      if (g && m) {
        const y = v.currentTarget, [b, w] = hDe(y);
        b && w ? !v.shiftKey && m === w ? (v.preventDefault(), r && To(b, { select: !0 })) : v.shiftKey && m === b && (v.preventDefault(), r && To(w, { select: !0 })) : m === y && v.preventDefault();
      }
    },
    [r, n, h.paused]
  );
  return /* @__PURE__ */ x.jsx(co.div, { tabIndex: -1, ...o, ref: d, onKeyDown: p });
});
T$.displayName = fDe;
function dDe(e, { select: t = !1 } = {}) {
  const r = document.activeElement;
  for (const n of e)
    if (To(n, { select: t }), document.activeElement !== r) return;
}
function hDe(e) {
  const t = A$(e), r = jR(t, e), n = jR(t.reverse(), e);
  return [r, n];
}
function A$(e) {
  const t = [], r = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (n) => {
      const i = n.tagName === "INPUT" && n.type === "hidden";
      return n.disabled || n.hidden || i ? NodeFilter.FILTER_SKIP : n.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  for (; r.nextNode(); ) t.push(r.currentNode);
  return t;
}
function jR(e, t) {
  for (const r of e)
    if (!pDe(r, { upTo: t })) return r;
}
function pDe(e, { upTo: t }) {
  if (getComputedStyle(e).visibility === "hidden") return !0;
  for (; e; ) {
    if (t !== void 0 && e === t) return !1;
    if (getComputedStyle(e).display === "none") return !0;
    e = e.parentElement;
  }
  return !1;
}
function vDe(e) {
  return e instanceof HTMLInputElement && "select" in e;
}
function To(e, { select: t = !1 } = {}) {
  if (e && e.focus) {
    const r = document.activeElement;
    e.focus({ preventScroll: !0 }), e !== r && vDe(e) && t && e.select();
  }
}
var VR = gDe();
function gDe() {
  let e = [];
  return {
    add(t) {
      const r = e[0];
      t !== r && (r == null || r.pause()), e = BR(e, t), e.unshift(t);
    },
    remove(t) {
      var r;
      e = BR(e, t), (r = e[0]) == null || r.resume();
    }
  };
}
function BR(e, t) {
  const r = [...e], n = r.indexOf(t);
  return n !== -1 && r.splice(n, 1), r;
}
function mDe(e) {
  return e.filter((t) => t.tagName !== "A");
}
var Wc = globalThis != null && globalThis.document ? T.useLayoutEffect : () => {
}, yDe = T[" useId ".trim().toString()] || (() => {
}), xDe = 0;
function bDe(e) {
  const [t, r] = T.useState(yDe());
  return Wc(() => {
    r((n) => n ?? String(xDe++));
  }, [e]), e || (t ? `radix-${t}` : "");
}
var wDe = "Arrow", M$ = T.forwardRef((e, t) => {
  const { children: r, width: n = 10, height: i = 5, ...a } = e;
  return /* @__PURE__ */ x.jsx(
    co.svg,
    {
      ...a,
      ref: t,
      width: n,
      height: i,
      viewBox: "0 0 30 10",
      preserveAspectRatio: "none",
      children: e.asChild ? r : /* @__PURE__ */ x.jsx("polygon", { points: "0,0 30,0 15,10" })
    }
  );
});
M$.displayName = wDe;
var _De = M$;
function SDe(e) {
  const [t, r] = T.useState(void 0);
  return Wc(() => {
    if (e) {
      r({ width: e.offsetWidth, height: e.offsetHeight });
      const n = new ResizeObserver((i) => {
        if (!Array.isArray(i) || !i.length)
          return;
        const a = i[0];
        let o, s;
        if ("borderBoxSize" in a) {
          const l = a.borderBoxSize, u = Array.isArray(l) ? l[0] : l;
          o = u.inlineSize, s = u.blockSize;
        } else
          o = e.offsetWidth, s = e.offsetHeight;
        r({ width: o, height: s });
      });
      return n.observe(e, { box: "border-box" }), () => n.unobserve(e);
    } else
      r(void 0);
  }, [e]), t;
}
var JA = "Popper", [E$, D$] = b$(JA), [CDe, N$] = E$(JA), I$ = (e) => {
  const { __scopePopper: t, children: r } = e, [n, i] = T.useState(null);
  return /* @__PURE__ */ x.jsx(CDe, { scope: t, anchor: n, onAnchorChange: i, children: r });
};
I$.displayName = JA;
var L$ = "PopperAnchor", R$ = T.forwardRef(
  (e, t) => {
    const { __scopePopper: r, virtualRef: n, ...i } = e, a = N$(L$, r), o = T.useRef(null), s = iu(t, o), l = T.useRef(null);
    return T.useEffect(() => {
      const u = l.current;
      l.current = (n == null ? void 0 : n.current) || o.current, u !== l.current && a.onAnchorChange(l.current);
    }), n ? null : /* @__PURE__ */ x.jsx(co.div, { ...i, ref: s });
  }
);
R$.displayName = L$;
var QA = "PopperContent", [TDe, ADe] = E$(QA), P$ = T.forwardRef(
  (e, t) => {
    var q, J, U, $, Y, Z;
    const {
      __scopePopper: r,
      side: n = "bottom",
      sideOffset: i = 0,
      align: a = "center",
      alignOffset: o = 0,
      arrowPadding: s = 0,
      avoidCollisions: l = !0,
      collisionBoundary: u = [],
      collisionPadding: c = 0,
      sticky: f = "partial",
      hideWhenDetached: d = !1,
      updatePositionStrategy: h = "optimized",
      onPlaced: p,
      ...v
    } = e, g = N$(QA, r), [m, y] = T.useState(null), b = iu(t, (K) => y(K)), [w, _] = T.useState(null), S = SDe(w), C = (S == null ? void 0 : S.width) ?? 0, A = (S == null ? void 0 : S.height) ?? 0, M = n + (a !== "center" ? "-" + a : ""), D = typeof c == "number" ? c : { top: 0, right: 0, bottom: 0, left: 0, ...c }, N = Array.isArray(u) ? u : [u], R = N.length > 0, O = {
      padding: D,
      boundary: N.filter(EDe),
      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries
      altBoundary: R
    }, { refs: E, floatingStyles: L, placement: I, isPositioned: P, middlewareData: k } = xA({
      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues
      strategy: "fixed",
      placement: M,
      whileElementsMounted: (...K) => yA(...K, {
        animationFrame: h === "always"
      }),
      elements: {
        reference: g.anchor
      },
      middleware: [
        bA({ mainAxis: i + A, alignmentAxis: o }),
        l && wA({
          mainAxis: !0,
          crossAxis: !1,
          limiter: f === "partial" ? XV() : void 0,
          ...O
        }),
        l && _A({ ...O }),
        KV({
          ...O,
          apply: ({ elements: K, rects: ie, availableWidth: Q, availableHeight: ce }) => {
            const { width: te, height: oe } = ie.reference, de = K.floating.style;
            de.setProperty("--radix-popper-available-width", `${Q}px`), de.setProperty("--radix-popper-available-height", `${ce}px`), de.setProperty("--radix-popper-anchor-width", `${te}px`), de.setProperty("--radix-popper-anchor-height", `${oe}px`);
          }
        }),
        w && JV({ element: w, padding: s }),
        DDe({ arrowWidth: C, arrowHeight: A }),
        d && qV({ strategy: "referenceHidden", ...O })
      ]
    }), [z, V] = z$(I), B = Gc(p);
    Wc(() => {
      P && (B == null || B());
    }, [P, B]);
    const F = (q = k.arrow) == null ? void 0 : q.x, H = (J = k.arrow) == null ? void 0 : J.y, G = ((U = k.arrow) == null ? void 0 : U.centerOffset) !== 0, [W, X] = T.useState();
    return Wc(() => {
      m && X(window.getComputedStyle(m).zIndex);
    }, [m]), /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: E.setFloating,
        "data-radix-popper-content-wrapper": "",
        style: {
          ...L,
          transform: P ? L.transform : "translate(0, -200%)",
          // keep off the page when measuring
          minWidth: "max-content",
          zIndex: W,
          "--radix-popper-transform-origin": [
            ($ = k.transformOrigin) == null ? void 0 : $.x,
            (Y = k.transformOrigin) == null ? void 0 : Y.y
          ].join(" "),
          // hide the content if using the hide middleware and should be hidden
          // set visibility to hidden and disable pointer events so the UI behaves
          // as if the PopperContent isn't there at all
          ...((Z = k.hide) == null ? void 0 : Z.referenceHidden) && {
            visibility: "hidden",
            pointerEvents: "none"
          }
        },
        dir: e.dir,
        children: /* @__PURE__ */ x.jsx(
          TDe,
          {
            scope: r,
            placedSide: z,
            onArrowChange: _,
            arrowX: F,
            arrowY: H,
            shouldHideArrow: G,
            children: /* @__PURE__ */ x.jsx(
              co.div,
              {
                "data-side": z,
                "data-align": V,
                ...v,
                ref: b,
                style: {
                  ...v.style,
                  // if the PopperContent hasn't been placed yet (not all measurements done)
                  // we prevent animations so that users's animation don't kick in too early referring wrong sides
                  animation: P ? void 0 : "none"
                }
              }
            )
          }
        )
      }
    );
  }
);
P$.displayName = QA;
var k$ = "PopperArrow", MDe = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
}, O$ = T.forwardRef(function(t, r) {
  const { __scopePopper: n, ...i } = t, a = ADe(k$, n), o = MDe[a.placedSide];
  return (
    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)
    // doesn't report size as we'd expect on SVG elements.
    // it reports their bounding box which is effectively the largest path inside the SVG.
    /* @__PURE__ */ x.jsx(
      "span",
      {
        ref: a.onArrowChange,
        style: {
          position: "absolute",
          left: a.arrowX,
          top: a.arrowY,
          [o]: 0,
          transformOrigin: {
            top: "",
            right: "0 0",
            bottom: "center 0",
            left: "100% 0"
          }[a.placedSide],
          transform: {
            top: "translateY(100%)",
            right: "translateY(50%) rotate(90deg) translateX(-50%)",
            bottom: "rotate(180deg)",
            left: "translateY(50%) rotate(-90deg) translateX(50%)"
          }[a.placedSide],
          visibility: a.shouldHideArrow ? "hidden" : void 0
        },
        children: /* @__PURE__ */ x.jsx(
          _De,
          {
            ...i,
            ref: r,
            style: {
              ...i.style,
              // ensures the element can be measured correctly (mostly for if SVG)
              display: "block"
            }
          }
        )
      }
    )
  );
});
O$.displayName = k$;
function EDe(e) {
  return e !== null;
}
var DDe = (e) => ({
  name: "transformOrigin",
  options: e,
  fn(t) {
    var g, m, y;
    const { placement: r, rects: n, middlewareData: i } = t, o = ((g = i.arrow) == null ? void 0 : g.centerOffset) !== 0, s = o ? 0 : e.arrowWidth, l = o ? 0 : e.arrowHeight, [u, c] = z$(r), f = { start: "0%", center: "50%", end: "100%" }[c], d = (((m = i.arrow) == null ? void 0 : m.x) ?? 0) + s / 2, h = (((y = i.arrow) == null ? void 0 : y.y) ?? 0) + l / 2;
    let p = "", v = "";
    return u === "bottom" ? (p = o ? f : `${d}px`, v = `${-l}px`) : u === "top" ? (p = o ? f : `${d}px`, v = `${n.floating.height + l}px`) : u === "right" ? (p = `${-l}px`, v = o ? f : `${h}px`) : u === "left" && (p = `${n.floating.width + l}px`, v = o ? f : `${h}px`), { data: { x: p, y: v } };
  }
});
function z$(e) {
  const [t, r = "center"] = e.split("-");
  return [t, r];
}
var NDe = I$, j$ = R$, IDe = P$, LDe = O$, RDe = "Portal", V$ = T.forwardRef((e, t) => {
  var s;
  const { container: r, ...n } = e, [i, a] = T.useState(!1);
  Wc(() => a(!0), []);
  const o = r || i && ((s = globalThis == null ? void 0 : globalThis.document) == null ? void 0 : s.body);
  return o ? gP.createPortal(/* @__PURE__ */ x.jsx(co.div, { ...n, ref: t }), o) : null;
});
V$.displayName = RDe;
var PDe = T[" useInsertionEffect ".trim().toString()] || Wc;
function kDe({
  prop: e,
  defaultProp: t,
  onChange: r = () => {
  },
  caller: n
}) {
  const [i, a, o] = ODe({
    defaultProp: t,
    onChange: r
  }), s = e !== void 0, l = s ? e : i;
  {
    const c = T.useRef(e !== void 0);
    T.useEffect(() => {
      const f = c.current;
      f !== s && console.warn(
        `${n} is changing from ${f ? "controlled" : "uncontrolled"} to ${s ? "controlled" : "uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`
      ), c.current = s;
    }, [s, n]);
  }
  const u = T.useCallback(
    (c) => {
      var f;
      if (s) {
        const d = zDe(c) ? c(e) : c;
        d !== e && ((f = o.current) == null || f.call(o, d));
      } else
        a(c);
    },
    [s, e, a, o]
  );
  return [l, u];
}
function ODe({
  defaultProp: e,
  onChange: t
}) {
  const [r, n] = T.useState(e), i = T.useRef(r), a = T.useRef(t);
  return PDe(() => {
    a.current = t;
  }, [t]), T.useEffect(() => {
    var o;
    i.current !== r && ((o = a.current) == null || o.call(a, r), i.current = r);
  }, [r, i]), [r, n, a];
}
function zDe(e) {
  return typeof e == "function";
}
var B$ = aF(), s2 = function() {
}, k0 = T.forwardRef(function(e, t) {
  var r = T.useRef(null), n = T.useState({
    onScrollCapture: s2,
    onWheelCapture: s2,
    onTouchMoveCapture: s2
  }), i = n[0], a = n[1], o = e.forwardProps, s = e.children, l = e.className, u = e.removeScrollBar, c = e.enabled, f = e.shards, d = e.sideCar, h = e.noRelative, p = e.noIsolation, v = e.inert, g = e.allowPinchZoom, m = e.as, y = m === void 0 ? "div" : m, b = e.gapMode, w = Cy(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noRelative", "noIsolation", "inert", "allowPinchZoom", "as", "gapMode"]), _ = d, S = iF([r, t]), C = wr(wr({}, w), i);
  return T.createElement(
    T.Fragment,
    null,
    c && T.createElement(_, { sideCar: B$, removeScrollBar: u, shards: f, noRelative: h, noIsolation: p, inert: v, setCallbacks: a, allowPinchZoom: !!g, lockRef: r, gapMode: b }),
    o ? T.cloneElement(T.Children.only(s), wr(wr({}, C), { ref: S })) : T.createElement(y, wr({}, C, { className: l, ref: S }), s)
  );
});
k0.defaultProps = {
  enabled: !0,
  removeScrollBar: !0,
  inert: !1
};
k0.classNames = {
  fullWidth: Xd,
  zeroRight: Zd
};
var q_ = !1;
if (typeof window < "u")
  try {
    var Qv = Object.defineProperty({}, "passive", {
      get: function() {
        return q_ = !0, !0;
      }
    });
    window.addEventListener("test", Qv, Qv), window.removeEventListener("test", Qv, Qv);
  } catch {
    q_ = !1;
  }
var Gu = q_ ? { passive: !1 } : !1, jDe = function(e) {
  return e.tagName === "TEXTAREA";
}, F$ = function(e, t) {
  if (!(e instanceof Element))
    return !1;
  var r = window.getComputedStyle(e);
  return (
    // not-not-scrollable
    r[t] !== "hidden" && // contains scroll inside self
    !(r.overflowY === r.overflowX && !jDe(e) && r[t] === "visible")
  );
}, VDe = function(e) {
  return F$(e, "overflowY");
}, BDe = function(e) {
  return F$(e, "overflowX");
}, FR = function(e, t) {
  var r = t.ownerDocument, n = t;
  do {
    typeof ShadowRoot < "u" && n instanceof ShadowRoot && (n = n.host);
    var i = $$(e, n);
    if (i) {
      var a = H$(e, n), o = a[1], s = a[2];
      if (o > s)
        return !0;
    }
    n = n.parentNode;
  } while (n && n !== r.body);
  return !1;
}, FDe = function(e) {
  var t = e.scrollTop, r = e.scrollHeight, n = e.clientHeight;
  return [
    t,
    r,
    n
  ];
}, $De = function(e) {
  var t = e.scrollLeft, r = e.scrollWidth, n = e.clientWidth;
  return [
    t,
    r,
    n
  ];
}, $$ = function(e, t) {
  return e === "v" ? VDe(t) : BDe(t);
}, H$ = function(e, t) {
  return e === "v" ? FDe(t) : $De(t);
}, HDe = function(e, t) {
  return e === "h" && t === "rtl" ? -1 : 1;
}, GDe = function(e, t, r, n, i) {
  var a = HDe(e, window.getComputedStyle(t).direction), o = a * n, s = r.target, l = t.contains(s), u = !1, c = o > 0, f = 0, d = 0;
  do {
    if (!s)
      break;
    var h = H$(e, s), p = h[0], v = h[1], g = h[2], m = v - g - a * p;
    (p || m) && $$(e, s) && (f += m, d += p);
    var y = s.parentNode;
    s = y && y.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? y.host : y;
  } while (
    // portaled content
    !l && s !== document.body || // self content
    l && (t.contains(s) || t === s)
  );
  return (c && Math.abs(f) < 1 || !c && Math.abs(d) < 1) && (u = !0), u;
}, eg = function(e) {
  return "changedTouches" in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0];
}, $R = function(e) {
  return [e.deltaX, e.deltaY];
}, HR = function(e) {
  return e && "current" in e ? e.current : e;
}, WDe = function(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}, UDe = function(e) {
  return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`);
}, YDe = 0, Wu = [];
function ZDe(e) {
  var t = T.useRef([]), r = T.useRef([0, 0]), n = T.useRef(), i = T.useState(YDe++)[0], a = T.useState(PA)[0], o = T.useRef(e);
  T.useEffect(function() {
    o.current = e;
  }, [e]), T.useEffect(function() {
    if (e.inert) {
      document.body.classList.add("block-interactivity-".concat(i));
      var v = Nk([e.lockRef.current], (e.shards || []).map(HR), !0).filter(Boolean);
      return v.forEach(function(g) {
        return g.classList.add("allow-interactivity-".concat(i));
      }), function() {
        document.body.classList.remove("block-interactivity-".concat(i)), v.forEach(function(g) {
          return g.classList.remove("allow-interactivity-".concat(i));
        });
      };
    }
  }, [e.inert, e.lockRef.current, e.shards]);
  var s = T.useCallback(function(v, g) {
    if ("touches" in v && v.touches.length === 2 || v.type === "wheel" && v.ctrlKey)
      return !o.current.allowPinchZoom;
    var m = eg(v), y = r.current, b = "deltaX" in v ? v.deltaX : y[0] - m[0], w = "deltaY" in v ? v.deltaY : y[1] - m[1], _, S = v.target, C = Math.abs(b) > Math.abs(w) ? "h" : "v";
    if ("touches" in v && C === "h" && S.type === "range")
      return !1;
    var A = window.getSelection(), M = A && A.anchorNode, D = M ? M === S || M.contains(S) : !1;
    if (D)
      return !1;
    var N = FR(C, S);
    if (!N)
      return !0;
    if (N ? _ = C : (_ = C === "v" ? "h" : "v", N = FR(C, S)), !N)
      return !1;
    if (!n.current && "changedTouches" in v && (b || w) && (n.current = _), !_)
      return !0;
    var R = n.current || _;
    return GDe(R, g, v, R === "h" ? b : w);
  }, []), l = T.useCallback(function(v) {
    var g = v;
    if (!(!Wu.length || Wu[Wu.length - 1] !== a)) {
      var m = "deltaY" in g ? $R(g) : eg(g), y = t.current.filter(function(_) {
        return _.name === g.type && (_.target === g.target || g.target === _.shadowParent) && WDe(_.delta, m);
      })[0];
      if (y && y.should) {
        g.cancelable && g.preventDefault();
        return;
      }
      if (!y) {
        var b = (o.current.shards || []).map(HR).filter(Boolean).filter(function(_) {
          return _.contains(g.target);
        }), w = b.length > 0 ? s(g, b[0]) : !o.current.noIsolation;
        w && g.cancelable && g.preventDefault();
      }
    }
  }, []), u = T.useCallback(function(v, g, m, y) {
    var b = { name: v, delta: g, target: m, should: y, shadowParent: XDe(m) };
    t.current.push(b), setTimeout(function() {
      t.current = t.current.filter(function(w) {
        return w !== b;
      });
    }, 1);
  }, []), c = T.useCallback(function(v) {
    r.current = eg(v), n.current = void 0;
  }, []), f = T.useCallback(function(v) {
    u(v.type, $R(v), v.target, s(v, e.lockRef.current));
  }, []), d = T.useCallback(function(v) {
    u(v.type, eg(v), v.target, s(v, e.lockRef.current));
  }, []);
  T.useEffect(function() {
    return Wu.push(a), e.setCallbacks({
      onScrollCapture: f,
      onWheelCapture: f,
      onTouchMoveCapture: d
    }), document.addEventListener("wheel", l, Gu), document.addEventListener("touchmove", l, Gu), document.addEventListener("touchstart", c, Gu), function() {
      Wu = Wu.filter(function(v) {
        return v !== a;
      }), document.removeEventListener("wheel", l, Gu), document.removeEventListener("touchmove", l, Gu), document.removeEventListener("touchstart", c, Gu);
    };
  }, []);
  var h = e.removeScrollBar, p = e.inert;
  return T.createElement(
    T.Fragment,
    null,
    p ? T.createElement(a, { styles: UDe(i) }) : null,
    h ? T.createElement(uF, { noRelative: e.noRelative, gapMode: e.gapMode }) : null
  );
}
function XDe(e) {
  for (var t = null; e !== null; )
    e instanceof ShadowRoot && (t = e.host, e = e.host), e = e.parentNode;
  return t;
}
const KDe = sF(B$, ZDe);
var G$ = T.forwardRef(function(e, t) {
  return T.createElement(k0, wr({}, e, { ref: t, sideCar: KDe }));
});
G$.classNames = k0.classNames;
var O0 = "Popover", [W$] = b$(O0, [
  D$
]), Ap = D$(), [qDe, xs] = W$(O0), U$ = (e) => {
  const {
    __scopePopover: t,
    children: r,
    open: n,
    defaultOpen: i,
    onOpenChange: a,
    modal: o = !1
  } = e, s = Ap(t), l = T.useRef(null), [u, c] = T.useState(!1), [f, d] = kDe({
    prop: n,
    defaultProp: i ?? !1,
    onChange: a,
    caller: O0
  });
  return /* @__PURE__ */ x.jsx(NDe, { ...s, children: /* @__PURE__ */ x.jsx(
    qDe,
    {
      scope: t,
      contentId: bDe(),
      triggerRef: l,
      open: f,
      onOpenChange: d,
      onOpenToggle: T.useCallback(() => d((h) => !h), [d]),
      hasCustomAnchor: u,
      onCustomAnchorAdd: T.useCallback(() => c(!0), []),
      onCustomAnchorRemove: T.useCallback(() => c(!1), []),
      modal: o,
      children: r
    }
  ) });
};
U$.displayName = O0;
var Y$ = "PopoverAnchor", JDe = T.forwardRef(
  (e, t) => {
    const { __scopePopover: r, ...n } = e, i = xs(Y$, r), a = Ap(r), { onCustomAnchorAdd: o, onCustomAnchorRemove: s } = i;
    return T.useEffect(() => (o(), () => s()), [o, s]), /* @__PURE__ */ x.jsx(j$, { ...a, ...n, ref: t });
  }
);
JDe.displayName = Y$;
var Z$ = "PopoverTrigger", X$ = T.forwardRef(
  (e, t) => {
    const { __scopePopover: r, ...n } = e, i = xs(Z$, r), a = Ap(r), o = iu(t, i.triggerRef), s = /* @__PURE__ */ x.jsx(
      co.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": i.open,
        "aria-controls": i.contentId,
        "data-state": eH(i.open),
        ...n,
        ref: o,
        onClick: rs(e.onClick, i.onOpenToggle)
      }
    );
    return i.hasCustomAnchor ? s : /* @__PURE__ */ x.jsx(j$, { asChild: !0, ...a, children: s });
  }
);
X$.displayName = Z$;
var eM = "PopoverPortal", [QDe, eNe] = W$(eM, {
  forceMount: void 0
}), K$ = (e) => {
  const { __scopePopover: t, forceMount: r, children: n, container: i } = e, a = xs(eM, t);
  return /* @__PURE__ */ x.jsx(QDe, { scope: t, forceMount: r, children: /* @__PURE__ */ x.jsx(tu, { present: r || a.open, children: /* @__PURE__ */ x.jsx(V$, { asChild: !0, container: i, children: n }) }) });
};
K$.displayName = eM;
var Uc = "PopoverContent", q$ = T.forwardRef(
  (e, t) => {
    const r = eNe(Uc, e.__scopePopover), { forceMount: n = r.forceMount, ...i } = e, a = xs(Uc, e.__scopePopover);
    return /* @__PURE__ */ x.jsx(tu, { present: n || a.open, children: a.modal ? /* @__PURE__ */ x.jsx(rNe, { ...i, ref: t }) : /* @__PURE__ */ x.jsx(nNe, { ...i, ref: t }) });
  }
);
q$.displayName = Uc;
var tNe = /* @__PURE__ */ w$("PopoverContent.RemoveScroll"), rNe = T.forwardRef(
  (e, t) => {
    const r = xs(Uc, e.__scopePopover), n = T.useRef(null), i = iu(t, n), a = T.useRef(!1);
    return T.useEffect(() => {
      const o = n.current;
      if (o) return nF(o);
    }, []), /* @__PURE__ */ x.jsx(G$, { as: tNe, allowPinchZoom: !0, children: /* @__PURE__ */ x.jsx(
      J$,
      {
        ...e,
        ref: i,
        trapFocus: r.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: rs(e.onCloseAutoFocus, (o) => {
          var s;
          o.preventDefault(), a.current || (s = r.triggerRef.current) == null || s.focus();
        }),
        onPointerDownOutside: rs(
          e.onPointerDownOutside,
          (o) => {
            const s = o.detail.originalEvent, l = s.button === 0 && s.ctrlKey === !0, u = s.button === 2 || l;
            a.current = u;
          },
          { checkForDefaultPrevented: !1 }
        ),
        onFocusOutside: rs(
          e.onFocusOutside,
          (o) => o.preventDefault(),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
), nNe = T.forwardRef(
  (e, t) => {
    const r = xs(Uc, e.__scopePopover), n = T.useRef(!1), i = T.useRef(!1);
    return /* @__PURE__ */ x.jsx(
      J$,
      {
        ...e,
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: (a) => {
          var o, s;
          (o = e.onCloseAutoFocus) == null || o.call(e, a), a.defaultPrevented || (n.current || (s = r.triggerRef.current) == null || s.focus(), a.preventDefault()), n.current = !1, i.current = !1;
        },
        onInteractOutside: (a) => {
          var l, u;
          (l = e.onInteractOutside) == null || l.call(e, a), a.defaultPrevented || (n.current = !0, a.detail.originalEvent.type === "pointerdown" && (i.current = !0));
          const o = a.target;
          ((u = r.triggerRef.current) == null ? void 0 : u.contains(o)) && a.preventDefault(), a.detail.originalEvent.type === "focusin" && i.current && a.preventDefault();
        }
      }
    );
  }
), J$ = T.forwardRef(
  (e, t) => {
    const {
      __scopePopover: r,
      trapFocus: n,
      onOpenAutoFocus: i,
      onCloseAutoFocus: a,
      disableOutsidePointerEvents: o,
      onEscapeKeyDown: s,
      onPointerDownOutside: l,
      onFocusOutside: u,
      onInteractOutside: c,
      ...f
    } = e, d = xs(Uc, r), h = Ap(r);
    return cDe(), /* @__PURE__ */ x.jsx(
      T$,
      {
        asChild: !0,
        loop: !0,
        trapped: n,
        onMountAutoFocus: i,
        onUnmountAutoFocus: a,
        children: /* @__PURE__ */ x.jsx(
          S$,
          {
            asChild: !0,
            disableOutsidePointerEvents: o,
            onInteractOutside: c,
            onEscapeKeyDown: s,
            onPointerDownOutside: l,
            onFocusOutside: u,
            onDismiss: () => d.onOpenChange(!1),
            children: /* @__PURE__ */ x.jsx(
              IDe,
              {
                "data-state": eH(d.open),
                role: "dialog",
                id: d.contentId,
                ...h,
                ...f,
                ref: t,
                style: {
                  ...f.style,
                  "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)",
                  "--radix-popover-content-available-width": "var(--radix-popper-available-width)",
                  "--radix-popover-content-available-height": "var(--radix-popper-available-height)",
                  "--radix-popover-trigger-width": "var(--radix-popper-anchor-width)",
                  "--radix-popover-trigger-height": "var(--radix-popper-anchor-height)"
                }
              }
            )
          }
        )
      }
    );
  }
), Q$ = "PopoverClose", iNe = T.forwardRef(
  (e, t) => {
    const { __scopePopover: r, ...n } = e, i = xs(Q$, r);
    return /* @__PURE__ */ x.jsx(
      co.button,
      {
        type: "button",
        ...n,
        ref: t,
        onClick: rs(e.onClick, () => i.onOpenChange(!1))
      }
    );
  }
);
iNe.displayName = Q$;
var aNe = "PopoverArrow", oNe = T.forwardRef(
  (e, t) => {
    const { __scopePopover: r, ...n } = e, i = Ap(r);
    return /* @__PURE__ */ x.jsx(LDe, { ...i, ...n, ref: t });
  }
);
oNe.displayName = aNe;
function eH(e) {
  return e ? "open" : "closed";
}
var sNe = U$, lNe = X$, uNe = K$, cNe = q$;
function tH({
  ...e
}) {
  return /* @__PURE__ */ x.jsx(sNe, { ...e });
}
function rH({
  ...e
}) {
  return /* @__PURE__ */ x.jsx(lNe, { ...e });
}
function nH({
  className: e,
  align: t = "center",
  sideOffset: r = 4,
  ...n
}) {
  return /* @__PURE__ */ x.jsx(uNe, { children: /* @__PURE__ */ x.jsx(
    cNe,
    {
      align: t,
      sideOffset: r,
      className: Fr("tiptap-popover", e),
      ...n
    }
  ) });
}
function fNe({
  shortcutKeys: e = J_
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: e }) });
}
const iH = Nt(
  ({
    editor: e,
    highlightColor: t,
    text: r,
    hideWhenUnavailable: n = !1,
    mode: i = "mark",
    onApplied: a,
    showShortcut: o = !1,
    onClick: s,
    children: l,
    style: u,
    ...c
  }, f) => {
    const { editor: d } = Qt(e), {
      isVisible: h,
      canColorHighlight: p,
      isActive: v,
      handleColorHighlight: g,
      label: m,
      shortcutKeys: y
    } = rM({
      editor: d,
      highlightColor: t,
      label: r || `Toggle highlight (${t})`,
      hideWhenUnavailable: n,
      mode: i,
      onApplied: a
    }), b = Te(
      (_) => {
        s == null || s(_), !_.defaultPrevented && g();
      },
      [g, s]
    ), w = Gt(
      () => ({
        ...u,
        "--highlight-color": t
      }),
      [t, u]
    );
    return h ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        "data-style": "ghost",
        "data-active-state": v ? "on" : "off",
        role: "button",
        tabIndex: -1,
        disabled: !p,
        "data-disabled": !p,
        "aria-label": m,
        "aria-pressed": v,
        tooltip: m,
        onClick: b,
        style: w,
        ...c,
        ref: f,
        children: l ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(
            "span",
            {
              className: "tiptap-button-highlight",
              style: { "--highlight-color": t }
            }
          ),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          o && /* @__PURE__ */ x.jsx(fNe, { shortcutKeys: y })
        ] })
      }
    ) : null;
  }
);
iH.displayName = "ColorHighlightButton";
const J_ = "mod+shift+h", dNe = [
  {
    label: "Default background",
    value: "var(--tt-bg-color)",
    border: "var(--tt-bg-color-contrast)"
  },
  {
    label: "Gray background",
    value: "var(--tt-color-highlight-gray)",
    border: "var(--tt-color-highlight-gray-contrast)"
  },
  {
    label: "Brown background",
    value: "var(--tt-color-highlight-brown)",
    border: "var(--tt-color-highlight-brown-contrast)"
  },
  {
    label: "Orange background",
    value: "var(--tt-color-highlight-orange)",
    border: "var(--tt-color-highlight-orange-contrast)"
  },
  {
    label: "Yellow background",
    value: "var(--tt-color-highlight-yellow)",
    border: "var(--tt-color-highlight-yellow-contrast)"
  },
  {
    label: "Green background",
    value: "var(--tt-color-highlight-green)",
    border: "var(--tt-color-highlight-green-contrast)"
  },
  {
    label: "Blue background",
    value: "var(--tt-color-highlight-blue)",
    border: "var(--tt-color-highlight-blue-contrast)"
  },
  {
    label: "Purple background",
    value: "var(--tt-color-highlight-purple)",
    border: "var(--tt-color-highlight-purple-contrast)"
  },
  {
    label: "Pink background",
    value: "var(--tt-color-highlight-pink)",
    border: "var(--tt-color-highlight-pink-contrast)"
  },
  {
    label: "Red background",
    value: "var(--tt-color-highlight-red)",
    border: "var(--tt-color-highlight-red-contrast)"
  }
];
function aH(e) {
  const t = new Map(
    dNe.map((r) => [r.value, r])
  );
  return e.map((r) => t.get(r)).filter((r) => !!r);
}
function tM(e, t = "mark") {
  if (!e || !e.isEditable) return !1;
  if (t === "mark")
    return !bp("highlight", e) || uo(e, ["image"]) ? !1 : e.can().setMark("highlight");
  if (!Tf(e, ["nodeBackground"])) return !1;
  try {
    return e.can().toggleNodeBackgroundColor("test");
  } catch {
    return !1;
  }
}
function hNe(e, t, r = "mark") {
  var n;
  if (!e || !e.isEditable) return !1;
  if (r === "mark")
    return t ? e.isActive("highlight", { color: t }) : e.isActive("highlight");
  if (!t) return !1;
  try {
    const { state: i } = e, { selection: a } = i, o = a.$anchor;
    for (let s = o.depth; s >= 0; s--) {
      const l = o.node(s);
      if (l && ((n = l.attrs) == null ? void 0 : n.backgroundColor) === t)
        return !0;
    }
    return !1;
  } catch {
    return !1;
  }
}
function pNe(e, t = "mark") {
  return !e || !e.isEditable || !tM(e, t) ? !1 : t === "mark" ? e.chain().focus().unsetMark("highlight").run() : e.chain().focus().unsetNodeBackgroundColor().run();
}
function vNe(e) {
  const { editor: t, hideWhenUnavailable: r, mode: n } = e;
  if (!t || !t.isEditable) return !1;
  if (n === "mark") {
    if (!bp("highlight", t)) return !1;
  } else if (!Tf(t, ["nodeBackground"])) return !1;
  return r && !t.isActive("code") ? tM(t, n) : !0;
}
function rM(e) {
  const {
    editor: t,
    label: r,
    highlightColor: n,
    hideWhenUnavailable: i = !1,
    mode: a = "mark",
    onApplied: o
  } = e, { editor: s } = Qt(t), l = Gh(), [u, c] = Ze(!0), f = tM(s, a), d = hNe(s, n, a);
  Oe(() => {
    if (!s) return;
    const v = () => {
      c(vNe({ editor: s, hideWhenUnavailable: i, mode: a }));
    };
    return v(), s.on("selectionUpdate", v), () => {
      s.off("selectionUpdate", v);
    };
  }, [s, i, a]);
  const h = Te(() => {
    if (!s || !f || !n || !r)
      return !1;
    if (a === "mark") {
      if (s.state.storedMarks) {
        const v = s.schema.marks.highlight;
        v && s.view.dispatch(
          s.state.tr.removeStoredMark(v)
        );
      }
      return setTimeout(() => {
        const v = s.chain().focus().toggleMark("highlight", { color: n }).run();
        return v && (o == null || o({ color: n, label: r, mode: a })), v;
      }, 0), !0;
    } else {
      const v = s.chain().focus().toggleNodeBackgroundColor(n).run();
      return v && (o == null || o({ color: n, label: r, mode: a })), v;
    }
  }, [f, n, s, r, o, a]), p = Te(() => {
    const v = pNe(s, a);
    return v && (o == null || o({ color: "", label: "Remove highlight", mode: a })), v;
  }, [s, o, a]);
  return s$(
    J_,
    (v) => {
      v.preventDefault(), h();
    },
    {
      enabled: u && f,
      enableOnContentEditable: !l,
      enableOnFormTags: !0
    }
  ), {
    isVisible: u,
    isActive: d,
    handleColorHighlight: h,
    handleRemoveHighlight: p,
    canColorHighlight: f,
    label: r || "Highlight",
    shortcutKeys: J_,
    Icon: P0,
    mode: a
  };
}
const nM = Nt(({ className: e, children: t, ...r }, n) => /* @__PURE__ */ x.jsx(
  cr,
  {
    type: "button",
    className: e,
    "data-style": "ghost",
    "data-appearance": "default",
    role: "button",
    tabIndex: -1,
    "aria-label": "Highlight text",
    tooltip: "Highlight",
    ref: n,
    ...r,
    children: t ?? /* @__PURE__ */ x.jsx(P0, { className: "tiptap-button-icon" })
  }
));
nM.displayName = "ColorHighlightPopoverButton";
function oH({
  editor: e,
  colors: t = aH([
    "var(--tt-color-highlight-green)",
    "var(--tt-color-highlight-blue)",
    "var(--tt-color-highlight-red)",
    "var(--tt-color-highlight-purple)",
    "var(--tt-color-highlight-yellow)"
  ])
}) {
  const { handleRemoveHighlight: r } = rM({ editor: e }), n = Gh(), i = Ve(null), a = Gt(
    () => [...t, { label: "Remove highlight", value: "none" }],
    [t]
  ), { selectedIndex: o } = dB({
    containerRef: i,
    items: a,
    orientation: "both",
    onSelect: (s) => {
      if (!i.current) return !1;
      const l = i.current.querySelector(
        '[data-highlighted="true"]'
      );
      return l && l.click(), s.value === "none" && r(), !0;
    },
    autoSelectFirstItem: !1
  });
  return /* @__PURE__ */ x.jsx(
    Cp,
    {
      ref: i,
      tabIndex: 0,
      style: n ? { boxShadow: "none", border: 0 } : {},
      children: /* @__PURE__ */ x.jsx(Tp, { style: n ? { padding: 0 } : {}, children: /* @__PURE__ */ x.jsxs(GA, { orientation: "horizontal", children: [
        /* @__PURE__ */ x.jsx(Gl, { orientation: "horizontal", children: t.map((s, l) => /* @__PURE__ */ x.jsx(
          iH,
          {
            editor: e,
            highlightColor: s.value,
            tooltip: s.label,
            "aria-label": `${s.label} highlight color`,
            tabIndex: l === o ? 0 : -1,
            "data-highlighted": o === l
          },
          s.value
        )) }),
        /* @__PURE__ */ x.jsx(M0, {}),
        /* @__PURE__ */ x.jsx(Gl, { orientation: "horizontal", children: /* @__PURE__ */ x.jsx(
          cr,
          {
            onClick: r,
            "aria-label": "Remove highlight",
            tooltip: "Remove highlight",
            tabIndex: o === t.length ? 0 : -1,
            type: "button",
            role: "menuitem",
            "data-style": "ghost",
            "data-highlighted": o === t.length,
            children: /* @__PURE__ */ x.jsx(y$, { className: "tiptap-button-icon" })
          }
        ) })
      ] }) })
    }
  );
}
function gNe({
  editor: e,
  colors: t = aH([
    "var(--tt-color-highlight-green)",
    "var(--tt-color-highlight-blue)",
    "var(--tt-color-highlight-red)",
    "var(--tt-color-highlight-purple)",
    "var(--tt-color-highlight-yellow)"
  ]),
  hideWhenUnavailable: r = !1,
  onApplied: n,
  ...i
}) {
  const { editor: a } = Qt(e), [o, s] = Ze(!1), { isVisible: l, canColorHighlight: u, isActive: c, label: f, Icon: d } = rM({
    editor: a,
    hideWhenUnavailable: r,
    onApplied: n
  });
  return l ? /* @__PURE__ */ x.jsxs(tH, { open: o, onOpenChange: s, children: [
    /* @__PURE__ */ x.jsx(rH, { asChild: !0, children: /* @__PURE__ */ x.jsx(
      nM,
      {
        disabled: !u,
        "data-active-state": c ? "on" : "off",
        "data-disabled": !u,
        "aria-pressed": c,
        "aria-label": f,
        tooltip: f,
        ...i,
        children: /* @__PURE__ */ x.jsx(d, { className: "tiptap-button-icon" })
      }
    ) }),
    /* @__PURE__ */ x.jsx(nH, { "aria-label": "Highlight colors", children: /* @__PURE__ */ x.jsx(oH, { editor: a, colors: t }) })
  ] }) : null;
}
const sH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V11C19 11.7956 18.6839 12.5587 18.1213 13.1213C17.5587 13.6839 16.7956 14 16 14H6.41421L9.70711 10.7071C10.0976 10.3166 10.0976 9.68342 9.70711 9.29289C9.31658 8.90237 8.68342 8.90237 8.29289 9.29289L3.29289 14.2929C2.90237 14.6834 2.90237 15.3166 3.29289 15.7071L8.29289 20.7071C8.68342 21.0976 9.31658 21.0976 9.70711 20.7071C10.0976 20.3166 10.0976 19.6834 9.70711 19.2929L6.41421 16H16C17.3261 16 18.5979 15.4732 19.5355 14.5355C20.4732 13.5979 21 12.3261 21 11V4Z",
        fill: "currentColor"
      }
    )
  }
));
sH.displayName = "CornerDownLeftIcon";
const lH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M14 3C14 2.44772 14.4477 2 15 2H21C21.5523 2 22 2.44772 22 3V9C22 9.55228 21.5523 10 21 10C20.4477 10 20 9.55228 20 9V5.41421L10.7071 14.7071C10.3166 15.0976 9.68342 15.0976 9.29289 14.7071C8.90237 14.3166 8.90237 13.6834 9.29289 13.2929L18.5858 4H15C14.4477 4 14 3.55228 14 3Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M4.29289 7.29289C4.48043 7.10536 4.73478 7 5 7H11C11.5523 7 12 6.55228 12 6C12 5.44772 11.5523 5 11 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7957 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V13C19 12.4477 18.5523 12 18 12C17.4477 12 17 12.4477 17 13V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8C4 7.73478 4.10536 7.48043 4.29289 7.29289Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
lH.displayName = "ExternalLinkIcon";
const z0 = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M16.9958 1.06669C15.4226 1.05302 13.907 1.65779 12.7753 2.75074L12.765 2.76086L11.045 4.47086C10.6534 4.86024 10.6515 5.49341 11.0409 5.88507C11.4303 6.27673 12.0634 6.27858 12.4551 5.88919L14.1697 4.18456C14.9236 3.45893 15.9319 3.05752 16.9784 3.06662C18.0272 3.07573 19.0304 3.49641 19.772 4.23804C20.5137 4.97967 20.9344 5.98292 20.9435 7.03171C20.9526 8.07776 20.5515 9.08563 19.8265 9.83941L16.833 12.8329C16.4274 13.2386 15.9393 13.5524 15.4019 13.7529C14.8645 13.9533 14.2903 14.0359 13.7181 13.9949C13.146 13.9539 12.5894 13.7904 12.0861 13.5154C11.5827 13.2404 11.1444 12.8604 10.8008 12.401C10.47 11.9588 9.84333 11.8685 9.40108 12.1993C8.95883 12.5301 8.86849 13.1568 9.1993 13.599C9.71464 14.288 10.3721 14.858 11.1272 15.2705C11.8822 15.683 12.7171 15.9283 13.5753 15.9898C14.4334 16.0513 15.2948 15.9274 16.1009 15.6267C16.907 15.326 17.639 14.8555 18.2473 14.247L21.2472 11.2471L21.2593 11.2347C22.3523 10.1031 22.9571 8.58751 22.9434 7.01433C22.9297 5.44115 22.2987 3.93628 21.1863 2.82383C20.0738 1.71138 18.5689 1.08036 16.9958 1.06669Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M10.4247 8.0102C9.56657 7.94874 8.70522 8.07256 7.89911 8.37326C7.09305 8.67395 6.36096 9.14458 5.75272 9.753L2.75285 12.7529L2.74067 12.7653C1.64772 13.8969 1.04295 15.4125 1.05662 16.9857C1.07029 18.5589 1.70131 20.0637 2.81376 21.1762C3.9262 22.2886 5.43108 22.9196 7.00426 22.9333C8.57744 22.947 10.0931 22.3422 11.2247 21.2493L11.2371 21.2371L12.9471 19.5271C13.3376 19.1366 13.3376 18.5034 12.9471 18.1129C12.5565 17.7223 11.9234 17.7223 11.5328 18.1129L9.82932 19.8164C9.07555 20.5414 8.06768 20.9425 7.02164 20.9334C5.97285 20.9243 4.9696 20.5036 4.22797 19.762C3.48634 19.0203 3.06566 18.0171 3.05655 16.9683C3.04746 15.9222 3.44851 14.9144 4.17355 14.1606L7.16719 11.167C7.5727 10.7613 8.06071 10.4476 8.59811 10.2471C9.13552 10.0467 9.70976 9.96412 10.2819 10.0051C10.854 10.0461 11.4106 10.2096 11.9139 10.4846C12.4173 10.7596 12.8556 11.1397 13.1992 11.599C13.53 12.0412 14.1567 12.1316 14.5989 11.8007C15.0412 11.4699 15.1315 10.8433 14.8007 10.401C14.2854 9.71205 13.6279 9.14198 12.8729 8.72948C12.1178 8.31697 11.2829 8.07166 10.4247 8.0102Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
z0.displayName = "LinkIcon";
const uH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M7 5V4C7 3.17477 7.40255 2.43324 7.91789 1.91789C8.43324 1.40255 9.17477 1 10 1H14C14.8252 1 15.5668 1.40255 16.0821 1.91789C16.5975 2.43324 17 3.17477 17 4V5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H20V20C20 20.8252 19.5975 21.5668 19.0821 22.0821C18.5668 22.5975 17.8252 23 17 23H7C6.17477 23 5.43324 22.5975 4.91789 22.0821C4.40255 21.5668 4 20.8252 4 20V7H3C2.44772 7 2 6.55228 2 6C2 5.44772 2.44772 5 3 5H7ZM9 4C9 3.82523 9.09745 3.56676 9.33211 3.33211C9.56676 3.09745 9.82523 3 10 3H14C14.1748 3 14.4332 3.09745 14.6679 3.33211C14.9025 3.56676 15 3.82523 15 4V5H9V4ZM6 7V20C6 20.1748 6.09745 20.4332 6.33211 20.6679C6.56676 20.9025 6.82523 21 7 21H17C17.1748 21 17.4332 20.9025 17.6679 20.6679C17.9025 20.4332 18 20.1748 18 20V7H6Z",
        fill: "currentColor"
      }
    )
  }
));
uH.displayName = "TrashIcon";
function mNe({ className: e, type: t, ...r }) {
  return /* @__PURE__ */ x.jsx("input", { type: t, className: Fr("tiptap-input", e), ...r });
}
function yNe({
  className: e,
  children: t,
  ...r
}) {
  return /* @__PURE__ */ x.jsx("div", { className: Fr("tiptap-input-group", e), ...r, children: t });
}
const iM = Nt(
  ({ className: e, children: t, ...r }, n) => /* @__PURE__ */ x.jsx(
    cr,
    {
      type: "button",
      className: e,
      "data-style": "ghost",
      role: "button",
      tabIndex: -1,
      "aria-label": "Link",
      tooltip: "Link",
      ref: n,
      ...r,
      children: t || /* @__PURE__ */ x.jsx(z0, { className: "tiptap-button-icon" })
    }
  )
);
iM.displayName = "LinkButton";
const cH = ({
  url: e,
  setUrl: t,
  setLink: r,
  removeLink: n,
  openLink: i,
  isActive: a
}) => {
  const o = Gh(), s = (l) => {
    l.key === "Enter" && (l.preventDefault(), r());
  };
  return /* @__PURE__ */ x.jsx(
    Cp,
    {
      style: {
        ...o ? { boxShadow: "none", border: 0 } : {}
      },
      children: /* @__PURE__ */ x.jsx(
        Tp,
        {
          style: {
            ...o ? { padding: 0 } : {}
          },
          children: /* @__PURE__ */ x.jsxs(GA, { orientation: "horizontal", children: [
            /* @__PURE__ */ x.jsx(yNe, { children: /* @__PURE__ */ x.jsx(
              mNe,
              {
                type: "url",
                placeholder: "Paste a link...",
                value: e,
                onChange: (l) => t(l.target.value),
                onKeyDown: s,
                autoFocus: !0,
                autoComplete: "off",
                autoCorrect: "off",
                autoCapitalize: "off"
              }
            ) }),
            /* @__PURE__ */ x.jsx(Gl, { orientation: "horizontal", children: /* @__PURE__ */ x.jsx(
              cr,
              {
                type: "button",
                onClick: r,
                title: "Apply link",
                disabled: !e && !a,
                "data-style": "ghost",
                children: /* @__PURE__ */ x.jsx(sH, { className: "tiptap-button-icon" })
              }
            ) }),
            /* @__PURE__ */ x.jsx(M0, {}),
            /* @__PURE__ */ x.jsxs(Gl, { orientation: "horizontal", children: [
              /* @__PURE__ */ x.jsx(
                cr,
                {
                  type: "button",
                  onClick: i,
                  title: "Open in new window",
                  disabled: !e && !a,
                  "data-style": "ghost",
                  children: /* @__PURE__ */ x.jsx(lH, { className: "tiptap-button-icon" })
                }
              ),
              /* @__PURE__ */ x.jsx(
                cr,
                {
                  type: "button",
                  onClick: n,
                  title: "Remove link",
                  disabled: !e && !a,
                  "data-style": "ghost",
                  children: /* @__PURE__ */ x.jsx(uH, { className: "tiptap-button-icon" })
                }
              )
            ] })
          ] })
        }
      )
    }
  );
}, xNe = ({ editor: e }) => {
  const t = pH({
    editor: e
  });
  return /* @__PURE__ */ x.jsx(cH, { ...t });
}, fH = Nt(
  ({
    editor: e,
    hideWhenUnavailable: t = !1,
    onSetLink: r,
    onOpenChange: n,
    autoOpenOnLinkActive: i = !0,
    onClick: a,
    children: o,
    ...s
  }, l) => {
    const { editor: u } = Qt(e), [c, f] = Ze(!1), {
      isVisible: d,
      canSet: h,
      isActive: p,
      url: v,
      setUrl: g,
      setLink: m,
      removeLink: y,
      openLink: b,
      label: w,
      Icon: _
    } = pH({
      editor: u,
      hideWhenUnavailable: t,
      onSetLink: r
    }), S = Te(
      (M) => {
        f(M), n == null || n(M);
      },
      [n]
    ), C = Te(() => {
      m(), f(!1);
    }, [m]), A = Te(
      (M) => {
        a == null || a(M), !M.defaultPrevented && f(!c);
      },
      [a, c]
    );
    return Oe(() => {
      i && p && f(!0);
    }, [i, p]), d ? /* @__PURE__ */ x.jsxs(tH, { open: c, onOpenChange: S, children: [
      /* @__PURE__ */ x.jsx(rH, { asChild: !0, children: /* @__PURE__ */ x.jsx(
        iM,
        {
          disabled: !h,
          "data-active-state": p ? "on" : "off",
          "data-disabled": !h,
          "aria-label": w,
          "aria-pressed": p,
          onClick: A,
          ...s,
          ref: l,
          children: o ?? /* @__PURE__ */ x.jsx(_, { className: "tiptap-button-icon" })
        }
      ) }),
      /* @__PURE__ */ x.jsx(nH, { children: /* @__PURE__ */ x.jsx(
        cH,
        {
          url: v,
          setUrl: g,
          setLink: C,
          removeLink: y,
          openLink: b,
          isActive: p
        }
      ) })
    ] }) : null;
  }
);
fH.displayName = "LinkPopover";
function dH(e) {
  return !e || !e.isEditable || uo(e, ["image"], !0) ? !1 : e.can().setMark("link");
}
function hH(e) {
  return !e || !e.isEditable ? !1 : e.isActive("link");
}
function bNe(e) {
  const { editor: t, hideWhenUnavailable: r } = e;
  return !bp("link", t) || !t ? !1 : r && !t.isActive("code") ? dH(t) : !0;
}
function wNe(e) {
  const { editor: t, onSetLink: r } = e, [n, i] = Ze(null);
  Oe(() => {
    if (!t) return;
    const { href: l } = t.getAttributes("link");
    hH(t) && n === null && i(l || "");
  }, [t, n]), Oe(() => {
    if (!t) return;
    const l = () => {
      const { href: u } = t.getAttributes("link");
      i(u || "");
    };
    return t.on("selectionUpdate", l), () => {
      t.off("selectionUpdate", l);
    };
  }, [t]);
  const a = Te(() => {
    if (!n || !t) return;
    const { selection: l } = t.state, u = l.empty;
    let c = t.chain().focus();
    c = c.extendMarkRange("link").setLink({ href: n }), u && (c = c.insertContent({ type: "text", text: n })), c.run(), i(null), r == null || r();
  }, [t, r, n]), o = Te(() => {
    t && (t.chain().focus().extendMarkRange("link").unsetLink().setMeta("preventAutolink", !0).run(), i(""));
  }, [t]), s = Te(
    (l = "_blank", u = "noopener,noreferrer") => {
      if (!n) return;
      const c = sCe(n, window.location.href);
      c !== "#" && window.open(c, l, u);
    },
    [n]
  );
  return {
    url: n || "",
    setUrl: i,
    setLink: a,
    removeLink: o,
    openLink: s
  };
}
function _Ne(e) {
  const { editor: t, hideWhenUnavailable: r = !1 } = e, n = dH(t), i = hH(t), [a, o] = Ze(!0);
  return Oe(() => {
    if (!t) return;
    const s = () => {
      o(
        bNe({
          editor: t,
          hideWhenUnavailable: r
        })
      );
    };
    return s(), t.on("selectionUpdate", s), () => {
      t.off("selectionUpdate", s);
    };
  }, [t, r]), {
    isVisible: a,
    canSet: n,
    isActive: i
  };
}
function pH(e) {
  const {
    editor: t,
    hideWhenUnavailable: r = !1,
    onSetLink: n
  } = e || {}, { editor: i } = Qt(t), { isVisible: a, canSet: o, isActive: s } = _Ne({
    editor: i,
    hideWhenUnavailable: r
  }), l = wNe({
    editor: i,
    onSetLink: n
  });
  return {
    isVisible: a,
    canSet: o,
    isActive: s,
    label: "Link",
    Icon: z0,
    ...l
  };
}
function SNe({
  type: e,
  shortcutKeys: t = _H[e]
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: t }) });
}
const Ao = Nt(
  ({
    editor: e,
    type: t,
    text: r,
    hideWhenUnavailable: n = !1,
    onToggled: i,
    showShortcut: a = !1,
    onClick: o,
    children: s,
    ...l
  }, u) => {
    const { editor: c } = Qt(e), {
      isVisible: f,
      handleMark: d,
      label: h,
      canToggle: p,
      isActive: v,
      Icon: g,
      shortcutKeys: m
    } = DNe({
      editor: c,
      type: t,
      hideWhenUnavailable: n,
      onToggled: i
    }), y = Te(
      (b) => {
        o == null || o(b), !b.defaultPrevented && d();
      },
      [d, o]
    );
    return f ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        disabled: !p,
        "data-style": "ghost",
        "data-active-state": v ? "on" : "off",
        "data-disabled": !p,
        role: "button",
        tabIndex: -1,
        "aria-label": h,
        "aria-pressed": v,
        tooltip: h,
        onClick: y,
        ...l,
        ref: u,
        children: s ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(g, { className: "tiptap-button-icon" }),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          a && /* @__PURE__ */ x.jsx(SNe, { type: t, shortcutKeys: m })
        ] })
      }
    ) : null;
  }
);
Ao.displayName = "MarkButton";
const vH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M6 2.5C5.17157 2.5 4.5 3.17157 4.5 4V20C4.5 20.8284 5.17157 21.5 6 21.5H15C16.4587 21.5 17.8576 20.9205 18.8891 19.8891C19.9205 18.8576 20.5 17.4587 20.5 16C20.5 14.5413 19.9205 13.1424 18.8891 12.1109C18.6781 11.9 18.4518 11.7079 18.2128 11.5359C19.041 10.5492 19.5 9.29829 19.5 8C19.5 6.54131 18.9205 5.14236 17.8891 4.11091C16.8576 3.07946 15.4587 2.5 14 2.5H6ZM14 10.5C14.663 10.5 15.2989 10.2366 15.7678 9.76777C16.2366 9.29893 16.5 8.66304 16.5 8C16.5 7.33696 16.2366 6.70107 15.7678 6.23223C15.2989 5.76339 14.663 5.5 14 5.5H7.5V10.5H14ZM7.5 18.5V13.5H15C15.663 13.5 16.2989 13.7634 16.7678 14.2322C17.2366 14.7011 17.5 15.337 17.5 16C17.5 16.663 17.2366 17.2989 16.7678 17.7678C16.2989 18.2366 15.663 18.5 15 18.5H7.5Z",
        fill: "currentColor"
      }
    )
  }
));
vH.displayName = "BoldIcon";
const gH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M15.4545 4.2983C15.6192 3.77115 15.3254 3.21028 14.7983 3.04554C14.2712 2.88081 13.7103 3.1746 13.5455 3.70175L8.54554 19.7017C8.38081 20.2289 8.6746 20.7898 9.20175 20.9545C9.72889 21.1192 10.2898 20.8254 10.4545 20.2983L15.4545 4.2983Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M6.70711 7.29289C7.09763 7.68342 7.09763 8.31658 6.70711 8.70711L3.41421 12L6.70711 15.2929C7.09763 15.6834 7.09763 16.3166 6.70711 16.7071C6.31658 17.0976 5.68342 17.0976 5.29289 16.7071L1.29289 12.7071C0.902369 12.3166 0.902369 11.6834 1.29289 11.2929L5.29289 7.29289C5.68342 6.90237 6.31658 6.90237 6.70711 7.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M17.2929 7.29289C17.6834 6.90237 18.3166 6.90237 18.7071 7.29289L22.7071 11.2929C23.0976 11.6834 23.0976 12.3166 22.7071 12.7071L18.7071 16.7071C18.3166 17.0976 17.6834 17.0976 17.2929 16.7071C16.9024 16.3166 16.9024 15.6834 17.2929 15.2929L20.5858 12L17.2929 8.70711C16.9024 8.31658 16.9024 7.68342 17.2929 7.29289Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
gH.displayName = "Code2Icon";
const mH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M15.0222 3H19C19.5523 3 20 3.44772 20 4C20 4.55228 19.5523 5 19 5H15.693L10.443 19H14C14.5523 19 15 19.4477 15 20C15 20.5523 14.5523 21 14 21H9.02418C9.00802 21.0004 8.99181 21.0004 8.97557 21H5C4.44772 21 4 20.5523 4 20C4 19.4477 4.44772 19 5 19H8.30704L13.557 5H10C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3H14.9782C14.9928 2.99968 15.0075 2.99967 15.0222 3Z",
        fill: "currentColor"
      }
    )
  }
));
mH.displayName = "ItalicIcon";
const yH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M9.00039 3H16.0001C16.5524 3 17.0001 3.44772 17.0001 4C17.0001 4.55229 16.5524 5 16.0001 5H9.00011C8.68006 4.99983 8.36412 5.07648 8.07983 5.22349C7.79555 5.37051 7.55069 5.5836 7.36585 5.84487C7.181 6.10614 7.06155 6.40796 7.01754 6.72497C6.97352 7.04198 7.00623 7.36492 7.11292 7.66667C7.29701 8.18737 7.02414 8.75872 6.50344 8.94281C5.98274 9.1269 5.4114 8.85403 5.2273 8.33333C5.01393 7.72984 4.94851 7.08396 5.03654 6.44994C5.12456 5.81592 5.36346 5.21229 5.73316 4.68974C6.10285 4.1672 6.59256 3.74101 7.16113 3.44698C7.72955 3.15303 8.36047 2.99975 9.00039 3Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M18 13H20C20.5523 13 21 12.5523 21 12C21 11.4477 20.5523 11 20 11H4C3.44772 11 3 11.4477 3 12C3 12.5523 3.44772 13 4 13H14C14.7956 13 15.5587 13.3161 16.1213 13.8787C16.6839 14.4413 17 15.2044 17 16C17 16.7956 16.6839 17.5587 16.1213 18.1213C15.5587 18.6839 14.7956 19 14 19H6C5.44772 19 5 19.4477 5 20C5 20.5523 5.44772 21 6 21H14C15.3261 21 16.5979 20.4732 17.5355 19.5355C18.4732 18.5979 19 17.3261 19 16C19 14.9119 18.6453 13.8604 18 13Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
yH.displayName = "StrikeIcon";
const xH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M17.4079 14.3995C18.0284 14.0487 18.7506 13.9217 19.4536 14.0397C20.1566 14.1578 20.7977 14.5138 21.2696 15.0481L21.2779 15.0574L21.2778 15.0575C21.7439 15.5988 22 16.2903 22 17C22 18.0823 21.3962 18.8401 20.7744 19.3404C20.194 19.8073 19.4858 20.141 18.9828 20.378C18.9638 20.387 18.9451 20.3958 18.9266 20.4045C18.4473 20.6306 18.2804 20.7817 18.1922 20.918C18.1773 20.9412 18.1619 20.9681 18.1467 21H21C21.5523 21 22 21.4477 22 22C22 22.5523 21.5523 23 21 23H17C16.4477 23 16 22.5523 16 22C16 21.1708 16.1176 20.4431 16.5128 19.832C16.9096 19.2184 17.4928 18.8695 18.0734 18.5956C18.6279 18.334 19.138 18.0901 19.5207 17.7821C19.8838 17.49 20 17.2477 20 17C20 16.7718 19.9176 16.5452 19.7663 16.3672C19.5983 16.1792 19.3712 16.0539 19.1224 16.0121C18.8722 15.9701 18.6152 16.015 18.3942 16.1394C18.1794 16.2628 18.0205 16.4549 17.9422 16.675C17.7572 17.1954 17.1854 17.4673 16.665 17.2822C16.1446 17.0972 15.8728 16.5254 16.0578 16.005C16.2993 15.3259 16.7797 14.7584 17.4039 14.4018L17.4079 14.3995L17.4079 14.3995Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
xH.displayName = "SubscriptIcon";
const bH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12.7071 7.29289C13.0976 7.68342 13.0976 8.31658 12.7071 8.70711L4.70711 16.7071C4.31658 17.0976 3.68342 17.0976 3.29289 16.7071C2.90237 16.3166 2.90237 15.6834 3.29289 15.2929L11.2929 7.29289C11.6834 6.90237 12.3166 6.90237 12.7071 7.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M3.29289 7.29289C3.68342 6.90237 4.31658 6.90237 4.70711 7.29289L12.7071 15.2929C13.0976 15.6834 13.0976 16.3166 12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L3.29289 8.70711C2.90237 8.31658 2.90237 7.68342 3.29289 7.29289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M17.405 1.40657C18.0246 1.05456 18.7463 0.92634 19.4492 1.04344C20.1521 1.16054 20.7933 1.51583 21.2652 2.0497L21.2697 2.05469L21.2696 2.05471C21.7431 2.5975 22 3.28922 22 4.00203C22 5.08579 21.3952 5.84326 20.7727 6.34289C20.1966 6.80531 19.4941 7.13675 18.9941 7.37261C18.9714 7.38332 18.9491 7.39383 18.9273 7.40415C18.4487 7.63034 18.2814 7.78152 18.1927 7.91844C18.1778 7.94155 18.1625 7.96834 18.1473 8.00003H21C21.5523 8.00003 22 8.44774 22 9.00003C22 9.55231 21.5523 10 21 10H17C16.4477 10 16 9.55231 16 9.00003C16 8.17007 16.1183 7.44255 16.5138 6.83161C16.9107 6.21854 17.4934 5.86971 18.0728 5.59591C18.6281 5.33347 19.1376 5.09075 19.5208 4.78316C19.8838 4.49179 20 4.25026 20 4.00203C20 3.77192 19.9178 3.54865 19.7646 3.37182C19.5968 3.18324 19.3696 3.05774 19.1205 3.01625C18.8705 2.97459 18.6137 3.02017 18.3933 3.14533C18.1762 3.26898 18.0191 3.45826 17.9406 3.67557C17.7531 4.19504 17.18 4.46414 16.6605 4.27662C16.141 4.0891 15.8719 3.51596 16.0594 2.99649C16.303 2.3219 16.7817 1.76125 17.4045 1.40689L17.405 1.40657Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
bH.displayName = "SuperscriptIcon";
const wH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M7 4C7 3.44772 6.55228 3 6 3C5.44772 3 5 3.44772 5 4V10C5 11.8565 5.7375 13.637 7.05025 14.9497C8.36301 16.2625 10.1435 17 12 17C13.8565 17 15.637 16.2625 16.9497 14.9497C18.2625 13.637 19 11.8565 19 10V4C19 3.44772 18.5523 3 18 3C17.4477 3 17 3.44772 17 4V10C17 11.3261 16.4732 12.5979 15.5355 13.5355C14.5979 14.4732 13.3261 15 12 15C10.6739 15 9.40215 14.4732 8.46447 13.5355C7.52678 12.5979 7 11.3261 7 10V4ZM4 19C3.44772 19 3 19.4477 3 20C3 20.5523 3.44772 21 4 21H20C20.5523 21 21 20.5523 21 20C21 19.4477 20.5523 19 20 19H4Z",
        fill: "currentColor"
      }
    )
  }
));
wH.displayName = "UnderlineIcon";
const CNe = {
  bold: vH,
  italic: mH,
  underline: wH,
  strike: yH,
  code: gH,
  superscript: bH,
  subscript: xH
}, _H = {
  bold: "mod+b",
  italic: "mod+i",
  underline: "mod+u",
  strike: "mod+shift+s",
  code: "mod+e",
  superscript: "mod+.",
  subscript: "mod+,"
};
function aM(e, t) {
  return !e || !e.isEditable || !bp(t, e) || uo(e, ["image"]) ? !1 : e.can().toggleMark(t);
}
function TNe(e, t) {
  return !e || !e.isEditable ? !1 : e.isActive(t);
}
function ANe(e, t) {
  return !e || !e.isEditable || !aM(e, t) ? !1 : e.chain().focus().toggleMark(t).run();
}
function MNe(e) {
  const { editor: t, type: r, hideWhenUnavailable: n } = e;
  return !t || !t.isEditable || !bp(r, t) ? !1 : n && !t.isActive("code") ? aM(t, r) : !0;
}
function ENe(e) {
  return e.charAt(0).toUpperCase() + e.slice(1);
}
function DNe(e) {
  const {
    editor: t,
    type: r,
    hideWhenUnavailable: n = !1,
    onToggled: i
  } = e, { editor: a } = Qt(t), [o, s] = Ze(!0), l = aM(a, r), u = TNe(a, r);
  Oe(() => {
    if (!a) return;
    const f = () => {
      s(MNe({ editor: a, type: r, hideWhenUnavailable: n }));
    };
    return f(), a.on("selectionUpdate", f), () => {
      a.off("selectionUpdate", f);
    };
  }, [a, r, n]);
  const c = Te(() => {
    if (!a) return !1;
    const f = ANe(a, r);
    return f && (i == null || i()), f;
  }, [a, r, i]);
  return {
    isVisible: o,
    isActive: u,
    handleMark: c,
    canToggle: l,
    label: ENe(r),
    shortcutKeys: _H[r],
    Icon: CNe[r]
  };
}
function NNe({
  align: e,
  shortcutKeys: t = MH[e]
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: t }) });
}
const Ed = Nt(
  ({
    editor: e,
    align: t,
    text: r,
    hideWhenUnavailable: n = !1,
    onAligned: i,
    showShortcut: a = !1,
    onClick: o,
    icon: s,
    children: l,
    ...u
  }, c) => {
    const { editor: f } = Qt(e), {
      isVisible: d,
      handleTextAlign: h,
      label: p,
      canAlign: v,
      isActive: g,
      Icon: m,
      shortcutKeys: y
    } = zNe({
      editor: f,
      align: t,
      hideWhenUnavailable: n,
      onAligned: i
    }), b = Te(
      (_) => {
        o == null || o(_), !_.defaultPrevented && h();
      },
      [h, o]
    );
    if (!d)
      return null;
    const w = s ?? m;
    return /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        disabled: !v,
        "data-style": "ghost",
        "data-active-state": g ? "on" : "off",
        "data-disabled": !v,
        role: "button",
        tabIndex: -1,
        "aria-label": p,
        "aria-pressed": g,
        tooltip: p,
        onClick: b,
        ...u,
        ref: c,
        children: l ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(w, { className: "tiptap-button-icon" }),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          a && /* @__PURE__ */ x.jsx(
            NNe,
            {
              align: t,
              shortcutKeys: y
            }
          )
        ] })
      }
    );
  }
);
Ed.displayName = "TextAlignButton";
const SH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M4 18C4 17.4477 4.44772 17 5 17H19C19.5523 17 20 17.4477 20 18C20 18.5523 19.5523 19 19 19H5C4.44772 19 4 18.5523 4 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
SH.displayName = "AlignCenterIcon";
const CH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 18C2 17.4477 2.44772 17 3 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H3C2.44772 19 2 18.5523 2 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
CH.displayName = "AlignJustifyIcon";
const TH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 12C2 11.4477 2.44772 11 3 11H15C15.5523 11 16 11.4477 16 12C16 12.5523 15.5523 13 15 13H3C2.44772 13 2 12.5523 2 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 18C2 17.4477 2.44772 17 3 17H17C17.5523 17 18 17.4477 18 18C18 18.5523 17.5523 19 17 19H3C2.44772 19 2 18.5523 2 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
TH.displayName = "AlignLeftIcon";
const AH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M8 12C8 11.4477 8.44772 11 9 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H9C8.44772 13 8 12.5523 8 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M6 18C6 17.4477 6.44772 17 7 17H21C21.5523 17 22 17.4477 22 18C22 18.5523 21.5523 19 21 19H7C6.44772 19 6 18.5523 6 18Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
AH.displayName = "AlignRightIcon";
const MH = {
  left: "mod+shift+l",
  center: "mod+shift+e",
  right: "mod+shift+r",
  justify: "mod+shift+j"
}, INe = {
  left: TH,
  center: SH,
  right: AH,
  justify: CH
}, LNe = {
  left: "Align left",
  center: "Align center",
  right: "Align right",
  justify: "Align justify"
};
function oM(e, t) {
  return !e || !e.isEditable || !Tf(e, "textAlign") || uo(e, ["image", "horizontalRule"]) ? !1 : e.can().setTextAlign(t);
}
function RNe(e) {
  return "setTextAlign" in e;
}
function PNe(e, t) {
  return !e || !e.isEditable ? !1 : e.isActive({ textAlign: t });
}
function kNe(e, t) {
  if (!e || !e.isEditable || !oM(e, t)) return !1;
  const r = e.chain().focus();
  return RNe(r) ? r.setTextAlign(t).run() : !1;
}
function ONe(e) {
  const { editor: t, hideWhenUnavailable: r, align: n } = e;
  return !t || !t.isEditable || !Tf(t, "textAlign") ? !1 : r && !t.isActive("code") ? oM(t, n) : !0;
}
function zNe(e) {
  const {
    editor: t,
    align: r,
    hideWhenUnavailable: n = !1,
    onAligned: i
  } = e, { editor: a } = Qt(t), [o, s] = Ze(!0), l = oM(a, r), u = PNe(a, r);
  Oe(() => {
    if (!a) return;
    const f = () => {
      s(ONe({ editor: a, align: r, hideWhenUnavailable: n }));
    };
    return f(), a.on("selectionUpdate", f), () => {
      a.off("selectionUpdate", f);
    };
  }, [a, n, r]);
  const c = Te(() => {
    if (!a) return !1;
    const f = kNe(a, r);
    return f && (i == null || i()), f;
  }, [a, r, i]);
  return {
    isVisible: o,
    isActive: u,
    handleTextAlign: c,
    canAlign: l,
    label: LNe[r],
    shortcutKeys: MH[r],
    Icon: INe[r]
  };
}
function jNe({
  action: e,
  shortcutKeys: t = NH[e]
}) {
  return /* @__PURE__ */ x.jsx(ya, { children: ma({ shortcutKeys: t }) });
}
const Q_ = Nt(
  ({
    editor: e,
    action: t,
    text: r,
    hideWhenUnavailable: n = !1,
    onExecuted: i,
    showShortcut: a = !1,
    onClick: o,
    children: s,
    ...l
  }, u) => {
    const { editor: c } = Qt(e), { isVisible: f, handleAction: d, label: h, canExecute: p, Icon: v, shortcutKeys: g } = HNe({
      editor: c,
      action: t,
      hideWhenUnavailable: n,
      onExecuted: i
    }), m = Te(
      (y) => {
        o == null || o(y), !y.defaultPrevented && d();
      },
      [d, o]
    );
    return f ? /* @__PURE__ */ x.jsx(
      cr,
      {
        type: "button",
        disabled: !p,
        "data-style": "ghost",
        "data-disabled": !p,
        role: "button",
        tabIndex: -1,
        "aria-label": h,
        tooltip: h,
        onClick: m,
        ...l,
        ref: u,
        children: s ?? /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
          /* @__PURE__ */ x.jsx(v, { className: "tiptap-button-icon" }),
          r && /* @__PURE__ */ x.jsx("span", { className: "tiptap-button-text", children: r }),
          a && /* @__PURE__ */ x.jsx(
            jNe,
            {
              action: t,
              shortcutKeys: g
            }
          )
        ] })
      }
    ) : null;
  }
);
Q_.displayName = "UndoRedoButton";
const EH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M15.7071 2.29289C15.3166 1.90237 14.6834 1.90237 14.2929 2.29289C13.9024 2.68342 13.9024 3.31658 14.2929 3.70711L17.5858 7H9.5C7.77609 7 6.12279 7.68482 4.90381 8.90381C3.68482 10.1228 3 11.7761 3 13.5C3 14.3536 3.16813 15.1988 3.49478 15.9874C3.82144 16.7761 4.30023 17.4926 4.90381 18.0962C6.12279 19.3152 7.77609 20 9.5 20H13C13.5523 20 14 19.5523 14 19C14 18.4477 13.5523 18 13 18H9.5C8.30653 18 7.16193 17.5259 6.31802 16.682C5.90016 16.2641 5.56869 15.768 5.34254 15.2221C5.1164 14.6761 5 14.0909 5 13.5C5 12.3065 5.47411 11.1619 6.31802 10.318C7.16193 9.47411 8.30653 9 9.5 9H17.5858L14.2929 12.2929C13.9024 12.6834 13.9024 13.3166 14.2929 13.7071C14.6834 14.0976 15.3166 14.0976 15.7071 13.7071L20.7071 8.70711C21.0976 8.31658 21.0976 7.68342 20.7071 7.29289L15.7071 2.29289Z",
        fill: "currentColor"
      }
    )
  }
));
EH.displayName = "Redo2Icon";
const DH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M9.70711 3.70711C10.0976 3.31658 10.0976 2.68342 9.70711 2.29289C9.31658 1.90237 8.68342 1.90237 8.29289 2.29289L3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L8.29289 13.7071C8.68342 14.0976 9.31658 14.0976 9.70711 13.7071C10.0976 13.3166 10.0976 12.6834 9.70711 12.2929L6.41421 9H14.5C15.0909 9 15.6761 9.1164 16.2221 9.34254C16.768 9.56869 17.2641 9.90016 17.682 10.318C18.0998 10.7359 18.4313 11.232 18.6575 11.7779C18.8836 12.3239 19 12.9091 19 13.5C19 14.0909 18.8836 14.6761 18.6575 15.2221C18.4313 15.768 18.0998 16.2641 17.682 16.682C17.2641 17.0998 16.768 17.4313 16.2221 17.6575C15.6761 17.8836 15.0909 18 14.5 18H11C10.4477 18 10 18.4477 10 19C10 19.5523 10.4477 20 11 20H14.5C15.3536 20 16.1988 19.8319 16.9874 19.5052C17.7761 19.1786 18.4926 18.6998 19.0962 18.0962C19.6998 17.4926 20.1786 16.7761 20.5052 15.9874C20.8319 15.1988 21 14.3536 21 13.5C21 12.6464 20.8319 11.8012 20.5052 11.0126C20.1786 10.2239 19.6998 9.50739 19.0962 8.90381C18.4926 8.30022 17.7761 7.82144 16.9874 7.49478C16.1988 7.16813 15.3536 7 14.5 7H6.41421L9.70711 3.70711Z",
        fill: "currentColor"
      }
    )
  }
));
DH.displayName = "Undo2Icon";
const NH = {
  undo: "mod+z",
  redo: "mod+shift+z"
}, VNe = {
  undo: "Undo",
  redo: "Redo"
}, BNe = {
  undo: DH,
  redo: EH
};
function sM(e, t) {
  return !e || !e.isEditable || uo(e, ["image"]) ? !1 : t === "undo" ? e.can().undo() : e.can().redo();
}
function FNe(e, t) {
  if (!e || !e.isEditable || !sM(e, t)) return !1;
  const r = e.chain().focus();
  return t === "undo" ? r.undo().run() : r.redo().run();
}
function $Ne(e) {
  const { editor: t, hideWhenUnavailable: r, action: n } = e;
  return !t || !t.isEditable ? !1 : r && !t.isActive("code") ? sM(t, n) : !0;
}
function HNe(e) {
  const {
    editor: t,
    action: r,
    hideWhenUnavailable: n = !1,
    onExecuted: i
  } = e, { editor: a } = Qt(t), [o, s] = Ze(!0), l = sM(a, r);
  Oe(() => {
    if (!a) return;
    const c = () => {
      s($Ne({ editor: a, hideWhenUnavailable: n, action: r }));
    };
    return c(), a.on("transaction", c), () => {
      a.off("transaction", c);
    };
  }, [a, n, r]);
  const u = Te(() => {
    if (!a) return !1;
    const c = FNe(a, r);
    return c && (i == null || i()), c;
  }, [a, r, i]);
  return {
    isVisible: o,
    handleAction: u,
    canExecute: l,
    label: VNe[r],
    shortcutKeys: NH[r],
    Icon: BNe[r]
  };
}
const IH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsx(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: /* @__PURE__ */ x.jsx(
      "path",
      {
        d: "M12.7071 5.70711C13.0976 5.31658 13.0976 4.68342 12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289L4.29289 11.2929C3.90237 11.6834 3.90237 12.3166 4.29289 12.7071L11.2929 19.7071C11.6834 20.0976 12.3166 20.0976 12.7071 19.7071C13.0976 19.3166 13.0976 18.6834 12.7071 18.2929L7.41421 13L19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11L7.41421 11L12.7071 5.70711Z",
        fill: "currentColor"
      }
    )
  }
));
IH.displayName = "ArrowLeftIcon";
var LH = "Expected a function", GR = NaN, GNe = "[object Symbol]", WNe = /^\s+|\s+$/g, UNe = /^[-+]0x[0-9a-f]+$/i, YNe = /^0b[01]+$/i, ZNe = /^0o[0-7]+$/i, XNe = parseInt, KNe = typeof Dp == "object" && Dp && Dp.Object === Object && Dp, qNe = typeof self == "object" && self && self.Object === Object && self, JNe = KNe || qNe || Function("return this")(), QNe = Object.prototype, e5e = QNe.toString, t5e = Math.max, r5e = Math.min, l2 = function() {
  return JNe.Date.now();
};
function n5e(e, t, r) {
  var n, i, a, o, s, l, u = 0, c = !1, f = !1, d = !0;
  if (typeof e != "function")
    throw new TypeError(LH);
  t = WR(t) || 0, ay(r) && (c = !!r.leading, f = "maxWait" in r, a = f ? t5e(WR(r.maxWait) || 0, t) : a, d = "trailing" in r ? !!r.trailing : d);
  function h(S) {
    var C = n, A = i;
    return n = i = void 0, u = S, o = e.apply(A, C), o;
  }
  function p(S) {
    return u = S, s = setTimeout(m, t), c ? h(S) : o;
  }
  function v(S) {
    var C = S - l, A = S - u, M = t - C;
    return f ? r5e(M, a - A) : M;
  }
  function g(S) {
    var C = S - l, A = S - u;
    return l === void 0 || C >= t || C < 0 || f && A >= a;
  }
  function m() {
    var S = l2();
    if (g(S))
      return y(S);
    s = setTimeout(m, v(S));
  }
  function y(S) {
    return s = void 0, d && n ? h(S) : (n = i = void 0, o);
  }
  function b() {
    s !== void 0 && clearTimeout(s), u = 0, n = l = i = s = void 0;
  }
  function w() {
    return s === void 0 ? o : y(l2());
  }
  function _() {
    var S = l2(), C = g(S);
    if (n = arguments, i = this, l = S, C) {
      if (s === void 0)
        return p(l);
      if (f)
        return s = setTimeout(m, t), h(l);
    }
    return s === void 0 && (s = setTimeout(m, t)), o;
  }
  return _.cancel = b, _.flush = w, _;
}
function i5e(e, t, r) {
  var n = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(LH);
  return ay(r) && (n = "leading" in r ? !!r.leading : n, i = "trailing" in r ? !!r.trailing : i), n5e(e, t, {
    leading: n,
    maxWait: t,
    trailing: i
  });
}
function ay(e) {
  var t = typeof e;
  return !!e && (t == "object" || t == "function");
}
function a5e(e) {
  return !!e && typeof e == "object";
}
function o5e(e) {
  return typeof e == "symbol" || a5e(e) && e5e.call(e) == GNe;
}
function WR(e) {
  if (typeof e == "number")
    return e;
  if (o5e(e))
    return GR;
  if (ay(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = ay(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = e.replace(WNe, "");
  var r = YNe.test(e);
  return r || ZNe.test(e) ? XNe(e.slice(2), r ? 2 : 8) : UNe.test(e) ? GR : +e;
}
var s5e = i5e;
const l5e = /* @__PURE__ */ lP(s5e), u5e = (e) => {
  const t = Ve(e);
  t.current = e, Oe(
    () => () => {
      t.current();
    },
    []
  );
}, c5e = {
  leading: !1,
  trailing: !0
};
function RH(e, t = 250, r = [], n = c5e) {
  const i = Gt(
    () => l5e(e, t, n),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    r
  );
  return u5e(() => {
    i.cancel();
  }), i;
}
function PH() {
  const [e, t] = Ze({
    width: 0,
    height: 0,
    offsetTop: 0,
    offsetLeft: 0,
    scale: 0
  }), r = RH(() => {
    if (typeof window > "u") return;
    const n = window.visualViewport;
    if (!n) return;
    const {
      width: i = 0,
      height: a = 0,
      offsetTop: o = 0,
      offsetLeft: s = 0,
      scale: l = 0
    } = n;
    t((u) => i === u.width && a === u.height && o === u.offsetTop && s === u.offsetLeft && l === u.scale ? u : { width: i, height: a, offsetTop: o, offsetLeft: s, scale: l });
  }, 200);
  return Oe(() => {
    const n = window.visualViewport;
    if (n)
      return n.addEventListener("resize", r), r(), () => {
        n.removeEventListener("resize", r);
      };
  }, [r]), e;
}
const tg = {
  x: 0,
  y: 0,
  width: 0,
  height: 0,
  top: 0,
  right: 0,
  bottom: 0,
  left: 0
}, kH = typeof window > "u", f5e = !kH && typeof ResizeObserver < "u", Ng = () => !kH;
function d5e({
  element: e,
  enabled: t = !0,
  throttleMs: r = 100,
  useResizeObserver: n = !0
} = {}) {
  const [i, a] = Ze(tg), o = Te(() => !t || !Ng() ? null : e ? typeof e == "string" ? document.querySelector(e) : "current" in e ? e.current : e : document.body, [e, t]), s = RH(
    () => {
      if (!t || !Ng()) return;
      const l = o();
      if (!l) {
        a(tg);
        return;
      }
      const u = l.getBoundingClientRect();
      a({
        x: u.x,
        y: u.y,
        width: u.width,
        height: u.height,
        top: u.top,
        right: u.right,
        bottom: u.bottom,
        left: u.left
      });
    },
    r,
    [t, o],
    { leading: !0, trailing: !0 }
  );
  return Oe(() => {
    if (!t || !Ng()) {
      a(tg);
      return;
    }
    const l = o();
    if (!l) return;
    s();
    const u = [];
    if (n && f5e) {
      const f = new ResizeObserver(() => {
        window.requestAnimationFrame(s);
      });
      f.observe(l), u.push(() => f.disconnect());
    }
    const c = () => s();
    return window.addEventListener("scroll", c, !0), window.addEventListener("resize", c, !0), u.push(() => {
      window.removeEventListener("scroll", c), window.removeEventListener("resize", c);
    }), () => {
      u.forEach((f) => f()), a(tg);
    };
  }, [t, o, s, n]), i;
}
function h5e(e = {}) {
  return d5e({
    ...e,
    element: Ng() ? document.body : null
  });
}
function p5e({
  editor: e,
  overlayHeight: t = 0
}) {
  const { height: r } = PH(), n = h5e({
    enabled: !0,
    throttleMs: 100,
    useResizeObserver: !0
  });
  return Oe(() => {
    (() => {
      if (!e) return;
      const { state: a, view: o } = e;
      if (!o.hasFocus()) return;
      const { from: s } = a.selection, l = o.coordsAtPos(s);
      if (r < n.height && l && r - l.top < t) {
        const c = Math.max(r / 2, t), f = window.scrollY, h = l.top + f - c;
        window.scrollTo({
          top: Math.max(0, h),
          behavior: "smooth"
        });
      }
    })();
  }, [e, t, r, n.height]), n;
}
const OH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 11.5955 21.7564 11.2309 21.3827 11.0761C21.009 10.9213 20.5789 11.0069 20.2929 11.2929C19.287 12.2988 17.9226 12.864 16.5 12.864C15.0774 12.864 13.713 12.2988 12.7071 11.2929C11.7012 10.287 11.136 8.92261 11.136 7.5C11.136 6.07739 11.7012 4.71304 12.7071 3.70711C12.9931 3.42111 13.0787 2.99099 12.9239 2.61732C12.7691 2.24364 12.4045 2 12 2ZM7.55544 5.34824C8.27036 4.87055 9.05353 4.51389 9.87357 4.28778C9.39271 5.27979 9.13604 6.37666 9.13604 7.5C9.13604 9.45304 9.91189 11.3261 11.2929 12.7071C12.6739 14.0881 14.547 14.864 16.5 14.864C17.6233 14.864 18.7202 14.6073 19.7122 14.1264C19.4861 14.9465 19.1295 15.7296 18.6518 16.4446C17.7727 17.7602 16.5233 18.7855 15.0615 19.391C13.5997 19.9965 11.9911 20.155 10.4393 19.8463C8.88743 19.5376 7.46197 18.7757 6.34315 17.6569C5.22433 16.538 4.4624 15.1126 4.15372 13.5607C3.84504 12.0089 4.00347 10.4003 4.60897 8.93853C5.21447 7.47672 6.23985 6.22729 7.55544 5.34824Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M19 2C19.5523 2 20 2.44772 20 3V4H21C21.5523 4 22 4.44772 22 5C22 5.55228 21.5523 6 21 6H20V7C20 7.55228 19.5523 8 19 8C18.4477 8 18 7.55228 18 7V6H17C16.4477 6 16 5.55228 16 5C16 4.44772 16.4477 4 17 4H18V3C18 2.44772 18.4477 2 19 2Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
OH.displayName = "MoonStarIcon";
const zH = Ue(({ className: e, ...t }) => /* @__PURE__ */ x.jsxs(
  "svg",
  {
    width: "24",
    height: "24",
    className: e,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    xmlns: "http://www.w3.org/2000/svg",
    ...t,
    children: [
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M13 20C13 19.4477 12.5523 19 12 19C11.4477 19 11 19.4477 11 20V22C11 22.5523 11.4477 23 12 23C12.5523 23 13 22.5523 13 22V20Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M4.22282 4.22289C4.61335 3.83236 5.24651 3.83236 5.63704 4.22289L7.04704 5.63289C7.43756 6.02341 7.43756 6.65658 7.04704 7.0471C6.65651 7.43762 6.02335 7.43762 5.63283 7.0471L4.22282 5.6371C3.8323 5.24658 3.8323 4.61341 4.22282 4.22289Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M18.367 16.9529C17.9765 16.5623 17.3433 16.5623 16.9528 16.9529C16.5623 17.3434 16.5623 17.9766 16.9528 18.3671L18.3628 19.7771C18.7533 20.1676 19.3865 20.1676 19.777 19.7771C20.1675 19.3866 20.1675 18.7534 19.777 18.3629L18.367 16.9529Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M20 11C19.4477 11 19 11.4477 19 12C19 12.5523 19.4477 13 20 13H22C22.5523 13 23 12.5523 23 12C23 11.4477 22.5523 11 22 11H20Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M7.04704 16.9529C7.43756 17.3434 7.43756 17.9766 7.04704 18.3671L5.63704 19.7771C5.24651 20.1676 4.61335 20.1676 4.22282 19.7771C3.8323 19.3866 3.8323 18.7534 4.22283 18.3629L5.63283 16.9529C6.02335 16.5623 6.65651 16.5623 7.04704 16.9529Z",
          fill: "currentColor"
        }
      ),
      /* @__PURE__ */ x.jsx(
        "path",
        {
          d: "M19.777 5.6371C20.1675 5.24657 20.1675 4.61341 19.777 4.22289C19.3865 3.83236 18.7533 3.83236 18.3628 4.22289L16.9528 5.63289C16.5623 6.02341 16.5623 6.65658 16.9528 7.0471C17.3433 7.43762 17.9765 7.43762 18.367 7.0471L19.777 5.6371Z",
          fill: "currentColor"
        }
      )
    ]
  }
));
zH.displayName = "SunIcon";
function v5e() {
  const [e, t] = Ze(!1);
  Oe(() => {
    const n = window.matchMedia("(prefers-color-scheme: dark)"), i = () => t(n.matches);
    return n.addEventListener("change", i), () => n.removeEventListener("change", i);
  }, []), Oe(() => {
    const n = !!document.querySelector('meta[name="color-scheme"][content="dark"]') || window.matchMedia("(prefers-color-scheme: dark)").matches;
    t(n);
  }, []), Oe(() => {
    document.documentElement.classList.toggle("dark", e);
  }, [e]);
  const r = () => t((n) => !n);
  return /* @__PURE__ */ x.jsx(
    cr,
    {
      onClick: r,
      "aria-label": `Switch to ${e ? "light" : "dark"} mode`,
      "data-style": "ghost",
      children: e ? /* @__PURE__ */ x.jsx(OH, { className: "tiptap-button-icon" }) : /* @__PURE__ */ x.jsx(zH, { className: "tiptap-button-icon" })
    }
  );
}
const g5e = "doc", m5e = [
  {
    type: "heading",
    attrs: {
      textAlign: null,
      level: 1
    },
    content: [
      {
        type: "text",
        text: "Getting started"
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: null
    },
    content: [
      {
        type: "text",
        text: "Welcome to the "
      },
      {
        type: "text",
        marks: [
          {
            type: "italic"
          },
          {
            type: "highlight",
            attrs: {
              color: "var(--tt-color-highlight-yellow)"
            }
          }
        ],
        text: "Simple Editor"
      },
      {
        type: "text",
        text: " template! This template integrates "
      },
      {
        type: "text",
        marks: [
          {
            type: "bold"
          }
        ],
        text: "open source"
      },
      {
        type: "text",
        text: " UI components and Tiptap extensions licensed under "
      },
      {
        type: "text",
        marks: [
          {
            type: "bold"
          }
        ],
        text: "MIT"
      },
      {
        type: "text",
        text: "."
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: null
    },
    content: [
      {
        type: "text",
        text: "Integrate it by following the "
      },
      {
        type: "text",
        marks: [
          {
            type: "link",
            attrs: {
              href: "https://tiptap.dev/docs/ui-components/templates/simple-editor",
              target: "_blank",
              rel: "noopener noreferrer nofollow",
              class: null
            }
          }
        ],
        text: "Tiptap UI Components docs"
      },
      {
        type: "text",
        text: " or using our CLI tool."
      }
    ]
  },
  {
    type: "codeBlock",
    attrs: {
      language: null
    },
    content: [
      {
        type: "text",
        text: "npx @tiptap/cli init"
      }
    ]
  },
  {
    type: "heading",
    attrs: {
      textAlign: null,
      level: 2
    },
    content: [
      {
        type: "text",
        text: "Features"
      }
    ]
  },
  {
    type: "blockquote",
    content: [
      {
        type: "paragraph",
        attrs: {
          textAlign: null
        },
        content: [
          {
            type: "text",
            marks: [
              {
                type: "italic"
              }
            ],
            text: "A fully responsive rich text editor with built-in support for common formatting and layout tools. Type markdown "
          },
          {
            type: "text",
            marks: [
              {
                type: "code"
              }
            ],
            text: "**"
          },
          {
            type: "text",
            marks: [
              {
                type: "italic"
              }
            ],
            text: " or use keyboard shortcuts "
          },
          {
            type: "text",
            marks: [
              {
                type: "code"
              }
            ],
            text: "⌘+B"
          },
          {
            type: "text",
            text: " for "
          },
          {
            type: "text",
            marks: [
              {
                type: "strike"
              }
            ],
            text: "most"
          },
          {
            type: "text",
            text: " all common markdown marks. 🪄"
          }
        ]
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: "left"
    },
    content: [
      {
        type: "text",
        text: "Add images, customize alignment, and apply "
      },
      {
        type: "text",
        marks: [
          {
            type: "highlight",
            attrs: {
              color: "var(--tt-color-highlight-blue)"
            }
          }
        ],
        text: "advanced formatting"
      },
      {
        type: "text",
        text: " to make your writing more engaging and professional."
      }
    ]
  },
  {
    type: "image",
    attrs: {
      src: "/images/tiptap-ui-placeholder-image.jpg",
      alt: "placeholder-image",
      title: "placeholder-image"
    }
  },
  {
    type: "bulletList",
    content: [
      {
        type: "listItem",
        content: [
          {
            type: "paragraph",
            attrs: {
              textAlign: "left"
            },
            content: [
              {
                type: "text",
                marks: [
                  {
                    type: "bold"
                  }
                ],
                text: "Superscript"
              },
              {
                type: "text",
                text: " (x"
              },
              {
                type: "text",
                marks: [
                  {
                    type: "superscript"
                  }
                ],
                text: "2"
              },
              {
                type: "text",
                text: ") and "
              },
              {
                type: "text",
                marks: [
                  {
                    type: "bold"
                  }
                ],
                text: "Subscript"
              },
              {
                type: "text",
                text: " (H"
              },
              {
                type: "text",
                marks: [
                  {
                    type: "subscript"
                  }
                ],
                text: "2"
              },
              {
                type: "text",
                text: "O) for precision."
              }
            ]
          }
        ]
      },
      {
        type: "listItem",
        content: [
          {
            type: "paragraph",
            attrs: {
              textAlign: "left"
            },
            content: [
              {
                type: "text",
                marks: [
                  {
                    type: "bold"
                  }
                ],
                text: "Typographic conversion"
              },
              {
                type: "text",
                text: ": automatically convert to "
              },
              {
                type: "text",
                marks: [
                  {
                    type: "code"
                  }
                ],
                text: "->"
              },
              {
                type: "text",
                text: " an arrow "
              },
              {
                type: "text",
                marks: [
                  {
                    type: "bold"
                  }
                ],
                text: "→"
              },
              {
                type: "text",
                text: "."
              }
            ]
          }
        ]
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: "left"
    },
    content: [
      {
        type: "text",
        marks: [
          {
            type: "italic"
          }
        ],
        text: "→ "
      },
      {
        type: "text",
        marks: [
          {
            type: "link",
            attrs: {
              href: "https://tiptap.dev/docs/ui-components/templates/simple-editor#features",
              target: "_blank",
              rel: "noopener noreferrer nofollow",
              class: null
            }
          }
        ],
        text: "Learn more"
      }
    ]
  },
  {
    type: "horizontalRule"
  },
  {
    type: "heading",
    attrs: {
      textAlign: "left",
      level: 2
    },
    content: [
      {
        type: "text",
        text: "Make it your own"
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: "left"
    },
    content: [
      {
        type: "text",
        text: "Switch between light and dark modes, and tailor the editor's appearance with customizable CSS to match your style."
      }
    ]
  },
  {
    type: "taskList",
    content: [
      {
        type: "taskItem",
        attrs: {
          checked: !0
        },
        content: [
          {
            type: "paragraph",
            attrs: {
              textAlign: "left"
            },
            content: [
              {
                type: "text",
                text: "Test template"
              }
            ]
          }
        ]
      },
      {
        type: "taskItem",
        attrs: {
          checked: !1
        },
        content: [
          {
            type: "paragraph",
            attrs: {
              textAlign: "left"
            },
            content: [
              {
                type: "text",
                marks: [
                  {
                    type: "link",
                    attrs: {
                      href: "https://tiptap.dev/docs/ui-components/templates/simple-editor",
                      target: "_blank",
                      rel: "noopener noreferrer nofollow",
                      class: null
                    }
                  }
                ],
                text: "Integrate the free template"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    type: "paragraph",
    attrs: {
      textAlign: "left"
    }
  }
], y5e = {
  type: g5e,
  content: m5e
}, x5e = ({
  onHighlighterClick: e,
  onLinkClick: t,
  isMobile: r
}) => /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
  /* @__PURE__ */ x.jsx(fR, {}),
  /* @__PURE__ */ x.jsxs(Ea, { children: [
    /* @__PURE__ */ x.jsx(Q_, { action: "undo" }),
    /* @__PURE__ */ x.jsx(Q_, { action: "redo" })
  ] }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsxs(Ea, { children: [
    /* @__PURE__ */ x.jsx(JF, { levels: [1, 2, 3, 4], portal: r }),
    /* @__PURE__ */ x.jsx(
      VEe,
      {
        types: ["bulletList", "orderedList", "taskList"],
        portal: r
      }
    ),
    /* @__PURE__ */ x.jsx(d$, {}),
    /* @__PURE__ */ x.jsx(v$, {})
  ] }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsxs(Ea, { children: [
    /* @__PURE__ */ x.jsx(Ao, { type: "bold" }),
    /* @__PURE__ */ x.jsx(Ao, { type: "italic" }),
    /* @__PURE__ */ x.jsx(Ao, { type: "strike" }),
    /* @__PURE__ */ x.jsx(Ao, { type: "code" }),
    /* @__PURE__ */ x.jsx(Ao, { type: "underline" }),
    r ? /* @__PURE__ */ x.jsx(nM, { onClick: e }) : /* @__PURE__ */ x.jsx(gNe, {}),
    r ? /* @__PURE__ */ x.jsx(iM, { onClick: t }) : /* @__PURE__ */ x.jsx(fH, {})
  ] }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsxs(Ea, { children: [
    /* @__PURE__ */ x.jsx(Ao, { type: "superscript" }),
    /* @__PURE__ */ x.jsx(Ao, { type: "subscript" })
  ] }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsxs(Ea, { children: [
    /* @__PURE__ */ x.jsx(Ed, { align: "left" }),
    /* @__PURE__ */ x.jsx(Ed, { align: "center" }),
    /* @__PURE__ */ x.jsx(Ed, { align: "right" }),
    /* @__PURE__ */ x.jsx(Ed, { align: "justify" })
  ] }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsx(Ea, { children: /* @__PURE__ */ x.jsx(e$, { text: "Add" }) }),
  /* @__PURE__ */ x.jsx(fR, {}),
  r && /* @__PURE__ */ x.jsx(Ro, {}),
  /* @__PURE__ */ x.jsx(Ea, { children: /* @__PURE__ */ x.jsx(v5e, {}) })
] }), b5e = ({
  type: e,
  onBack: t
}) => /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
  /* @__PURE__ */ x.jsx(Ea, { children: /* @__PURE__ */ x.jsxs(cr, { "data-style": "ghost", onClick: t, children: [
    /* @__PURE__ */ x.jsx(IH, { className: "tiptap-button-icon" }),
    e === "highlighter" ? /* @__PURE__ */ x.jsx(P0, { className: "tiptap-button-icon" }) : /* @__PURE__ */ x.jsx(z0, { className: "tiptap-button-icon" })
  ] }) }),
  /* @__PURE__ */ x.jsx(Ro, {}),
  e === "highlighter" ? /* @__PURE__ */ x.jsx(oH, {}) : /* @__PURE__ */ x.jsx(xNe, {})
] });
function w5e(e) {
  var d;
  const t = e.contentType ?? "json", r = e.applyValue, n = e.applyValueKey, i = Gh(), { height: a } = PH(), [o, s] = Ze(
    "main"
  ), l = Ve(null), u = Gt(() => r !== void 0 ? r : y5e, [r]), c = PG({
    immediatelyRender: !1,
    editorProps: {
      attributes: {
        autocomplete: "off",
        autocorrect: "off",
        autocapitalize: "off",
        "aria-label": "Main content area, start typing to enter text.",
        class: "simple-editor"
      }
    },
    extensions: [
      kG.configure({
        horizontalRule: !1,
        link: {
          openOnClick: !1,
          enableClickSelection: !0
        }
      }),
      xCe,
      uwe.configure({ types: ["heading", "paragraph"] }),
      OG,
      zG.configure({ nested: !0 }),
      kwe.configure({ multicolor: !0 }),
      lwe,
      Lwe,
      zwe,
      Owe,
      jG,
      yCe.configure({
        accept: "image/*",
        maxSize: $_,
        limit: 3,
        upload: iCe,
        onError: (h) => console.error("Upload failed:", h)
      })
    ],
    content: u,
    onUpdate: ({ editor: h }) => {
      var p, v;
      if (e.onValueChange) {
        if (t === "html") {
          (p = e.onValueChange) == null || p.call(e, h.getHTML());
          return;
        }
        (v = e.onValueChange) == null || v.call(e, h.getJSON());
      }
    }
  }), f = p5e({
    editor: c,
    overlayHeight: ((d = l.current) == null ? void 0 : d.getBoundingClientRect().height) ?? 0
  });
  return Oe(() => {
    !i && o !== "main" && s("main");
  }, [i, o]), Oe(() => {
    c && r !== void 0 && c.commands.setContent(r);
  }, [c, n]), /* @__PURE__ */ x.jsx("div", { className: "simple-editor-wrapper", children: /* @__PURE__ */ x.jsxs(VG.Provider, { value: { editor: c }, children: [
    /* @__PURE__ */ x.jsx(
      hB,
      {
        ref: l,
        style: {
          ...i ? {
            bottom: `calc(100% - ${a - f.y}px)`
          } : {}
        },
        children: o === "main" ? /* @__PURE__ */ x.jsx(
          x5e,
          {
            onHighlighterClick: () => s("highlighter"),
            onLinkClick: () => s("link"),
            isMobile: i
          }
        ) : /* @__PURE__ */ x.jsx(
          b5e,
          {
            type: o === "highlighter" ? "highlighter" : "link",
            onBack: () => s("main")
          }
        )
      }
    ),
    /* @__PURE__ */ x.jsx(
      BG,
      {
        editor: c,
        role: "presentation",
        className: "simple-editor-content"
      }
    )
  ] }) });
}
const _5e = (e) => {
  if (!e) return { type: "doc", content: [] };
  if (typeof e == "object") return e;
  if (typeof e == "string")
    try {
      const t = JSON.parse(e);
      if (t && typeof t == "object") return t;
    } catch {
    }
  return { type: "doc", content: [] };
}, S5e = ({ field: e, children: t, onFieldClick: r }) => {
  const { attributes: n, listeners: i, setNodeRef: a, transform: o, transition: s, isDragging: l } = hS({
    id: e.name
  }), u = {
    transform: pS.Transform.toString(o),
    transition: s,
    opacity: l ? 0.5 : 1,
    position: "relative",
    ...l ? { zIndex: 50 } : {}
  };
  return /* @__PURE__ */ x.jsxs("div", { ref: a, style: u, className: "group relative", children: [
    /* @__PURE__ */ x.jsx(
      "div",
      {
        className: "absolute -left-5 top-2 flex h-6 w-6 cursor-grab items-center justify-center opacity-0 transition-opacity group-hover:opacity-100 active:cursor-grabbing",
        ...n,
        ...i,
        children: /* @__PURE__ */ x.jsx(pP, { size: 14, className: "text-slate-400" })
      }
    ),
    /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-[140px_1fr] items-start gap-3", children: [
      /* @__PURE__ */ x.jsx("div", { className: "pt-2 text-xs text-text-muted", children: /* @__PURE__ */ x.jsx(
        "span",
        {
          onClick: () => r == null ? void 0 : r(e),
          className: "cursor-pointer hover:text-primary hover:underline decoration-dashed underline-offset-4",
          title: "Nhấn để cấu hình thuộc tính",
          children: e.label ?? e.name
        }
      ) }),
      /* @__PURE__ */ x.jsx("div", { children: t })
    ] })
  ] });
}, jH = ({
  mode: e = "edit",
  item: t,
  schema: r,
  onPatch: n,
  onSubmit: i,
  onCancel: a,
  onAddProperty: o,
  onFieldClick: s,
  onReorder: l,
  className: u
}) => {
  const c = r.fields, f = oS(
    Cc(dS, { activationConstraint: { distance: 5 } }),
    Cc(fS, { coordinateGetter: cS })
  ), d = (_) => {
    const { active: S, over: C } = _;
    if (!C || S.id === C.id) return;
    const A = c.findIndex((D) => D.name === String(S.id)), M = c.findIndex((D) => D.name === String(C.id));
    A !== -1 && M !== -1 && (l == null || l(A, M));
  }, h = (_, S) => {
    var C;
    if (S == null || S === "") return "Trống";
    if (_.type === "boolean") return S ? "Yes" : "No";
    if (_.type === "date" || _.type === "datetime") {
      const A = typeof S == "string" || typeof S == "number" ? new Date(S) : S;
      return Number.isNaN((C = A == null ? void 0 : A.getTime) == null ? void 0 : C.call(A)) ? String(S) : A.toLocaleString();
    }
    return Array.isArray(S) ? S.map(String).join(", ") : String(S);
  }, p = (_) => {
    n == null || n(t.id, _);
  }, [v, g] = T.useState(""), [m, y] = T.useState([]);
  T.useEffect(() => {
    g(""), y([]);
  }, [t.id]);
  const b = String(e === "create" ? t.data.title ?? t.data.name ?? "" : t.data.title ?? t.data.name ?? t.id), w = (_) => {
    const S = t.data[_.name];
    if (_.name === "id")
      return /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-muted", children: h(_, S) });
    if (_.type === "enum") {
      const C = (_.enumValues ?? []).map((A) => ({ label: A, value: A }));
      return /* @__PURE__ */ x.jsx(
        cy,
        {
          options: C,
          value: typeof S == "string" ? S : "",
          onValueChange: (A) => p({ [_.name]: A }),
          placeholder: "Chọn...",
          compact: !0
        }
      );
    }
    return _.type === "boolean" ? /* @__PURE__ */ x.jsx("div", { className: "pt-2", children: /* @__PURE__ */ x.jsx(
      Zc,
      {
        checked: !!S,
        onChange: (C) => p({ [_.name]: C.target.checked })
      }
    ) }) : _.type === "date" ? /* @__PURE__ */ x.jsx(
      La,
      {
        value: typeof S == "string" ? S : "",
        onValueChange: (C) => p({ [_.name]: C || void 0 })
      }
    ) : _.type === "datetime" ? /* @__PURE__ */ x.jsx(
      Ra,
      {
        value: typeof S == "string" ? S : "",
        onValueChange: (C) => p({ [_.name]: C || void 0 })
      }
    ) : _.type === "text" || _.type === "richtext" ? /* @__PURE__ */ x.jsx(
      Lg,
      {
        value: typeof S == "string" ? S : "",
        onChange: (C) => p({ [_.name]: C.target.value }),
        placeholder: "Nhập...",
        resize: "vertical"
      }
    ) : _.type === "number" ? /* @__PURE__ */ x.jsx(
      mr,
      {
        type: "number",
        value: S == null ? "" : String(S),
        onChange: (C) => {
          const A = C.target.value;
          p({ [_.name]: A === "" ? void 0 : Number(A) });
        },
        placeholder: "0"
      }
    ) : /* @__PURE__ */ x.jsx(
      mr,
      {
        value: typeof S == "string" ? S : S == null ? "" : String(S),
        onChange: (C) => p({ [_.name]: C.target.value }),
        placeholder: "Nhập..."
      }
    );
  };
  return /* @__PURE__ */ x.jsx("div", { className: u, children: /* @__PURE__ */ x.jsxs("div", { className: "text-text-primary", children: [
    /* @__PURE__ */ x.jsx("div", { className: "mb-4", children: /* @__PURE__ */ x.jsx(
      fA,
      {
        value: b,
        onChange: (_) => p({ title: _.target.value }),
        placeholder: "Tiêu đề..."
      }
    ) }),
    /* @__PURE__ */ x.jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold uppercase tracking-wide text-text-muted", children: "Properties" }),
      /* @__PURE__ */ x.jsxs("div", { className: "space-y-2 pl-6", children: [
        /* @__PURE__ */ x.jsx(sS, { sensors: f, collisionDetection: hP, onDragEnd: d, children: /* @__PURE__ */ x.jsx(lS, { items: c.map((_) => _.name), strategy: uS, children: /* @__PURE__ */ x.jsx("div", { className: "space-y-2", children: c.map((_) => /* @__PURE__ */ x.jsx(S5e, { field: _, onFieldClick: s, children: w(_) }, _.name)) }) }) }),
        o && /* @__PURE__ */ x.jsx("div", { className: "mt-4", children: /* @__PURE__ */ x.jsx(
          xt,
          {
            type: "button",
            variant: "ghost",
            className: "justify-start text-text-secondary hover:text-primary",
            icon: /* @__PURE__ */ x.jsx(Qc, { size: 16 }),
            onClick: o,
            children: "Thêm thuộc tính"
          }
        ) })
      ] })
    ] }),
    e !== "create" && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
      /* @__PURE__ */ x.jsxs("div", { className: "mt-6 space-y-2", children: [
        /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold uppercase tracking-wide text-text-muted", children: "Bình luận" }),
        /* @__PURE__ */ x.jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ x.jsx(
            Lg,
            {
              value: v,
              onChange: (_) => g(_.target.value),
              placeholder: "Thêm bình luận...",
              resize: "vertical"
            }
          ),
          /* @__PURE__ */ x.jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ x.jsx(
            xt,
            {
              size: "sm",
              variant: "primary",
              onClick: () => {
                const _ = v.trim();
                _ && (y((S) => [_, ...S]), g(""));
              },
              children: "Gửi"
            }
          ) }),
          m.length > 0 && /* @__PURE__ */ x.jsx("div", { className: "space-y-2", children: m.map((_, S) => /* @__PURE__ */ x.jsx("div", { className: "rounded-xl bg-surface-alt px-3 py-2 text-sm text-text-primary", children: _ }, S)) })
        ] })
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "mt-6 space-y-2", children: [
        /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold uppercase tracking-wide text-text-muted", children: "Canvas" }),
        /* @__PURE__ */ x.jsx(
          w5e,
          {
            contentType: "json",
            applyValue: _5e(t.data.canvas),
            applyValueKey: t.id,
            onValueChange: (_) => p({ canvas: _ })
          }
        )
      ] })
    ] }),
    e === "create" && i && /* @__PURE__ */ x.jsxs("div", { className: "mt-6 flex justify-end gap-2 pt-4 border-t border-slate-100", children: [
      a && /* @__PURE__ */ x.jsx(xt, { type: "button", variant: "secondary", onClick: a, children: "Hủy" }),
      /* @__PURE__ */ x.jsx(
        xt,
        {
          type: "button",
          variant: "primary",
          onClick: () => {
            i(t.data);
          },
          children: "Tạo task"
        }
      )
    ] })
  ] }) });
};
jH.displayName = "KanbanItemDetail";
const eS = ({
  open: e,
  mode: t = "edit",
  item: r,
  schema: n,
  onClose: i,
  onPatch: a,
  onSubmit: o,
  onCancel: s,
  onAddProperty: l,
  onFieldClick: u,
  onReorder: c
}) => r ? /* @__PURE__ */ x.jsx(
  tf,
  {
    open: e,
    onClose: i,
    title: t === "create" ? "Tạo task" : void 0,
    position: "top-right",
    size: "lg",
    animation: "slide-in",
    fullHeight: !0,
    noBorder: !0,
    className: "p-5",
    children: /* @__PURE__ */ x.jsx(
      jH,
      {
        mode: t,
        item: r,
        schema: n,
        onPatch: a,
        onSubmit: o,
        onCancel: s,
        onAddProperty: l,
        onFieldClick: u,
        onReorder: c
      }
    )
  }
) : null;
eS.displayName = "KanbanDetailModal";
const C5e = {
  sideEffects: uW({
    styles: {
      active: {
        opacity: "0.5"
      }
    }
  })
}, T5e = ({
  schema: e,
  mappings: t,
  columns: r,
  items: n,
  onCreate: i,
  onUpdate: a,
  onMove: o,
  onBulkAction: s,
  onLoadMore: l,
  realtime: u,
  renderCard: c,
  renderColumnHeader: f,
  pageSize: d,
  virtualization: h,
  permissions: p,
  locale: v,
  className: g,
  style: m,
  orientation: y = "horizontal",
  instanceId: b,
  selectedId: w,
  onSelectionChange: _,
  disableDetailModal: S
}) => {
  const C = qc(), A = T.useRef(null);
  A.current || (A.current = Jc());
  const M = b ?? A.current, [D, N] = T.useState(null), R = w !== void 0 ? w : D, [O, E] = T.useState(null), [L, I] = T.useState(null), [P, k] = T.useState(null), [z, V] = T.useState(null), [B, F] = T.useState(!1), [H, G] = T.useState(null), [W, X] = T.useState(null), [q, J] = T.useState(() => [...e.fields]), U = T.useMemo(() => ({
    ...e,
    fields: q
  }), [e, q]), $ = T.useMemo(() => {
    if (!W) return null;
    const he = q.find((Se) => Se.name === W);
    return he ? {
      name: he.name,
      label: he.label ?? he.name,
      type: String(he.type)
    } : null;
  }, [W, q]), Y = (he, Se) => {
    J((Be) => cW(Be, he, Se));
  }, Z = (he, Se) => {
    J((Be) => Be.map((ne) => ne.name === he ? { ...ne, label: Se } : ne));
  }, K = (he) => {
    J((Se) => Se.filter((Be) => Be.name !== he)), it((Se) => Se.filter((Be) => Be !== he)), X((Se) => Se === he ? null : Se), G((Se) => (Se == null ? void 0 : Se.name) === he ? null : Se);
  }, ie = (he) => {
    const Se = `${he}_copy_${Date.now()}`;
    J((Be) => {
      const ne = Be.findIndex((Je) => Je.name === he);
      if (ne === -1) return Be;
      const Me = Be[ne], je = {
        ...Me,
        name: Se,
        label: `${Me.label || Me.name} (Copy)`
      }, $e = [...Be];
      return $e.splice(ne + 1, 0, je), $e;
    }), it((Be) => Be.includes(Se) ? Be : [...Be, Se]);
  }, [Q, ce] = T.useState(!1), [te, oe] = T.useState(!1), [de, Pe] = T.useState([]), [Ke, it] = T.useState(() => {
    var he;
    return (t == null ? void 0 : t.cardMeta) ?? ((he = e.defaultMappings) == null ? void 0 : he.cardMeta) ?? [];
  }), Dt = T.useMemo(() => de.length ? n.filter((he) => de.every((Se) => {
    const Be = he[Se.fieldId], ne = Se.value;
    if (Se.operator === "empty")
      return Be == null || Be === "";
    if (Se.operator === "not_empty")
      return Be != null && Be !== "";
    if (ne == null) return !0;
    if (Array.isArray(ne))
      return Be ? Se.operator === "not_in" ? !ne.includes(Be) : ne.includes(Be) : !1;
    if (typeof Be == "string") {
      const Me = Be.toLowerCase(), je = String(ne).toLowerCase();
      switch (Se.operator) {
        case "contains":
          return Me.includes(je);
        case "not_contains":
          return !Me.includes(je);
        case "starts_with":
          return Me.startsWith(je);
        case "ends_with":
          return Me.endsWith(je);
        case "eq":
          return Me === je;
        case "neq":
          return Me !== je;
        default:
          return Me.includes(je);
      }
    }
    return Se.operator === "eq" ? Be === ne : Se.operator === "neq" ? Be !== ne : Se.operator === "gt" ? Number(Be) > Number(ne) : Se.operator === "gte" ? Number(Be) >= Number(ne) : Se.operator === "lt" ? Number(Be) < Number(ne) : Se.operator === "lte" ? Number(Be) <= Number(ne) : Be == ne;
  })) : n, [n, de, U.fields]), { state: Pt, getItemById: gr, moveItemLocal: Kt, addItemLocal: _e, updateItemLocal: re, removeItemLocal: ve, replaceState: Ae } = Z2e({
    schema: U,
    mappings: t,
    items: Dt,
    columns: r,
    pageSize: d
  });
  X2e({
    instanceId: M,
    moveItemLocal: Kt,
    updateItemLocal: re,
    addItemLocal: _e,
    removeItemLocal: ve
  });
  const Re = R ? gr(R) ?? null : null, gt = T.useCallback((he) => {
    it((Se) => Se.includes(he) ? Se.filter((Be) => Be !== he) : [...Se, he]);
  }, []), Ye = T.useMemo(() => U.fields.map((he) => {
    var Se;
    return {
      id: he.name,
      label: he.label || he.name,
      type: he.type,
      options: (Se = he.enumValues) == null ? void 0 : Se.map((Be) => ({ label: Be, value: Be }))
    };
  }), [U.fields]), we = T.useMemo(() => [
    {
      id: "view_settings_group",
      label: "Xem cài đặt",
      type: "group",
      children: [
        {
          id: "layout",
          label: "Bố cục",
          icon: /* @__PURE__ */ x.jsx(AU, { size: 16 }),
          description: "Điều chỉnh cách hiển thị",
          children: [
            { id: "board", label: "Board", icon: /* @__PURE__ */ x.jsx(HW, { size: 16 }) },
            { id: "list", label: "List", icon: /* @__PURE__ */ x.jsx(Y0, { size: 16 }) }
          ]
        },
        {
          id: "properties",
          label: "Chế độ hiển thị thuộc tính",
          icon: /* @__PURE__ */ x.jsx(wM, { size: 16 }),
          description: "Chọn các trường thông tin hiển thị trên card",
          children: U.fields.map((he) => ({
            id: he.name,
            label: he.label || he.name,
            icon: Ke.includes(he.name) ? /* @__PURE__ */ x.jsx(yS, { size: 16, className: "text-primary" }) : /* @__PURE__ */ x.jsx("div", { className: "w-4 h-4" }),
            onClick: () => gt(he.name)
          }))
        },
        {
          id: "filter",
          label: "Bộ lọc",
          icon: /* @__PURE__ */ x.jsx(Pg, { size: 16 }),
          onClick: () => {
            oe(!1), ce(!0);
          }
        },
        {
          id: "sort",
          label: "Sắp xếp",
          icon: /* @__PURE__ */ x.jsx(MP, { size: 16 })
        },
        {
          id: "group",
          label: "Nhóm",
          icon: /* @__PURE__ */ x.jsx(Y0, { size: 16 })
        },
        {
          id: "sub_group",
          label: "Nhóm con",
          icon: /* @__PURE__ */ x.jsx(Y0, { size: 16, className: "opacity-70" })
        },
        {
          id: "conditional_color",
          label: "Màu có điều kiện",
          icon: /* @__PURE__ */ x.jsx(CU, { size: 16 })
        }
      ]
    },
    {
      id: "data_source_group",
      label: "Cài đặt nguồn dữ liệu",
      type: "group",
      children: [
        {
          id: "edit_properties",
          label: "Chỉnh sửa thuộc tính",
          icon: /* @__PURE__ */ x.jsx(wM, { size: 16 })
        },
        {
          id: "automation",
          label: "Tự động hóa",
          icon: /* @__PURE__ */ x.jsx(uY, { size: 16 })
        }
      ]
    }
  ], [U.fields, Ke, gt]), ke = oS(
    Cc(dS, {
      activationConstraint: {
        distance: 4
      }
    }),
    Cc(fS, {
      coordinateGetter: cS
    })
  ), De = T.useCallback((he) => {
    k(String(he.active.id));
  }, []), ft = T.useCallback(
    (he) => {
      const { active: Se, over: Be } = he;
      if (k(null), !Be || Se.id === Be.id || p && p.canMove === !1) return;
      const ne = String(Se.id), Me = String(Be.id), je = (Qe) => {
        for (const mt of Pt.columns) {
          const Lt = mt.itemIds.indexOf(Qe);
          if (Lt !== -1)
            return { columnKey: mt.key, index: Lt };
        }
        return null;
      }, $e = je(ne);
      let Je = je(Me);
      if (!Je) {
        const Qe = Pt.columns.find((mt) => mt.key === Me);
        Qe && (Je = { columnKey: Qe.key, index: Qe.itemIds.length });
      }
      if (!$e || !Je) return;
      C(
        "KANBAN.CARD_MOVE",
        {
          id: ne,
          from: { columnKey: $e.columnKey, index: $e.index },
          to: { columnKey: Je.columnKey, index: Je.index },
          instanceId: M
        },
        { meta: { component: "KanbanBoard", instanceId: M } }
      );
      const ht = Pt;
      Kt(
        ne,
        { columnKey: $e.columnKey },
        { columnKey: Je.columnKey },
        Je.index
      ), o && Promise.resolve(
        o(
          ne,
          { columnKey: $e.columnKey },
          { columnKey: Je.columnKey },
          Je.index
        )
      ).catch(() => {
        Ae(ht);
      });
    },
    [o, Kt, Ae, Pt, p]
  ), Bt = (he) => {
    C(
      Il.UI_CLICK,
      { component: "KanbanBoard", action: "open_detail", id: he.id, instanceId: M },
      { meta: { component: "KanbanBoard", instanceId: M } }
    ), _ ? _(he.id) : N(he.id);
  }, nt = () => {
    _ ? _(null) : N(null), E(null), I(null), V(null), F(!1), G(null), X(null);
  }, Er = T.useCallback(
    (he) => {
      const Se = {};
      U.fields.forEach((Me) => {
        Me.defaultValue !== void 0 && (Se[Me.name] = Me.defaultValue);
      });
      const ne = (t ?? e.defaultMappings ?? {}).columnKey;
      return ne && he && (Se[ne] = he), Se;
    },
    [U.fields, e, t]
  ), At = y === "horizontal" ? "flex w-full gap-4" : "flex w-full flex-col gap-4", Yt = Pt.columns.filter((he) => he.config.visible !== !1), $r = Yt.some((he) => he.itemIds.length > 0), xa = T.useMemo(
    () => Yt.reduce((he, Se) => he + Se.itemIds.length, 0),
    [Yt]
  );
  return /* @__PURE__ */ x.jsxs(sS, { sensors: ke, onDragStart: De, onDragEnd: ft, children: [
    /* @__PURE__ */ x.jsxs(
      "div",
      {
        className: me(
          fe("flex h-full w-full flex-col rounded-2xl bg-surface-alt p-3", g)
        ),
        style: m,
        role: "region",
        "aria-label": "Kanban Board",
        children: [
          /* @__PURE__ */ x.jsx(
            MV,
            {
              onFilterClick: () => ce((he) => !he),
              filterActive: Q || de.length > 0,
              onSettingsClick: () => oe(!0),
              settingsActive: te,
              extraActions: p != null && p.canCreate && i ? /* @__PURE__ */ x.jsx(
                xt,
                {
                  size: "sm",
                  variant: "primary",
                  "aria-label": "Thêm task",
                  title: "Thêm task",
                  className: "px-2",
                  onClick: () => {
                    C(
                      Il.UI_CLICK,
                      { component: "KanbanBoard", action: "create", instanceId: M },
                      { meta: { component: "KanbanBoard", instanceId: M } }
                    ), _ ? _(null) : N(null), E("create"), I(null), V(Er(null));
                  },
                  children: /* @__PURE__ */ x.jsx(Qc, { size: 16 })
                }
              ) : null
            }
          ),
          Q && /* @__PURE__ */ x.jsx("div", { className: "mb-3 border-b border-slate-200 pb-3", children: /* @__PURE__ */ x.jsx(
            SV,
            {
              fields: Ye,
              filters: de,
              onFiltersChange: Pe
            }
          ) }),
          /* @__PURE__ */ x.jsx(
            Ek,
            {
              title: "Board",
              locale: v,
              count: xa
            }
          ),
          !$r && /* @__PURE__ */ x.jsx(
            ok,
            {
              title: "Không có task nào",
              description: "Hãy bắt đầu bằng cách tạo task mới hoặc đồng bộ dữ liệu từ backend."
            }
          ),
          $r && /* @__PURE__ */ x.jsx(
            $h,
            {
              direction: y === "horizontal" ? "horizontal" : "vertical",
              autoHide: !0,
              className: "-m-1 flex-1 p-1",
              children: /* @__PURE__ */ x.jsx("div", { className: At, children: Yt.map((he) => {
                const Se = he.itemIds.map((Me) => Pt.itemsById[Me]).filter(Boolean), Be = he.config.label ?? he.config.value, ne = f ? f(he.config, () => /* @__PURE__ */ x.jsx("span", { children: Be })) : Be;
                return /* @__PURE__ */ x.jsx("div", { className: "flex flex-col", children: /* @__PURE__ */ x.jsx(
                  DV,
                  {
                    columnKey: he.key,
                    title: String(ne),
                    items: Se,
                    schema: U,
                    mappings: t,
                    onAddClick: p != null && p.canCreate && i ? () => {
                      _ ? _(null) : N(null), E("create"), I(he.key), V(Er(he.key));
                    } : void 0,
                    onCardClick: Bt,
                    renderCard: c,
                    virtualized: h,
                    visibleFields: Ke
                  }
                ) }, he.key);
              }) })
            }
          ),
          /* @__PURE__ */ x.jsx(
            eS,
            {
              open: O === "create" && !!z,
              mode: "create",
              item: z ? { id: "__draft__", data: z } : null,
              schema: U,
              onClose: nt,
              onCancel: nt,
              onSubmit: async (he) => {
                if (!i) return;
                let Se = he;
                const Be = await i(he);
                Be && (Se = Be), _e(Se), nt();
              },
              onPatch: (he, Se) => {
                V((Be) => ({
                  ...Be ?? Er(L),
                  ...Se
                }));
              },
              onAddProperty: () => {
                G(null), F(!0);
              },
              onFieldClick: (he) => {
                he != null && he.name && X(String(he.name));
              },
              onReorder: Y
            }
          ),
          !S && /* @__PURE__ */ x.jsx(
            eS,
            {
              open: !!Re,
              mode: "edit",
              item: Re,
              schema: U,
              onClose: nt,
              onPatch: (he, Se) => {
                const Be = Pt;
                re(he, Se), a && Promise.resolve(a(he, Se)).catch(() => {
                  Ae(Be);
                });
              },
              onAddProperty: () => {
                G(null), F(!0);
              },
              onFieldClick: (he) => {
                he != null && he.name && X(String(he.name));
              },
              onReorder: Y
            }
          ),
          /* @__PURE__ */ x.jsx(
            ewe,
            {
              items: we,
              open: te,
              onClose: () => oe(!1)
            }
          ),
          /* @__PURE__ */ x.jsx(
            twe,
            {
              open: B,
              onClose: () => {
                F(!1), G(null);
              },
              editField: H,
              onAdd: (he) => {
                J((Se) => Se.some((Be) => Be.name === he.name) ? Se : [
                  ...Se,
                  {
                    name: he.name,
                    label: he.label,
                    type: he.type,
                    enumValues: he.enumValues
                  }
                ]), it((Se) => Se.includes(he.name) ? Se : [...Se, he.name]);
              },
              onUpdate: (he) => {
                J(
                  (Se) => Se.map(
                    (Be) => Be.name === he.name ? { ...Be, label: he.label, type: he.type, enumValues: he.enumValues } : Be
                  )
                );
              }
            }
          ),
          /* @__PURE__ */ x.jsx(
            rwe,
            {
              open: !!$,
              field: $,
              onClose: () => X(null),
              onRename: Z,
              onDelete: K,
              onDuplicate: ie,
              onEditType: (he) => {
                const Se = q.find((Be) => Be.name === he);
                Se && (G({
                  name: Se.name,
                  label: Se.label ?? Se.name,
                  type: String(Se.type),
                  enumValues: Se.enumValues
                }), F(!0));
              }
            }
          )
        ]
      }
    ),
    /* @__PURE__ */ x.jsx(lW, { dropAnimation: C5e, children: P && gr(P) ? /* @__PURE__ */ x.jsx(
      x0,
      {
        item: gr(P),
        schema: U,
        mappings: t,
        renderCard: c,
        visibleFields: Ke
      }
    ) : null })
  ] });
};
T5e.displayName = "KanbanBoard";
const il = () => Intl.DateTimeFormat().resolvedOptions().timeZone ?? "local", u2 = (e, t) => kr(e, "yyyy-MM-dd", t ? { locale: t } : void 0), UR = (e, t) => kr(e, "yyyy-MM-dd HH:mm", t ? { locale: t } : void 0), YR = (e) => {
  if (!e) return;
  const [t, r, n] = e.split("-").map(Number);
  if (!(!t || !r || !n))
    return new Date(t, r - 1, n, 0, 0, 0, 0);
}, ZR = (e) => {
  if (!e) return;
  const [t, r] = e.split(" "), [n, i, a] = (t == null ? void 0 : t.split("-").map(Number)) ?? [];
  if (!n || !i || !a) return;
  let o = 0, s = 0;
  if (r) {
    const [l, u] = r.split(":").map(Number);
    o = Number.isFinite(l) ? l : 0, s = Number.isFinite(u) ? u : 0;
  }
  return new Date(n, i - 1, a, o, s, 0, 0);
}, A5e = (e, t, r, n) => {
  const i = n ? { locale: n } : void 0;
  if (r === "month")
    return kr(e, "MMMM yyyy", i);
  const a = Nd(t, 1);
  return r === "day" ? kr(e, "PPP", i) : e.getFullYear() !== a.getFullYear() ? `${kr(e, "PPP", i)} - ${kr(a, "PPP", i)}` : e.getMonth() !== a.getMonth() ? `${kr(e, "MMM d", i)} - ${kr(a, "MMM d, yyyy", i)}` : `${kr(e, "MMM d", i)} - ${kr(a, "d, yyyy", i)}`;
}, Dd = (e, t, r) => t && t.getTime() > e.getTime() ? t : r ? Go(e, 1) : new Date(e.getTime() + 60 * 60 * 1e3), VH = ({
  title: e,
  view: t,
  onPrev: r,
  onNext: n,
  onToday: i,
  onViewChange: a,
  isToday: o,
  className: s
}) => /* @__PURE__ */ x.jsx("div", { className: s, children: /* @__PURE__ */ x.jsxs("div", { className: "flex flex-wrap items-center justify-between gap-3", children: [
  /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    /* @__PURE__ */ x.jsx(xt, { variant: "secondary", size: "sm", onClick: i, disabled: !!o, children: "Hôm nay" }),
    /* @__PURE__ */ x.jsxs("div", { className: "flex items-center", children: [
      /* @__PURE__ */ x.jsx(Nr, { icon: hy, size: "xs", onClick: r }),
      /* @__PURE__ */ x.jsx(Nr, { icon: vS, size: "xs", onClick: n })
    ] }),
    /* @__PURE__ */ x.jsx("div", { className: "ml-1 text-sm font-semibold text-text-primary", children: e })
  ] }),
  /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    /* @__PURE__ */ x.jsx(
      xt,
      {
        variant: t === "month" ? "primary" : "secondary",
        size: "sm",
        onClick: () => a("month"),
        children: "Tháng"
      }
    ),
    /* @__PURE__ */ x.jsx(
      xt,
      {
        variant: t === "week" ? "primary" : "secondary",
        size: "sm",
        onClick: () => a("week"),
        children: "Tuần"
      }
    ),
    /* @__PURE__ */ x.jsx(
      xt,
      {
        variant: t === "day" ? "primary" : "secondary",
        size: "sm",
        onClick: () => a("day"),
        children: "Ngày"
      }
    )
  ] })
] }) });
VH.displayName = "CalendarToolbar";
const lM = ({
  open: e,
  mode: t,
  value: r,
  dateFnsLocale: n,
  onCancel: i,
  onSave: a,
  onDelete: o
}) => {
  const [s, l] = T.useState(r.title), [u, c] = T.useState(r.allDay), [f, d] = T.useState(r.start), [h, p] = T.useState(r.end), [v, g] = T.useState(r.color);
  T.useEffect(() => {
    l(r.title), c(r.allDay), d(r.start), p(r.end), g(r.color);
  }, [r]);
  const m = T.useMemo(() => u2(f, n), [f, n]), y = T.useMemo(() => u2(u ? Nd(h, 1) : h, n), [u, h, n]), b = T.useMemo(() => UR(f, n), [f, n]), w = T.useMemo(() => UR(h, n), [h, n]);
  return /* @__PURE__ */ x.jsx(
    tf,
    {
      open: e,
      onClose: i,
      title: t === "create" ? "Tạo sự kiện" : "Chỉnh sửa sự kiện",
      position: "top-right",
      size: "lg",
      animation: "slide-in",
      fullHeight: !0,
      noBorder: !0,
      className: "p-5",
      children: /* @__PURE__ */ x.jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ x.jsxs("div", { children: [
          /* @__PURE__ */ x.jsx("div", { className: "mb-1 text-xs font-semibold text-text-muted", children: "Tiêu đề" }),
          /* @__PURE__ */ x.jsx(
            fA,
            {
              value: s,
              onChange: (_) => l(_.target.value),
              placeholder: "Thêm tiêu đề"
            }
          )
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
          /* @__PURE__ */ x.jsx(
            Zc,
            {
              checked: u,
              onChange: (_) => {
                const S = _.target.checked;
                if (c(S), S) {
                  const C = new Date(f);
                  C.setHours(0, 0, 0, 0), d(C);
                  const M = Nd(h, 1), D = M.getTime() < C.getTime() ? C : M;
                  p(Go(D, 1));
                }
              },
              label: "Cả ngày"
            }
          ),
          /* @__PURE__ */ x.jsx("div", { className: "text-xs text-text-muted", children: r.timezone })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-1 gap-3 sm:grid-cols-2", children: [
          /* @__PURE__ */ x.jsxs("div", { children: [
            /* @__PURE__ */ x.jsx("div", { className: "mb-1 text-xs font-semibold text-text-muted", children: "Bắt đầu" }),
            u ? /* @__PURE__ */ x.jsx(
              La,
              {
                value: m,
                onValueChange: (_) => {
                  const S = YR(_);
                  if (!S) return;
                  d(S), Nd(h, 1).getTime() < S.getTime() && p(Go(S, 1));
                }
              }
            ) : /* @__PURE__ */ x.jsx(
              Ra,
              {
                value: b,
                onValueChange: (_) => {
                  const S = ZR(_);
                  S && d(S);
                }
              }
            )
          ] }),
          /* @__PURE__ */ x.jsxs("div", { children: [
            /* @__PURE__ */ x.jsx("div", { className: "mb-1 text-xs font-semibold text-text-muted", children: "Kết thúc" }),
            u ? /* @__PURE__ */ x.jsx(
              La,
              {
                value: y,
                onValueChange: (_) => {
                  const S = YR(_);
                  S && p(Go(S, 1));
                }
              }
            ) : /* @__PURE__ */ x.jsx(
              Ra,
              {
                value: w,
                onValueChange: (_) => {
                  const S = ZR(_);
                  S && p(S);
                }
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { children: [
          /* @__PURE__ */ x.jsx("div", { className: "mb-1 text-xs font-semibold text-text-muted", children: "Màu" }),
          /* @__PURE__ */ x.jsx(
            wP,
            {
              value: v ?? "#0ea5e9",
              onChange: (_) => g(_)
            }
          )
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "flex flex-wrap justify-end gap-2 pt-2", children: [
          t === "edit" && o && /* @__PURE__ */ x.jsx(xt, { variant: "danger", onClick: o, children: "Xóa" }),
          /* @__PURE__ */ x.jsx(xt, { variant: "secondary", onClick: i, children: "Hủy" }),
          /* @__PURE__ */ x.jsx(
            xt,
            {
              variant: "primary",
              onClick: () => {
                a({
                  ...r,
                  title: s.trim() || "Sự kiện",
                  start: f,
                  end: h,
                  allDay: u,
                  color: v
                });
              },
              children: "Lưu"
            }
          )
        ] })
      ] })
    }
  );
};
lM.displayName = "EventDialog";
const BH = (e) => {
  const t = ol(e.start), r = ol(e.end);
  return {
    id: e.id,
    title: e.title,
    start: t,
    end: r,
    allDay: e.allDay,
    timezone: e.timezone,
    color: e.color
  };
}, M5e = (e) => e === "dayGridMonth" ? "month" : e === "timeGridDay" ? "day" : "week", XR = (e) => e === "month" ? "dayGridMonth" : e === "day" ? "timeGridDay" : "timeGridWeek", E5e = ({
  events: e,
  defaultEvents: t,
  onEventsChange: r,
  initialView: n = "week",
  height: i = "100%",
  className: a,
  style: o,
  dateFnsLocale: s,
  editable: l = !0,
  selectable: u = !0,
  nowIndicator: c = !0,
  onEventCreate: f,
  onEventUpdate: d,
  onEventDelete: h
}) => {
  var J;
  const p = e !== void 0, [v, g] = T.useState(t ?? []), m = p ? e ?? [] : v, y = T.useCallback(
    (U) => {
      p || g(U), r == null || r(U);
    },
    [p, r]
  ), b = T.useRef(null), [w, _] = T.useState(n), [S, C] = T.useState(""), [A, M] = T.useState(!1), [D, N] = T.useState(!1), [R, O] = T.useState("create"), [E, L] = T.useState(() => {
    const U = /* @__PURE__ */ new Date(), $ = U, Y = new Date(U.getTime() + 60 * 60 * 1e3);
    return {
      title: "",
      start: $,
      end: Y,
      allDay: !1,
      timezone: il(),
      color: "#0ea5e9"
    };
  }), I = T.useMemo(
    () => m.map((U) => ({
      id: U.id,
      title: U.title,
      start: U.start,
      end: U.end,
      allDay: U.allDay,
      backgroundColor: U.color,
      borderColor: U.color,
      extendedProps: {
        timezone: U.timezone
      }
    })),
    [m]
  ), P = T.useCallback(
    (U, $, Y) => {
      O("create"), L({
        title: "",
        start: U,
        end: $,
        allDay: Y,
        timezone: il(),
        color: "#0ea5e9"
      }), N(!0);
    },
    []
  ), k = T.useCallback((U) => {
    O("edit"), L(BH(U)), N(!0);
  }, []), z = T.useCallback(
    (U) => {
      const $ = M5e(U.view.type);
      _($), C(A5e(U.start, U.end, $, s)), M(mP(U.view.calendar.getDate(), /* @__PURE__ */ new Date()));
    },
    [s]
  ), V = T.useCallback(
    (U) => {
      const $ = U.date, Y = U.allDay ? new Date($.getTime() + 24 * 60 * 60 * 1e3) : new Date($.getTime() + 60 * 60 * 1e3);
      P($, Y, U.allDay);
    },
    [P]
  ), B = T.useCallback(
    (U) => {
      var ie;
      const $ = U.event.start;
      if (!$) return;
      const Y = typeof ((ie = U.event.extendedProps) == null ? void 0 : ie.timezone) == "string" ? U.event.extendedProps.timezone : il(), Z = Dd($, U.event.end, !!U.event.allDay), K = {
        id: U.event.id,
        title: U.event.title,
        start: $.toISOString(),
        end: Z.toISOString(),
        allDay: !!U.event.allDay,
        timezone: Y,
        color: U.event.backgroundColor || void 0
      };
      k(K);
    },
    [k]
  ), F = T.useCallback(
    async (U) => {
      const $ = m.some((Y) => Y.id === U.id) ? m.map((Y) => Y.id === U.id ? U : Y) : [U, ...m];
      y($), m.some((Y) => Y.id === U.id) ? await (d == null ? void 0 : d(U)) : await (f == null ? void 0 : f(U));
    },
    [y, m, f, d]
  ), H = T.useCallback(
    async (U) => {
      const $ = m.filter((Y) => Y.id !== U);
      y($), await (h == null ? void 0 : h(U));
    },
    [y, m, h]
  ), G = T.useCallback(
    async (U) => {
      var K;
      const $ = U.event.start;
      if (!$) return;
      const Y = typeof ((K = U.event.extendedProps) == null ? void 0 : K.timezone) == "string" ? U.event.extendedProps.timezone : il(), Z = Dd($, U.event.end, !!U.event.allDay);
      await F({
        id: U.event.id,
        title: U.event.title,
        start: $.toISOString(),
        end: Z.toISOString(),
        allDay: !!U.event.allDay,
        timezone: Y,
        color: U.event.backgroundColor || void 0
      });
    },
    [F]
  ), W = T.useCallback(
    async (U) => {
      var K;
      const $ = U.event.start;
      if (!$) return;
      const Y = typeof ((K = U.event.extendedProps) == null ? void 0 : K.timezone) == "string" ? U.event.extendedProps.timezone : il(), Z = Dd($, U.event.end, !!U.event.allDay);
      await F({
        id: U.event.id,
        title: U.event.title,
        start: $.toISOString(),
        end: Z.toISOString(),
        allDay: !!U.event.allDay,
        timezone: Y,
        color: U.event.backgroundColor || void 0
      });
    },
    [F]
  ), X = T.useCallback(
    async (U) => {
      const $ = U.id ?? Jc(), Y = U.start, Z = Dd(Y, U.end, U.allDay);
      await F({
        id: $,
        title: U.title,
        start: Y.toISOString(),
        end: Z.toISOString(),
        allDay: U.allDay,
        timezone: U.timezone,
        color: U.color
      }), N(!1);
    },
    [F]
  ), q = (J = b.current) == null ? void 0 : J.getApi();
  return /* @__PURE__ */ x.jsxs(
    "div",
    {
      className: a,
      style: o,
      children: [
        /* @__PURE__ */ x.jsx("div", { className: "rounded-2xl bg-surface p-3 shadow-soft", children: /* @__PURE__ */ x.jsx(
          VH,
          {
            title: S,
            view: w,
            isToday: A,
            onPrev: () => q == null ? void 0 : q.prev(),
            onNext: () => q == null ? void 0 : q.next(),
            onToday: () => q == null ? void 0 : q.today(),
            onViewChange: (U) => q == null ? void 0 : q.changeView(XR(U))
          }
        ) }),
        /* @__PURE__ */ x.jsx("div", { className: "mt-3 rounded-2xl bg-surface p-3 shadow-soft", children: /* @__PURE__ */ x.jsx("div", { className: "rai-calendar", style: { height: i }, children: /* @__PURE__ */ x.jsx(
          vW,
          {
            ref: b,
            plugins: [gW, mW, yW],
            initialView: XR(n),
            headerToolbar: !1,
            height: i,
            events: I,
            editable: l,
            selectable: u,
            nowIndicator: c,
            selectMirror: !0,
            dayMaxEvents: !0,
            stickyHeaderDates: !0,
            expandRows: !0,
            scrollTime: "08:00:00",
            slotDuration: "00:30:00",
            slotLabelInterval: "01:00",
            allDaySlot: !0,
            datesSet: z,
            dateClick: V,
            eventClick: B,
            eventDrop: G,
            eventResize: W
          }
        ) }) }),
        /* @__PURE__ */ x.jsx(
          lM,
          {
            open: D,
            mode: R,
            value: E,
            dateFnsLocale: s,
            onCancel: () => N(!1),
            onSave: X,
            onDelete: R === "edit" && E.id ? () => {
              const U = E.id;
              U && (H(U), N(!1));
            } : void 0
          }
        )
      ]
    }
  );
};
E5e.displayName = "Calendar";
const D5e = (e, t, r) => Math.min(r, Math.max(t, e)), N5e = (e) => {
  if (!e) return sl(/* @__PURE__ */ new Date());
  if (e instanceof Date) return sl(e);
  const t = ol(e);
  return sl(t);
}, I5e = (e) => {
  var r;
  const t = (r = e == null ? void 0 : e.options) == null ? void 0 : r.weekStartsOn;
  return typeof t == "number" && t >= 0 && t <= 6 ? t : 1;
}, oy = (e) => kr(e, "yyyy-MM-dd"), Oo = (e) => {
  const t = new Date(e);
  return t.setHours(0, 0, 0, 0), t;
}, L5e = (e, t, r) => {
  const n = Oo(e).getTime(), i = Oo(t).getTime(), a = Oo(r).getTime(), o = Math.min(i, a), s = Math.max(i, a);
  return n >= o && n <= s;
}, R5e = (e) => {
  const t = /* @__PURE__ */ new Map();
  for (const r of e) {
    const n = ol(r.start), i = ol(r.end);
    if (r.allDay) {
      const s = Nd(i, 1);
      let l = new Date(n);
      l.setHours(0, 0, 0, 0);
      const u = new Date(s);
      for (u.setHours(0, 0, 0, 0); l.getTime() <= u.getTime(); ) {
        const c = oy(l), f = t.get(c);
        f ? f.push(r) : t.set(c, [r]), l = Go(l, 1);
      }
      continue;
    }
    const a = oy(n), o = t.get(a);
    o ? o.push(r) : t.set(a, [r]);
  }
  for (const [r, n] of t.entries())
    t.set(
      r,
      [...n].sort((i, a) => {
        const o = ol(i.start).getTime(), s = ol(a.start).getTime();
        return o - s;
      })
    );
  return t;
}, P5e = ({
  events: e,
  defaultEvents: t,
  onEventsChange: r,
  weekdayLabels: n,
  height: i = 840,
  className: a,
  style: o,
  dateFnsLocale: s,
  initialMonth: l,
  monthsBefore: u = 120,
  monthsAfter: c = 120,
  estimateMonthHeight: f = 640,
  overscan: d = 2,
  onVisibleRangeChange: h,
  onEventCreate: p,
  onEventUpdate: v,
  onEventDelete: g
}) => {
  const m = e !== void 0, [y, b] = T.useState(t ?? []), w = m ? e ?? [] : y, _ = T.useCallback(
    (_e) => {
      m || b(_e), r == null || r(_e);
    },
    [m, r]
  ), S = T.useMemo(() => N5e(l), [l]), C = u + c + 1, A = u, M = T.useMemo(() => I5e(s), [s]), D = T.useMemo(() => {
    if (n && n.length === 7)
      return n;
  }, [n]), N = T.useCallback(
    (_e) => vM(S, _e - A),
    [S, A]
  ), R = T.useMemo(() => R5e(w), [w]), O = T.useRef(null), E = Kd({
    count: C,
    getScrollElement: () => O.current,
    estimateSize: () => f,
    overscan: d
  }), L = E.getVirtualItems(), I = E.getTotalSize(), [P, k] = T.useState(() => kr(S, "MMMM yyyy", s ? { locale: s } : void 0));
  T.useEffect(() => {
    if (!L.length) return;
    const _e = L[Math.floor(L.length / 2)], re = N(_e.index);
    k(kr(re, "MMMM yyyy", s ? { locale: s } : void 0));
  }, [s, N, L]);
  const z = T.useRef("");
  T.useEffect(() => {
    if (!h || !L.length) return;
    const _e = N(L[0].index), re = N(L[L.length - 1].index), ve = sl(_e), Ae = vM(sl(re), 1), Re = `${ve.toISOString()}::${Ae.toISOString()}`;
    Re !== z.current && (z.current = Re, h({ start: ve, endExclusive: Ae }));
  }, [N, h, L]);
  const [V, B] = T.useState(!1), [F, H] = T.useState("create"), [G, W] = T.useState(() => {
    const _e = /* @__PURE__ */ new Date(), re = _e, ve = new Date(_e.getTime() + 60 * 60 * 1e3);
    return {
      title: "",
      start: re,
      end: ve,
      allDay: !1,
      timezone: il(),
      color: "#0ea5e9"
    };
  }), X = T.useCallback((_e, re) => {
    const ve = Oo(_e), Ae = Go(re ? Oo(re) : ve, 1);
    H("create"), W({
      title: "",
      start: ve,
      end: Ae,
      allDay: !0,
      timezone: il(),
      color: "#0ea5e9"
    }), B(!0);
  }, []), q = T.useCallback((_e) => {
    H("edit"), W(BH(_e)), B(!0);
  }, []), J = T.useCallback(
    async (_e) => {
      const re = w.some((Ae) => Ae.id === _e.id), ve = re ? w.map((Ae) => Ae.id === _e.id ? _e : Ae) : [_e, ...w];
      _(ve), re ? await (v == null ? void 0 : v(_e)) : await (p == null ? void 0 : p(_e));
    },
    [_, w, p, v]
  ), U = T.useCallback(
    async (_e) => {
      const re = w.filter((ve) => ve.id !== _e);
      _(re), await (g == null ? void 0 : g(_e));
    },
    [_, w, g]
  ), $ = T.useCallback(
    async (_e) => {
      const re = _e.id ?? Jc(), ve = _e.start, Ae = Dd(ve, _e.end, _e.allDay);
      await J({
        id: re,
        title: _e.title,
        start: ve.toISOString(),
        end: Ae.toISOString(),
        allDay: _e.allDay,
        timezone: _e.timezone,
        color: _e.color
      }), B(!1);
    },
    [J]
  ), [Y, Z] = T.useState(!1), [K, ie] = T.useState(null), Q = T.useMemo(() => K ? R.get(oy(K)) ?? [] : [], [K, R]), ce = T.useCallback((_e) => {
    ie(Oo(_e)), Z(!0);
  }, []), te = T.useRef(null), oe = T.useRef(null), de = T.useRef(!1), Pe = T.useRef(!1), [Ke, it] = T.useState(null), [Dt, Pt] = T.useState(null);
  T.useEffect(() => {
    const _e = () => {
      if (!de.current) return;
      de.current = !1;
      const re = te.current, ve = oe.current;
      if (te.current = null, oe.current = null, it(null), Pt(null), !re || !ve || re.getTime() === ve.getTime()) return;
      Pe.current = !0;
      const Ae = re.getTime() <= ve.getTime() ? re : ve, Re = re.getTime() <= ve.getTime() ? ve : re;
      X(Ae, Re);
    };
    return window.addEventListener("mouseup", _e), () => window.removeEventListener("mouseup", _e);
  }, [X]);
  const gr = T.useMemo(() => {
    const _e = /* @__PURE__ */ new Date();
    return _e.setHours(0, 0, 0, 0), _e;
  }, []), Kt = T.useCallback(() => {
    const _e = sl(/* @__PURE__ */ new Date()), re = (_e.getFullYear() - S.getFullYear()) * 12 + (_e.getMonth() - S.getMonth()), ve = D5e(A + re, 0, C - 1);
    E.scrollToIndex(ve, { align: "start" });
  }, [S, A, E, C]);
  return T.useEffect(() => {
    requestAnimationFrame(() => {
      E.scrollToIndex(A, { align: "start" });
    });
  }, [A, E]), /* @__PURE__ */ x.jsxs("div", { className: a, style: o, children: [
    /* @__PURE__ */ x.jsx("div", { className: "rounded-2xl bg-surface p-3 shadow-soft", children: /* @__PURE__ */ x.jsxs("div", { className: "flex flex-wrap items-center justify-between gap-2", children: [
      /* @__PURE__ */ x.jsx("div", { className: "text-sm font-semibold text-text-primary", children: P }),
      /* @__PURE__ */ x.jsx(xt, { variant: "secondary", size: "sm", onClick: Kt, children: "Hôm nay" })
    ] }) }),
    /* @__PURE__ */ x.jsx("div", { className: "mt-3 rounded-2xl bg-surface shadow-soft", children: /* @__PURE__ */ x.jsx(
      $h,
      {
        ref: O,
        direction: "vertical",
        autoHide: !0,
        style: { height: i },
        className: "relative",
        children: /* @__PURE__ */ x.jsx("div", { style: { height: I }, className: "relative w-full", children: L.map((_e) => {
          const re = N(_e.index), ve = sl(re), Ae = gM(ve, { weekStartsOn: M }), Re = [];
          for (let Ye = 0; Ye < 42; Ye += 1)
            Re.push(Go(Ae, Ye));
          const gt = kr(ve, "MMMM yyyy", s ? { locale: s } : void 0);
          return /* @__PURE__ */ x.jsxs(
            "div",
            {
              "data-index": _e.index,
              ref: (Ye) => {
                Ye && E.measureElement(Ye);
              },
              style: {
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                transform: `translateY(${_e.start}px)`
              },
              className: "px-3 pb-6 pt-3",
              children: [
                /* @__PURE__ */ x.jsx("div", { className: "mb-3 flex items-center justify-between", children: /* @__PURE__ */ x.jsx("div", { className: "text-sm font-semibold text-text-primary", children: gt }) }),
                /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-7 gap-px overflow-hidden rounded-2xl border border-slate-200 bg-slate-200", children: [
                  Array.from({ length: 7 }).map((Ye, we) => {
                    const ke = Go(gM(new Date(2024, 0, 1), { weekStartsOn: M }), we), De = kr(ke, "EEE", s ? { locale: s } : void 0), ft = D ? D[we] : De;
                    return /* @__PURE__ */ x.jsx(
                      "div",
                      {
                        className: "bg-surface px-2 py-2 text-center text-xs font-semibold tracking-wide text-text-muted whitespace-nowrap " + (D ? "" : "uppercase"),
                        children: ft
                      },
                      `dow-${we}`
                    );
                  }),
                  Re.map((Ye) => {
                    const we = pW(Ye, ve), ke = mP(Ye, gr), De = Ke && Dt ? L5e(Ye, Ke, Dt) : !1, ft = oy(Ye), Bt = R.get(ft) ?? [], nt = Bt.slice(0, 3), Er = Math.max(0, Bt.length - nt.length);
                    return /* @__PURE__ */ x.jsxs(
                      "button",
                      {
                        type: "button",
                        className: "min-h-[104px] px-2 py-2 text-left transition-colors focus:outline-none " + (De ? "bg-primary-50 hover:bg-primary-100 " : "bg-surface hover:bg-slate-50 ") + (we ? "" : "opacity-55 ") + (ke ? "ring-2 ring-primary-500 ring-inset " : ""),
                        onMouseDown: (At) => {
                          if (At.button !== 0) return;
                          const Yt = Oo(Ye);
                          de.current = !0, te.current = Yt, oe.current = Yt, it(Yt), Pt(Yt);
                        },
                        onMouseEnter: () => {
                          if (!de.current) return;
                          const At = Oo(Ye);
                          oe.current = At, Pt(At);
                        },
                        onClick: () => {
                          if (Pe.current) {
                            Pe.current = !1;
                            return;
                          }
                          X(Ye);
                        },
                        children: [
                          /* @__PURE__ */ x.jsx("div", { className: "flex items-start justify-between", children: /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold " + (we ? "text-text-primary" : "text-text-muted"), children: kr(Ye, "d", s ? { locale: s } : void 0) }) }),
                          /* @__PURE__ */ x.jsxs("div", { className: "mt-1 flex flex-col gap-1", children: [
                            nt.map((At) => /* @__PURE__ */ x.jsx(
                              "div",
                              {
                                className: "w-full truncate rounded-md px-2 py-1 text-[11px] font-medium text-white",
                                style: { backgroundColor: At.color ?? "#0ea5e9" },
                                onMouseDown: (Yt) => {
                                  Yt.stopPropagation();
                                },
                                onClick: (Yt) => {
                                  Yt.stopPropagation(), q(At);
                                },
                                role: "button",
                                tabIndex: 0,
                                onKeyDown: (Yt) => {
                                  (Yt.key === "Enter" || Yt.key === " ") && (Yt.preventDefault(), Yt.stopPropagation(), q(At));
                                },
                                children: At.title
                              },
                              At.id
                            )),
                            Er > 0 && /* @__PURE__ */ x.jsxs(
                              "div",
                              {
                                className: "cursor-pointer text-left text-[11px] font-medium text-text-muted hover:underline",
                                role: "button",
                                tabIndex: 0,
                                onMouseDown: (At) => {
                                  At.stopPropagation();
                                },
                                onClick: (At) => {
                                  At.stopPropagation(), ce(Ye);
                                },
                                onKeyDown: (At) => {
                                  (At.key === "Enter" || At.key === " ") && (At.preventDefault(), At.stopPropagation(), ce(Ye));
                                },
                                children: [
                                  "+",
                                  Er,
                                  " nữa"
                                ]
                              }
                            )
                          ] })
                        ]
                      },
                      ft
                    );
                  })
                ] })
              ]
            },
            _e.key
          );
        }) })
      }
    ) }),
    /* @__PURE__ */ x.jsx(
      Pa,
      {
        open: Y,
        onClose: () => Z(!1),
        title: K ? kr(K, "dd/MM/yyyy", s ? { locale: s } : void 0) : void 0,
        size: "md",
        children: /* @__PURE__ */ x.jsxs("div", { className: "space-y-3", children: [
          /* @__PURE__ */ x.jsx("div", { className: "flex justify-end", children: /* @__PURE__ */ x.jsx(
            xt,
            {
              variant: "primary",
              size: "sm",
              onClick: () => {
                K && (Z(!1), X(K));
              },
              children: "Tạo sự kiện"
            }
          ) }),
          Q.length === 0 ? /* @__PURE__ */ x.jsx("div", { className: "text-sm text-text-muted", children: "Không có sự kiện" }) : /* @__PURE__ */ x.jsx("div", { className: "space-y-2", children: Q.map((_e) => /* @__PURE__ */ x.jsxs(
            "button",
            {
              type: "button",
              className: "flex w-full items-center justify-between gap-3 rounded-xl border border-slate-200 px-3 py-2 text-left hover:bg-slate-50",
              onClick: () => {
                Z(!1), q(_e);
              },
              children: [
                /* @__PURE__ */ x.jsxs("div", { className: "min-w-0 flex-1", children: [
                  /* @__PURE__ */ x.jsx("div", { className: "truncate text-sm font-semibold text-text-primary", children: _e.title }),
                  /* @__PURE__ */ x.jsx("div", { className: "mt-0.5 text-xs text-text-muted", children: _e.allDay ? "Cả ngày" : "Có giờ" })
                ] }),
                /* @__PURE__ */ x.jsx("div", { className: "h-3 w-3 flex-none rounded-full", style: { backgroundColor: _e.color ?? "#0ea5e9" } })
              ]
            },
            _e.id
          )) })
        ] })
      }
    ),
    /* @__PURE__ */ x.jsx(
      lM,
      {
        open: V,
        mode: F,
        value: G,
        dateFnsLocale: s,
        onCancel: () => B(!1),
        onSave: $,
        onDelete: F === "edit" && G.id ? () => {
          const _e = G.id;
          _e && (U(_e), B(!1));
        } : void 0
      }
    )
  ] });
};
P5e.displayName = "InfiniteMonthCalendar";
function FH({
  currentUserId: e,
  currentUserName: t,
  currentUserAvatarUrl: r,
  input: n,
  createdAt: i
}) {
  const a = (n.attachments || []).map((s) => ({
    name: s.name,
    size: s.size,
    mimeType: s.type,
    file: s
  })), o = n.markdown ? { type: "markdown", markdown: n.markdown } : { type: "text", text: n.text || "" };
  return {
    id: n.clientId,
    clientId: n.clientId,
    conversationId: n.conversationId,
    senderId: e,
    senderName: t,
    senderAvatarUrl: r,
    direction: "outgoing",
    createdAt: i ?? Date.now(),
    status: "sending",
    content: o,
    attachments: a.length ? a : void 0,
    replyToId: n.replyToId
  };
}
function $H(e) {
  return typeof e == "number" ? new Date(e) : new Date(e);
}
function uM(e, t) {
  return e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() && e.getDate() === t.getDate();
}
function k5e(e, t) {
  const r = new Date(t);
  return r.setDate(t.getDate() - 1), uM(e, r);
}
function O5e(e, t = /* @__PURE__ */ new Date()) {
  const r = $H(e);
  return uM(r, t) ? "Hôm nay" : k5e(r, t) ? "Hôm qua" : new Intl.DateTimeFormat("vi-VN", { day: "2-digit", month: "2-digit", year: "numeric" }).format(r);
}
function z5e(e, t = /* @__PURE__ */ new Date()) {
  const r = $H(e);
  return uM(r, t) ? new Intl.DateTimeFormat("vi-VN", { hour: "2-digit", minute: "2-digit" }).format(r) : new Intl.DateTimeFormat("vi-VN", {
    day: "2-digit",
    month: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  }).format(r);
}
function j5e(e) {
  return /^https?:\/\//i.test(e);
}
function V5e(e, t = {}) {
  const { thresholdPx: r = 24 } = t, [n, i] = T.useState(!0), a = T.useCallback(() => {
    const o = e.current;
    if (!o) return;
    const s = o.scrollHeight - o.scrollTop - o.clientHeight;
    i(s <= r);
  }, [e, r]);
  return T.useEffect(() => {
    const o = e.current;
    if (!o) return;
    a();
    const s = () => a();
    return o.addEventListener("scroll", s, { passive: !0 }), () => o.removeEventListener("scroll", s);
  }, [e, a]), { isAtBottom: n, recompute: a, setIsAtBottom: i };
}
function c2(e, t = "auto") {
  const r = e.current;
  r && r.scrollTo({ top: r.scrollHeight, behavior: t });
}
function B5e(e) {
  const { scrollRef: t, firstRowKey: r, enabled: n = !0 } = e, i = T.useRef(void 0), a = T.useRef(0), o = T.useRef(0);
  T.useLayoutEffect(() => {
    if (!n) return;
    const s = t.current;
    if (!s) return;
    const l = i.current;
    if (l !== void 0 && r !== void 0 && l !== r) {
      const u = a.current, c = o.current, d = s.scrollHeight - u;
      d > 0 && c < 220 && (s.scrollTop = c + d);
    }
    i.current = r, a.current = s.scrollHeight, o.current = s.scrollTop;
  }, [n, r, t]), T.useEffect(() => {
    if (!n) return;
    const s = t.current;
    if (!s) return;
    const l = () => {
      a.current = s.scrollHeight, o.current = s.scrollTop;
    };
    return s.addEventListener("scroll", l, { passive: !0 }), () => s.removeEventListener("scroll", l);
  }, [n, t]);
}
const HH = ({
  agent: e,
  onCallAgent: t,
  onOpenConversations: r,
  onOpenTasks: n,
  onCreateConversation: i,
  onClose: a
}) => /* @__PURE__ */ x.jsxs("div", { className: "flex items-center justify-between gap-3 border-b border-slate-200 bg-surface px-3 py-2", children: [
  /* @__PURE__ */ x.jsxs("div", { className: "flex min-w-0 items-center gap-2", children: [
    /* @__PURE__ */ x.jsx(Wa, { src: e.logoUrl, alt: e.name, initials: e.name, size: "sm" }),
    /* @__PURE__ */ x.jsxs("div", { className: "min-w-0", children: [
      /* @__PURE__ */ x.jsx(aS, { className: "truncate text-sm font-semibold", children: e.name }),
      e.status && /* @__PURE__ */ x.jsx(xl, { className: "text-text-muted", children: e.status === "online" ? "Online" : "Offline" })
    ] })
  ] }),
  /* @__PURE__ */ x.jsxs("div", { className: "flex shrink-0 items-center gap-1", children: [
    /* @__PURE__ */ x.jsx(Nr, { icon: LU, size: "sm", variant: "muted", "aria-label": "Call Agent", onClick: t }),
    /* @__PURE__ */ x.jsx(Nr, { icon: xS, size: "sm", variant: "muted", "aria-label": "Danh sách cuộc trò chuyện", onClick: r }),
    /* @__PURE__ */ x.jsx(Nr, { icon: NP, size: "sm", variant: "muted", "aria-label": "Danh sách nhiệm vụ", onClick: n }),
    /* @__PURE__ */ x.jsx(Nr, { icon: LP, size: "sm", variant: "muted", "aria-label": "Tạo cuộc trò chuyện mới", onClick: i }),
    a && /* @__PURE__ */ x.jsx(Nr, { icon: ef, size: "sm", variant: "muted", "aria-label": "Đóng", onClick: a })
  ] })
] });
HH.displayName = "ChatHeader";
const GH = T.createContext(void 0), cM = () => {
  const e = T.useContext(GH);
  if (!e)
    throw new Error("useDropdown must be used within a DropdownMenu");
  return e;
}, F5e = ({
  children: e,
  defaultOpen: t = !1,
  onOpenChange: r
}) => {
  const [n, i] = T.useState(t), a = T.useRef(null), o = (s) => {
    i(s), r == null || r(s);
  };
  return T.useEffect(() => {
    const s = (l) => {
      a.current && !a.current.contains(l.target) && o(!1);
    };
    return n && document.addEventListener("mousedown", s), () => document.removeEventListener("mousedown", s);
  }, [n]), /* @__PURE__ */ x.jsx(GH.Provider, { value: { open: n, setOpen: o }, children: /* @__PURE__ */ x.jsx("div", { ref: a, className: "relative inline-block text-left", children: e }) });
}, WH = T.forwardRef(
  ({ children: e, className: t, onClick: r, ...n }, i) => {
    const { setOpen: a, open: o } = cM(), s = (l) => {
      r == null || r(l), a(!o);
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: i,
        onClick: s,
        className: me(fe("cursor-pointer inline-flex", t)),
        ...n,
        children: e
      }
    );
  }
);
WH.displayName = "DropdownTrigger";
const UH = T.forwardRef(
  ({ children: e, className: t, align: r = "left", ...n }, i) => {
    const { open: a } = cM();
    return a ? /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: i,
        className: me(
          fe(
            "absolute z-50 mt-2 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md animate-in fade-in-0 zoom-in-95",
            r === "left" ? "left-0 origin-top-left" : "right-0 origin-top-right",
            t
          )
        ),
        ...n,
        children: e
      }
    ) : null;
  }
);
UH.displayName = "DropdownContent";
const Mo = T.forwardRef(
  ({ children: e, className: t, disabled: r, danger: n, onClick: i, ...a }, o) => {
    const { setOpen: s } = cM(), l = (u) => {
      r || (i == null || i(u), s(!1));
    };
    return /* @__PURE__ */ x.jsx(
      "div",
      {
        ref: o,
        onClick: l,
        className: me(
          fe(
            "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors",
            "hover:bg-slate-100 hover:text-slate-900",
            r && "pointer-events-none opacity-50",
            n && "text-red-600 hover:bg-red-50 hover:text-red-700",
            t
          )
        ),
        ...a,
        children: e
      }
    );
  }
);
Mo.displayName = "DropdownItem";
const $5e = {
  sending: "Đang gửi",
  sent: "Đã gửi",
  delivered: "Đã nhận",
  seen: "Đã xem",
  failed: "Gửi lỗi"
};
function H5e(e) {
  const t = Math.max(0, Math.floor(e)), r = String(Math.floor(t / 60)).padStart(2, "0"), n = String(t % 60).padStart(2, "0");
  return `${r}:${n}`;
}
function G5e(e) {
  if (!Number.isFinite(e) || !e || e <= 0) return;
  const t = e / 1024;
  if (t < 1024) return `${t.toFixed(t < 10 ? 1 : 0)} KB`;
  const r = t / 1024;
  if (r < 1024) return `${r.toFixed(r < 10 ? 1 : 0)} MB`;
  const n = r / 1024;
  return `${n.toFixed(n < 10 ? 1 : 0)} GB`;
}
function W5e(e) {
  const t = e.split("?")[0].split("#")[0], r = t.split("/").pop() || t, n = r.lastIndexOf(".");
  return n <= 0 ? "" : r.slice(n + 1).toLowerCase();
}
function U5e(e) {
  const t = e.toLowerCase();
  return ["pdf"].includes(t) ? { label: "PDF", className: "bg-red-500 text-white" } : ["doc", "docx"].includes(t) ? { label: "W", className: "bg-blue-600 text-white" } : ["xls", "xlsx", "csv"].includes(t) ? { label: "X", className: "bg-emerald-600 text-white" } : ["ppt", "pptx"].includes(t) ? { label: "P", className: "bg-orange-500 text-white" } : ["png", "jpg", "jpeg", "gif", "webp", "svg"].includes(t) ? { icon: FG, className: "bg-teal-500 text-white" } : ["mp4", "mov", "webm", "mkv"].includes(t) ? { icon: $G, className: "bg-fuchsia-500 text-white" } : ["mp3", "wav", "ogg", "m4a"].includes(t) ? { icon: HG, className: "bg-indigo-500 text-white" } : ["zip", "rar", "7z", "tar", "gz"].includes(t) ? { icon: GG, className: "bg-amber-500 text-white" } : { icon: WG, className: "bg-slate-100 text-text-secondary" };
}
const YH = ({
  message: e,
  currentUserId: t,
  showSenderName: r = !0,
  showOutgoingAvatar: n = !1,
  incomingMessageStyle: i = "default",
  replyToMessage: a,
  highlighted: o,
  onJumpToMessage: s,
  onCopy: l,
  onDelete: u,
  onRecall: c,
  onReply: f,
  onReact: d,
  onRetrySend: h
}) => {
  const p = e.direction === "outgoing" || e.senderId === t, v = e.direction === "system" || e.content.type === "system", [g, m] = T.useState(!1), [y, b] = T.useState(!1), [w, _] = T.useState(!1);
  if (v)
    return /* @__PURE__ */ x.jsx("div", { className: "flex justify-center py-2", children: /* @__PURE__ */ x.jsx(xl, { className: "rounded-full bg-surface-alt px-3 py-1 text-text-muted", children: e.content.type === "system" ? e.content.text : e.content.text || "" }) });
  const S = e.content.type === "image" || e.content.type === "video" || e.content.type === "sticker" || e.content.type === "audio" || e.content.type === "contact" || e.content.type === "location" || e.content.type === "call" || e.content.type === "file", C = p && !S, A = "max-w-[80%] min-w-0 rounded-2xl px-3 py-2 text-sm break-words whitespace-pre-wrap [overflow-wrap:anywhere]", M = i === "flat" ? "max-w-[80%] min-w-0 rounded-xl px-2 py-1.5 text-sm break-words whitespace-pre-wrap [overflow-wrap:anywhere]" : A, N = S ? "max-w-[80%] min-w-0 rounded-2xl p-0 bg-transparent" : p ? `bg-primary-500 text-white ${A}` : i === "flat" ? `bg-transparent text-text-primary ${M}` : `bg-surface-alt text-text-primary ${M}`, R = p ? "justify-end" : "justify-start", O = z5e(e.createdAt), E = e.status ? $5e[e.status] : void 0, L = T.useMemo(() => {
    if (e.replyToId)
      return a ? a.content.type === "text" ? a.content.text : a.content.type === "markdown" ? a.content.markdown : a.content.type === "image" ? "[Ảnh]" : a.content.type === "video" ? "[Video]" : a.content.type === "audio" ? "[Audio]" : a.content.type === "sticker" ? "[Sticker]" : a.content.type === "contact" ? `[Liên hệ] ${a.content.name}` : a.content.type === "location" ? "[Vị trí]" : a.content.type === "call" ? a.content.kind === "missed" ? "[Cuộc gọi nhỡ]" : "[Cuộc gọi đến]" : a.content.type === "file" ? `[File] ${a.content.fileName}` : a.content.type === "system" ? a.content.text : "" : "Tin nhắn đã bị xóa";
  }, [e.replyToId, a]), I = T.useMemo(() => {
    const B = e.reactions;
    return B ? Object.entries(B).filter(([, F]) => Number(F) > 0) : [];
  }, [e.reactions]), P = () => {
    if (e.content.type === "text") {
      const B = e.content.text;
      return j5e(B.trim()) ? /* @__PURE__ */ x.jsx(
        "a",
        {
          href: B.trim(),
          target: "_blank",
          rel: "noreferrer",
          className: p ? "underline text-white" : "underline text-primary-600",
          children: B
        }
      ) : /* @__PURE__ */ x.jsx("span", { children: B });
    }
    if (e.content.type === "markdown")
      return /* @__PURE__ */ x.jsx("span", { children: e.content.markdown });
    if (e.content.type === "image")
      return /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
        /* @__PURE__ */ x.jsx(
          "button",
          {
            type: "button",
            className: "block overflow-hidden rounded-2xl",
            onClick: () => m(!0),
            "aria-label": "Xem ảnh",
            children: /* @__PURE__ */ x.jsx(
              Da,
              {
                src: e.content.thumbnailUrl || e.content.url,
                alt: e.content.alt || "image",
                className: "max-h-56 w-auto max-w-[260px] rounded-2xl",
                objectFit: "cover"
              }
            )
          }
        ),
        /* @__PURE__ */ x.jsx(Pa, { open: g, onClose: () => m(!1), title: "Ảnh", children: /* @__PURE__ */ x.jsx(
          Da,
          {
            src: e.content.url,
            alt: e.content.alt || "image",
            className: "w-full max-h-[70vh]",
            objectFit: "contain"
          }
        ) })
      ] });
    if (e.content.type === "call") {
      const B = e.content.kind === "missed", F = !!e.content.isVideo, H = B ? "Cuộc gọi nhỡ" : "Cuộc gọi đến", G = typeof e.content.durationSec == "number" ? `Thời lượng: ${H5e(e.content.durationSec)}` : B ? "Không trả lời" : "Đã kết thúc", W = F ? sY : B ? OU : PU;
      return /* @__PURE__ */ x.jsx("div", { className: "w-[280px] max-w-full overflow-hidden rounded-2xl border border-slate-200 bg-surface px-4 py-3", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ x.jsx("div", { className: B ? "rounded-xl bg-red-50 p-2 text-red-600" : "rounded-xl bg-slate-100 p-2 text-text-secondary", children: /* @__PURE__ */ x.jsx(W, { size: 18 }) }),
        /* @__PURE__ */ x.jsxs("div", { className: "min-w-0", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "truncate text-sm font-semibold text-text-primary", children: [
            H,
            F ? " (Video)" : ""
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "mt-0.5 truncate text-[12px] text-text-muted", children: G })
        ] })
      ] }) });
    }
    if (e.content.type === "video") {
      const B = e.content.thumbnailUrl;
      return /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
        /* @__PURE__ */ x.jsxs(
          "button",
          {
            type: "button",
            className: "relative block overflow-hidden rounded-2xl",
            onClick: () => b(!0),
            "aria-label": "Phát video",
            children: [
              B ? /* @__PURE__ */ x.jsx(Da, { src: B, alt: e.content.alt || "video", className: "max-h-56 w-auto max-w-[260px] rounded-2xl", objectFit: "cover" }) : /* @__PURE__ */ x.jsx("div", { className: "flex h-40 w-[260px] max-w-full items-center justify-center rounded-2xl bg-slate-200 text-text-muted", children: "Video" }),
              /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ x.jsx("span", { className: "inline-flex h-12 w-12 items-center justify-center rounded-full bg-black/55 text-white", children: /* @__PURE__ */ x.jsx(BU, { size: 20 }) }) })
            ]
          }
        ),
        /* @__PURE__ */ x.jsx(Pa, { open: y, onClose: () => b(!1), title: "Video", children: /* @__PURE__ */ x.jsx("video", { src: e.content.url, controls: !0, autoPlay: !0, playsInline: !0, className: "w-full max-h-[70vh]" }) })
      ] });
    }
    if (e.content.type === "sticker")
      return /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
        /* @__PURE__ */ x.jsx(
          "button",
          {
            type: "button",
            className: "block",
            onClick: () => _(!0),
            "aria-label": "Xem sticker",
            children: /* @__PURE__ */ x.jsx(
              Da,
              {
                src: e.content.thumbnailUrl || e.content.url,
                alt: e.content.alt || "sticker",
                className: "h-28 w-28 rounded-none bg-transparent",
                objectFit: "contain"
              }
            )
          }
        ),
        /* @__PURE__ */ x.jsx(Pa, { open: w, onClose: () => _(!1), title: "Sticker", children: /* @__PURE__ */ x.jsx(
          Da,
          {
            src: e.content.url,
            alt: e.content.alt || "sticker",
            className: "w-full max-h-[70vh] rounded-none bg-transparent",
            objectFit: "contain"
          }
        ) })
      ] });
    if (e.content.type === "audio")
      return /* @__PURE__ */ x.jsx("audio", { controls: !0, src: e.content.url, className: "w-[260px] max-w-full" });
    if (e.content.type === "contact") {
      const B = e.content.name, F = `BEGIN:VCARD
VERSION:3.0
FN:${B}` + (e.content.phone ? `
TEL:${e.content.phone}` : "") + (e.content.email ? `
EMAIL:${e.content.email}` : "") + `
END:VCARD`, H = `https://api.qrserver.com/v1/create-qr-code/?size=96x96&data=${encodeURIComponent(F)}`;
      return /* @__PURE__ */ x.jsxs("div", { className: "w-[280px] max-w-full overflow-hidden rounded-2xl border border-slate-200 bg-surface", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-start justify-between gap-3 bg-gradient-to-br from-primary-600 to-primary-500 px-4 py-4", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex min-w-0 items-center gap-3", children: [
            /* @__PURE__ */ x.jsx(
              Wa,
              {
                src: e.content.avatarUrl,
                alt: B,
                size: "sm",
                className: "ring-2 ring-white/30"
              }
            ),
            /* @__PURE__ */ x.jsxs("div", { className: "min-w-0", children: [
              /* @__PURE__ */ x.jsx("div", { className: "truncate text-sm font-semibold text-white", children: B }),
              /* @__PURE__ */ x.jsxs("div", { className: "mt-0.5 flex flex-col gap-0.5 text-[12px] text-white/80", children: [
                e.content.phone && /* @__PURE__ */ x.jsx("div", { className: "truncate", children: e.content.phone }),
                e.content.email && /* @__PURE__ */ x.jsx("div", { className: "truncate", children: e.content.email })
              ] })
            ] })
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "shrink-0 rounded-lg bg-white p-1", children: /* @__PURE__ */ x.jsx(Da, { src: H, alt: "QR", className: "h-[48px] w-[48px] rounded-none bg-white", objectFit: "cover" }) })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "grid grid-cols-2 divide-x divide-slate-200", children: [
          e.content.phone ? /* @__PURE__ */ x.jsx(
            "a",
            {
              href: `tel:${e.content.phone}`,
              className: "inline-flex items-center justify-center py-3 text-sm font-semibold text-text-secondary hover:bg-slate-50",
              children: "Gọi Điện"
            }
          ) : /* @__PURE__ */ x.jsx("div", { className: "inline-flex items-center justify-center py-3 text-sm font-semibold text-text-muted", children: "Gọi Điện" }),
          e.content.phone ? /* @__PURE__ */ x.jsx(
            "a",
            {
              href: `sms:${e.content.phone}`,
              className: "inline-flex items-center justify-center py-3 text-sm font-semibold text-text-secondary hover:bg-slate-50",
              children: "Nhắn Tin"
            }
          ) : /* @__PURE__ */ x.jsx("div", { className: "inline-flex items-center justify-center py-3 text-sm font-semibold text-text-muted", children: "Nhắn Tin" })
        ] })
      ] });
    }
    if (e.content.type === "location") {
      const { lat: B, lng: F, label: H } = e.content, G = `https://www.google.com/maps?q=${B},${F}&z=15&output=embed`, W = `https://www.google.com/maps?q=${B},${F}&z=15`;
      return /* @__PURE__ */ x.jsxs("div", { className: "w-[280px] max-w-full overflow-hidden rounded-2xl border border-slate-200 bg-surface", children: [
        /* @__PURE__ */ x.jsx("div", { className: "overflow-hidden", children: /* @__PURE__ */ x.jsx(
          "iframe",
          {
            title: H || "Google Map",
            src: G,
            loading: "lazy",
            referrerPolicy: "no-referrer-when-downgrade",
            className: "h-40 w-full"
          }
        ) }),
        /* @__PURE__ */ x.jsxs(
          "a",
          {
            href: W,
            target: "_blank",
            rel: "noreferrer",
            className: "flex items-center gap-2 px-3 py-2 text-sm font-medium text-primary-600 hover:bg-slate-50",
            children: [
              /* @__PURE__ */ x.jsx(yU, { size: 16 }),
              /* @__PURE__ */ x.jsx("span", { className: "truncate", children: H || `${B}, ${F}` })
            ]
          }
        )
      ] });
    }
    if (e.content.type === "file") {
      const B = e.content.fileName, F = e.content.url, H = W5e(B || F || ""), G = U5e(H), W = G5e(e.content.size);
      return /* @__PURE__ */ x.jsx("div", { className: "w-[340px] max-w-full overflow-hidden rounded-2xl border border-slate-200 bg-surface", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-3 px-4 py-3", children: [
        /* @__PURE__ */ x.jsx("div", { className: `shrink-0 rounded-xl ${G.className} flex h-11 w-11 items-center justify-center`, children: "label" in G && G.label ? /* @__PURE__ */ x.jsx("span", { className: "text-sm font-extrabold", children: G.label }) : (() => {
          const X = G.icon;
          return /* @__PURE__ */ x.jsx(X, { size: 18 });
        })() }),
        /* @__PURE__ */ x.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ x.jsx("div", { className: "truncate text-sm font-semibold text-text-primary", children: B }),
          /* @__PURE__ */ x.jsxs("div", { className: "mt-0.5 truncate text-[12px] text-text-muted", children: [
            W || "",
            W && H ? " · " : "",
            H ? H.toUpperCase() : "",
            F ? "" : W || H ? " · Đã có trên máy" : "Đã có trên máy"
          ] })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: "shrink-0 flex items-center gap-2", children: [
          F && /* @__PURE__ */ x.jsx(
            "a",
            {
              href: F,
              target: "_blank",
              rel: "noreferrer",
              className: "inline-flex h-8 w-8 items-center justify-center rounded-lg text-text-secondary hover:bg-slate-50",
              "aria-label": "Mở file",
              children: /* @__PURE__ */ x.jsx(eU, { size: 16 })
            }
          ),
          F && /* @__PURE__ */ x.jsx(
            "a",
            {
              href: F,
              download: !0,
              className: "inline-flex h-8 w-8 items-center justify-center rounded-lg text-text-secondary hover:bg-slate-50",
              "aria-label": "Tải xuống",
              children: /* @__PURE__ */ x.jsx(DP, { size: 16 })
            }
          )
        ] })
      ] }) });
    }
    return null;
  }, k = !p, z = !p && r && !!e.senderName, V = async () => {
    const B = e.content.type === "text" ? e.content.text : e.content.type === "markdown" ? e.content.markdown : e.content.type === "system" ? e.content.text : e.content.type === "image" || e.content.type === "video" || e.content.type === "audio" || e.content.type === "sticker" ? e.content.url : e.content.type === "call" ? e.content.kind === "missed" ? "Cuộc gọi nhỡ" : "Cuộc gọi đến" : e.content.type === "file" ? e.content.url || e.content.fileName : e.content.type === "contact" ? `${e.content.name}${e.content.phone ? `
${e.content.phone}` : ""}${e.content.email ? `
${e.content.email}` : ""}` : e.content.type === "location" ? `https://www.google.com/maps?q=${e.content.lat},${e.content.lng}&z=15` : "";
    try {
      await navigator.clipboard.writeText(B);
    } catch {
    }
    l == null || l(e);
  };
  return /* @__PURE__ */ x.jsxs("div", { className: `flex w-full gap-2 ${R}`, children: [
    !p && k && /* @__PURE__ */ x.jsx("div", { className: "pt-1", children: /* @__PURE__ */ x.jsx(
      Wa,
      {
        src: e.senderAvatarUrl,
        alt: e.senderName || e.senderId,
        initials: e.senderName || e.senderId,
        size: "sm"
      }
    ) }),
    /* @__PURE__ */ x.jsxs("div", { className: `min-w-0 ${p ? "items-end" : "items-start"} flex flex-col gap-1`, children: [
      z && /* @__PURE__ */ x.jsx(xl, { className: "text-text-muted", children: e.senderName }),
      /* @__PURE__ */ x.jsxs("div", { className: "group", children: [
        /* @__PURE__ */ x.jsxs("div", { className: `flex items-start gap-1 ${p ? "flex-row-reverse" : "flex-row"}`, children: [
          /* @__PURE__ */ x.jsxs("div", { className: `${N}${o ? " ring-2 ring-primary-400" : ""}`, children: [
            e.replyToId && /* @__PURE__ */ x.jsxs(
              "button",
              {
                type: "button",
                className: p ? "mb-2 w-full rounded-xl bg-white/15 px-2 py-1 text-left text-white/90 hover:bg-white/20" : "mb-2 w-full rounded-xl bg-slate-100 px-2 py-1 text-left text-text-secondary hover:bg-slate-200",
                onClick: () => {
                  e.replyToId && (s == null || s(e.replyToId));
                },
                children: [
                  /* @__PURE__ */ x.jsx("div", { className: p ? "text-[11px] font-medium text-white/90" : "text-[11px] font-medium text-text-secondary", children: (a == null ? void 0 : a.senderName) || "Tin nhắn" }),
                  /* @__PURE__ */ x.jsx("div", { className: p ? "text-[11px] text-white/80 line-clamp-2" : "text-[11px] text-text-muted line-clamp-2", children: L })
                ]
              }
            ),
            P()
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "shrink-0 pt-0.5 opacity-0 transition-opacity group-hover:opacity-100", children: /* @__PURE__ */ x.jsxs(F5e, { children: [
            /* @__PURE__ */ x.jsx(WH, { children: /* @__PURE__ */ x.jsx(Nr, { icon: JW, size: "xs", variant: p ? "default" : "muted", "aria-label": "Hành động" }) }),
            /* @__PURE__ */ x.jsxs(UH, { align: p ? "left" : "right", children: [
              /* @__PURE__ */ x.jsx(Mo, { onClick: V, children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                /* @__PURE__ */ x.jsx(EP, { size: 14 }),
                "Copy"
              ] }) }),
              f && /* @__PURE__ */ x.jsx(Mo, { onClick: () => f(e), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                /* @__PURE__ */ x.jsx(ZW, { size: 14 }),
                "Reply"
              ] }) }),
              d && /* @__PURE__ */ x.jsxs(x.Fragment, { children: [
                /* @__PURE__ */ x.jsx(Mo, { onClick: () => d(e, "👍"), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                  /* @__PURE__ */ x.jsx(QU, { size: 14 }),
                  "👍"
                ] }) }),
                /* @__PURE__ */ x.jsx(Mo, { onClick: () => d(e, "❤️"), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                  /* @__PURE__ */ x.jsx(fU, { size: 14 }),
                  "❤️"
                ] }) }),
                /* @__PURE__ */ x.jsx(Mo, { onClick: () => d(e, "😆"), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                  /* @__PURE__ */ x.jsx(hU, { size: 14 }),
                  "😆"
                ] }) })
              ] }),
              c && e.canRecall && /* @__PURE__ */ x.jsx(Mo, { onClick: () => c(e), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                /* @__PURE__ */ x.jsx(nY, { size: 14 }),
                "Thu hồi"
              ] }) }),
              u && e.canDelete && /* @__PURE__ */ x.jsx(Mo, { danger: !0, onClick: () => u(e), children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-2", children: [
                /* @__PURE__ */ x.jsx(RP, { size: 14 }),
                "Xóa"
              ] }) })
            ] })
          ] }) })
        ] }),
        /* @__PURE__ */ x.jsxs("div", { className: `mt-1 flex items-center gap-2 ${p ? "justify-end" : "justify-start"}`, children: [
          /* @__PURE__ */ x.jsxs(xl, { className: C ? "text-white/80" : "text-text-muted", children: [
            O,
            E ? ` · ${E}` : ""
          ] }),
          e.status === "failed" && h && /* @__PURE__ */ x.jsx(
            xt,
            {
              variant: p ? "secondary" : "ghost",
              size: "sm",
              className: "h-7 px-2",
              onClick: () => h(e),
              children: /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-1", children: [
                /* @__PURE__ */ x.jsx($U, { size: 14 }),
                "Gửi lại"
              ] })
            }
          )
        ] }),
        I.length > 0 && /* @__PURE__ */ x.jsx("div", { className: `flex flex-wrap gap-1 ${p ? "justify-end" : "justify-start"}`, children: I.map(([B, F]) => /* @__PURE__ */ x.jsxs(
          "button",
          {
            type: "button",
            className: C ? "inline-flex items-center gap-1 rounded-full bg-white/15 px-2 py-0.5 text-xs text-white/90 hover:bg-white/20" : "inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-0.5 text-xs text-text-secondary hover:bg-slate-200",
            onClick: () => d == null ? void 0 : d(e, B),
            children: [
              /* @__PURE__ */ x.jsx("span", { children: B }),
              /* @__PURE__ */ x.jsx("span", { className: "text-[11px]", children: F })
            ]
          },
          `${e.id}:${B}`
        )) })
      ] })
    ] }),
    p && n && /* @__PURE__ */ x.jsx("div", { className: "pt-1", children: /* @__PURE__ */ x.jsx(Wa, { src: e.senderAvatarUrl, alt: e.senderName || e.senderId, initials: e.senderName || e.senderId, size: "sm" }) })
  ] });
};
YH.displayName = "MessageItem";
const ZH = ({ state: e, agentName: t }) => {
  const r = e.mode === "streaming" ? e.text : "Đang suy nghĩ";
  return /* @__PURE__ */ x.jsx("div", { className: "flex w-full justify-start gap-2", children: /* @__PURE__ */ x.jsx("div", { className: "min-w-0", children: /* @__PURE__ */ x.jsx("div", { className: "max-w-[80%] rounded-2xl bg-surface px-3 py-2 text-sm text-text-muted opacity-80", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2", children: [
    /* @__PURE__ */ x.jsxs("span", { className: "truncate", children: [
      t ? `${t}: ` : "",
      r
    ] }),
    /* @__PURE__ */ x.jsxs("span", { className: "inline-flex items-center gap-1", children: [
      /* @__PURE__ */ x.jsx("span", { className: "h-1.5 w-1.5 rounded-full bg-text-muted animate-bounce", style: { animationDelay: "0ms" } }),
      /* @__PURE__ */ x.jsx("span", { className: "h-1.5 w-1.5 rounded-full bg-text-muted animate-bounce", style: { animationDelay: "150ms" } }),
      /* @__PURE__ */ x.jsx("span", { className: "h-1.5 w-1.5 rounded-full bg-text-muted animate-bounce", style: { animationDelay: "300ms" } })
    ] })
  ] }) }) }) });
};
ZH.displayName = "AgentThinkingMessage";
const XH = ({
  messages: e,
  agentThinking: t,
  agentName: r,
  virtualized: n = !0,
  estimateRowHeight: i = 44,
  overscan: a = 10,
  onLoadOlder: o,
  hasMoreOlder: s,
  isLoadingOlder: l,
  typingText: u,
  ...c
}) => {
  var L, I;
  const f = T.useRef(null), { isAtBottom: d } = V5e(f), [h, p] = T.useState(null), v = T.useRef(null), g = T.useMemo(() => {
    const P = /* @__PURE__ */ new Map();
    for (const k of e)
      P.set(k.id, k), k.clientId && P.set(k.clientId, k);
    return P;
  }, [e]), m = ((L = e[0]) == null ? void 0 : L.clientId) || ((I = e[0]) == null ? void 0 : I.id);
  B5e({ scrollRef: f, firstRowKey: m, enabled: !!o });
  const y = T.useMemo(() => {
    const P = [];
    let k;
    for (const z of e) {
      const V = z.clientId || z.id, B = O5e(z.createdAt);
      B !== k && (P.push({ type: "separator", key: `sep:${B}:${V}`, label: B }), k = B), P.push({ type: "message", key: `msg:${V}`, message: z });
    }
    return t && P.push({ type: "thinking", key: `thinking:${t.mode}` }), u && P.push({ type: "separator", key: `typing:${u}`, label: u }), P;
  }, [t, e, u]), b = T.useMemo(() => {
    const P = /* @__PURE__ */ new Map();
    return y.forEach((k, z) => {
      k.type === "message" && (P.set(k.message.id, z), k.message.clientId && P.set(k.message.clientId, z));
    }), P;
  }, [y]), [w, _] = T.useState(!1), S = y.length ? y[y.length - 1].key : void 0, C = T.useRef(void 0);
  T.useEffect(() => {
    const P = C.current;
    if (C.current = S, !!S) {
      if (P === void 0) {
        requestAnimationFrame(() => c2(f));
        return;
      }
      P !== S && (d ? (requestAnimationFrame(() => c2(f, "smooth")), _(!1)) : _(!0));
    }
  }, [d, S]), T.useEffect(() => {
    const P = f.current;
    if (!P) return;
    let k = 0;
    const z = () => {
      !o || !s || l || P.scrollTop <= 80 && o();
    }, V = () => {
      k || (k = window.requestAnimationFrame(() => {
        k = 0, z(), P.scrollHeight - P.scrollTop - P.clientHeight <= 24 && _(!1);
      }));
    };
    return P.addEventListener("scroll", V, { passive: !0 }), () => {
      k && window.cancelAnimationFrame(k), P.removeEventListener("scroll", V);
    };
  }, [s, l, o]);
  const A = T.useCallback(
    (P) => {
      const k = y[P];
      return k ? k.type === "separator" ? 32 : k.type === "thinking" ? 56 : i : i;
    },
    [i, y]
  ), M = Kd({
    count: n ? y.length : 0,
    getScrollElement: () => f.current,
    estimateSize: A,
    getItemKey: (P) => {
      var k;
      return ((k = y[P]) == null ? void 0 : k.key) ?? P;
    },
    overscan: a
  }), D = n ? M.getVirtualItems() : [], N = n ? M.getTotalSize() : 0, R = n && D.length > 0 ? D[0].start : 0, O = n && D.length > 0 ? N - D[D.length - 1].end : 0, E = (P) => {
    if (P.type === "separator")
      return /* @__PURE__ */ x.jsx("div", { className: "flex justify-center py-2", children: /* @__PURE__ */ x.jsx(xl, { className: "rounded-full bg-surface px-3 py-1 text-text-muted", children: P.label }) });
    if (P.type === "thinking")
      return t ? /* @__PURE__ */ x.jsx(ZH, { state: t, agentName: r }) : null;
    const k = P.message.replyToId ? g.get(P.message.replyToId) : void 0, z = P.message.clientId || P.message.id;
    return /* @__PURE__ */ x.jsx(
      YH,
      {
        message: P.message,
        replyToMessage: k,
        highlighted: h === z,
        onJumpToMessage: (V) => {
          const B = b.get(V);
          if (B == null) return;
          const F = y[B];
          if (!F || F.type !== "message") return;
          const H = F.message.clientId || F.message.id;
          if (v.current && (window.clearTimeout(v.current), v.current = null), p(H), v.current = window.setTimeout(() => {
            p(null), v.current = null;
          }, 300), n)
            M.scrollToIndex(B, { align: "center" });
          else {
            const G = document.getElementById(`chat-msg-${H}`);
            G == null || G.scrollIntoView({ block: "center" });
          }
        },
        ...c
      }
    );
  };
  return /* @__PURE__ */ x.jsxs("div", { className: "relative flex-1 overflow-hidden", children: [
    /* @__PURE__ */ x.jsxs($h, { ref: f, direction: "vertical", autoHide: !0, className: "h-full pr-1", children: [
      l && /* @__PURE__ */ x.jsx("div", { className: "py-2", children: /* @__PURE__ */ x.jsx(xl, { className: "text-center text-text-muted", children: "Đang tải tin nhắn cũ…" }) }),
      n ? /* @__PURE__ */ x.jsxs("div", { style: { height: N }, className: "relative w-full", children: [
        R > 0 && /* @__PURE__ */ x.jsx("div", { style: { height: R }, "aria-hidden": !0 }),
        D.map((P) => {
          const k = y[P.index];
          if (!k) return null;
          const z = k.type === "message" ? k.message.clientId || k.message.id : void 0;
          return /* @__PURE__ */ x.jsx(
            "div",
            {
              id: z ? `chat-msg-${z}` : void 0,
              "data-index": P.index,
              ref: (V) => {
                V && M.measureElement(V);
              },
              style: {
                position: "absolute",
                top: P.start,
                left: 0,
                right: 0
              },
              className: "px-1",
              children: E(k)
            },
            k.key
          );
        }),
        O > 0 && /* @__PURE__ */ x.jsx("div", { style: { height: O }, "aria-hidden": !0 })
      ] }) : /* @__PURE__ */ x.jsx("div", { className: "flex flex-col gap-2 px-1", children: y.map((P) => {
        const k = P.type === "message" ? P.message.clientId || P.message.id : void 0;
        return /* @__PURE__ */ x.jsx("div", { id: k ? `chat-msg-${k}` : void 0, children: E(P) }, P.key);
      }) }),
      /* @__PURE__ */ x.jsx("div", { className: "h-2" })
    ] }),
    w && /* @__PURE__ */ x.jsx("div", { className: "absolute bottom-3 left-1/2 -translate-x-1/2", children: /* @__PURE__ */ x.jsx(
      xt,
      {
        variant: "secondary",
        size: "sm",
        className: "shadow-soft",
        onClick: () => {
          c2(f, "smooth"), _(!1);
        },
        children: "Tin nhắn mới"
      }
    ) })
  ] });
};
XH.displayName = "MessageList";
const KH = ({
  conversationId: e,
  disabled: t,
  placeholder: r = "Nhập tin nhắn…",
  allowAttachments: n = !0,
  maxAttachments: i = 10,
  mentionContexts: a,
  replyTo: o,
  onCancelReply: s,
  onSend: l,
  onOpenSettings: u,
  onVoiceToText: c,
  className: f
}) => {
  var _e;
  const [d, h] = T.useState(""), [p, v] = T.useState([]), [g, m] = T.useState([]), y = T.useRef(null), b = T.useRef(null), w = T.useRef(null), _ = T.useRef(null), S = T.useRef(null), C = T.useRef(null), A = T.useRef(null), [M, D] = T.useState(!1), [N, R] = T.useState(!1), [O, E] = T.useState("root"), [L, I] = T.useState(!1), [P, k] = T.useState(!1), [z, V] = T.useState(!1), [B, F] = T.useState(!1), [H, G] = T.useState(null), [W, X] = T.useState(0), [q, J] = T.useState(""), [U, $] = T.useState(0), Y = T.useMemo(() => {
    const re = [
      { id: "ctx:conversation", label: "Cuộc trò chuyện", description: "Ngữ cảnh của cuộc trò chuyện hiện tại" },
      { id: "ctx:docs", label: "Tài liệu", description: "Tài liệu/ghi chú liên quan" },
      { id: "ctx:files", label: "Files", description: "Danh sách file đính kèm hoặc tham chiếu" },
      { id: "ctx:kb", label: "Knowledge Base", description: "Kho kiến thức" }
    ];
    return a && a.length ? a : re;
  }, [a]), Z = T.useMemo(() => {
    const re = q.trim().toLowerCase();
    return re ? Y.filter((ve) => ve.label.toLowerCase().includes(re) || ve.id.toLowerCase().includes(re)) : Y;
  }, [q, Y]);
  T.useEffect(() => {
    B && $((re) => re < 0 || re >= Z.length ? 0 : re);
  }, [Z.length, B]), T.useEffect(() => {
    B && $(0);
  }, [B, q]);
  const K = (re, ve) => {
    const Ae = re.slice(0, ve), Re = Ae.lastIndexOf("@");
    if (Re < 0) {
      F(!1), G(null), J("");
      return;
    }
    const gt = Re === 0 ? "" : Ae[Re - 1];
    if (gt && !/\s/.test(gt)) {
      F(!1), G(null), J("");
      return;
    }
    const Ye = Ae.slice(Re + 1);
    if (/\s/.test(Ye) || Ye.includes("[") || Ye.includes("]")) {
      F(!1), G(null), J("");
      return;
    }
    F(!0), G(Re), J(Ye), X(ve);
  }, ie = (re) => {
    const ve = Z.length;
    if (ve <= 0) {
      $(0);
      return;
    }
    const Ae = (re % ve + ve) % ve;
    $(Ae);
  }, Q = () => {
    const re = y.current, ve = b.current, Ae = w.current;
    !re || !ve || !Ae || (Ae.style.transform = `translate(${-re.scrollLeft}px, ${-re.scrollTop}px)`);
  }, ce = (re) => {
    const ve = H, Ae = W;
    if (ve === null) return;
    const Re = `@[${re.label}] `, gt = `${d.slice(0, ve)}${Re}${d.slice(Ae)}`;
    h(gt), F(!1), G(null), J(""), X(0), $(0), requestAnimationFrame(() => {
      const Ye = y.current;
      if (!Ye) return;
      const we = ve + Re.length;
      Ye.focus();
      try {
        Ye.setSelectionRange(we, we);
      } catch {
      }
    });
  }, te = (re) => {
    const ve = /@\[[^\]]+\]/g, Ae = [];
    let Re = 0, gt = null;
    for (; gt = ve.exec(re); ) {
      const Ye = gt.index, we = gt[0];
      Ye > Re && Ae.push(re.slice(Re, Ye)), Ae.push(
        /* @__PURE__ */ x.jsx("span", { className: "rounded-md bg-primary-100 px-1 text-transparent", children: we }, `${Ye}:${we}`)
      ), Re = Ye + we.length;
    }
    return Re < re.length && Ae.push(re.slice(Re)), Ae;
  }, oe = (re) => {
    const ve = /@\[([^\]]+)\]/g, Ae = [];
    let Re = null;
    for (; Re = ve.exec(re); ) {
      const Ye = Re[1];
      Ye && Ae.push(Ye);
    }
    const gt = Ae.map((Ye) => {
      var we;
      return ((we = Y.find((ke) => ke.label === Ye)) == null ? void 0 : we.id) ?? Ye;
    }).filter((Ye, we, ke) => ke.indexOf(Ye) === we);
    return gt.length ? gt : void 0;
  }, de = 44, Pe = 160, Ke = () => {
    const re = y.current;
    if (!re) return;
    re.style.height = "auto";
    const ve = Math.min(Math.max(re.scrollHeight, de), Pe);
    re.style.height = `${ve}px`, re.style.overflowY = re.scrollHeight > Pe ? "auto" : "hidden";
  };
  T.useLayoutEffect(() => {
    Ke(), Q();
  }, [d]);
  const it = !t && (!!d.trim() || p.length > 0), Dt = () => {
    var re;
    t || n && ((re = _.current) == null || re.click());
  }, Pt = (re) => {
    !re || re.length === 0 || v((ve) => {
      const Ae = [...ve];
      for (const Re of Array.from(re)) {
        if (Ae.length >= i) break;
        Ae.push(Re);
      }
      return Ae;
    });
  }, gr = async (re = "keyboard") => {
    if (!it) return;
    const ve = {
      conversationId: e,
      clientId: Jc(),
      text: d.trim() ? d : void 0,
      attachments: p.length ? p : void 0,
      meta: {
        source: re,
        webSearch: L,
        autoApprove: P,
        linkedSources: g.length ? g : void 0,
        mentions: oe(d)
      }
    }, Ae = d, Re = p;
    h(""), v([]), m([]), F(!1), G(null), J(""), X(0), $(0);
    try {
      await (l == null ? void 0 : l(ve));
    } catch {
      h(Ae), v(Re);
    }
  }, Kt = () => {
    if (t || (c == null || c(), typeof window > "u")) return;
    const re = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!re) return;
    const ve = new re();
    ve.continuous = !1, ve.interimResults = !0, ve.lang = "vi-VN", V(!0), ve.onresult = (Ae) => {
      var Ye, we;
      const Re = (Ye = Ae == null ? void 0 : Ae.results) == null ? void 0 : Ye[0], gt = (we = Re == null ? void 0 : Re[0]) == null ? void 0 : we.transcript;
      typeof gt == "string" && gt.trim() && h((ke) => (ke ? `${ke} ${gt}` : gt).trim());
    }, ve.onerror = () => {
      V(!1);
    }, ve.onend = () => {
      V(!1);
    }, ve.start();
  };
  return /* @__PURE__ */ x.jsxs("div", { ref: S, className: me("border-t border-slate-200 bg-surface px-3 py-3", f), children: [
    /* @__PURE__ */ x.jsx(
      "input",
      {
        ref: _,
        type: "file",
        multiple: !0,
        className: "hidden",
        onChange: (re) => Pt(re.target.files),
        disabled: t || !n
      }
    ),
    /* @__PURE__ */ x.jsxs("div", { className: "rounded-2xl border border-slate-200 bg-surface px-3 py-2 shadow-sm focus-within:ring-2 focus-within:ring-primary-500", children: [
      o && /* @__PURE__ */ x.jsxs("div", { className: "mb-2 flex items-start justify-between gap-2 rounded-xl bg-slate-50 px-3 py-2", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "min-w-0", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "text-xs font-medium text-text-secondary truncate", children: [
            "Reply ",
            o.senderName ? `· ${o.senderName}` : ""
          ] }),
          /* @__PURE__ */ x.jsx("div", { className: "text-xs text-text-muted truncate", children: o.previewText || "" })
        ] }),
        /* @__PURE__ */ x.jsx(
          Nr,
          {
            icon: ef,
            size: "xs",
            variant: "muted",
            "aria-label": "Hủy reply",
            onClick: () => s == null ? void 0 : s()
          }
        )
      ] }),
      (p.length > 0 || g.length > 0) && /* @__PURE__ */ x.jsxs("div", { className: "mb-2 flex flex-wrap gap-2", children: [
        p.map((re, ve) => /* @__PURE__ */ x.jsx(
          $c,
          {
            label: re.name,
            onDelete: () => v((Ae) => Ae.filter((Re, gt) => gt !== ve))
          },
          `${re.name}:${re.size}:${ve}`
        )),
        g.map((re) => /* @__PURE__ */ x.jsx(
          $c,
          {
            label: re,
            onDelete: () => m((ve) => ve.filter((Ae) => Ae !== re))
          },
          `linked:${re}`
        ))
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "relative", children: [
        /* @__PURE__ */ x.jsx(
          "div",
          {
            ref: b,
            "aria-hidden": !0,
            className: "pointer-events-none absolute inset-0 overflow-hidden px-1 py-1 text-sm leading-5 whitespace-pre-wrap break-words text-transparent",
            children: /* @__PURE__ */ x.jsx("div", { ref: w, children: te(d) })
          }
        ),
        /* @__PURE__ */ x.jsx(
          "textarea",
          {
            ref: y,
            className: "relative z-10 min-h-[44px] max-h-40 w-full resize-none bg-transparent px-1 py-1 text-sm leading-5 text-text-primary placeholder:text-text-muted focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",
            placeholder: r,
            value: d,
            disabled: t,
            onScroll: () => {
              Q();
            },
            onClick: () => {
              const re = y.current;
              re && K(d, re.selectionStart ?? d.length);
            },
            onKeyUp: () => {
              const re = y.current;
              re && K(d, re.selectionStart ?? d.length);
            },
            onChange: (re) => {
              const ve = re.target.value, Ae = re.target.selectionStart ?? ve.length;
              h(ve), Ke(), K(ve, Ae);
            },
            onKeyDown: (re) => {
              if (B) {
                if (re.key === "Escape") {
                  re.preventDefault(), F(!1), G(null), J("");
                  return;
                }
                if (re.key === "ArrowDown") {
                  re.preventDefault(), ie(U + 1);
                  return;
                }
                if (re.key === "ArrowUp") {
                  re.preventDefault(), ie(U - 1);
                  return;
                }
                if (re.key === "Enter" && !re.shiftKey || re.key === "Tab") {
                  const ve = Z[U];
                  if (ve) {
                    re.preventDefault(), ce(ve);
                    return;
                  }
                }
              }
              re.key === "Enter" && !re.shiftKey && (re.preventDefault(), gr("keyboard"));
            }
          }
        ),
        /* @__PURE__ */ x.jsx(
          sg,
          {
            anchorRef: y,
            open: B,
            label: "Chọn context",
            options: Z.map((re) => ({ value: re.id, label: re.label })),
            value: (_e = Z[U]) == null ? void 0 : _e.id,
            side: "top",
            align: "start",
            className: "min-w-[240px]",
            onDismiss: () => {
              F(!1), G(null), J("");
            },
            renderOption: (re, ve) => {
              const Ae = Y.find((Re) => Re.id === re.value);
              return /* @__PURE__ */ x.jsxs(
                "button",
                {
                  type: "button",
                  className: ve.selected ? "flex w-full flex-col gap-0.5 rounded-xl bg-slate-100 px-4 py-2 text-left" : "flex w-full flex-col gap-0.5 rounded-xl px-4 py-2 text-left hover:bg-slate-50",
                  onMouseEnter: () => {
                    const Re = Z.findIndex((gt) => gt.id === re.value);
                    Re >= 0 && $(Re);
                  },
                  onClick: () => {
                    Ae && ce(Ae);
                  },
                  children: [
                    /* @__PURE__ */ x.jsx("span", { className: "text-sm text-text-secondary", children: (Ae == null ? void 0 : Ae.label) ?? re.label ?? re.value }),
                    (Ae == null ? void 0 : Ae.description) && /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-muted", children: Ae.description })
                  ]
                }
              );
            }
          }
        )
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "mt-2 flex items-center justify-between", children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ x.jsx(
              Nr,
              {
                ref: C,
                icon: EU,
                size: "sm",
                variant: "muted",
                "aria-label": "Đính kèm",
                onClick: () => {
                  t || (R((re) => {
                    const ve = !re;
                    return ve && E("root"), ve;
                  }), D(!1));
                },
                disabled: t
              }
            ),
            /* @__PURE__ */ x.jsx(
              sg,
              {
                anchorRef: C,
                open: N,
                label: O === "root" ? "Đính kèm" : "Dữ liệu liên kết",
                headerRight: O === "linked" ? /* @__PURE__ */ x.jsx(
                  "button",
                  {
                    type: "button",
                    className: "rounded px-1 py-0.5 text-[10px] leading-none text-text-muted hover:text-text-secondary",
                    onClick: (re) => {
                      re.stopPropagation(), E("root");
                    },
                    children: "Quay lại"
                  }
                ) : null,
                options: O === "root" ? [
                  {
                    value: "upload",
                    label: "Upload từ máy",
                    disabled: t || !n
                  },
                  { value: "linked", label: "Dữ liệu liên kết", disabled: t }
                ] : [
                  { value: "Google Drive", label: "Google Drive" },
                  { value: "Hệ thống", label: "Hệ thống" },
                  { value: "OneDrive", label: "OneDrive" },
                  { value: "Dropbox", label: "Dropbox" }
                ],
                renderOption: (re) => O === "root" && re.value === "linked" ? /* @__PURE__ */ x.jsxs(
                  "button",
                  {
                    type: "button",
                    className: "flex w-full items-center justify-between px-4 py-1.5 text-sm text-text-secondary hover:bg-slate-50",
                    onClick: () => {
                      re.disabled || E("linked");
                    },
                    disabled: re.disabled,
                    children: [
                      /* @__PURE__ */ x.jsx("span", { children: re.label ?? re.value }),
                      /* @__PURE__ */ x.jsx("span", { className: "text-xs text-text-muted", children: "›" })
                    ]
                  }
                ) : O === "root" && re.value === "upload" ? /* @__PURE__ */ x.jsx(
                  "button",
                  {
                    type: "button",
                    className: "flex w-full items-center justify-between px-4 py-1.5 text-sm text-text-secondary hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60",
                    onClick: () => {
                      re.disabled || (Dt(), R(!1), E("root"));
                    },
                    disabled: re.disabled,
                    children: /* @__PURE__ */ x.jsx("span", { children: re.label ?? re.value })
                  }
                ) : /* @__PURE__ */ x.jsx(
                  "button",
                  {
                    type: "button",
                    className: "flex w-full items-center justify-between px-4 py-1.5 text-sm text-text-secondary hover:bg-slate-50",
                    onClick: () => {
                      O === "linked" && (m((ve) => ve.includes(re.value) ? ve : [...ve, re.value]), R(!1), E("root"));
                    },
                    children: /* @__PURE__ */ x.jsx("span", { children: re.label ?? re.value })
                  }
                ),
                align: "start",
                onDismiss: () => {
                  R(!1), E("root");
                }
              }
            )
          ] }),
          /* @__PURE__ */ x.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ x.jsx(
              Nr,
              {
                ref: A,
                icon: bS,
                size: "sm",
                variant: "muted",
                "aria-label": "Cài đặt",
                onClick: () => {
                  t || (u == null || u(), D((re) => !re), R(!1), E("root"));
                },
                disabled: t
              }
            ),
            /* @__PURE__ */ x.jsx(
              sg,
              {
                anchorRef: A,
                open: M,
                label: "Cài đặt",
                options: [
                  { value: "web_search", label: "Tìm kiếm trên web" },
                  { value: "auto_approve", label: "Tự động phê duyệt" }
                ],
                renderOption: (re) => {
                  const ve = re.value === "web_search" ? L : P, Ae = () => {
                    re.value === "web_search" && I((Re) => !Re), re.value === "auto_approve" && k((Re) => !Re);
                  };
                  return /* @__PURE__ */ x.jsxs(
                    "button",
                    {
                      type: "button",
                      className: "flex w-full items-center justify-between px-4 py-1.5 text-sm text-text-secondary hover:bg-slate-50",
                      onClick: Ae,
                      children: [
                        /* @__PURE__ */ x.jsx("span", { children: re.label ?? re.value }),
                        /* @__PURE__ */ x.jsx("span", { onClick: (Re) => Re.stopPropagation(), children: /* @__PURE__ */ x.jsx(iP, { checked: ve, onChange: () => Ae(), size: "sm" }) })
                      ]
                    }
                  );
                },
                align: "start",
                onDismiss: () => D(!1)
              }
            )
          ] }),
          /* @__PURE__ */ x.jsx(
            Nr,
            {
              icon: bU,
              size: "sm",
              variant: "muted",
              "aria-label": "Nhập giọng nói",
              onClick: Kt,
              disabled: t,
              className: z ? "bg-primary-100" : void 0
            }
          )
        ] }),
        /* @__PURE__ */ x.jsx(
          xt,
          {
            variant: "primary",
            size: "sm",
            onClick: () => void gr("quick_action"),
            disabled: !it,
            icon: /* @__PURE__ */ x.jsx(WU, { size: 16 }),
            "aria-label": "Gửi",
            className: "h-9 w-9 px-0"
          }
        )
      ] })
    ] })
  ] });
};
KH.displayName = "ChatInput";
const Y5e = ({
  agent: e,
  callDurationLabel: t,
  onEndCall: r,
  className: n
}) => /* @__PURE__ */ x.jsx("div", { className: fe("mx-3 mt-3 rounded-3xl border border-slate-100 bg-white p-4 shadow-lg", n), children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-4", children: [
  /* @__PURE__ */ x.jsxs("div", { className: "relative shrink-0", children: [
    /* @__PURE__ */ x.jsx("div", { className: "absolute inset-0 rounded-full bg-gradient-to-br from-rose-400 via-orange-400 to-amber-400 opacity-70 blur-md" }),
    /* @__PURE__ */ x.jsx("div", { className: "relative flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-rose-500 via-orange-400 to-amber-300 text-white", children: e.logoUrl ? /* @__PURE__ */ x.jsx(Wa, { src: e.logoUrl, alt: e.name, size: "sm" }) : /* @__PURE__ */ x.jsx("span", { className: "text-sm font-semibold", children: e.name.slice(0, 2).toUpperCase() }) })
  ] }),
  /* @__PURE__ */ x.jsx("div", { className: "flex min-w-0 flex-1 items-center justify-between gap-4", children: /* @__PURE__ */ x.jsxs("div", { className: "min-w-0", children: [
    /* @__PURE__ */ x.jsx(aS, { className: "text-base font-semibold text-slate-900", children: e.name }),
    /* @__PURE__ */ x.jsx(xl, { className: "text-rose-500", children: t })
  ] }) }),
  /* @__PURE__ */ x.jsx(
    Nr,
    {
      icon: jU,
      size: "md",
      variant: "default",
      className: "h-11 w-11 shrink-0 bg-rose-500 text-white shadow-lg shadow-rose-200 hover:bg-rose-600",
      disableHover: !0,
      "aria-label": "Kết thúc cuộc gọi",
      onClick: r
    }
  )
] }) });
function dLe(e) {
  return { ...e ?? {} };
}
function hLe(e, t, r) {
  return { ...e, [t]: r };
}
function pLe(...e) {
  return Object.assign({}, ...e.filter(Boolean));
}
function Z5e(e, t) {
  if (!e) return null;
  const r = e.conversationId ?? t;
  return r ? { type: e.type, payload: e.payload, conversationId: r } : null;
}
const X5e = ({ node: e, renderChildren: t }) => {
  const { title: r, subtitle: n, footer: i, actions: a, padding: o, media: s, mediaPosition: l, highlight: u, compact: c, className: f, ...d } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(
    vP,
    {
      title: r,
      subtitle: n,
      footer: i,
      actions: a,
      padding: o,
      media: s,
      mediaPosition: l,
      highlight: u,
      compact: c,
      className: f,
      ...d,
      children: t()
    }
  );
}, K5e = ({ node: e, renderChildren: t }) => {
  const { gap: r, className: n, ...i } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(iW, { gap: r, className: n, ...i, children: t() });
}, q5e = ({ node: e, renderChildren: t }) => {
  const { gap: r, className: n, ...i } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(nW, { gap: r, className: n, ...i, children: t() });
}, J5e = ({ node: e, renderChildren: t }) => {
  const { padding: r, className: n, ...i } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(rW, { padding: r, className: n, ...i, children: t() });
}, Q5e = ({ node: e }) => {
  const { className: t } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(eW, { className: t });
}, eIe = ({ node: e, renderChildren: t }) => {
  const { value: r, text: n, as: i, className: a, ...o } = e.props ?? {}, s = r ?? n;
  return /* @__PURE__ */ x.jsx(aS, { as: i, className: a, ...o, children: s != null ? String(s) : t() });
}, tIe = ({ node: e }) => {
  const { src: t, url: r, alt: n, className: i, ...a } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(Da, { src: t ?? r, alt: n, className: i, ...a });
}, rIe = ({ node: e, renderChildren: t, onAction: r, conversationId: n }) => {
  const { label: i, text: a, action: o, className: s, onClick: l, ...u } = e.props ?? {}, c = Z5e(o, n);
  return /* @__PURE__ */ x.jsx(
    xt,
    {
      className: s,
      onClick: (f) => {
        c && r && r(c), typeof l == "function" && l(f);
      },
      ...u,
      children: i != null ? String(i) : a != null ? String(a) : t()
    }
  );
}, nIe = ({ node: e }) => {
  const { size: t, ...r } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(tW, { size: t, ...r });
}, iIe = {
  card: X5e,
  row: K5e,
  col: q5e,
  box: J5e,
  spacer: nIe,
  divider: Q5e,
  text: eIe,
  image: tIe,
  button: rIe
}, aIe = ({ node: e }) => {
  const { src: t, alt: r, initials: n, size: i = "md", status: a, shape: o, className: s, ...l } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(Wa, { src: t, alt: r, initials: n, size: i, status: a, shape: o, className: s, ...l });
}, oIe = ({ node: e, renderChildren: t }) => {
  const { text: r, variant: n = "default", size: i = "sm", className: a, ...o } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(ak, { variant: n, size: i, className: a, ...o, children: r != null ? String(r) : t() });
};
function Mr(e, t) {
  if (!e) return null;
  const r = e.conversationId ?? t;
  return r ? { type: e.type, payload: e.payload, conversationId: r } : null;
}
const sIe = ({ node: e, renderChildren: t, onAction: r, conversationId: n, path: i }) => {
  const { label: a, variant: o, size: s, disabled: l, action: u, className: c, ...f } = e.props ?? {}, d = Mr(u, n);
  return /* @__PURE__ */ x.jsx(
    $c,
    {
      label: a ?? t(),
      variant: o,
      size: s,
      disabled: !!l,
      className: c,
      onClick: (h) => {
        !d || !r || (r({
          ...d,
          payload: { ...d.payload ?? {}, path: i }
        }), h.preventDefault());
      },
      ...f
    }
  );
};
function KR(e, t) {
  try {
    return new Intl.NumberFormat("vi-VN", { style: "currency", currency: t }).format(e);
  } catch {
    return String(e);
  }
}
const lIe = ({ node: e }) => {
  const { value: t = 0, oldValue: r, currency: n = "VND", className: i } = e.props ?? {}, a = Number(t), o = r != null ? Number(r) : null;
  return /* @__PURE__ */ x.jsxs("div", { className: me("flex items-end gap-2", i), children: [
    /* @__PURE__ */ x.jsx("div", { className: "text-lg font-semibold text-text-primary", children: KR(a, String(n)) }),
    o != null && Number.isFinite(o) && o > a && /* @__PURE__ */ x.jsx("div", { className: "text-xs text-text-muted line-through", children: KR(o, String(n)) })
  ] });
}, f2 = {
  primary: { stroke: "text-primary-500", bg: "bg-primary-100", fill: "bg-primary-500" },
  secondary: { stroke: "text-slate-500", bg: "bg-slate-200", fill: "bg-slate-500" },
  success: { stroke: "text-green-500", bg: "bg-green-100", fill: "bg-green-500" },
  danger: { stroke: "text-red-500", bg: "bg-red-100", fill: "bg-red-500" },
  composite: { stroke: "text-slate-500", bg: "bg-slate-100", fill: "bg-transparent" }
}, uIe = {
  sm: 32,
  md: 48,
  lg: 64
}, qH = T.forwardRef(
  ({ value: e = 0, max: t = 100, variant: r = "primary", showLabel: n = !1, type: i = "linear", size: a = "md", className: o, ...s }, l) => {
    const u = Math.min(Math.max(e, 0), t), c = Math.round(u / t * 100), f = () => c <= 25 ? "text-red-600" : c <= 50 ? "text-amber-500" : c <= 75 ? "text-lime-600" : "text-emerald-600", d = () => c <= 25 ? "text-red-600" : c <= 50 ? "text-amber-500" : c <= 75 ? "text-lime-600" : "text-emerald-600", h = () => c <= 25 ? "linear-gradient(90deg, #dc2626 0%, #f97316 100%)" : c <= 50 ? "linear-gradient(90deg, #dc2626 0%, #f97316 55%, #facc15 100%)" : c <= 75 ? "linear-gradient(90deg, #dc2626 0%, #f97316 45%, #facc15 80%, #a3e635 100%)" : "linear-gradient(90deg, #dc2626 0%, #f97316 35%, #facc15 65%, #a3e635 90%, #22c55e 100%)";
    if (i === "circular") {
      const p = uIe[a], v = p / 2 - 4, g = 2 * Math.PI * v, m = g - c / 100 * g;
      return /* @__PURE__ */ x.jsxs("div", { ref: l, className: me(fe("inline-flex flex-col items-center", o)), ...s, children: [
        /* @__PURE__ */ x.jsxs("svg", { width: p, height: p, className: "-rotate-90", children: [
          /* @__PURE__ */ x.jsx(
            "circle",
            {
              cx: p / 2,
              cy: p / 2,
              r: v,
              fill: "transparent",
              stroke: "currentColor",
              className: "text-slate-200",
              strokeWidth: "4"
            }
          ),
          /* @__PURE__ */ x.jsx(
            "circle",
            {
              cx: p / 2,
              cy: p / 2,
              r: v,
              fill: "transparent",
              stroke: "currentColor",
              className: r === "composite" ? d() : f2[r].stroke,
              strokeWidth: "4",
              strokeDasharray: g,
              strokeDashoffset: m,
              strokeLinecap: "round"
            }
          )
        ] }),
        n && /* @__PURE__ */ x.jsxs("span", { className: "mt-1 text-xs font-medium text-text-secondary", children: [
          c,
          "%"
        ] })
      ] });
    }
    return /* @__PURE__ */ x.jsxs("div", { ref: l, className: me(fe("flex flex-col gap-1", o)), ...s, children: [
      /* @__PURE__ */ x.jsx("div", { className: me(fe("h-2 w-full rounded-full", f2[r].bg)), children: /* @__PURE__ */ x.jsx(
        "div",
        {
          className: me(
            fe("h-full rounded-full transition-all", r === "composite" ? "" : f2[r].fill)
          ),
          style: {
            width: `${c}%`,
            backgroundImage: r === "composite" ? h() : void 0
          }
        }
      ) }),
      n && /* @__PURE__ */ x.jsxs("span", { className: fe("text-xs font-medium", r === "composite" ? f() : "text-text-secondary"), children: [
        c,
        "%"
      ] })
    ] });
  }
);
qH.displayName = "Progress";
const cIe = ({ node: e }) => {
  const { value: t, max: r, variant: n, showLabel: i, type: a, size: o, className: s, ...l } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(
    qH,
    {
      value: t != null ? Number(t) : void 0,
      max: r != null ? Number(r) : void 0,
      variant: n,
      showLabel: !!i,
      type: a,
      size: o,
      className: s,
      ...l
    }
  );
}, fIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const {
    value: i = 0,
    max: a = 5,
    size: o = "md",
    showValue: s,
    readOnly: l = !0,
    disabled: u,
    allowClear: c,
    action: f,
    className: d,
    ...h
  } = e.props ?? {}, p = Mr(f, r);
  return /* @__PURE__ */ x.jsx(
    kP,
    {
      value: Number(i),
      max: Number(a),
      size: o,
      showValue: !!s,
      readOnly: !!l || !p,
      disabled: !!u,
      allowClear: !!c,
      className: d,
      onChange: (v) => {
        !p || !t || t({
          ...p,
          payload: { ...p.payload ?? {}, value: v, path: n }
        });
      },
      ...h
    }
  );
}, vLe = {
  badge: oIe,
  rating: fIe,
  progress: cIe,
  avatar: aIe,
  chip: sIe,
  price: lIe
};
function JH(e) {
  return {
    name: e.name,
    size: e.size,
    type: e.type,
    lastModified: e.lastModified
  };
}
function dIe(e) {
  return typeof File < "u" && e instanceof File ? { kind: "file", file: JH(e) } : typeof e == "string" ? { kind: "url", url: e } : e == null ? { kind: "empty", value: null } : { kind: "unknown", value: e };
}
const hIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, onChange: o, ...s } = e.props ?? {}, l = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    UG,
    {
      ...s,
      onValueChange: (u) => {
        l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: dIe(u), path: n }
        }), typeof a == "function" && a(u);
      },
      onChange: (u) => {
        typeof o == "function" && o(u);
      }
    }
  );
}, pIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    Zc,
    {
      ...o,
      onChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, checked: l.target.checked, value: l.target.value, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, vIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, name: o, ...s } = e.props ?? {}, l = Mr(i, r), u = fy(), c = (f = {}) => /* @__PURE__ */ x.jsx(
    La,
    {
      ...s,
      ...f,
      onValueChange: (d) => {
        var h;
        (h = f.onChange) == null || h.call(f, d), l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: d, date: d, path: n }
        }), typeof a == "function" && a(d);
      }
    }
  );
  return u && o ? /* @__PURE__ */ x.jsx(
    iS,
    {
      name: o,
      control: u.control,
      render: ({ field: { ref: f, ...d } }) => c(d)
    }
  ) : c();
}, gIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, name: o, ...s } = e.props ?? {}, l = Mr(i, r), u = fy(), c = (f = {}) => /* @__PURE__ */ x.jsx(
    Ra,
    {
      ...s,
      ...f,
      onValueChange: (d) => {
        var h;
        (h = f.onChange) == null || h.call(f, d), l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: d, datetime: d, path: n }
        }), typeof a == "function" && a(d);
      }
    }
  );
  return u && o ? /* @__PURE__ */ x.jsx(
    iS,
    {
      name: o,
      control: u.control,
      render: ({ field: { ref: f, ...d } }) => c(d)
    }
  ) : c();
}, mIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    bY,
    {
      ...o,
      onValueChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, value: l, cells: l, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, yIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, onFilesSelected: o, value: s, defaultValue: l, ...u } = e.props ?? {}, c = Mr(i, r), f = typeof File < "u", d = f && Array.isArray(s) && s.every((p) => p instanceof File) ? s : void 0, h = f && Array.isArray(l) && l.every((p) => p instanceof File) ? l : void 0;
  return /* @__PURE__ */ x.jsx(
    YG,
    {
      ...u,
      value: d,
      defaultValue: h,
      onFilesSelected: (p) => {
        typeof o == "function" && o(p);
      },
      onValueChange: (p) => {
        c && t && t({
          ...c,
          payload: {
            ...c.payload ?? {},
            files: Array.isArray(p) ? p.map(JH) : [],
            path: n
          }
        }), typeof a == "function" && a(p);
      }
    }
  );
}, qR = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, name: o, ...s } = e.props ?? {}, l = Mr(i, r), u = fy(), c = u && o ? u.register(o) : {};
  return /* @__PURE__ */ x.jsx(
    mr,
    {
      ...s,
      ...c,
      onChange: (f) => {
        var d;
        (d = c.onChange) == null || d.call(c, f), l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: f.target.value, path: n }
        }), typeof a == "function" && a(f);
      },
      ref: c.ref,
      name: o
    }
  );
}, xIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, mask: o, ...s } = e.props ?? {}, l = Mr(i, r);
  return typeof o != "string" || !o ? null : /* @__PURE__ */ x.jsx(
    ZG,
    {
      mask: o,
      ...s,
      onChange: (u, c) => {
        l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: u, rawValue: c, path: n }
        }), typeof a == "function" && a(u, c);
      }
    }
  );
}, bIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    XG,
    {
      ...o,
      onChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, checked: l.target.checked, value: l.target.value, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, wIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, name: o, options: s = [], value: l, orientation: u, className: c, error: f } = e.props ?? {}, d = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    KG,
    {
      name: String(o ?? e.id ?? e.key ?? "radio_group"),
      options: Array.isArray(s) ? s : [],
      value: l != null ? String(l) : void 0,
      orientation: u,
      className: c,
      error: !!f,
      onChange: (h) => {
        d && t && t({
          ...d,
          payload: { ...d.payload ?? {}, value: h, path: n }
        }), typeof a == "function" && a(h);
      }
    }
  );
}, _Ie = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, options: o = [], name: s, ...l } = e.props ?? {}, u = Mr(i, r), c = fy(), f = (d = {}) => /* @__PURE__ */ x.jsx(
    cy,
    {
      options: Array.isArray(o) ? o : [],
      ...l,
      ...d,
      onValueChange: (h) => {
        var p;
        (p = d.onChange) == null || p.call(d, h), u && t && t({
          ...u,
          payload: { ...u.payload ?? {}, value: h, path: n }
        }), typeof a == "function" && a(h);
      }
    }
  );
  return c && s ? /* @__PURE__ */ x.jsx(
    iS,
    {
      name: s,
      control: c.control,
      render: ({ field: { ref: d, ...h } }) => f(h)
    }
  ) : f();
}, SIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, fetchOptions: o, ...s } = e.props ?? {}, l = Mr(i, r);
  return typeof o != "function" ? null : /* @__PURE__ */ x.jsx(
    qG,
    {
      ...s,
      fetchOptions: o,
      onValueChange: (u) => {
        l && t && t({
          ...l,
          payload: { ...l.payload ?? {}, value: u, path: n }
        }), typeof a == "function" && a(u);
      }
    }
  );
}, CIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    JG,
    {
      ...o,
      onChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, value: l, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, TIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    iP,
    {
      ...o,
      onChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, checked: l, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, AIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onCheckedChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    oP,
    {
      ...o,
      onCheckedChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, checked: l, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, MIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    Lg,
    {
      ...o,
      onChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, value: l.target.value, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, EIe = ({ node: e, onAction: t, conversationId: r, path: n }) => {
  const { action: i, onValueChange: a, ...o } = e.props ?? {}, s = Mr(i, r);
  return /* @__PURE__ */ x.jsx(
    QG,
    {
      ...o,
      onValueChange: (l) => {
        s && t && t({
          ...s,
          payload: { ...s.payload ?? {}, value: l, html: l, path: n }
        }), typeof a == "function" && a(l);
      }
    }
  );
}, DIe = ({ node: e, renderChildren: t }) => {
  const { label: r, required: n, name: i, error: a, className: o, ...s } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(
    cP,
    {
      label: r,
      required: n,
      name: i,
      error: a,
      className: o,
      ...s,
      children: t()
    }
  );
}, NIe = ({ node: e, renderChildren: t }) => {
  const { container: r, spacing: n, size: i, className: a, ...o } = e.props ?? {};
  return /* @__PURE__ */ x.jsx(
    hW,
    {
      container: r,
      spacing: n,
      size: i,
      className: a,
      ...o,
      children: t()
    }
  );
}, IIe = ({ node: e, renderChildren: t, onAction: r, conversationId: n }) => {
  const { className: i, ...a } = e.props ?? {}, o = (s) => {
    r && n && r({
      type: "form.submit",
      conversationId: n,
      payload: { values: s }
    });
  };
  return /* @__PURE__ */ x.jsx(
    uP,
    {
      className: i,
      onSubmit: o,
      ...a,
      children: t()
    }
  );
}, gLe = {
  input: qR,
  text_input: qR,
  textarea: MIe,
  select: _Ie,
  select_lazy: SIe,
  checkbox: pIe,
  radio: bIe,
  radio_group: wIe,
  switch: TIe,
  theme_switch: AIe,
  slider: CIe,
  masked_input: xIe,
  date_picker: vIe,
  datetime_picker: gIe,
  file_uploader: yIe,
  avatar_upload: hIe,
  tiptap_editor: EIe,
  excel_grid: mIe,
  form_field: DIe,
  grid: NIe,
  form: IIe
};
class LIe extends T.Component {
  constructor() {
    super(...arguments);
    hM(this, "state", { hasError: !1 });
  }
  static getDerivedStateFromError() {
    return { hasError: !0 };
  }
  render() {
    return this.state.hasError ? this.props.fallback ?? null : this.props.children;
  }
}
function d2(e) {
  return !e || typeof e != "object" ? !1 : typeof e.type == "string";
}
const fM = ({
  node: e,
  nodes: t,
  registry: r,
  conversationId: n,
  onAction: i,
  className: a,
  fallback: o,
  unknownFallback: s,
  invalidFallback: l,
  maxDepth: u = 50
}) => {
  const c = T.useMemo(() => ({ ...iIe, ...r ?? {} }), [r]), f = T.useCallback(
    (h, p) => {
      if (!d2(h))
        return l ? /* @__PURE__ */ x.jsx(T.Fragment, { children: l(h, p) }, p.join("/")) : /* @__PURE__ */ x.jsxs(
          "div",
          {
            className: "rounded-xl border border-dashed border-rose-300 bg-rose-50 px-3 py-2 text-xs text-rose-700",
            children: [
              "Invalid node at ",
              /* @__PURE__ */ x.jsx("span", { className: "font-mono", children: p.join("/") })
            ]
          },
          p.join("/")
        );
      const v = h;
      if (p.length > u)
        return /* @__PURE__ */ x.jsxs(
          "div",
          {
            className: "rounded-xl border border-dashed border-amber-300 bg-amber-50 px-3 py-2 text-xs text-amber-800",
            children: [
              "Max depth exceeded at ",
              /* @__PURE__ */ x.jsx("span", { className: "font-mono", children: p.join("/") })
            ]
          },
          v.key ?? v.id ?? p.join("/")
        );
      const g = c[v.type], m = Array.isArray(v.children) ? v.children : [], y = () => m.map(
        (_, S) => f(_, [...p, `${d2(_) ? _.type : "invalid"}:${S}`])
      );
      if (!g)
        return s ? /* @__PURE__ */ x.jsx(T.Fragment, { children: s(v, p) }, v.key ?? v.id ?? p.join("/")) : /* @__PURE__ */ x.jsxs(
          "div",
          {
            className: "rounded-xl border border-dashed border-slate-300 bg-slate-50 px-3 py-2 text-xs text-text-muted",
            children: [
              "Unsupported component: ",
              /* @__PURE__ */ x.jsx("span", { className: "font-mono", children: v.type })
            ]
          },
          v.key ?? v.id ?? p.join("/")
        );
      const b = {
        node: v,
        renderChildren: y,
        onAction: i,
        conversationId: n,
        path: p
      }, w = g;
      return /* @__PURE__ */ x.jsx(T.Fragment, { children: /* @__PURE__ */ x.jsx(w, { ...b }) }, v.key ?? v.id ?? p.join("/"));
    },
    [n, l, u, i, c, s]
  ), d = t ?? (e ? [e] : []);
  return /* @__PURE__ */ x.jsx(LIe, { fallback: o, children: /* @__PURE__ */ x.jsx("div", { className: me("flex flex-col gap-3", a), children: d.filter(Boolean).map(
    (h, p) => f(h, [`${d2(h) ? h.type : "invalid"}:${p}`])
  ) }) });
};
fM.displayName = "SchemaRenderer";
function RIe(e) {
  return e.replace(/~1/g, "/").replace(/~0/g, "~");
}
function PIe(e) {
  if (!e) return [];
  if (e === "/") return [""];
  if (!e.startsWith("/"))
    throw new Error(`Invalid JSON Pointer: ${e}`);
  return e.split("/").slice(1).map((t) => RIe(t));
}
function kIe(e, t) {
  if (!e) return;
  const r = PIe(t);
  let n = e;
  for (const i of r) {
    if (n == null) return;
    if (Array.isArray(n)) {
      const a = i === "-" ? n.length - 1 : Number(i);
      if (!Number.isFinite(a)) return;
      n = n[a];
    } else
      n = n[i];
  }
  return n;
}
function OIe(e, t) {
  if (!e) return e;
  const { bindings: r, ...n } = e;
  if (!r || typeof r != "object") return e;
  const i = { ...n };
  for (const [a, o] of Object.entries(r)) {
    if (!o || typeof o != "object") continue;
    const s = o.path;
    if (typeof s != "string") continue;
    const l = kIe(t, s);
    i[a] = l !== void 0 ? l : o.default;
  }
  return i;
}
function tS(e, t) {
  const r = OIe(e.props ?? void 0, t);
  e.type === "form" && console.log("[BoundSchemaRenderer] Resolved Form Props:", r);
  let n;
  if (Array.isArray(e.children)) {
    let i = !1;
    const a = e.children.map((o) => {
      const s = tS(o, t);
      return s !== o && (i = !0), s;
    });
    n = i ? a : e.children;
  }
  return r === e.props && n === e.children ? e : {
    ...e,
    props: r,
    children: n
  };
}
const QH = ({
  node: e,
  nodes: t,
  registry: r,
  conversationId: n,
  onAction: i,
  className: a,
  fallback: o,
  unknownFallback: s,
  invalidFallback: l,
  maxDepth: u,
  state: c
}) => {
  const f = T.useMemo(() => e && tS(e, c), [e, c]), d = T.useMemo(() => t && t.map((h) => tS(h, c)), [t, c]);
  return /* @__PURE__ */ x.jsx(
    fM,
    {
      node: f,
      nodes: d,
      registry: r,
      conversationId: n,
      onAction: i,
      className: a,
      fallback: o,
      unknownFallback: s,
      invalidFallback: l,
      maxDepth: u
    }
  );
};
QH.displayName = "BoundSchemaRenderer";
const zIe = ({ activity: e }) => /* @__PURE__ */ x.jsxs("div", { className: "rounded-xl border border-slate-200 bg-surface px-3 py-2", children: [
  /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold text-text-secondary", children: e.activityType }),
  /* @__PURE__ */ x.jsx("pre", { className: "mt-2 max-h-[240px] overflow-auto rounded-lg bg-slate-950 p-2 text-[11px] text-slate-100", children: JSON.stringify(e.content ?? {}, null, 2) })
] }), jIe = ({
  activities: e,
  registry: t,
  conversationId: r,
  onAction: n,
  className: i,
  unknownFallback: a
}) => /* @__PURE__ */ x.jsx("div", { className: me("flex flex-col gap-2", i), children: (e ?? []).map((o) => {
  const s = t == null ? void 0 : t[o.activityType];
  return s ? /* @__PURE__ */ x.jsx(s, { activity: o, conversationId: r, onAction: n }, o.id) : /* @__PURE__ */ x.jsx(T.Fragment, { children: a ? a(o) : /* @__PURE__ */ x.jsx(zIe, { activity: o, conversationId: r, onAction: n }) }, o.id);
}) });
jIe.displayName = "ActivityRenderer";
const eG = ({
  title: e = "ViewPanel",
  widgets: t,
  state: r,
  widgetRegistry: n,
  conversationId: i,
  onAction: a,
  className: o,
  contentClassName: s,
  emptyState: l
}) => {
  const u = !!(t != null && t.length);
  return /* @__PURE__ */ x.jsxs("div", { className: me("flex h-full w-full flex-col overflow-hidden rounded-2xl bg-surface shadow-sm", o), children: [
    /* @__PURE__ */ x.jsx("div", { className: "border-b border-slate-100 px-4 py-2 text-sm font-semibold text-text-primary", children: e }),
    /* @__PURE__ */ x.jsxs("div", { className: me("flex-1 overflow-auto p-4", s), children: [
      u && /* @__PURE__ */ x.jsx(
        QH,
        {
          nodes: t,
          registry: n,
          conversationId: i,
          onAction: a,
          state: r
        }
      ),
      !u && (l ?? /* @__PURE__ */ x.jsx("div", { className: "text-sm text-text-muted", children: "Chưa có nội dung." }))
    ] })
  ] });
};
eG.displayName = "ChatKitViewPanel";
const tG = ({
  mode: e = "floating",
  open: t,
  onClose: r,
  title: n,
  position: i = "bottom-right",
  size: a = "md",
  view: o,
  chatSide: s = "right",
  chatRatio: l = 0.34,
  minChat: u = 320,
  minView: c = 320,
  className: f,
  ...d
}) => {
  const [h, p] = T.useState(!1);
  T.useEffect(() => {
    p(!0);
  }, []);
  const v = {
    "top-left": "top-6 left-6",
    "top-right": "top-6 right-6",
    "bottom-left": "bottom-6 left-6",
    "bottom-right": "bottom-6 right-6"
  }, g = {
    sm: "w-[320px] h-[440px]",
    md: "w-[360px] h-[520px]",
    lg: "w-[420px] h-[640px]"
  }, m = typeof n == "string" ? {
    ...d.agent,
    name: n
  } : d.agent;
  if (e === "split") {
    if (!t)
      return /* @__PURE__ */ x.jsx(x.Fragment, { children: o ?? null });
    const y = Math.min(Math.max(l, 0.1), 0.9), b = s === "left" ? y : 1 - y, w = s === "left" ? /* @__PURE__ */ x.jsx(Ig, { ...d, agent: m, onClose: r, className: "h-full" }) : o ?? /* @__PURE__ */ x.jsx("div", { className: "h-full w-full" }), _ = s === "left" ? o ?? /* @__PURE__ */ x.jsx("div", { className: "h-full w-full" }) : /* @__PURE__ */ x.jsx(Ig, { ...d, agent: m, onClose: r, className: "h-full" }), S = s === "left" ? u : c, C = s === "left" ? c : u;
    return /* @__PURE__ */ x.jsxs(
      Mk,
      {
        direction: "horizontal",
        initialRatio: b,
        minPrimary: S,
        minSecondary: C,
        className: me("h-full w-full", f),
        children: [
          /* @__PURE__ */ x.jsx("div", { className: "h-full w-full min-h-0", children: w }),
          /* @__PURE__ */ x.jsx("div", { className: "h-full w-full min-h-0", children: _ })
        ]
      }
    );
  }
  return t ? /* @__PURE__ */ x.jsx(
    "div",
    {
      className: me(
        "fixed z-50 overflow-hidden",
        "max-w-[calc(100vw-3rem)] max-h-[calc(100vh-3rem)]",
        "rounded-3xl border border-slate-200/70 ring-1 ring-black/5",
        "bg-surface shadow-2xl",
        "transition-transform transition-opacity duration-200 ease-out will-change-transform",
        h ? "translate-y-0 opacity-100" : "translate-y-2 opacity-0",
        "flex flex-col",
        g[a],
        v[i],
        f
      ),
      "aria-label": typeof n == "string" ? n : void 0,
      children: /* @__PURE__ */ x.jsx("div", { className: "flex h-full min-h-0 flex-col", children: /* @__PURE__ */ x.jsx(Ig, { ...d, agent: m, onClose: r, className: "h-full" }) })
    }
  ) : null;
};
tG.displayName = "BoxChat";
function VIe(e) {
  try {
    return structuredClone(e);
  } catch {
    return JSON.parse(JSON.stringify(e));
  }
}
function BIe(e) {
  return e.replace(/~1/g, "/").replace(/~0/g, "~");
}
function FIe(e) {
  if (!e) return [];
  if (e === "/") return [""];
  if (!e.startsWith("/"))
    throw new Error(`Invalid JSON Pointer: ${e}`);
  return e.split("/").slice(1).map((t) => BIe(t));
}
function rG(e) {
  return e === "-" || /^\d+$/.test(e);
}
function $Ie(e, t, r) {
  const n = r != null && rG(r);
  return (e[t] == null || typeof e[t] != "object") && (e[t] = n ? [] : {}), e[t];
}
function JR(e, t, r, n) {
  if (t.length === 0) return r;
  let i = e;
  for (let o = 0; o < t.length - 1; o++) {
    const s = t[o], l = t[o + 1];
    if (Array.isArray(i)) {
      const u = s === "-" ? i.length : Number(s);
      if (!Number.isFinite(u)) throw new Error(`Invalid array index: ${s}`);
      (i[u] == null || typeof i[u] != "object") && (i[u] = rG(l) ? [] : {}), i = i[u];
      continue;
    }
    i = $Ie(i, s, l);
  }
  const a = t[t.length - 1];
  if (Array.isArray(i)) {
    if (a === "-")
      return i.push(r), e;
    const o = Number(a);
    if (!Number.isFinite(o)) throw new Error(`Invalid array index: ${a}`);
    return n === "add" ? i.splice(o, 0, r) : i[o] = r, e;
  }
  return i[a] = r, e;
}
function HIe(e, t) {
  if (t.length === 0) return;
  let r = e;
  for (let i = 0; i < t.length - 1; i++) {
    const a = t[i];
    if (r == null) return e;
    if (Array.isArray(r)) {
      const o = a === "-" ? r.length - 1 : Number(a);
      if (!Number.isFinite(o)) return e;
      r = r[o];
      continue;
    }
    r = r[a];
  }
  const n = t[t.length - 1];
  if (r == null) return e;
  if (Array.isArray(r)) {
    if (n === "-")
      return r.pop(), e;
    const i = Number(n);
    return Number.isFinite(i) && r.splice(i, 1), e;
  }
  return delete r[n], e;
}
function QR(e, t) {
  let r = VIe(e);
  for (const n of t) {
    const i = FIe(n.path);
    if (n.op === "add") {
      r = JR(r, i, n.value, "add");
      continue;
    }
    if (n.op === "replace") {
      r = JR(r, i, n.value, "replace");
      continue;
    }
    if (n.op === "remove") {
      r = HIe(r, i);
      continue;
    }
    throw new Error(`Unsupported JSON Patch operation: ${n.op}`);
  }
  return r;
}
function Yc(e) {
  const t = typeof e == "number" ? e : Date.parse(e);
  return Number.isFinite(t) ? t : 0;
}
function sy(e) {
  return e.clientId || e.id;
}
function sd(e, t) {
  if (!t.length) return e;
  const r = /* @__PURE__ */ new Map();
  for (const i of e) r.set(sy(i), i);
  for (const i of t) {
    const a = sy(i), o = r.get(a);
    r.set(a, o ? { ...o, ...i } : i);
  }
  const n = Array.from(r.values());
  return n.sort((i, a) => Yc(i.createdAt) - Yc(a.createdAt)), n;
}
function GIe(e, t) {
  if (!t.length) return e;
  const r = /* @__PURE__ */ new Map();
  for (const i of e) r.set(i.id, i);
  for (const i of t) {
    const a = r.get(i.id);
    r.set(i.id, a ? { ...a, ...i } : i);
  }
  const n = Array.from(r.values());
  return n.sort((i, a) => Yc(i.updatedAt ?? i.createdAt ?? 0) - Yc(a.updatedAt ?? a.createdAt ?? 0)), n;
}
function WIe(e, t, r) {
  const n = e.findIndex((s) => s.id === t.id);
  if (n < 0) return GIe(e, [t]);
  const i = e[n], a = r === !1 ? {
    ...i,
    ...t,
    content: {
      ...i.content ?? {},
      ...t.content ?? {}
    }
  } : {
    ...i,
    ...t
  }, o = [...e];
  return o[n] = a, o.sort((s, l) => Yc(s.updatedAt ?? s.createdAt ?? 0) - Yc(l.updatedAt ?? l.createdAt ?? 0)), o;
}
const nG = T.createContext(null), UIe = ({
  conversationId: e,
  transport: t,
  currentUserId: r,
  currentUserName: n,
  currentUserAvatarUrl: i,
  initialMessages: a,
  initialWidgets: o,
  initialState: s,
  initialActivities: l,
  enableOptimistic: u = !0,
  children: c
}) => {
  const [f, d] = T.useState(a ?? []), [h, p] = T.useState(o ?? []), [v, g] = T.useState(s), [m, y] = T.useState(l ?? []), [b, w] = T.useState("idle"), [_, S] = T.useState(null), [C, A] = T.useState(void 0), [M, D] = T.useState(void 0), [N, R] = T.useState(void 0), [O, E] = T.useState(void 0), [L, I] = T.useState(void 0), P = T.useRef(null);
  T.useEffect(() => {
    d(a ?? []), p(o ?? []), g(s), y(l ?? []), w("idle"), S(null), A(void 0), D(void 0), R(void 0), E(void 0), I(void 0), P.current = null;
  }, [e, l, a, s, o]), T.useEffect(() => {
    if (!t.subscribe) return;
    let F;
    const H = (G) => {
      var W;
      if (G.conversationId === e) {
        if (G.type === "typing") {
          A(G.isTyping ? G.text ?? "Đang nhập…" : void 0);
          return;
        }
        if (G.type === "message.delta") {
          A(void 0);
          const X = P.current;
          (!X || X.messageId !== G.messageId) && (P.current = { messageId: G.messageId, text: "" });
          const q = P.current;
          if (!q) return;
          q.text += G.text, S({ mode: "streaming", text: q.text });
          return;
        }
        if (G.type === "message.final") {
          P.current = null, A(void 0), S(null), d((X) => sd(X, [G.message]));
          return;
        }
        if (G.type === "ui.patch") {
          p(((W = G.ui) == null ? void 0 : W.nodes) ?? []);
          return;
        }
        if (G.type === "state.snapshot") {
          g(G.snapshot);
          return;
        }
        if (G.type === "state.delta") {
          g((X) => {
            try {
              return QR(X ?? {}, G.delta);
            } catch (q) {
              return D(q), X;
            }
          });
          return;
        }
        if (G.type === "activity.snapshot") {
          y((X) => WIe(X, G.activity, G.replace));
          return;
        }
        if (G.type === "activity.delta") {
          y((X) => {
            const q = X.findIndex((U) => U.id === G.activityId);
            if (q < 0) return X;
            const J = X[q];
            try {
              const U = QR(J.content ?? {}, G.patch), $ = [...X];
              return $[q] = { ...J, content: U, updatedAt: Date.now() }, $;
            } catch (U) {
              return D(U), X;
            }
          });
          return;
        }
      }
    };
    try {
      F = t.subscribe(e, {
        onEvent: H,
        onError: (G) => {
          D(G), w("error");
        },
        onClose: () => {
          P.current = null, A(void 0), S(null);
        }
      });
    } catch (G) {
      D(G), w("error");
    }
    return () => {
      try {
        F == null || F();
      } catch {
      }
    };
  }, [e, t]);
  const k = T.useCallback(
    async (F) => {
      if (D(void 0), w("sending"), S({ mode: "thinking" }), u) {
        const H = FH({
          currentUserId: r,
          currentUserName: n,
          currentUserAvatarUrl: i,
          input: F
        });
        d((G) => sd(G, [H]));
      }
      try {
        const H = await t.sendMessage(F);
        d((W) => sd(W, H.messages ?? [])), p((W) => {
          var X;
          return ((X = H.ui) == null ? void 0 : X.nodes) ?? W;
        }), g((W) => H.state ?? W), y((W) => Array.isArray(H.activities) ? H.activities : W), R((W) => {
          var X;
          return ((X = H.meta) == null ? void 0 : X.traceId) ?? W;
        }), w("idle");
        const G = (H.messages ?? []).some((W) => W.direction !== "outgoing");
        (!t.subscribe || G) && S(null);
      } catch (H) {
        throw D(H), u && d(
          (G) => G.map((W) => sy(W) === F.clientId ? { ...W, status: "failed" } : W)
        ), w("error"), S(null), H;
      }
    },
    [i, r, n, u, t]
  ), z = T.useCallback(
    async (F) => {
      D(void 0), w("sending"), S({ mode: "thinking" });
      try {
        const H = await t.sendAction(F);
        d((W) => sd(W, H.messages ?? [])), p((W) => {
          var X;
          return ((X = H.ui) == null ? void 0 : X.nodes) ?? W;
        }), g((W) => H.state ?? W), y((W) => Array.isArray(H.activities) ? H.activities : W), R((W) => {
          var X;
          return ((X = H.meta) == null ? void 0 : X.traceId) ?? W;
        }), w("idle");
        const G = (H.messages ?? []).some((W) => W.direction !== "outgoing");
        (!t.subscribe || G) && S(null);
      } catch (H) {
        throw D(H), w("error"), S(null), H;
      }
    },
    [t]
  ), V = T.useCallback(
    async (F) => {
      if (t.loadOlder && !L) {
        I(!0), D(void 0);
        try {
          const H = f[0], G = (F == null ? void 0 : F.beforeId) ?? (H ? sy(H) : void 0), W = await t.loadOlder({
            conversationId: e,
            beforeId: G,
            limit: F == null ? void 0 : F.limit
          });
          d((X) => {
            const q = W.messages ?? [];
            return q.length ? sd(q, X) : X;
          }), typeof W.hasMore == "boolean" && E(W.hasMore);
        } catch (H) {
          throw D(H), w("error"), H;
        } finally {
          I(!1);
        }
      }
    },
    [e, L, f, t]
  ), B = T.useMemo(
    () => ({
      conversationId: e,
      messages: f,
      widgets: h,
      state: v,
      activities: m,
      status: b,
      agentThinking: _,
      typingText: C,
      error: M,
      traceId: N,
      hasMoreOlder: O,
      isLoadingOlder: L,
      sendMessage: k,
      emitAction: z,
      loadOlder: V,
      setMessages: d,
      setWidgets: p,
      setState: g,
      setActivities: y
    }),
    [
      _,
      m,
      e,
      z,
      M,
      O,
      L,
      V,
      f,
      k,
      b,
      v,
      N,
      C,
      h
    ]
  );
  return /* @__PURE__ */ x.jsx(nG.Provider, { value: B, children: c });
};
function YIe() {
  const e = T.useContext(nG);
  if (!e)
    throw new Error("useChatRuntime must be used within ChatRuntimeProvider");
  return e;
}
const iG = ({
  boxChatProps: e,
  renderWidgetsInChatResolved: t,
  viewOverride: r,
  viewTitle: n,
  viewWidgetRegistry: i
}) => {
  const a = YIe(), o = T.useMemo(() => r ?? /* @__PURE__ */ x.jsx(
    eG,
    {
      title: n,
      widgets: a.widgets,
      state: a.state,
      widgetRegistry: i,
      conversationId: a.conversationId,
      onAction: (s) => void a.emitAction(s)
    }
  ), [a, r, n, i]);
  return /* @__PURE__ */ x.jsx(
    tG,
    {
      ...e,
      messages: a.messages,
      widgets: t ? a.widgets : void 0,
      onWidgetAction: (s) => void a.emitAction(s),
      agentThinking: a.agentThinking,
      typingText: a.typingText,
      onSend: (s) => a.sendMessage(s),
      onLoadOlder: () => a.loadOlder(),
      hasMoreOlder: a.hasMoreOlder,
      isLoadingOlder: a.isLoadingOlder,
      enableOptimistic: !1,
      view: o
    }
  );
};
iG.displayName = "ChatKitBoxChatInner";
const ZIe = ({
  transport: e,
  initialMessages: t,
  initialWidgets: r,
  initialState: n,
  initialActivities: i,
  runtimeEnableOptimistic: a = !0,
  renderWidgetsInChat: o,
  view: s,
  viewTitle: l,
  activityRegistry: u,
  viewWidgetRegistry: c,
  mode: f = "floating",
  open: d,
  ...h
}) => {
  if (f !== "split" && !d) return null;
  const p = typeof o == "boolean" ? o : f !== "split";
  return /* @__PURE__ */ x.jsx(
    UIe,
    {
      conversationId: h.conversationId,
      transport: e,
      currentUserId: h.currentUserId,
      currentUserName: h.currentUserName,
      currentUserAvatarUrl: h.currentUserAvatarUrl,
      initialMessages: t,
      initialWidgets: r,
      initialState: n,
      initialActivities: i,
      enableOptimistic: a,
      children: /* @__PURE__ */ x.jsx(
        iG,
        {
          boxChatProps: { mode: f, open: d, ...h },
          renderWidgetsInChatResolved: p,
          viewOverride: s,
          viewTitle: l,
          viewWidgetRegistry: c ?? h.widgetRegistry
        }
      )
    }
  );
};
ZIe.displayName = "ChatKitBoxChat";
function h2(e, t) {
  if (!e) return t;
  const r = e.replace(/\/$/, ""), n = t.startsWith("/") ? t : `/${t}`;
  return `${r}${n}`;
}
async function p2(e, t, r) {
  const n = await e(t, r);
  if (!n.ok) {
    const i = await n.text().catch(() => "");
    throw new Error(`HTTP ${n.status} ${n.statusText}${i ? `: ${i}` : ""}`);
  }
  return await n.json();
}
function XIe(e) {
  var t;
  return {
    conversationId: e.conversationId,
    clientId: e.clientId,
    text: e.text,
    markdown: e.markdown,
    replyToId: e.replyToId,
    attachments: (t = e.attachments) == null ? void 0 : t.map((r) => ({
      name: r.name,
      mimeType: r.type,
      size: r.size
    })),
    meta: e.meta
  };
}
function mLe(e) {
  const { endpoints: t, baseUrl: r, fetcher: n = fetch, getAuthHeaders: i, headers: a } = e, o = async () => {
    const s = await (i == null ? void 0 : i()) ?? {};
    return {
      "Content-Type": "application/json",
      ...a ?? {},
      ...s
    };
  };
  return {
    sendMessage: async (s) => {
      const l = h2(r, t.sendMessage), u = JSON.stringify(XIe(s));
      return p2(n, l, { method: "POST", headers: await o(), body: u });
    },
    sendAction: async (s) => {
      const l = h2(r, t.sendAction), u = JSON.stringify(s);
      return p2(n, l, { method: "POST", headers: await o(), body: u });
    },
    loadOlder: t.loadOlder ? async (s) => {
      const l = h2(r, t.loadOlder), u = JSON.stringify(s);
      return p2(n, l, { method: "POST", headers: await o(), body: u });
    } : void 0
  };
}
function eP(e) {
  const t = typeof e == "number" ? e : Date.parse(e);
  return Number.isFinite(t) ? t : 0;
}
const Ig = ({
  agent: e,
  messages: t,
  agentThinking: r,
  typingText: n,
  conversationId: i,
  currentUserId: a,
  currentUserName: o,
  currentUserAvatarUrl: s,
  widgets: l,
  widgetRegistry: u,
  onWidgetAction: c,
  showSenderName: f,
  showOutgoingAvatar: d,
  incomingMessageStyle: h,
  onCopy: p,
  onDelete: v,
  onRecall: g,
  onReply: m,
  onReact: y,
  onCallAgent: b,
  onOpenConversations: w,
  onOpenTasks: _,
  onCreateConversation: S,
  onClose: C,
  allowAttachments: A,
  maxAttachments: M,
  placeholder: D,
  mentionContexts: N,
  onOpenSettings: R,
  onVoiceToText: O,
  virtualized: E,
  estimateRowHeight: L,
  overscan: I,
  onLoadOlder: P,
  hasMoreOlder: k,
  isLoadingOlder: z,
  onSend: V,
  enableOptimistic: B = !0,
  className: F
}) => {
  const [H, G] = T.useState([]), [W, X] = T.useState(null), [q, J] = T.useState(null), [U, $] = T.useState({}), [Y, Z] = T.useState({}), [K, ie] = T.useState({}), [Q, ce] = T.useState(null), [te, oe] = T.useState(!1), [de, Pe] = T.useState(0), Ke = T.useRef(null), it = T.useCallback((we) => we.clientId || we.id, []), Dt = T.useMemo(() => {
    if (W)
      return W.content.type === "text" ? W.content.text : W.content.type === "markdown" ? W.content.markdown : W.content.type === "image" ? "[Ảnh]" : W.content.type === "video" ? "[Video]" : W.content.type === "audio" ? "[Audio]" : W.content.type === "sticker" ? "[Sticker]" : W.content.type === "contact" ? `[Liên hệ] ${W.content.name}` : W.content.type === "location" ? "[Vị trí]" : W.content.type === "call" ? W.content.kind === "missed" ? "[Cuộc gọi nhỡ]" : "[Cuộc gọi đến]" : W.content.type === "file" ? `[File] ${W.content.fileName}` : W.content.type === "system" ? W.content.text : "";
  }, [W]);
  T.useEffect(() => {
    G([]), X(null), J(null), $({}), Z({}), ie({}), ce(null);
  }, [i]), T.useEffect(() => {
    if (Q !== "call") return;
    oe(!1), Pe(0), Ke.current = null;
    const we = window.setTimeout(() => {
      oe(!0), Ke.current = Date.now();
    }, 650);
    return () => window.clearTimeout(we);
  }, [Q]), T.useEffect(() => {
    if (Q !== "call" || !te) return;
    const we = window.setInterval(() => {
      Pe((ke) => ke + 1);
    }, 1e3);
    return () => window.clearInterval(we);
  }, [te, Q]);
  const Pt = T.useMemo(() => {
    if (!te) return "Đang gọi…";
    const we = Ke.current;
    if (!we) return "00:00";
    const ke = Math.max(0, Math.floor((Date.now() - we) / 1e3)), De = String(Math.floor(ke / 60)).padStart(2, "0"), ft = String(ke % 60).padStart(2, "0");
    return `${De}:${ft}`;
  }, [te, de]);
  T.useEffect(() => {
    H.length !== 0 && G(
      (we) => we.filter((ke) => !t.some((ft) => ke.clientId && ft.clientId ? ft.clientId === ke.clientId : ke.clientId ? ft.id === ke.clientId : ft.id === ke.id))
    );
  }, [t, H.length]);
  const gr = T.useMemo(() => {
    const we = /* @__PURE__ */ new Map();
    for (const De of H)
      we.set(it(De), De);
    for (const De of t)
      we.set(it(De), De);
    const ke = Array.from(we.values());
    return ke.sort((De, ft) => eP(De.createdAt) - eP(ft.createdAt)), ke.filter((De) => !U[it(De)]).map((De) => {
      const ft = it(De), Bt = Y[ft];
      return Bt ? { ...De, reactions: Bt } : De;
    });
  }, [it, U, Y, t, H]), Kt = async (we) => {
    if (V) {
      if (B) {
        const ke = FH({
          currentUserId: a,
          currentUserName: o,
          currentUserAvatarUrl: s,
          input: we
        });
        G((De) => [...De, ke]);
      }
      try {
        await V(we), B && G(
          (ke) => ke.map((De) => De.id === we.clientId ? { ...De, status: "sent" } : De)
        );
      } catch {
        B && G(
          (ke) => ke.map((De) => De.id === we.clientId ? { ...De, status: "failed" } : De)
        );
      }
    }
  }, _e = async (we) => {
    const ke = W ? { ...we, replyToId: W.id } : we;
    X(null), await Kt(ke);
  }, re = (we) => {
    X(we), m == null || m(we);
  }, ve = (we, ke) => {
    var Er;
    const De = it(we), ft = !!((Er = K[De]) != null && Er[ke]), nt = { ...Y[De] ?? we.reactions ?? {} };
    if (ft) {
      const At = (nt[ke] ?? 0) - 1;
      At > 0 ? nt[ke] = At : delete nt[ke], ie((Yt) => {
        const $r = Yt[De] ? { ...Yt[De] } : {};
        delete $r[ke];
        const xa = { ...Yt };
        return Object.keys($r).length === 0 ? delete xa[De] : xa[De] = $r, xa;
      });
    } else
      nt[ke] = (nt[ke] ?? 0) + 1, ie((At) => ({
        ...At,
        [De]: { ...At[De] ?? {}, [ke]: !0 }
      }));
    Z((At) => ({ ...At, [De]: nt })), y == null || y(we, ke);
  }, Ae = (we) => {
    J(we);
  }, Re = (we) => {
    const ke = it(we);
    $((De) => ({ ...De, [ke]: !0 })), G((De) => De.filter((ft) => it(ft) !== ke)), J(null), X((De) => De && it(De) === ke ? null : De), v == null || v(we);
  }, gt = (we) => {
    const ke = it(we);
    $((De) => ({ ...De, [ke]: !0 })), X((De) => De && it(De) === ke ? null : De), g == null || g(we);
  }, Ye = async (we) => {
    if (!V) return;
    const ke = (we.attachments || []).map((ft) => ft.file).filter((ft) => !!ft), De = {
      conversationId: we.conversationId,
      clientId: we.clientId || we.id,
      text: we.content.type === "text" ? we.content.text : void 0,
      markdown: we.content.type === "markdown" ? we.content.markdown : void 0,
      attachments: ke.length ? ke : void 0,
      replyToId: we.replyToId,
      meta: { source: "quick_action" }
    };
    G((ft) => ft.map((Bt) => Bt.id === we.id ? { ...Bt, status: "sending" } : Bt));
    try {
      await V(De), G((ft) => ft.map((Bt) => Bt.id === we.id ? { ...Bt, status: "sent" } : Bt));
    } catch {
      G((ft) => ft.map((Bt) => Bt.id === we.id ? { ...Bt, status: "failed" } : Bt));
    }
  };
  return /* @__PURE__ */ x.jsxs("div", { className: me("flex h-full min-h-0 flex-col overflow-hidden bg-surface", F), children: [
    /* @__PURE__ */ x.jsx(
      HH,
      {
        agent: e,
        onCallAgent: () => {
          ce("call"), b == null || b();
        },
        onOpenConversations: () => {
          ce("conversations"), w == null || w();
        },
        onOpenTasks: () => {
          ce("tasks"), _ == null || _();
        },
        onCreateConversation: () => {
          ce("create"), S == null || S();
        },
        onClose: C
      }
    ),
    Q === "call" && /* @__PURE__ */ x.jsx(
      Y5e,
      {
        agent: e,
        callDurationLabel: Pt,
        onEndCall: () => ce(null)
      }
    ),
    /* @__PURE__ */ x.jsx(
      XH,
      {
        messages: gr,
        agentThinking: r,
        typingText: n,
        agentName: e.name,
        currentUserId: a,
        showSenderName: f,
        showOutgoingAvatar: d,
        incomingMessageStyle: h,
        onCopy: p,
        onDelete: Ae,
        onRecall: gt,
        onReply: re,
        onReact: ve,
        virtualized: E,
        estimateRowHeight: L,
        overscan: I,
        onLoadOlder: P,
        hasMoreOlder: k,
        isLoadingOlder: z,
        onRetrySend: Ye
      }
    ),
    !!(l != null && l.length) && /* @__PURE__ */ x.jsx("div", { className: "border-t border-slate-200 bg-surface px-3 py-3", children: /* @__PURE__ */ x.jsx(
      fM,
      {
        nodes: l,
        registry: u,
        conversationId: i,
        onAction: c,
        className: "gap-2"
      }
    ) }),
    /* @__PURE__ */ x.jsx(
      KH,
      {
        conversationId: i,
        onSend: _e,
        disabled: !V,
        allowAttachments: A,
        maxAttachments: M,
        placeholder: D,
        mentionContexts: N,
        onOpenSettings: R,
        onVoiceToText: O,
        className: l != null && l.length ? "border-t-0 pt-0" : void 0,
        replyTo: W ? {
          id: W.id,
          senderName: W.senderName,
          previewText: Dt
        } : void 0,
        onCancelReply: () => X(null)
      }
    ),
    /* @__PURE__ */ x.jsxs(Pa, { open: !!q, onClose: () => J(null), title: "Xóa tin nhắn", size: "sm", children: [
      /* @__PURE__ */ x.jsx("div", { className: "text-sm text-text-secondary", children: "Bạn có chắc chắn muốn xóa tin nhắn này không?" }),
      /* @__PURE__ */ x.jsxs("div", { className: "mt-4 flex justify-end gap-2", children: [
        /* @__PURE__ */ x.jsx(xt, { variant: "secondary", onClick: () => J(null), children: "Hủy" }),
        /* @__PURE__ */ x.jsx(
          xt,
          {
            variant: "danger",
            onClick: () => {
              q && Re(q);
            },
            children: "Xóa"
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ x.jsx(Pa, { open: Q === "conversations", onClose: () => ce(null), title: "Cuộc trò chuyện", size: "md", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
      /* @__PURE__ */ x.jsx(xS, { size: 16 }),
      /* @__PURE__ */ x.jsx("span", { children: "Danh sách cuộc trò chuyện (demo UI)." })
    ] }) }),
    /* @__PURE__ */ x.jsx(Pa, { open: Q === "tasks", onClose: () => ce(null), title: "Nhiệm vụ", size: "md", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
      /* @__PURE__ */ x.jsx(NP, { size: 16 }),
      /* @__PURE__ */ x.jsx("span", { children: "Danh sách nhiệm vụ (demo UI)." })
    ] }) }),
    /* @__PURE__ */ x.jsx(Pa, { open: Q === "create", onClose: () => ce(null), title: "Tạo cuộc trò chuyện", size: "md", children: /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
      /* @__PURE__ */ x.jsx(LP, { size: 16 }),
      /* @__PURE__ */ x.jsx("span", { children: "Tạo cuộc trò chuyện mới (demo UI)." })
    ] }) })
  ] });
};
Ig.displayName = "ChatPanel";
const aG = {}, { useDebugValue: KIe } = se, { useSyncExternalStoreWithSelector: qIe } = sP;
let tP = !1;
const JIe = (e) => e;
function QIe(e, t = JIe, r) {
  (aG ? "production" : void 0) !== "production" && r && !tP && (console.warn(
    "[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"
  ), tP = !0);
  const n = qIe(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    r
  );
  return KIe(n), n;
}
const rP = (e) => {
  (aG ? "production" : void 0) !== "production" && typeof e != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const t = typeof e == "function" ? OP(e) : e, r = (n, i) => QIe(t, n, i);
  return Object.assign(r, t), r;
}, j0 = (e) => e ? rP(e) : rP, ly = j0((e) => ({
  meta: null,
  columns: [],
  isLoading: !1,
  setMeta: (t) => e({ meta: t, columns: t.columns || [] }),
  setColumns: (t) => e({ columns: t }),
  updateColumn: (t, r) => e((n) => ({
    columns: n.columns.map(
      (i) => i.id === t ? { ...i, ...r } : i
    )
  }))
})), V0 = j0((e) => ({
  rows: [],
  isLoading: !0,
  setRows: (t) => e({ rows: t, isLoading: !1 }),
  setLoading: (t) => e({ isLoading: t }),
  updateRow: (t, r) => e((n) => ({
    rows: n.rows.map((i) => i.id === t ? { ...i, ...r, row: { ...i.row || {}, ...r } } : i)
  })),
  addRow: (t) => e((r) => {
    const i = { id: Math.random().toString(36).substr(2, 9), row: t || {} };
    return { rows: [...r.rows, i] };
  }),
  deleteRow: (t) => e((r) => ({
    rows: r.rows.filter((n) => n.id !== t)
  }))
})), Mp = j0((e) => ({
  viewId: null,
  filters: [],
  sorts: [],
  hiddenColumns: /* @__PURE__ */ new Set(),
  groupBy: [],
  expandedGroups: /* @__PURE__ */ new Set(),
  frozenColumns: /* @__PURE__ */ new Set(),
  setFilters: (t) => e({ filters: t }),
  addFilter: (t) => e((r) => ({ filters: [...r.filters, t] })),
  removeFilter: (t) => e((r) => ({
    filters: r.filters.filter((n) => n.id !== t)
  })),
  setSorts: (t) => e({ sorts: t }),
  setGroupBy: (t) => e({ groupBy: t }),
  toggleGroup: (t) => e((r) => {
    const n = new Set(r.expandedGroups);
    return n.has(t) ? n.delete(t) : n.add(t), { expandedGroups: n };
  }),
  toggleHiddenColumn: (t) => e((r) => {
    const n = new Set(r.hiddenColumns);
    return n.has(t) ? n.delete(t) : n.add(t), { hiddenColumns: n };
  }),
  toggleFrozenColumn: (t) => e((r) => {
    const n = new Set(r.frozenColumns);
    return n.has(t) ? n.delete(t) : n.add(t), { frozenColumns: n };
  })
})), e3e = (e, t) => {
  const { updateColumn: r } = ly(), [n, i] = Ze(t || 150), [a, o] = Ze(!1);
  return {
    width: n,
    isResizing: a,
    handleMouseDown: (l) => {
      l.preventDefault(), l.stopPropagation(), o(!0);
      const u = l.pageX, c = n;
      let f = c;
      const d = (p) => {
        const v = p.pageX - u;
        f = Math.max(50, c + v), i(f);
      }, h = () => {
        o(!1), document.removeEventListener("mousemove", d), document.removeEventListener("mouseup", h), r(e, { width: f });
      };
      document.addEventListener("mousemove", d), document.addEventListener("mouseup", h);
    }
  };
}, t3e = ({ column: e, sortDirection: t, onSort: r, stickyLeft: n }) => {
  const { width: i, isResizing: a, handleMouseDown: o } = e3e(e.id, e.width), s = n !== void 0;
  return /* @__PURE__ */ x.jsxs(
    "th",
    {
      scope: "col",
      className: fe(
        "px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-r relative group select-none bg-gray-50",
        s && "sticky z-30 border-r-2 border-r-gray-300",
        // Higher z-index for frozen headers
        a && "bg-gray-100"
      ),
      style: {
        width: i,
        minWidth: i,
        maxWidth: i,
        left: n,
        zIndex: s ? 30 : void 0
      },
      onClick: r,
      children: [
        /* @__PURE__ */ x.jsxs("div", { className: "flex items-center justify-between overflow-hidden", children: [
          /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-1 truncate", children: [
            /* @__PURE__ */ x.jsx("span", { className: "truncate", children: e.title }),
            t === "asc" && /* @__PURE__ */ x.jsx("span", { className: "text-blue-500", children: "↑" }),
            t === "desc" && /* @__PURE__ */ x.jsx("span", { className: "text-blue-500", children: "↓" })
          ] }),
          /* @__PURE__ */ x.jsx("span", { className: "opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-gray-200", onClick: (l) => l.stopPropagation(), children: "⋮" })
        ] }),
        /* @__PURE__ */ x.jsx(
          "div",
          {
            className: fe(
              "absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-blue-400 z-10",
              a && "bg-blue-400"
            ),
            onMouseDown: o,
            onClick: (l) => l.stopPropagation()
          }
        )
      ]
    }
  );
}, nP = ({ value: e, className: t }) => /* @__PURE__ */ x.jsx("div", { className: `w-full h-full flex items-center px-1 truncate ${t ?? ""}`, children: /* @__PURE__ */ x.jsx("span", { className: "truncate text-sm text-gray-900", children: e == null ? "" : String(e) }) }), r3e = ({ value: e, rowId: t, columnTitle: r, readOnly: n }) => {
  const { updateRow: i } = V0(), a = (o) => {
    o.stopPropagation(), !n && i(t, { [r]: !e });
  };
  return /* @__PURE__ */ x.jsx("div", { className: "w-full h-full flex items-center justify-center", children: /* @__PURE__ */ x.jsx(
    "input",
    {
      type: "checkbox",
      checked: !!e,
      onChange: () => {
      },
      onClick: a,
      className: fe(
        "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer",
        n && "opacity-50 cursor-not-allowed"
      ),
      disabled: n
    }
  ) });
}, n3e = (e) => {
  const t = [
    "bg-red-100 text-red-800",
    "bg-yellow-100 text-yellow-800",
    "bg-green-100 text-green-800",
    "bg-blue-100 text-blue-800",
    "bg-indigo-100 text-indigo-800",
    "bg-purple-100 text-purple-800",
    "bg-pink-100 text-pink-800"
  ];
  if (!e) return "bg-gray-100 text-gray-800";
  const r = e.length % t.length;
  return t[r];
}, i3e = ({ value: e, className: t }) => e ? /* @__PURE__ */ x.jsx("div", { className: fe("w-full h-full flex items-center px-2", t), children: /* @__PURE__ */ x.jsx("span", { className: fe(
  "px-2 py-0.5 rounded-full text-xs font-medium border border-transparent truncate",
  n3e(String(e))
), children: e }) }) : null, uy = j0((e) => ({
  activeCell: null,
  selectedCells: /* @__PURE__ */ new Set(),
  editingCell: null,
  setActiveCell: (t) => e({ activeCell: t }),
  selectCell: (t, r) => e((n) => {
    const i = `${t.rowIndex}:${t.columnId}`, a = r ? new Set(n.selectedCells) : /* @__PURE__ */ new Set();
    return a.add(i), {
      selectedCells: a,
      activeCell: t
    };
  }),
  clearSelection: () => e({ selectedCells: /* @__PURE__ */ new Set(), activeCell: null }),
  setEditingCell: (t) => e({ editingCell: t })
})), a3e = ({ value: e, onChange: t, onCommit: r, onCancel: n, autoFocus: i = !0 }) => {
  const [a, o] = Ze(e ?? ""), s = Ve(null);
  Oe(() => {
    i && s.current && (s.current.focus(), s.current.select());
  }, [i]);
  const l = (c) => {
    c.key === "Enter" ? (t(a), r()) : c.key === "Escape" && n();
  }, u = () => {
    t(a), r();
  };
  return /* @__PURE__ */ x.jsx(
    "input",
    {
      ref: s,
      type: "text",
      className: "w-full h-full px-2 outline-none border-2 border-blue-500 bg-white shadow-sm z-50 text-sm",
      value: a,
      onChange: (c) => o(c.target.value),
      onKeyDown: l,
      onBlur: u,
      style: { minHeight: "32px" }
    }
  );
}, o3e = ({ value: e, column: t, onChange: r, onCommit: n, onCancel: i, autoFocus: a = !0 }) => {
  var f;
  const o = Ve(null), s = ((f = t.colOptions) == null ? void 0 : f.options) || [
    { label: "Option 1", value: "Option 1" },
    { label: "Option 2", value: "Option 2" },
    { label: "Option 3", value: "Option 3" },
    { label: "High", value: "High" },
    { label: "Medium", value: "Medium" },
    { label: "Low", value: "Low" },
    { label: "Done", value: "Done" },
    { label: "In Progress", value: "In Progress" },
    { label: "To Do", value: "To Do" }
  ];
  Oe(() => {
    a && o.current && o.current.focus();
  }, [a]);
  const l = (d) => {
    r(d.target.value), n();
  }, u = () => {
    n();
  }, c = (d) => {
    d.key === "Escape" && i(), d.key === "Enter" && n();
  };
  return /* @__PURE__ */ x.jsxs(
    "select",
    {
      ref: o,
      value: e || "",
      onChange: l,
      onBlur: u,
      onKeyDown: c,
      className: "w-full h-full px-2 outline-none border-2 border-blue-500 bg-white shadow-sm z-50 text-sm",
      children: [
        /* @__PURE__ */ x.jsx("option", { value: "", children: "Select..." }),
        s.map((d) => /* @__PURE__ */ x.jsx("option", { value: d.value, children: d.label }, d.value))
      ]
    }
  );
}, s3e = ({ row: e, rowIndex: t, column: r, readOnly: n }) => {
  var b;
  const i = e[r.title] || ((b = e.row) == null ? void 0 : b[r.title]), { selectCell: a, selectedCells: o, activeCell: s, editingCell: l, setEditingCell: u } = uy(), { updateRow: c } = V0(), f = `${t}:${r.id}`, d = o.has(f), h = (s == null ? void 0 : s.rowIndex) === t && (s == null ? void 0 : s.columnId) === r.id, p = (l == null ? void 0 : l.rowIndex) === t && (l == null ? void 0 : l.columnId) === r.id, v = (w) => {
    a({ rowIndex: t, columnId: r.id }, w.shiftKey || w.ctrlKey);
  }, g = (w) => {
    w.stopPropagation(), r.uidt !== "Checkbox" && (n || u({ rowIndex: t, columnId: r.id }));
  }, m = (w) => {
    c(e.id, { [r.title]: w }), u(null);
  }, y = () => {
    if (p)
      return r.uidt === "SingleSelect" ? /* @__PURE__ */ x.jsx(
        o3e,
        {
          value: i,
          column: r,
          onChange: m,
          onCommit: () => u(null),
          onCancel: () => u(null)
        }
      ) : /* @__PURE__ */ x.jsx(
        a3e,
        {
          value: i,
          onChange: m,
          onCommit: () => u(null),
          onCancel: () => u(null)
        }
      );
    switch (r.uidt) {
      case "Checkbox":
        return /* @__PURE__ */ x.jsx(r3e, { value: i, rowId: e.id, columnTitle: r.title, readOnly: n });
      case "SingleSelect":
        return /* @__PURE__ */ x.jsx(i3e, { value: i, readOnly: n });
      case "Number":
        return /* @__PURE__ */ x.jsx(nP, { value: i, className: "text-right font-mono text-xs", readOnly: n });
      case "Text":
      case "LongText":
      default:
        return /* @__PURE__ */ x.jsx(nP, { value: i, readOnly: n });
    }
  };
  return /* @__PURE__ */ x.jsx(
    "div",
    {
      className: fe(
        "w-full h-full border border-transparent",
        d && "bg-blue-50",
        h && "ring-2 ring-blue-500 z-10 border-blue-500"
      ),
      onClick: v,
      onDoubleClick: g,
      children: /* @__PURE__ */ x.jsx(y, {})
    }
  );
}, l3e = ({ index: e, row: t, columns: r, stickyOffsets: n }) => /* @__PURE__ */ x.jsxs("tr", { className: "hover:bg-gray-50 group", children: [
  /* @__PURE__ */ x.jsx("td", { className: "px-3 py-2 whitespace-nowrap text-xs text-center text-gray-400 border-r bg-gray-50/50 sticky left-0 z-10", children: e + 1 }),
  r.map((i) => {
    const a = n == null ? void 0 : n[i.id], o = a !== void 0;
    return /* @__PURE__ */ x.jsx(
      "td",
      {
        className: fe(
          "whitespace-nowrap border-r border-transparent group-hover:border-gray-200 cursor-cell relative focus-within:ring-2 focus-within:ring-blue-500 focus-within:z-10 p-0",
          o && "sticky z-10 bg-white border-r-2 border-r-gray-200"
          // Sticky cells need bg-white to cover scrolling content
        ),
        style: {
          maxWidth: i.width,
          width: i.width,
          left: a
        },
        children: /* @__PURE__ */ x.jsx("div", { className: "w-full h-full min-h-[32px]", children: /* @__PURE__ */ x.jsx(s3e, { row: t, rowIndex: e, column: i }) })
      },
      i.id
    );
  })
] }), u3e = ({ row: e, columns: t }) => {
  var o;
  const { toggleGroup: r, expandedGroups: n } = Mp(), i = n.has(e.groupKey), a = ((o = t.find((s) => s.id === e.columnId)) == null ? void 0 : o.title) || "Unknown";
  return /* @__PURE__ */ x.jsxs(
    "tr",
    {
      className: "bg-gray-100/80 hover:bg-gray-200 cursor-pointer font-medium text-sm transition-colors",
      onClick: () => r(e.groupKey),
      children: [
        /* @__PURE__ */ x.jsxs(
          "td",
          {
            colSpan: t.length + 1,
            className: "px-3 py-2 border-b border-gray-200 text-gray-700 select-none",
            style: { paddingLeft: `${e.depth * 20 + 12}px` },
            children: [
              /* @__PURE__ */ x.jsx("span", { className: "inline-block mr-2 transform transition-transform duration-200", style: { transform: i ? "rotate(90deg)" : "rotate(0deg)" }, children: "▶" }),
              /* @__PURE__ */ x.jsxs("span", { className: "text-gray-500 mr-1", children: [
                a,
                ":"
              ] }),
              /* @__PURE__ */ x.jsx("span", { className: "text-gray-900 font-semibold", children: e.groupValue }),
              /* @__PURE__ */ x.jsxs("span", { className: "ml-2 text-gray-400 text-xs text-pill bg-white px-2 py-0.5 rounded-full border", children: [
                e.count,
                " records"
              ] })
            ]
          }
        ),
        /* @__PURE__ */ x.jsx("td", { className: "border-b border-gray-200 bg-gray-100/80" })
      ]
    }
  );
}, c3e = () => {
  const { filters: e, addFilter: t, hiddenColumns: r, toggleHiddenColumn: n, groupBy: i, setGroupBy: a, frozenColumns: o, toggleFrozenColumn: s } = Mp(), { columns: l } = ly(), u = () => {
    l.length !== 0 && t({
      id: Math.random().toString(),
      columnId: l[0].id,
      operator: "contains",
      value: "Done",
      logicalOperator: "AND"
    });
  };
  return /* @__PURE__ */ x.jsxs("div", { className: "flex items-center gap-2 p-2 border-b bg-gray-50/50", children: [
    /* @__PURE__ */ x.jsxs("div", { className: "relative group", children: [
      /* @__PURE__ */ x.jsx(
        "input",
        {
          type: "text",
          placeholder: "Find...",
          className: "pl-8 pr-2 py-1 text-sm border rounded hover:border-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 w-48 transition-all"
        }
      ),
      /* @__PURE__ */ x.jsx("span", { className: "absolute left-2 top-1.5 text-gray-400 text-xs", children: "🔍" })
    ] }),
    /* @__PURE__ */ x.jsx("div", { className: "h-4 w-px bg-gray-300 mx-1" }),
    /* @__PURE__ */ x.jsxs(
      "button",
      {
        onClick: u,
        className: `flex items-center px-2 py-1 text-sm rounded hover:bg-gray-200 transition-colors ${e.length > 0 ? "text-blue-600 bg-blue-50" : "text-gray-600"}`,
        children: [
          /* @__PURE__ */ x.jsx("span", { className: "mr-1", children: "🌪" }),
          "Filter",
          e.length > 0 && /* @__PURE__ */ x.jsx("span", { className: "ml-1 text-xs bg-blue-100 text-blue-800 px-1 rounded-full", children: e.length })
        ]
      }
    ),
    /* @__PURE__ */ x.jsxs("button", { className: "flex items-center px-2 py-1 text-sm text-gray-600 rounded hover:bg-gray-200 transition-colors", children: [
      /* @__PURE__ */ x.jsx("span", { className: "mr-1", children: "⇅" }),
      "Sort"
    ] }),
    /* @__PURE__ */ x.jsxs("div", { className: "relative group", children: [
      /* @__PURE__ */ x.jsxs("button", { className: `flex items-center px-2 py-1 text-sm rounded hover:bg-gray-200 transition-colors ${i.length > 0 ? "text-blue-600 bg-blue-50" : "text-gray-600"}`, children: [
        /* @__PURE__ */ x.jsx("span", { className: "mr-1", children: "⚏" }),
        "Group",
        i.length > 0 && /* @__PURE__ */ x.jsx("span", { className: "ml-1 text-xs bg-blue-100 text-blue-800 px-1 rounded-full", children: i.length })
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "absolute top-full left-0 mt-1 w-48 bg-white border rounded shadow-lg hidden group-hover:block z-50 p-1", children: [
        /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold text-gray-500 px-2 py-1", children: "Group by..." }),
        l.map((c) => /* @__PURE__ */ x.jsxs(
          "div",
          {
            className: "flex items-center px-2 py-1 hover:bg-gray-100 cursor-pointer text-sm",
            onClick: () => {
              const f = i.includes(c.id) ? i.filter((d) => d !== c.id) : [...i, c.id];
              a(f);
            },
            children: [
              /* @__PURE__ */ x.jsx(
                "input",
                {
                  type: "checkbox",
                  checked: i.includes(c.id),
                  readOnly: !0,
                  className: "mr-2"
                }
              ),
              c.title
            ]
          },
          c.id
        ))
      ] })
    ] }),
    /* @__PURE__ */ x.jsxs("div", { className: "relative group", children: [
      /* @__PURE__ */ x.jsxs("button", { className: "flex items-center px-2 py-1 text-sm text-gray-600 rounded hover:bg-gray-200 transition-colors", children: [
        /* @__PURE__ */ x.jsx("span", { className: "mr-1", children: "👁" }),
        "Columns"
      ] }),
      /* @__PURE__ */ x.jsxs("div", { className: "absolute top-full left-0 mt-1 w-64 bg-white border rounded shadow-lg hidden group-hover:block z-50 p-2", children: [
        /* @__PURE__ */ x.jsx("div", { className: "text-xs font-semibold text-gray-500 mb-2", children: "Column Settings" }),
        /* @__PURE__ */ x.jsx("div", { className: "max-h-60 overflow-y-auto", children: l.map((c) => /* @__PURE__ */ x.jsxs(
          "div",
          {
            className: "flex items-center justify-between px-2 py-1.5 hover:bg-gray-100 rounded text-sm group/item",
            children: [
              /* @__PURE__ */ x.jsxs(
                "div",
                {
                  className: "flex items-center cursor-pointer flex-1",
                  onClick: () => n(c.id),
                  children: [
                    /* @__PURE__ */ x.jsx(
                      "input",
                      {
                        type: "checkbox",
                        checked: !r.has(c.id),
                        readOnly: !0,
                        className: "mr-2"
                      }
                    ),
                    /* @__PURE__ */ x.jsx("span", { className: "truncate", title: c.title, children: c.title })
                  ]
                }
              ),
              /* @__PURE__ */ x.jsx(
                "button",
                {
                  onClick: (f) => {
                    f.stopPropagation(), s(c.id);
                  },
                  className: `ml-2 p-1 rounded hover:bg-gray-300 ${o.has(c.id) ? "text-blue-600 bg-blue-50" : "text-gray-400 opacity-0 group-hover/item:opacity-100"}`,
                  title: "Freeze Column",
                  children: "❄"
                }
              )
            ]
          },
          c.id
        )) })
      ] })
    ] }),
    /* @__PURE__ */ x.jsx("div", { className: "h-4 w-px bg-gray-300 mx-1" }),
    /* @__PURE__ */ x.jsx("button", { className: "p-1 rounded hover:bg-gray-200 text-gray-500", children: "Row Height" }),
    /* @__PURE__ */ x.jsxs(
      "button",
      {
        className: "flex items-center px-2 py-1 text-sm text-red-600 hover:bg-red-50 rounded transition-colors ml-2",
        onClick: () => {
          const { activeCell: c } = uy.getState(), { deleteRow: f, rows: d } = V0.getState();
          if (c) {
            const h = d[c.rowIndex];
            h && confirm("Delete this row?") && (f(h.id), uy.getState().clearSelection());
          } else
            alert("Select a cell to delete its row");
        },
        children: [
          /* @__PURE__ */ x.jsx("span", { className: "mr-1", children: "🗑" }),
          "Delete Row"
        ]
      }
    ),
    /* @__PURE__ */ x.jsx("div", { className: "flex-1" }),
    /* @__PURE__ */ x.jsx("button", { className: "px-3 py-1 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors shadow-sm", children: "Share" })
  ] });
}, f3e = (e, t) => {
  const [r, n] = Ze(null);
  return { sortedData: Gt(() => {
    if (!r || !r.direction)
      return e;
    const o = t.find((s) => s.id === r.columnId);
    return o ? [...e].sort((s, l) => {
      var d, h;
      const u = ((d = s.row) == null ? void 0 : d[o.title]) ?? s[o.title], c = ((h = l.row) == null ? void 0 : h[o.title]) ?? l[o.title];
      if (u === c) return 0;
      if (u == null) return 1;
      if (c == null) return -1;
      const f = u > c ? 1 : -1;
      return r.direction === "asc" ? f : -f;
    }) : e;
  }, [e, r, t]), sortConfig: r, toggleSort: (o) => {
    n((s) => {
      if ((s == null ? void 0 : s.columnId) === o) {
        if (s.direction === "asc") return { columnId: o, direction: "desc" };
        if (s.direction === "desc") return null;
      }
      return { columnId: o, direction: "asc" };
    });
  } };
}, d3e = (e, t) => {
  const { filters: r } = Mp();
  return { filteredData: Gt(() => r.length === 0 ? e : e.filter((i) => r.every((a) => {
    var l;
    const o = t.find((u) => u.id === a.columnId);
    if (!o) return !0;
    const s = ((l = i.row) == null ? void 0 : l[o.title]) ?? i[o.title];
    switch (a.operator) {
      case "contains":
        return String(s || "").toLowerCase().includes(String(a.value).toLowerCase());
      case "eq":
        return String(s) === String(a.value);
      case "neq":
        return String(s) !== String(a.value);
      case "isEmpty":
        return s == null || s === "";
      case "isNotEmpty":
        return s != null && s !== "";
      default:
        return !0;
    }
  })), [e, r, t]) };
}, h3e = (e, t) => {
  const { groupBy: r, expandedGroups: n } = Mp();
  return { groupedData: Gt(() => {
    if (r.length === 0) return e;
    const a = [], o = (s, l, u) => {
      if (l >= r.length) {
        a.push(...s);
        return;
      }
      const c = r[l], f = t.find((h) => h.id === c);
      if (!f) {
        a.push(...s);
        return;
      }
      const d = /* @__PURE__ */ new Map();
      s.forEach((h) => {
        var g;
        const p = ((g = h.row) == null ? void 0 : g[f.title]) ?? h[f.title], v = String(p);
        d.has(v) || d.set(v, []), d.get(v).push(h);
      });
      for (const [h, p] of d) {
        const v = [...u, h], g = v.join("::"), m = {
          isGroup: !0,
          groupKey: g,
          groupValue: h,
          depth: l,
          count: p.length,
          path: v,
          columnId: c
        };
        a.push(m), n.has(g) && o(p, l + 1, v);
      }
    };
    return o(e, 0, []), a;
  }, [e, r, t, n]) };
}, p3e = ({
  totalItems: e,
  itemHeight: t,
  containerHeight: r,
  buffer: n = 5
}) => {
  const [i, a] = Ze(0), o = e * t, s = Math.max(0, Math.floor(i / t) - n), l = Math.min(
    e - 1,
    Math.floor((i + r) / t) + n
  );
  return {
    visibleItems: Gt(() => {
      const f = [];
      for (let d = s; d <= l; d++)
        f.push({
          index: d,
          offsetTop: d * t
        });
      return f;
    }, [s, l, t]),
    totalHeight: o,
    onScroll: (f) => {
      a(f.currentTarget.scrollTop);
    },
    scrollTop: i
  };
}, v3e = () => {
  const e = Ve(null), [t, r] = Ze({ width: 0, height: 0 });
  return Hh(() => {
    if (!e.current) return;
    const n = new ResizeObserver((i) => {
      if (!i || i.length === 0) return;
      const { width: a, height: o } = i[0].contentRect;
      r({ width: a, height: o });
    });
    return n.observe(e.current), () => {
      n.disconnect();
    };
  }, []), { ref: e, width: t.width, height: t.height };
}, v2 = 35, yLe = () => {
  const { columns: e, isLoading: t } = ly(), { rows: r, isLoading: n, setRows: i, addRow: a } = V0(), { hiddenColumns: o, frozenColumns: s } = Mp(), { ref: l, height: u } = v3e(), { visibleColumns: c, stickyOffsets: f } = se.useMemo(() => {
    const A = e.filter((E) => !o.has(E.id)), M = A.filter((E) => s.has(E.id)), D = A.filter((E) => !s.has(E.id)), N = [...M, ...D], R = {};
    let O = 50;
    return N.forEach((E) => {
      s.has(E.id) && (R[E.id] = O, O += E.width || 150);
    }), { visibleColumns: N, stickyOffsets: R };
  }, [e, o, s]), d = c;
  Oe(() => {
    if (e.length === 0 && ly.setState({
      columns: [
        { id: "1", title: "Title", uidt: "Text", width: 200 },
        {
          id: "2",
          title: "Status",
          uidt: "SingleSelect",
          width: 120,
          colOptions: {
            options: [
              { label: "Done", value: "Done" },
              { label: "In Progress", value: "In Progress" },
              { label: "To Do", value: "To Do" }
            ]
          }
        },
        { id: "3", title: "Priority", uidt: "SingleSelect", width: 100 },
        { id: "4", title: "Active", uidt: "Checkbox", width: 80 },
        { id: "5", title: "Budget", uidt: "Number", width: 100 }
      ]
    }), r.length === 0) {
      const A = Array.from({ length: 1e3 }).map((M, D) => ({
        id: D,
        row: {
          Title: `Task Item ${D}`,
          Status: D % 3 === 0 ? "Done" : D % 3 === 1 ? "In Progress" : "To Do",
          Priority: D % 5 === 0 ? "High" : D % 5 === 1 ? "Medium" : "Low",
          Active: D % 2 === 0,
          Budget: (Math.random() * 1e4).toFixed(2)
        }
      }));
      i(A);
    }
  }, [i, r.length, e.length]);
  const { filteredData: h } = d3e(r, e), { sortedData: p, sortConfig: v, toggleSort: g } = f3e(h, d), { groupedData: m } = h3e(p, d), { visibleItems: y, onScroll: b } = p3e({
    totalItems: m.length,
    itemHeight: v2,
    containerHeight: u - 40,
    buffer: 10
  }), w = y.length > 0 ? y[0].index * v2 : 0, _ = y.length > 0 ? (m.length - y[y.length - 1].index - 1) * v2 : 0, S = () => {
    a({ Title: "New Record" });
  }, C = (A) => {
    if (A.key === "Delete" || A.key === "Backspace") {
      const { selectedCells: M } = uy.getState();
      M.size > 0;
    }
  };
  return t || n ? /* @__PURE__ */ x.jsx("div", { className: "p-4 text-gray-500", children: "Loading grid..." }) : /* @__PURE__ */ x.jsxs("div", { className: "flex flex-col h-full bg-white border rounded shadow-sm overflow-hidden", children: [
    /* @__PURE__ */ x.jsx("div", { className: "flex-none", children: /* @__PURE__ */ x.jsx(c3e, {}) }),
    /* @__PURE__ */ x.jsxs(
      "div",
      {
        className: "flex-1 overflow-auto relative outline-none",
        ref: l,
        onScroll: b,
        tabIndex: 0,
        onKeyDown: C,
        children: [
          /* @__PURE__ */ x.jsxs("table", { className: "min-w-full divide-y divide-gray-200 table-fixed", children: [
            /* @__PURE__ */ x.jsx("thead", { className: "bg-gray-50 sticky top-0 z-20 shadow-sm h-8", children: /* @__PURE__ */ x.jsxs("tr", { children: [
              /* @__PURE__ */ x.jsx("th", { className: "w-12 px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50 border-b border-r sticky left-0 z-30", children: "#" }),
              d.map((A) => /* @__PURE__ */ x.jsx(
                t3e,
                {
                  column: A,
                  sortDirection: (v == null ? void 0 : v.columnId) === A.id ? v == null ? void 0 : v.direction : null,
                  onSort: () => g(A.id),
                  stickyLeft: f[A.id]
                },
                A.id
              )),
              /* @__PURE__ */ x.jsx(
                "th",
                {
                  className: "w-10 px-2 py-2 border-b text-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 cursor-pointer bg-gray-50",
                  onClick: S,
                  title: "Add Row",
                  children: "+"
                }
              )
            ] }) }),
            /* @__PURE__ */ x.jsxs("tbody", { className: "bg-white", children: [
              w > 0 && /* @__PURE__ */ x.jsx("tr", { children: /* @__PURE__ */ x.jsx("td", { style: { height: w }, colSpan: d.length + 2 }) }),
              y.map(({ index: A }) => {
                const M = m[A];
                return M.isGroup ? /* @__PURE__ */ x.jsx(
                  u3e,
                  {
                    row: M,
                    columns: d
                  },
                  M.groupKey
                ) : /* @__PURE__ */ x.jsx(
                  l3e,
                  {
                    index: A,
                    row: M,
                    columns: d,
                    stickyOffsets: f
                  },
                  M.id || A
                );
              }),
              _ > 0 && /* @__PURE__ */ x.jsx("tr", { children: /* @__PURE__ */ x.jsx("td", { style: { height: _ }, colSpan: d.length + 2 }) })
            ] })
          ] }),
          m.length === 0 && /* @__PURE__ */ x.jsx("div", { className: "flex justify-center items-center h-40 text-gray-400", children: "No records found" })
        ]
      }
    ),
    /* @__PURE__ */ x.jsxs("div", { className: "border-t bg-gray-50 p-1 text-xs text-gray-500 px-2 flex justify-between", children: [
      /* @__PURE__ */ x.jsxs("span", { children: [
        m.length,
        " rows (Virtual)"
      ] }),
      /* @__PURE__ */ x.jsx("span", { children: h.length !== r.length ? "(Filtered)" : "" })
    ] })
  ] });
};
export {
  eLe as ADD_NEW_COLUMN_WIDTH,
  zLe as ActionBus,
  V2e as ActiveFilters,
  jIe as ActivityRenderer,
  ZH as AgentThinkingMessage,
  $Le as AiControlProvider,
  t2e as AreaChart,
  IQ as AuroraPatternBackground,
  UG as AvatarUpload,
  ak as Badge,
  n2e as BarChart,
  QH as BoundSchemaRenderer,
  rW as Box,
  tG as BoxChat,
  v2e as BoxplotChart,
  I4e as Breadcrumb,
  m2e as BubbleChart,
  xt as Button,
  nLe as CELL_TYPE_ICONS,
  Wi as COLUMN_HEADER_HEIGHT_IN_PX,
  E5e as Calendar,
  VH as CalendarToolbar,
  _2e as CalendarView,
  Y2e as CanvasGrid,
  xl as Caption,
  HH as ChatHeader,
  KH as ChatInput,
  ZIe as ChatKitBoxChat,
  eG as ChatKitViewPanel,
  Ig as ChatPanel,
  UIe as ChatRuntimeProvider,
  Zc as Checkbox,
  DQ as Checklist,
  p4e as Code,
  S2e as CohortAnalysis,
  nW as Col,
  wP as ColorPicker,
  l2e as ComboChart,
  ILe as Container,
  LLe as Content,
  tf as CornerPanel,
  rLe as DEFAULT_COLUMN_WIDTHS,
  RLe as DashboardLayout,
  La as DatePicker,
  Ra as DatetimePicker,
  EQ as DescriptionList,
  wY as Divider,
  i2e as DonutChart,
  Xt as EChartsBase,
  ok as EmptyState,
  lM as EventDialog,
  Il as EventType,
  bY as ExcelGrid,
  YG as FileUploader,
  wLe as FileUploaderSelectedFiles,
  k2e as FinancialChart,
  JLe as FloatingActionButton,
  uP as Form,
  _Le as FormErrorBanner,
  cP as FormField,
  SLe as FormFieldController,
  d2e as FunnelChart,
  Rr as GRID_COLORS,
  f2e as GenericComboChart,
  M2e as GeographicMap,
  wQ as GlassPanel,
  hW as Grid,
  t3e as GridHeader,
  l3e as GridRow,
  yLe as GridTable,
  v4e as H1,
  g4e as H2,
  m4e as H3,
  y4e as H4,
  x4e as H5,
  b4e as H6,
  w4e as Heading,
  h2e as HeatmapChart,
  bl as Icon,
  L2 as Iframe,
  Da as Image,
  _Q as ImageList,
  P5e as InfiniteMonthCalendar,
  mr as Input,
  T5e as KanbanBoard,
  Ek as KanbanBoardToolbar,
  _4e as Label,
  PLe as Layout,
  r2e as LineChart,
  A4e as List,
  QLe as MagneticCard,
  ZG as MaskedInput,
  see as MediaPreview,
  oh as MenuDropdown,
  sg as MenuDropdownPortal,
  YH as MessageItem,
  XH as MessageList,
  C2e as MetricComparison,
  Pa as Modal,
  e4e as MotionBox,
  t4e as MotionProvider,
  CLe as OptionSourceType,
  LQ as PageLayout,
  P4e as Pagination,
  T2e as ParetoChart,
  NQ as PatternBackground,
  a2e as PieChart,
  xW as Popover,
  bP as PopoverContent,
  xP as PopoverTrigger,
  L4 as ROW_HEIGHT_IN_PX,
  mi as ROW_META_COLUMN_WIDTH,
  g2e as RadarChart,
  y2e as RadialGauge,
  XG as Radio,
  KG as RadioGroup,
  kP as Rating,
  r4e as RevealOnScroll,
  SY as Roadmap,
  pQ as RoadmapFlow,
  iW as Row,
  tLe as SELECTION_COLORS,
  x2e as SankeyDiagram,
  s2e as ScatterChart,
  TLe as SchemaForm,
  fM as SchemaRenderer,
  ALe as SchemaType,
  cy as Select,
  qG as SelectLazy,
  uee as SidebarNav,
  SQ as Skeleton,
  n4e as SlideInPanel,
  JG as Slider,
  HLe as SocketProvider,
  tW as Spacer,
  oee as SpeedDial,
  E4e as Spinner,
  Mk as SplitPane,
  i4e as SpotlightCard,
  kLe as Stack,
  o2e as StackedChart,
  aW as Statistic,
  AQ as StatisticGroup,
  gQ as Step,
  mQ as StepNavigation,
  vQ as Steps,
  iP as Switch,
  oW as Table,
  A2e as TableAnalytics,
  SV as TableFilterToolbar,
  j2e as TableToolbar,
  L4e as Tabs,
  Q2e as TaskForm,
  aS as Text,
  Lg as Textarea,
  F3e as ThemeModeSwitch,
  B3e as ThemeProvider,
  oP as ThemeSwitch,
  w2e as Timeline,
  QG as TiptapEditor,
  S4e as Title,
  D4e as Toast,
  dW as Tooltip,
  cee as TopNav,
  b2e as TreeMap,
  lee as TreeView,
  C4e as Typography,
  ye as UITypes,
  V3e as Utils,
  p2e as WaterfallChart,
  jLe as actionBus,
  QR as applyJsonPatch,
  GLe as auditLoggerMiddleware,
  O2e as buildHistogram,
  Y3e as clearRegisteredThemes,
  iLe as clearTextCache,
  AW as compactNumber,
  dLe as createComponentRegistry,
  mLe as createHttpChatTransport,
  FH as createOptimisticOutgoingMessage,
  W2e as debounce,
  iIe as defaultComponentRegistry,
  TP as defaultTheme,
  kW as emeraldTheme,
  BH as eventToDialogValue,
  vLe as extendedComponentRegistry,
  TW as formatCurrency,
  _P as formatDate,
  O5e as formatDateSeparatorLabel,
  _W as formatDateTime,
  EW as formatFileSize,
  z5e as formatMessageTime,
  CW as formatNumber,
  MW as formatPercentage,
  A5e as formatRangeTitle,
  lLe as formatRowMetaCell,
  SP as formatTime,
  Jc as generateId,
  Vb as getCellAtPosition,
  G2e as getCellDisplayValue,
  cLe as getCellTypeIcon,
  aLe as getDefaultCanvasContext,
  uLe as getDefaultColumnWidth,
  sLe as getDefaultValueForColumn,
  il as getLocalTimeZone,
  W3e as getRegisteredTheme,
  kIe as getStateValue,
  z2e as histogramBinsToBarChartDto,
  k4 as isColumnEditable,
  j5e as isProbablyUrl,
  uM as isSameDay,
  K3e as isThemeDefinition,
  zW as isThemeMode,
  q3e as isThemeState,
  bM as isThemeVars,
  oLe as isVirtualColumn,
  k5e as isYesterday,
  U3e as listRegisteredThemes,
  yl as measureTextWidth,
  pLe as mergeComponentRegistry,
  a4e as motionDurations,
  o4e as motionEasings,
  s4e as motionSprings,
  Dd as normalizeEnd,
  YR as parseDateString,
  ZR as parseDateTimeString,
  WLe as piiFilterMiddleware,
  hLe as registerComponent,
  AP as registerTheme,
  H3e as registerThemes,
  Bu as renderRectangle,
  P4 as renderSingleLineText,
  OIe as resolveBindings,
  c2 as scrollToBottom,
  gLe as sdkComponentRegistry,
  Z3e as themeDefinitionJsonSchema,
  $3e as themePresets,
  X3e as themeStateJsonSchema,
  xM as themeVarsJsonSchema,
  O4 as throttle,
  SW as timeAgo,
  $H as toDate,
  u2 as toDateString,
  UR as toDateTimeString,
  ULe as tokens,
  G3e as unregisterTheme,
  VLe as useActionBus,
  YLe as useAiControl,
  BLe as useAsyncAction,
  U2e as useCanvasGrid,
  e2e as useChartAiControl,
  YIe as useChatRuntime,
  qc as useDispatchAction,
  l4e as useFadeIn,
  MLe as useFormErrors,
  ELe as useFormSubmit,
  V5e as useIsAtBottom,
  Gh as useIsBreakpoint,
  X2e as useKanbanAiControl,
  Z2e as useKanbanData,
  u4e as useMagneticHover,
  J3e as useMediaQuery,
  c4e as useParallax,
  gS as usePopover,
  B5e as usePreserveScrollOnPrepend,
  ZLe as useSocketContext,
  XLe as useSocketEmit,
  KLe as useSocketEvent,
  f4e as useSpotlight,
  d4e as useStaggerChildren,
  al as useSubscribeAction,
  DW as useTheme,
  DLe as useZodForm,
  Q3e as valuesToHistogramBarChartDto,
  OW as violetTheme
};
