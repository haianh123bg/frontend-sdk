"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("../chunks/Switch-BYjY6xL0.cjs"),e=require("../chunks/FormSubmitButton-DZIlAL__.cjs"),I=require("../chunks/jsx-runtime-BYECrxsp.cjs"),F=require("react"),S=require("../chunks/types-BiGI-P88.cjs");function k({name:a,children:r,...u}){const{control:t}=e.useFormContext(),o=e.useFieldArray({control:t,name:a,...u});return I.jsxRuntimeExports.jsx(I.jsxRuntimeExports.Fragment,{children:r(o)})}function C(a){const{schema:r,formOptions:u,request:t,parseError:o,onSuccess:s,onError:n,onFinally:d}=a,m=r?e.useZodForm({schema:r,...u||{}}):e.useForm(u||{}),{setFormErrors:h,formRef:b}=e.useFormErrors(m),{handleSubmit:i,isSubmitting:c,formError:p,data:A}=e.useFormSubmit({request:t,parseError:o,onSuccess:s,onError:y=>{const g=h(y);return n==null||n(y),g},onFinally:d});return{methods:m,formRef:b,handleSubmit:i,isSubmitting:c,formError:p,data:A}}function T(a,r,u={}){const[t,o]=F.useState(0),s=u.shouldFocus??!0,n=F.useCallback(async i=>{const c=r[i];return!c||!c.fields||c.fields.length===0?!0:a.trigger(c.fields,{shouldFocus:s})},[a,s,r]),d=F.useCallback(async()=>await n(t)?(t<r.length-1&&o(c=>c+1),!0):!1,[t,r.length,n]),m=F.useCallback(()=>{o(i=>i>0?i-1:i)},[]),h=F.useCallback(async(i,c)=>i<0||i>=r.length||c!=null&&c.validate&&!await n(t)?!1:(o(i),!0),[t,r.length,n]),b=F.useCallback(()=>{o(0)},[]);return{stepIndex:t,currentStep:r[t],steps:r,isFirstStep:t===0,isLastStep:t===r.length-1,next:d,back:m,goTo:h,reset:b}}const f=(a,r)=>{var o,s;const u=(o=a.meta)==null?void 0:o.target;if(u!=null&&u.instanceId&&u.instanceId!==r)return!1;const t=(s=a.payload)==null?void 0:s.instanceId;return!(t&&t!==r)};function E(a){const{instanceId:r,methods:u,formRef:t}=a;S.useSubscribeAction("AI.FORM.FILL_FIELDS",o=>{var n;if(!f(o,r))return;const s=(n=o.payload)==null?void 0:n.values;s&&Object.entries(s).forEach(([d,m])=>{u.setValue(d,m,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})})},[r,u]),S.useSubscribeAction("AI.FORM.SET_FIELD",o=>{if(!f(o,r))return;const{name:s,value:n}=o.payload||{};s&&u.setValue(s,n,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},[r,u]),S.useSubscribeAction("AI.FORM.RESET",o=>{var n;if(!f(o,r))return;const s=(n=o.payload)==null?void 0:n.values;s?u.reset(s):u.reset()},[r,u]),S.useSubscribeAction("AI.FORM.FOCUS_FIELD",o=>{if(!f(o,r))return;const{name:s}=o.payload||{};if(s&&(typeof u.setFocus=="function"&&u.setFocus(s),t!=null&&t.current)){const n=t.current.querySelector(`[name="${s}"]`);n&&typeof n.focus=="function"&&(n.focus(),typeof n.scrollIntoView=="function"&&n.scrollIntoView({block:"center",behavior:"smooth"}))}},[r,u,t]),S.useSubscribeAction("AI.FORM.SUBMIT",o=>{f(o,r)&&t!=null&&t.current&&typeof t.current.requestSubmit=="function"&&t.current.requestSubmit()},[r,t])}exports.Button=l.Button;exports.Checkbox=l.Checkbox;exports.DatePicker=l.DatePicker;exports.DatetimePicker=l.DatetimePicker;exports.Input=l.Input;exports.Select=l.Select;exports.Switch=l.Switch;exports.AvatarUpload=e.AvatarUpload;exports.Controller=e.Controller;exports.FileUploader=e.FileUploader;exports.FileUploaderSelectedFiles=e.FileUploaderSelectedFiles;exports.Form=e.ForwardForm;exports.FormErrorBanner=e.FormErrorBanner;exports.FormField=e.FormField;exports.FormFieldController=e.FormFieldController;exports.FormProvider=e.FormProvider;exports.FormSubmitButton=e.FormSubmitButton;exports.MaskedInput=e.MaskedInput;exports.OptionSourceType=e.OptionSourceType;exports.Radio=e.Radio;exports.RadioGroup=e.RadioGroup;exports.SchemaForm=e.SchemaForm;exports.SchemaType=e.SchemaType;exports.SelectLazy=e.SelectLazy;exports.Slider=e.Slider;exports.Textarea=e.Textarea;exports.ThemeSwitch=e.ThemeSwitch;exports.useForm=e.useForm;exports.useFormContext=e.useFormContext;exports.useFormErrors=e.useFormErrors;exports.useFormSubmit=e.useFormSubmit;exports.useZodForm=e.useZodForm;exports.FormFieldArray=k;exports.useApiForm=C;exports.useFormAiControl=E;exports.useFormWizard=T;
